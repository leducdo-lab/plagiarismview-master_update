{"highlight":{},"res":{"r":39.78494644165039,"s":[{"saved_path":"temp/do-an-trien-khai-he-thong-mang-cho-cong-ty-le-hang-46262","r":0,"s":[],"t":"\nNHẬN XÉT CỦA GIÁO VIÊN HIỆN TRẠNG Công ty Lệ Hằng có trụ sở tại TPHCM , công ty mới thành lập thêm một chi nhánh ở Hải Phòng. Công Ty Lệ Hằng có nhu cầu Xây dựng hệ thống VoIP để phục vụ cho công việc. YÊU CẦU CỦA CÔNG TY LỆ HẰNG Số lượng máy trạm ở các phòng: P.Giám Đốc: 1 máy + 1 printer P.Nghiên cứu: 14 máy + 1 printer P.Chăm sóc khách hàng: 10 máy + 1 printer P.Kỹ thuật: 10 máy + 1 printer P.Kinh doanh: 12 máy + 1 printer Các phòng có thể trao đổi dữ liệu với nhau Cung cấp kết nối internet cho tất cả các phòng Cung cấp kết nối internet cho khách hàng thông qua mạng không dây Thuê 3 đường truyền ADSL Mỗi phòng sử dụng 1 nhánh mạng riêng Xây dựng firewall cho hệ thống mạng trên Lọc các gói tin từ mạng nội bộ của công ty ra ngoài internet Giám sát các lưu lượng truyền thông giữa mạng nội bộ và internet Cho phép các user thuộc nhóm Giám Đốc, Kỹ Thuật và Nghiên Cứu truy cập internet không hạn chế Cho phép các user thuộc nhóm Kinh Doanh chỉ được phép truy cập 1 số trang web trong giờ hành chính Cho phép các user thuộc nhóm Chăm Sóc Khách Hàng được truy cập web trong giờ giải lao, ngoại trừ trang ngôisao.net Không cho nghe nhạc trực tuyến, cấm chat yahoo, cấm download file có đuôi .exe trong giờ hành chính Cấm truy cập 1 số trang web, nếu truy cập sẽ tự động chuyển đến trang web cảnh báo của công ty Cấm khách hàng truy xuất vào tài nguyên của công ty Xây dựng hệ thống giúp cập nhật các bản vá lỗi hệ điều hành cho các máy tính trong mạng Xây dựng fileserver cho hẹ thống mạng Xây dựng hệ thống quản lý tập trung cho tất cả phòng ban Thiết lập printer server tại phòng Kinh Doanh. Ngoài ra, mỗi phòng được trang bị thêm 1 máy in Xây dựng DNS nội bộ và DHCP server Các nhân viên có thể gửi mail cho nhau (mail server nội bộ) Xây dựng web server nội bộ cho phép báo cáo tuần và xem lịch phân công Thiết lập chính sách cho mỗi phòng ban như sau: Giám Đốc: có quyền truy xuất đến tất cả các tài nguyên trong hệ thống mạng Kinh Doanh và Chăm Sóc Khách Hàng có quyền quản lý các máy in trong mạng Kỹ Thuật có toàn quyền trong hệ thống mạng ĐỀ XUẤT PHƯƠNG ÁN THỰC HIỆN Phương án 1: Ta chỉ cần 1 Server chính đóng tất cả các vai trò trong mạng của công ty Tính toán số lượng thiết bị và giá thành để triển khai hệ thống mạng trên Liệt kê danh sách thiết bị cần thiết Xây dựng sơ đồ vật lý và logic Xây dựng sơ đồ địa chỉ IP cho hệ thống mạng trên Cung cấp kế nối cho tất cả các phòng Sử dụng thiết bị ghép line ADSL để tăng khả năng dự phòng Xây dựng firewall thỏa các yêu cầu Xây dựng web server Xây dựng mail server Thiết lập chính sách nhóm thỏa các yêu cầu trên Ưu điểm : Giảm thiết bị phần cứng , giảm tối thiểu giá thành của công ty Dễ dàng cài đặt , thời gian thực hiện rút ngắn tối đa. Công ty có thể sớm được hoạt động Khuyết điểm: Vì chỉ 1 Server gánh vác tất cả các vai trò nên có nhiều khuyết điểm xảy ra + hacker dễ dàng xâm nhập hệ thống và phá hoại tài nguyên công ty + dễ dàng xảy ra tình trạng nghẽn mạng hoặc quá tải Phương án 2: Ta sử dụng 4 server đóng vai trò : Web Server, Mail Server, File Server và 1 Server khác làm Firewall để tăng tính năng bảo mật Tính toán số lượng thiết bị và giá thành để triển khai hệ thống mạng trên Liệt kê danh sách thiết bị cần thiết Xây dựng sơ đồ vật lý và logic Xây dựng sơ đồ địa chỉ IP cho hệ thống mạng trên Cung cấp kế nối cho tất cả các phòng Sử dụng thiết bị ghép line ADSL để tăng khả năng dự phòng Xây dựng firewall thỏa các yêu cầu Xây dựng web server Xây dựng mail server Thiết lập chính sách nhóm thỏa các yêu cầu trên Ưu điểm : Server được phân phát công việc phân minh có thể giảm được tình trạng quá tải khi người dùng truy cập vào Web và Mail của công ty Xây dựng Firewall Server sẽ tăng thêm tính bảo mật, cho dù hacker có tấn công thì chỉ có Firewall Server bị ảnh hưởng, không xâm nhập vào tài nguyên công ty Khuyết điểm: Thiết bị tăng → giá thành tăng Độ bảo mật tăng cao, quá trình thực hiện lâu hơn Cấu hình nhiều server sẽ phức tạp hơn và thời gian kéo dài → công ty không thể hoạt động sớm Khuyến cáo: Ta nên sử dụng phương án 2 vì tính bảo mật rất cao, nếu theo phương án 1 khi bi hacker xâm nhập thì tổn thất sẽ rất nặng nề Tuy phương án 2 giá thành cao hơn hẳn nhưng tính bảo mật cao hơn nhiều, nếu như bị hacker tấn công thì phải wa 2 Firewall là Broadband ADSL Router và Firewall Server Quan trọng nhất là tăng được tính ổn định cho công ty Không gây nên tình trạng quá tải hoặc nghẽn mạng THỰC HIỆN 1/ Sơ Đồ Logic và IP Của Công Ty Lệ Hằng 2/ Sơ Đồ Vật Lý Của Công Ty Lệ Hằng 3/ Tính toán số lượng thiết bị và giá thành STT Thiết bị Tên Thiết Bị Đơn Vị Đơn Giá (USD) SL Thành Tiền 1 Server HP ML 350T05 E5410 SFF bộ 1200 4 4800 2 PC Màn hình 17\u2019\u2019 LG L1942S cái 150 47 7050 CPU ACER Aspire x 1800(001)PT.SBW09.011 bộ 210 47 9870 3 Switch 8 port WS-C2960-8TC-S cái 63 1 63 16 port LINK PRO1000 SGD-1600 cái 75 4 300 4 Access Point D-LINK DWL-2100AP cái 110 1 110 5 Printer HP-2000 cái 352 5 1760 6 Router ADSL Dray Tek V2700G cái 150 3 450 7 Broadband ADSL Router Dray Tek V3300B+ cái 700 1 700 8 Cable Cat 5e AMP met 2 420 840 Cat 6e AMP met 3 80 240 Tổng cộng : 26.183 USD 4/ Nâng cấp Server hệ thống lên thành Domain controler Để dễ dàng cho việc quản lý tài nguyên và dịch vụ trên hệ thống ta sẽ nâng cấp file server thành Domain controller Bước 1: Cấu hình địa chỉ IP tĩnh IP address: 192.168.1.1/24 Subnet Mask:255.255.255.0 Default gate way: 192.168.1.254 Preferred DNS server: 192.168.1.1 Bước 2: Cài đặt Chọn start àRun, nhập DCPROMO trong hộp thoại Run, nhấn OK Khi hộp thoại Active Directory installation wizard xuất hiện, nhấn Next Hộp thoại cảnh báo DOS, Window 95 và WinNT SP3 trở về trước sẽ bị loại ra khỏi miền Active Directory, chọn Next. Hộp thoại Domain controller Type chọn mục Domain controller for New Domain chọn Next Chọn Domain in New forest và nhấn Next Hộp thoại New Domain Name, nhập tên LeHang.com.vn nhấn Next Hộp thoại NetBIOS Domain Name, để mặc định và nhấn Next Hộp thoại Database and Log Locations để mặc định, nhấn Next Hộp thoại Shared System Volume để mặc định và chọn Next Hộp thoại DNS Registration Diagnoslics, chọn I will correct the problem later by configuring DNS manually, (Advanced), nhấn Next Hộp thoại Permissions, chọn Permissions compatible only with Windows 2000 servers or windows server 2003 vì hệ thống chỉ có các server 2003 Hộp thoại Directory Services Restore Mode Administrator password, nhập password trong trường hợp phục hồi hệ thống, chọn Next Hộp thoại Sumary, chọn Next Hộp thoại Configuring Active Directory cho biết quá trình cài đặt đang thực hiện những gì Hộp thoại Completing the Active Directory installation wizard, nhấn Finish để hoàn tất quá trình. 5/ Xây Dựng Máy Sever Đồng Hành Ta xây dựng hệ thống server đồng hành cho các Web Server và Mail server IP: 192.168.1.2/24 (WebServer) và 192.168.1.3/24 (MailServer) Gateway: không cần khai báo DNS: là ip của máy sever chính :192.168.1.1 → Kiểm tra ping xem máy web sever và mail server có thấy máy sever 1 hay không? Nếu thấy ta tiến hành tạo dựng sever đồng hành được. Thực hiện : →start \\ run → gõ DCPROMO → enter Ta nhấn next 2 lần, sau đó chọn dòng thứ 2 : xây dựng 1 sever phụ → nhập tên người quản trị trên máy sever chính: administrator → pass: pass của người quản trị trên sever chính → domain: tên sever chính LeHang.com.vn → next Nhập tên domain, ta chon Brown → chọn sever → next 2 lần next và sau đó nhập password của domain phụ (cần thiết khi gỡ bỏ sever) Next thêm 2 lần nữa máy tính sẽ hiển thị Khi hoàn thành ta nhấn nút finish và restart lại máy sever phụ. 6/ CẤU HÌNH ROUTING AND REMOTE ACCESS Vì máy server firewall có 3 card mạng nên lúc này đóng vai trò là 1 router mềm nên khi muốn máy trạm ping thấy để gia nhập vào domain, ta phải cấu hình routing and remote access cho server firewall router. Các bước thực hiện như sau : Vào Server manage, ta chọn \u201cRole\u201d , và \u201cAdd Role\u201d Trên hộp thoại Add Roles wizard, ta check vào mục \u201cNetwork Policy And Access Services\u201d rồi nhấn Next Trên hộp thoại \u201cNetwork policy and access services\u201d ta tiếp tục nhấn Next. Tại hộp thoại \u201cSelect Role Services\u201d ta chọn hết tất cả các mục và nhấn Next. Tại hộp thoại \u201cChoose The Certification Authority To Use With The Health Registration Authority\u201d ta chọn \u201cinstall a local CA to issue health\u2026\u201d và nhấn Next. Tiếp theo đó ta chọn mục \u201cNo, allow anonymous requests for health certificates\u201d để không cho phép anonymuos truy cập vào. Và chọn Next để tiếp tục. Tại hộp thoại \u201cChoose a Server Authentication Centificate for SSL Encryption\u201d , chọn \u201cCreat a self-signed certificate for SSL encryption\u201d và nhấn Next. Trên hộp thoại \u201cIntroduction to Active Directory Certificate Services\u201d và tiếp tục chọn Next. Trên hộp thoại \u201cSelect Role Services\u201d ta tiếp tục chọn Next. Tiếp đó tại hộp thoại \u201cSpecify Setup Type\u201d tùy vào Server mà ta chọn enterprise hoặc standalone tiếp tục chọn Next. Trên hộp thoại \u201cSpecify CA Type\u201d chọn \u201cRoot CA\u201d và chọn Next. Trên hộp thoại \u201cSet Up Private Key\u201d ta chọn \u201cCreat a new private key\u201d và Next. Trên hộp thoại \u201cConfigure Cryptography for CA\u201d ta để mặc định và chọn Next. Trên hộp thoại \u201cConfigure CA Name\u201d ta đặt tên cho CA và chọn Next để tiếp tục. Trên hộp thoại \u201cSet validity period\u201d ta đặt thời hiệu sử dụng CA cho Server và chọn Next. Trên hộp thoại \u201cconfigure certifycate Database\u201d ta để mặc định và chọn Next. Trên hộp thoại \u201cWeb Server (IIS)\u201d ta nhấn Next. Tiếp đó trên hộp thoại \u201cSelect Role Services\u201d ta lựa chọn các dịch vụ về IIS muốn cài đặt và chọn Next. Tại hộp thoại \u201cConfirm Installation Selections\u201d ta chọn install để việc cài đặt được tiến hành. Khi cài đặt xong ta chọn Close và restart lại server. Ta tiến hành khởi động dịch vụ bằng cách vào Start \\ program \\ administrative tools \\ routing and remote access Ta click mouse phải tên server và chọn \u201cconfigure and Enable Routing and remote Access\u201d để khởi động dịch vụ Tại hộp thoại Wellcome ta nhấn Next. Tại hộp thoại \u201cConfiguration\u201d ta chọn mục \u201cCustom configuration\u201d va chọn Next. Sau đó ta chọn mục \u201cLAN routing\u201d và chọn Next. Cuối cùng ta nhấn finish Tiếp đó ta nhấn ok và Start service để tiến hành khởi động dịch vụ và chuyển hóa Firewall Server thành router mềm. Khi dịch vụ đã khởi động ta nhấn Finish. 7/ CHIA VLAN và ĐỊNH TUYẾN Để các phòng ban tuy không cùng đường mạng nhưng vẫn có thể truyền thông lẫn nhau, ta tiến hành chia Vlan cho Switch để gom nhóm các đường mạng lại với nhau qua 1 Switch trung tâm. Ta tiến hành cấu hình trên Switch trung tâm như sau : Trên Switch Server a/ chia vlan và đặt tên cho các vlan b/ add các vlan vào các port tương ứng c/ chuyển cổng giao tiếp giữa switch server và router thành trunk d/ tạo 1 vtp domain trên switch server Lưu lại bằng lệnh write và thoát. Trên Switch Client Trên switch client ta gia nhập vào vtp domain và cấu hình cho sw là client như sau: Ta tiến hành thao tác cho các switch còn lại cũng như thế Trên Router mềm Ta tiến hành định tuyến cho router mềm để các vlan độc lập có thể ping thông với nhau trên services routing and remote access Ta chia vlan cho router, quy định giao thức hoạt động cho vlan và đặt ip cho tất cả các cổng vlan bằng lệnh như sau: Ta enable cổng f0/1 lên bằng lệnh \u201cno shutdown\u201d Cấu hình giao thức định tuyến RIPv2 Exit thêm lần và lưu lại 8/ GIA NHẬP MÁY TRẠM VÀO DOMAIN Trước tiên ta phải kiểm tra xem máy trạm có ping thấy sever không đã bằng cách : → Nhấn start \\ run → nhập CMD và enter , sau đó gõ lệnh : ping 192.168.0.65 Nếu máy trạm ping thấy sever co nghĩa ta gia nhập vào domain trên sever được. → Nhấp phải chuột trên biểu tượng My computer, chọn properties. Trong hộp thoại system properties chọn tab computer name , nhấp vào nút change. Hộp thoại xuất hiện ta chọn mục member of domain, gõ tên domain: LeHang.com.vn àOK Hộp thoại xuất hiện yêu cầu điền username và password người quản trị miền, phần user name ta điền : administrator. Password: ta gõ password của admin trên domain àok Hệ thống sẽ xuất hiện thông báo gia nhập miền thành công 9/ CÀI ĐẶT DNS \u2013 DHCP và IIS Đối với win server 2k8 ta vào mục server manager để cài đặt DNS và DHCP Sau đó ta chọn mục role và nhấn nút add role Chọn vào mục DHCP Server, DNS Server và Web Server (IIS) và nhấn next Quá trình cài đặt sẽ tiến hành tự động cho đến khi ta nhấn finish va kết thúc 10/ CẤU HÌNH DNS VÀ QUẢN TRỊ Khi đã cài đặt xong DNS cho File Server, ta vào Start \\ program \\ administrative tools \\ DNS I/ cấu hình DNS Ta tiến hành cấu hình DNS qua 4 bước cơ bản sau: A / tạo miền phân giải thuận cho DNS Ta chuột phải vào Forword lookup zones \\ new zone Tại hộp thoại \u201cwelcome to the new zone wizard\u201d ta chọn Next. Tại hộp thoại \u201cZone Type\u201d ta chọn \u201cPrimary zone\u201d và nhấn Next. Tại hộp thoại \u201cActive Directory Zone Replication Scope\u201d ta chọn \u201cto all domain controlers in the Active directory domain LeHangcom.vn\u201d và chọn Next. Tại hộp thoại \u201cZone Name\u201d ta đặt tên miền phân giải và chọn Next Tại hộp thoại \u201cDyamic Update\u201d ta chọn \u201callow only secure dyamic update\u201d và chọn Next. Và cuối cùng ta nhấn finish. B / tạo miền phân giải nghịch cho DNS Ta cũng làm tương tự như phân giải thuận nhấp chuột phải vào Reverse lookup zones \\ new zone Cũng trên hộp thoại \u201cwelcome\u201d ta nhấn Next. Trên hộp thoại \u201czone type\u201d cũng chọn \u201cprimary zone\u201d và nhấn Next. Tại hộp thoại \u201cActive Directory Zone Replication Scope\u201d ta chọn \u201cto all domain controlers in the Active directory domain LeHangcom.vn\u201d và chọn Next. Trên hộp thoại \u201cReverse lookup zone name\u201d ta nhập địa chỉ đường mạng của Server DNS cần phân giải là \u201c192.168.1\u201d và nhấn Next để tiếp tục. Tại hộp thoại \u201cDyamic Update\u201d ta chọn \u201callow only secure dyamic update\u201d và chọn Next. Và cuối cùng ta nhấn finish. C / tạo các phân giải cho DNS Server Tại miền phân giải chính ta chuột phải vào LeHang.com.vn và chọn new host (A) Đặt host name cho Server mà ta muốn phân giải DNS và nhập vào địa chỉ IP tương ứng Ta đánh dấu check vào mục \u201cCreate associated pointer (PTR) record\u201d để tự động tạo ra phân giải nghịch tương ứng cho Server. Và nhấn \u201cAdd host\u201d Tương tự như vậy ta tạo phân giải cho Web Server và Mail Server D / Sửa thông tin DNS Server thuận và nghịch Trên phân giải thuận: Tại zone thuận ta double click vào record (SOA) Tại mục \u201cprimary Server\u201d ta nhấn \u201cBrowse\u201d Tại bảng \u201cRecord\u201d ta double click đến khi chọn vào FileServer và nhấn ok Tiếp đó ta double click vào record \u201cName Server (NS)\u201d Nhấn vào \u201cEdit..\u201d để sửa thông tin Server Nhấn \u201cBrowse\u201d và double click đến khi chọn đến File Server rồi nhấn ok Trên phân giải nghịch: ta làm tương tự như trên. II/ Tạo Alias (CNAME) cho Web Server Trên zone thuận ta chuột phải vào server DNS Lehang.com.vn và chọn New Alias (CNAME)\u2026 Khung trống Alias name ta đặt bí danh cho Web Server. Ví dụ ta đặt: www Khung trống Fuly qualified domain name (FQDN) for target host : ta Browse đến DNS của Web Server. III/ Tạo dựng alias cho mail Server Trên zone thuận ta chuột phải vào server DNS Lehang.com.vn và chọn New Mail Exchange (MX).. Khung \u201cHost or child domain\u201d ta để trống Khung \u201c Fuly qualified domain name (FQDN) of mail server\u201d ta Browse đến DNS của Mail Server và ok Khi đã cấu hình và quản trị DNS xong thì ta sẽ được kết quả như sau: 11/ CẤU HÌNH DHCP Vào Start \\ Programs \\ administrative tools \\ DHCP Tại tên server ta thấy có mũi tên màu đỏ chĩa xuống (do chưa cấu hình) Ta chuột phải vào tên server và chọn New scope Tại hộp thoại welcome ta chọn Next. ở hộp thoại \u201cNew Scope Wizard\u201d ta đặt tên dãy DHCP mà ta muốn đặt va chọn Next. Tại hộp thoại \u201cIP Address Range\u201d ta quy định IP bắt đầu và IP cuối cùng của dãy DHCP Phần dưới ta quy định chiều dài Subnet mask và Subnet mask cụ thể rồi chọn Next. Tại hộp thoại \u201cAdd Exclusions\u201d ta điền vào 1 số IP muốn loại trừ trong khoảng IP động để sau này làm IP tĩnh hoặc dùng khi lúc cần thiết (nếu có) và chọn next. Hộp thoại \u201cLease Duration\u201d quy định thời hạn IP động được cấp phát, thời hạn mặc định là 8 ngày ta có thể điều chỉnh ngắn hơn hoặc dài hơn và chọn Next. Tại hộp thoại \u201cConfigure DHCP Options\u201d ta chọn \u201cyes, I want to configure options now\u201d nếu muốn cấu hình options cho DHCP ngay và chọn Next. Hộp thoại \u201cRouter (Default Gateway)\u201d ta điền vào địa chỉ IP gateway của dãy DHCP này rồi chọn \u201cAdd\u201d và Next. Tại hộp thoại \u201cDomain Name and DNS Server\u201d ta điền vào địa chỉ DNS của DNS Server rồi \u201cAdd\u201d và chọn Next. Hộp thoại \u201cWINS Server\u201d ta chọn Next. Tại hộp thoại \u201cActivate Scope\u201d ta chọn \u201cYes, I want to activate this scope now\u201d để activate cho dãy DHCP này hoạt động ngay và chọn Next. Và cuối cùng ta chọn Finish. Và theo cách làm trên ta lần lượt thiết lập DHCP cho từng phòng ban khác. Sau khi cấu hình cho DHCP ta phải chứng thực bằng cách nhấn chuột phải vào server và chọn \u201cAuthorize\u201d Sau 1 phút ta nhấn F5 để refresh lại dịch vụ DHCP và sẽ thấy được mũi tên màu đỏ chuyển thành màu xanh đi lên, đó là DHCP đã được khởi động. 12/ QUẢN TRỊ WEB SERVER (IIS) TRÊN WEB SERVER A / Trên Web Server ta cài đặt dịch vụ Web như sau: Vào Start \\ setting \\ control panel Chọn \u201cAdd/remove Windows components\u201d Chọn \u201cApplication Server\u201d rồi nhấn \u201cDetails\u2026\u201d (chú ý không đánh dấu check) Tiếp đó ta chọn \u201cInternet Information Services (IIS)\u201d và chọn \u201cDetails\u2026\u201d (không check) Sau đó ta check vào mục \u201cWorld Wide Web Service\u201d và ok đến hộp thoại \u201cWindows components\u201d rồi nhấn next để được cài đặt dịch vụ WWW Trong quá trình cài đặt có thể hỏi \u201cfile i386\u201d, ta trỏ vào thư mục chứa file i386 là được B / Quản Trị Web Server và up trang Web lên Server Khi cài đặt xong dịch vụ ta vào Start \\ program \\ administrative tools \\ Internet information services (IIS) Tại thư mục \u201cWeb Site\u201d ta \u201cStop\u201d Web site mặc định Ta chuột phải vào thư mục Web Sites, chọn New \\ Web Site Tại hộp thoại \u201cWelcome\u201d ta chọn Next. Tại hộp thoại \u201cWeb Site desciption\u201d ta đặt tên cho Web Site và chọn Next Tại hộp thoại \u201cIP Address and Port Setting\u201d quy định IP và port của Web Site, ta để mặc định và chọn Next. Tại hộp thoại \u201cWeb Site Home Directory\u201d chỉ định nơi chứa Web Site và chọn Next. Tại hộp thoại \u201cWeb Site Access Permissions\u201d chỉ định quyền hạng cho người truy cập WebSite chỉ có quyền đọc và chọn Next. Cuối cùng ta chọn Finish. Để hoàn thành quá trình up trang Web lên Web Server. Để mọi người có thể truy cập vào trang WebLeHang, ta gán quyền \u201c everyone\u201d cho trang WebLeHang như sau: Vào thư mục chứa tập tin trang WebLeHang và chuột phải chọn Properties Trong tab \u201cSercurity\u201d ta nhấn \u201cAdd\u201d Điền vào tên nhóm \u201cEveryone\u201d rồi nhấn ok Để quyền mặc định cho nhóm này chỉ được đọc và chọn ok Tiếp đến ta chọn cho trang WebLeHang vừa mới up lên làm trang Web mặc định như sau: Chuột phải vào thư mục WebSite chọn Properties Tại tab Documents ta Add vào trang WebLeHang để làm web mặc định. Điền tên trang web vào rồi nhấn ok Sau đó ta chọn WebLeHang và nhấn move up để đưa WebLeHang lên làm trang web đầu tiên và nhấn ok 1 hộp thoại hiện lên hỏi ta có chắc chắn đưa trang web nay lam trang mặc định không ta chọn ok Ta kiểm tra xem trang web có hoạt động được không bằng cách chuột phải trang WebLeHang và chọn Browse Kết quả đạt được như sau: Ta kiểm tra trên trang web bằng cách vào trang Web và gõ vào địa chỉ IP của Web Server Kết Quả: 13/ CÀI ĐẶT MS EXCHANGE SERVER TRÊN MAIL SERVER 14/ CÀI ĐẶT VÀ CẤU HÌNH ISA CHO FIREWALL SERVER A/ cài đặt ISA Chạy tập tin isaautorun.exe từ CD ROM ISA 2004 Nhấp chuột vào \u201cInstall ISA server 2004\u201d trong hộp thoại \u201cMicrosoft ISA server 2004 setup\u201d Nhấp Next trên hộp thoại \u201cWelcome to the installation Wizard for Microsoft ISA server 2004\u201d để tiếp tục cài đặt Chọn \u201cI accept\u201d trên bản hợp đồng sử dụng phần mềm và tiếp tục nhấn Next. Nhập một số thông tin về User name và Organization, nhập serial number, chọn Next. Chọn loại cài đặt \u201cCustom\u201d trong hộp thoại \u201c Setup type\u201d, chọn Next Trong hộp thoại \u201ccustom setup\u201d chọn thêm \u201cFirewall client install share\u201d, c","u":"http://202.191.57.85:8000/InternetData/Data/Luanvannet2/Tinhoc/do-an-trien-khai-he-thong-mang-cho-cong-ty-le-hang-46262","sentences":[[1,"Công Ty Lệ Hằng có nhu cầu Xây dựng hệ thống VoIP để phục vụ cho công việc"],[2,"YÊU CẦU CỦA CÔNG TY LỆ HẰNG Số lượng máy trạm ở các phòng: P.Giám Đốc: 1 máy + 1 printer P.Nghiên cứu: 14 máy + 1 printer P.Chăm sóc khách hàng: 10 máy + 1 printer P.Kỹ thuật: 10 máy + 1 printer P.Kinh doanh: 12 máy + 1 printer Các phòng có thể trao đổi dữ liệu với nhau Cung cấp kết nối internet cho tất cả các phòng Cung cấp kết nối internet cho khách hàng thông qua mạng không dây Thuê 3 đường truyền ADSL Mỗi phòng sử dụng 1 nhánh mạng riêng Xây dựng firewall cho hệ thống mạng trên Lọc các gói tin từ mạng nội bộ của công ty ra ngoài internet Giám sát các lưu lượng truyền thông giữa mạng nội bộ và internet Cho phép các user thuộc nhóm Giám Đốc, Kỹ Thuật và Nghiên Cứu truy cập internet không hạn chế Cho phép các user thuộc nhóm Kinh Doanh chỉ được phép truy cập 1 số trang web trong giờ hành chính Cho phép các user thuộc nhóm Chăm Sóc Khách Hàng được truy cập web trong giờ giải lao, ngoại trừ trang ngôisao.net Không cho nghe nhạc trực tuyến, cấm chat yahoo, cấm download file có đuôi .exe trong giờ hành chính Cấm truy cập 1 số trang web, nếu truy cập sẽ tự động chuyển đến trang web cảnh báo của công ty Cấm khách hàng truy xuất vào tài nguyên của công ty Xây dựng hệ thống giúp cập nhật các bản vá lỗi hệ điều hành cho các máy tính trong mạng Xây dựng fileserver cho hẹ thống mạng Xây dựng hệ thống quản lý tập trung cho tất cả phòng ban Thiết lập printer server tại phòng Kinh Doanh"],[3,"Ngoài ra, mỗi phòng được trang bị thêm 1 máy in Xây dựng DNS nội bộ và DHCP server Các nhân viên có thể gửi mail cho nhau (mail server nội bộ) Xây dựng web server nội bộ cho phép báo cáo tuần và xem lịch phân công Thiết lập chính sách cho mỗi phòng ban như sau: Giám Đốc: có quyền truy xuất đến tất cả các tài nguyên trong hệ thống mạng Kinh Doanh và Chăm Sóc Khách Hàng có quyền quản lý các máy in trong mạng Kỹ Thuật có toàn quyền trong hệ thống mạng ĐỀ XUẤT PHƯƠNG ÁN THỰC HIỆN Phương án 1: Ta chỉ cần 1 Server chính đóng tất cả các vai trò trong mạng của công ty Tính toán số lượng thiết bị và giá thành để triển khai hệ thống mạng trên Liệt kê danh sách thiết bị cần thiết Xây dựng sơ đồ vật lý và logic Xây dựng sơ đồ địa chỉ IP cho hệ thống mạng trên Cung cấp kế nối cho tất cả các phòng Sử dụng thiết bị ghép line ADSL để tăng khả năng dự phòng Xây dựng firewall thỏa các yêu cầu Xây dựng web server Xây dựng mail server Thiết lập chính sách nhóm thỏa các yêu cầu trên Ưu điểm : Giảm thiết bị phần cứng , giảm tối thiểu giá thành của công ty Dễ dàng cài đặt , thời gian thực hiện rút ngắn tối đa"],[4,"Công ty có thể sớm được hoạt động Khuyết điểm: Vì chỉ 1 Server gánh vác tất cả các vai trò nên có nhiều khuyết điểm xảy ra + hacker dễ dàng xâm nhập hệ thống và phá hoại tài nguyên công ty + dễ dàng xảy ra tình trạng nghẽn mạng hoặc quá tải Phương án 2: Ta sử dụng 4 server đóng vai trò : Web Server, Mail Server, File Server và 1 Server khác làm Firewall để tăng tính năng bảo mật Tính toán số lượng thiết bị và giá thành để triển khai hệ thống mạng trên Liệt kê danh sách thiết bị cần thiết Xây dựng sơ đồ vật lý và logic Xây dựng sơ đồ địa chỉ IP cho hệ thống mạng trên Cung cấp kế nối cho tất cả các phòng Sử dụng thiết bị ghép line ADSL để tăng khả năng dự phòng Xây dựng firewall thỏa các yêu cầu Xây dựng web server Xây dựng mail server Thiết lập chính sách nhóm thỏa các yêu cầu trên Ưu điểm : Server được phân phát công việc phân minh có thể giảm được tình trạng quá tải khi người dùng truy cập vào Web và Mail của công ty Xây dựng Firewall Server sẽ tăng thêm tính bảo mật, cho dù hacker có tấn công thì chỉ có Firewall Server bị ảnh hưởng, không xâm nhập vào tài nguyên công ty Khuyết điểm: Thiết bị tăng → giá thành tăng Độ bảo mật tăng cao, quá trình thực hiện lâu hơn Cấu hình nhiều server sẽ phức tạp hơn và thời gian kéo dài → công ty không thể hoạt động sớm Khuyến cáo: Ta nên sử dụng phương án 2 vì tính bảo mật rất cao, nếu theo phương án 1 khi bi hacker xâm nhập thì tổn thất sẽ rất nặng nề Tuy phương án 2 giá thành cao hơn hẳn nhưng tính bảo mật cao hơn nhiều, nếu như bị hacker tấn công thì phải wa 2 Firewall là Broadband ADSL Router và Firewall Server Quan trọng nhất là tăng được tính ổn định cho công ty Không gây nên tình trạng quá tải hoặc nghẽn mạng THỰC HIỆN 1/ Sơ Đồ Logic và IP Của Công Ty Lệ Hằng 2/ Sơ Đồ Vật Lý Của Công Ty Lệ Hằng 3/ Tính toán số lượng thiết bị và giá thành STT Thiết bị Tên Thiết Bị Đơn Vị Đơn Giá (USD) SL Thành Tiền 1 Server HP ML 350T05 E5410 SFF bộ 1200 4 4800 2 PC Màn hình 17\u2019\u2019 LG L1942S cái 150 47 7050 CPU ACER Aspire x 1800(001)PT.SBW09.011 bộ 210 47 9870 3 Switch 8 port WS-C2960-8TC-S cái 63 1 63 16 port LINK PRO1000 SGD-1600 cái 75 4 300 4 Access Point D-LINK DWL-2100AP cái 110 1 110 5 Printer HP-2000 cái 352 5 1760 6 Router ADSL Dray Tek V2700G cái 150 3 450 7 Broadband ADSL Router Dray Tek V3300B+ cái 700 1 700 8 Cable Cat 5e AMP met 2 420 840 Cat 6e AMP met 3 80 240 Tổng cộng : 26.183 USD 4/ Nâng cấp Server hệ thống lên thành Domain controler Để dễ dàng cho việc quản lý tài nguyên và dịch vụ trên hệ thống ta sẽ nâng cấp file server thành Domain controller Bước 1: Cấu hình địa chỉ IP tĩnh IP address: 192.168.1.1/24 Subnet Mask:255.255.255.0 Default gate way: 192.168.1.254 Preferred DNS server: 192.168.1.1 Bước 2: Cài đặt Chọn start àRun, nhập DCPROMO trong hộp thoại Run, nhấn OK Khi hộp thoại Active Directory installation wizard xuất hiện, nhấn Next Hộp thoại cảnh báo DOS, Window 95 và WinNT SP3 trở về trước sẽ bị loại ra khỏi miền Active Directory, chọn Next"],[5,"Hộp thoại Domain controller Type chọn mục Domain controller for New Domain chọn Next Chọn Domain in New forest và nhấn Next Hộp thoại New Domain Name, nhập tên LeHang.com.vn nhấn Next Hộp thoại NetBIOS Domain Name, để mặc định và nhấn Next Hộp thoại Database and Log Locations để mặc định, nhấn Next Hộp thoại Shared System Volume để mặc định và chọn Next Hộp thoại DNS Registration Diagnoslics, chọn I will correct the problem later by configuring DNS manually, (Advanced), nhấn Next Hộp thoại Permissions, chọn Permissions compatible only with Windows 2000 servers or windows server 2003 vì hệ thống chỉ có các server 2003 Hộp thoại Directory Services Restore Mode Administrator password, nhập password trong trường hợp phục hồi hệ thống, chọn Next Hộp thoại Sumary, chọn Next Hộp thoại Configuring Active Directory cho biết quá trình cài đặt đang thực hiện những gì Hộp thoại Completing the Active Directory installation wizard, nhấn Finish để hoàn tất quá trình"],[6,"5/ Xây Dựng Máy Sever Đồng Hành Ta xây dựng hệ thống server đồng hành cho các Web Server và Mail server IP: 192.168.1.2/24 (WebServer) và 192.168.1.3/24 (MailServer) Gateway: không cần khai báo DNS: là ip của máy sever chính :192.168.1.1 → Kiểm tra ping xem máy web sever và mail server có thấy máy sever 1 hay không"],[7,"Nếu thấy ta tiến hành tạo dựng sever đồng hành được"],[8,"Thực hiện : →start \\ run → gõ DCPROMO → enter Ta nhấn next 2 lần, sau đó chọn dòng thứ 2 : xây dựng 1 sever phụ → nhập tên người quản trị trên máy sever chính: administrator → pass: pass của người quản trị trên sever chính → domain: tên sever chính LeHang.com.vn → next Nhập tên domain, ta chon Brown → chọn sever → next 2 lần next và sau đó nhập password của domain phụ (cần thiết khi gỡ bỏ sever) Next thêm 2 lần nữa máy tính sẽ hiển thị Khi hoàn thành ta nhấn nút finish và restart lại máy sever phụ"],[9,"6/ CẤU HÌNH ROUTING AND REMOTE ACCESS Vì máy server firewall có 3 card mạng nên lúc này đóng vai trò là 1 router mềm nên khi muốn máy trạm ping thấy để gia nhập vào domain, ta phải cấu hình routing and remote access cho server firewall router"],[10,"Các bước thực hiện như sau : Vào Server manage, ta chọn \u201cRole\u201d , và \u201cAdd Role\u201d Trên hộp thoại Add Roles wizard, ta check vào mục \u201cNetwork Policy And Access Services\u201d rồi nhấn Next Trên hộp thoại \u201cNetwork policy and access services\u201d ta tiếp tục nhấn Next"],[11,"Tại hộp thoại \u201cSelect Role Services\u201d ta chọn hết tất cả các mục và nhấn Next"],[12,"Tại hộp thoại \u201cChoose The Certification Authority To Use With The Health Registration Authority\u201d ta chọn \u201cinstall a local CA to issue health\u2026\u201d và nhấn Next"],[13,"Tiếp theo đó ta chọn mục \u201cNo, allow anonymous requests for health certificates\u201d để không cho phép anonymuos truy cập vào"],[14,"Và chọn Next để tiếp tục"],[15,"Tại hộp thoại \u201cChoose a Server Authentication Centificate for SSL Encryption\u201d , chọn \u201cCreat a self-signed certificate for SSL encryption\u201d và nhấn Next"],[16,"Trên hộp thoại \u201cIntroduction to Active Directory Certificate Services\u201d và tiếp tục chọn Next"],[17,"Trên hộp thoại \u201cSelect Role Services\u201d ta tiếp tục chọn Next"],[18,"Tiếp đó tại hộp thoại \u201cSpecify Setup Type\u201d tùy vào Server mà ta chọn enterprise hoặc standalone tiếp tục chọn Next"],[19,"Trên hộp thoại \u201cSpecify CA Type\u201d chọn \u201cRoot CA\u201d và chọn Next"],[20,"Trên hộp thoại \u201cSet Up Private Key\u201d ta chọn \u201cCreat a new private key\u201d và Next"],[21,"Trên hộp thoại \u201cConfigure Cryptography for CA\u201d ta để mặc định và chọn Next"],[22,"Trên hộp thoại \u201cConfigure CA Name\u201d ta đặt tên cho CA và chọn Next để tiếp tục"],[23,"Trên hộp thoại \u201cSet validity period\u201d ta đặt thời hiệu sử dụng CA cho Server và chọn Next"],[24,"Trên hộp thoại \u201cconfigure certifycate Database\u201d ta để mặc định và chọn Next"],[25,"Trên hộp thoại \u201cWeb Server (IIS)\u201d ta nhấn Next"],[26,"Tiếp đó trên hộp thoại \u201cSelect Role Services\u201d ta lựa chọn các dịch vụ về IIS muốn cài đặt và chọn Next"],[27,"Tại hộp thoại \u201cConfirm Installation Selections\u201d ta chọn install để việc cài đặt được tiến hành"],[28,"Khi cài đặt xong ta chọn Close và restart lại server"],[29,"Ta tiến hành khởi động dịch vụ bằng cách vào Start \\ program \\ administrative tools \\ routing and remote access Ta click mouse phải tên server và chọn \u201cconfigure and Enable Routing and remote Access\u201d để khởi động dịch vụ Tại hộp thoại Wellcome ta nhấn Next"],[30,"Tại hộp thoại \u201cConfiguration\u201d ta chọn mục \u201cCustom configuration\u201d va chọn Next"],[31,"Sau đó ta chọn mục \u201cLAN routing\u201d và chọn Next"],[32,"Cuối cùng ta nhấn finish Tiếp đó ta nhấn ok và Start service để tiến hành khởi động dịch vụ và chuyển hóa Firewall Server thành router mềm"],[33,"Khi dịch vụ đã khởi động ta nhấn Finish"],[34,"7/ CHIA VLAN và ĐỊNH TUYẾN Để các phòng ban tuy không cùng đường mạng nhưng vẫn có thể truyền thông lẫn nhau, ta tiến hành chia Vlan cho Switch để gom nhóm các đường mạng lại với nhau qua 1 Switch trung tâm"],[35,"Ta tiến hành cấu hình trên Switch trung tâm như sau : Trên Switch Server a/ chia vlan và đặt tên cho các vlan b/ add các vlan vào các port tương ứng c/ chuyển cổng giao tiếp giữa switch server và router thành trunk d/ tạo 1 vtp domain trên switch server Lưu lại bằng lệnh write và thoát"],[36,"Trên Switch Client Trên switch client ta gia nhập vào vtp domain và cấu hình cho sw là client như sau: Ta tiến hành thao tác cho các switch còn lại cũng như thế Trên Router mềm Ta tiến hành định tuyến cho router mềm để các vlan độc lập có thể ping thông với nhau trên services routing and remote access Ta chia vlan cho router, quy định giao thức hoạt động cho vlan và đặt ip cho tất cả các cổng vlan bằng lệnh như sau: Ta enable cổng f0/1 lên bằng lệnh \u201cno shutdown\u201d Cấu hình giao thức định tuyến RIPv2 Exit thêm lần và lưu lại 8/ GIA NHẬP MÁY TRẠM VÀO DOMAIN Trước tiên ta phải kiểm tra xem máy trạm có ping thấy sever không đã bằng cách : → Nhấn start \\ run → nhập CMD và enter , sau đó gõ lệnh : ping 192.168.0.65 Nếu máy trạm ping thấy sever co nghĩa ta gia nhập vào domain trên sever được"],[37,"→ Nhấp phải chuột trên biểu tượng My computer, chọn properties"],[38,"Trong hộp thoại system properties chọn tab computer name , nhấp vào nút change"],[39,"Hộp thoại xuất hiện ta chọn mục member of domain, gõ tên domain: LeHang.com.vn àOK Hộp thoại xuất hiện yêu cầu điền username và password người quản trị miền, phần user name ta điền : administrator"],[40,"Password: ta gõ password của admin trên domain àok Hệ thống sẽ xuất hiện thông báo gia nhập miền thành công 9/ CÀI ĐẶT DNS \u2013 DHCP và IIS Đối với win server 2k8 ta vào mục server manager để cài đặt DNS và DHCP Sau đó ta chọn mục role và nhấn nút add role Chọn vào mục DHCP Server, DNS Server và Web Server (IIS) và nhấn next Quá trình cài đặt sẽ tiến hành tự động cho đến khi ta nhấn finish va kết thúc 10/ CẤU HÌNH DNS VÀ QUẢN TRỊ Khi đã cài đặt xong DNS cho File Server, ta vào Start \\ program \\ administrative tools \\ DNS I/ cấu hình DNS Ta tiến hành cấu hình DNS qua 4 bước cơ bản sau: A / tạo miền phân giải thuận cho DNS Ta chuột phải vào Forword lookup zones \\ new zone Tại hộp thoại \u201cwelcome to the new zone wizard\u201d ta chọn Next"],[41,"Tại hộp thoại \u201cZone Type\u201d ta chọn \u201cPrimary zone\u201d và nhấn Next"],[42,"Tại hộp thoại \u201cActive Directory Zone Replication Scope\u201d ta chọn \u201cto all domain controlers in the Active directory domain LeHangcom.vn\u201d và chọn Next"],[43,"Tại hộp thoại \u201cZone Name\u201d ta đặt tên miền phân giải và chọn Next Tại hộp thoại \u201cDyamic Update\u201d ta chọn \u201callow only secure dyamic update\u201d và chọn Next"],[44,"Và cuối cùng ta nhấn finish"],[45,"B / tạo miền phân giải nghịch cho DNS Ta cũng làm tương tự như phân giải thuận nhấp chuột phải vào Reverse lookup zones \\ new zone Cũng trên hộp thoại \u201cwelcome\u201d ta nhấn Next"],[46,"Trên hộp thoại \u201czone type\u201d cũng chọn \u201cprimary zone\u201d và nhấn Next"],[47,"Tại hộp thoại \u201cActive Directory Zone Replication Scope\u201d ta chọn \u201cto all domain controlers in the Active directory domain LeHangcom.vn\u201d và chọn Next"],[48,"Trên hộp thoại \u201cReverse lookup zone name\u201d ta nhập địa chỉ đường mạng của Server DNS cần phân giải là \u201c192.168.1\u201d và nhấn Next để tiếp tục"],[49,"Tại hộp thoại \u201cDyamic Update\u201d ta chọn \u201callow only secure dyamic update\u201d và chọn Next"],[50,"Và cuối cùng ta nhấn finish"],[51,"C / tạo các phân giải cho DNS Server Tại miền phân giải chính ta chuột phải vào LeHang.com.vn và chọn new host (A) Đặt host name cho Server mà ta muốn phân giải DNS và nhập vào địa chỉ IP tương ứng Ta đánh dấu check vào mục \u201cCreate associated pointer (PTR) record\u201d để tự động tạo ra phân giải nghịch tương ứng cho Server"],[52,"Và nhấn \u201cAdd host\u201d Tương tự như vậy ta tạo phân giải cho Web Server và Mail Server D / Sửa thông tin DNS Server thuận và nghịch Trên phân giải thuận: Tại zone thuận ta double click vào record (SOA) Tại mục \u201cprimary Server\u201d ta nhấn \u201cBrowse\u201d Tại bảng \u201cRecord\u201d ta double click đến khi chọn vào FileServer và nhấn ok Tiếp đó ta double click vào record \u201cName Server (NS)\u201d Nhấn vào \u201cEdit..\u201d để sửa thông tin Server Nhấn \u201cBrowse\u201d và double click đến khi chọn đến File Server rồi nhấn ok Trên phân giải nghịch: ta làm tương tự như trên"],[53,"II/ Tạo Alias (CNAME) cho Web Server Trên zone thuận ta chuột phải vào server DNS Lehang.com.vn và chọn New Alias (CNAME)\u2026 Khung trống Alias name ta đặt bí danh cho Web Server"],[54,"Ví dụ ta đặt: www Khung trống Fuly qualified domain name (FQDN) for target host : ta Browse đến DNS của Web Server"],[55,"III/ Tạo dựng alias cho mail Server Trên zone thuận ta chuột phải vào server DNS Lehang.com.vn và chọn New Mail Exchange (MX)."],[56,"Khung \u201cHost or child domain\u201d ta để trống Khung \u201c Fuly qualified domain name (FQDN) of mail server\u201d ta Browse đến DNS của Mail Server và ok Khi đã cấu hình và quản trị DNS xong thì ta sẽ được kết quả như sau: 11/ CẤU HÌNH DHCP Vào Start \\ Programs \\ administrative tools \\ DHCP Tại tên server ta thấy có mũi tên màu đỏ chĩa xuống (do chưa cấu hình) Ta chuột phải vào tên server và chọn New scope Tại hộp thoại welcome ta chọn Next"],[57,"ở hộp thoại \u201cNew Scope Wizard\u201d ta đặt tên dãy DHCP mà ta muốn đặt va chọn Next"],[58,"Tại hộp thoại \u201cIP Address Range\u201d ta quy định IP bắt đầu và IP cuối cùng của dãy DHCP Phần dưới ta quy định chiều dài Subnet mask và Subnet mask cụ thể rồi chọn Next"],[59,"Tại hộp thoại \u201cAdd Exclusions\u201d ta điền vào 1 số IP muốn loại trừ trong khoảng IP động để sau này làm IP tĩnh hoặc dùng khi lúc cần thiết (nếu có) và chọn next"],[60,"Hộp thoại \u201cLease Duration\u201d quy định thời hạn IP động được cấp phát, thời hạn mặc định là 8 ngày ta có thể điều chỉnh ngắn hơn hoặc dài hơn và chọn Next"],[61,"Tại hộp thoại \u201cConfigure DHCP Options\u201d ta chọn \u201cyes, I want to configure options now\u201d nếu muốn cấu hình options cho DHCP ngay và chọn Next"],[62,"Hộp thoại \u201cRouter (Default Gateway)\u201d ta điền vào địa chỉ IP gateway của dãy DHCP này rồi chọn \u201cAdd\u201d và Next"],[63,"Tại hộp thoại \u201cDomain Name and DNS Server\u201d ta điền vào địa chỉ DNS của DNS Server rồi \u201cAdd\u201d và chọn Next"],[64,"Hộp thoại \u201cWINS Server\u201d ta chọn Next"],[65,"Tại hộp thoại \u201cActivate Scope\u201d ta chọn \u201cYes, I want to activate this scope now\u201d để activate cho dãy DHCP này hoạt động ngay và chọn Next"],[66,"Và cuối cùng ta chọn Finish"],[67,"Và theo cách làm trên ta lần lượt thiết lập DHCP cho từng phòng ban khác"],[68,"Sau khi cấu hình cho DHCP ta phải chứng thực bằng cách nhấn chuột phải vào server và chọn \u201cAuthorize\u201d Sau 1 phút ta nhấn F5 để refresh lại dịch vụ DHCP và sẽ thấy được mũi tên màu đỏ chuyển thành màu xanh đi lên, đó là DHCP đã được khởi động"],[69,"12/ QUẢN TRỊ WEB SERVER (IIS) TRÊN WEB SERVER A / Trên Web Server ta cài đặt dịch vụ Web như sau: Vào Start \\ setting \\ control panel Chọn \u201cAdd/remove Windows components\u201d Chọn \u201cApplication Server\u201d rồi nhấn \u201cDetails\u2026\u201d (chú ý không đánh dấu check) Tiếp đó ta chọn \u201cInternet Information Services (IIS)\u201d và chọn \u201cDetails\u2026\u201d (không check) Sau đó ta check vào mục \u201cWorld Wide Web Service\u201d và ok đến hộp thoại \u201cWindows components\u201d rồi nhấn next để được cài đặt dịch vụ WWW Trong quá trình cài đặt có thể hỏi \u201cfile i386\u201d, ta trỏ vào thư mục chứa file i386 là được B / Quản Trị Web Server và up trang Web lên Server Khi cài đặt xong dịch vụ ta vào Start \\ program \\ administrative tools \\ Internet information services (IIS) Tại thư mục \u201cWeb Site\u201d ta \u201cStop\u201d Web site mặc định Ta chuột phải vào thư mục Web Sites, chọn New \\ Web Site Tại hộp thoại \u201cWelcome\u201d ta chọn Next"],[70,"Tại hộp thoại \u201cWeb Site desciption\u201d ta đặt tên cho Web Site và chọn Next Tại hộp thoại \u201cIP Address and Port Setting\u201d quy định IP và port của Web Site, ta để mặc định và chọn Next"],[71,"Tại hộp thoại \u201cWeb Site Home Directory\u201d chỉ định nơi chứa Web Site và chọn Next"],[72,"Tại hộp thoại \u201cWeb Site Access Permissions\u201d chỉ định quyền hạng cho người truy cập WebSite chỉ có quyền đọc và chọn Next"],[73,"Cuối cùng ta chọn Finish"],[74,"Để hoàn thành quá trình up trang Web lên Web Server"],[75,"Để mọi người có thể truy cập vào trang WebLeHang, ta gán quyền \u201c everyone\u201d cho trang WebLeHang như sau: Vào thư mục chứa tập tin trang WebLeHang và chuột phải chọn Properties Trong tab \u201cSercurity\u201d ta nhấn \u201cAdd\u201d Điền vào tên nhóm \u201cEveryone\u201d rồi nhấn ok Để quyền mặc định cho nhóm này chỉ được đọc và chọn ok Tiếp đến ta chọn cho trang WebLeHang vừa mới up lên làm trang Web mặc định như sau: Chuột phải vào thư mục WebSite chọn Properties Tại tab Documents ta Add vào trang WebLeHang để làm web mặc định"],[76,"Điền tên trang web vào rồi nhấn ok Sau đó ta chọn WebLeHang và nhấn move up để đưa WebLeHang lên làm trang web đầu tiên và nhấn ok 1 hộp thoại hiện lên hỏi ta có chắc chắn đưa trang web nay lam trang mặc định không ta chọn ok Ta kiểm tra xem trang web có hoạt động được không bằng cách chuột phải trang WebLeHang và chọn Browse Kết quả đạt được như sau: Ta kiểm tra trên trang web bằng cách vào trang Web và gõ vào địa chỉ IP của Web Server Kết Quả: 13/ CÀI ĐẶT MS EXCHANGE SERVER TRÊN MAIL SERVER 14/ CÀI ĐẶT VÀ CẤU HÌNH ISA CHO FIREWALL SERVER A/ cài đặt ISA Chạy tập tin isaautorun.exe từ CD ROM ISA 2004 Nhấp chuột vào \u201cInstall ISA server 2004\u201d trong hộp thoại \u201cMicrosoft ISA server 2004 setup\u201d Nhấp Next trên hộp thoại \u201cWelcome to the installation Wizard for Microsoft ISA server 2004\u201d để tiếp tục cài đặt Chọn \u201cI accept\u201d trên bản hợp đồng sử dụng phần mềm và tiếp tục nhấn Next"],[77,"Nhập một số thông tin về User name và Organization, nhập serial number, chọn Next"],[78,"Chọn loại cài đặt \u201cCustom\u201d trong hộp thoại \u201c Setup type\u201d, chọn Next Trong hộp thoại \u201ccustom setup\u201d chọn thêm \u201cFirewall client install share\u201d, c"]],"downloaded":true,"m":[-1,-1],"n":"do-an-trien-khai-he-thong-mang-cho-cong-ty-le-hang-46262","o":"http://luanvan.net.vn/luan-van/do-an-trien-khai-he-thong-mang-cho-cong-ty-le-hang-46262/"},{"saved_path":"temp/giao_trinh_phan_tich_kha_nang_dieu_phoi_nhung_loai_mo_hinh_mang_thuc_te_p10_4872.txt","r":0,"s":[],"t":"\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 63/555 \n\nIV.6. Bridge (cầu nối). \nLà thiết bị cho phép nối kết hai nhánh mạng, có chức năng chuyển có chọn lọc các gói tin đến nhánh \nmạng chứa máy nhận gói tin. Trong Bridge có bảng địa chỉ MAC, bảng địa chỉ này sẽ được dùng để \nquyết định đường đi của gói tin (cách thức truyền đi của một gói tin sẽ được nói rõ hơn ở trong phần \ntrình bày về thiết bị Switch). Bảng địa chỉ này có thể được khởi tạo tự động hoặc phải cấu hình bằng \ntay. Bridge hoạt động ở lớp hai (lớp Data link) trong mô hình OSI. \n\nƯu điểm của Bridge là: cho phép mở rộng cùng một mạng logic với nhiều kiểu cáp khác nhau. Chia \nmạng thành nhiều phân đoạn khác nhau nhằm giảm lưu lượng trên mạng. \n\nKhuyết điểm: chậm hơn Repeater vì phải xử lý các gói tin, chưa tìm được đường đi tối ưu trong \ntrường hợp có nhiều đường đi. Việc xử lý gói tin dựa trên phần mềm. \n\n \n\n \n\nHình 4.28 \u2013 Mô hình mạng sử dụng Bridge. \n\nIV.7. Switch \nLà thiết bị giống như bridge nhưng nhiều port hơn cho phép ghép nối nhiều đoạn mạng với nhau. \nSwitch cũng dựa vào bảng địa chỉ MAC để quyết định gói tin nào đi ra port nào nhằm tránh tình trạng \ngiảm băng thông khi số máy trạm trong mạng tăng lên. Switch cũng hoạt động tại lớp hai trong mô \nhình OSI. Việc xử lý gói tin dựa trên phần cứng (chip). \n\nKhi một gói tin đi đến Switch (hoặc Bridge), Switch (hoặc Bridge) sẽ thực hiện như sau: \n\n- Kiểm tra địa chỉ nguồn của gói tin đã có trong bảng MAC chưa, nếu chưa có thì nó sẽ thêm địa chỉ \nMAC này và port nguồn (nơi gói tin đi vào Switch (hoặc Bridge)) vào trong bảng MAC. \n\n- Kiểm tra địa chỉ đích của gói tin đã có trong bảng MAC chưa: \n+ Nếu chưa có thì nó sẽ gởi gói tin ra tất cả các port (ngoại trừ port gói tin đi vào). \n+ Nếu địa chỉ đích đã có trong bảng MAC: \n\n Nếu port đích trùng với port nguồn thì Switch (hoặc Bridge) sẽ loại bỏ gói tin. \n Nếu port đích khác với port nguồn thì gói tin sẽ được gởi ra port đích tương ứng. \n\nChú ý:  \n\n- Địa chỉ nguồn và địa chỉ đích được nói ở trên đều là địa chỉ MAC. \n- Port nguồn là Port mà gói tin đi vào. \n- Port đích là Port mà gói tin đi ra. \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 64/555 \n\nDo cách hoạt động của Switch (hoặc Bridge) như vậy, nên mỗi Port của Switch là một Collision \nDomain, và toàn bộ Switch được xem là một Broadcast Domain (khái niệm Collision Domain và \nBroadcast Domain sẽ được giới thiệu trong chương 5, phần \u201ccác công nghệ mạng LAN\u201d). \n\n \n\nHình 4.29 \u2013 Mô hình mạng sử dụng Switch. \n\nNgoài các tính năng cơ sở, Switch còn các tính năng mở rộng như sau: \n\n- Phương pháp chuyển gói tin (Switching mode): trong thiết bị của Cisco có thể sử dụng một trong \nba loại sau: \n\n+ Store and Forward: là tính năng lưu dữ liệu trong bộ đệm trước khi truyền sang các port \nkhác để tránh đụng độ (collision), thông thường tốc độ truyền khoảng 148.800 pps. Với kỹ \nthuật này toàn bộ gói tin phải được nhận đủ trước khi Switch truyền frame này đi do đó độ \ntrễ (latency) lệ thuộc vào chiều dài của frame. \n\n+ Cut Through: Switch sẽ truyền gói tin ngay lập tức một khi nó biết được địa chỉ đích của \ngói tin. Kỹ thuật này sẽ có độ trễ thấp hơn so với kỹ thuật Store and Forward và độ trễ luôn \nlà con số xác định, bất chấp chiều dài của gói tin. \n\n+ Fragment Free: thì Switch đọc 64 byte đầu tiên và sau đó bắt đầu truyền dữ liệu. \n- Trunking (MAC Base): ở một số thiết bị Switch, tính năng Trunking được hiểu là tính năng giúp \n\ntăng tốc độ truyền giữa hai Switch, nhưng chú ý là hai Switch phải cùng loại. Riêng trong thiết bị \nSwitch của Cisco, Trunking được hiểu là đường truyền dùng để mang thông tin cho các VLAN. \n\n \n\nHình 4.30 \u2013 Mô tả cách dùng đường Trunking. \n\n- VLAN: tạo các mạng ảo, nhằm đảm bảo tính bảo mật khi mở rộng mạng bằng cách nối các \nSwitch với nhau. Mỗi VLAN có thể được xem là một Broadcast Domain, nên khi chia các mạng \nảo giúp ta sẽ phân vùng miền broadcast nhằm cải tiến tốc độ và hiệu quả của hệ thống. Nói cách \nkhác, VLAN là một nhóm logic các thiết bị hoặc người sử dụng. Nhóm logic này được chia dựa \nvào chức năng, ứng dụng, \u2026 mà không phụ thuộc vào vị trí địa lý. Chỉ có các thiết bị trong cùng \nVLAN mới liên lạc được với nhau. Nếu muốn các VLAN có thể liên lạc được với nhau thì phải sử \ndụng Router để liên kết các VLAN lại. \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 65/555 \n\n \n\nHình 4.31 \u2013 Mô tả cách sử dụng VLAN. \n\n- Spanning Tree: tạo đường dự phòng, bình thường dữ liệu được truyền trên một cổng mang số \nthứ tự thấp. Khi mất liên lạc thiết bị tự chuyển sang cổng khác, nhằm đảm bảo mạng hoạt động \nliên tục. Spanning Tree thực chất là hạn chế các đường dư thừa trên mạng. \n\nHình dưới là Switch Compex SRX2216 được thiết kế theo chuẩn IEEE 802.3, IEEE802.3u, Switch \nnày thường dùng trong các giải pháp mạng vừa và nhỏ. Thiết bị này hỗ trợ 16 port RJ45 tốc độ \n10/100Mbps, 12K MAC Address, 2K bộ đệm (buffer).  Ngoài ra thiết bị này còn có những tính năng \nnhư: Store and Forward, Spanning Tree, Port Trunking, Virtual LAN giúp chúng ta mở rộng mạng \nmà không sợ xảy ra đụng độ (collision). \n\n \n\nHình 4.31 - Switch Compex SRX2216. \n\nIV.8. Wireless Access Point. \n\n \n\nHình 4.32 \u2013 Thiết bị Wireless \n\nWireless Access Point là thiết bị kết nối mạng không dây được thiết kế theo chuẩn IEEE802.11b, cho \nphép nối LAN to LAN, dùng cơ chế CSMA/CA để giải quyết tranh chấp, dùng cả hai kiến trúc kết nối \nmạng là Infrastructure và AdHoc, mã hóa theo 64/128 Bit. Nó còn hỗ trợ tốc độ truyền không dây lên \n11Mbps trên băng tần 2,4GHz ISM dùng công nghệ radio DSSS (Direct Sequence Spread \nSpectrum) \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 66/555 \n\n \n\nHình 4.33 \u2013 Mạng sử dụng Wireless. \n\nIV.9. Router. \nLà thiết bị dùng nối kết các mạng logic với nhau, kiểm soát và lọc các gói tin nên hạn chế được lưu \nl","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2011/201109/20110915/samsung4/giao_trinh_phan_tich_kha_nang_dieu_phoi_nhung_loai_mo_hinh_mang_thuc_te_p10_4872.txt","sentences":[[1,"Bridge (cầu nối)"],[2,"Là thiết bị cho phép nối kết hai nhánh mạng, có chức năng chuyển có chọn lọc các gói tin đến nhánh mạng chứa máy nhận gói tin"],[3,"Trong Bridge có bảng địa chỉ MAC, bảng địa chỉ này sẽ được dùng để quyết định đường đi của gói tin (cách thức truyền đi của một gói tin sẽ được nói rõ hơn ở trong phần trình bày về thiết bị Switch)"],[4,"Bảng địa chỉ này có thể được khởi tạo tự động hoặc phải cấu hình bằng tay"],[5,"Bridge hoạt động ở lớp hai (lớp Data link) trong mô hình OSI"],[6,"Ưu điểm của Bridge là: cho phép mở rộng cùng một mạng logic với nhiều kiểu cáp khác nhau"],[7,"Chia mạng thành nhiều phân đoạn khác nhau nhằm giảm lưu lượng trên mạng"],[8,"Khuyết điểm: chậm hơn Repeater vì phải xử lý các gói tin, chưa tìm được đường đi tối ưu trong trường hợp có nhiều đường đi"],[9,"Việc xử lý gói tin dựa trên phần mềm"],[10,"Hình 4.28 \u2013 Mô hình mạng sử dụng Bridge"],[11,"IV.7"],[12,"Switch Là thiết bị giống như bridge nhưng nhiều port hơn cho phép ghép nối nhiều đoạn mạng với nhau"],[13,"Switch cũng dựa vào bảng địa chỉ MAC để quyết định gói tin nào đi ra port nào nhằm tránh tình trạng giảm băng thông khi số máy trạm trong mạng tăng lên"],[14,"Switch cũng hoạt động tại lớp hai trong mô hình OSI"],[15,"Việc xử lý gói tin dựa trên phần cứng (chip)"],[16,"Khi một gói tin đi đến Switch (hoặc Bridge), Switch (hoặc Bridge) sẽ thực hiện như sau: - Kiểm tra địa chỉ nguồn của gói tin đã có trong bảng MAC chưa, nếu chưa có thì nó sẽ thêm địa chỉ MAC này và port nguồn (nơi gói tin đi vào Switch (hoặc Bridge)) vào trong bảng MAC"],[17,"- Kiểm tra địa chỉ đích của gói tin đã có trong bảng MAC chưa: + Nếu chưa có thì nó sẽ gởi gói tin ra tất cả các port (ngoại trừ port gói tin đi vào)"],[18,"+ Nếu địa chỉ đích đã có trong bảng MAC: Nếu port đích trùng với port nguồn thì Switch (hoặc Bridge) sẽ loại bỏ gói tin"],[19,"Nếu port đích khác với port nguồn thì gói tin sẽ được gởi ra port đích tương ứng"],[20,"Chú ý: - Địa chỉ nguồn và địa chỉ đích được nói ở trên đều là địa chỉ MAC"],[21,"- Port nguồn là Port mà gói tin đi vào"],[22,"- Port đích là Port mà gói tin đi ra"],[23,"Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[24,""],[25,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 64/555 Do cách hoạt động của Switch (hoặc Bridge) như vậy, nên mỗi Port của Switch là một Collision Domain, và toàn bộ Switch được xem là một Broadcast Domain (khái niệm Collision Domain và Broadcast Domain sẽ được giới thiệu trong chương 5, phần \u201ccác công nghệ mạng LAN\u201d)"],[26,"Hình 4.29 \u2013 Mô hình mạng sử dụng Switch"],[27,"Ngoài các tính năng cơ sở, Switch còn các tính năng mở rộng như sau: - Phương pháp chuyển gói tin (Switching mode): trong thiết bị của Cisco có thể sử dụng một trong ba loại sau: + Store and Forward: là tính năng lưu dữ liệu trong bộ đệm trước khi truyền sang các port khác để tránh đụng độ (collision), thông thường tốc độ truyền khoảng 148.800 pps"],[28,"Với kỹ thuật này toàn bộ gói tin phải được nhận đủ trước khi Switch truyền frame này đi do đó độ trễ (latency) lệ thuộc vào chiều dài của frame"],[29,"+ Cut Through: Switch sẽ truyền gói tin ngay lập tức một khi nó biết được địa chỉ đích của gói tin"],[30,"Kỹ thuật này sẽ có độ trễ thấp hơn so với kỹ thuật Store and Forward và độ trễ luôn là con số xác định, bất chấp chiều dài của gói tin"],[31,"+ Fragment Free: thì Switch đọc 64 byte đầu tiên và sau đó bắt đầu truyền dữ liệu"],[32,"- Trunking (MAC Base): ở một số thiết bị Switch, tính năng Trunking được hiểu là tính năng giúp tăng tốc độ truyền giữa hai Switch, nhưng chú ý là hai Switch phải cùng loại"],[33,"Riêng trong thiết bị Switch của Cisco, Trunking được hiểu là đường truyền dùng để mang thông tin cho các VLAN"],[34,"Hình 4.30 \u2013 Mô tả cách dùng đường Trunking"],[35,"- VLAN: tạo các mạng ảo, nhằm đảm bảo tính bảo mật khi mở rộng mạng bằng cách nối các Switch với nhau"],[36,"Mỗi VLAN có thể được xem là một Broadcast Domain, nên khi chia các mạng ảo giúp ta sẽ phân vùng miền broadcast nhằm cải tiến tốc độ và hiệu quả của hệ thống"],[37,"Nói cách khác, VLAN là một nhóm logic các thiết bị hoặc người sử dụng"],[38,"Nhóm logic này được chia dựa vào chức năng, ứng dụng, \u2026 mà không phụ thuộc vào vị trí địa lý"],[39,"Chỉ có các thiết bị trong cùng VLAN mới liên lạc được với nhau"],[40,"Nếu muốn các VLAN có thể liên lạc được với nhau thì phải sử dụng Router để liên kết các VLAN lại"],[41,"Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[42,""],[43,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 65/555 Hình 4.31 \u2013 Mô tả cách sử dụng VLAN"],[44,"- Spanning Tree: tạo đường dự phòng, bình thường dữ liệu được truyền trên một cổng mang số thứ tự thấp"],[45,"Khi mất liên lạc thiết bị tự chuyển sang cổng khác, nhằm đảm bảo mạng hoạt động liên tục"],[46,"Spanning Tree thực chất là hạn chế các đường dư thừa trên mạng"],[47,"Hình dưới là Switch Compex SRX2216 được thiết kế theo chuẩn IEEE 802.3, IEEE802.3u, Switch này thường dùng trong các giải pháp mạng vừa và nhỏ"],[48,"Thiết bị này hỗ trợ 16 port RJ45 tốc độ 10/100Mbps, 12K MAC Address, 2K bộ đệm (buffer)"],[49,"Ngoài ra thiết bị này còn có những tính năng như: Store and Forward, Spanning Tree, Port Trunking, Virtual LAN giúp chúng ta mở rộng mạng mà không sợ xảy ra đụng độ (collision)"],[50,"Hình 4.31 - Switch Compex SRX2216"],[51,"IV.8"],[52,"Wireless Access Point"],[53,"Hình 4.32 \u2013 Thiết bị Wireless Wireless Access Point là thiết bị kết nối mạng không dây được thiết kế theo chuẩn IEEE802.11b, cho phép nối LAN to LAN, dùng cơ chế CSMA/CA để giải quyết tranh chấp, dùng cả hai kiến trúc kết nối mạng là Infrastructure và AdHoc, mã hóa theo 64/128 Bit"],[54,"Nó còn hỗ trợ tốc độ truyền không dây lên 11Mbps trên băng tần 2,4GHz ISM dùng công nghệ radio DSSS (Direct Sequence Spread Spectrum) Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[55,""],[56,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 66/555 Hình 4.33 \u2013 Mạng sử dụng Wireless"],[57,"IV.9"],[58,"Router"],[59,"Là thiết bị dùng nối kết các mạng logic với nhau, kiểm soát và lọc các gói tin nên hạn chế được lưu l"]],"downloaded":true,"m":[-1,-1],"n":"giao_trinh_phan_tich_kha_nang_dieu_phoi_nhung_loai_mo_hinh_mang_thuc_te_p10_4872.txt","o":"https://tailieu.vn/docview/tailieu/2011/201109/20110915/samsung4/giao_trinh_phan_tich_kha_nang_dieu_phoi_nhung_loai_mo_hinh_mang_thuc_te_p10_4872.pdf"},{"saved_path":"temp/giao_trinh_phan_tich_quy_trinh_ung_dung_nhung_loai_mo_hinh_mang_thuc_te_p10_1448.txt","r":0,"s":[],"t":"\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 63/555 \n\nIV.6. Bridge (cầu nối). \nLà thiết bị cho phép nối kết hai nhánh mạng, có chức năng chuyển có chọn lọc các gói tin đến nhánh \nmạng chứa máy nhận gói tin. Trong Bridge có bảng địa chỉ MAC, bảng địa chỉ này sẽ được dùng để \nquyết định đường đi của gói tin (cách thức truyền đi của một gói tin sẽ được nói rõ hơn ở trong phần \ntrình bày về thiết bị Switch). Bảng địa chỉ này có thể được khởi tạo tự động hoặc phải cấu hình bằng \ntay. Bridge hoạt động ở lớp hai (lớp Data link) trong mô hình OSI. \n\nƯu điểm của Bridge là: cho phép mở rộng cùng một mạng logic với nhiều kiểu cáp khác nhau. Chia \nmạng thành nhiều phân đoạn khác nhau nhằm giảm lưu lượng trên mạng. \n\nKhuyết điểm: chậm hơn Repeater vì phải xử lý các gói tin, chưa tìm được đường đi tối ưu trong \ntrường hợp có nhiều đường đi. Việc xử lý gói tin dựa trên phần mềm. \n\n \n\n \n\nHình 4.28 \u2013 Mô hình mạng sử dụng Bridge. \n\nIV.7. Switch \nLà thiết bị giống như bridge nhưng nhiều port hơn cho phép ghép nối nhiều đoạn mạng với nhau. \nSwitch cũng dựa vào bảng địa chỉ MAC để quyết định gói tin nào đi ra port nào nhằm tránh tình trạng \ngiảm băng thông khi số máy trạm trong mạng tăng lên. Switch cũng hoạt động tại lớp hai trong mô \nhình OSI. Việc xử lý gói tin dựa trên phần cứng (chip). \n\nKhi một gói tin đi đến Switch (hoặc Bridge), Switch (hoặc Bridge) sẽ thực hiện như sau: \n\n- Kiểm tra địa chỉ nguồn của gói tin đã có trong bảng MAC chưa, nếu chưa có thì nó sẽ thêm địa chỉ \nMAC này và port nguồn (nơi gói tin đi vào Switch (hoặc Bridge)) vào trong bảng MAC. \n\n- Kiểm tra địa chỉ đích của gói tin đã có trong bảng MAC chưa: \n+ Nếu chưa có thì nó sẽ gởi gói tin ra tất cả các port (ngoại trừ port gói tin đi vào). \n+ Nếu địa chỉ đích đã có trong bảng MAC: \n\n Nếu port đích trùng với port nguồn thì Switch (hoặc Bridge) sẽ loại bỏ gói tin. \n Nếu port đích khác với port nguồn thì gói tin sẽ được gởi ra port đích tương ứng. \n\nChú ý:  \n\n- Địa chỉ nguồn và địa chỉ đích được nói ở trên đều là địa chỉ MAC. \n- Port nguồn là Port mà gói tin đi vào. \n- Port đích là Port mà gói tin đi ra. \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 64/555 \n\nDo cách hoạt động của Switch (hoặc Bridge) như vậy, nên mỗi Port của Switch là một Collision \nDomain, và toàn bộ Switch được xem là một Broadcast Domain (khái niệm Collision Domain và \nBroadcast Domain sẽ được giới thiệu trong chương 5, phần \u201ccác công nghệ mạng LAN\u201d). \n\n \n\nHình 4.29 \u2013 Mô hình mạng sử dụng Switch. \n\nNgoài các tính năng cơ sở, Switch còn các tính năng mở rộng như sau: \n\n- Phương pháp chuyển gói tin (Switching mode): trong thiết bị của Cisco có thể sử dụng một trong \nba loại sau: \n\n+ Store and Forward: là tính năng lưu dữ liệu trong bộ đệm trước khi truyền sang các port \nkhác để tránh đụng độ (collision), thông thường tốc độ truyền khoảng 148.800 pps. Với kỹ \nthuật này toàn bộ gói tin phải được nhận đủ trước khi Switch truyền frame này đi do đó độ \ntrễ (latency) lệ thuộc vào chiều dài của frame. \n\n+ Cut Through: Switch sẽ truyền gói tin ngay lập tức một khi nó biết được địa chỉ đích của \ngói tin. Kỹ thuật này sẽ có độ trễ thấp hơn so với kỹ thuật Store and Forward và độ trễ luôn \nlà con số xác định, bất chấp chiều dài của gói tin. \n\n+ Fragment Free: thì Switch đọc 64 byte đầu tiên và sau đó bắt đầu truyền dữ liệu. \n- Trunking (MAC Base): ở một số thiết bị Switch, tính năng Trunking được hiểu là tính năng giúp \n\ntăng tốc độ truyền giữa hai Switch, nhưng chú ý là hai Switch phải cùng loại. Riêng trong thiết bị \nSwitch của Cisco, Trunking được hiểu là đường truyền dùng để mang thông tin cho các VLAN. \n\n \n\nHình 4.30 \u2013 Mô tả cách dùng đường Trunking. \n\n- VLAN: tạo các mạng ảo, nhằm đảm bảo tính bảo mật khi mở rộng mạng bằng cách nối các \nSwitch với nhau. Mỗi VLAN có thể được xem là một Broadcast Domain, nên khi chia các mạng \nảo giúp ta sẽ phân vùng miền broadcast nhằm cải tiến tốc độ và hiệu quả của hệ thống. Nói cách \nkhác, VLAN là một nhóm logic các thiết bị hoặc người sử dụng. Nhóm logic này được chia dựa \nvào chức năng, ứng dụng, \u2026 mà không phụ thuộc vào vị trí địa lý. Chỉ có các thiết bị trong cùng \nVLAN mới liên lạc được với nhau. Nếu muốn các VLAN có thể liên lạc được với nhau thì phải sử \ndụng Router để liên kết các VLAN lại. \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 65/555 \n\n \n\nHình 4.31 \u2013 Mô tả cách sử dụng VLAN. \n\n- Spanning Tree: tạo đường dự phòng, bình thường dữ liệu được truyền trên một cổng mang số \nthứ tự thấp. Khi mất liên lạc thiết bị tự chuyển sang cổng khác, nhằm đảm bảo mạng hoạt động \nliên tục. Spanning Tree thực chất là hạn chế các đường dư thừa trên mạng. \n\nHình dưới là Switch Compex SRX2216 được thiết kế theo chuẩn IEEE 802.3, IEEE802.3u, Switch \nnày thường dùng trong các giải pháp mạng vừa và nhỏ. Thiết bị này hỗ trợ 16 port RJ45 tốc độ \n10/100Mbps, 12K MAC Address, 2K bộ đệm (buffer).  Ngoài ra thiết bị này còn có những tính năng \nnhư: Store and Forward, Spanning Tree, Port Trunking, Virtual LAN giúp chúng ta mở rộng mạng \nmà không sợ xảy ra đụng độ (collision). \n\n \n\nHình 4.31 - Switch Compex SRX2216. \n\nIV.8. Wireless Access Point. \n\n \n\nHình 4.32 \u2013 Thiết bị Wireless \n\nWireless Access Point là thiết bị kết nối mạng không dây được thiết kế theo chuẩn IEEE802.11b, cho \nphép nối LAN to LAN, dùng cơ chế CSMA/CA để giải quyết tranh chấp, dùng cả hai kiến trúc kết nối \nmạng là Infrastructure và AdHoc, mã hóa theo 64/128 Bit. Nó còn hỗ trợ tốc độ truyền không dây lên \n11Mbps trên băng tần 2,4GHz ISM dùng công nghệ radio DSSS (Direct Sequence Spread \nSpectrum) \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 66/555 \n\n \n\nHình 4.33 \u2013 Mạng sử dụng Wireless. \n\nIV.9. Router. \nLà thiết bị dùng nối kết các mạng logic với nhau, kiểm soát và lọc các gói tin nên hạn chế được lưu \nl","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2011/201109/20110901/samsung1/giao_trinh_phan_tich_quy_trinh_ung_dung_nhung_loai_mo_hinh_mang_thuc_te_p10_1448.txt","sentences":[[1,"Bridge (cầu nối)"],[2,"Là thiết bị cho phép nối kết hai nhánh mạng, có chức năng chuyển có chọn lọc các gói tin đến nhánh mạng chứa máy nhận gói tin"],[3,"Trong Bridge có bảng địa chỉ MAC, bảng địa chỉ này sẽ được dùng để quyết định đường đi của gói tin (cách thức truyền đi của một gói tin sẽ được nói rõ hơn ở trong phần trình bày về thiết bị Switch)"],[4,"Bảng địa chỉ này có thể được khởi tạo tự động hoặc phải cấu hình bằng tay"],[5,"Bridge hoạt động ở lớp hai (lớp Data link) trong mô hình OSI"],[6,"Ưu điểm của Bridge là: cho phép mở rộng cùng một mạng logic với nhiều kiểu cáp khác nhau"],[7,"Chia mạng thành nhiều phân đoạn khác nhau nhằm giảm lưu lượng trên mạng"],[8,"Khuyết điểm: chậm hơn Repeater vì phải xử lý các gói tin, chưa tìm được đường đi tối ưu trong trường hợp có nhiều đường đi"],[9,"Việc xử lý gói tin dựa trên phần mềm"],[10,"Hình 4.28 \u2013 Mô hình mạng sử dụng Bridge"],[11,"IV.7"],[12,"Switch Là thiết bị giống như bridge nhưng nhiều port hơn cho phép ghép nối nhiều đoạn mạng với nhau"],[13,"Switch cũng dựa vào bảng địa chỉ MAC để quyết định gói tin nào đi ra port nào nhằm tránh tình trạng giảm băng thông khi số máy trạm trong mạng tăng lên"],[14,"Switch cũng hoạt động tại lớp hai trong mô hình OSI"],[15,"Việc xử lý gói tin dựa trên phần cứng (chip)"],[16,"Khi một gói tin đi đến Switch (hoặc Bridge), Switch (hoặc Bridge) sẽ thực hiện như sau: - Kiểm tra địa chỉ nguồn của gói tin đã có trong bảng MAC chưa, nếu chưa có thì nó sẽ thêm địa chỉ MAC này và port nguồn (nơi gói tin đi vào Switch (hoặc Bridge)) vào trong bảng MAC"],[17,"- Kiểm tra địa chỉ đích của gói tin đã có trong bảng MAC chưa: + Nếu chưa có thì nó sẽ gởi gói tin ra tất cả các port (ngoại trừ port gói tin đi vào)"],[18,"+ Nếu địa chỉ đích đã có trong bảng MAC: Nếu port đích trùng với port nguồn thì Switch (hoặc Bridge) sẽ loại bỏ gói tin"],[19,"Nếu port đích khác với port nguồn thì gói tin sẽ được gởi ra port đích tương ứng"],[20,"Chú ý: - Địa chỉ nguồn và địa chỉ đích được nói ở trên đều là địa chỉ MAC"],[21,"- Port nguồn là Port mà gói tin đi vào"],[22,"- Port đích là Port mà gói tin đi ra"],[23,"Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[24,""],[25,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 64/555 Do cách hoạt động của Switch (hoặc Bridge) như vậy, nên mỗi Port của Switch là một Collision Domain, và toàn bộ Switch được xem là một Broadcast Domain (khái niệm Collision Domain và Broadcast Domain sẽ được giới thiệu trong chương 5, phần \u201ccác công nghệ mạng LAN\u201d)"],[26,"Hình 4.29 \u2013 Mô hình mạng sử dụng Switch"],[27,"Ngoài các tính năng cơ sở, Switch còn các tính năng mở rộng như sau: - Phương pháp chuyển gói tin (Switching mode): trong thiết bị của Cisco có thể sử dụng một trong ba loại sau: + Store and Forward: là tính năng lưu dữ liệu trong bộ đệm trước khi truyền sang các port khác để tránh đụng độ (collision), thông thường tốc độ truyền khoảng 148.800 pps"],[28,"Với kỹ thuật này toàn bộ gói tin phải được nhận đủ trước khi Switch truyền frame này đi do đó độ trễ (latency) lệ thuộc vào chiều dài của frame"],[29,"+ Cut Through: Switch sẽ truyền gói tin ngay lập tức một khi nó biết được địa chỉ đích của gói tin"],[30,"Kỹ thuật này sẽ có độ trễ thấp hơn so với kỹ thuật Store and Forward và độ trễ luôn là con số xác định, bất chấp chiều dài của gói tin"],[31,"+ Fragment Free: thì Switch đọc 64 byte đầu tiên và sau đó bắt đầu truyền dữ liệu"],[32,"- Trunking (MAC Base): ở một số thiết bị Switch, tính năng Trunking được hiểu là tính năng giúp tăng tốc độ truyền giữa hai Switch, nhưng chú ý là hai Switch phải cùng loại"],[33,"Riêng trong thiết bị Switch của Cisco, Trunking được hiểu là đường truyền dùng để mang thông tin cho các VLAN"],[34,"Hình 4.30 \u2013 Mô tả cách dùng đường Trunking"],[35,"- VLAN: tạo các mạng ảo, nhằm đảm bảo tính bảo mật khi mở rộng mạng bằng cách nối các Switch với nhau"],[36,"Mỗi VLAN có thể được xem là một Broadcast Domain, nên khi chia các mạng ảo giúp ta sẽ phân vùng miền broadcast nhằm cải tiến tốc độ và hiệu quả của hệ thống"],[37,"Nói cách khác, VLAN là một nhóm logic các thiết bị hoặc người sử dụng"],[38,"Nhóm logic này được chia dựa vào chức năng, ứng dụng, \u2026 mà không phụ thuộc vào vị trí địa lý"],[39,"Chỉ có các thiết bị trong cùng VLAN mới liên lạc được với nhau"],[40,"Nếu muốn các VLAN có thể liên lạc được với nhau thì phải sử dụng Router để liên kết các VLAN lại"],[41,"Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[42,""],[43,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 65/555 Hình 4.31 \u2013 Mô tả cách sử dụng VLAN"],[44,"- Spanning Tree: tạo đường dự phòng, bình thường dữ liệu được truyền trên một cổng mang số thứ tự thấp"],[45,"Khi mất liên lạc thiết bị tự chuyển sang cổng khác, nhằm đảm bảo mạng hoạt động liên tục"],[46,"Spanning Tree thực chất là hạn chế các đường dư thừa trên mạng"],[47,"Hình dưới là Switch Compex SRX2216 được thiết kế theo chuẩn IEEE 802.3, IEEE802.3u, Switch này thường dùng trong các giải pháp mạng vừa và nhỏ"],[48,"Thiết bị này hỗ trợ 16 port RJ45 tốc độ 10/100Mbps, 12K MAC Address, 2K bộ đệm (buffer)"],[49,"Ngoài ra thiết bị này còn có những tính năng như: Store and Forward, Spanning Tree, Port Trunking, Virtual LAN giúp chúng ta mở rộng mạng mà không sợ xảy ra đụng độ (collision)"],[50,"Hình 4.31 - Switch Compex SRX2216"],[51,"IV.8"],[52,"Wireless Access Point"],[53,"Hình 4.32 \u2013 Thiết bị Wireless Wireless Access Point là thiết bị kết nối mạng không dây được thiết kế theo chuẩn IEEE802.11b, cho phép nối LAN to LAN, dùng cơ chế CSMA/CA để giải quyết tranh chấp, dùng cả hai kiến trúc kết nối mạng là Infrastructure và AdHoc, mã hóa theo 64/128 Bit"],[54,"Nó còn hỗ trợ tốc độ truyền không dây lên 11Mbps trên băng tần 2,4GHz ISM dùng công nghệ radio DSSS (Direct Sequence Spread Spectrum) Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[55,""],[56,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 66/555 Hình 4.33 \u2013 Mạng sử dụng Wireless"],[57,"IV.9"],[58,"Router"],[59,"Là thiết bị dùng nối kết các mạng logic với nhau, kiểm soát và lọc các gói tin nên hạn chế được lưu l"]],"downloaded":true,"m":[-1,-1],"n":"giao_trinh_phan_tich_quy_trinh_ung_dung_nhung_loai_mo_hinh_mang_thuc_te_p10_1448.txt","o":"https://tailieu.vn/docview/tailieu/2011/201109/20110901/samsung1/giao_trinh_phan_tich_quy_trinh_ung_dung_nhung_loai_mo_hinh_mang_thuc_te_p10_1448.pdf"},{"saved_path":"temp/giao_trinh_huong_dan_phan_tich_nhung_loai_mo_hinh_ung_dung_mang_thuc_te_p10_2822.txt","r":0,"s":[],"t":"\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 63/555 \n\nIV.6. Bridge (cầu nối). \nLà thiết bị cho phép nối kết hai nhánh mạng, có chức năng chuyển có chọn lọc các gói tin đến nhánh \nmạng chứa máy nhận gói tin. Trong Bridge có bảng địa chỉ MAC, bảng địa chỉ này sẽ được dùng để \nquyết định đường đi của gói tin (cách thức truyền đi của một gói tin sẽ được nói rõ hơn ở trong phần \ntrình bày về thiết bị Switch). Bảng địa chỉ này có thể được khởi tạo tự động hoặc phải cấu hình bằng \ntay. Bridge hoạt động ở lớp hai (lớp Data link) trong mô hình OSI. \n\nƯu điểm của Bridge là: cho phép mở rộng cùng một mạng logic với nhiều kiểu cáp khác nhau. Chia \nmạng thành nhiều phân đoạn khác nhau nhằm giảm lưu lượng trên mạng. \n\nKhuyết điểm: chậm hơn Repeater vì phải xử lý các gói tin, chưa tìm được đường đi tối ưu trong \ntrường hợp có nhiều đường đi. Việc xử lý gói tin dựa trên phần mềm. \n\n \n\n \n\nHình 4.28 \u2013 Mô hình mạng sử dụng Bridge. \n\nIV.7. Switch \nLà thiết bị giống như bridge nhưng nhiều port hơn cho phép ghép nối nhiều đoạn mạng với nhau. \nSwitch cũng dựa vào bảng địa chỉ MAC để quyết định gói tin nào đi ra port nào nhằm tránh tình trạng \ngiảm băng thông khi số máy trạm trong mạng tăng lên. Switch cũng hoạt động tại lớp hai trong mô \nhình OSI. Việc xử lý gói tin dựa trên phần cứng (chip). \n\nKhi một gói tin đi đến Switch (hoặc Bridge), Switch (hoặc Bridge) sẽ thực hiện như sau: \n\n- Kiểm tra địa chỉ nguồn của gói tin đã có trong bảng MAC chưa, nếu chưa có thì nó sẽ thêm địa chỉ \nMAC này và port nguồn (nơi gói tin đi vào Switch (hoặc Bridge)) vào trong bảng MAC. \n\n- Kiểm tra địa chỉ đích của gói tin đã có trong bảng MAC chưa: \n+ Nếu chưa có thì nó sẽ gởi gói tin ra tất cả các port (ngoại trừ port gói tin đi vào). \n+ Nếu địa chỉ đích đã có trong bảng MAC: \n\n Nếu port đích trùng với port nguồn thì Switch (hoặc Bridge) sẽ loại bỏ gói tin. \n Nếu port đích khác với port nguồn thì gói tin sẽ được gởi ra port đích tương ứng. \n\nChú ý:  \n\n- Địa chỉ nguồn và địa chỉ đích được nói ở trên đều là địa chỉ MAC. \n- Port nguồn là Port mà gói tin đi vào. \n- Port đích là Port mà gói tin đi ra. \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 64/555 \n\nDo cách hoạt động của Switch (hoặc Bridge) như vậy, nên mỗi Port của Switch là một Collision \nDomain, và toàn bộ Switch được xem là một Broadcast Domain (khái niệm Collision Domain và \nBroadcast Domain sẽ được giới thiệu trong chương 5, phần \u201ccác công nghệ mạng LAN\u201d). \n\n \n\nHình 4.29 \u2013 Mô hình mạng sử dụng Switch. \n\nNgoài các tính năng cơ sở, Switch còn các tính năng mở rộng như sau: \n\n- Phương pháp chuyển gói tin (Switching mode): trong thiết bị của Cisco có thể sử dụng một trong \nba loại sau: \n\n+ Store and Forward: là tính năng lưu dữ liệu trong bộ đệm trước khi truyền sang các port \nkhác để tránh đụng độ (collision), thông thường tốc độ truyền khoảng 148.800 pps. Với kỹ \nthuật này toàn bộ gói tin phải được nhận đủ trước khi Switch truyền frame này đi do đó độ \ntrễ (latency) lệ thuộc vào chiều dài của frame. \n\n+ Cut Through: Switch sẽ truyền gói tin ngay lập tức một khi nó biết được địa chỉ đích của \ngói tin. Kỹ thuật này sẽ có độ trễ thấp hơn so với kỹ thuật Store and Forward và độ trễ luôn \nlà con số xác định, bất chấp chiều dài của gói tin. \n\n+ Fragment Free: thì Switch đọc 64 byte đầu tiên và sau đó bắt đầu truyền dữ liệu. \n- Trunking (MAC Base): ở một số thiết bị Switch, tính năng Trunking được hiểu là tính năng giúp \n\ntăng tốc độ truyền giữa hai Switch, nhưng chú ý là hai Switch phải cùng loại. Riêng trong thiết bị \nSwitch của Cisco, Trunking được hiểu là đường truyền dùng để mang thông tin cho các VLAN. \n\n \n\nHình 4.30 \u2013 Mô tả cách dùng đường Trunking. \n\n- VLAN: tạo các mạng ảo, nhằm đảm bảo tính bảo mật khi mở rộng mạng bằng cách nối các \nSwitch với nhau. Mỗi VLAN có thể được xem là một Broadcast Domain, nên khi chia các mạng \nảo giúp ta sẽ phân vùng miền broadcast nhằm cải tiến tốc độ và hiệu quả của hệ thống. Nói cách \nkhác, VLAN là một nhóm logic các thiết bị hoặc người sử dụng. Nhóm logic này được chia dựa \nvào chức năng, ứng dụng, \u2026 mà không phụ thuộc vào vị trí địa lý. Chỉ có các thiết bị trong cùng \nVLAN mới liên lạc được với nhau. Nếu muốn các VLAN có thể liên lạc được với nhau thì phải sử \ndụng Router để liên kết các VLAN lại. \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 65/555 \n\n \n\nHình 4.31 \u2013 Mô tả cách sử dụng VLAN. \n\n- Spanning Tree: tạo đường dự phòng, bình thường dữ liệu được truyền trên một cổng mang số \nthứ tự thấp. Khi mất liên lạc thiết bị tự chuyển sang cổng khác, nhằm đảm bảo mạng hoạt động \nliên tục. Spanning Tree thực chất là hạn chế các đường dư thừa trên mạng. \n\nHình dưới là Switch Compex SRX2216 được thiết kế theo chuẩn IEEE 802.3, IEEE802.3u, Switch \nnày thường dùng trong các giải pháp mạng vừa và nhỏ. Thiết bị này hỗ trợ 16 port RJ45 tốc độ \n10/100Mbps, 12K MAC Address, 2K bộ đệm (buffer).  Ngoài ra thiết bị này còn có những tính năng \nnhư: Store and Forward, Spanning Tree, Port Trunking, Virtual LAN giúp chúng ta mở rộng mạng \nmà không sợ xảy ra đụng độ (collision). \n\n \n\nHình 4.31 - Switch Compex SRX2216. \n\nIV.8. Wireless Access Point. \n\n \n\nHình 4.32 \u2013 Thiết bị Wireless \n\nWireless Access Point là thiết bị kết nối mạng không dây được thiết kế theo chuẩn IEEE802.11b, cho \nphép nối LAN to LAN, dùng cơ chế CSMA/CA để giải quyết tranh chấp, dùng cả hai kiến trúc kết nối \nmạng là Infrastructure và AdHoc, mã hóa theo 64/128 Bit. Nó còn hỗ trợ tốc độ truyền không dây lên \n11Mbps trên băng tần 2,4GHz ISM dùng công nghệ radio DSSS (Direct Sequence Spread \nSpectrum) \n\nCl\nick\n\n to\n b\n\nuy\n N\n\nOW\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\nCl\n\nick\n to\n\n b\nuy\n\n N\nOW\n\n!PD\n\nF-\nXCh\n\nange Viewer\n\nw\nw\n\nw.docu-track\n.c\n\nom\n\nhttp://www.pdfxviewer.com/\nhttp://www.pdfxviewer.com/\nuser\nText Box\n.\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nTài liệu hướng dẫn giảng dạy \n\n \n\nHọc phần 3 - Quản trị mạng Microsoft Windows  Trang 66/555 \n\n \n\nHình 4.33 \u2013 Mạng sử dụng Wireless. \n\nIV.9. Router. \nLà thiết bị dùng nối kết các mạng logic với nhau, kiểm soát và lọc các gói tin nên hạn chế được lưu \nl","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2011/201107/20110729/phuoctam46/giao_trinh_huong_dan_phan_tich_nhung_loai_mo_hinh_ung_dung_mang_thuc_te_p10_2822.txt","sentences":[[1,"Bridge (cầu nối)"],[2,"Là thiết bị cho phép nối kết hai nhánh mạng, có chức năng chuyển có chọn lọc các gói tin đến nhánh mạng chứa máy nhận gói tin"],[3,"Trong Bridge có bảng địa chỉ MAC, bảng địa chỉ này sẽ được dùng để quyết định đường đi của gói tin (cách thức truyền đi của một gói tin sẽ được nói rõ hơn ở trong phần trình bày về thiết bị Switch)"],[4,"Bảng địa chỉ này có thể được khởi tạo tự động hoặc phải cấu hình bằng tay"],[5,"Bridge hoạt động ở lớp hai (lớp Data link) trong mô hình OSI"],[6,"Ưu điểm của Bridge là: cho phép mở rộng cùng một mạng logic với nhiều kiểu cáp khác nhau"],[7,"Chia mạng thành nhiều phân đoạn khác nhau nhằm giảm lưu lượng trên mạng"],[8,"Khuyết điểm: chậm hơn Repeater vì phải xử lý các gói tin, chưa tìm được đường đi tối ưu trong trường hợp có nhiều đường đi"],[9,"Việc xử lý gói tin dựa trên phần mềm"],[10,"Hình 4.28 \u2013 Mô hình mạng sử dụng Bridge"],[11,"IV.7"],[12,"Switch Là thiết bị giống như bridge nhưng nhiều port hơn cho phép ghép nối nhiều đoạn mạng với nhau"],[13,"Switch cũng dựa vào bảng địa chỉ MAC để quyết định gói tin nào đi ra port nào nhằm tránh tình trạng giảm băng thông khi số máy trạm trong mạng tăng lên"],[14,"Switch cũng hoạt động tại lớp hai trong mô hình OSI"],[15,"Việc xử lý gói tin dựa trên phần cứng (chip)"],[16,"Khi một gói tin đi đến Switch (hoặc Bridge), Switch (hoặc Bridge) sẽ thực hiện như sau: - Kiểm tra địa chỉ nguồn của gói tin đã có trong bảng MAC chưa, nếu chưa có thì nó sẽ thêm địa chỉ MAC này và port nguồn (nơi gói tin đi vào Switch (hoặc Bridge)) vào trong bảng MAC"],[17,"- Kiểm tra địa chỉ đích của gói tin đã có trong bảng MAC chưa: + Nếu chưa có thì nó sẽ gởi gói tin ra tất cả các port (ngoại trừ port gói tin đi vào)"],[18,"+ Nếu địa chỉ đích đã có trong bảng MAC: Nếu port đích trùng với port nguồn thì Switch (hoặc Bridge) sẽ loại bỏ gói tin"],[19,"Nếu port đích khác với port nguồn thì gói tin sẽ được gởi ra port đích tương ứng"],[20,"Chú ý: - Địa chỉ nguồn và địa chỉ đích được nói ở trên đều là địa chỉ MAC"],[21,"- Port nguồn là Port mà gói tin đi vào"],[22,"- Port đích là Port mà gói tin đi ra"],[23,"Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[24,""],[25,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 64/555 Do cách hoạt động của Switch (hoặc Bridge) như vậy, nên mỗi Port của Switch là một Collision Domain, và toàn bộ Switch được xem là một Broadcast Domain (khái niệm Collision Domain và Broadcast Domain sẽ được giới thiệu trong chương 5, phần \u201ccác công nghệ mạng LAN\u201d)"],[26,"Hình 4.29 \u2013 Mô hình mạng sử dụng Switch"],[27,"Ngoài các tính năng cơ sở, Switch còn các tính năng mở rộng như sau: - Phương pháp chuyển gói tin (Switching mode): trong thiết bị của Cisco có thể sử dụng một trong ba loại sau: + Store and Forward: là tính năng lưu dữ liệu trong bộ đệm trước khi truyền sang các port khác để tránh đụng độ (collision), thông thường tốc độ truyền khoảng 148.800 pps"],[28,"Với kỹ thuật này toàn bộ gói tin phải được nhận đủ trước khi Switch truyền frame này đi do đó độ trễ (latency) lệ thuộc vào chiều dài của frame"],[29,"+ Cut Through: Switch sẽ truyền gói tin ngay lập tức một khi nó biết được địa chỉ đích của gói tin"],[30,"Kỹ thuật này sẽ có độ trễ thấp hơn so với kỹ thuật Store and Forward và độ trễ luôn là con số xác định, bất chấp chiều dài của gói tin"],[31,"+ Fragment Free: thì Switch đọc 64 byte đầu tiên và sau đó bắt đầu truyền dữ liệu"],[32,"- Trunking (MAC Base): ở một số thiết bị Switch, tính năng Trunking được hiểu là tính năng giúp tăng tốc độ truyền giữa hai Switch, nhưng chú ý là hai Switch phải cùng loại"],[33,"Riêng trong thiết bị Switch của Cisco, Trunking được hiểu là đường truyền dùng để mang thông tin cho các VLAN"],[34,"Hình 4.30 \u2013 Mô tả cách dùng đường Trunking"],[35,"- VLAN: tạo các mạng ảo, nhằm đảm bảo tính bảo mật khi mở rộng mạng bằng cách nối các Switch với nhau"],[36,"Mỗi VLAN có thể được xem là một Broadcast Domain, nên khi chia các mạng ảo giúp ta sẽ phân vùng miền broadcast nhằm cải tiến tốc độ và hiệu quả của hệ thống"],[37,"Nói cách khác, VLAN là một nhóm logic các thiết bị hoặc người sử dụng"],[38,"Nhóm logic này được chia dựa vào chức năng, ứng dụng, \u2026 mà không phụ thuộc vào vị trí địa lý"],[39,"Chỉ có các thiết bị trong cùng VLAN mới liên lạc được với nhau"],[40,"Nếu muốn các VLAN có thể liên lạc được với nhau thì phải sử dụng Router để liên kết các VLAN lại"],[41,"Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[42,""],[43,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 65/555 Hình 4.31 \u2013 Mô tả cách sử dụng VLAN"],[44,"- Spanning Tree: tạo đường dự phòng, bình thường dữ liệu được truyền trên một cổng mang số thứ tự thấp"],[45,"Khi mất liên lạc thiết bị tự chuyển sang cổng khác, nhằm đảm bảo mạng hoạt động liên tục"],[46,"Spanning Tree thực chất là hạn chế các đường dư thừa trên mạng"],[47,"Hình dưới là Switch Compex SRX2216 được thiết kế theo chuẩn IEEE 802.3, IEEE802.3u, Switch này thường dùng trong các giải pháp mạng vừa và nhỏ"],[48,"Thiết bị này hỗ trợ 16 port RJ45 tốc độ 10/100Mbps, 12K MAC Address, 2K bộ đệm (buffer)"],[49,"Ngoài ra thiết bị này còn có những tính năng như: Store and Forward, Spanning Tree, Port Trunking, Virtual LAN giúp chúng ta mở rộng mạng mà không sợ xảy ra đụng độ (collision)"],[50,"Hình 4.31 - Switch Compex SRX2216"],[51,"IV.8"],[52,"Wireless Access Point"],[53,"Hình 4.32 \u2013 Thiết bị Wireless Wireless Access Point là thiết bị kết nối mạng không dây được thiết kế theo chuẩn IEEE802.11b, cho phép nối LAN to LAN, dùng cơ chế CSMA/CA để giải quyết tranh chấp, dùng cả hai kiến trúc kết nối mạng là Infrastructure và AdHoc, mã hóa theo 64/128 Bit"],[54,"Nó còn hỗ trợ tốc độ truyền không dây lên 11Mbps trên băng tần 2,4GHz ISM dùng công nghệ radio DSSS (Direct Sequence Spread Spectrum) Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om Cl ick to b uy N OW !PD F- XCh ange Viewer w w w.docu-track .c om http://www.pdfxviewer.com/ http://www.pdfxviewer.com/ user Text Box"],[55,""],[56,"Tài liệu hướng dẫn giảng dạy Học phần 3 - Quản trị mạng Microsoft Windows Trang 66/555 Hình 4.33 \u2013 Mạng sử dụng Wireless"],[57,"IV.9"],[58,"Router"],[59,"Là thiết bị dùng nối kết các mạng logic với nhau, kiểm soát và lọc các gói tin nên hạn chế được lưu l"]],"downloaded":true,"m":[-1,-1],"n":"giao_trinh_huong_dan_phan_tich_nhung_loai_mo_hinh_ung_dung_mang_thuc_te_p10_2822.txt","o":"https://tailieu.vn/docview/tailieu/2011/201107/20110729/phuoctam46/giao_trinh_huong_dan_phan_tich_nhung_loai_mo_hinh_ung_dung_mang_thuc_te_p10_2822.pdf"},{"saved_path":"temp/do_a_n_thie_t_ke_gia_i_pha_p_he_tho_ng_ma_ng_9018.txt","r":99.1253662109375,"s":[[39,39,1,12,0,11,0,11,"§ Server đào tạo: gồm dữ liệu về đào tạo và điểm","§ Server đào tạo: gồm dữ liệu về đào tạo và điểm"],[4,4,1,7,0,6,0,6,"Các dịch vụ trên Server ...............................................................................................................19 4.3","Các dịch vụ trên Server ...............................................................................................................19 4.3"],[36,36,1,55,0,54,0,54,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 4 Ø Thông tin về các máy chủ dịch vụ: ü Các máy chủ đặt tại phòng IT (tầng 1) với các dịch vụ sau: § Web Server: Nội dung website thông tin trường § FTP Server, Mail Server: gồm FTP Server, Mail Server, DNS dự phòng","[Project Semeter 2] | Tran Van Vuong HA-1516-0061 4 Ø Thông tin về các máy chủ dịch vụ: ü Các máy chủ đặt tại phòng IT (tầng 1) với các dịch vụ sau: § Web Server: Nội dung website thông tin trường § FTP Server, Mail Server: gồm FTP Server, Mail Server, DNS dự phòng"],[37,37,1,9,0,8,0,8,"§ DNS Server: gồm dịch vụ mạng DNS, DHCP","§ DNS Server: gồm dịch vụ mạng DNS, DHCP"],[38,38,1,9,0,8,0,8,"§ Server tài chính: gồm dữ liệu tài chính","§ Server tài chính: gồm dữ liệu tài chính"],[2,2,1,66,0,65,0,65,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 1 MỤC LỤC Trang LỜI MỞ ĐẦU ..............................................................................................................................................2 PHẦN 1: KHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ .............................................................3 PHẦN 2: SƠ ĐỒ THIẾT KẾ HẠ TẦNG MẠNG ......................................................................................5 PHẦN 3: LỰA CHỌN THIẾT BỊ VÀ DỰ TOÁN CHI PHÍ ....................................................................6 PHẦN 4: THỰC NGHIỆM TRIỂN KHAI LAB MÔ PHỎNG TRÊN PHẦN MỀM PACKET TRACER ................................................................................................................7 4.1","[Project Semeter 2] | Tran Van Vuong HA-1516-0061 1 MỤC LỤC Trang LỜI MỞ ĐẦU ..............................................................................................................................................2 PHẦN 1: KHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ .............................................................3 PHẦN 2: SƠ ĐỒ THIẾT KẾ HẠ TẦNG MẠNG ......................................................................................5 PHẦN 3: LỰA CHỌN THIẾT BỊ VÀ DỰ TOÁN CHI PHÍ ....................................................................6 PHẦN 4: THỰC NGHIỆM TRIỂN KHAI LAB MÔ PHỎNG TRÊN PHẦN MỀM PACKET TRACER ................................................................................................................7 4.1"],[6,6,1,37,0,36,0,36,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 2 LLỜỜI MI MỞỞ ĐĐẦẦUU Ngày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang bùng nổ trên toàn thế giới","[Project Semeter 2] | Tran Van Vuong HA-1516-0061 2 LLỜỜI MI MỞỞ ĐĐẦẦUU Ngày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang bùng nổ trên toàn thế giới"],[19,19,1,83,0,82,0,82,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 3 PHẦN 1 KHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ Mô hình hoạt động của trường yêu cầu thiết kế mạng bao gồm các thông tin được liệt kê như sau: Ø Thông tin về các phòng ban: ü Khu hành chính (tầng 1): bao gồm Phòng Ban giám hiệu (2 nhân viên), Phòng tài chính (5 nhân viên), Phòng tổ chức hành chính (4 nhân viên), Phòng đào tạo (4 nhân viên)","[Project Semeter 2] | Tran Van Vuong HA-1516-0061 3 PHẦN 1 KHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ Mô hình hoạt động của trường yêu cầu thiết kế mạng bao gồm các thông tin được liệt kê như sau: Ø Thông tin về các phòng ban: ü Khu hành chính (tầng 1): bao gồm Phòng Ban giám hiệu (2 nhân viên), Phòng tài chính (5 nhân viên), Phòng tổ chức hành chính (4 nhân viên), Phòng đào tạo (4 nhân viên)"],[3,3,1,12,0,11,0,11,"Thông số cấu hình các thiết bị router và switch ...................................................................8 4.2","Thông số cấu hình các thiết bị router và switch ...................................................................8 4.2"],[60,3,0.7200000286102295,9,0,8,0,8,"Thông số cấu hình các thiết bị router và switch: \u2022 Router 1:","Thông số cấu hình các thiết bị router và switch ...................................................................8 4.2"],[15,15,1,16,0,15,0,15,"Phần 3: Dự toán chi phí và lựa chọn thiết bị mạng đáp ứng nhu cầu","Phần 3: Dự toán chi phí và lựa chọn thiết bị mạng đáp ứng nhu cầu"],[5,5,1,30,0,29,0,29,"Một số phần mềm quản trị mạng phổ biến...........................................................................22 PHẦN 5: TƯ VẤN CÁC ƯU KHUYẾT ĐIỂM, HƯỚNG PHÁT TRIỂN VÀ MỞ RỘNG CỦA HỆ THỐNG .......................................................................................................................................................26 LỜI KẾT .....................................................................................................................................................27","Một số phần mềm quản trị mạng phổ biến...........................................................................22 PHẦN 5: TƯ VẤN CÁC ƯU KHUYẾT ĐIỂM, HƯỚNG PHÁT TRIỂN VÀ MỞ RỘNG CỦA HỆ THỐNG .......................................................................................................................................................26 LỜI KẾT .....................................................................................................................................................27"],[34,34,1,17,0,16,0,16,"ü Các phòng ban đều có thể truy cập hệ thống máy chủ và đi ra internet","ü Các phòng ban đều có thể truy cập hệ thống máy chủ và đi ra internet"],[22,22,1,21,0,20,0,20,"ü Khu học tập (tầng 3): gồm các phòng học lý thuyết, 10 phòng, mỗi phòng 1 đường kết nối internet","ü Khu học tập (tầng 3): gồm các phòng học lý thuyết, 10 phòng, mỗi phòng 1 đường kết nối internet"],[40,40,0.9113923907279968,36,0,35,0,35,"Ø Thông tin về đường truyền kết nối internet và chi nhánh: ü Triển khai đường Internet đáp ứng số lượng nhân viên, người dùng nội bộ và đường internet dự phòng sẽ sẵn sàng nếu đường internet chính có sự cố","Ø Thông tin về đường truyền kết nối internet và chi nhánh: ü Triển khai đường Internet đáp ứng số lượng nhân viên, người dùng nội bộ và đường internet dự phòng sẽ sẵn sàng nếu đườn"],[13,13,1,56,0,55,0,55,"Trong đồ án này, chúng ta đi tìm hiểu, phân tích và thiết kế một mô hình mạng của một trường đại học, qua đó có thể trau dồi kiến thức cũng như kinh nghiệm cho sau này Bài đồ án này gồm các phần: Phần 1: Khảo sát nhu cầu cho mục tiêu thiết kế","Trong đồ án này, chúng ta đi tìm hiểu, phân tích và thiết kế một mô hình mạng của một trường đại học, qua đó có thể trau dồi kiến thức cũng như kinh nghiệm cho sau này Bài đồ án này gồm các phần: Phần 1: Khảo sát nhu cầu cho mục tiêu thiết kế"],[17,17,1,17,0,16,0,16,"Phần 5: Tư vấn các ưu khuyết điểm, hướng phát triển và mở rộng của hệ thống","Phần 5: Tư vấn các ưu khuyết điểm, hướng phát triển và mở rộng của hệ thống"],[20,20,1,31,0,30,0,30,"ü Khu văn phòng khoa (tầng 2): khoa Công nghệ thông tin (CNTT), khoa Quản trị kinh doanh (QTKD), khoa Ngoại ngữ (NN), khoa Thực phẩm (TP), khoa Xây dựng (XD)","ü Khu văn phòng khoa (tầng 2): khoa Công nghệ thông tin (CNTT), khoa Quản trị kinh doanh (QTKD), khoa Ngoại ngữ (NN), khoa Thực phẩm (TP), khoa Xây dựng (XD)"],[23,23,1,14,0,13,0,13,"ü Khu thực hành 1 (tầng 4): được dùng thực hành khoa CNTT, QTKD","ü Khu thực hành 1 (tầng 4): được dùng thực hành khoa CNTT, QTKD"],[26,26,1,20,0,19,0,19,"ü Khu thực hành 2 (tầng 5): được dùng thực hành các môn tin học của khoa NN, TP, XD","ü Khu thực hành 2 (tầng 5): được dùng thực hành các môn tin học của khoa NN, TP, XD"],[30,30,1,11,0,10,0,10,"ü Thư viện (tầng 6): 25 máy tính kết nối internet","ü Thư viện (tầng 6): 25 máy tính kết nối internet"],[31,31,1,27,0,26,0,26,"ü Triển khai Wireless LAN tại các tầng cho phép sinh viên truy cập không dây, yêu cầu xác thực mật khẩu để kết nối là 123456789","ü Triển khai Wireless LAN tại các tầng cho phép sinh viên truy cập không dây, yêu cầu xác thực mật khẩu để kết nối là 123456789"],[11,11,1,127,0,126,0,126,"Hệ thống máy tính có thể giúp cho chúng ta thực hiện công việc hiệu quả hơn rất nhiều lần, giúp con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng và cũng lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng,\u2026 Bên cạnh đó còn rất nhiều ứng dụng khác chưa kể đến việc chúng giúp con người trong hoạt động giải trí, thư giãn,\u2026 Vậy thì làm sao chúng ta có thể thiết kế một mô hình mạng máy tính đảm bảo có khoa học, dễ vận hành cũng như dễ thay sửa một khi có sự cố xảy ra","Hệ thống máy tính có thể giúp cho chúng ta thực hiện công việc hiệu quả hơn rất nhiều lần, giúp con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng và cũng lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng,\u2026 Bên cạnh đó còn rất nhiều ứng dụng khác chưa kể đến việc chúng giúp con người trong hoạt động giải trí, thư giãn,\u2026 Vậy thì làm sao chúng ta có thể thiết kế một mô hình mạng máy tính đảm bảo có khoa học, dễ vận hành cũng như dễ thay sửa một khi có sự cố xảy ra"],[7,7,1,39,0,38,0,38,"Các công ty, tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại","Các công ty, tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại"],[10,10,1,45,0,44,0,44,"Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng, chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời","Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng, chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời"],[32,32,1,31,0,30,0,30,"ü Các máy in, máy quét được tích hợp trực tiếp vào hệ thống mạng của các phòng ban qua cổng giao tiếp RJ45, trừ phòng thực hành và thư viện","ü Các máy in, máy quét được tích hợp trực tiếp vào hệ thống mạng của các phòng ban qua cổng giao tiếp RJ45, trừ phòng thực hành và thư viện"],[8,8,1,52,0,51,0,51,"Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, chúng giúp con người có thể làm việc được nhanh chóng và đồng thời giúp lưu trữ dữ liệu được lâu dài","Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, chúng giúp con người có thể làm việc được nhanh chóng và đồng thời giúp lưu trữ dữ liệu được lâu dài"],[9,9,1,38,0,37,0,37,"Nói đúng hơn là việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho một công ty, dù là lớn hay nhỏ, cũng như một tổ chức phi kinh tế nào khác","Nói đúng hơn là việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho một công ty, dù là lớn hay nhỏ, cũng như một tổ chức phi kinh tế nào khác"],[12,12,1,15,0,14,0,14,"Đó là một yêu cầu lớn đối với những người thiết kế mô hình mạng","Đó là một yêu cầu lớn đối với những người thiết kế mô hình mạng"],[14,14,1,9,0,8,0,8,"Phần 2: Sơ đồ thiết kế hạ tầng mạng","Phần 2: Sơ đồ thiết kế hạ tầng mạng"],[24,24,1,11,0,10,0,10,"§ Dãy 1, 2, 3 là khoa CNTT (30 máy tính/dãy)","§ Dãy 1, 2, 3 là khoa CNTT (30 máy tính/dãy)"],[16,16,1,16,0,15,0,15,"Phần 4: Thực nghiệm triển khai lab mô phỏng trên phần mềm Cisco Packet Tracer Student","Phần 4: Thực nghiệm triển khai lab mô phỏng trên phần mềm Cisco Packet Tracer Student"],[25,25,1,11,0,10,0,10,"§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)"],[27,25,0.6363636255264282,7,0,10,0,10,"§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)"],[28,25,0.6666666865348816,7,0,9,0,10,"§ Dãy 3 là khoa TP (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)"],[29,25,0.8181818127632141,9,0,10,0,10,"§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)"],[25,27,0.6363636255264282,7,0,10,0,10,"§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)","§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)"],[27,27,1,11,0,10,0,10,"§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)","§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)"],[28,27,0.6666666865348816,7,0,9,0,10,"§ Dãy 3 là khoa TP (30 máy tính/ dãy)","§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)"],[29,27,0.6363636255264282,7,0,10,0,10,"§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)","§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)"],[25,28,0.6666666865348816,7,0,10,0,9,"§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)","§ Dãy 3 là khoa TP (30 máy tính/ dãy)"],[27,28,0.6666666865348816,7,0,10,0,9,"§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)","§ Dãy 3 là khoa TP (30 máy tính/ dãy)"],[28,28,1,10,0,9,0,9,"§ Dãy 3 là khoa TP (30 máy tính/ dãy)","§ Dãy 3 là khoa TP (30 máy tính/ dãy)"],[29,28,0.6666666865348816,7,0,10,0,9,"§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)","§ Dãy 3 là khoa TP (30 máy tính/ dãy)"],[25,29,0.8181818127632141,9,0,10,0,10,"§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)"],[27,29,0.6363636255264282,7,0,10,0,10,"§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)"],[28,29,0.6666666865348816,7,0,9,0,10,"§ Dãy 3 là khoa TP (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)"],[29,29,1,11,0,10,0,10,"§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)","§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)"],[33,33,1,8,0,7,0,7,"ü Phân hoạch VLAN cho các phòng ban","ü Phân hoạch VLAN cho các phòng ban"]],"t":"\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 1\t\n\t\n\n\t \t \t                                     HHỌỌC VIC VIỆỆN PHN PHẦẦN CN CỨỨNGNG    \n                            VÀ MVÀ MẠẠNG MÁY TÍNH FPT JETKINGNG MÁY TÍNH FPT JETKING  \n  \n  \n\n  \n\nĐĐỒỒ  ÁN HÁN HỌỌC KÌ IIC KÌ II  \nTHITHIẾẾT KT KẾẾ  GIGIẢẢI PHÁP HI PHÁP HỆỆ  THTHỐỐNG MNG MẠẠNGNG  \n\n    \n\n  Chuyên ngành:Chuyên ngành:      QUQUẢẢN TRN TRỊỊ  MMẠẠNGNG  \n\n  LLớớp:p:          J1J1--HDHD--15071507--S1S1  \n\n  Sinh viên thSinh viên thựực hic hiệện:n:    TrTrầần Văn Vương        n Văn Vương          (HA(HA--15161516--0061)0061)  \n\n  GiGiảảng viên hưng viên hướớng dng dẫẫn:n:    Th.s Lư HuTh.s Lư Huệệ  ThuThu  \n\n  \n\n  \n\n  \n\n  \n\n  \n\nTP.HTP.Hồồ  Chí Minh, 2016.Chí Minh, 2016.  \n\n  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 1\t\n\t\n\nMỤC\tLỤC\t\n\n\t\n\t\n\nTrang\t\n\nLỜI\tMỞ\tĐẦU\t..............................................................................................................................................2\t\n\nPHẦN\t1:\tKHẢO\tSÁT\tNHU\tCẦU\tCHO\tMỤC\tTIÊU\tTHIẾT\tKẾ\t.............................................................3\t\t\n\nPHẦN\t2:\tSƠ\tĐỒ\tTHIẾT\tKẾ\tHẠ\tTẦNG\tMẠNG\t......................................................................................5\t\n\nPHẦN\t3:\tLỰA\tCHỌN\tTHIẾT\tBỊ\tVÀ\tDỰ\tTOÁN\tCHI\tPHÍ\t....................................................................6\t\t\n\nPHẦN\t4:\tTHỰC\tNGHIỆM\tTRIỂN\tKHAI\tLAB\tMÔ\tPHỎNG\tTRÊN\t\t\n\nPHẦN\tMỀM\tPACKET\tTRACER\t................................................................................................................7\t\t\n\n4.1.\tThông\tsố\tcấu\thình\tcác\tthiết\tbị\trouter\tvà\tswitch\t...................................................................8\t\n\n4.2.\tCác\tdịch\tvụ\ttrên\tServer\t...............................................................................................................19\t\t\n\n4.3.\tMột\tsố\tphần\tmềm\tquản\ttrị\tmạng\tphổ\tbiến...........................................................................22\t\t\n\nPHẦN\t5:\tTƯ\tVẤN\tCÁC\tƯU\tKHUYẾT\tĐIỂM,\tHƯỚNG\tPHÁT\tTRIỂN\tVÀ\tMỞ\tRỘNG\tCỦA\tHỆ\t\nTHỐNG\t.......................................................................................................................................................26\t\n\nLỜI\tKẾT\t.....................................................................................................................................................27\t \t\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 2\t\n\t\n\nLLỜỜI MI MỞỞ  ĐĐẦẦUU  \n\n  \n\nNgày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang \n\nbùng nổ trên toàn thế giới. Các công ty, tổ chức mọc lên ngày càng nhiều, hoạt động của các \n\ncông ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang \n\nthiết bị hiện đại. Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải \n\nnhờ vào công cụ là máy tính và hệ thống mạng máy tính, chúng giúp con người có thể làm việc \n\nđược nhanh chóng và đồng thời giúp lưu trữ dữ liệu được lâu dài.  \n\nNói đúng hơn là việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho \n\nmột công ty, dù là lớn hay nhỏ, cũng như một tổ chức phi kinh tế nào khác. Không những thế đối \n\nvới đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều \n\nhết sức quan trọng, chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời. Hệ \n\nthống máy tính có thể giúp cho chúng ta thực hiện công việc hiệu quả hơn rất nhiều lần, giúp con \n\nngười có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng và cũng lưu trữ một lượng \n\nlớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông \n\ntin nhanh chóng,\u2026 Bên cạnh đó còn rất nhiều ứng dụng khác chưa kể đến việc chúng giúp con \n\nngười trong hoạt động giải trí, thư giãn,\u2026 \n\n Vậy thì làm sao chúng ta có thể thiết kế một mô hình mạng máy tính đảm bảo có khoa \n\nhọc, dễ vận hành cũng như dễ thay sửa một khi có sự cố xảy ra? Đó là một yêu cầu lớn đối với \n\nnhững người thiết kế mô hình mạng. Trong đồ án này, chúng ta đi tìm hiểu, phân tích và thiết kế \n\nmột mô hình mạng của một trường đại  học, qua đó có thể trau dồi kiến thức cũng như kinh \n\nnghiệm cho sau này  \n\nBài đồ án này gồm các phần:  \n\nPhần 1: Khảo sát nhu cầu cho mục tiêu thiết kế.  \n\nPhần 2: Sơ đồ thiết kế hạ tầng mạng. \n\nPhần 3: Dự toán chi phí và lựa chọn thiết bị mạng đáp ứng nhu cầu.  \n\nPhần 4: Thực nghiệm triển khai lab mô phỏng trên phần mềm Cisco Packet Tracer \n\nStudent. \n\nPhần 5: Tư vấn các ưu khuyết điểm, hướng phát triển và mở rộng của hệ thống. \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 3\t\n\t\n\nPHẦN 1  \n\nKHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ \n\n \n\nMô hình hoạt động của trường yêu cầu thiết kế mạng bao gồm các thông tin được liệt kê \n\nnhư sau: \n\nØ Thông tin về các phòng ban: \n\nü Khu hành chính (tầng 1): bao gồm Phòng Ban giám hiệu (2 nhân viên), Phòng tài \n\nchính (5 nhân viên), Phòng tổ chức hành chính (4 nhân viên), Phòng đào tạo (4 \n\nnhân viên). \n\nü Khu văn phòng khoa (tầng 2): khoa Công nghệ thông tin (CNTT), khoa Quản trị \n\nkinh doanh (QTKD), khoa Ngoại ngữ (NN), khoa Thực phẩm (TP), khoa Xây \n\ndựng (XD). Mỗi khoa 3 nhân viên. \n\nü Khu học tập (tầng 3): gồm các phòng học lý thuyết, 10 phòng, mỗi phòng 1 \n\nđường kết nối internet. \n\nü Khu thực hành 1 (tầng 4): được dùng thực hành khoa CNTT, QTKD. \n\n§ Dãy 1, 2, 3 là khoa CNTT (30 máy tính/dãy).  \n\n§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy). \n\nü Khu thực hành 2 (tầng 5): được dùng thực hành các môn tin học của khoa NN, \n\nTP, XD. \n\n§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy). \n\n§ Dãy 3 là khoa TP (30 máy tính/ dãy). \n\n§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy). \n\nü Thư viện (tầng 6): 25 máy tính kết nối internet. \n\nü Triển khai Wireless LAN tại các tầng cho phép sinh viên truy cập không dây, yêu \n\ncầu xác thực mật khẩu để kết nối là 123456789. \n\nü Các máy in, máy quét được tích hợp trực tiếp vào hệ thống mạng của các phòng \n\nban qua cổng giao tiếp RJ45, trừ phòng thực hành và thư viện. \n\nü Phân hoạch VLAN cho các phòng ban. \n\nü Các phòng ban đều có thể truy cập hệ thống máy chủ và đi ra internet. \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 4\t\n\t\n\nØ Thông tin về các máy chủ dịch vụ: \n\nü Các máy chủ đặt tại phòng IT (tầng 1) với các dịch vụ sau: \n\n§ Web Server: Nội dung website thông tin trường \n\n§ FTP Server, Mail Server: gồm FTP Server, Mail Server, DNS dự phòng. \n\n§ DNS Server: gồm dịch vụ mạng DNS, DHCP. \n\n§ Server tài chính: gồm dữ liệu tài chính. \n\n§ Server đào tạo: gồm dữ liệu về đào tạo và điểm. \n\nØ Thông tin về đường truyền kết nối internet và chi nhánh: \n\nü Triển khai đường Internet đáp ứng số lượng nhân viên, người dùng nội bộ và \n\nđường internet dự phòng sẽ sẵn sàng nếu đườn","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2018/20181012/tranhanh9196/do_a_n_thie_t_ke_gia_i_pha_p_he_tho_ng_ma_ng_9018.txt","sentences":[[1,""],[2,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 1 MỤC LỤC Trang LỜI MỞ ĐẦU ..............................................................................................................................................2 PHẦN 1: KHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ .............................................................3 PHẦN 2: SƠ ĐỒ THIẾT KẾ HẠ TẦNG MẠNG ......................................................................................5 PHẦN 3: LỰA CHỌN THIẾT BỊ VÀ DỰ TOÁN CHI PHÍ ....................................................................6 PHẦN 4: THỰC NGHIỆM TRIỂN KHAI LAB MÔ PHỎNG TRÊN PHẦN MỀM PACKET TRACER ................................................................................................................7 4.1"],[3,"Thông số cấu hình các thiết bị router và switch ...................................................................8 4.2"],[4,"Các dịch vụ trên Server ...............................................................................................................19 4.3"],[5,"Một số phần mềm quản trị mạng phổ biến...........................................................................22 PHẦN 5: TƯ VẤN CÁC ƯU KHUYẾT ĐIỂM, HƯỚNG PHÁT TRIỂN VÀ MỞ RỘNG CỦA HỆ THỐNG .......................................................................................................................................................26 LỜI KẾT .....................................................................................................................................................27"],[6,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 2 LLỜỜI MI MỞỞ ĐĐẦẦUU Ngày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang bùng nổ trên toàn thế giới"],[7,"Các công ty, tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại"],[8,"Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, chúng giúp con người có thể làm việc được nhanh chóng và đồng thời giúp lưu trữ dữ liệu được lâu dài"],[9,"Nói đúng hơn là việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho một công ty, dù là lớn hay nhỏ, cũng như một tổ chức phi kinh tế nào khác"],[10,"Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng, chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời"],[11,"Hệ thống máy tính có thể giúp cho chúng ta thực hiện công việc hiệu quả hơn rất nhiều lần, giúp con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng và cũng lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng,\u2026 Bên cạnh đó còn rất nhiều ứng dụng khác chưa kể đến việc chúng giúp con người trong hoạt động giải trí, thư giãn,\u2026 Vậy thì làm sao chúng ta có thể thiết kế một mô hình mạng máy tính đảm bảo có khoa học, dễ vận hành cũng như dễ thay sửa một khi có sự cố xảy ra"],[12,"Đó là một yêu cầu lớn đối với những người thiết kế mô hình mạng"],[13,"Trong đồ án này, chúng ta đi tìm hiểu, phân tích và thiết kế một mô hình mạng của một trường đại học, qua đó có thể trau dồi kiến thức cũng như kinh nghiệm cho sau này Bài đồ án này gồm các phần: Phần 1: Khảo sát nhu cầu cho mục tiêu thiết kế"],[14,"Phần 2: Sơ đồ thiết kế hạ tầng mạng"],[15,"Phần 3: Dự toán chi phí và lựa chọn thiết bị mạng đáp ứng nhu cầu"],[16,"Phần 4: Thực nghiệm triển khai lab mô phỏng trên phần mềm Cisco Packet Tracer Student"],[17,"Phần 5: Tư vấn các ưu khuyết điểm, hướng phát triển và mở rộng của hệ thống"],[18,""],[19,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 3 PHẦN 1 KHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ Mô hình hoạt động của trường yêu cầu thiết kế mạng bao gồm các thông tin được liệt kê như sau: Ø Thông tin về các phòng ban: ü Khu hành chính (tầng 1): bao gồm Phòng Ban giám hiệu (2 nhân viên), Phòng tài chính (5 nhân viên), Phòng tổ chức hành chính (4 nhân viên), Phòng đào tạo (4 nhân viên)"],[20,"ü Khu văn phòng khoa (tầng 2): khoa Công nghệ thông tin (CNTT), khoa Quản trị kinh doanh (QTKD), khoa Ngoại ngữ (NN), khoa Thực phẩm (TP), khoa Xây dựng (XD)"],[21,"Mỗi khoa 3 nhân viên"],[22,"ü Khu học tập (tầng 3): gồm các phòng học lý thuyết, 10 phòng, mỗi phòng 1 đường kết nối internet"],[23,"ü Khu thực hành 1 (tầng 4): được dùng thực hành khoa CNTT, QTKD"],[24,"§ Dãy 1, 2, 3 là khoa CNTT (30 máy tính/dãy)"],[25,"§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy)"],[26,"ü Khu thực hành 2 (tầng 5): được dùng thực hành các môn tin học của khoa NN, TP, XD"],[27,"§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy)"],[28,"§ Dãy 3 là khoa TP (30 máy tính/ dãy)"],[29,"§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy)"],[30,"ü Thư viện (tầng 6): 25 máy tính kết nối internet"],[31,"ü Triển khai Wireless LAN tại các tầng cho phép sinh viên truy cập không dây, yêu cầu xác thực mật khẩu để kết nối là 123456789"],[32,"ü Các máy in, máy quét được tích hợp trực tiếp vào hệ thống mạng của các phòng ban qua cổng giao tiếp RJ45, trừ phòng thực hành và thư viện"],[33,"ü Phân hoạch VLAN cho các phòng ban"],[34,"ü Các phòng ban đều có thể truy cập hệ thống máy chủ và đi ra internet"],[35,""],[36,"[Project Semeter 2] | Tran Van Vuong HA-1516-0061 4 Ø Thông tin về các máy chủ dịch vụ: ü Các máy chủ đặt tại phòng IT (tầng 1) với các dịch vụ sau: § Web Server: Nội dung website thông tin trường § FTP Server, Mail Server: gồm FTP Server, Mail Server, DNS dự phòng"],[37,"§ DNS Server: gồm dịch vụ mạng DNS, DHCP"],[38,"§ Server tài chính: gồm dữ liệu tài chính"],[39,"§ Server đào tạo: gồm dữ liệu về đào tạo và điểm"],[40,"Ø Thông tin về đường truyền kết nối internet và chi nhánh: ü Triển khai đường Internet đáp ứng số lượng nhân viên, người dùng nội bộ và đường internet dự phòng sẽ sẵn sàng nếu đườn"]],"downloaded":true,"m":[-1,-1],"n":"do_a_n_thie_t_ke_gia_i_pha_p_he_tho_ng_ma_ng_9018.txt","o":"https://tailieu.vn/docview/tailieu/2018/20181012/tranhanh9196/do_a_n_thie_t_ke_gia_i_pha_p_he_tho_ng_ma_ng_9018.pdf"},{"saved_path":"temp/thietkehatangmaytinh_l5_5661.txt","r":0,"s":[],"t":"\n\n1\n\n1\n\nChương 5\nTHIẾT KẾ TOPO MẠNG\n\nNguyễn Hồng Sơn\nBộ môn Mạng & TSL\nHọc viện CN BC-VT\n\n2\n\nNỘI DUNG\n\n� GIỚI THIỆU\n� THIẾT KẾ MẠNG PHÂN CẤP\n� TOPO MẠNG CÓ DỰ PHÒNG\n� THIẾT KẾ MẠNG MODULE\n� THIẾT KẾ TOPO MẠNG CAMPUS\n� THIẾT KẾ TOPO CHO ENTERPRISE EDGE\n� TOPO MẠNG CÓ AN NINH\n\n\n\n2\n\n3\n\nGIỚI THIỆU\n\n� Topo mạng là một bản đồ chỉ ra các phân \nđoạn, các điểm nối và các cộng đồng người \ndùng.\n\n� Bước đầu tiên trong pha thiết kế logic\n� Phác họa một sơ đồ luận lý trước khi chọn các \nthành phần vật lý hay công nghệ\n\n� Giúp nhận diện hình dạng của mạng, các điểm \nkết nối, phạm vi bao phủ và các loại thiết bị liên \nmạng.\n\n4\n\nTHIẾT KÊ MẠNG PHÂN CẤP \n(Hierarchical Network)\n\n� Theo mô hình thiết kế mạng phân cấp: phát \ntriển topo dưới dạng các lớp rời rạc\n\u2013 Core layer\n\u2013 Dstribution layer\n\u2013 Access layer\n\n� Mỗi lớp tập trung vào các chức năng đặc biệt, \ncho phép chọn ra các hệ thống và đặc tính phù \nhợp\n\n\n\n3\n\n5\n\n6\n\nFlat network Topology \n\n� Phù hợp cho mạng rất nhỏ\n� Mỗi thiết bị liên mạng có nhiệm vụ như nhau\n� Khi có sự cố phải kiểm tra toàn mạng\n� Topo mạng Flat WAN\n\n\u2013 Gồm nhiều điểm kết nối thành vòng\n\u2013 Mỗi điểm là một router kết nối với hai router kế qua một P2P link\n\u2013 Các giao thức định tuyến hội tụ nhanh\n\n\u2013 Thông tin có thể phục hồi khi một link bị hỏng\n\n\n\n4\n\n7\n\nCác Flat LAN topology\n\n� Đầu thập niên 1990 các thiết kế tiêu biểu cho \nLAN là các PC và Server nối vào một hay \nnhiều Hub theo một flat topology\n\n� Ngày nay thay Hub bằng Switch (lớp 2)\n� Mesh topology ~ nhu cầu khả dụng \n\n(availability)\n\u2013 Full-mesh topology\n\u2013 Partial-mesh topology\n\n8\n\nCác Flat LAN topoogy (2)\n\n� Số link trong full-mesh: n*(n-1)/2\n� Chi phí cao, khó bảo trì sửa chữa hay nâng cấp\n� Lưu lượng quảng bá cho định tuyến tăng\n\n\n\n5\n\n9\n\nDùng hierarchical topology\n\n� Hierarchical Redundant topology\n\n� Partial-Mesh Hierarchical topology\n\n10\n\nMô hình mạng cho công ty vừa và nhỏ\n\n� Hub-and-Spoke Hierarchical Topology\n\n\n\n6\n\n11\n\nĐặc trưng của core layer\n\n� Backbone tốc độ cao, tin cậy, dự phòng và \nthích ứng tốt\n\n� Độ trễ nhỏ\n� Có kích thước giới hạn\n\n12\n\nĐặc trưng của Distribution layer \n(1/2)\n\n� Kiểm soát truy xuất tài nguyên vì lý do an ninh\n� Kiểm soát lưu lượng mạng\n� Xác định các miền quảng bá\n� Định tuyến giữa các VLAN\n� Cho phép core kết nối các điểm chạy các giao \n\nthức khác nhau\n� Tái phân bố giữa các giao thức định tuyến ở \n\nlớp access và giao thức định  tuyến lớp core\n\n\n\n7\n\n13\n\nĐặc trưng của Distribution layer \n(2/2)\n\n� Tóm tắt đường đi từ lớp access\n� Trong một số trường hợp có thể cung cấp \n\ndefault route cho các router lớp access và chỉ \nchạy giao thức định tuyến động khi giao tiếp \nvới core router\n\n� Ẩn các thông tin về topo của access layer đối \nvới core layer và ngược lại\n\n14\n\nĐặc trưng access layer\n\n� Tạo điều kiện cho các user trên các phân đoạn cục bộ \ntruy nhập vào internetwork\n\n� Bao gồm router, switch, bridge, hub và access point.\n� Switch thường được dùng để triển khai access layer \n\ntrong các campus net nhằm phân chia các miền băng \nthông phù hợp với các ứng dụng cần nhiều băng thông\n\n� Dùng các công nghệ như ISDN, Frame Relay, leased \nline và analog dialup để hỗ trợ các chi nhánh hay văn \nphòng nhỏ truy nhập vào internetwork.\n\n\n\n8\n\n15\n\nHướng dẫn thiết kế mạng phân cấp (1/3)\n\n� Thiết kế access layer trước, tiếp theo là distribution \nlayer và sau cùng là core layer\n\n� Khi cấu hình các router tại core layer nên dùng các đặc \ntính định tuyến để tối ưu thông lượng gói\n\n� Tại core layer không nên lọc gói hay các kỹ thuật nào \nkhác làm chậm sự thao tác gói\n\n� Với thiết kế có nhu cầu kết nối đến mạng doanh nghiệp \nkhác qua một extranet hay Internet thì core nên bao \ngồm một hay nhiều link đến mạng ngoài.\n\n16\n\nHướng dẫn thiết kế mạng phân cấp(2/3)\n\n� Không nên để các administrator tại các chi nhánh xây \ndựng extranet riêng hay thực hiện các kết nối đến \nInternet, tập trung các chức năng này tại core layer\n\n� Để cải thiện hiệu quả định tuyến, ở distribution layer có \nthể tóm tắt các tuyến từ access layer\n\n� Distribution layer tóm tắt nhiều địa chỉ ở access layer \ntrong một vài quảng cáo đến core layer\n\n� Ở access layer có thể dùng các đặc tính định tuyến \nnhư Dial-on-Demand Routing (DDR) hay static routing \nđể sử dụng băng thông hiệu quả và tối ưu chi phí trên \ncác liên kết từ xa\n\n\n\n9\n\n17\n\nHướng dẫn thiết kế mạng phân cấp (3/3)\n\n� Kiểm soát chặt chẽ topo mạng tại access layer\n� Chú ý các lỗi:\n\n\u2013 Adding a chain\n\u2013 Backdoor \n\n18\n\nTOPO MẠNG CÓ DỰ PHÒNG\n\n� Nhân đôi các thành phần mạng, loại trừ những điểm \nmà khi lỗi làm tê liệt mạng.\n\n� Các thành phần có thể là core router, switch, link giữa \nhai switch, CSU, nguồn điện, WAN trunk, kết nối \nInternet...\n\n� Xây dựng các data center dự phòng hoàn chỉnh\n� Có thể thực hiện dự phòng trong mạng campus, giữa \ncác lớp trong mô hình phân cấp, trên edge net của \nenterprise net \n\n\n\n10\n\n19\n\nĐường đi dự phòng (backup path)\n\n� Backup path bao gồm các router và switch và \ncác link dự phòng riêng giữa các router và \nswitch, là bản sao của đường đi chính\n\n� Xem xét hai khía cạnh của backup path:\n\u2013 Băng thông là bao nhiêu\n\u2013 Tốc độ chuyển dụng nhanh cỡ nào\n\n� Nên dùng công cụ mô phỏng để đánh giá hiệu \nquả\n\n20\n\nLoad sharing (load balancing)\n\n� Cho phép hai hay nhiều giao tiếp hay đường \ndẫn chia sẻ tải với nhau\n\n� Mục tiêu chính của dự phòng là đáp ứng tính \nkhả dụng, mục tiêu phụ là nhằm cải thiện \nperformance của mạng bằng cách chia tải qua \ncác liên kết song song\n\n� Load sharing phải được qui hoạch và cấu hình\n\n\n\n11\n\n21\n\nTHIẾT KẾ MẠNG MODULE\n\n� Một dự án thiết kế mạng lớn và các mạng lớn bao gồm \nnhiều phần khác nhau\n\n� Mỗi phần nên được thiết kế theo giải pháp top-down \ncó hệ thống, áp dụng nguyên lý phân cấp và dự \nphòng. \n\n� Các giải pháp mạng và dịch vụ có thể được chọn trên \ncăn bản module nhưng phải là một thành phần của \nmạng toàn cục\n\n� Cisco system dùng mô hình Enterprise Composite \nNetwork Model để mô tả các thành phần khác nhau \nhay module của một mạng doanh nghiệp\n\n22\n\nEnterprise Composite Network Model (1/3)\n\n� ECNM gồm 3 vùng chính, mỗi vùng có thể tạo ra các \nmodule nhỏ hơn:\n\n\u2013 Enterprise campus: gồm các module để xây dựng mạng \ncampus vững chắc. Chứa tất cả các thành phần cho sự hoạt \nđộng độc lập bên trong campus.\n\n\u2013 Enterprise edge: tập hợp tất cả các kết nối từ các phần tử \nkhác nhau tại biên của mạng enterprise. Chứa tất cả các phần \ntử để truyền thông hiệu quả và an toàn giữa các campus, vị trí \nở xa, đối tác, user di động và Internet.\n\n\u2013 Service provider edge: cho phép truyền thông với các mạng \nkhác dùng các công nghệ WAN khác nhau và hỗ trợ bởi các \nISP\n\n\n\n12\n\n23\n\nEnterprise Composite Network Model (2/3)\n\n� Mỗi vùng có thể chia thành các module nhỏ \nhơn\n\n� Ví dụ campus có thể gồm campus backbone, \nserver farm, building access và distribution \nmodule, network management module. \nEnterprise edge có thể gồm WAN, VPN, \nInternet access, và e-commerce module\n\n� Có thể bổ sung module nếu cần\n\n24\n\nEnterprise Composite Network Model (3/3)\n\n\n\n13\n\n25\n\nTHIẾT KẾ TOPO MẠNG CAMPUS\n\n� Theo ECNM, một campus bao gồm campus \ninfrastructure module, server farm, network \nmanagement module và một edge distribution \nmodule\n\n� Infrastructure module có 3 module con:\n\u2013 Building access submodule\n\u2013 Building distribution submodule\n\u2013 Campus backbone\n\n26\n\nBuilding access submodule\n\n� Chứa các đầu cuối kết nối đến switch hay \naccess point.\n\n� Các switch cung cấp các liên kết đến building \ndistribution module\n\n� Các dịch vụ gồm network access, broadcast \ncontrol, protocol filtering, packet marking \n\n\n\n14\n\n27\n\nBuilding distribution submodule\n\n� Tập hợp các tủ nối dây trong tòa nhà và cung \ncấp kết nối đến campus backbone qua các \nrouter (hay switch lớp 3). \n\n� Thực hiện định tuyến, QoS và các phương \nthức điều khiển truy xuất phù hợp với nhu cầu \nan ninh và performance. \n\n� Backup path và Load sharing\n\n28\n\nCampus backbone\n\n� Là core layer của campus infrastructure \nmodule nối building access và building \ndistribution với server farm, network \nmanagement và edge distribution module\n\n� Redundancy và fast converging\n� Dùng router (hay switch lớp 3) tốc độ cao\n� Cung cấp tính năng QoS và security\n\n\n\n15\n\n29\n\nSpanning Tree Protocol\n\n� IEEE 802.1D và IEEE 802.1w\n� Topo của mỗi module và submodule được xác \nđịnh từng phần bởi STP\n\n� Nên chọn gốc (root bridge) bằng cách dùng \nlệnh cấu hình để tránh trường hợp giao thức \ntự động chọn gốc không thích hợp\n\n30\n\nVirtual LAN (1/3)\n\n� Bandwidth domain\n� Broadcast domain\n� Switch chia mạng thành những bandwidth \n\ndomain nhỏ (mỗi port + thiết bị kết nối đến = \nbandwidth domain)\n\n� Mặc định switch không chia broadcast domain, \nnhưng trong building access module dùng \nswitch sẽ kiểm soát broadcast bằng VLAN\n\n\n\n16\n\n31\n\nVirtual LAN (2/3)\n\n� VLAN là giải pháp truyền data theo chuẩn LAN \nnhưng không bị hạn chế bởi các ràng buộc vật \nlý truyền thống\n\n� Bất chấp vị trí vật lý của một user ở đâu, người \nquản trị đều có thể gán user vào một VLAN bất \nkỳ\n\n� Việc gán VLAN dựa trên các ứng dụng, giao \nthức, các nhu cầu về performance, nhu cầu về \nsecurity, đặc tính tải và lưu lượng, hay các yếu \ntố nào đó theo đặc thù mạng \n\n32\n\nVirtual LAN (3/3)\n\n� VLAN xuyên qua nhiều physical LAN\n� Nhiều VLAN trên một physical LAN\n� Trong mạng IP, một VLAN được thực \n\nhiện như là một mạng con  (IP subnet) \n(bởi ARP)\n\n\n\n17\n\n33\n\nThiết kế VLAN cơ bản (1/3)\n\n34\n\nThiết kế VLAN cơ bản (2/3)\n\n� VLAN qua nhiều switch\n� IEEE 802.1Q\n� Cisco ISL protocol\n\nTrunk link\n\n\n\n18\n\n35\n\nThiết kế VLAN cơ bản (3/3)\n\n� Cần xác định phạm vi của mỗi VLAN\n� Mỗi VLAN sẽ trãi ra trên bao nhiêu switch\n� Xác định dung lượng của trunk link, dùng các \n\nphương pháp trong chương 3\n� Đối với mạng phòng lab thì thường dùng \n\n10Mbps Ethernet trunk\n\n36\n\nWireless LAN (1/3)\n\n� Access point (AP), wireless cell\n� Xác định tầm phủ của một wireless cell \nvà cần bao nhiêu wireless cell\n\n� Các yếu tố ảnh hưởng gồm: data rate, \ncông suất, anten và vị trí đặt\n\n\n\n19\n\n37\n\nWireless LAN (2/3)\n\n� Nguyên lý anten là đẳng hướng\n� Tín hiệu mạnh với các hướng trực giao với trục \n\nanten\n� Chú ý không để  AP tại các mặt phản xạ \n\nhướng ra ngoài vị trí cần\n� Bức tường có thể làm suy giảm tín hiệu nhưng \n\nkhông ngăn chặn hoàn toàn\n\n38\n\nWireless LAN (3/3)\n\n� Kích thước cell càng lớn bandwidth domain \ncàng lớn, performance càng thấp\n\n� Có thể dùng nhiều AP để mở rộng tầm phủ hỗ \ntrợ truy xuất không gián đoạn khi user chuyển \nchỗ, cách làm là đặt các user di động trong \ncùng một IP subnet hay VLAN\n\n� Tách biệt subnet cũng giúp cải thiện khả năng \nquản lý và security\n\n\n\n20\n\n39\n\nDự phòng cho wireless LAN\n\n� Access point hot standby: Cho phép 2 AP \nđược cấu hình dùng cùng kênh trong trong một \nvùng phủ. Chỉ một AP được active và AP kia \ndự phòng\n\n� Đặt 2 AP gần nhau\n� Khi đưa AP chính trở lại làm việc cần reset AP \n\ndự phòng bằng tay\n\n40\n\nPVST+ và MISTP (1/2)\n\n� Per VLAN Spanning Tree + là giải pháp tạo \nmột spanning tree cho mỗi VLAN để tạo khả \nnăng dự phòng\n\n� PVST+ cho phép load sharing nhờ có nhiều \nđường chuyển khác nhau trên mỗi VLAN\n\n� MISTP (Multi-Instance Spanning Tree \nProtocol) cho phép nhiều VLAN được nhóm lại \ntrong một spanning tree\n\n� IEEE 802.1s (Multiple Spanning Tree)\n\n\n\n21\n\n41\n\nPVST+ và MISTP (2/2)\n\n� Nếu dùng VLAN trong thiết kế campus dùng switch có hỗ trợ \n802.1s, PVST+ hay MISTP có thể dùng là link dự phòng cho load \nsharing\n\n42\n\nHSRP hay VRRP (1/2)\n\n� Hot Standby Router Protocol (HSRP) giúp máy \ntrạm vẫn giữ liên lạc với internetwork ngay cả \nkhi gateway mặc định bị hỏng\n\n� Trong RFC 2338 gọi là VRRP\n� Tạo virtual router (phantom router) với IP và \n\nMAC address, mỗi máy trạm đều được cấu \nhình dùng virtual router như default gateway\n\n\n\n22\n\n43\n\nHSRP hay VRRP (2/2)\n\n� Các HSRP router trên LAN trao đổi với nhau \nđể chỉ định active hay standby router\n\n� HSRP cũng có thể đóng vai trò proxy ARP\n\n44\n\nGateway Load Balancing Protocol\n\n� GLBP cho phép cân bằng tải qua nhiều router \ndùng một địa chỉ IP ảo và nhiều địa chỉ MAC ảo.\n\n� Mỗi host được cấu hình cùng địa chỉ IP ảo và tất \ncả các router trong nhóm router ảo cùng tham \ngia chuyển gói\n\n� Các thành viên trong nhóm GLBP bầu một router \nlà active virtual gateway (AVG)\n\n� AVG gán cho mỗi thành viên dự phòng còn lại \nmột địa chỉ MAC ảo\n\n\n\n23\n\n45\n\nHướng dẫn thiết kế building network: \nbuilding block không mở rộng VLAN (1/2)\n\n� Gigabit Ethernet \ntrunk kết nối Layer \n2 switch đến cặp \nLayer 3 switch \ntrong distribution \nlayer\n\n� Mỗi module là\nthành phần cơ bản \ntạo nên building \nnetwork\n\n46\n\nHướng dẫn thiết kế building network: \nbuilding block không mở rộng VLAN (2/2)\n\n� IP subnet giới hạn trong một switch (một \nwiring-closet)\n\n� Không có vòng lặp (loop) và không có VLAN \ntrunking giữa các layer 2 switch.\n\n� Mỗi Gigabit uplink là giao tiếp được định tuyến \ntrên các Layer 3 switch trong distribution layer.\n\n\n\n24\n\n47\n\nHướng dẫn thiết kế building network: \nbuilding block không mở rộng VLAN, dự\nphòng (1/2)\n\n� Building block \ncó dự phòng\n\n� Hai Layer 3 \nswitch tạo thành \nmột building \nbackbone giản \nlược\n\n48\n\nHướng dẫn thiết kế building network: building \nblock không mở rộng VLAN, dự phòng (2/2)\n\n� Tối ưu cho thiết kế building: tắt chức năng trao \nđổi định tuyến qua giữa các subnet  (một \nsubnet được giới hạn trong một tủ nối dây) \n\n� Để thực hiện dùng passive interface command\ntrên distribution-layer switch.\n\n� Distribution-layer switch chỉ trao đổi định tuyến \nvới core switch\n\n\n\n25\n\n49\n\nHướng dẫn thiết kế building network: \nbuilding block mở rộng VLAN (1/3)\n\n� Khi muốn server \ncủa nhóm A ở\ntrong cùng subnet \nvà VLAN như các \nclient vì lý do liên \nquan đến chính \nsách.\n\n� Đặ","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2017/20170110/maiyeumaiyeu27/thietkehatangmaytinh_l5_5661.txt","sentences":[[1,"2 3 GIỚI THIỆU � Topo mạng là một bản đồ chỉ ra các phân đoạn, các điểm nối và các cộng đồng người dùng"],[2,"� Bước đầu tiên trong pha thiết kế logic � Phác họa một sơ đồ luận lý trước khi chọn các thành phần vật lý hay công nghệ � Giúp nhận diện hình dạng của mạng, các điểm kết nối, phạm vi bao phủ và các loại thiết bị liên mạng"],[3,"4 THIẾT KÊ MẠNG PHÂN CẤP (Hierarchical Network) � Theo mô hình thiết kế mạng phân cấp: phát triển topo dưới dạng các lớp rời rạc \u2013 Core layer \u2013 Dstribution layer \u2013 Access layer � Mỗi lớp tập trung vào các chức năng đặc biệt, cho phép chọn ra các hệ thống và đặc tính phù hợp"],[4,"3 5 6 Flat network Topology � Phù hợp cho mạng rất nhỏ � Mỗi thiết bị liên mạng có nhiệm vụ như nhau � Khi có sự cố phải kiểm tra toàn mạng � Topo mạng Flat WAN \u2013 Gồm nhiều điểm kết nối thành vòng \u2013 Mỗi điểm là một router kết nối với hai router kế qua một P2P link \u2013 Các giao thức định tuyến hội tụ nhanh \u2013 Thông tin có thể phục hồi khi một link bị hỏng"],[5,"4 7 Các Flat LAN topology � Đầu thập niên 1990 các thiết kế tiêu biểu cho LAN là các PC và Server nối vào một hay nhiều Hub theo một flat topology � Ngày nay thay Hub bằng Switch (lớp 2) � Mesh topology ~ nhu cầu khả dụng (availability) \u2013 Full-mesh topology \u2013 Partial-mesh topology 8 Các Flat LAN topoogy (2) � Số link trong full-mesh: n*(n-1)/2 � Chi phí cao, khó bảo trì sửa chữa hay nâng cấp � Lưu lượng quảng bá cho định tuyến tăng"],[6,"5 9 Dùng hierarchical topology � Hierarchical Redundant topology � Partial-Mesh Hierarchical topology 10 Mô hình mạng cho công ty vừa và nhỏ � Hub-and-Spoke Hierarchical Topology"],[7,"6 11 Đặc trưng của core layer � Backbone tốc độ cao, tin cậy, dự phòng và thích ứng tốt � Độ trễ nhỏ � Có kích thước giới hạn 12 Đặc trưng của Distribution layer (1/2) � Kiểm soát truy xuất tài nguyên vì lý do an ninh � Kiểm soát lưu lượng mạng � Xác định các miền quảng bá � Định tuyến giữa các VLAN � Cho phép core kết nối các điểm chạy các giao thức khác nhau � Tái phân bố giữa các giao thức định tuyến ở lớp access và giao thức định tuyến lớp core"],[8,"7 13 Đặc trưng của Distribution layer (2/2) � Tóm tắt đường đi từ lớp access � Trong một số trường hợp có thể cung cấp default route cho các router lớp access và chỉ chạy giao thức định tuyến động khi giao tiếp với core router � Ẩn các thông tin về topo của access layer đối với core layer và ngược lại 14 Đặc trưng access layer � Tạo điều kiện cho các user trên các phân đoạn cục bộ truy nhập vào internetwork � Bao gồm router, switch, bridge, hub và access point"],[9,"� Switch thường được dùng để triển khai access layer trong các campus net nhằm phân chia các miền băng thông phù hợp với các ứng dụng cần nhiều băng thông � Dùng các công nghệ như ISDN, Frame Relay, leased line và analog dialup để hỗ trợ các chi nhánh hay văn phòng nhỏ truy nhập vào internetwork"],[10,""],[11,"8 15 Hướng dẫn thiết kế mạng phân cấp (1/3) � Thiết kế access layer trước, tiếp theo là distribution layer và sau cùng là core layer � Khi cấu hình các router tại core layer nên dùng các đặc tính định tuyến để tối ưu thông lượng gói � Tại core layer không nên lọc gói hay các kỹ thuật nào khác làm chậm sự thao tác gói � Với thiết kế có nhu cầu kết nối đến mạng doanh nghiệp khác qua một extranet hay Internet thì core nên bao gồm một hay nhiều link đến mạng ngoài"],[12,"16 Hướng dẫn thiết kế mạng phân cấp(2/3) � Không nên để các administrator tại các chi nhánh xây dựng extranet riêng hay thực hiện các kết nối đến Internet, tập trung các chức năng này tại core layer � Để cải thiện hiệu quả định tuyến, ở distribution layer có thể tóm tắt các tuyến từ access layer � Distribution layer tóm tắt nhiều địa chỉ ở access layer trong một vài quảng cáo đến core layer � Ở access layer có thể dùng các đặc tính định tuyến như Dial-on-Demand Routing (DDR) hay static routing để sử dụng băng thông hiệu quả và tối ưu chi phí trên các liên kết từ xa"],[13,"9 17 Hướng dẫn thiết kế mạng phân cấp (3/3) � Kiểm soát chặt chẽ topo mạng tại access layer � Chú ý các lỗi: \u2013 Adding a chain \u2013 Backdoor 18 TOPO MẠNG CÓ DỰ PHÒNG � Nhân đôi các thành phần mạng, loại trừ những điểm mà khi lỗi làm tê liệt mạng"],[14,"� Các thành phần có thể là core router, switch, link giữa hai switch, CSU, nguồn điện, WAN trunk, kết nối Internet.."],[15,"� Xây dựng các data center dự phòng hoàn chỉnh � Có thể thực hiện dự phòng trong mạng campus, giữa các lớp trong mô hình phân cấp, trên edge net của enterprise net"],[16,"10 19 Đường đi dự phòng (backup path) � Backup path bao gồm các router và switch và các link dự phòng riêng giữa các router và switch, là bản sao của đường đi chính � Xem xét hai khía cạnh của backup path: \u2013 Băng thông là bao nhiêu \u2013 Tốc độ chuyển dụng nhanh cỡ nào � Nên dùng công cụ mô phỏng để đánh giá hiệu quả 20 Load sharing (load balancing) � Cho phép hai hay nhiều giao tiếp hay đường dẫn chia sẻ tải với nhau � Mục tiêu chính của dự phòng là đáp ứng tính khả dụng, mục tiêu phụ là nhằm cải thiện performance của mạng bằng cách chia tải qua các liên kết song song � Load sharing phải được qui hoạch và cấu hình"],[17,"11 21 THIẾT KẾ MẠNG MODULE � Một dự án thiết kế mạng lớn và các mạng lớn bao gồm nhiều phần khác nhau � Mỗi phần nên được thiết kế theo giải pháp top-down có hệ thống, áp dụng nguyên lý phân cấp và dự phòng"],[18,"� Các giải pháp mạng và dịch vụ có thể được chọn trên căn bản module nhưng phải là một thành phần của mạng toàn cục � Cisco system dùng mô hình Enterprise Composite Network Model để mô tả các thành phần khác nhau hay module của một mạng doanh nghiệp 22 Enterprise Composite Network Model (1/3) � ECNM gồm 3 vùng chính, mỗi vùng có thể tạo ra các module nhỏ hơn: \u2013 Enterprise campus: gồm các module để xây dựng mạng campus vững chắc"],[19,"Chứa tất cả các thành phần cho sự hoạt động độc lập bên trong campus"],[20,"\u2013 Enterprise edge: tập hợp tất cả các kết nối từ các phần tử khác nhau tại biên của mạng enterprise"],[21,"Chứa tất cả các phần tử để truyền thông hiệu quả và an toàn giữa các campus, vị trí ở xa, đối tác, user di động và Internet"],[22,"\u2013 Service provider edge: cho phép truyền thông với các mạng khác dùng các công nghệ WAN khác nhau và hỗ trợ bởi các ISP"],[23,"12 23 Enterprise Composite Network Model (2/3) � Mỗi vùng có thể chia thành các module nhỏ hơn � Ví dụ campus có thể gồm campus backbone, server farm, building access và distribution module, network management module"],[24,"Enterprise edge có thể gồm WAN, VPN, Internet access, và e-commerce module � Có thể bổ sung module nếu cần 24 Enterprise Composite Network Model (3/3)"],[25,"13 25 THIẾT KẾ TOPO MẠNG CAMPUS � Theo ECNM, một campus bao gồm campus infrastructure module, server farm, network management module và một edge distribution module � Infrastructure module có 3 module con: \u2013 Building access submodule \u2013 Building distribution submodule \u2013 Campus backbone 26 Building access submodule � Chứa các đầu cuối kết nối đến switch hay access point"],[26,"� Các switch cung cấp các liên kết đến building distribution module � Các dịch vụ gồm network access, broadcast control, protocol filtering, packet marking"],[27,"14 27 Building distribution submodule � Tập hợp các tủ nối dây trong tòa nhà và cung cấp kết nối đến campus backbone qua các router (hay switch lớp 3)"],[28,"� Thực hiện định tuyến, QoS và các phương thức điều khiển truy xuất phù hợp với nhu cầu an ninh và performance"],[29,"� Backup path và Load sharing 28 Campus backbone � Là core layer của campus infrastructure module nối building access và building distribution với server farm, network management và edge distribution module � Redundancy và fast converging � Dùng router (hay switch lớp 3) tốc độ cao � Cung cấp tính năng QoS và security"],[30,"15 29 Spanning Tree Protocol � IEEE 802.1D và IEEE 802.1w � Topo của mỗi module và submodule được xác định từng phần bởi STP � Nên chọn gốc (root bridge) bằng cách dùng lệnh cấu hình để tránh trường hợp giao thức tự động chọn gốc không thích hợp 30 Virtual LAN (1/3) � Bandwidth domain � Broadcast domain � Switch chia mạng thành những bandwidth domain nhỏ (mỗi port + thiết bị kết nối đến = bandwidth domain) � Mặc định switch không chia broadcast domain, nhưng trong building access module dùng switch sẽ kiểm soát broadcast bằng VLAN"],[31,"16 31 Virtual LAN (2/3) � VLAN là giải pháp truyền data theo chuẩn LAN nhưng không bị hạn chế bởi các ràng buộc vật lý truyền thống � Bất chấp vị trí vật lý của một user ở đâu, người quản trị đều có thể gán user vào một VLAN bất kỳ � Việc gán VLAN dựa trên các ứng dụng, giao thức, các nhu cầu về performance, nhu cầu về security, đặc tính tải và lưu lượng, hay các yếu tố nào đó theo đặc thù mạng 32 Virtual LAN (3/3) � VLAN xuyên qua nhiều physical LAN � Nhiều VLAN trên một physical LAN � Trong mạng IP, một VLAN được thực hiện như là một mạng con (IP subnet) (bởi ARP)"],[32,"17 33 Thiết kế VLAN cơ bản (1/3) 34 Thiết kế VLAN cơ bản (2/3) � VLAN qua nhiều switch � IEEE 802.1Q � Cisco ISL protocol Trunk link"],[33,"18 35 Thiết kế VLAN cơ bản (3/3) � Cần xác định phạm vi của mỗi VLAN � Mỗi VLAN sẽ trãi ra trên bao nhiêu switch � Xác định dung lượng của trunk link, dùng các phương pháp trong chương 3 � Đối với mạng phòng lab thì thường dùng 10Mbps Ethernet trunk 36 Wireless LAN (1/3) � Access point (AP), wireless cell � Xác định tầm phủ của một wireless cell và cần bao nhiêu wireless cell � Các yếu tố ảnh hưởng gồm: data rate, công suất, anten và vị trí đặt"],[34,"19 37 Wireless LAN (2/3) � Nguyên lý anten là đẳng hướng � Tín hiệu mạnh với các hướng trực giao với trục anten � Chú ý không để AP tại các mặt phản xạ hướng ra ngoài vị trí cần � Bức tường có thể làm suy giảm tín hiệu nhưng không ngăn chặn hoàn toàn 38 Wireless LAN (3/3) � Kích thước cell càng lớn bandwidth domain càng lớn, performance càng thấp � Có thể dùng nhiều AP để mở rộng tầm phủ hỗ trợ truy xuất không gián đoạn khi user chuyển chỗ, cách làm là đặt các user di động trong cùng một IP subnet hay VLAN � Tách biệt subnet cũng giúp cải thiện khả năng quản lý và security"],[35,"20 39 Dự phòng cho wireless LAN � Access point hot standby: Cho phép 2 AP được cấu hình dùng cùng kênh trong trong một vùng phủ"],[36,"Chỉ một AP được active và AP kia dự phòng � Đặt 2 AP gần nhau � Khi đưa AP chính trở lại làm việc cần reset AP dự phòng bằng tay 40 PVST+ và MISTP (1/2) � Per VLAN Spanning Tree + là giải pháp tạo một spanning tree cho mỗi VLAN để tạo khả năng dự phòng � PVST+ cho phép load sharing nhờ có nhiều đường chuyển khác nhau trên mỗi VLAN � MISTP (Multi-Instance Spanning Tree Protocol) cho phép nhiều VLAN được nhóm lại trong một spanning tree � IEEE 802.1s (Multiple Spanning Tree)"],[37,"21 41 PVST+ và MISTP (2/2) � Nếu dùng VLAN trong thiết kế campus dùng switch có hỗ trợ 802.1s, PVST+ hay MISTP có thể dùng là link dự phòng cho load sharing 42 HSRP hay VRRP (1/2) � Hot Standby Router Protocol (HSRP) giúp máy trạm vẫn giữ liên lạc với internetwork ngay cả khi gateway mặc định bị hỏng � Trong RFC 2338 gọi là VRRP � Tạo virtual router (phantom router) với IP và MAC address, mỗi máy trạm đều được cấu hình dùng virtual router như default gateway"],[38,"22 43 HSRP hay VRRP (2/2) � Các HSRP router trên LAN trao đổi với nhau để chỉ định active hay standby router � HSRP cũng có thể đóng vai trò proxy ARP 44 Gateway Load Balancing Protocol � GLBP cho phép cân bằng tải qua nhiều router dùng một địa chỉ IP ảo và nhiều địa chỉ MAC ảo"],[39,"� Mỗi host được cấu hình cùng địa chỉ IP ảo và tất cả các router trong nhóm router ảo cùng tham gia chuyển gói � Các thành viên trong nhóm GLBP bầu một router là active virtual gateway (AVG) � AVG gán cho mỗi thành viên dự phòng còn lại một địa chỉ MAC ảo"],[40,"23 45 Hướng dẫn thiết kế building network: building block không mở rộng VLAN (1/2) � Gigabit Ethernet trunk kết nối Layer 2 switch đến cặp Layer 3 switch trong distribution layer � Mỗi module là thành phần cơ bản tạo nên building network 46 Hướng dẫn thiết kế building network: building block không mở rộng VLAN (2/2) � IP subnet giới hạn trong một switch (một wiring-closet) � Không có vòng lặp (loop) và không có VLAN trunking giữa các layer 2 switch"],[41,"� Mỗi Gigabit uplink là giao tiếp được định tuyến trên các Layer 3 switch trong distribution layer"],[42,""],[43,"24 47 Hướng dẫn thiết kế building network: building block không mở rộng VLAN, dự phòng (1/2) � Building block có dự phòng � Hai Layer 3 switch tạo thành một building backbone giản lược 48 Hướng dẫn thiết kế building network: building block không mở rộng VLAN, dự phòng (2/2) � Tối ưu cho thiết kế building: tắt chức năng trao đổi định tuyến qua giữa các subnet (một subnet được giới hạn trong một tủ nối dây) � Để thực hiện dùng passive interface command trên distribution-layer switch"],[44,"� Distribution-layer switch chỉ trao đổi định tuyến với core switch"],[45,"25 49 Hướng dẫn thiết kế building network: building block mở rộng VLAN (1/3) � Khi muốn server của nhóm A ở trong cùng subnet và VLAN như các client vì lý do liên quan đến chính sách"],[46,"� Đặ"]],"downloaded":true,"m":[-1,-1],"n":"thietkehatangmaytinh_l5_5661.txt","o":"https://tailieu.vn/docview/tailieu/2017/20170110/maiyeumaiyeu27/thietkehatangmaytinh_l5_5661.pdf"},{"saved_path":"temp/giao_trinh_mang_doanh_nghiep_6417.txt","r":0,"s":[],"t":"\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n \nBỘ GIÁO DỤC VÀ ĐÀO TẠO \n\nTRƯỜNG ĐẠI HỌC SƯ PHẠM KỸ THUẬT HƯNG YÊN \n \n \n\n \n \n\n \n \n \n \n \n \n \n\n \n\nGIÁO TRÌNH MẠNG DOANH NGHIỆP \n \n\nTRÌNH ĐỘ ĐÀO TẠO:  ĐẠI HỌC \nNGÀNH ĐÀO TẠO:  CÔNG NGHỆ THÔNG TIN \n\n(INFORMATION TECHNOLOGY) \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n\nHưng Yên, tháng 12 năm 2008 \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nLỜI NÓI ĐẦU \nCùng với sự phát triển nhanh chóng của nền kinh tế. Vấn đề ứng dụng hệ thống \n\nMạng thông tin vào điều hành và sản xuất trong doanh nghiệp ngày càng được đẩy \n\nmạnh. Nhà quản lý mong muốn Quản trị viên mạng thông tin phải nắm được hầu hết \n\ncác công nghệ mạng để nhanh chóng triển khai, ứng dụng những công nghệ mạng \n\ntiên tiến vào phục vụ điều hành sản xuất cũng như lập kế hoạch xây dựng và bảo vệ \n\nhệ thống thông tin nội bộ của doanh nghiệp tránh khỏi mọi nguy cơ tấn công. \n\nVới cuốn giáo trình này, tôi cố gắng tập trung đi sâu vào các công nghệ mới nhất \n\nhiện đang được áp dụng trong doanh nghiệp tại thời điểm hiện tại.  \n\nGiáo trình này gồm 16 bài trong đó có 09 bài giảng, 06 bài thực hành và 01 bài thảo \n\nluận. Mục tiêu cuốn sách đi vào các vấn đề chính sau: \n\n Thiết kế lược đồ địa chỉ IP cho doanh nghiệp \n\n Cơ bản về công nghệ mạng không dây \n\n Vấn đề định tuyến và chuyển mạch trong mạng doanh nghiệp \n\n Triển khai các dịch vụ máy chủ (Mail Server, Web Server, DNS, DHCP\u2026) \n\n Cơ bản về bảo mật  \n\nMong muốn thì nhiều nhưng trong thời gian 3 tín chỉ của môn học này chúng ta \n\nchưa thể bao quát toàn bộ các công nghệ mạng áp dụng cho doanh nghiệp mà chỉ có \n\nthể đi vào những công nghệ chính. Hi vọng từ đó sinh viên tự nghiên cứu, học hỏi để \n\ncó thể làm chủ được các công nghệ và áp dụng tốt kiến thức đã học vào công việc \n\nmai sau. \n\nMọi ý kiến đóng góp của sinh viên và các bạn đồng nghiệp xin gửi về theo địa chỉ \n\nsau \n\n \n\n \n\n \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nĐịa chỉ liên hệ: \n\nVũ Khánh Quý - Bộ môn Mạng máy tính và Truyền thông - Khoa Công nghệ \n\nThông tin, Đại học Sư phạm Kỹ thuật Hưng Yên \n\nTel: (03213) 713153  \n\nEmail: quyvk@utehy.edu.vn  \n\nURL: http://www.utehy.edu.vn  \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nTên Module: Thiết kế mạng doanh nghiệp \nMã Module:  \nGiáo viên: Vũ Khánh Quý \nNgành học: Công nghệ Thông tin Số giờ học: 140(30/30) \nLoại hình đào tạo: Chính qui Thời gian thực hiện: Học kỳ III \nNăm học: 2008/2009 Loại Module: LT+TH \nPhiên bản: 20090105 \n \n1. Mục tiêu: \nSau khi hoàn thành module này, người học có khả năng: \nSau khi hoàn thành module này, người học có khả năng: \n\n- Đánh giá được các hoạt động của các thiết bị phần cứng và phần mềm trong một mô \nhình mạng LAN, WAN sẵn có \n\n- Tư vấn trong việc lựa chọn các thiết bị phần cứng phần mềm để thiết kế mạng LAN, \nWAN phù hợp với nhu cầu của doanh nghiệp nhỏ \n\n- Đánh giá được các yêu cầu về quản lý mạng, an ninh mạng và các ràng buộc khác \ntrong quá trình thiết kế mạng \n\n- Thiết kế được mạng LAN trong tòa nhà phục vụ cho công tác giảng dạy và nghiên \ncứu \n\n- Thiết kế được mạng WAN cho Trường học phục vụ công tác đào tạo và quản lý của \nNhà trường. \n\n \nModule này giúp người học phát triển các năng lực: Phân tích (2); Tư vấn (2); Thực \nhiện (3); Thiết kế (3) và Bảo trì (2). \n \n2.  Điều kiện tiên quyết: \n\nNgười học đã học Mạng máy tính. \n3.  Mô tả module:  \n\nModule này nhằm cung  cấp cho người học các kiến thức để Thiết kế được các hệ thống \nmạng LAN/WAN; Kiểm tra, đánh giá hiệu năng hoạt động của hệ thống; Xử lý được \ncác sự cố xảy ra; Có kỹ năng cơ bản về bảo mật trong hệ thống mạng doanh nghiệp \nnhỏ. \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n4.  Nội dung module: \n\nBài 1: Tổng quan về mạng doanh nghiệp \n\n1.1.Giới thiệu môn học, phương pháp học \n\n1.2.Cách sử dụng các phần mềm thiết kế giả lập VMWare, Boson \n\n1.3.Giới thiệu hệ thống mạng thực tế của một số doanh nghiệp  \n\nBài 2: Địa chỉ mạng \n\n2.1.Địa chỉ IP và Subnetmask \n\n2.2.Các loại địa chỉ IP \n\n2.2.1.Địa chỉ IP Private, Public \n\n2.2.3.Địa chỉ IP Unicast, Multicast, Broadcast \n\n2.3.Nguyên lý dịch chuyển địa chỉ IP (NAT) \n\n2.4 Nguyên lý cấp phát DHCP \n\nBài 3: Công nghệ Wireless \n\n3.1. Tổng quan về Wireless \n\n3.2. Các chuẩn Wireless \n\n3.3. Cấu hình mạng Wireless \n\n3.3.1. Các thành phần thiết lập mạng mạng WLAN \n\n3.3.2. WLAN và SSID \n\n3.3.3. Cấu hình một mạng WLAN đơn giản \nBài 4: Cơ bản về cấu hình định tuyến \n\n4.1. Các giao thức định tuyến \n\n4.2. Giao thức định tuyến nội vùng RIP \n\n4.3. Giao thức định tuyến động OSPF \nBài 5:Thực hành về định tuyến \n\nCấu hình định tuyến cho các mạng \n\nBài 6:Cấu hình NAT trên Router \n\n6.1. Khái niệm về NAT \n\n6.2. Nat tĩnh \u2013 Static NAT \n\n6.3. Nat động \u2013 Dynamic NAT \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n6.4. Nat Overload \u2013 PAT \n\nBài 7:Thực hành Cấu hình NAT trên Router \n\nBài 8:Cấu hình chuyển mạch (Switching) \n\n8.1. Cơ bản về cấu hình Switch \n\n8.2. Cấu hình VLAN \n\nBài 9:Thực hành Cấu hình chuyển mạch và VLAN \n\nBài 10: Thảo luận \nMột số chủ đề thảo luận \n\n Các kỹ năng cần có của một kỹ sư trong vai trò HelpDesk \n Quy trình thiết kế và nâng cấp hệ thống mạng đã có \n Tìm hiểu các giao thức mã hoá trong mạng WLAN \n Mạng Wimax \n Tìm hiểu VoIP \n Công nghệ VPN \n\nBài 11: Cấu hình các Web Server, DNS Server \n\n11.1. Dịch vụ phân giải tên miến \u2013 DNS Server \n\n11.1.1. Nguyên lý phân giải tên miền \n\n11.1.2. Xây dựng máy chủ phân giải tên miền cho mạng doanh nghiệp \n\n11.2. Dịch vụ Web Server \n\n11.2.1. Giao thức HTTP và HTTPS \n\n11.2.2. Triển khai Website doanh nghiệp trên Server \n\nBài 12: Thực hành cấu hình các dịch vụ mạng cơ bản \n\n12.1. Cấu hình Active Directory (AD) \n\n12.2 Cấu hình IIS \n\n12.3 Cấu hình DNS \n\n12.4 Cấu hình DHCP \n\nBài 13. Xây dựng một Mail Server \n\n13.1. Giao thức SMTP, POP3, IMAP \n\n13.2. Triển khai Mail Server cho doanh nghiệp  \n\nBài 14. Thực hành Xây dựng một Mail Server \n\nTriển khai Mail Server cho doanh nghiệp  \n\nBài 15: Thực hành Proxy và Firewall \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n15.1. Nguyên lý hoạt động của Proxy \n\n15.2. Nguyên lý hoạt động của Firewall \n\n15.3. Triển khai xây dựng hệ thống tường lửa cho doanh nghiệp \n\nBài 16. Cơ bản về bảo mật \n\n16.1 Các nguy cơ tiềm tàng trên mạng \n\n16.2. Các phương thức tấn công \n\n16.2.1 Viruses, Worms, Trojan Horses. \n\n16.2.2 Denial of Service (DoS) và Brute Force Attack \n\n16.3. Các chính sách bảo mật \n\n5. Tài liệu tham khảo: \n Sách giáo trình, Slide do giáo viên biên soạn. \n\n Sách tham khảo: \n\n [1]. Cisco System, \"CCNA Discovery1 4.0\", Cisco System, 2007 \n\n [2]. Cisco System, \"CCNA Discovery2 4.0\", Cisco System, 2007 \n\n[3]. J.C. Mackin and Ian McLean, \u201cWindows Server 2003 Network Infrastructure\u201d, \nMicrosoft Press, 2005 \n\n6. Học liệu: \nGiáo trình lưu hành nội bộ, sách tham khảo, hệ thống bài tập mẫu, bài tập tự làm, máy \ntính, tài nguyên trên Internet, Projector. \n\n7. Đánh giá: \nHình thức đánh giá: \n\n- Kiểm tra giữa kỳ (Triển khai trên môi trường giả lập): 20% \n- Đánh giá quá trình (kết quả các buổi thực hành): 10% \n- Kiểm tra cuối kỳ: 70% \n\nTiêu chí đánh giá: \n- Kỹ năng thiết kế, xây dựng bài toán \n- Kỹ năng cài đặt bài toán \n\nNgười đánh giá: Giáo viên giảng dạy và người học. \n8. Kế hoạch học tập \nBố trí giảng dạy module Mạng doanh nghiệp (3 tín chỉ) như sau: \n27 tiết lý thuyết (thực hiện trong 9 buổi, mỗi buổi 3 tiết), 36 tiết sinh viên làm tiểu luận \n(giáo viên tự bố trí lịch gặp, hướng dẫn sinh viên), 18 tiết thực hành (thực hiện trong 6 \nbuổi, mỗi buổi 3 tiết) và 90 giờ chuẩn bị cá nhân (đề cương 130 trang) \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n8.  Kế hoạch học tập: \n\nBài Mục tiêu Hoạt động giáo viên \nSG \nGV \n\nHoạt động sinh viên \nSG \nSV \n\nĐiều kiện thực \nhiện \n\n1 - Xác định được vị trí, vai trò \nvà nội dung của Module \ntrong chương trình đào tạo \n- Xây dựng được kế hoạch và \nphương pháp học tập phù \nhợp. \n- Lựa chọn được nguồn học \nliệu phục vụ cho môn học \n- Trình bày được những lợi \ních đem lại cho doanh nghiệp \nkhi có hệ thống mạng. \n- Trình bày được các bước để \ntrở thành một nhà quản trị \nmạng trong doanh nghiệp \n \n\n- Nêu mục tiêu, nội dung và kế hoạch \nhọc tập của Module \n- Giới thiệu nguồn học liệu phục vụ \ncho học Mudule, phương pháp học tập \nvà các tiêu chí đánh giá \n- Tổ chức thảo luận các lợi ích đem lại \ncho doanh nghiệp khi có hệ thống \nmạng \n- Quá trình để trở thành một nhà nhà \nquản trị mạng trong doanh nghiệp \n- Kết luận và tổng kết các nội dung \nthảo luận \n- Trả lời các câu hỏi của sinh viên \n- Phát phiếu yêu cầu các nội dung cần \nnghiên cứu trong bài 2 \n \n\n \n \n\n3h \n\n \n- Lĩnh hội và đặt các câu hỏi \nthắc mắc \n- Lựa chọn được phương \npháp học tập và nguồn học \nliệu phục vụ cho Module \n- Thảo luận các nội dung \ntrong phiếu yêu cầu  \n- Ghi chú những vấn đề cơ \nbản \n- Nêu các câu hỏi thắc mắc  \n\n \n \n\n4h \n \n\n \nPhòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n2 - Trình bày cấu trúc địa chỉ \nIP v4 \n- Mối quan hệ giữa \nSubnetmask và địa chỉ IP. \n\n- Tổ chức thảo luận về kiến trúc Ipv4 \nvà mối liên quan giữa địa chỉ IP và \nSubnetmask \n-  Đưa ra bài tập yêu cầu sinh viên \n\n3h - Trình bày được cấu trúc IP \nv4 \n- Hiểu rõ mối quan hệ giữa \nđịa chỉ IP và Subnetmask \n\n4h Phòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n- Thự hiện phân chia dải địa \nchỉ IP thành các Subnet có \nsubnetmask bằng nhau và \nkhông bằng nhau \n- Thiết kế được lược đồ IP \nphù hợp cho một doanh \nnghiệp. \n \n\nthực hiện phân chia địa chỉ IP thành \ncác Subnet có Subnetmask bằng nhau \nvà không bằng nhau. \n- Tư vấn và giải đáp các vấn đề khó \nkhăn khi sinh viên gặp vướng mắc \n\ncũng như cách tính toán và \nphân chia một dải IP thành \ncác Subnet theo đáp ứng yêu \ncầu của người sử dụng \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n \n\n3 - Phân tích được các ưu \nnhược điểm của mạng không \ndây và mạng có dây \n- Trình bày được các mô \nhình ứng dụng mạng không \ndây \n- Trình bày được các chuẩn \nmạng 802.11a,b,g và đặc \nđiểm của mỗi chuẩn. \n- Trình bày được chức năng \ncủa các thiết bị cơ bản trong \nmạng WLAN  \n- Trình bày được khái niệm \nkênh truyền và SSID trong \nmạng WLAN \n\n- Tổ chức thảo luận về mạng WLAn, \ncác ưu nhược điểm và các mô hình \nứng dụng  \n- Giải đáp cho sinh viên các vấn đề \nkhó khăn và định hướng cho sinh viên \nthảo luận theo đúng chủ đề \n- Trả lời các câu hỏi thắc mắc của sinh \nviên \n- Cấu hình thử nghiệm mạng WLAN \n \n\n3h - Thảo luận theo các nội dung \ngiáo viên đưa ra \n- Nêu các câu hỏi, thắc mắc \ntrong quá trình thảo luận \n- Quan sát các gợi ý và phân \ntích của giáo viên và để từ đó \nđưa ra những nhận định và ý \nkiến của mình về vấn đề thảo \nluận. \n- Cấu hình thử nghiệm mạng \nWLAN với chức năng cơ bản\n\n4h Phòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu, \nAccessPoint, \nCard mạng \nkhông dây. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n- Cấu hình mạng WLAN đơn \ngiản \n \n \n\n4 - Trình bày được các giao \nthức định tuyến \n- So sánh định tuyến tĩnh và \nđộng, Distance Vector và \nLink State \n- Đặc điểm của định tuyến \nRip v1 \n- Cấu hình định tuyến hệ \nthống sử dụng Rip v1 \n\n- Tổ chức thảo luận về định tuyến và \nRouter \n- Tổ chức thảo luận về định tuyến tĩnh \nvà định tuyến động, Distance Vector \nvà Linkstate \n- Hướng dẫn sinh viên cấu hình định \ntuyến hệ thống mạng nội bộ \n- Trả lời các câu hỏi thắc mắc của sinh \nviên \n \n\n3h - Thảo luận về các chủ đề do \ngiáo viên hướng dẫn \n- Quan sát và thực hiện cấu \nhình LAB định tuyến với \ngiao thức Rip V1 \n- Quan sát cách gợi ý và phân \ntích của giáo viên để từ đó \nđưa ra những nhận định và ý \nkiến của mình về vấn đề thảo \nluận. \n\n4h Phòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n5 - Thiết kế được lược đồ địa \nchỉ IP cho doanh nghiệp \n- Thực hiện cấu hình định \ntuyến cho các mạng bằng \nđịnh tuyến tĩnh và định tuyến \nđộng với Rip v1, Rip v2 \n- Đánh giá được ưu nhược \nđiểm giữa định tuyến tĩnh và \nđịnh tuyến động \n\n- Đưa trước tài liêu thảo luận cho sinh \nviên \n- Thảo luận thiết kế lược đồ địa chỉ IP \n- Cho sinh viên phát biểu ý kiến về \ncác vấn đề thảo luận theo nhóm đã \nphân công trước \n- Trả lời các câu hỏi thắc mắc của sinh \nviên \n- Nhận xét, đánh giá và tổng kết vấn \n\n3h - Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n- Thiết kế lược đồ địa chỉ IP \ncho doanh nghiệp và cấu \n\n6h Phòng học thực \nhành có trang bị \nmáy tính, máy \nchiếu. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n đề thảo luận hình định tuyến giữa các \nmạng \n \n\n6 - Trình bày được các khái \nniệm về NAT tĩnh, NAT \nđộng \n- So sánh ưu nhược điểm của \ncác loại NAT \n- Trình bày nguyên lý hoạt \nđộng của PAT \n- Cấu hình PAT trên Router \ncho phép các IP trong LAN \nra IP Public \n\n- Tổ chức thảo luận cho sinh viên hiểu \nrõ khái niệm về NAT, so sánh ưu \nnhược điểm mỗi loại \n- Tổ chức thảo luận về PAT và sự cần \nthiết có PAT \n- Hướng dẫn sinh viên thực hiện bài \nlab cấu hình PAT \n- Cung cấp các tài liệu liên quan đến \nkiến thức NAT \n- Trả lời các câu hỏi thắc mắc của sinh \nviên trong quá trình thực hành \n- Nhận xét, đánh giá và tổng kết vấn \nđề thảo luận \n\n \n \n \n \n \n \n\n3h \n\n- Chủ động tham gia thảo \nluận về chủ đề do giáo viên \nhướng dẫn \n- Trình bày các nội dung mà \nmình đã tìm hiểu \n- Thực hiện tìm hiểu và cấu \nhình bài lab do giáo viên đưa \nra \n \n\n \n \n \n \n \n\n4h \n\nPhòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n7 - So sánh ưu nhược điểm mỗi \nloại NAT \n- Cấu hình PAT trên Router \nđể NAT các IP trong LAN ra \nIP Public \n- Phân tích được nguyên lý \nhoạt động chuyển đổi địa chỉ \nIP \n \n\n- Thảo luận thiết kế lược đồ địa chỉ IP \n- Cho sinh viên phát biểu ý kiến về \ncác vấn đề thảo luận theo nhóm đã \nphân công trước \n - Chuẩn bị bài thực hành  \n- Trả lời các câu hỏi thắc mắc của sinh \nviên trong quá trình thực hành \n- Kiểm tra tiến độ thực hiện bài tập \nthực hành của sinh viên \n- Giao công việc cho tuần tiếp theo \n\n3h - Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n- Thực hành NAT các IP \ntrong LAN ra IP Public \n \n\n6h \n\nPhòng học thực \nhành có trang bị \nmáy tính, máy \nchiếu. \n\n8 - Trình bày nguyên lý hoạt \nđộng cơ bản của Switch \n- Trình bày khái niệm VLAN \nvà những ứng dụng của \nVLAN trong thực tiễn \n- Cấu hình VLAN trên \nSwitch \n- Sử dụng Router định tuyến \ngiữa các VLAN \n\n- Tổ chức thảo luận cho sinh viên tìm \nhiểu nguyên lý hoạt động của Switch \nhỗ trợ VLAN, khái niệm VLAN và \nnguyên lý hoạt động của gói tin trong \nVLAN \n- Cung cấp các tài liệu liên quan đến \nkiến thức VLAN, định tuyến giữa các \nVLAN với Router \n- Trả lời các câu hỏi thắc mắc của sinh \nviên trong quá trình thực hành \n- Nhận xét, đánh giá và tổng kết vấn \nđề thảo luận \n\n \n \n \n \n \n \n\n3h \n\n- Chủ động tham gia thảo \nluận về chủ đề do giáo viên \nhướng dẫn \n- Trình bày các nội dung mà \nmình đã tìm hiểu \n- Quan sát cách gợi ý và phân \ntích của giáo viên để từ đó \nđưa ra những nhận định và ý \nkiến của mình về vấn đề thảo \nluận. \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n\n \n \n \n \n \n\n4h \n\nPhòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n9 - Trình bày nguyên lý hoạt \nđộng của VLAN và các ứng \ndụng VLAN trong thực tiễn \n- Cấu hình VLAN trên \nSwitch hỗ trợ VLAN \n- Cấu hình định tuyến giữa \ncác VLAN sử dụng Router \n-Ứng dụng mô hình mạng có \nVLAN vào thiết kế hệ thống \nmạng trong doanh nghiệp \n\n- Thảo luận nguyên lý hoạt động của \nVLAN \n- Cho sinh viên phát biểu ý kiến về \ncác vấn đề thảo luận theo nhóm đã \nphân công trước \n - Chuẩn bị bài thực hành  \n- Trả lời các câu hỏi thắc mắc của sinh \nviên trong quá trình thực hành \n- Kiểm tra tiến độ thực hiện bài tập \nthực hành của sinh viên \n- Giao công việc cho tuần tiếp theo \n\n3h - Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n- Thực hành bài lab chia \nVLAN và định tuyến giữa \ncác VLAN sử dụng Router \n \n\n6h \n\nPhòng học thực \nhành có trang bị \nmáy tính, máy \nchiếu, Switch \nhỗ trợ VLAN và \nRouter. \n\n10 - Phân nhóm và giao chủ đề \nthảo luận cho từng nhóm \n \n \n\n- Phân nhóm sinh viên \n- Chuẩn bị các chủ đề thảo luận \n- Hướng dẫn sinh viên các bước thực \nhiện và nguồn tài liệu cần tìm hiểu \n- Nhận xét, đánh giá và tổng kết vấn \nđề giao chủ đề \n\n - Nhận nhóm và báo cáo chủ \nđề mong muốn tìm hiểu với \ngiáo viên nếu có \n- Tham gia các hoạt động do \ngiáo viên tổ chức và đưa ra \ncác câu hỏi thắc mắc cần giải \nđáp \n- Tìm hiểu các nguồn tài liệu \ndo giáo viên cung cấp \n\n Phòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n11 - Trình bày nguyên lý phân \ngiải tên miền của máy chủ \nDNS và nhiệm vụ của việc \nphân giải tên miền \n- So sánh hai giao thức http \nvà https \n- Trình bày cách cấu hình \nmáy chủ DNS và Web Server \n\n- Thảo luận vê nhiệm vụ của viện \nphân giải tên miền và nguyên lý phân \ngiải tên miền \n- Thảo luận các giao thức truy cập \nweb http và https \n- Hướng dẫn thực hiện lab cấu hình \nweb server và DNS server \n- Trả lời các câu hỏi, thắc mắc của \nsinh viên \n- Kết luận, tổng kết các nội dung thảo \nluận \n \n\n3h \n\n- Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n- Quan sát cách gợi ý và phân \ntích của giáo viên để từ đó \nđưa ra những nhận định và ý \nkiến của mình về vấn đề thảo \nluận \n\n4h \n\nPhòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n12 - Phân tích được nguyên lý \nlàm việc của máy chủ DNS \nvà web Server \n- Thực hiện Public một \nwebsite đơn giản cho phép \ntruy cập website với tên miền \nNam \n- Bảo mật dữ liệu truy cập \nvới https \n- Cấu hình cấp phát IP động \ncho các Client \n\n- Phát tài liêu thảo luận cho sinh viên \n- Thảo luận về nguyên lý làm việc của \nDNS Server và web Server \n- Thảo luận về sự cần thiết xây dựng \nmột site nội bộ cho doanh nghiệp \n- Giao bài thực hành \n- Kiểm tra tiến độ thực hiện bài tập \nthực hành của sinh viên \n- Đánh giá và gợi ý các cách làm cho \nsinh viên \n- Giao công việc cho tuần tiếp theo \n\n3h \n\n- Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Thực hiện bài lab xây dựng \nmột site nội bộ cho doanh \nnghiệp cho phép các nhân \nviên truy cập vào thông qua \ntên miền với Ip cho các \nClient được cấp phát động \n \n\n6h \n\nPhòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n13 - Trình bày các giao thức gửi \nnhận mail POP3, SMTP, \nIMAP  \n-  Gửi và nhận thư sử dụng \nSMTP qua Telnet \n- Cấu hình Mail server phục \nvụ cho doanh nghiệp \n\n- Thảo luận về nhu cầu và sự cần thiết \ntriển khai hệ thống mail trong doanh \nnghiệp \n- Thảo luận về các giao thức gửi nhận \nmail POP3, SMTP, IMAP \n- Hướng dẫn sinh viên thực hiện Lab \ncấu hình triển khai hệ thống Mail với \nMdaemon Server \n- Đánh giá và gợi ý các cách làm cho \nsinh viên \n- Nhận xét, đánh giá và tổng kết vấn \nđề thảo luận \n\n3h \n\n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Tham gia trả lời những câu \nhỏi tình huống mà giáo viên \nđưa ra \n- Tham gia thực hiện bài lab \ndo giáo viên đưa ra \n- Quan sát cách gợi ý và phân \ntích của giáo viên để từ đó \nđưa ra những nhận định và ý \nkiến của mình về vấn đề thảo \nluận \n\n4h \n\nPhòng học lý \nthuyết có trang \nbị máy tính, \nmáy chiếu. \n\n14 - Phân tích được nguyên lý \nlàm việc của máy chủ Mail \nServer \n- Gửi và nhận thư sử dụng \ngiao thức SMTP thông qua \ntelnet \n- Cấu hình máy chủ Mail \nServer \n \n\n- Tổ chức thảo luận về nguyên lý làm \nviệc của máy chủ Mail Server \n- Các lệnh thực hiện nhận và gửi mail \nsử dụng SMTP qua telnet \n- Giao bài thực hành \n- Kiểm tra tiến độ thực hiện bài tập \nthực hành của sinh viên \n- Đánh giá và gợi ý các cách làm cho \nsinh viên \n- Giao công việc cho tuần tiếp theo \n\n3h \n\n- Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Thực hiện bài Lab triển \nkhai Mail Server cho doanh \nnghiệp \n \n\n6h \n\nPhòng học thực \nhành có trang bị \nmáy tính, máy \nchiếu. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n15 - So sánh ưu nhược điểm và \nnguyên lý hoạt động của mỗi \nloại Firewall  \n- Xây dựng mô hình hệ thống \nmạng doanh nghiệp và thiết \nlập hệ thống tường lửa bảo \nvệ hệ thống mạng doanh \nnghiệp \n \n\n- Tổ chức thảo luận các loại firewall \nvà ưu nhược điểm mỗi loại \n- Giao bài thực hành \n- Kiểm tra tiến độ thực hiện bài tập \nthực hành của sinh viên \n- Đánh giá và gợi ý các cách làm cho \nsinh viên \n\n3h \n\n- Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Thực hiện bài Lab triển \nkhai tường lửa bảo vệ hệ \nthống mạng của doanh \nnghiệp \n \n\n \n6h \n\nPhòng thực \nhành \nTài liệu tham \nkhảo \n\n16 - Trình bày các nguy cơ trên \nmạng  \n- Phận biệt được các đặc \nđiểm của Virus, Trojan, \nWorm \n- Nhận dạng các kiểu tấn \ncông DoS \n- Giải mã Pass với Brute \nForce Attack \n- Các chính sách bảo mật \n \n\n- Tổ chức thảo luận các nguy cơ trên \nmạng \n- Tổ chức thảo luận các laọi Virus, \nWorm, Trojan \n- Tổ chức thảo luận các kiểu tấn công \nDoS \n- Đánh giá và gợi ý các cách làm cho \nsinh viên \n- Nhận xét, đánh giá và tổng kết vấn \nđề thảo luận \n\n3h \n\n- Sinh viên đọc trước tài liệu \nvề vấn đề thảo luận \n- Tham gia vào thảo luận, \nđưa ra câu hỏi \n- Thực hiện bài Lab triển \nkhai tường lửa bảo vệ hệ \nthống mạng của doanh \nnghiệp \n \n\n \n4h \n\nPhòng lý thuyết \ncó trang bị máy \nchiếu \nTài liệu tham \nkhảo \n\n \n   Thông qua khoa/ bộ môn             Giáo viên \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n19\n\nBài 1: Tổng quan về mạng doanh nghiệp ................................................................................. 21 \n1.1 Giới thiệu môn học, phương pháp học ........................................................................... 21 \n1.2.Cách sử dụng các phần mềm thiết kế giả lập VMWare, Boson ..................................... 22 \n\n1.2.1 Phần mềm VMWare ................................................................................................ 22 \n1.2.2 Phần mềm Boson Netsim......................................................................................... 23 \n\n1.3. Giới thiệu hệ thống mạng thực tế của một số doanh nghiệp.......................................... 24 \nBài 2: Địa chỉ mạng .................................................................................................................. 26 \n\n2.1.Địa chỉ IP và Subnetmask............................................................................................... 26 \n2.2. Các loại địa chỉ IP.......................................................................................................... 26 \n\n2.2.1. Địa chỉ IP Private, IP Public ................................................................................... 26 \n2.2.2.Địa chỉ IP Unicast, Multicast, Broadcast ................................................................. 27 \n\n2.3.Nguyên lý dịch chuyển địa chỉ IP (NAT) ....................................................................... 27 \n2.3.1 Các thuật ngữ trong NAT ........................................................................................ 27 \n2.3.2. Các kiểu NAT ......................................................................................................... 28 \n\n2.4. Nguyên lý thu nhận một địa chỉ IP từ DHCP Server..................................................... 29 \nBài 3: Công nghệ Wireless ....................................................................................................... 31 \n\n3.1. Tổng quan về Wireless .................................................................................................. 31 \n3.2. Các chuẩn Wireless........................................................................................................ 31 \n3.3. Cấu hình mạng Wireless ................................................................................................ 32 \n\n3.3.1. Các thành phần thiết lập mạng WLAN................................................................... 32 \n3.3.2. WLAN và SSID...................................................................................................... 40 \n3.3.3. Cấu hình một mạng WLAN đơn giản..................................................................... 41 \n\nBài 4: Cơ bản về cấu hình định tuyến....................................................................................... 42 \n4.1. Các giao thức định tuyến ............................................................................................... 42 \n4.2. Giao thức định tuyến nội vùng RIP ............................................................................... 49 \n4.3. Giao thức định tuyến động OSPF .................................................................................. 55 \n\nBài 5:Thực hành về định tuyến................................................................................................. 62 \nBài 6: Cấu hình NAT trên Router............................................................................................. 63 \n\n6.1. Khái niệm chung về NAT.............................................................................................. 63 \n6.2 Nat tĩnh \u2013 Static NAT ..................................................................................................... 66 \n6.3. Nat động \u2013 Dynamic NAT............................................................................................. 67 \n6.4. Nat Overload \u2013 PAT ...................................................................................................... 67 \n\nBài 7:Thực hành Cấu hình NAT trên Router............................................................................ 69 \nBài 8:Cấu hình chuyển mạch (Switching) ................................................................................ 70 \n\n8.1. Cấu hình Switch và VLAN............................................................................................ 70 \nBài 9:Thực hành Cấu hình chuyển mạch và VLAN................................................................. 75 \nBài 10: Thảo luận...................................................................................................................... 77 \nBài 11: Cấu hình các Web Server, DNS Server ....................................................................... 78 \n\n11.1. Dịch vụ phân giải tên miến \u2013 DNS Server................................................................... 78 \n11.1.1. Nguyên lý phân giải tên miền ............................................................................... 78 \n11.1.2. Xây dựng máy chủ phân giải tên miền cho mạng doanh nghiệp.......................... 80 \n\n11.2. Dịch vụ Web Server..................................................................................................... 89 \n11.2.1. Giao thức HTTP và HTTPS.................................................................................. 89 \n11.2.2. Triển khai Website doanh nghiệp trên Server ...................................................... 89 \n\nBài 12: Thực hành cấu hình các dịch vụ mạng cơ bản ........................................................... 103 \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n20\n\nBài 13. Xây dựng một Mail Server......................................................................................... 104 \n13.1. Giao thức SMTP, POP3, IMAP................................................................................. 104 \n13.2. Triển khai Mail Server cho doanh nghiệp ................................................................. 110 \n\nBài 14. Thực hành Xây dựng một Mail Server....................................................................... 115 \nBài 15: Thực hành Proxy và Firewall ..................................................................................... 116 \n\n15.1. Nguyên lý hoạt động của Proxy................................................................................. 116 \n15.2. Nguyên lý hoạt động của Firewall ............................................................................. 120 \n15.3. Triển khai xây dựng hệ thống tường lửa cho doanh nghiệp ...................................... 127 \n\nBài 16: Cơ bản về bảo mật...................................................................................................... 128 \n16.1. Một số nguy cơ tấn công trên mạng........................................................................... 128 \n16.2. Các phương thức tấn công ......................................................................................... 130 \n\n16.2.1 Viruses, Worms, Trojan Horses........................................................................... 130 \n16.2.2 Denial of Service (DoS) và Brute Force Attack .................................................. 142 \n\n16.3. Các chính sách bảo mật ............................................................................................. 145 \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n21\n\nBài 1: Tổng quan về mạng doanh nghiệp \n\n \n\n1.1 Giới thiệu môn học, phương pháp học \n\nVới xu thế ứng dụng hệ thống thông tin vào tất cả các hoạt động sản xuất của các \ndoanh nghiệp, vấn đề triển khai một hệ thống mạng khi xây dựng một doanh \nnghiệp là điều tất yếu. Do vậy nhu cầu nhân lực ở trình độ chuyên gia trong lĩnh \nvực mạng doanh nghiệp trên thị trường lao động hiện nay đang rất nhiều. \n\nMạng doanh nghiệp là môn học được giảng dạy sau Module Mạng cơ bản và \ntrước Module Bảo mật mạng và Module Mạng thế hệ mới. Mục đích của môn \nhọc giúp sinh viên đạt được các kỹ năng về quản trị mạng LAN, tư vấn, thiết kế \nvà xây dựng được một hệ thống mạng cho doanh nghiệp có quy mô nhỏ với các \nyêu cầu cụ thể như sau: \n\n- Đánh giá được các hoạt động của các thiết bị phần cứng và phần mềm trong \nmột mô hình mạng LAN, WAN sẵn có \n\n- Tư vấn trong việc lựa chọn các thiết bị phần cứng phần mềm để thiết kế \nmạng LAN, WAN phù hợp với nhu cầu của doanh nghiệp nhỏ \n\n- Đánh giá được các yêu cầu về quản lý mạng, an ninh mạng và các ràng buộc \nkhác trong quá trình thiết kế mạng \n\n- Thiết kế được mạng LAN trong tòa nhà phục vụ cho công tác giảng dạy và \nnghiên cứu \n\n- Thiết kế được mạng WAN cho Trường học phục vụ công tác đào tạo và \nquản lý của Nhà trường. \n\nĐây là môn học mang tính ứng dụng thực tiễn rất cao do vậy đòi hỏi sinh viên \nchuẩn bị kỹ các tài liệu và phương tiện học tập cần thiết. Gồm có \n- Các phần mềm giả lập thiết kế mạng : \n\n- VMWare Simulator, Boson Netsim Simulator \n\n- ISA Server \n\n- Mail Exchange Server, Mail Mdeamon Server \n\n- Sách giáo trình, Slide do giáo viên biên soạn. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n22\n\n- Sách tham khảo: \n\n [1]. Cisco System, \"CCNA Discovery1 4.0\", Cisco System, 2007 \n\n [2]. Cisco System, \"CCNA Discovery2 4.0\", Cisco System, 2007 \n\n[3]. J.C. Mackin and Ian McLean, \u201cWindows Server 2003 Network \nInfrastructure\u201d, Microsoft Press, 2005 \n\nTrong quá trình học tập sinh viên cần chủ động đọc trước tài liệu tại nhà, các tài \nliệu do giáo viên giao cho về nhà tự học, tham gia trao đổi kiến thức trên forum \ncủa nhà trường và các forum khác như :  \n\n\u2022 http://quantrimang.com \n\n\u2022 http://nhatnghe.com.vn \n\n\u2022 http://vnpro.org.  \n\n \n\n1.2.Cách sử dụng các phần mềm thiết kế giả lập VMWare, Boson \n\n1.2.1 Phần mềm VMWare \n\nVMWare là phần mềm giả lập cho phép cài đặt nhiều hệ điều hành trên một máy \ntính có cấu hình mạnh. VMWare cho phép chúng ta cài nhiều hệ điều hành khác \nnhau như Window XP, Window Server 2003, Window Vista, Window Server \n2008, Linux... trên cùng một máy tính và tại một thời điểm có thể cùng khởi \nđộng nhiều máy tính ảo trên một máy tính thật. Đây là một tiện ích vô cùng thú \nvị và cần thiết cho các sinh viên khi học về mạng máy tính và cần cấu hình một \nlúc nhiều hệ thống khác nhau tạo thành một hệ thống mạng ảo. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n23\n\n \nTrên đây là hình khi máy ảo VMWare đang cùng lúc được cài đặt và chạy cả 03 \nhệ điều hành gồm Window Server 2003, Window XP và Red Hat Linux để thực \ntập. \n\n1.2.2 Phần mềm Boson Netsim \n\nBoson Netsim là phần mềm cho phép giả lập các hoạt động của các thiết bị mạng \nCisco. Với thị phần chiếm trên 70% toàn thế giới về thiết bị mạng, các thiết bị \nmạng của cisco luôn là lựa chọn số một cho tất cả các nhà thiết kế và triển khai \nhệ thống do độ ổn định và tính tin cậy cũng như sự bảo đảm của Cisco trong vấn \nđề an toàn thông tin. Boson Netsim sau khi cài đặt gồm 02 tiện ích con : \n\n\u2022 Boson Netsim Design \n\n\u2022 Boson netsim Simulator \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n24\n\nBoson Netsim Design là tiện ích cho phép chúng ta thiết kế các mô hình mạng ảo \nkhi không có điều kiện tiếp xúc với thiết bị thật. Dù vậy Boson Design có thể \ncho phép giả lập đến 90% các mô hình thật. \n\n \nBoson Netsim được thực hiện sau khi bạn đã thiết kế hệ thống giả lập. Nhiệm vụ \ncủa nó là tạo ra môi trường giả lập để thực hiện các câu lệnh cấu hình hệ thống \nđã được thiết kế bởi Boson Design trên môi trường CLI (Conmand Line \nInterface). \n\n \n\n1.3. Giới thiệu hệ thống mạng thực tế của một số doanh nghiệp \n\nGiới thiệu tổng quan sơ đồ hệ thống mạng một số doanh nghiệp. Trong hình là \nsơ đồ hệ thống mạng Trường ĐH SPKT Hưng Yên. \n\n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n25\n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n26\n\nBài 2: Địa chỉ mạng \n\n2.1.Địa chỉ IP và Subnetmask \n\nKiến thức về địa chỉ IP và các kiến thức liên quan đến Mô hình TCP/IP, \nSubneting đã được trang bị tại Module Mạng cơ bản, đây là một khối kiến thức \nnền tảng rất quan trọng, sinh viên cần xem lại tài liệu đã học. Để ôn tập lại khối \nkiến thức này sinh viên cần hoàn tất bài tập sau:. \n\nHệ thống mạng của công ty ABC như hình vẽ, công ty được cấp phát dải đỉa chỉ \n192.168.0.0/16. Thực hiện chia dải địa chỉ trên thành các Subnet thoả mãn điều \nkiện số host trong mỗi Subnet như trên hình với điều kiện tối ưu hoá không gian \nđịa chỉ IP. \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n2.2. Các loại địa chỉ IP \n\n2.2.1. Địa chỉ IP Private, IP Public \n\nIP private là những IP không được định tuyến trên Internet, bao gồm các dải địa \nchỉ sau: \n\n10.0.0.0 --> 10.255.255.255 \n\n172.16.0.0 --> 172.16.31.255 \n\n192.168.0.0 --> 192.168.255.255 \n\n \n\n1000 host \u2013 LAN1 500 host \u2013 LAN3 \n\n250 host \u2013 LAN 2 \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n27\n\nCác dải địa chỉ IP còn lại của lớp A, B, C là những địa chỉ IP Public (thuộc \nquyền sở hữu của ISP và nhà cung cấp địa chỉ Internet) \n\n \n\n2.2.2.Địa chỉ IP Unicast, Multicast, Broadcast \n\nĐịa chỉ Broadcast là địa chỉ quảng bá cho một Subnet theo chiều từ PC đến tất cả \ncác PC trong cùng Subnet : PC-> all PC \n\nĐịa chỉ Unicast là địa chỉ cho phép gửi từ một địa chỉ đến một địa chỉ khác : \n\nPC->PC \n\nĐịa chỉ Multicast là địa chỉ cho phép gửi từ một host đến một nhóm host khác: \nPC-> Group PC, các địa chỉ này thuộc lớp D. \n\n \n\n2.3.Nguyên lý dịch chuyển địa chỉ IP (NAT) \n\n2.3.1 Các thuật ngữ trong NAT \n\nKhi một máy thực hiện NAT sẽ có cả 2 chiều out và in theo quy định của \nInterface \n\n- Cisco sử dụngthuật ngữ 2 chiều này của NAT gọi là inside và outside, các \nnhóm địa chỉ trong NAT bao gồm: \n\n+ Inside local: nhóm địa chỉ bên trong \n\n+ Inside global: địa chỉ toàn cục bên trong (địa chỉ này đại diện cho các \nhost của bạn kết nối ra ngoài Internet, chính là địa chỉ mà ISP cấp cho \nbạn) \n\n+ Outside local address : là địa chỉ riêng của host bên ngoài mạng nội bộ \n\n+ Outside global address: là địa chỉ public của host bên ngoài (vd \nwww.yahoo.com) khi host bên trong thực hiện NAT để chuyển đổi IP, quá \ntrình NAT như sau: \n\ninside local ip address ----- inside global ip address ----- outside global ip address \n\nvd: 192.168.1.2 ----- 58.187.41.17:2412 ------- 209.191.93.52 \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n28\n\nChẳng hạn, khi vào trang web www.yahoo.com, đầu tiên sẽ có một request tới \nweb server yahoo, đây chính là thực hiện NAT outside, khi bạn nhận được reply \ntừ Yahoo server, quá trình ngược lại, lúc này chính là thực hiện NAT inside \n\n \n\nNAT inside ngược lại với NAT outside, khi gói dữ liệu đến được thiết bị thực \nhiện NAT, nó xem trong bảng NAT (NAT table) và thấy rằng 58.187.41.17:2412 \ntương ứng với 192.168.1.2, lúc đó NAT sẽ thực hiện đổi lại địa chỉ IP của gói tin \nvà gói dữ liệu đó sẽ đến được đúng địa chỉ của máy trong LAN của bạn. \n\n \n\nHoàn toàn tương tự như vậy với inbound và outbound (chỉ khác nó là thuật ngữ \ncủa Microsoft), nếu có dùng chỉ số port trong quá trình chuyển đổi thì đó là PAT, \ncòn chỉ dùng địa chỉ IP thì lúc đó chuyển đổi là NAT \n\nCâu lệnh net use thường dùng để map share trong mạng lan (tuy vậy bạn có thể \nmap một máy khác qua Internet, nếu máy đó phép share như vậy - chẳng hạn đã \nNAT hết port và cho phép hết các service), kết nối trong Lan, hay kết nối qua \nInternet đều có thể thực hiện giống nhau, qua Internet thì chỉ bị hạn chế bởi tốc \nđộ và chất lượng, thường là chậm hơn nhiều so với mạng LAN, tuy vậy ít ai \ndùng lệnh net use để map một share từ ngoài Internet, thường dùng các công cụ \nkhác, như là FTP, HTTP... và các công cụ chia sẻ qua Internet. \n\n \n\n2.3.2. Các kiểu NAT \n\nCó 2 kiểu NAT cơ bản là NAT và PAT :  \n\nGiống nhau \n\nDùng để chuyển đổi địa chỉ IP private thành địa chỉ IP public, giúp cho máy \ntrong mạng Lan của bạn có thể kết nối với Internet, và giúp tiết kiệm không gian \ncủa địa chỉ IP public, một cty có thể chỉ cần 1 hay vài địa chỉ IP public mà vẫn \ncho phép toàn bộ mạng của họ kết nối ra thế giới bên ngoài.Khác nhau :  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n29\n\nNAT : Network Address Translation : chuyển đổi địa chỉ IP thành địa chỉ bên \nngoài (có 2 dạng chuyển đổi là 1-1 : static, và chuyển đổi overload, khi bạn được \ncấp nhiều IP từ ISP) \n\nVí dụ: chuyển đổi 1-1 là : 192.168.0.1 <---> 186.15.4.2, còn chuyển đổi overload \nthì một địa chỉ bên trong sẽ được chuyển đổi thành một địa chỉ bên ngoài (nếu \nnhư địa chỉ bên ngoài chưa sử dụng) \n\n \n\nPAT (Port Address Translation), thường là các router ADSL mặc định dùng \nkiểu chuyển đổi này, vì ban chỉ có 1 IP public, nếu toàn bộ LAN của bạn đều \nmuốn kết nối ra ngoài - với một địa chỉ IP public (58.187.168.41)=> lúc đó địa \nchỉ bên trong sẽ được chuyển đổi thành địa chỉ đó kết hợp với chỉ số port, nếu \nport đó chưa sử dụng \n\nVí dụ: Bạn có một LAN nhỏ với dải IP : 192.168.1.x , khi đó các máy trong lan \nsẽ được chuyển đổi chẳng hạn với vài máy: \n\n \n\n192.168.1.3 <-->58.187.168.41:2413 \n\n192.168.1.4 <-->58.187.168.41:2414 \n\n192.168.1.5 <-->58.187.168.41:2415 \n\n192.168.1.6 <-->58.187.168.41:2416 \n\n.... \n\nCác chỉ số port thường dùng từ 1024 đến 65535 (not well-known port), vì \nwell-known port là chủ yếu dùng cho server, số port này đáp ứng được hầu hết \ncác mạng LAN. \n\n \n\n2.4. Nguyên lý thu nhận một địa chỉ IP từ DHCP Server. \n\nCó hai cách để một host có thể thu nhận được một địa chỉ IP, người sử dụng có \nthể cấu hình TCP/IP bằng tay bằng cách tự nhập vào các thông số, cách thứ 2 \nthường được sử dụng trong các công ty vì các nhân viên văng phòng thường \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n30\n\nkhông thể nhớ được các con số do người quản trị hệ thống mạng trong công ty \ncung cấp. Để host có thể thu nhận tự động một IP từ Server, bạn phải cài đặt dịch \nvụ DHCP trên máy chủ. Client và Server sẽ đàm phán với nhau để cấp một IP \ncho Client theo sơ đồ sau: \n\n \n\n \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n31\n\nBài 3: Công nghệ Wireless \n\n3.1. Tổng quan về Wireless \n\nWireless hay mạng 802.11 là hệ thống mạng không dây sử dụng sóng vô tuyến, \ngiống như điện thoại di động, truyền hình và radio. Hệ thống này hiện nay đang \nđược triển khai rộng rãi tại nhiều điểm công cộng hay tại nhà riêng. Hệ thống \ncho phép truy cập Internet tại những khu vực có sóng của hệ thống này, hoàn \ntoàn không cần đến cáp nối. Ngoài các điểm kết nối công cộng (hotspots), WiFi \ncó thể được thiết lập ngay tại nhà riêng. \n\nTên gọi 802.11 bắt nguồn từ viện IEEE (Institute of Electrical and Electronics \nEngineers). Viện này tạo ra nhiều chuẩn cho nhiều giao thức kỹ thuật khác nhau, \nvà nó sử dụng một hệ thống số nhằm phân loại chúng; 3 chuẩn thông dụng của \nWireless hiện nay là 802.11a/b/g. \n\n3.2. Các chuẩn Wireless \n\nWireless truyền và phát tín hiệu ở tần số 2.4 GHz hoặc 5GHz. Tần số này cao \nhơn so với các tần số sử dụng cho điện thoại di động, các thiết bị cầm tay và \ntruyền hình. Tần số cao hơn cho phép tín hiệu mang theo nhiều dữ liệu hơn.  \n\nWireless sử dụng chuẩn 802.11:  \n\nChuẩn 802.11b là phiên bản đầu tiên trên thị trường. Đây là chuẩn chậm nhất và \nrẻ tiền nhất, và nó trở thành ít phổ biến hơn so với các chuẩn khác. 802.11b phát \ntín hiệu ở tần số 2.4 GHz, nó có thể xử lý đến 11 megabit/giây. \n\nChuẩn 802.11g cũng phát ở tần số 2.4 GHz, nhưng nhanh hơn so với chuẩn \n802.11b, tốc độ xử lý đạt 54 megabit/giây. Chuẩn 802.11g nhanh hơn vì nó sử \ndụng mã OFDM (orthogonal frequency-division multiplexing), một công nghệ \nmã hóa hiệu quả hơn.  \n\nChuẩn 802.11a phát ở tần số 5 GHz và có thể đạt đến 54 megabit/ giây. Nó cũng \nsử dụng mã OFDM. Những chuẩn mới hơn sau này như 802.11n còn nhanh hơn \nchuẩn 802.11a, nhưng 802.11n vẫn chưa phải là chuẩn cuối cùng.  \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n32\n\n3.3. Cấu hình mạng Wireless \n\n3.3.1. Các thành phần thiết lập mạng WLAN \n\nCard mạng không dây (NIC_Wireless)  \n\n \n\n \n\nCác máy tính nằm trong vùng phủ sóng WiFi cần có các bộ thu không dây, \nadapter, để có thể kết nối vào mạng. Các bộ này có thể được tích hợp vào các \nmáy tính xách tay hay để bàn hiện đại. Hoặc được thiết kế ở dạng để cắm vào \nkhe PC card hoặc cổng USB, hay khe PCI. Khi đã được cài đặt adapter không \ndây và phần mềm điều khiển (driver), máy tính có thể tự động nhận diện và hiển \nthị các mạng không dây đang tồn tại trong khu vực. \n\nAccess Point (AP) \n\nAP là thiết bị phổ biến nhất trong WLAN chỉ đứng sau PC card không dây. Như \ntên của nó đã chỉ ra, AP cung cấp cho client một điểm truy cập vào mạng. AP là \nmột thiết bị half-duplex có mức độ thông minh tương đương với một Switch \nEthernet phức tạp. Hình dưới đây mô tả AP và nơi sử dụng chúng trong mạng \nWLAN. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n33\n\n \n \n\nAP có thể giao tiếp với các client không dây, với mạng có dây và với các AP \nkhác. Có 3 mode hoạt động chính mà bạn có thể cấu hình trong một AP \n\n Root mode \n\n Repeater mode \n\n Bridge mode \n\nRoot mode \n\nRoot mode được sử dụng khi AP được kết nối với mạng backbone có dây thông \nqua giao diện có dây (thường là Ethernet) của nó. Hầu hết các AP sẽ hỗ trợ các \nmode khác ngoài root mode, tuy nhiên root mode là cấu hình mặc định. Khi một \nAP được kết nối với phân đoạn có dây thông qua cổng ethernet của nó, nó sẽ \nđược cấu hình để hoạt động trong root mode. Khi ở trong root mode, các AP \nđược kết nối với cùng một hệ thống phân phối có dây có thể nói chuyện được với \nnhau thông qua phân đoạn có dây. AP giao tiếp với nhau để thực hiện các chức \nnăng của roaming như reassociation. Các client không dây có thể giao tiếp với \ncác client không dây khác nằm trong những cell (ô tế bào, hay vùng phủ sóng \ncủa AP) khác nhau thông qua AP tương ứng mà chúng kết nối vào, sau đó các \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n34\n\nAP này sẽ giao tiếp với nhau thông qua phân đoạn có dây như ví dụ trong hình \ndưới. \n\n \n \n\n \n\nBridge mode \n\nTrong Bride mode, AP hoạt động hoàn toàn giống với một Bridge không dây (sẽ \nđược thảo luận ở phần sau). Thật vậy, AP sẽ trở thành một Bridge không dây khi \nđược cấu hình theo cách này. Chỉ một số ít các AP trên thị trường có hỗ trợ chức \nnăng Bridge, điều này sẽ làm cho thiết bị có giá cao hơn đáng kể. Chúng ta sẽ \ngiải thích một cách ngắn gọn Bridge không dây hoạt động như thế nào, nhưng \nbạn có thể thấy từ hình dưới rằng Client không kết nối với Bridge, nhưng thay \nvào đó, Bridge được sử dụng để kết nối 2 hoặc nhiều đoạn mạng có dây lại với \nnhau bằng kết nối không dây. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n35\n\n \n \n\n \n\nRepeater Mode \n\nTrong Repeater mode, AP có khả năng cung cấp một đường kết nối không dây \nupstream vào mạng có dây thay vì một kết nối có dây bình thường. Như bạn thấy \ntrong hình dưới, một AP hoạt động như là một root AP và AP còn lại hoạt động \nnhư là một Repeater không dây. AP trong repeater mode kết nối với các client \nnhư là một AP và kết nối với upstream AP như là một client. Việc sử dụng AP \ntrong Repeater mode là hoàn toàn không nên trừ khi cực kỳ cần thiết bởi vì các \ncell xung quanh mỗi AP trong trường hợp này phải chồng lên nhau ít nhất là \n50%. Cấu hình này sẽ giảm trầm trọng phạm vi mà một client có thể kết nối đến \nrepeater AP. Thêm vào đó, Repeater AP giao tiếp cả với client và với upstream \nAP thông qua kết nối không dây, điều này sẽ làm giảm throughput trên đoạn \nmạng không dây. Người sử dụng được kết nối với một Repeater AP sẽ cảm nhận \nđược throughput thấp và độ trễ cao. Thông thường thì bạn nên disable cổng \nEthernet khi hoạt động trong repeater mode.  \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n36\n\n \n \n\nCác tùy chọn phổ biến (Common Options) \n\nAP có sẵn nhiều tùy chọn phần cứng và phần mềm khác nhau. Các tùy chọn phổ \nbiến bao gồm: \n\n+ Anten cố định hay có thể tháo lắp. \n\n+ Khả năng lọc cao cấp \n\n+ Antenna có thể tháo được (Removeable hay Modular) \n\n+ Thay đổi công suất phát \n\n+ Các kiểu khác nhau của kết nối có dây \n\nFixed or Detachable Antenna \n\nTùy thuộc vào nhu cầu doanh nghiệp của bạn hay nhu cầu của khách hàng, bạn \nsẽ cần phải chọn giữa AP có anten cố định hay AP có anten có thể tháo lắp. Một \nAP với anten có thể tháo lắp cho bạn khả năng sử dụng các loại anten khác nhau \nđể kết nối với AP sử dụng cable có chiều dài khác nhau tùy nhu cầu của bạn.  \n\nVí dụ: Nếu bạn cần treo một AP ở trong nhà nhưng lại cho phép người sử dụng \ntruy cập vào mạng ở bên ngoài thì bạn sẽ cần kết nối với cable và anten ngoài \ntrời trực tiếp với AP và chỉ treo anten bên ngoài. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n37\n\nAP có thể có hoặc không có anten diversity (tính năng đa dạng anten). WLAN \nanten diversity là việc sử dụng nhiều anten với nhiều input trên một receiver duy \nnhất để lấy mẫu tín hiệu đến thông qua mỗi anten. Việc lấy mấu tín hiệu từ 2 \nanten cho phép xác định được tín hiệu input của anten nào là tốt hơn. Hai anten \ncó thể có mức độ nhận tín hiệu khác nhau bởi vì một hiện tượng được gọi là \nmultipath.  \n\nAdvanced Filtering Capability \n\nCác chức năng lọc MAC hay protocol có thể được bao gồm trong AP. Lọc \nthường được sử dụng để ngăn chặn kẻ xâm nhập vào mạng WLAN của bạn. Như \nlà một phương thức bảo mật cơ bản, một AP có thể được cấu hình để lọc những \nthiết bị không nằm trong danh sách lọc MAC của AP.  \n\nViệc lọc protocol cho phép admin quyết định và điều khiển giao thức nào nên \nđược sử dụng trong mạng WLAN.  \n\nVí dụ: Nếu Admin chỉ muốn cho phép truy cập http trong mạng WLAN để người \ndùng có thể lướt web và truy cập mail dạng web (yahoo), thì việc cấu hình lọc \ngiao thức http sẽ ngăn chận tất cả các loại giao thức khác.  \n\nRemovable (Modular) Radio Card \n\nMột số nhà sản xuất cho phép bạn thêm vào và tháo ra các radio card từ khe \nPCMCIA trên AP. Một số AP có thể có 2 Anten dành cho các mục đích đặc biệt. \nViệc có 2 Anten trong một AP cho phép một radio card có thể hoạt động như là \nmột AP trong khi một radio card khác hoạt động như là một Bridge. Một cách \nkhác là sử dụng mỗi radio card như là một AP độc lập. Việc có mỗi card hoạt \nđộng như là một AP độc lập cho phép gấp đôi số lượng người sử dụng trong \ncùng một không gian vật lý mà không cần phải mua thêm một AP khác. Khi AP \nđược cấu hình theo cách này, mỗi radio card sẽ được cấu hình trên một kênh \nkhông chồng lên nhau, lý tưởng là kênh 1 và kênh 11. \n\n \n\nVariable Output Power \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n38\n\nViệc thay đổi công suất phát cho phép admin điều khiển công suất (miliwatt) mà \nAP sử dụng để truyền dữ liệu. Việc điều khiển công suất phát ra có thể là cần \nthiết trong một số trường hợp khi các node ở xa không thể xác định được AP. Nó \ncũng cho phép bạn điều khiển vùng phủ sóng của một AP. Khi công suất phát ra \ntrên một AP tăng lên, client có thể di chuyển xa AP hơn mà không mất kết nối \nvới AP. Tính năng này cũng hữu ích trong việc bảo mật bằng cách cho phép thay \nđổi kích thước của cell RF làm cho các kẻ xâm nhập không thể kết nối với mạng \ntừ bên ngoài tòa nhà của công ty. \n\nNgoài AP có công suất phát thay đổi thì ta cũng có thể sử dụng AP có công suất \nphát cố định. Với AP có công suất phát cố định thì bạn có thể sử dụng các bộ \nkhuếch đại, bộ suy hao, cable dài, hay anten có độ lợi cao. Điều quan trọng trong \nviệc điều khiển công suất phát ra trên cả AP và Anten là phải tuân theo qui định \ncủa FCC \n\nVaried Types of Connectivity \n\nCác tùy chọn kết nối cho một AP có thể bao gồm 10BaseTx, 100BaseTx, \n10/100BaseTx, 100BaseFx, Token Ring, \u2026 Bởi vì AP thường là thiết bị mà \nclient kết nối vào và giao tiếp với backbone mạng có dây, vì thế admin phải hiểu \nlàm thế nào để kết nối AP vào mạng có dây. Thiết kế và kết nối AP chính xác sẽ \ngiúp ngăn chặn việc nghẽn cổ chai ở AP hoặc xa hơn có thể là trục trặc thiết bị. \n\nHãy xét việc sử dụng một AP chuẩn trong mạng WLAN. Nếu trong trường hợp \nnày AP đã được xác định là sẽ đặt ở vị trí cách 150m từ wiring closet gần nhất, \nthì việc sử dụng cable CAT5 ethernet sẽ không thể hoạt động được. Đây là một \nvấn đề bởi vì ethernet qua cable CAT5 chỉ hoạt động được trong phạm vi 100m. \nTrong trường hợp này việc mua một AP có kết nối 100BaseFx và chạy cable \nquang từ wiring closet đến AP đã làm trước đó rồi thì vấn đề sẽ dễ dàng hơn. \n\nConfiguration and Management \n\nCác phương pháp được sử dụng để cấu hình và quản lý AP sẽ khác nhau tùy nhà \nsản xuất. Hầu hết họ đều cung cấp ít nhất là console, telnet, USB, hay web \nserver. Một số AP còn có phần mềm cấu hình và quản lý riêng. Nhà sản xuất cấu \nhình AP với một IP address trong cấu hình khởi tạo. Nếu admin cần thiết lập lại \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n39\n\nthiết lập mặc định, thường thì sẽ có một nút phục vụ chức năng này nằm bên \nngoài AP.  \n\nCác chức năng trên AP là khác nhau. Tuy nhiên, có một điều là không đổi: AP \ncó càng nhiều tính năng thì giá của nó càng cao. Ví dụ, một số AP SOHO sẽ có \nWEP, MAC filter và thậm chí là Web server. Nếu các tính năng như xem bảng \nassociation, hỗ trợ 802.1x/EAP, VPN, Routing, Inter AP Protocol, RADIUS thì \ngiá của nó sẽ gấp nhiều lần so với AP thông thường. \n\n \n\nThậm chí các tính năng chuẩn trên các AP tương thích Wi-Fi đôi khi cũng khác \nnhau tùy nhà sản xuất. Ví dụ 2 dòng SOHO AP khác nhau có thể hỗ trợ MAC \nfilter nhưng chỉ một trong số chúng cho phép bạn permit hay deny cụ thể một \ntrạm nào đó. Một số AP hỗ trợ kết nối có dây full-duplex 10/100Mbps, trong khi \nmột số khác chỉ có kết nối 10BaseT half-duplex. \n\nViệc hiểu tính năng nào là cần thiết cho AP trong môi trường SOHO, mid-range, \nhay enterprise-level là một điều quan trọng nếu bạn muốn trở thành một nhà \nquản trị mạng không dây. Dưới đây là danh sách các tính năng cần có cho một \nAP trong môi trường SOHO và Enterprise. Danh sách này không có nghĩa là đầy \nđủ bởi vì một số nhà sản xuất đã có nhiều tính năng mới. Danh sách này chỉ cung \ncấp một điểm bắt đầu để chọn AP cho SOHO. \n\nSmall Office, Home Office (SOHO) \n\n+ Mac filter \n\n+ WEP (64 hay 128 bit) \n\n+ Giao diện cấu hình USB hay console \n\n+ Giao diện cấu hình Web đơn giản \n\n+ Các phần mềm cấu hình đơn giản \n\nEnterprise \n\n+ Phần mềm cấu hình cao cấp \n\n+ Giao diện cấu hình web cao cấp \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n40\n\n+ Telnet \n\n+ SNMP \n\n+ 802.1x/EAP \n\n+ RADIUS client \n\n+ VPN client và server \n\n+ Routing (dynamic hoặc static) \n\n+ Chức năng Repeater \n\n+ Chức năng Bridge \n\nViệc sử dụng sách hướng dẫn của nhà sản xuất sẽ cung cấp nhiều thông tin chi \ntiết cho mỗi dòng sản phẩm. Nếu bạn là một nhà quản trị mạng WLAN thì bạn \nnên biết môi trường hoạt động của bạn để tìm kiếm những sản phẩm thỏa mãn \nnhu cầu sử dụng cũng như bảo mật, sau đó hãy so sánh các tinh năng của 3 hay 4 \nnhà sản xuất khác nhau để chọn được thiết bị tối ưu. Quá trình này có thể tốn \nnhiều thời gian, nhưng thời gian sử dụng để học về các sản phẩm khác nhau trên \nthị trường là rất hữu ích. Các nguồn tài nguyên tốt nhất để tìm hiểu về dòng sản \nphẩm nào đó trên thị trường chính là website của nhà sản xuất. Khi chọn một \nAP, hãy nhớ chọn nhà sản xuất có hỗ trợ ngoài các tính năng và giá cả. \n\n \n\n3.3.2. WLAN và SSID \n\nMạng không dây nội bộ theo chuẩn IEEE 802.11 bảo mật dùng thông số cấu \nhình SSID (Service Set ID). Kỹ thuật này hoạt động theo 2 chế độ \n\n+ Chế độ không bảo mật thì theo chu kỳ thời gian Access Point gửi Broadcast \nSSID của mình đến các máy trạm dùng card mạng wireless.Mô hình này thường \ndùng cho các điểm internet công cộng (Hot Post) \n\n+ Chế độ thứ 2 là chế độ bảo mật, Access Point không gửi SSID của mình cho \nmáy trạm mà máy trạm phải có cùng thông số SSID (được cấu hình trong card \nwireless trên máy trạm) với Access Point. Mô hình này thường sử dụng cho hệ \nthống mạng công ty) \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n41\n\n3.3.3. Cấu hình một mạng WLAN đơn giản \nnhỏ \n\n \n \n\nYêu cầu thiết bị \n\n Một Modem ADSL \n\n Một đường Internet \n\n Một AccessPoint \n\n PC có card Wireless \n\nCấu hình hệ thống \n\n Cấu hình sơ đồ hệ thống theo hình \n\n Cấu hình AccessPoint Wireless cho các PC có card mạng không dây kết \n\nnối được Internet \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n42\n\nBài 4: Cơ bản về cấu hình định tuyến \n \n\n4.1. Các giao thức định tuyến \n \n\nTrong ngành mạng máy tính, định tuyến (tiếng Anh: routing hay routeing) là quá \n\ntrình chọn lựa các đường đi trên một mạng máy tính để gửi dữ liệu qua đó. Việc \n\nđịnh tuyến được thực hiện cho nhiều loại mạng, trong đó có mạng điện thoại, \n\nliên mạng, Internet, mạng giao thông. \n\nRouting chỉ ra hướng, sự di chuyển của các gói (dữ liệu) được đánh địa chỉ từ \n\nmạng nguồn của chúng, hướng đến đích cuối thông qua các node trung gian; \n\nthiết bị phần cứng chuyên dùng được gọi là router (bộ định tuyến). Tiến trình \n\nđịnh tuyến thường chỉ hướng đi dựa vào bảng định tuyến, đó là bảng chứa những \n\nlộ trình tốt nhất đến các đích khác nhau trên mạng. Vì vậy việc xây dựng bảng \n\nđịnh tuyến, được tổ chức trong bộ nhớ của router, trở nên vô cùng quan trọng \n\ncho việc định tuyến hiệu quả. \n\nRouting khác với bridging (bắc cầu) ở chỗ trong nhiệm vụ của nó thì các cấu trúc \n\nđịa chỉ gợi nên sự gần gũi của các địa chỉ tương tự trong mạng, qua đó cho phép \n\nnhập liệu một bảng định tuyến đơn để mô tả lộ trình đến một nhóm các địa chỉ. \n\nVì thế, routing làm việc tốt hơn bridging trong những mạng lớn, và nó trở thành \n\ndạng chiếm ưu thế của việc tìm đường trên mạng Internet. \n\nCác mạng nhỏ có thể có các bảng định tuyến được cấu hình thủ công, còn những \n\nmạng lớn hơn có topo mạng phức tạp và thay đổi liên tục thì xây dựng thủ công \n\ncác bảng định tuyến là vô cùng khó khăn. Tuy nhiên, hầu hết mạng điện thoại \n\nchuyển mạch chung (public switched telephone network - PSTN) sử dụng bảng \n\nđịnh tuyến được tính toán trước, với những tuyến dự trữ nếu các lộ trình trực tiếp \n\nđều bị nghẽn. Định tuyến động (dynamic routing) cố gắng giải quyết vấn đề này \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n43\n\nbằng việc xây dựng bảng định tuyến một cách tự động, dựa vào những thông tin \n\nđược giao thức định tuyến cung cấp, và cho phép mạng hành động gần như tự trị \n\ntrong việc ngăn chặn mạng bị lỗi và nghẽn. \n\n \n\nĐịnh tuyến động chiếm ưu thế trên Internet. Tuy nhiên, việc cấu hình các giao \n\nthức định tuyến thường đòi hỏi nhiều kinh nghiệm; đừng nên nghĩ rằng kỹ thuật \n\nnối mạng đã phát triển đến mức hoàn thành tự động việc định tuyến. Cách tốt \n\nnhất là nên kết hợp giữa định tuyến thủ công và tự động. \n\nNhững mạng trong đó các gói thông tin được vận chuyển, ví dụ như Internet, \n\nchia dữ liệu thành các gói, rồi dán nhãn với các đích đến cụ thể và mỗi gói được \n\nlập lộ trình riêng biệt. Các mạng xoay vòng, như mạng điện thoại, cũng thực \n\nhiện định tuyến để tìm đường cho các vòng (ví dụ như cuộc gọi điện thoại) để \n\nchúng có thể gửi lượng dữ liệu lớn mà không phải tiếp tục lặp lại địa chỉ đích. \n\nĐịnh tuyến IP truyền thống vẫn còn tương đối đơn giản vì nó dùng cách định \n\ntuyến bước kế tiếp (next-hop routing), router chỉ xem xét nó sẽ gửi gói thông tin \n\nđến đâu, và không quan tâm đường đi sau đó của gói trên những bước truyền còn \n\nlại. Tuy nhiên, những chiến lược định tuyến phức tạp hơn có thể được, và thường \n\nđược dùng trong những hệ thống như MPLS, ATM hay Frame Relay, những hệ \n\nthống này đôi khi được sử dụng như công nghệ bên dưới để hỗ trợ cho mạng IP. \n\n \n\nThuật toán vector (distance-vector routing protocols) \n\nThuật toán này dùng thuật toán Bellman-Ford. Phương pháp này chỉ định một \n\ncon số, gọi là chi phí (hay trọng số), cho mỗi một liên kết giữa các node trong \n\nmạng. Các node sẽ gửi thông tin từ điểm A đến điểm B qua đường đi mang lại \n\ntổng chi phí thấp nhất (là tổng các chi phí của các kết nối giữa các node được \n\ndùng). \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n44\n\nThuật toán hoạt động với những hành động rất đơn giản. Khi một node khởi \n\nđộng lần đầu, nó chỉ biết các node kề trực tiếp với nó, và chi phí trực tiếp để đi \n\nđến đó (thông tin này, danh sách của các đích, tổng chi phí của từng node, và \n\nbước kế tiếp để gửi dữ liệu đến đó tạo nên bảng định tuyến, hay bảng khoảng \n\ncách). Mỗi node, trong một tiến trình, gửi đến từng \u201chàng xóm\u201d tổng chi phí của \n\nnó để đi đến các đích mà nó biết. Các node \u201chàng xóm\u201d phân tích thông tin này, \n\nvà so sánh với những thông tin mà chúng đang \u201cbiết\u201d; bất kỳ điều gì cải thiện \n\nđược những thông tin chúng đang có sẽ được đưa vào các bảng định tuyến của \n\nnhững \u201chàng xóm\u201d này. Đến khi kết thúc, tất cả node trên mạng sẽ tìm ra bước \n\ntruyền kế tiếp tối ưu đến tất cả mọi đích, và tổng chi phí tốt nhất. \n\nKhi một trong các node gặp vấn đề, những node khác có sử dụng node hỏng này \n\ntrong lộ trình của mình sẽ loại bỏ những lộ trình đó, và tạo nên thông tin mới của \n\nbảng định tuyến. Sau đó chúng chuyển thông tin này đến tất cả node gần kề và \n\nlặp lại quá trình trên. Cuối cùng, tất cả node trên mạng nhận được thông tin cập \n\nnhật, và sau đó sẽ tìm đường đi mới đến tất cả các đích mà chúng còn tới được. \n\n \n\nThuật toán trạng thái kết nối (Link-state routing protocols) \n\nKhi áp dụng các thuật toán trạng thái kết nối, mỗi node sử dụng dữ liệu cơ sở của \n\nnó như là một bản đồ của mạng với dạng một đồ thị. Để làm điều này, mỗi node \n\nphát đi tới tổng thể mạng những thông tin về các node khác mà nó có thể kết nối \n\nđược, và từng node góp thông tin một cách độc lập vào bản đồ. Sử dụng bản đồ \n\nnày, mỗi router sau đó sẽ quyết định về tuyến đường tốt nhất từ nó đến mọi node \n\nkhác. \n\nThuật toán đã làm theo cách này là Dijkstra, bằng cách xây dựng cấu trúc dữ liệu \n\nkhác, dạng cây, trong đó node hiện tại là gốc, và chứa mọi noded khác trong \n\nmạng. Bắt đầu với một cây ban đầu chỉ chứa chính nó. Sau đó lần lượt từ tập các \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n45\n\nnode chưa được thêm vào cây, nó sẽ thêm node có chi phí thấp nhất để đến một \n\nnode đã có trên cây. Tiếp tục quá trình đến khi mọi node đều được thêm. \n\nCây này sau đó phục vụ để xây dựng bảng định tuyến, đưa ra bước truyền kế tiếp \n\ntốt ưu, \u2026 để từ một node đến bất kỳ node khác trên mạng. \n\n \n\nSo sánh các thuật toán định tuyến \n\nCác giao thức định tuyến với thuật toán vector tỏ ra đơn giản và hiệu quả trong \n\ncác mạng nhỏ, và đòi hỏi ít (nếu có) sự giám sát. Tuy nhiên, chúng không làm \n\nviệc tốt, và có tài nguyên tập hợp ít ỏi, dẫn đến sự phát triển của các thuật toán \n\ntrạng thái kết nối tuy phức tạp hơn nhưng tốt hơn để dùng trong các mạng lớn. \n\nGiao thức vector kém hơn với rắc rối về đếm đến vô tận. \n\n \n\nƯu điểm chính của định tuyến bằng trạng thái kết nối là phản ứng nhanh nhạy \n\nhơn, và trong một khoảng thời gian có hạn, đối với sự thay đổi kết nối. Ngoài ra, \n\nnhững gói được gửi qua mạng trong định tuyến bằng trạng thái kết nối thì nhỏ \n\nhơn những gói dùng trong định tuyến bằng vector. Định tuyến bằng vector đòi \n\nhỏi bảng định tuyến đầy đủ phải được truyền đi, trong khi định tuyến bằng trạng \n\nthái kết nối thì chỉ có thông tin về \u201chàng xóm\u201d của node được truyền đi. Vì vậy, \n\ncác gói này dùng tài nguyên mạng ở mức không đáng kể. Khuyết điểm chính của \n\nđịnh tuyến bằng trạng thái kết nối là nó đòi hỏi nhiều sự lưu trữ và tính toán để \n\nchạy hơn định tuyến bằng vector. \n\n \n\nGiao thức được định tuyến và giao thức định tuyến \n\nSự nhầm lẫn thường xảy ra giữa \u201cgiao thức được định tuyến\u201d và \u201cgiao thức định \n\ntuyến\u201d (\u201crouted protocols\u201d và \u201crouting protocols\u201d). \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n46\n\nGiao thức được định tuyến (routed protocols hay routable protocols ) \n\nMột giao thức đã được định tuyến là bất kỳ một giao thức mạng nào cung cấp \n\nđầy đủ thông tin trong địa chỉ tầng mạng của nó để cho phép một gói tin được \n\ntruyền đi từ một máy chủ (host) đến máy chủ khác dựa trên sự sắp xếp về địa \n\nchỉ, không cần biết đến đường đi tổng thể từ nguồn đến đích. Giao thức đã được \n\nđịnh tuyến định nghĩa khuôn dạng và mục đích của các trường có trong một gói. \n\nCác gói thông thường được vận chuyển từ hệ thống cuối đến một hệ thống cuối \n\nkhác. Hầu như tất cả giao thức ở tầng 3 các giao thức khác ở các tầng trên đều có \n\nthể được định tuyến, IP là một ví dụ. Nghĩa là gói tin đã đuợc định hướng (có địa \n\nchỉ rõ ràng )giống như lá thư đã được ghi địa chỉ rõ chỉ còn chờ routing (tìm \n\nđường đi đến địa chỉ đó) \n\nCác giao thức ở tầng 2 như Ethernet là những giao thức không định tuyến được, \n\nvì chúng chỉ chứa địa chỉ tầng liên kết, không đủ để định tuyến: một số giao thức \n\nở tầng cao dựa trực tiếp vào đây mà không có thêm địa chỉ tầng mạng, như \n\nNetBIOS, cũng không định tuyến được. \n\n \n\nGiao thức định tuyến (routing protocols) \n\nGiao thức định tuyến được dùng trong khi thi hành thuật toán định tuyến để \n\nthuận tiện cho việc trao đổi thông tin giữa các mạng, cho phép các router xây \n\ndựng bảng định tuyến một cách linh hoạt. Trong một số trường hợp, giao thức \n\nđịnh tuyến có thể tự chạy đè lên giao thức đã được định tuyến: ví dụ, BGP chạy \n\nđè trên TCP: cần chú ý là trong quá trình thi hành hệ thống không tạo ra sự lệ \n\nthuộc giữa giao thức định tuyến và đã được định tuyến. \n\n \n\nDanh sách các giao thức định tuyến \n\nGiao thức định tuyến trong  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n47\n\n Router Information Protocol (RIP)  \n\n Open Shortest Path First (OSPF)  \n\n Intermediate System to Intermediate System (IS-IS)  \n\nHai giao thức sau đây thuộc sở hữa của Cisco, và được hỗ trợ bởi các router \n\nCisco hay những router của những nhà cung cấp mà Cisco đã đăng ký công \n\nnghệ:  \n\n Interior Gateway Routing Protocol (IGRP)  \n\n Enhanced IGRP (EIGRP)  \n\nGiao thức định tuyến ngoài  \n\n Exterior Gateway Protocol (EGP)  \n\n Border Gateway Protocol (BGP)  \n\n Constrained Shortest Path First (CSPF)  \n\n \n\nThông số định tuyến (Routing metrics) \n\nMột thông số định tuyến bao gồm bất kỳ giá trị nào được dùng bởi thuật toán \n\nđịnh tuyến để xác định một lộ trình có tốt hơn lộ trình khác hay không. Các \n\nthông số có thể là những thông tin như băng thông (bandwidth), độ trễ (delay), \n\nđếm bước truyền, chi phí đường đi, trọng số, kích thước tối đa gói tin (MTU - \n\nMaximum transmission unit), độ tin cậy, và chi phí truyền thông. Bảng định \n\ntuyến chỉ lưu trữ những tuyến tốt nhất có thể, trong khi cơ sở dữ liệu trạng thái \n\nkết nối hay topo có thể lưu trữ tất cả những thông tin khác. \n\n \n\nRouter dùng tính năng phân loại mức tin cậy (administrative distance -AD) để \n\nchọn đường đi tốt nhất khi nó \u201cbiết\u201d hai hay nhiều đường để đến cùng một đích \n\ntheo các giao thức khác nhau. AD định ra độ tin cậy của một giao thức định \n\ntuyến. Mỗi giao thức định tuyến được ưu tiên trong thứ tự độ tin cậy từ cao đến \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n48\n\nthấp nhất có một giá trị AD. Một giao thức có giá trị AD thấp hơn thì được tin \n\ncậy hơn, ví dụ: OSPF có AD là 110 sẽ được chọn thay vì RIP có AD là 120. \n\n \n\nBảng sau đây cho biết sự sắp xếp mức tin cậy được dùng trong các router \n\nCisco \n\n \n \n\nCác lớp giao thức định tuyến \n\nDựa vào quan hệ của các dòng router với các hệ thống tự trị, có nhiều lớp giao \n\nthức định tuyến như sau: \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n49\n\n Giao thức định tuyến trong mạng Ad-hoc xuất hiện ở những mạng \n\nkhông có hoặc ít phương tiện truyền dẫn.  \n\n Interior Gateway Protocols (IGPs) trao đổi thông tin định tuyến trong \n\nmột AS. Các ví dụ thường thấy là:  \n\no IGRP (Interior Gateway Routing Protocol)  \n\no EIGRP (Enhanced Interior Gateway Routing Protocol)  \n\no OSPF (Open Shortest Path First)  \n\no RIP (Routing Information Protocol)  \n\no IS-IS (Intermediate System to Intermediate System)  \n\nChú ý: theo nhiều tài liệu của Cisco, EIGRP không phân lớp như giao thức trạng \n\nthái kết nối. \n\n \n\n Exterior Gateway Protocols (EGPs) định tuyến giữa các AS. EGPs gồm:  \n\no EGP (giao thức cũ để nối mạng Internet trước đây, bây giờ đã lỗi \n\nthời)  \n\no BGP (Border Gateway Protocol: phiên bản hiện tại, BGPv4, có từ \n\nkhoảng năm 1995)  \n\n \n\n4.2. Giao thức định tuyến nội vùng RIP \nRIP (tiếng Anh: Routing Information Protocol) là một giao thức định tuyến nội \n\nvùng sử dụng thuật toán định tuyến Distance-vector.  \n\nCác đặc điểm: \n\n Là giao thức định tuyến theo vector khoảng cách (Distance Vector ) , tức là \n\nRIP sẽ cập nhật toàn bộ hoặc 1 phần bảng định tuyến của mình cho các \n\nRouter láng giềng kết nối trực tiếp với nó . Bảng định tuyến gồm các thông \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n50\n\ntin như : địa chỉ của router kế tiếp trên đường đi , tổng chi phí từ chính router \n\nđó đến mạng đích\u2026 \n\n Là giao thức định tuyến theo kiểu classful ( tức định tuyến theo lớp địa chỉ) vì \n\nrip k mang theo thông tin subnet mask đi kèm (FLSM) \n\n Chọn đường đi dựa vào thông số định tuyến là hop count ( số router ) hay còn \n\nnói metric của RIP là hop count, dùng simple routing metric. Chính vì thế mà \n\nđôi lúc có 1 số đường mà rip chọn k phải là đường tối ưu nhất đến mạng đích. \n\nNếu 1 packet đến mạng đích có số lượng hop vượt quá 15 thì nó sẽ bị drop. \n\nDo cái tính khó chịu này của RIP nên mới nó được cho là khó mở rộng , phù \n\nhợp với mạng nhỏ ( nhưng mèo thấy nó không nhỏ đâu đối với vn ) \n\n Update định kì 30s ( thay đổi bằng câu lệnh update-timers) . Ngoài ra RIP còn \n\ncác giá trị thời gian khác như invalid , holdown và flush timer set bằng câu \n\nlệnh sau timers basic update invalid holdown flush \n\n Administrative Distance (AD) = 120 , thông số này càng nhỏ thì càng ưu tiên \n\n Load balacing ( chia tải ) maximum là 6 đường , default là 4 đường có thể set \n\nlại bằng câu lệnh maximum-paths . Việc chia tải ở đây đòi hỏi các đường phải \n\ncó chi phí (cost)bằng nhau mới được nhé hay còn gọi là equal-cost mà cost \n\ncủa rip là hop count vì thế nếu tốc độ của 2 đường khác nhau như 1 đường là \n\ndial-up và 1 đường là T1 thì cũng như vậy thôi. \n\n \n\nCác cơ chế chống Loop \n\n Count to infinity ( định nghĩa giá trị tối đa) khi trong mạng xảy ra loop , gói \n\ntin chạy lòng vòng hoài trong mạng cho đến khi có tiến trình nào đó cắt đứt \n\nvòng lặp gọi là đếm vô hạn .Với rip metric là hop count vì thế mỗi khi thông \n\ntin cập nhật được \u201cđi qua\u201d 1 router thì số lượng hop sẽ tăng lên 1. Bản thân \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n51\n\nrip sẽ khắc phục tình trạng đếm đến vô hạn bằng cách cứ thông số định tuyến \n\nmà vượt quá 15 thì packet đó sẽ bị drop \n\n Route poisioning ( poison reverse ): thường thì khi 1 đường mạng nào đó có \n\nthông số định tuyến tăng dần lên thì đã bị tình nghi là loop rồi nhé . Lúc đó \n\nrouter sẽ phát đi 1 thông tin poison reverse để xóa đi đường đó và cho nó vào \n\ntrạng thái holddown .  \n\nTriggered update ( câu lệnh ip rip triggered) : vì rip cập nhật thông tin định \n\ntuyến 30s 1 lần vì thế khi có 1 mạng thay đổi thì phải chờ đến hết 1 chu kỳ \n\n30s thì các router khác trong mạng mới biết được sự thay đổi đó. Cơ chế \n\ntriggered update này giúp router cập nhật ngay sự thay đổi trong mạng mà k \n\ncần phải đợi hết chu kỳ đó. Kết hợp cơ chế này cùng poison reverse là ok. \n\n Holdown timer :khi router A nhận được 1 thông tin về 1 mạng X từ 1 router \n\nB nói rằng mạng X bị đứt thì router A sẽ set holddown timer. Trong suốt thời \n\ngian holddown này , router sẽ không cập nhật bất kì thông tin định tuyến nào \n\nvề mạng X từ các router khác trong mạng , chẳng hạn router C cập nhật cho \n\nA nói , mạng X còn sống thì router A sẽ phớt lờ thông tin đó đi. Trừ phi \n\nrouter B nói với nó là mạng X sống lại rồi thì router A mới cập nhật nhé \n\n Split Horizon tức là khi router gửi thông tin định tuyến ra 1 interface , thì \n\nrouter sẽ k gửi ngược trở lại các thông tin định tuyến mà nó học được từ cổng \n\nđó . Cơ chế này chỉ tránh được loop giữa 2 router \n\n Kết hợp Split horizon với poision reverse : nếu đọc phớt qua , các bạn sẽ thấy \n\n2 anh này trái ngược nhau , chắc là 2 cơ chế này đố kị nhau đây . Nhưng thực \n\nra khi kết hợp lại sẽ hữu dụng trong khi mạng gặp sự cố , hình như mặc định \n\nlà nó k dùng cơ chế này hay nói cách khác 2 cơ chế này tách riêng không làm \n\nchung vì sợ làm tăng kích thước của bảng định tuyến. Khi router A học được \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n52\n\n1 mạng X bị die từ router B từ cổng S0/0 chẳng hạn , thì A sẽ advertise lại \n\nmạng X đó ra cổng s0/0 tiếp tục với hop count là 16 \n\n \n\nQuá trình gửi và nhận thông tin định tuyến \n\nMô hình minh họa \n\n \n\n \n \n\nLúc gửi thông tin định tuyến: Trước khi gửi update (về đường mạng 131.108 và \n\n131.99) cho router 2 thì router 1 phải check rằng \n\n Đường mạng 131.108.5.0/24 có cùng major net với 131.108.2.0/24 hay \n\nkhông? \n\n Trong trường hợp này là có, Router 1 mới check típ 131.108.5.0 và \n\n131.108.2.0 có cùng subnet mask hay không? \n\n Nếu trùng, Router 1 sẽ quảng bá đường mạng này. \n\n Nếu k trùng , router 1 sẽ drop packet đó  \n\n Đường mạng 137.99.88.0/24 có cùng major net với 131.108.2.0/24 hay \n\nkhông? \n\n Nếu không thì router 1 sẽ làm động tác là tổng hợp (summarize) \n\n137.99.88.0/24 tại major net boundary thành 137.99.0.0 và quảng bá nó. \n\n \n\nTrong mô hình này thì ta nhận được kết quả như thế này trong khi thi hành lệnh \n\ndebug ip rip \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n53\n\n \n \n\nNhận update : \n\nLúc này debug ip rip ngay trên router 2 thì ta thấy như thế này \n\n \nRouter 2 sẽ check để xem nên apply mask nào cho đường mạng 131 và 137 này \n\nđây \n\n131.108.5.0 và 131.108.2.0( xét trên interface mà nhận update vào) có cùng 1 \n\nmajor net k? \n\nNếu có thì apply thẳng mask của interface mà nó nhận update, trong trường hợp \n\nnày là apply /24). Nếu mạng được quảng bá tức 131.108 mà /32 thì router 2 sẽ \n\napply /32 và típ tục quảng bá cho các router khác là /32( điều này nó khác với \n\nIGRP nhé) \n\n131.108.5.0 và 137.99.0.0 có cùng major net k? \n\nNếu không xét tiếp, trong bảng định tuyến có subnet nào hay mạng con của \n\nmajor net này mà nó học từ các interface khác không? \n\nNếu không thì router 2 sẽ apply thẳng classful subnet mask là /16 luôn vì 137 là \n\nmạng lớp B. Chú ý ở đây nó sẽ apply host mask nếu như giữa 2 router là 1 \n\nunnumbered link và chứa thông tin về subnet ( tức là khi đó các bit trong phần \n\nportion của network được set). \n\nNgược lại thì router sẽ ignore thông tin định tuyến này đi \n\nLúc này show ip route thử xem  \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n54\n\n \nDo ripv2 phát triển từ ripv1 nên nó cũng còn thừa hưởng những đặc điểm của \n\nripv1 như : \n\n Là giao thức định tuyến theo vector khoảng cách \n\n Cost của nó là hop count . Ở đây cho mèo sử dụng từ cost thay cho metric \n\nnhé . Vì nếu lỡ có ai xem qua BGP rùi thì sẽ bị lộn 1 tí . Maximum hop \n\ncount vẫn là 15 \n\n Cũng sử dụng các cơ chế chống lặp vòng như ripv1 \n\n \n\nNhưng Ripv2 có các điểm cải tiến khác version 1 như \n\n Nhiều thông tin định tuyến hơn như có gửi subnet mask đi kèm với địa chỉ \n\nmạng trong thông tin mà nó update. \n\n Hỗ trợ VLSM ( Variable length subnet mask ) subnet mask khác nhau, \n\nCIDR ( Classless Interdomain Routing ) và route summarization \n\n Có cơ chế xác thực thông tin khi nhận được bằng plaintext hoặc mã hóa \n\nMD5 \n\n Gởi thông tin định tuyến theo địa chỉ multicast là 224.0.0.9 bằng với 01-\n\n00-5E-00-00-09 \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n55\n\n4.3. Giao thức định tuyến động OSPF \n \n\nTổng Quan Về OSPF \n\nOSPF là một giao thức định tuyến theo trạng thái đường liên kết được triển khai \n\ndựa trên các chuẩn mở. OSPF được mô tả trong nhiều chuẩn của IETF (Internet \n\nEngineering Task Force). Chuẩn mở ở đây có nghĩa là OSPF hoàn toàn mở với \n\ncông cộng, không có tính độc quyền. \n\nNếu so sánh với RIPv1 và RIPv2 là một giao thức nội thì IGP tốt hơn vì khả \n\nnăng mở rộng của nó. RIP chỉ giới hạn trong 15 hop, hội tụ chậm và đôi khi còn \n\nchọn đường có tốc độ chậm vì khi quyết định chọn đường nó không quan tâm \n\nđến các yếu quan trọng khác như băng thông chẳng hạn. OSPF khắc phục được \n\ncác nhược điểm của RIP vì nó là một giao thức định tuyến mạnh, có khả năng \n\nmởi rộng, phù hợp với các hệ thống mạng hiện đại. OSPF có thể cấu hình đơn \n\nvùng để sử dụng cho các mạng nhỏ. \n\n \n\nSo Sánh OSPF Với Giao Thức Định Tuyến Theo Distance Vector \n\nRouter định tuyến theo trạng thái đường liên kết có một cơ sở đầy đủ về cấu trúc \n\nhệ thống mạng. Chúng chỉ thực hiện trao đổi thông tin về trạng thái đường liên \n\nkết lúc khởi động và khi hệ thống mạng có sự thay đổi. Chúng không phát quảng \n\nbá bảng định tuyến theo định kỳ như các router định tuyến theo distance vector. \n\nDo đó, các router định tuyến theo trạng thái đường liên kết sử dụng ít băng thông \n\nhơn cho hoạt động duy trì bảng định tuyến. \n\nRIP phù hợp với các mạng nhỏ và đường tốt nhất đối với RIP là đường có số hop \n\nít nhất. OSPF thì phù hợp với mạng lớn, có khả năng mở rộng, đường đi tốt nhất \n\ncủa OSPF được xác định dựa trên tốc độ của đường truyền. RIP cũng như các \n\ngiao thức định tuyến theo distance vector khác đều sử dụng thuật toán chọn \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n56\n\nđường đơn giản. Còn thuật toán SPF thì phức tạp. Do đó, nếu router chạy theo \n\ngiao thức định tuyến theo distance vector thì sẽ ít tốn bộ nhớ và cần năng lực xử \n\nlý thấp hơn so với khi chạy OSPF. \n\n OSPF chọn đường dựa trên chi phí được tính từ tốc độ của đường truyền. \n\nĐường truyền có tốc độ càng cao thì chi phí OSPF tương ứng càng thấp. \n\n OSPF chọn đường tốt nhất từ cây SPF. \n\n OSPF bảo đảm không bị định tuyến lặp vòng. Còn giao thức định tuyến \n\ntheo distance vector vẫn có thể bị loop. \n\nNếu một kết nối không ổn định, chập chờn, việc phát liên tục các thông tin về \n\ntrạng thái của đường kiên kết này sẽ dẫn đén tình trạng các thông tin quảng cáo \n\nkhông đồng bộ làm cho kết quả chọn đường của các router bị đảo lộn. \n\n \n\nOSPF giải quyết được các vấn đề sau: \n\n Tốc độ hội tụ. \n\n Hỗ trợ VLSM (Variable Length Subnet Mask). \n\n Kích cỡ mạng. \n\n Chọn đường. \n\n Nhóm các thành viên. \n\n \n\nTrong một hệ thống mạng lớn, RIP phải mất ít nhất vài phút mới có thể hội tụ \n\nđược vì mỗi router chỉ trao đổi bảng định tuyến với các router láng giềng kết nối \n\ntrực tiếp với mình mà thôi. Còn đối với OSPF sau khi đã hội tụ vào lúc khởi \n\nđộng, khi có thay đổi thì việc hội tụ sẽ rất nhanh vì chỉ có thông tin về sự thay \n\nđổi được phát ra cho mọi router trong vùng. \n\nOSPF có hỗ trợ VLSM nên nó được xem là một giao thức định tuyến không theo \n\nlớp địa chỉ. RIPv1 không hỗ trợ VLSM, nhưng RIPv2 thì có. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n57\n\nĐối với RIP, một mạng đích cách xa hơn 15 router xem như không thể đến được \n\nvì RIP có số lượng hop giới hạn là 15. Điều này làm kích thước mạng của RIP bị \n\ngiới hạn trong phạm vi nhỏ. OSPF thì không giới hạn về kích thước mạng, nó \n\nhoàn toàn có thể phù hợp với mạng vừa và lớn. \n\nKhi nhận được từ router láng giềng các báo cáo về số lượng hop đến mạng đích, \n\nRIP sẽ cộng thêm 1 vào thông số hop này và dựa vào số lượng hop đó để chọn \n\nđường đến mạng đích. Đường nào có khoảng cách ngắn nhất hay nói cách khác \n\nlà có số lương hop ít nhất sẽ là đường tốt nhất đối với RIP. Nhận xét thấy thuật \n\ntoán chọn đường như vậy là rất đơn giản và không đòi hỏi nhiều bộ nhớ và năng \n\nlực xử lý của router. RIP không hề quan tâm đến băng thông đường truyền khi \n\nquyết định chọn đường. \n\nOSPF thì chọn đường dựa vào chi phí được tính từ băng thông của đường truyền. \n\nMọi OSPF đều có thông tin đầy đủ về cấu trúc của hệ thống mạng và dựa vào đó \n\nđể chọn đường đi tốt nhất. Do đó, thuật toán chọn đường này rất phức tạp, đòi \n\nhỏi nhiều bộ nhớ và năng lực xử lý của router cao hơn so với RIP. \n\nRIP sử dụng cấu trúc mạng dạng ngang hàng. Thông tin định tuyến được truyền \n\nlần lượt cho mọi router trong cùng một hệ thống RIP. Còn OSPF sử dụng khái \n\nniệm về phân vùng. Một mạng OSPF có thể chia các router thành nhiều nhóm. \n\nBằng cách này, OSPF có thể giới hạn lưu thông trong từng vùng. Thay đổi trong \n\nvùng này không ảnh hưởng đến hoạt động của các vùng khác. Cấu trúc phân lớp \n\nnhư vậy cho phép hệ thống mạng có khả năng mở rộng một cách hiệu quả. \n\n \n\nThuật Toán Chọn Đường Ngắn Nhất \n\nTheo thuật toán này, đường tốt nhất là đường có chi phí thấp nhất. Thuật toán \n\nđược sử dụng là Dijkstra, thuật toán này xem hệ thống mạng là mọt tập hợp các \n\nnodes được kết nối với nhau bằng kết nối point-to-point. Mỗi kết nối này có một \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n58\n\nchi phí. Mỗi nodes có một tên. Mỗi nodes có đầy đủ cơ sở dữ liệu về trạng thái \n\ncủa các đường liên kết. Do đó, chúng có đầy đủ thông tin về cấu trúc vật lý của \n\nhệ thống mạng. Tất cả các cơ sở dữ liệu này điều giống nhau cho mọi router \n\ntrong cùng một vùng. \n\n \n\nCác Loại Mạng OSPF \n\nCác OSPF phải thiết lập mối quan hệ láng giềng để trao đổi thông tin định tuyến. \n\nTrong mỗi mạng IP kết nối vào router. Nó đều cố gắng ít nhất là trở thành một \n\nláng giềng hoặc là một láng giềng thân mật với một router khác, router OSPF \n\nquyết định chọn router nào làm láng giềng thân mật là tùy thuộc vào từng loại \n\nmạng kết nối với nó. Có một số router có thể cố gắng trở thành láng giềng thân \n\nmật với mọi router láng giềng khác. Có một số router khác lại có thể chỉ cố gắng \n\ntrở thành láng giềng thân mật với một hoặc hai router láng giềng thôi. Một khi \n\nmối quan hệ láng giềng thân mật đã được thiết lập giữa hai láng giềng với nhau \n\nthì thông tin về trạng thái đường liên kết mới được trao đổi. \n\nGiao thức OSPF nhận biết các loại mạng sau: \n\n Mạng quảng bá đa truy cập, ví dụ mạng Ethernet. \n\n Mạng point-to-point. \n\n Mạng không quảng bá đa truy cập (NBMA \u2013 NonBroadcast Multil-\n\nAccess), ví dụ Frame Relay. \n\n Mạng Point-to-Multipoint có thể được nhà quản trị mạng cấu hình cho \n\nmột cổng của router. \n\nTrong mạng đa truy cập không thể biết được là có bao nhiêu router sẽ có thể \n\nđược kết nối vào mạng. \n\nTrong mạng point-to-point thì chỉ có hai router được kết nối với nhau. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n59\n\nTrong mạng quảng bá đa truy cập có rất nhiều router kết nối vào. Nếu mỗi router \n\nđều thiết lập mối quan hệ thân mật với mọi router khác và thực hiện trao đổi \n\nthông tin về trạng thái đường liên kết với mọi router láng giềng thì sẽ quá tải. \n\nNếu có 10 router thì sẽ cần 45 mối liên hệ thân mật, nếu có n router thì sẽ có \n\nn*(n-1)/2 mối quan hệ láng giềng cần thiết lập. \n\nGiải pháp cho vấn đề quá tải trên là bầu ra một router làm đại diện (DR- \n\nDesignated Router). Router này sẽ thiết lập mối quan hệ thân mật với mọi router \n\nkhác trong mạng quản bá. Mọi router còn lại sẽ chỉ gởi thông tin về trạng thái \n\nđường liên kết cho DR. Sau đó DR sẽ gởi các thông tin này cho mọi router khác \n\ntrong mạng bằng địa chỉ multicast 224.0.0.5 DR đóng vai trò như một người phát \n\nngôn chung. \n\nViệc bầu DR rất có hiệu quả nhưng cũng có một nhược điểm. DR trở thành một \n\ntâm điểm nhạy cảm đối với sự cố. Do đó, cần có một router thứ hai được bầu ra \n\nđể làm đại diện dự phòng (BDR \u2013 Backup Designated Router), router này sẽ đảm \n\ntrách vai trò của DR nếu DR bị sự cố. Để đảm bảo cả DR và BDR đều nhận \n\nđược thông tin về trạng thái đường liên kết từ mọi router khác trong cùng một \n\nmạng, địa chỉ multicast 224.0.0.6 cho các router đại diện. \n\nTrong mạng point-to-point chỉ có 2 router kết nối với nhau nên không cần bầu ra \n\nDR và DBR. Hai router này sẽ thiết lập mối quan hệ láng giềng thân mật với \n\nnhau. \n\nLoại Mạng Các Đặc Tính Bầu DR  \n\nBroadcast, Multi-Access Ethernet,ToKen Ring,FĐI  Có\n\nNonBroadcast Multi-Access Frame Relay,X25,SMDS  Có\n\nPoint-to-Point PPP,HDLC  Không\n\nPoint-to-Multipoint Được cấu hình bởi Administrator  Không\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n60\n\nGiao Thức OSPF Hello \n\nKhi router bắt đầu khởi động tiến trình định tuyến OSPF trên một cổng nào đó \n\nthì nó sẽ gởi một gói hello ra cổng đó và tiếp tục gởi hello theo định kỳ. Giao \n\nthức hello đưa ra các nguyên tắc quản lý việc trao đổi các gói OSPF hello. \n\nỞ lớp 3 của mô hình OSI, gói hello mang địa chỉ multicast 224.0.5.0 địa chỉ này \n\nchỉ đến tất cả các OSPF router. OSPF router sử dụng gói hello để thiết lập một \n\nquan hệ láng giềng thân mật mới và để xác định là router láng giềng có còn hoạt \n\nđộng hay không. Mặc định hello được gởi đi 10 giây một lần trong mạng quảng \n\nbá đa truy cập và mạng Point-to-Point. Trên cổng nói vào mạng NBMA, ví dụ \n\nnhư Frame Relay, chu trình mặc định của hello là 30 giây. \n\nTrong mạng đa truy cập, giao thức hello tiến hành bầu DR và BDR. \n\nMặc dù gói hello rất nhỏ nhưng nó cũng bao gồm cả phần header của gói OSPF. \n\nCấu trúc của phần header trong gói OSPF được thể hiện như hình sau. Nếu gói \n\nhello thì trường Type sẽ có giá trị là một. \n\n \n\nCác thông điệp Hello trong OSPF thực hiện ba chức năng chính: \n\n \n\n Tìm ra những router chạy OSPF khác trên cùng một mạng chung.  \n\n Kiểm tra sự tương thích trong các thông số cấu hình. \n\n Giám sát tình trạng của láng giềng để phản ứng nếu láng giềng bị fail. \n\n \n\nĐể tìm ra những router láng giềng, OSPF lắng nghe những thông điệp Hello \n\nđược gửi đến 224.0.0.5. Đây là địa chỉ multicast tượng trưng cho tất cả các \n\nrouter OSPF, trên bất cứ cổng nào đã bật OSPF. Các gói Hello sẽ lấy nguồn từ \n\nđịa chỉ primary trên cổng, nói cách khác, Hello không dùng địa chỉ phụ. (OSPF \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n61\n\nrouter sẽ quảng bá các địa chỉ phụ nhưng nó sẽ không gửi Hello từ những địa chỉ \n\nnày và không bao giờ hình thành mối quan hệ dùng địa chỉ phụ.  \n\n \n\nKhi hai router tìm ra nhau thông qua các gói Hello, các router thực hiện các phép \n\nkiểm tra các thông số như sau: \n\no Các router phải vượt qua tiến trình xác thực. \n\no Các router phải trong cùng địa chỉ mạng primary, phải có cùng \n\nsubnetmask. \n\no Phải trong cùng OSPF area. \n\no Phải có cùng kiểu vùng OSPF. \n\no Không có trùng RID. \n\no OSPF Hello và Deadtimer phải bằng nhau. \n\n \n\nNếu bất kỳ điều kiện nào nêu trên không thỏa mãn, hai router đơn giản sẽ không \n\nhình thành quan hệ láng giềng. Cũng lưu ý rằng một trong những điều kiện quan \n\ntrọng nhất mà hai bên không cần giống là chỉ số ID của tiến trình OSPF, như \n\nđược cấu hình trong câu lệnh router ospf process-id. Bạn cũng nên lưu ý rằng giá \n\ntrị MTU phải bằng nhau để các gói tin DD được gửi thành công giữa những láng \n\ngiềng nhưng thông số này không được kiểm tra trong tiến trình Hello.  \n\n \n\nChức năng thứ ba của Hello là để duy trì liên lạc giữa những láng giềng. Các \n\nláng giềng gửi Hello ở mỗi chu kỳ hello interval; nếu router không nhận được \n\nHello trong khoảng thời gian dead interval sẽ làm cho router tin rằng láng giềng \n\ncủa nó đã fail. Khoảng thời gian hello interval mặc định bằng 10 giây trên những \n\ncổng LAN và 30 giây trong những đường T1 hoặc đường thấp hơn T1. Thời gian \n\ndead interval mặc định bằng bốn lần thời gian hello interval. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n62\n\nBài 5:Thực hành về định tuyến \n \n\nThiết kế sơ đồ hệ thống mạng như trong hình \n\n \n \n \n\nYêu cầu \n\n Sử dụng giao thức định tuyến tĩnh cấu hình định tuyến giữa các LAN \n\n Sửu dụng giao thức IGRP với AS=100 cấu hình định tuyến giữa các LAN \n\nKết quả \n\n Các PC thuộc các LAN ping được đến nhau \n\n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n63\n\nBài 6: Cấu hình NAT trên Router \n \n\n6.1. Khái niệm chung về NAT \nHai mươi năm trước đây, IPv4 đưa ra một mô hình địa chỉ và cũng đáp ứng được \n\nmột trong khoảng thời gian, nhưng trong tương lai gần không đáp ứng đủ. Trong \n\nkhi đó, IPv6 được xem là một không gian địa chỉ không giới hạn, thì được triển \n\nkhai thử nghiệm chậm chạp và chắc chắn sẽ thay thế IPv4 trong tương lai gần. \n\nTrong thời gian chờ đợi sự thay đổi đó, một số kỹ thuật để có thể sử dụng để sử \n\ndụng có hiệu quả tài nguyên IP đó là: NAT (Network Address Translation); PAT \n\n( Port address translation ); VLSM ( Variable-Length Subnet Mask ). \n\n \n\nNat là chữ viết tắt của chữ Network Address Translate (Dịch địa chỉ IP). NAT có \n\n02 mục đích  \n\n Ẩn địa chỉ IP trong hệ thống mạng nội bộ trước khi gói tin đi ra Internet \n\ngiằm giảm thiểu nguy cơ tấn công trên mạng \n\n Tiết kiệm không gian địa chỉ IP \n\nCó 03 phương án NAT \n\n Nat tĩnh (Static Nat) \n\n Nat động (Dynamic Nat) \n\n Nat overload \u2013 PAT (Port Address Translate) \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n64\n\nHost A sử dụng 1 địa chỉ dành riêng 192.168.2.23, host B sử dụng 1 địa chỉ công \n\ncộng 192.31.7.130. Khi Host A gửi một packet đến host B, backet sẽ được \n\ntruyền qua router và router thực hiên qúa trình NAT. NAT sẽ thay thế địa chỉ \n\nnguồn private ip address (192.168.2.23) thành một public IP address \n\n(203.10.5.23) và forwards the packet., với địa chỉ này packet sẽ được định tuyến \n\ntrên internet tới destination address (192.31.7.130). Khi host B gửi gói tin hồi \n\nđáp tới host A, destination address của gói tin sẽ là 203.10.5.23. gói tin này đi \n\nqua router và sẽ được NAT thành địa chỉ 192.168.2.23 \n\n \n\nInside local address - Địa chỉ IP được gán cho một host của mạng trong. Đây là \n\nđịa chỉ được cấu hình như là một tham số của hệ điều hành trong máy tính hoặc \n\nđược gán một cách tự động thông qua các giao thức như DHCP. Địa chỉ này \n\nkhông phải là những địa chỉ IP hợp lệ được cấp bởi NIC (Network Information \n\nCenter) hoặc nhà cung cấp dịch vụ Internet. \n\n \n\nInside global address - Là một địa chỉ hợp lệ được cấp bởi NIC hoặc một nhà \n\ncung cấp dịch vụ trung gian. Địa chỉ này đại diện cho một hay nhiều địa chỉ IP \n\ninside local trong việc giao tiếp với mạng bên ngoài \n\n \n\nOutside local address - Là địa chỉ IP của một host thuộc mạng bên ngoài, các \n\nhost thuộc mạng bên trong sẽ nhìn host thuộc mạng bên ngoài thông qua địa chỉ \n\nnày. Outside local không nhất thiết phải là một địa chỉ hợp lệ trên mạng IP (có \n\nthể là địa chỉ private). \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n65\n\nOutside global address - Là địa chỉ IP được gán cho một host thuộc mạng ngoài \n\nbởi người sở hữu host đó. Địa chỉ này được gán bằng một địa chỉ IP hợp lệ trên \n\nmạng Internet. \n\n \n\nVới sơ đồ mạng (Hình 6.1) ta có NAT Table \n\n Inside local address 192.168.2.23  \n\n Inside global address 205.10.5.23  \n\n Outside globaladdress 197.31.7.130 \n\nCác gói tin bắt nguồn từ phần mạng \u201cinside\u201d sẽ có địa chỉ source IP là địa chỉ \n\nkiểu \u201cinside local\u201d và destination IP là \u201couside local\u201d khi nó còn ở trong phần \n\nmạng \u201cinside\u201d. Cũng gói tin đó, khi được chuyển ra mạng \u201coutside\u201d source IP \n\naddress sẽ được chuyển thành \"inside global address\" và địa destination IP của \n\ngói tin sẽ là \u201coutside global address\u201d. \n\nNgược lại, khi một gói tin bắt nguồn từ một mạng \u201coutside\u201d, khi nó còn đang ở \n\nmạng \u201coutside\u201d đó, địa chỉ source IP của nó sẽ là \"outside global address\", địa \n\nchỉ destination IP sẽ là \"inside global address\". Cũng gói tin đó khi được chuyển \n\nvào mạng \u201cinside\u201d, địa chỉ source sẽ là \"outside local address\" và địa chỉ \n\ndestination của gói tin sẽ là \"inside local address\". \n\n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n66\n\n6.2 Nat tĩnh \u2013 Static NAT \n\n \nNat tĩnh hay còn gọi là Static NAT là phương thức NAT một đổi một. Nghĩa là \n\nmột địa chỉ IP cố định trong LAN sẽ được ánh xạ ra một địa chỉ IP Public cố \n\nđịnh trước khi gói tin đi ra Internet. Phương pháp này không nhằm tiết kiệm địa \n\nchỉ IP mà chỉ có mục đích ánh xạ một IP trong LAN ra một IP Public để ẩn IP \n\nnguồn trước khi đi ra Internet làm giảm nguy cơ bị tấn công trên mạng. \n\nVí dụ: chuyển đổi một địa chỉ IP riêng 165.10.1.2 255.255.255.0 sang dải địa chỉ \n\nIP công cộng từ 169.10.1.50 dến 169.10.1.100. Dùng (Netsim) để cấu hình. Sau \n\nkhi cấu hình song ta dùng lệnh show ip nat translations sẽ có kế quả như sau. \n\n \n\n \n\n \n\n \n\nPhương án này có nhược điểm là nếu trong LAN có bao nhiêu IP muốn đi ra \n\nInternet thì ta phải có từng đó IP Public để ánh xạ. Do vậy phương án NAT tĩnh \n\nchỉ được dúng với các máy chủ thuộc vùng DMZ với nhiệm vụ Public các Server \n\nnày lên Internet. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n67\n\n6.3. Nat động \u2013 Dynamic NAT \nNat động (Dynamic NAT) là một giải pháp tiết kiệm IP Public cho NAT tĩnh. \n\nThay vì ánh xạ từng IP cố định trong LAN ra từng IP Public cố định. LAN động \n\ncho phép NAT cả dải IP trong LAN ra một dải IP Public cố định ra bên ngoài. \n\nVí dụ: \n\nHệ thống LAN trong công ty có 100 IP, nếu muốn 100 IP này truy cập Internet \n\nthì theo phương án NAT tĩnh công ty sẽ phải thuê từ ISP 100 IP Public. Điều này \n\nquá tốn kém, giải pháp NAT động cho phép chỉ cần thuê từ ISP 10 IP Public nếu \n\ntại cùng một thời điểm chỉ có 10 IP trong LAN truy cập Internet. Tuy nhiên giải \n\npháp NAT động vẫn có hạn chế vì nếu tại một thời điểm công ty cần 20 IP trong \n\nLAN truy cập Internet thì mười IP truy cập sau sẽ phải đợi đến khi nào có IP rỗi \n\n(các IP trước không chiếm dụng IP Public nữa) thì mới có thể truy cập Internet \n\nđược. Chính vì thế giải pháp NAT động ít khi được sử dụng. \n\n \n\n6.4. Nat Overload \u2013 PAT  \n\n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n68\n\nNat overload \u2013 PAT là giải pháp được dùng nhiều nhất đặc biệt là trong các \n\nModem ADSL, đây là giải pháp mang lại cả hai ưu điểm của NAT đó là: \n\n Ẩn địa chỉ IP trong hệ thống mạng nội bộ trước khi gói tin đi ra Internet \n\ngiằm giảm thiểu nguy cơ tấn công trên mạng \n\n Tiết kiệm không gian địa chỉ IP \n\nBản chất PAT là kết hợp IP Public và số hiệu cổng (port) trước khi đi ra Internet. \n\nLúc này mỗi IP trong LAN khi đi ra Internet sẽ được ánh xạ ra một IP Public kết \n\nhợp với số hiệu cổng  \n\n \n\nVí dụ: \n\n \nTrong ví dụ trên PAT sử dụng số port nguồn cùng với địa chỉ IP riêng bên trong \n\nđể phân biệt khi chuyển đổi. Router thực hiện chuyển đổi địa chỉ ip nguồn từ \n\n10.0.0.4 sang 179.9.8.80. port nguồn 1331. tương tự ip nguồn từ 10.0.0.2 sang \n\n179.9.8.80. port nguồn là 1555 \n\nGiải pháp PAT thực sự tiết kiệm không gian địa chỉ IP vì với mỗi IP Public có \n\nthể đại diện cho 65.536 IP trong LAN theo lý thuyết, tuy nhiên thực tế mỗi IP \n\nPublic đại diện cho khoảng 4000 IP trong LAN. Đây cũng là một con số địa chỉ \n\nIP khổng lồ thừa sức cung cấp cho bất kỳ một công ty nào lớn nhất thế giới. \n\n \n\n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n69\n\nBài 7:Thực hành Cấu hình NAT trên Router \n \nThực hành cấu hình NAT tĩnh, động, Overload \n\nCông ty du lịch ABC cần khoảng 100 địa chỉ IP riêng dịch sang một dãy địa chỉ \n\nIP thật để có thể định tuyến ra ISP. ABC đã thực hiện điều này bằng cách sử \n\ndụng NAT, dịch các địa chỉ riêng thành các địa chỉ công cộng được cấp bởi các \n\nnhà cung cấp dịch vụ ISP.  \n\nSử dụng phần mềm giả lập thiết kế mạng Boson thiết kế sơ đồ hệ thống \n\nmạng như hình vẽ. \n\n \n\n \n \n\nThực hiện \n\n1. Cấu hình các địa chỉ IP trên các router theo sơ đồ trên, kiểm tra các kết nối \n\ntrực tiếp bằng lệnh show cdp neighbor. Kiểm tra bằng cách ping giữa các \n\nworkstation và router NAT, giữa WebServer và router ISP1. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n70\n\nBài 8:Cấu hình chuyển mạch (Switching) \n\n8.1. Cấu hình Switch và VLAN \nSwitch (tiếng Anh), hay còn gọi là thiết bị chuyển mạch, là một thiết bị dùng để \n\nkết nối các đoạn mạng với nhau theo mô hình mạng hình sao (star). Theo mô \n\nhình này, switch đóng vai trò là thiết bị trung tâm, tất cá các máy tính đều được \n\nnối về đây. Trong mô hình tham chiếu OSI, switch hoạt động ở tầng liên kết dữ \n\nliệu, ngoài ra có một số loại switch cao cấp hoạt động ở tầng mạng. \n\n \n\n \nCấu hình các thông số cơ bản cho Catalys Switch với giao diện dòng lệnh CLI. \n\nCác tác vụ cần thực hiện bao gồm đặt tên cho switch, cấu hình các interface vlan, \n\ncấu hình để telnet vào switch\u2026.Dùng máy trạm kết nối với switch qua kết nối \n\nconsole, giao diện tương tác người dùng sử dụng trình HyperTerminal. Đây là \n\nmột công cụ đuợc MS Windows hỗ trợ. \n\n \n\nThực hiện \n\n \n\n Khởi động nguồn của switch.  \n\nTrên giao diện Hyper Terminal hiện ra các thông số khởi tạo trong quá trình khởi \n\nđộng Switch. \n\nWould you like to enter the initial configuration dialog? [yes/no]: no \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n71\n\nNgười dùng sẽ được hỏi nếu muốn vào các hộp thoại để cấu hình tự động, trả lời \n\nNO (vì mục đích của người dùng là muốn vào chế độ CLI (command line \n\ninterface). \n\n \n\n Vào enable mode xem cấu hình mặc định của switch \n\nSwitch>enable \n\nSwitch#show running-config \n\n Thiết lập các thông số cho switch như hostname, enable password, \n\nconsole password và virtual terminal password.  \n\nCác loại password sử dụng có phân biệt chữ thường và chữ hoa. Do đó người \n\ndùng cần phân biết các ký tự sử dụng chữ viết hoa khác với chữ viêt thường. Ví \n\ndụ Cisco khác với cisco. \n\n \n\nSwitch#config terminal \n\nSwitch(config)#hostname Vnpro \n\nVnpro(config)#enable password cisco \n\nVnpro(config)#enable secret class \n\nVnpro(config)#line console 0 \n\nVnpro(config-line)#password console \n\nVnpro(config-line)#login \n\nVnpro(config-line)#^Z \n\n \n\nSwitch hỗ trợ các Virtual Line dùng cho các phiên telnet. Cần cấu hình password \n\ncho các line này mới có thể telnet vào Switch (trình tự cấu hình hỗ trợ telnet sẽ \n\ntrình bày sau). Để xem thông tin về các Virtual Line trên Switch: dùng lệnh \n\n\u201cshow line\u201d. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n72\n\nVnpro#show line \n\n Cấu hình password cho các line vty \n\nVnpro#config terminal \n\nVnpro(config)#line vty 0 4 \n\nVnpro(config-line)#password cisco \n\nVnpro(config-line)#login \n\n \n\nCấu hình trên thiết bị Cisco, mỗi dòng lệnh do người dùng gõ vào. Sau khi nhấn \n\nphím \u201center\u201d cấu hình hệ thống sẽ lập tức thay đổi. Vì vậy, đối với các hệ thống \n\nmạng thật, trước khi thay đổi một thông số nào đó của thiết bị, cần phải sao lưu \n\nlại cấu hình ban đầu để có thể khôi phục lại khi cần thiết. \n\n \n\n Cấu hình Vlan. \n\nKiếm tra cấu hình Vlan mặc định trên Switch \n\nVnpro#show vlan \n\nMặc định trên Switch chỉ có Vlan 1 với tất cả các port đều nằm trong Vlan này, \n\nVlan 1002 dành riêng cho FDDI, Vlan 1003 dành riêng cho TOKEN-RING\u2026 \n\n Có hai cách tạo thêm Vlan \n\nCách 1:Thao tác trên Vlan database \n\nVnpro#vlan database \n\nVnpro(vlan)#vtp domain Chuyenviet \n\nVnpro(vlan)#vtp server \n\nVnpro(vlan)#vlan 10 name Admin \n\nVnpro(vlan)#vlan 20 name User \n\nCách 2: Tưong tác trực tiếp đến Vlan cần tạo ra \n\nVnpro(config)#interface vlan 10 \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n73\n\nVnpro(config-if)#exit \n\nVnpro(config)# \n\nVnpro(config)#interface vlan 20 \n\nVnpro(config-if)#exit \n\nVnpro(config)# \n\n Để gán các port vào các Vlan, thực hiện các bước sau: \n\nVí dụ ta cần gán các port fastethernet 2 vào Vlan 10, port fastetehnet 3 vào Vlan \n\n20 \n\nVnpro(config)#interface fastethernet0/2  \n\nVnpro(config-if-range)#switchport access vlan 10 \n\nVnpro(config-if-range)#exit \n\nVnpro(config)#interface fastethernet0/3 \n\nVnpro(config-if-range)#switchport access vlan 20 \n\nVnpro(config-if-range)#exit \n\nKiểm tra lại cấu hình Vlan \n\nVnpro#show vlan \n\nCấu hình IP cho interface Vlan: các interface Vlan được cấu hình IP chỉ mang \n\ntính chất luận lý. IP này phục vụ cho việc quản lý, địa chỉ IP luận lý này còn có \n\nthể dùng để telnet vào Switch từ xa và chạy các ứng dụng SNMP. \n\nVnpro#config terminal \n\nEnter configuration commands, one per line. End with CNTL/Z. \n\nVnpro(config)#interface vlan 10 \n\nVnpro(config-if)#ip address 10.0.0.1 255.255.255.0 \n\nVnpro(config-if)#no shutdown \n\n Lưu cấu hình vào NVRAM \n\nVnpro#copy running-config startup-config \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n74\n\nCần chú ý gán default-gateway cho switch bằng câu lệnh \n\nVnPro#ip default-gateway 10.0.0.100  \n\nĐịa chỉ 10.0.0.100 có thể dùng là địa chỉ của PC được dùng để telnet vào switch.  \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n75\n\nBài 9:Thực hành Cấu hình chuyển mạch và VLAN \n \nThực hiện định tuyến giữa các VLAN theo sơ đồ sau đây. \n\n \n\n \n \n \n \nCác bước thực hiện trên Switch2900 \n \n1. Vào chế độ privileged mode, cấu hình mật khẩu telnet cho switch \n \n2. Gán địa chỉ IP và default gateway cho VLAN1 cho tiện việc quản trị \n \n3. Thiết lập vtp transparent mode  \n \n4. Tạo mới VLAN2 trong cơ sở dữ liệu VLAN của switch. VLAN1 mặc định đã \ncó sẵn  \n \n5. Kích hoạt trunking trên cổng giao tiếp Fa0/1 \n \n6. Encapsulation trunking bằng sử dụng isl hay dot1q  \n \n7. Cho phép tất cả các VLAN được chuyển qua kết nối trunk:  \n \n8. Gán cổng Fa0/2 và VLAN 2. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n76\n\nCấu hình trên Router 2600 Series \n \n1. Vào privileged mode cấu hình mật khẩu telnet cho router  \n \n2. Chọn cổng fa0/0 để cấu hình trunk,  \n \n3. Kích hoạt trunking trên sub-interface Fa0/0.1 và encapsulation bằng isl  \n \n4. Cấu hình thông tin lớp 3 cho sub-interface Fa0/0.1  \n \n5. Kích hoạt trunking trên sub-interface Fa0/0.2 và encapsulation bằng isl \n \n6. Cấu hình thông tin Layer 3 cho sub-interface Fa0/0.2 \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n77\n\nBài 10: Thảo luận \nMột số chủ đề thảo luận \n\n Các nguy cơ tiềm tàng trên mạng \no Viruses, Worms, Trojan Horses. \no Denial of Service (DoS) và Brute Force Attack \n\n Các kỹ năng cần có của một kỹ sư trong vai trò HelpDesk \n Quy trình thiết kế và nâng cấp hệ thống mạng đã có \n Tìm hiểu các giao thức mã hoá trong mạng WLAN \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n78\n\nBài 11: Cấu hình các Web Server, DNS Server \n \n\n11.1. Dịch vụ phân giải tên miến \u2013 DNS Server \n\n11.1.1. Nguyên lý phân giải tên miền \nChức năng của DNS \n\nMỗi Website có một tên (là tên miền hay đường dẫn URL:Universal Resource \n\nLocator) và một địa chỉ IP. Địa chỉ IP gồm 4 nhóm số cách nhau bằng dấu chấm. \n\nKhi mở một trình duyệt Web và nhập tên website, trình duyệt sẽ đến thẳng \n\nwebsite mà không cần phải thông qua việc nhập địa chỉ IP của trang web. Quá \n\ntrình \"dịch\" tên miền thành địa chỉ IP để cho trình duyệt hiểu và truy cập được \n\nvào website là công việc của một DNS server. Các DNS trợ giúp qua lại với \n\nnhau để dịch địa chỉ \"IP\" thành \"tên\" và ngược lại. Người sử dụng chỉ cần nhớ \n\n\"tên\", không cần phải nhớ địa chỉ IP (địa chỉ IP là những con số rất khó nhớ). \n\n \n\n \n \n\nNguyên tắc làm việc của DNS \n\nMỗi nhà cung cấp dịch vụ vận hành và duy trì DNS server riêng của mình, gồm \n\ncác máy bên trong phần riêng của mỗi nhà cung cấp dịch vụ đó trong Internet. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n79\n\nTức là, nếu một trình duyệt tìm kiếm địa chỉ của một website thì DNS server \n\nphân giải tên website này phải là DNS server của chính tổ chức quản lý website \n\nđó chứ không phải là của một tổ chức (nhà cung cấp dịch vụ) nào khác. \n\n \n\nINTERNIC (Internet Network Information Center) chịu trách nhiệm theo dõi các \n\ntên miền và các DNS server tương ứng. INTERNIC là một tổ chức được thành \n\nlập bởi NFS (National Science Foundation), AT&T và Network Solution, chịu \n\ntrách nhiệm đăng ký các tên miền của Internet. INTERNIC chỉ có nhiệm vụ quản \n\nlý tất cả các DNS server trên Internet chứ không có nhiệm vụ phân giải tên cho \n\ntừng địa chỉ. \n\n \n\nDNS có khả năng tra vấn các DNS server khác để có được một cái tên đã được \n\nphân giải. DNS server của mỗi tên miền thường có hai việc khác biệt. Thứ nhất, \n\nchịu trách nhiệm phân giải tên từ các máy bên trong miền về các địa chỉ Internet, \n\ncả bên trong lẫn bên ngoài miền nó quản lý. Thứ hai, chúng trả lời các DNS \n\nserver bên ngoài đang cố gắng phân giải những cái tên bên trong miền nó quản \n\nlý. - DNS server có khả năng ghi nhớ lại những tên vừa phân giải. Để dùng cho \n\nnhững yêu cầu phân giải lần sau. Số lượng những tên phân giải được lưu lại tùy \n\nthuộc vào quy mô của từng DNS. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n80\n\n \n \n\nCách sử dụng DNS \n\nDo các DNS có tốc độ biên dịch khác nhau, có thể nhanh hoặc có thể chậm, do \n\nđó người sử dụng có thể chọn DNS server để sử dụng cho riêng mình. Có các \n\ncách chọn lựa cho người sử dụng. Sử dụng DNS mặc định của nhà cung cấp dịch \n\nvụ (internet), trường hợp này người sử dụng không cần điền địa chỉ DNS vào \n\nnetwork connections trong máy của mình. Sử dụng DNS server khác (miễn phí \n\nhoặc trả phí) thì phải điền địa chỉ DNS server vào network connections. Địa chỉ \n\nDNS server cũng là 4 nhóm số cách nhau bởi các dấu chấm \n\n \n\n11.1.2. Xây dựng máy chủ phân giải tên miền cho mạng doanh nghiệp \n \n\nMáy chủ phân giải tên miền DNS là gì ? \n\nMỗi máy tính, thiết bị mạng tham gia vào mạng Internet đều \"nói chuyện \" với \n\nnhau bằng địa chỉ IP (Internet Protocol). Để thuận tiện cho việc sử dụng và dễ \n\nnhớ ta dùng tên (Domain name) để xác định thiết bị đó. Hệ thống tên miễn DNS \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n81\n\n(Domain Name System) được sử dụng để ánh xạ tên miễn thành địa chỉ IP. Vì \n\nvậy, khi muốn liên hệ tới các máy, chúng chỉ cần sử dụng chuỗi ký tự dễ nhớ \n\n(domain name) như: www.microsoft.com, www.ibm.com..., thay vì sử dụng địa \n\nchỉ IP là một dãy số dài khó nhớ. \n\nMáy chủ phân giải tên miền (DNS server) là những máy chủ được cài đặt, và \n\ncung cấp dịch vụ phân giải tên miền DNS. Máy chủ DNS được phân ra thành 2 \n\nloại như sau: \n\n \n\n- Primary DNS Server (PDS) \n\nPrimary DNS Server (PDS) là nguồn xác thực thông tin chính thức cho các tên \n\nmiền mà nó được phép  quản lý. Thông tin về một tên miền do PDS được phân \n\ncấp quản lý thì được lưu trữ tại đây và sau đó có thể được chuyển sang các \n\nSecondary DNS Server (SDS). Các tên miền do PDS quản lý thì được tạo, và sửa \n\nđổi tại PDS và sau đó được cập nhật  đến các SDS. \n\n- Secondare DNS Server(SDS). \n\nDNS được khuyến nghị nên sử dụng ít nhất là hai DNS server để lưu địa chỉ cho \n\nmỗi một vùng (zone). PDS quản lý các vùng và SDS được sử dụng để lưu trữ dự \n\nphòng cho vùng, và cho cả PDS. SDS không nhất thiết phải có những khuyến \n\nkhích hãy sử dụng. SDS được phép quản lý tên miền nhưng dữ liệu về tên miền \n\nkhông phải được tạo ra từ SDS  mà được lấy về từ PDS. \n\nSDS có thể cung cấp các  hoạt động ở chế độ không tải trên mạng. Khi lượng \n\ntruy vấn vùng tăng cao, PDS sẽ chuyển bớt tải sang SDS (quá trình này còn được \n\ngọi là cân bằng tải), hoặc khi PDS bị sự cố thì SDS hoạt động thay thế cho đến \n\nkhi PDS hoạt động trở lại, SDS thường được sử dụng tại nơi gần với các máy \n\ntrạm (client) để có thể phục vụ cho các truy vấn một cách dễ dàng. Tuy nhiên, \n\ncài đặt SDS trên cùng một subnet hoặc dùng một kết nối với PDS là không nên. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n82\n\nĐiều đó sẽ là một giải pháp tốt để dự phòng cho PDS, vì khi kết nối đến PDS bị \n\nhỏng thì cũng không ảnh hưởng gì tới đến SDS. \n\nNgoài ra PDS luôn duy trì một lượng lớn dữ liệu và thường xuyên thay đổi hoặc \n\nthêm các địa chỉ mới  vào các vùng. Do đó, DNS server sử dụng một cơ chế cho \n\nphép chuyển các thông tin từ PDS sang SDS và lưu giữ trên đĩa. Khi cần phục \n\nhồi dữ liệu về các vùng, chúng ta có thể sử dụng giải pháp  lấy toàn bộ hoặc chỉ \n\nlấy phần thay đổi. \n\n \n\nThay đổi DNS. \n\nThông thường khi kết nối Internet, tất cả mọi dấu hiệu cho thấy cuộc kết nối \n\nsuôn sẻ. Thế nhưng, sau khi đã gõ địa chỉ website vào trình duyệt rồi mà đợi mãi \n\nvẫn chẳng thấy website hiện ra. \n\nThanh Status (màu xanh lục) trên IE cũng không thấy xuất hiện. Kiểm tra lại mọi \n\nthứ thì vẫn thấy bình thường... Mãi một lúc lâu sau mới thấy trình duyệt thông  \n\nbáo Connecting to 64.128.xxx.xxx rồi sau đó vào website bình thường. Nhưng \n\nmỗi lần click vào link nào trên trang thì vẫn lặp lại tình trạng cũ. \n\nDNS, Domain Name Server, hay còn gọi là máy chủ tên miền - là một trong \n\nnhững khâu vô cùng quan trọng trong tiến trình duyệt web của bạn. \n\nMỗi máy tính trên Internet được đánh dấu bằng một địa chỉ IP, là một mớ số đó, \n\nnhất là trong tương lai địa chỉ IP sẽ dài gấp bốn lần địa chỉ hiện nay. \n\nDNS chính là giải pháp. Thay vì bắt con người nhớ số, mỗi số IP sẽ được đổi \n\nthành chữ và DNS có nhiệm vụ đổi chữ thành số tương ứng khi có yêu cầu. \n\nĐịa chỉ của DNS thường được cung cấp tự động trực tiếp mỗi khi bạn thiết lập \n\nkết nối với ISP (nhà cung cấp dịch vụ Internet). Ở Việt Nam, mỗi ISP thường có \n\nhai hoặc nhiều DNS để phục vụ số lượng khách hàng của mình. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n83\n\nThế nhưng thường cũng không đủ dùng. Vì vậy không ai cấm việc xài dịch vụ \n\ncủa ISP này nhưng thiết lập DNS của ISP khác, hoặc một DNS nào đó tốt hơn \n\ntrong các giờ cao điểm. \n\nThao tác thay DNS cũng rất dễ dàng. Bạn mở cửa sổ Network/properties để vào \n\nInternet Protocol(TCP/IP) Properties. Nếu bạn dùng mặc định DNS do ISP cung \n\ncấp thì chọn \"Obtain DNS server address automatically\" \n\nNếu muốn dùng DNS theo ý mình thì chọn dòng \" User the following DNS \n\nserver addresses\", sau đó điền địa chỉ IP của DNS vào 2 dòng bên dưới. Preferrer \n\nDNS server là địa chỉ được trình duyệt tìm đến đầu tiên. Alternate DNS server \n\ndành cho server dự phòng, trong trường hợp server đầu tiên quá bận. <Network \n\n> chính là tên của kết nối Internet của bạn. \n\nCấu hình cho dịch vụ DNS. \n\nĐể tạo một Zone mới kích chuột vào Action chọn NewZone như hình trên. \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n84\n\n \n Sau đó chọn Next. \n\n \nChọn Standard Primary nếu bạn muốn thiết lập một zone mới, còn nếu bạn đã có \n\nmột zone nào đó rồi thì bạn có thể chọn Secondary để tạo một bản sao lưu. \n\nKích chuột chọn Next để tiếp tục. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n85\n\n \nNhập vào nội dung của Zone bạn muốn thiết lập rồi chọn Next. \n\n \nChọn Next. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n86\n\n \nSau đó chọn  Finish. \n\n \nChuột phải vào phần mà bạn vừa tạo và chọn NewHost để tạo ra một Host mới. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n87\n\n \nChọn tuỳ ý một cái tên và chọn địa chỉ IP của Host. \n\nNhấn Add Host -> Ok  -> Done. \n\n \nTiếp tục thiết lập Alias, đây là một định danh của Site mà bạn cần thiết lập. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n88\n\n \nChọn một tên để thay thế cho định danh mạng. Kế tiếp chọn Browse\u2026 \n\nTìm đúng Zone mà bạn đã tạo Host và chọn Host đó -  nhấn OK. \n\n \nLúc này bạn đã có thông tin đầy đủ về một tên miền mà mình sẽ tạo ra. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n89\n\nNhấn OK để tiếp tục. \n\nĐể có thể thử nghiệm việc phận giải một tên miền với DNS ta hãy sử dụng một \n\ndịch vụ ISS để kiểm tra. \n\n \n\n11.2. Dịch vụ Web Server \n\n11.2.1. Giao thức HTTP và HTTPS \nGiao thức HTTP \n\nHTTP (HyperText Transfer Protocol), tiếng Việt gọi là Giao Thức Truyền Siêu \n\nVăn Bản. HTTP là một giao thức chuẩn trực thuộc lớp ứng dụng trong mô hình 7 \n\nlớp OSI và được dùng để liên hệ thông tin giữa máy cung cấp dịch vụ (Web \n\nServer) và máy dùng dịch vụ (Client). HTTP tương thích với nhiều định dạng \n\nthông tin, media và hồ sơ. \n\nGiao thức HTTPS \n\nHTTPS( Secure HTTP), là một sự kết hợp giữa giao thức HTTP và giao thức bảo \n\nmật SSL hay TLS cho phép trao đổi thông tin một cách bảo mật trên Internet. \n\nGiao thức HTTPS thường được dùng trong các giao dịch cần sự bảo mật như e-\n\ncommerce, e-banking ... trên Internet. \n\n11.2.2. Triển khai Website doanh nghiệp trên Server \nĐể triển khai một website doanh nghiệp trên Server ta phải cài dịch vụ Web \n\nServer lên máy chủ đó. Tuỳ thuộc vào Hệ điều hành và ngôn ngữ lập trình Web \n\nmà bạn sẽ quyết định cài lên Server dịch vụ Web Server IIS cho Window hay \n\nApache cho Linux. Sau đây là các bước triển khai dịch vụ Webserver IIS trên \n\nmáy chủ Window. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n90\n\nCác bước cài đặt ISS khá dễ dàng các bạn có thể cài các mục như với cài DNS, \n\nchỉ khác là trong hộp thoại chọn các bạn chọn: \n\n \n \nNhư trên hình hoặc có thể tuỳ chọn trong mục Details. \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n91\n\n \n \n \nXuất hiện bảng sau, chúng ta chọn Next. \n \n\n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n92\n\nđặt tên mô tả cho Website  này và chọn Next. \n \n\n \n \n \n \n \nChọn các thiết lập: \n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n93\n\nNhập địa chỉ IP của máy chủ vào mục IP nếu như bạn muốn chỉ định các máy \n\nkhác địa chỉ web được chỉ tới là địa chỉ nào. \n\nChọn cổng truy cập trên máy chủ, thông thường chúng ta để cổng 80 nhưng tuỳ \n\nvào người quản trị mạng mà chúng ta có thể chọn cổng bất kỳ để tránh sự dòm \n\nngó từ bên ngoài. \n\n \n\nChọn Next. \n\n \n \nTrong mục này bạn hãy chọn đường dẫn lưu trang web của bạn và chọn Next. \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n94\n\n \n \nThiết lập các chế độ ghi đọc của người dùng trên Site này và chọn Next. \n\n \n \nClick vào Finish để kết thúc chọn. \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n95\n\n \n \nClick chuột phải vào trang web mà bạn vừa tạo và cấu hình các thuộc tính cho \nchúng. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n96\n\n \n \nTrên trang tuỳ chọn này bạn có thể cấu hình lại các thông số mà trước đó bạn đã \ntạo ra. \n \n  \n\n \n \n \n \nĐể thiết lập trang chỉ định khi trình duyệt web của máy Client yêu cầu sẽ được \n\nmở ra. Đầu tiên bạn chọn Add để thêm mới tên trang và chọn ,ví dụ tên trang chủ \n\ncủa tôi là index.com thì tôi gõ vào là index.com và Add vào \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n97\n\n \nNhấn Apply rồi OK. \n\nKhi đó trên trình duyệt của máy khách bạn chỉ cần gõ thuongdao.com mà không \n\ncần phải gõ địa chỉ IP của trang web vào. \n\nNếu bạn không để cổng mặc định là 80 thì ngay sau địa chỉ bạn gõ: và tên cổng \n\nvào. \n\nVí dụ nếu tôi để cổng là 8080 thì tôi gõ trong trình duyệt là \n\nhttp://thuongdao.com:8080 \n\n \n\n2. Cấu hình dịch vụ IIS \n\nĐể cấu hình dịch vụ web cho IIS bạn vào My Computer > Control Panel > \nAdministrative Tool > Internet Services Manager. Sau đó làm như hình minh \nhoạ. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n98\n\n \n \nSau khi nhấp vào properties  sẽ hiện lên bảng website. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n99\n\n \n \nDescription: Mô tả tên của Website. \n\nIp Address: Phần này cho phép chúng ta gắn địa chỉ IP cho Website. \n\nTCP Port: Cổng cho phép kết nối vào Website mặc định là cổng 80 \n\nUnlimited: Cho phép kết nối không giới hạn thời gian. \n\nLimited To:  Giới hạn thời gian kết nối với Website. \n\n \n\nThẻ tiếp theo là Home Directory. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n100\n\n \n \n\nDirectory Browsing: Chức năng cho phép hiển thị Browser khi không có trang \n\nchủ mặc định. \n\nA redirection a URl: Là tính năng cho phép ta chuyển tiếp đến một trang nào đó \n\n(dùng bằng URL) \n\nThẻ tiếp theo là Document. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n101\n\n \n \n\nPhần này cho phép ta thêm chỉ mục Index cho website của mình. Tức là nếu bạn \n\nmuốn website của mình mặc định là chạy files index.php. Thì bạn vào phần add \n\nsau đó đánh vào index.php. Rồi dùng dấu mũi tên bên trái đưa index.php lên trên \n\nđầu tiên như hình minh hoạ. Nhớ rằng chỉ mục document này nó sẽ tự tìm từ trên \n\nxuống dưới(sau index.php không có nó sẽ tự tìm Default.htm\u2026) \n\n \n\nThẻ tiếp theo là Directory Security. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n102\n\n \n \n \nTrong phần này bạn nhớ để ý mặc định là cho phép chế độ truy cập nặc danh tức \n\nlà ai cũng có thể vào website của mình. Ta tick vào như hình minh hoạ trên. Còn \n\nnếu muốn khi truy cập vào site của mình phải có Username và password (tức là \n\nUer trong computer) thì bỏ tick ở phần  Anonymous access thay bằng Basic \n\nauthentication .Khi đó bất cứ ai truy cập vào site của bạn cũng cần phải có \n\nusername và password trên server của bạn. \n\n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n103\n\nBài 12: Thực hành cấu hình các dịch vụ mạng cơ bản \n \n\n Cấu hình Active Directory (AD) \n\n Cấu hình IIS \n\n Cấu hình DNS \n\n Cấu hình DHCP \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n104\n\nBài 13. Xây dựng một Mail Server \n \n\n13.1. Giao thức SMTP, POP3, IMAP \nSMTP (tiếng Anh: Simple Mail Transfer Protocol - giao thức truyền tải thư tín \n\nđơn giản) là một chuẩn truyền tải thư điện tử qua mạng Internet. SMTP được \n\nđịnh nghĩa trong bản RFC 821 (STD 10) và được chỉnh lý bằng bản RFC 1123 \n\n(STD 3). Giao thức hiện dùng được là ESMTP (extended SMTP - SMTP mở \n\nrộng), được định nghĩa trong bản RFC 2821. \n\n \n\nLịch sử \n\nSMTP là một giao thức dùng nền văn bản và tương đối đơn giản. Trước khi một \n\nthông điệp được gửi, người ta có thể định vị một hoặc nhiều địa chỉ nhận cho \n\nthông điệp - những địa chỉ này thường được kiểm tra về sự tồn tại trung thực của \n\nchúng) . Việc kiểm thử một trình chủ SMTP là một việc tương đối dễ dàng, dùng \n\nchương trình ứng dụng \"telnet\" (xem dưới đây). \n\n \n\nSMTP dùng cổng 25 của giao thức TCP. Để xác định trình chủ SMTP của một \n\ntên miền nào đấy (domain name), người ta dùng một mẫu tin MX (Mail \n\neXchange - Trao đổi thư) của DNS (Domain Name System - Hệ thống tên miền). \n\n \n\nSMTP bắt đầu được sử dụng rộng rãi vào những năm đầu thập niên kỷ 1980. Tại \n\nthời điểm đó, SMTP chỉ là một phần mềm bổ sung của bộ trình ứng dụng đồng \n\ngiao thức UUCP (Unix to Unix CoPy - Sao chép từ máy Unix sang máy Unix) \n\nnhưng tiện lợi hơn trong việc truyền tải thư điện tử giữa các máy vi tính - những \n\nmáy này thỉnh thoảng mới lại được kết nối với nhau một lần, để truyền thông dữ \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n105\n\nliệu. Thực ra, SMTP sẽ làm việc tốt hơn nếu các máy gửi và máy nhận được kết \n\nnối liên tục. \n\n \n\nSendmail là một trong những phần mềm đặc vụ truyền tải thư tín (mail transfer \n\nagent) đầu tiên (nếu không phải là cái trước tiên nhất) thực thi giao thức SMTP. \n\nTính đến năm 2001, người ta đã thấy có ít nhất là 50 chương trình ứng dụng thực \n\nthi giao thức SMTP, bao gồm cả trình khách (phần mềm dùng để gửi thông điệp) \n\nvà trình chủ (phần mềm dùng để nhận thông điệp). Một số trình chủ SMTP nổi \n\ntiếng có thể liệt kê bao gồm: exim, Postfix, qmail, và Microsoft Exchange \n\nServer. \n\n \n\nDo thiết kế của giao thức dùng dạng thức văn bản thường của bộ mã ASCII, khi \n\nbản thiết kế được khởi công, chức năng của SMTP giải quyết tập tin có dạng \n\nthức nhi phân rất kém. Những tiêu chuẩn như MIME đã được xây dựng để mã \n\nhóa những tập tin nhị phân, cho phép chúng được truyền tải dùng giao thức \n\nSMTP. Hiện nay, phần lớn các trình chủ SMTP hỗ trở phần mở rộng \n\n8BITMIME của SMTP, cho phép các tập tin ở dạng thức nhị phân được truyền \n\nthông qua đường dây, dễ như việc truyền tải văn bản thường vậy. \n\n \n\nSMTP là một giao thức \"đẩy\" thông điệp và không cho phép ai \"rút\" thông điệp \n\ntừ máy chủ ở xa, theo yêu cầu của mình, một cách tùy tiện. Để lấy được thông \n\nđiệp, một trình khách thư điện tử phải dùng POP3 (Post Office Protocol - Giao \n\nthức bưu điện tử) hoặc IMAP (Internet Message Access Protocol - Giao thức \n\ntruy cập thông điệp Internet). Chúng ta còn có thể dùng phần mềm ETRN \n\n(Extended Turn) để khởi động một trình chủ SMTP phân phát thông điệp mà nó \n\nđang lưu trữ. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n106\n\n \n\nVí dụ về truyền thông của SMTP \n\nSau khi kết nối giữa người gửi (trình khách) và người nhận (trình chủ) đã được \n\nthiết lập, những việc làm sau đây là những việc hoàn toàn hợp lệ, đối với một \n\nphiên giao dịch dùng giao thức SMTP. Trong cuộc hội thoại dưới đây, những gì \n\ntrình khách gửi được đánh dấu bằng chữ C: đứng trước, còn những gì trình chủ \n\ngửi được đánh dấu bằng S:. Các hệ thống máy tính đều có thể thiết lập một kết \n\nnối, bằng cách dùng những dòng lệnh của phần mềm telnet, trên một máy khách. \n\nChẳng hạn: \n\n \n\ntelnet www.example.com 25 \n\nkhởi động một kết nối SMTP từ máy gửi thông điệp đến máy chủ site \n\nwww.example.com. \n\n \n\n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n107\n\n \n\nBảo vệ trong SMTP và thư rác \n\nMột trong những giới hạn của bản thiết kế SMTP gốc là việc nó không cung cấp \n\nmột phương tiện nào để chứng thực (authentication) người gửi khi chúng ta cần. \n\nChính vì thế mà phần mở rộng SMTP-AUTH đã được thiết kế và bổ sung. \n\n \n\nMặc dầu đã có phần chứng thực người gửi bổ sung, nhũng lạm thư điện tử vẫn \n\ncòn là một vấn đề lớn, khó giải quyết. Việc sửa đổi giao thức SMTP một cách \n\ntriệt để, hoặc thay thế giao thức toàn bằng một cái khác, là một việc không dễ gì \n\nthực hiện được, vì sự thay đổi sẽ gây ảnh hưởng đến mạng lưới truyền thông của \n\nnhững máy chủ SMTP khổng lồ, đã và đang được dùng. Internet Mail 2000 là \n\nmột trong những bản dự thảo đề cập đến vấn đề này. \n\n \n\nVì lý do trên, một số đề nghị về việc dùng các giao thức bên lề để hỗ trợ hoạt \n\nđộng của SMTP đã được công bố. Nhóm nghiên cứu chống thư nhũng lạm (Anti-\n\nSpam Research Group) của Lực lượng chuyên trách nghiên cứu liên mạng \n\n(Internet Research Task Force - viết tắt là IRTF) hiện đang làm việc trên một số \n\ndự thảo về chứng thực thư điện tử (E-mail authentication) và một số những dự \n\nthảo khác liên quan đến việc cung cấp một cơ chế chứng thực nguồn gửi với tính \n\nnăng: tuy đơn giản song linh hoạt, tuy ở mức độ hạng nhẹ song có khả năng \n\nkhuếch trương. Những hoạt động gần đây của Lực lượng chuyên trách nghiên \n\ncứu liên mạng (Internet Engineering Task Force - viết tắt là IETF), bao gồm \n\nMARID (2004) (cộng với sự tiến tới hai cuộc thử nghiệm được IETF chấp thuận \n\ntrong năm 2005 sau đó), và DKIM (DomainKeys - tạm dịch là \"Chìa khóa tại \n\nvùng\") trong năm 2006. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n108\n\n \n\nPOP3 \n\nPost Office Protocol phiên bản 3 (POP3) là một giao thức tầng ứng dụng, dùng \n\nđể lấy thư điện tử từ server mail, thông qua kết nối TCP/IP. POP3 và IMAP4 \n\n(Internet Message Access Protocol) là 2 chuẩn giao thức Internet thông dụng \n\nnhất dùng để lấy nhận email. Hầu như các máy tính hiện nay đều hỗ trợ cả 2 giao \n\nthức \n\nTrước POP3, đã có 2 phiên bản là POP1 và POP2. Khi POP3 ra đời, đã ngay lập \n\ntức thay thế hoàn toàn các phiên bản cũ. Vì vậy, ngày nay, nhắc đến POP thì \n\nthường là ám chỉ POP3. \n\n \n\nThiết kế của POP3 hỗ trợ chức năng cho người dùng có kết nối internet không \n\nthường trực (như kết nối dial-up), cho phép người dùng kết nối với server, tải \n\nmail về, sau đó có thể xem, thao tác với mail offline. Mặc dù trong giao thức hỗ \n\ntrợ leave mail on server (để nguyên mail trên server), nhưng hầu hết người dùng \n\nđều thực hiện mặc định, tức là: kết nối, tải mail về, xóa mail trên server rồi ngắt \n\nkết nối. \n\nIMAP \n\nInternet Message Access Protocol (IMAP) cung cấp lệnh để phần mềm thư điện \n\ntử trên máy khách và máy chủ dùng trong trao đổi thông tin. Đó là phương pháp \n\nđể người dùng cuối truy cập thông điệp thư điện tử hay bảng tin điện tử từ máy \n\nchủ về thư trong môi trường cộng tác. Nó cho phép chương trình thư điện tử \n\ndùng cho máy khách - như Netscape Mail, Eudora của Qualcomm, Lotus Notes \n\nhay Microsoft Outlook - lấy thông điệp từ xa trên máy chủ một cách dễ dàng như \n\ntrên đĩa cứng cục bộ. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n109\n\nChuẩn về thư điện tử được ủng hộ  \n\nIMAP là cơ chế cho phép lấy thông tin về thư điện tử của bạn, hay chính các \n\nthông điệp từ mail server của môi trường cộng tác. \n\nGiao thức thư điện tử này cho phép người dùng kết nối bằng đường điện thoại \n\nvào máy chủ Internet từ xa, xem xét phần tiêu đề và người gửi của thư điện tử \n\ntrước khi tải những thư này về máy chủ của mình. \n\nVới IMAP người dùng có thể truy cập các thông điệp như chúng được lưu trữ \n\ncục bộ trong khi thực tế lại là thao tác trên máy chủ cách xa hàng ki lô mét. \n\nVới khả năng truy cập từ xa này, IMAP dễ được người dùng cộng tác chấp nhận \n\nvì họ coi trọng khả năng làm việc lưu động. \n\nKhả năng truy cập là chìa khóa \n\nNgười dùng thường xuyên đi lại muốn lưu thông điệp của họ trên máy chủ để \n\nđến bất kỳ đầu cuối nào cũng có thể đọc và làm việc được. IMAP cho phép thực \n\nhiện điều đó. \n\nIMAP khác với giao thức truy cập thư điện tử Post Office Protocol (POP). POP \n\nlưu trữ toàn bộ thông điệp trên máy chủ. Người dùng kết nối bằng đường điện \n\nthoại vào máy chủ và POP sẽ đưa các thông điệp vào in-box của người dùng, sau \n\nđó xóa thư trên máy chủ. Hai giao thức này đã được dùng từ hơn 10 năm nay. \n\nTheo một nhà phân tích thì khác biệt chính giữa POP (phiên bản hiện hành 3.0) \n\nvà IMAP (phiên bản hiện hành 4.0) là POP3 cho người dùng ít quyền điều khiển \n\nhơn trên thông điệp. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n110\n\n \n \n\nIMAP mang lại cho người dùng một phương thức lưu trữ thư điện tử thông minh \n\nvà nhờ đó có thể xem những thông điệp này trước khi tải chúng xuống, bao gồm \n\ncả việc có tải xuống những file đính kèm thư hay không. Người dùng cũng có thể \n\náp dụng các bộ lọc và cơ chế tìm kiếm trên máy chủ và có thể lấy thư từ bất kỳ \n\nmáy nào, bất cứ ở đâu. \n\nTuy nhiên, các nhà sản xuất đã thông dịch các đặc tả mơ hồ của IMAP 4 theo \n\nnhiều cách khác nhau và điều đó dẫn đến sự không nhất quán trong chương trình \n\nthư dành cho máy khách và máy chủ, chẳng hạn người dùng có thể sẽ không đọc \n\nđược file đính kèm trong Netscape Mail bằng chương trình Eudora Pro. Tuy \n\nnhiên, theo dự đoán những vấn đề này sẽ nhanh chóng được giải quyết trong thời \n\ngian tới. \n\n \n\n13.2. Triển khai Mail Server cho doanh nghiệp \n \n\nCó nhiều Mail Server để triển khai một hệ thống Mail cho doanh nghiệp. Trong \n\nphần này tôi xin giới thiệu Mdaemon là một mail Server dễ triển khai và có đầy \n\nđủ các tính năng thông dụng phục vụ cho một doanh nghiệp. \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n111\n\nCài đặt và cấu hình Mdaemon  \n\n \n\n \n \nSetup > Primary Domain \n\nPrimary domain, FQDN domain, machine name: tên domain của bạn \n\nPrimary Domain IP: IP máy bạn \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n112\n\n \n \nQua tab DNS : chỉnh về IP mà ISP bạn đang dùng (ở đây tôi dùng Viettel) \n\n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n113\n\n \n \nĐể tạo mailbox với password đơn giản, vào Menu Setup > Miscellaneous \n\nOptions > Tab Misc > bỏ chọn \"Require strong passwords\" \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n114\n\nTạo Account \n\n \n\n \n \n \n \n\n \n\n \n\n \n\n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n115\n\nBài 14. Thực hành Xây dựng một Mail Server \n \n\nChuẩn bị \n\n Một Server đã cài dịch vụ DNS, IIS \n\n Mail Server Mdeamon hoặc Exchange \n\nYêu cầu: \n\n Cấu hình mail Server và tạo account cho các thành viên trong lớp sử dụng \n\nđể gửi và nhận mail \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n116\n\nBài 15: Thực hành Proxy và Firewall \n \n\n15.1. Nguyên lý hoạt động của Proxy \nKhái niệm Proxy \n\nProxy là một Internet server làm nhiệm vụ chuyển tiếp thông tin và kiểm soát tạo \n\nsự an toàn cho việc truy cập Internet của các máy khách, còn gọi là khách hàng \n\nsử dụng dịch vụ internet. Trạm cài đặt proxy gọi là proxy server. Proxy hay trạm \n\ncài đặt proxy có địa chỉ IP và một cổng truy cập cố định. Ví dụ: \n\n123.234.111.222:80 Địa chỉ IP của proxy trong ví dụ là 123.234.111.222 và cổng \n\ntruy cập là 80. \n\n \n\nChức năng của proxy \n\nĐối với một só hãng, công ty người ta sử dụng proxy vào việc: \n\n-Proxy chia sẽ đường truyền: giúp nhiều máy truy cập Internet thông qua 1 máy, \n\nmà máy này gọi là Proxy server. Chỉ duy nhất máy Proxy này cần modem và \n\naccount truy cập internet, các máy client (các máy trực thuộc) muốn truy cập \n\ninternet qua máy này chỉ cần nối mạng LAN tới máy Proxy và truy cập địa chỉ \n\nyêu cầu.Những yêu cầu của người sử dung sẽ qua trung gian proxy server thay \n\nthế cho server thật sự mà người sử dụng cần giao tiếp, tại điểm trung gian này \n\ncông ty kiểm soát được mọi giao tiếp từ trong công ty ra ngoài intrnet và từ \n\ninternet vào máy của công ty. Sử dụng Proxy, công ty có thể cấm nhân viên truy \n\ncập những địa chỉ web không cho phép, cải thiện tốc độ truy cập nhờ sự lưu trữ \n\ncục bộ các trang web trong bộ nhớ của proxy server và giấu định danh địa chỉ \n\ncủa mạng nội bộ gây khó khăn cho việc thâm nhập từ bên ngoài vào các máy của \n\ncông ty. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n117\n\n \nHình 15.1 \n\nĐối với các nhà cung cấp dịch vụ đường truyền internet: \n\n-Do trên mạng internet có lượng thông tin rất phong phú, theo quan điểm của \n\ntừng quốc gia, của từng chủng tộc hay địa phương, các nhà cung cấp dịch vụ \n\ninternet khu vực đó sẽ phối hợp proxy với kỹ thuật tường lửa để tạo ra một bộ \n\nlọc gọi là firewall proxy nhằm ngăn chặn các thông tin độc hại hoặc trái thuần \n\nphong mỹ tục đối với quốc gia, đói với chủng tộc hay địa phương đó. Địa chỉ các \n\nwebsit mà khách hàng yêu cầu truy cập sẽ được lọc tại bộ lọc này, nếu địa chỉ \n\nkhông bị cấm thì yêu cầu của khách hàng tiếp tục được gửi đi, tới các DNS \n\nserver của các nhà cung cấp dịch vụ. Firewall proxy sẽ lọc tất cả các thông tin từ \n\ninternet gửi vào máy của khách hàng và ngược lại. \n\n \n\nÝ nghĩa của proxy \n\nProxy không chỉ có giá trị bởi nó làm được nhiệm vụ của một bộ lọc thông tin, \n\nnó còn tạo ra được sự an toàn cho các khách hàng của nó, firewal Proxy ngăn \n\nchặn hiệu quảt sư xâm nhập của các đối tượng không mong muốn vào máy của \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n118\n\nkhách hàng. Proxy lưu trữ dược các thông tin mà khách hàng cần trong bộ nhớ, \n\ndo đó làm giảm thời gian truy tìm làm cho việc sử dụng băng thông hiệu quả. \n\nProxy server giống như một vệ sĩ bảo vệ khỏi những rắc rối trên Internet. Một Ps \n\nthường nằm bên trong tường lửa, giữa trình duyệt web và server thật, làm chức \n\nnăng tạm giữ những yêu cầu Internet của các máy khách để chúng không giao \n\ntiếp trực tiếp Internet. Người dùng sẽ không truy cập được những trang web \n\nkhông cho phép (bị công ty cấm). \n\nMọi yêu cầu của máy khách phải qua Ps, nếu địa chỉ IP có trên proxy, nghĩa là \n\nWebsite này được lưu trữ cục bộ, thì trang này sẽ đươc truy cập mà không cần \n\nphải kết nối Internet, nếu không có trên Ps và trang này không bị cấm yêu cầu sẽ \n\nđược chuyển đến server thật, DNS server... và ra Internet. Ps lưu trữ cục bộ các \n\ntrang Web thường truy cập nhất trong bộ đệm giảm chi phí, tốc độ hiển thị trang \n\nWeb nhanh. \n\nProxy server bảo vệ mạng nội bộ khỏi bị xác định bởi bên ngoài bằng cách mang \n\nlại cho mạng hai định danh: một cho nội bộ, một cho bên ngoài. Điều này tạo ra \n\nmột \u201cbí danh\u201d đối với thế giới bên ngoài gây khó khăn đối với nếu người dùng \n\n\u201ctự tung tự tác\u201d hay các tay bẻ khóa muốn xâm nhập trực tiếp máy nào đó. \n\n \n\n \n\nCách sử dụng proxy hiệu quả \n\nDo các proxy có quy mô bộ nhớ khác nhau và số lượng người đang sử dụng \n\nproxy nhiều-ít khác nhau, Proxy server hoạt động quá tải thì tốc độ truy cập \n\ninternet của khách hàng có thể bị chậm. Mặt khác một số websit khách hàng có \n\nđầy đủ điều kiện nhân thân để đọc, nghiên cứu nhưng bị tường lửa chặn không \n\ntruy cập được thì biện pháp đổi proxy để truy cập là điều cần thiết nhằm đảm bảo \n\ncông việc. Do đó người sử dụng có thể chọn proxy server để sử dụng cho riêng \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n119\n\nmình. Có các cách chọn lựa cho người sử dụng. Sử dụng proxy mặc định của nhà \n\ncung cấp dịch vụ (internet), trường hợp này người sử dụng không cần điền địa \n\nchỉ IP của proxy vào cửa sổ internet option của trình duyệt trong máy của mình. \n\nSử dụng proxy server khác (phải trả phí hoặc miễn phí) thì phải điền địa chỉ IP \n\ncủa proxy server vào cửa sổ internet option của trình duyệt. \n\n \n\nMột số Proxy miễn phí tham khảo \n\n \n \n\n \n\n \n\n \n\n \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n120\n\n15.2. Nguyên lý hoạt động của Firewall \n \n\nKhái niệm tường lửa (Firewall) \n\nTrong ngành mạng máy tính, bức tường lửa (tiếng Anh: firewall) là rào chắn mà \n\nmột số cá nhân, tổ chức, doanh nghiệp, cơ quan nhà nước lập ra nhằm ngăn chặn \n\nngười dùng mạng Internet truy cập các thông tin không mong muốn hoặc/và \n\nngăn chặn người dùng từ bên ngoài truy nhập các thông tin bảo mật nằm trong \n\nmạng nội bộ. \n\n \n\nTường lửa là một thiết bị phần cứng và/hoặc một phần mềm hoạt động trong một \n\nmôi trường máy tính nối mạng để ngăn chặn một số liên lạc bị cấm bởi chính \n\nsách an ninh của cá nhân hay tổ chức, việc này tương tự với hoạt động của các \n\nbức tường ngăn lửa trong các tòa nhà. Tường lửa còn được gọi là Thiết bị bảo vệ \n\nbiên giới (Border Protection Device - BPD), đặc biệt trong các ngữ cảnh của \n\nNATO, hay bộ lọc gói tin (packet filter) trong hệ điều hành BSD - một phiên bản \n\nUnix của Đại học California, Berkeley. \n\n \n\nNhiệm vụ cơ bản của tường lửa là kiểm soát giao thông dữ liệu giữa hai vùng tin \n\ncậy khác nhau. Các vùng tin cậy (zone of trust) điển hình bao gồm: mạng \n\nInternet (vùng không đáng tin cậy) và mạng nội bộ (một vùng có độ tin cậy cao). \n\nMục đích cuối cùng là cung cấp kết nối có kiểm soát giữa các vùng với độ tin \n\ncậy khác nhau thông qua việc áp dụng một chính sách an ninh và mô hình kết \n\nnối dựa trên nguyên tắc quyền tối thiểu (principle of least privilege). \n\nCấu hình đúng đắn cho các tường lửa đòi hỏi kĩ năng của người quản trị hệ \n\nthống. Việc này đòi hỏi hiểu biết đáng kể về các giao thức mạng và về an ninh \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n121\n\nmáy tính. Những lỗi nhỏ có thể biến tường lửa thành một công cụ an ninh vô \n\ndụng. \n\nLịch sử phát triển Firewall \n\n \n\nCông nghệ tường lửa bắt đầu xuất hiện vào cuối những năm 1980 khi Internet \n\nvẫn còn là một công nghệ khá mới mẻ theo khía cạnh kết nối và sử dụng trên \n\ntoàn cầu. Ý tưởng đầu tiên được đã hình thành sau khi hàng loạt các vụ xâm \n\nphạm nghiêm trọng đối với an ninh liên mạng xảy ra vào cuối những năm 1980. \n\nNăm 1988, một nhân viên tại trung tâm nghiên cứu NASA Ames tại California \n\ngửi một bản ghi nhớ qua thư điện tử tới đồng nghiệp rằng: \"Chúng ta đang bị \n\nmột con VIRUS Internet tấn công! Nó đã đánh Berkeley, UC San Diego, \n\nLawrence Livermore, Stanford, và NASA Ames.\" Con virus được biết đến với \n\ntên Sâu Morris này đã được phát tán qua thư điện tử và khi đó đã là một sự khó \n\nchịu chung ngay cả đối với những người dùng vô thưởng vô phạt nhất. Sâu \n\nMorris là cuộc tấn công diện rộng đầu tiên đối với an ninh Internet. Cộng đồng \n\nmạng đã không hề chuẩn bị cho một cuộc tấn công như vậy và đã hoàn toàn bị \n\nbất ngờ. Sau đó, cộng đồng Internet đã quyết định rằng ưu tiên tối cao là phải \n\nngăn chặn không cho một cuộc tấn công bất kỳ nào nữa có thể xảy ra, họ bắt đầu \n\ncộng tác đưa ra các ý tưởng mới, những hệ thống và phần mềm mới để làm cho \n\nmạng Internet có thể trở lại an toàn. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n122\n\n \n \n\nNăm 1988, bài báo đầu tiên về công nghệ tường lửa được công bố, khi Jeff \n\nMogul thuộc Digital Equipment Corp. phát triển các hệ thống lọc đầu tiên được \n\nbiết đến với tên các tường lửa lọc gói tin. Hệ thống khá cơ bản này đã là thế hệ \n\nđầu tiên của cái mà sau này sẽ trở thành một tính năng kỹ thuật an toàn mạng \n\nđược phát triển cao. Từ năm 1980 đến năm 1990, hai nhà nghiên cứu tại phòng \n\nthí nghiệm AT&T Bell, Dave Presetto và Howard Trickey, đã phát triển thế hệ \n\ntường lửa thứ hai, được biến đến với tên các tường lửa tầng mạch (circuit level \n\nfirewall). Các bài báo của Gene Spafford ở Đại học Purdue, Bill Cheswick ở \n\nphòng thí nghiệm AT&T và Marcus Ranum đã mô tả thế hệ tường lửa thứ ba, \n\nvới tên gọi tường lửa tầng ứng dụng (application layer firewall), hay tường lửa \n\ndựa proxy (proxy-based firewall). Nghiên cứu công nghệ của Marcus Ranum đã \n\nkhởi đầu cho việc tạo ra sản phẩn thương mại đầu tiên. Sản phẩm này đã được \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n123\n\nDigital Equipment Corporation's (DEC) phát hành với tên SEAL. Đợt bán hàng \n\nlớn đầu tiên của DEC là vào ngày 13 tháng 9 năm 1991 cho một công ty hóa chất \n\ntại bờ biển phía Đông của Mỹ. \n\nTại AT&T, Bill Cheswick và Steve Bellovin tiếp tục nghiên cứu của họ về lọc \n\ngói tin và đã phát triển một mô hình chạy được cho công ty của chính họ, dựa \n\ntrên kiến trúc của thế hệ tường lửa thứ nhất của mình. Năm 1992, Bob Braden và \n\nAnnette DeSchon tại Đại học Nam California đã phát triển hệ thống tường lửa \n\nlọc gói tin thế hệ thứ tư. Sản phẩm có tên \u201cVisas\u201d này là hệ thống đầu tiên có \n\nmột giao diện với màu sắc và các biểu tượng, có thể dễ dàng cài đặt thành phần \n\nmềm cho các hệ điều hành chẳng hạn Microsoft Windows và Mac/OS của Apple \n\nvà truy nhập từ các hệ điều hành đó. Năm 1994, một công ty Israel có tên Check \n\nPoint Software Technologies đã xây dựng sản phẩm này thành một phần mềm \n\nsẵn sàng cho sử dụng, đó là FireWall-1. Một thế hệ thứ hai của các tường lửa \n\nproxy đã được dựa trên công nghệ Kernel Proxy. Thiết kế này liên tục được cải \n\ntiến nhưng các tính năng và mã chương trình cơ bản hiện đang được sử dụng \n\nrộng rãi trong cả các hệ thống máy tính gia đình và thương mại. Cisco, một trong \n\nnhững công ty an ninh mạng lớn nhất trên thế giới đã phát hành sản phẩm này \n\nnăm 1997. \n\nThế hệ FireWall-1 mới tạo thêm hiệu lực cho động cơ kiểm tra sâu gói tin bằng \n\ncách chia sẻ chức năng này với một hệ thống ngăn chặn xâm nhập. \n\n \n\nCác loại tường lửa \n\nCó ba loại tường lửa cơ bản tùy theo: \n\n Truyền thông được thực hiện giữa một nút đơn và mạng, hay giữa một số \n\nmạng.  \n\n Truyền thông được chặn tại tầng mạng, hay tại tầng ứng dụng.  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n124\n\n Tường lửa có theo dõi trạng thái của truyền thông hay không.  \n\nPhân loại theo phạm vi của các truyền trông được lọc, có các loại sau: \n\n \n\n Tường lửa cá nhân, một ứng dụng phần mềm với chức năng thông thường \n\nlà lọc dữ liệu ra vào một máy tính đơn.  \n\n Tường lửa mạng, thường chạy trên một thiết bị mạng hay máy tính chuyên \n\ndụng đặt tại ranh giới của hai hay nhiều mạng hoặc các khu phi quân sự \n\n(mạng con trung gian nằm giữa mạng nội bộ và mạng bên ngoài). Một \n\ntường lửa thuộc loại này lọc tất cả giao thông dữ liệu vào hoặc ra các \n\nmạng được kết nối qua nó.  \n\nLoại tường lửa mạng tương ứng với ý nghĩa truyền thống của thuật ngữ \"tường \n\nlửa\" trong ngành mạng máy tính. \n\nKhi phân loại theo các tầng giao thức nơi giao thông dữ liệu có thể bị chặn, có ba \n\nloại tường lửa chính: \n\n Tường lửa tầng mạng. Ví dụ iptables.  \n\n Tường lửa tầng ứng dụng. Ví dụ TCP Wrappers.  \n\n Tường lửa ứng dụng. Ví dụ: hạn chế các dịch vụ ftp bằng việc định cấu \n\nhình tại tệp /etc/ftpaccess.  \n\nCác loại tường lửa tầng mạng và tường lửa tầng ứng dụng thường trùm lên nhau, \n\nmặc dù tường lửa cá nhân không phục vụ mạng, nhưng một số hệ thống đơn đã \n\ncài đặt chung cả hai. \n\nCuối cùng, nếu phân loại theo tiêu chí rằng tường lửa theo dõi trạng thái của các \n\nkết nối mạng hay chỉ quan tâm đến từng gói tin một cách riêng rẽ, có hai loại \n\ntường lửa: \n\n Tường lửa có trạng thái (Stateful firewall)  \n\n Tường lửa phi trạng thái (Stateless firewall)  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n125\n\nLý do sử dụng tường lửa \n\nMạng internet ngày càng phát triển và phổ biến rộng khắp mọi nơi, lợi ích của nó \n\nrất lớn. Tuy nhiên cũng có rất nhiều ngoại tác không mong muốn đối với các cá \n\nnhân là cha mẹ hay tổ chức, doanh nghiệp, cơ quan nhà nước... như các trang \n\nweb không phù hợp lứa tuổi, nhiệm vụ, lợi ích, đạo đức, pháp luật hoặc trao đổi \n\nthông tin bất lợi cho cá nhân, doanh nghiệp... Do vậy họ (các cá nhân, tổ chức, \n\ncơ quan và nhà nước) sử dụng tường lửa để ngăn chặn. \n\nMột lý do khác là một số quốc gia theo chế độ độc tài, độc đảng áp dụng tường \n\nlửa để ngăn chận quyền trao đổi, tiếp cận thông tin của công dân nước mình \n\nkhông cho họ truy cập vào các trang web hoặc trao đổi với bên ngoài, điều mà \n\nnhà cầm quyền cho rằng không có lợi cho chế độ đó. \n\n \n\nCách thức ngăn chặn \n\nĐể ngăn chặn các trang web không mong muốn, các trao đổi thông tin không \n\nmong muốn người ta dùng cách lọc các địa chỉ web không mong muốn mà họ đã \n\ntập hợp được hoặc lọc nội dung thông tin trong các trang thông qua các từ khóa \n\nđể ngăn chặn những người dùng không mong muốn truy cập vào mạng và cho \n\nphép người dùng hợp lệ thực hiện việc truy xuất. \n\nBức tường lửa có thể là một thiết bị định hướng (Router, một thiết bị kết nối giữa \n\nhai hay nhiều mạng và chuyển các thông tin giữa các mạng này) hay trên một \n\nmáy chủ (Server), bao gồm phần cứng và/hoặc phần mềm nằm giữa hai mạng \n\n(chẳng hạn mạng Internet và mạng liên kết các gia đình, điểm kinh doanh \n\ninternet, tổ chức, công ty, hệ thống Ngân hàng, cơ quan nhà nước. \n\nCơ quan nhà nước có thể lập bức tường lửa ngay từ cổng Internet quốc gia hoặc \n\nyêu cầu các nhà cung cấp dịch vụ đường truyền (IXP) và cung cấp dịch vụ \n\nInternet (ISP) thiết lập hệ thống tường lửa hữu hiệu hoặc yêu cầu các đại lý kinh \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n126\n\ndoanh internet thực hiện các biện pháp khác như Thông tư liên tịch số \n\n02/2005/TTLT về quản lý đại lý Internet có hiệu lực vào đầu tháng 8-2005 ở \n\nViệt Nam. \n\nVượt tường lửa \n\nCác trang web bị chận nhất là các trang web sex thường rất linh động thay đổi \n\nđịa chỉ để tránh sự nhận diện hoặc nhanh chóng thông báo địa chỉ mới một cách \n\nhạn chế với các đối tượng dùng đã định. \n\nNgười dùng ở các nước có hệ thống tường lửa có thể tiếp cận với nội dung bị \n\nchận qua các ngõ khác bằng cách thay đổi địa chỉ Proxy, DNS hoặc qua vùng \n\nnhớ đệm cached của trang tìm kiếm thông dụng như Google, Yahoo..., hoặc sử \n\ndụng phần mềm miễn phí Tor. Nói chung người dùng mạng hiểu biết nhiều về \n\nmáy tính thì biết nhiều kỹ xảo vượt tường lửa. \n\n \n\nHiệu quả khi sử dụng tường lửa \n\nBức tường lửa chỉ có hiệu quả tốt một thời gian sau đó các trang web bị chận \n\ncũng như người sử dụng dùng mưu mẹo, kỹ xảo, kỹ thuật để né và vuợt tường, vì \n\nvậy phải luôn luôn cập nhật kỹ thuật, nhận điện các địa chỉ mới để thay đổi \n\nphương thức hoạt động, điều này làm tốc độ truy cập chung bị giảm và đòi hỏi \n\nphải nâng cấp trang thiết bị, kỹ thuật. \n\n \n\nNhược điểm khi sử dụng tường lửa \n\nSử dụng tường lửa cần phải xử lý một lượng lớn thông tin nên việc xử lý lọc \n\nthông tin có thể làm chậm quá trình kết nối của người kết nối.  \n\nViệc sử dụng tường lửa chỉ hữu hiệu đối với những người không thành thạo kỹ \n\nthuật vượt tường lửa, những người sử dụng khác có hiểu biết có thể dễ dàng vượt \n\nqua tường lửa bằng cách sử dụng các proxy không bị ngăn chặn.  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n127\n\n15.3. Triển khai xây dựng hệ thống tường lửa cho doanh nghiệp \n \n\n \nMô tả sơ đồ hệ thống: \n\n Gồm 01 PC đóng vai trò Domain Controller (DC) \n\n Mạng LAN thuộc dải IP 192.168.1.0/24 \n\n DMZ thuộc dải IP 172.16.1.0/24 \n\n External có dải IP 10.0.0.0/30 \n\n Firewall có 03 Fast Ethernet tương ứng 03 phân vùng LAN (Internal), \n\nDMZ và External \n\nYêu cầu: \n\n Các PC join vào Domain (DC) \n\n File Server và Web Server thuộc vùng DMZ cho phép các PC thuộc LAN \n\ntruy cập vào \n\n Các PC thuộc LAN có thể truy cập Internet theo sự cho phép của Firewall \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n128\n\nBài 16: Cơ bản về bảo mật \n\n \n\n16.1. Một số nguy cơ tấn công trên mạng \n\nNhững nguy cơ bảo mật đe dọa mất mát dữ liệu nhạy cảm luôn là mối lo ngại \ncủa những doanh nghiệp vừa và nhỏ. Sau đây là 10 nguy cơ bảo mật được đánh \ngiá là nguy hiểm nhất mà doanh nghiệp phải đối mặt. \n\n \n \n\nNhững nhân viên bất mãn với công ty  \n\nTrong một số doanh nghiệp vừa và nhỏ, những dữ liệu kinh doanh quan trọng \nhay thông tin khách hàng thường được giao phó cho một cá nhân. Điều này tạo \nnên tình trạng \"lệ thuộc quyền hạn\" nguy hiểm. Khi cá nhân đó bất mã vì một lý \ndo nào đó với công ty và ban điều hành công ty. Lúc này vấn đề chỉ còn là thời \ngian và quyền hạn kiểm soát thông tin của anh ta mà thôi. \n\nKhông có kế hoạch xử lý rủi ro \n\nHệ thống máy tính, mạng của doanh nghiệp luôn phải đối mặt với nhiều nguy cơ \nbảo mật, từ việc hư hỏng vật lý cho đến các trường hợp bị tấn công từ tin tặc hay \nvirus đều có khả năng gây tổn hại cho dữ liệu. Khá nhiều doanh nghiệp vừa và \nnhỏ thiếu hẳn chính sách phản ứng với việc thất thoát dữ liệu hay kế hoạch khắc \nphục sự cố. Đại đa số đều lúng túng và bắt đầu các hoạt động mang tính ứng \nphó. \n\nNhững thiết lập mặc định không được thay đổi \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n129\n\nTin tặc hiện nay thường dùng các tập tin chứa đựng hàng trăm ngàn tài khoản \nmặc định (username và password) của các thiết bị kết nối mạng để dò tìm quyền \nhạn truy xuất khả năng đăng nhập vào hệ thống mạng. Nếu các tài khoản, thiết \nlập mặc định không được thay đổi, tin tặc sẽ dễ dàng chiếm quyền điểu khiển tài \nnguyên mạng. \n\nMôi trường mạng tại gia không an toàn \n\nĐối với một vài doanh nghiệp nhỏ, các nhân viên thường đem máy tính xách tay \n(laptop) của mình đến văn phòng để làm việc. Trong môi trường mạng tại gia \nđình, chế độ bảo mật thường rất kém hay thậm chí không có những thiết lập bảo \nvệ. Do đó, những chiếc laptop của nhân viên có thể là nguồn gốc phát tán virus, \nmalware hay trở thành zombie trung gian để tin tặc tấn công vào hệ thống mạng \ncủa doanh nghiệp. \n\nThiếu cảnh giác với mạng công cộng \n\nMột thủ đoạn chung tin tặc hay sử dụng để dẫn dụ những nạn nhân là đặt một \nthiết bị trung chuyển wireless access-point không cài đặt mật khẩu (unsecured) \nrồi gán một cái nhãn như \"Mạng Wi-Fi miễn phí\" và rung đùi ngồi chờ những \nkết nối \"ngây thơ\" rơi vào bẫy. Tin tặc sẽ dùng các công cụ thâu tóm gói dữ liệu \nmạng giúp nhận biết cả những văn bản hay bất kỳ những gì mà nhân viên doanh \nnghiệp gõ rồi gửi ra ngoài. \n\nMất mát thiết bị di động \n\nRất nhiều doanh nghiệp, thậm chí gần đây còn có cả một vài hãng lớn bị thất \nthoát dữ liệu quan trọng do mất cắp máy tính xách tay, thất lạc điện thoại di động \nhay các đĩa flash USB lưu trữ. Dữ liệu trong các thiết bị này thường ít được mã \nhóa hay bảo vệ bằng mật khẩu, rất dễ dàng xử lý một khi đã sở hữu chúng. \n\nLỗi từ máy chủ web \n\nHiện còn khá nhiều doanh nghiệp không coi trọng việc đặt website của mình tại \nmáy chủ nào, mức độ bảo mật ra sao. Do đó, website kinh doanh của doanh \nnghiệp sẽ là mồi ngon của các đợt tấn công SQL Injection hay botnet. \n\nDuyệt web tràn lan \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n130\n\nKhông phải nhân viên văn phòng nào cũng đủ am hiểu tường tận về những hiểm \nhọa rình rập trên mạng Internet như malware, spyware, virus, trojan... Họ cứ vô \ntư truy cập vào các website không xác định hoặc bị dẫn dụ click vào những \nwebsite được tin tặc bày cỗ chào đón và thế là máy tính của nhân viên sẽ là cánh \ncửa giúp tin tặc xâm nhập vào trong mạng của doanh nghiệp. \n\nEmail chứa đựng mã độc \n\nNhững cuộc giội bom thư rác sẽ làm tràn ngập hộp thư của bạn với những tiêu đề \nhấp dẫn như những vụ scandal tình ái, hình ảnh nóng bỏng hay các lời mời chào \nkinh doanh... chỉ một cú nhấp chuột sai lầm thì ngay lập tức máy tính sẽ tải về \ncác đoạn mã độc làm tiền đề cho hàng loạt phần mềm độc hại đi sau xâm nhập \nvào máy tính. \n\nKhông vá lỗi bảo mật \n\nHơn 90% các cuộc tấn công vào hệ thống mạng đều cố gắng khai thác các lỗi \nbảo mật đã được biết đến. Mặc dù các bản vá lỗi vẫn thường xuyên được những \nhãng sản xuất cung cấp ngay sau khi lỗi được phát hiện nhưng một vài doanh \nnghiệp lại không coi trọng việc cập nhật lỗi thường nhật dẫn đến việc các lỗi bảo \nmật mở toang cổng chào đón những cuộc tấn công. \n\n \n\n16.2. Các phương thức tấn công \n\n16.2.1 Viruses, Worms, Trojan Horses. \n\nTrong khoa học máy tính, virus máy tính (thường được người sử dụng gọi tắt là \nvirus) là những chương trình hay đoạn mã được thiết kế để tự nhân bản và sao \nchép chính nó vào các đối tượng lây nhiễm khác (file, ổ đĩa, máy tính ..). \n\nTrước đây, virus thường được viết bởi một số người am hiểu về lập trình muốn \nchứng tỏ khả năng của mình nên thường virus có các hành động như: cho một \nchương trình không hoạt động đúng, xóa dữ liệu, làm hỏng ổ cứng,... hoặc gây ra \nnhững trò đùa khó chịu. \n\nNhững virus mới được viết trong thời gian gần đây không còn thực hiện các trò \nđùa hay sự phá hoại đối máy tính của nạn nhân bị lây nhiễm nữa, mà đa phần \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n131\n\nhướng đến việc lấy cắp các thông tin cá nhân nhạy cảm (các mã số thẻ tín dụng) \nmở cửa sau cho tin tặc đột nhập chiếm quyền điều khiển hoặc các hành động \nkhác nhằm có lợi cho người phát tán virus. \n\nChiếm trên 90% số virus đã được phát hiện là nhắm vào hệ thống sử dụng hệ \nđiều hành họ Windows chỉ đơn giản bởi hệ điều hành này được sử dụng nhiều \nnhất trên thến giới. Do tính thông dụng của Windows nên các tin tặc thường tập \ntrung hướng vào chúng nhiều hơn là các hệ điều hành khác. (Cũng có quan điểm \ncho rằng Windows có tính bảo mật không tốt bằng các hệ điều hành khác (như \nLinux) nên có nhiều virus hơn, tuy nhiên nếu các hệ điều hành khác cũng thông \ndụng như Windows hoặc thị phần các hệ điều hành ngang bằng nhau thì cũng \nlượng virus xuất hiện có lẽ cũng tương đương nhau). \n\n \n\nLược sử của virus \n\nCó nhiều quan điểm khác nhau về lịch sử của virus điện toán. Ở đây chỉ nêu rất \nvắn tắt và khái quát những điểm chung nhất và, qua đó, chúng ta có thể hiểu chi \ntiết hơn về các loại virus: \n\n Năm 1949: John von Neuman (1903-1957) phát triển nền tảng lý thuyết tự \nnhân bản của một chương trình cho máy tính.  \n\n Vào cuối thập niên 1960 đầu thập niên 1970 đã xuất hiện trên các máy \nUnivax 1108 một chương trình gọi là \"Pervading Animal\" tự nó có thể nối \nvới phần sau của các tập tin tự hành. Lúc đó chưa có khái niệm virus.  \n\n Năm 1981: Các virus đầu tiên xuất hiện trong hệ điều hành của máy tính \nApple II.  \n\n Năm 1983: Tại Đại Học miền Nam California, tại Hoa Kỳ, Fred Cohen lần \nđầu đưa ra khái niệm computer virus như định nghĩa ngày nay.  \n\n Năm 1986: Virus \"the Brain\", virus cho máy tính cá nhân (PC) đầu tiên, \nđược tạo ra tại Pakistan bởi Basit và Amjad. Chương trình này nằm trong \nphần khởi động (boot sector) của một dĩa mềm 360Kb và nó sẽ lây nhiễm \ntất cả các ổ dĩa mềm. Đây là loại \"stealth virus\" đầu tiên.  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n132\n\n Cũng trong tháng 12 năm này, virus cho DOS được khám phá ra là virus \n\"VirDem\". Nó có khả năng tự chép mã của mình vào các tệp tự thi hành \n(executable file) và phá hoại các máy tính VAX/VMS.  \n\n Năm 1987: Virus đầu tiên tấn công vào command.com là virus \"Lehigh\".  \n\n Năm 1988: Virus Jerusalem tấn công đồng loạt các đại học và các công ty \ntrong các quốc gia vào ngày thứ Sáu 13. Đây là loại virus hoạt động theo \nđồng hồ của máy tính (giống bom nổ chậm cài hàng loạt cho cùng một \nthời điểm).  \n\n Tháng 11 cùng năm, Robert Morris, 22 tuổi, chế ra worm chiếm cứ các \nmáy tính của ARPANET, làm liệt khoảng 6.000 máy. Morris bị phạt tù 3 \nnăm và 10.000 dollar. Mặc dù vậy anh ta khai rằng chế ra virus vì \"chán \nđời\" (boresome).  \n\n Năm 1990: Chương trình thương mại chống virus đầu tiên ra đời bởi \nNorton.  \n\n Năm 1991: Virus đa hình (polymorphic virus) ra đời đầu tiên là virus \n\"Tequilla\". Loại này biết tự thay đổi hình thức của nó, gây ra sự khó khăn \ncho các chương trình chống virus.  \n\n Năm 1994: Những người thiếu kinh nghiệm, vì lòng tốt đã chuyển cho \nnhau một điện thư cảnh báo tất cả mọi người không mở tất cả những điện \nthư có cụm từ \"Good Times\" trong dòng bị chú (subject line) của chúng. \nĐây là một loại virus giả (hoax virus) đầu tiên xuất hiện trên các điện thư \nvà lợi dụng vào \"tinh thần trách nhiệm\" của các người nhận được điện thư \nnày để tạo ra sự luân chuyển.  \n\n Năm 1995: Virus văn bản (macro virus) đầu tiên xuất hiện trong các mã \nmacro trong các tệp của Word và lan truyền qua rất nhiều máy. Loại virus \nnày có thể làm hư hệ điều hành chủ. Macro virus là loại virus viết ra bằng \nngôn ngữ lập trình Visual Basic cho các ứng dụng (VBA) và tùy theo khả \nnăng, có thể lan nhiễm trong các ứng dụng văn phòng của Microsoft như \nWord, Excel, PowerPoint, OutLook,.... Loại macro này, nổi tiếng có virus \nBaza và virus Laroux, xuất hiện năm 1996, có thể nằm trong cả Word hay \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n133\n\nExcel. Sau này, virus Melissa, năm 1997, tấn công hơn 1 triệu máy, lan \ntruyền bởi một tệp đính kèm kiểu Word bằng cách đọc và gửi đến các địa \nchỉ của Outlook trong các máy đã bị nhiễm virus. Virus Tristate, năm \n1999, có thể nằm trong các tệp Word, Excel và Power Point.  \n\n Năm 2000: Virus Love Bug, còn có tên ILOVEYOU, đánh lừa tính hiếu kì \ncủa mọi người. Đây là một loại macro virus. Đặc điểm là nó dùng đuôi tập \ntin dạng \"ILOVEYOU.txt.exe\". Lợi dụng điểm yếu của Outlook thời bấy \ngiờ: theo mặc định sẵn, đuôi dạng .exe sẽ tự động bị dấu đi. Ngoài ra, \nvirus này còn có một đặc tính mới của spyware: nó tìm cách đọc tên và mã \nnhập của máy chủ và gửi về cho tay hắc đạo. Khi truy cứu ra thì đó là một \nsinh viên người Philippines. Tên này được tha bổng vì Philippines chưa có \nluật trừng trị những người tạo ra virus cho máy tính.  \n\n Năm 2002: Tác giả của virus Melissa, David L. Smith, bị xử 20 tháng tù.  \n\n Năm 2003: Virus Slammer, một loại worm lan truyền với vận tốc kỉ lục, \ntruyền cho khoảng 75 ngàn máy trong 10 phút.  \n\n Năm 2004: Đánh dấu một thế hệ mới của virus là worm Sasser. Với virus \nnày thì người ta không cần phải mở đính kèm của điện thư mà chỉ cần mở \nlá thư là đủ cho nó xâm nhập vào máy. Cũng may là Sasser không hoàn \ntoàn hủy hoại máy mà chỉ làm cho máy chủ trở nên chậm hơn và đôi khi \nnó làm máy tự khởi động trở lại. Tác giả của worm này cũng lập một kỉ \nlục khác: tay hắc đạo (hacker) nổi tiếng trẻ nhất, chỉ mới 18 tuổi, Sven \nJaschan, người Đức. Tuy vậy, vì còn nhỏ tuổi, nên vào tháng 7 năm 2005 \nnên tòa án Đức chỉ phạt anh này 3 năm tù treo và 30 giờ lao động công \ních.  \n\nVới khả năng của các tay hacker, virus ngày ngay có thể xâm nhập bằng cách bẻ \ngãy các rào an toàn của hệ điều hành hay chui vào các chổ hở của các phần mềm \nnhất là các chương trình thư điện tử, rồi từ đó lan tỏa khắp nơi theo các nối kết \nmạng hay qua thư điện tử. Do dó, việc truy tìm ra nguồn gốc phát tán virus sẽ \ncàng khó hơn nhiều. Chính Microsoft, hãng chế tạo các phần mềm phổ biến, \ncũng là một nạn nhân. Họ đã phải nghiên cứu, sửa chữa và phát hành rất nhiều \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n134\n\ncác phần mềm nhằm sửa các khuyết tật của phần mềm cũng như phát hành các \nthế hệ của gói dịch vụ (service pack) nhằm giảm hay vô hiệu hóa các tấn công \ncủa virus. Nhưng dĩ nhiên với các phần mềm có hàng triệu dòng mã nguồn thì \nmong ước chúng hoàn hảo theo ý nghĩa của sự an toàn chỉ có trong lý thuyết. \nĐây cũng là cơ hội cho các nhà sản xuất các loại phần mềm bảo vệ có đất dụng \nvõ.  \n\nTương lai không xa có lẽ virus sẽ tiến thêm các bước khác như: nó bao gồm mọi \nđiểm mạnh sẵn có (polymorphic, sasser hay tấn công bằng nhiều cách thức, \nnhiều kiểu) và còn kết hợp với các thủ đọan khác của phần mềm gián điệp \n(spyware). Đồng thời nó có thể tấn công vào nhiều hệ điều hành khác nhau chứ \nkhông nhất thiết nhắm vào một hệ điều hành độc nhất như trong trường hợp của \nWindows hiện giờ. Và có lẽ virus sẽ không hề (thậm chí là không cần) thay đổi \nphương thức tấn công: lợi dụng điểm yếu của máy tính cũng như chương trình.  \n\nCác khái niệm có liên quan \n\nSâu máy tính(worm): là các chương trình cũng có khả năng tự nhân bản tự tìm \ncách lan truyền qua hệ thống mạng (thường là qua hệ thống thư điện tử). Điểm \ncần lưu ý ở đây, ngoài tác hại thẳng lên máy bị nhiễm, nhiệm vụ chính của worm \nlà phá các mạng (network) thông tin, làm giảm khả năng hoạt động hay ngay cả \nhủy hoại các mạng này. Nhiều nhà phân tích cho rằng worm khác với virus, họ \nnhấn mạnh vào đặc tính phá hoại mạng nhưng ở đây worm được là một loại \nvirus đặc biệt. \n\nWorm nổi tiếng nhất được tạo bởi Robert Morris vào năm 1988. Nó có thể làm \nhỏng bất kì hệ điều hành UNIX nào trên Internet. Tuy vậy, có lẽ worm tồn tại lâu \nnhất là virus happy99, hay các thế hệ sau đó của nó có tên là Trojan. Các worm \nnày sẽ thay đổi nội dung tệp wsok32.dll của Windows và tự gửi bản sao của \nchính chúng đi đến các địa chỉ cho mỗi lần gửi điện thư hay message. \n\nPhần mềm ác tính (malware): (chữ ghép của maliciuos và software) chỉ chung \ncác phần mềm có tính năng gây hại như virus, worm và Trojan horse.  \n\nTrojan Horse: đây là loại chương trình cũng có tác hại tương tự như virus chỉ \nkhác là nó không tự nhân bản ra. Như thế, cách lan truyền duy nhất là thông qua \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n135\n\ncác thư dây chuyền Để trừ loại này người chủ máy chỉ việc tìm ra tập tin Trojan \nhorse rồi xóa nó đi là xong. Tuy nhiên, không có nghĩa là không thể có hai con \nTrojan horse trên cùng một hệ thống. Chính những kẻ tạo ra các phần mềm này \nsẽ sử dụng kỹ năng lập trình của mình để sao lưu thật nhiều con trước khi phát \ntán lên mạng. Đây cũng là loại virus cực kỳ nguy hiểm. Nó có thể hủy ổ cứng, \nhủy dữ liệu.  \n\nPhần mềm gián điệp (spyware): Đây là loại virus có khả năng thâm nhập trực \ntiếp vào hệ điều hành mà không để lại \"di chứng\". Thường một số chương trình \ndiệt virus có kèm trình diệt spyware nhưng diệt khá kém đối với các đợt \"dịch\".  \n\nPhần mềm quảng cáo (adware): Loại phần mềm quảng cáo, rất hay có ở trong \ncác chương trình cài đặt tải từ trên mạng. Một số phần mềm vô hại, nhưng một \nsố có khả năng hiển thị thông tin kịt màn hình, cưỡng chế người sử dụng.  \n\nBotnet: Trước đây, loại này thường dùng để nhắm vào các hệ thống điều khiển \nmáy tính từ xa, nhưng hiện giờ lại nhắm vào người dùng.  \n\nĐiều đặc biệt nguy hiểm là các botnet được phơi bày từ các hacker không cần kỹ \nthuật lập trình cao. Nó được rao bán với giá từ 20USD trở lên cho các hacker. \nHậu quả của nó để lại không nhỏ: mất tài khoản. Nếu liên kết với một hệ thống \nmáy tính lớn, nó có thể tống tiền cả một doanh nghiệp. \n\nNhóm của Sites ở Sunbelt cùng với đội phản ứng nhanh của công ty bảo mật \niDefense Labs đã tìm ra một botnet chạy trên nền web có tên là Metaphisher. \nThay cho cách sử dụng dòng lệnh, tin tặc có thể sử dụng giao diện đồ họa, các \nbiểu tượng có thể thay đổi theo ý thích, chỉ việc dịch con trỏ, nhấn chuột và tấn \ncông. \n\nTheo iDefense Labs, các bot do Metaphisher điều khiển đã lây nhiễm hơn 1 triệu \nPC trên toàn cầu. Thậm chí trình điều khiển còn mã hóa liên lạc giữa nó và bot \n\"đàn em\" và chuyển đi mọi thông tin về các PC bị nhiễm cho người chủ bot như \nvị trí địa lý, các bản vá bảo mật của Windows và những trình duyệt đang chạy \ntrên mỗi PC. \n\nNhững công cụ tạo bot và điều khiển dễ dùng trên góp phần làm tăng vọt số PC \nbị nhiễm bot được phát hiện trong thời gian gần đây. Thí dụ, Jeanson James \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n136\n\nAncheta, 21 tuổi, người Mỹ ở bang California, bị tuyên án 57 tháng tù vì đã vận \nhành một doanh nghiệp \"đen\" thu lợi bất chính dựa vào các botnet điều khiển \n400.000 \"thành viên\" và 3 tay điều khiển bot bị bắt ở Hà Lan mùa thu năm trước \nchính là trung tâm \"đầu não\" điều khiển hơn 1,5 triệu PC! \n\nMặc dù đã có luật để bắt những tội phạm kiểu này, nhưng do dễ dàng có được \nnhững công cụ phá hoại nên luôn có thêm người mới gia nhập hàng ngũ hacker \nvì tiền hay vì tò mò. \n\nKeylogger: là phần mềm ghi lại chuỗi phím gõ của người dùng. Nó có thể hữu \ních cho việc tìm nguồn gốc lỗi sai trong các hệ thống máy tính và đôi khi được \ndùng để đo năng suất làm việc của nhân viên văn phòng. Các phần mềm kiểu này \nrất hữu dụng cho ngành luật pháp và tình báo - ví dụ, cung cấp một phương tiện \nđể lấy mật khẩu hoặc các khóa mật mã và nhờ đó qua mắt được các thiết bị an \nninh. Tuy nhiên, các phần mềm keylogger được phổ biến rộng rãi trên Internet \nvà bất cứ ai cũng có thể sử dụng cho mục đích lấy trộm mật khẩu và chìa khóa \nmã hóa.  \n\nPhishing: là một hoạt động phạm tội dùng các kỹ thuật lừa đảo. Kẻ lừa đảo cố \ngắng lừa lấy các thông tin nhạy cảm, chẳng hạn như mật khẩu và thông tin về thẻ \ntín dụng, bằng cách giả là một người hoặc một doanh nghiệp đáng tin cậy trong \nmột giao dịch điện tử. Phishing thường được thực hiện bằng cách sử dụng thư \nđiện tử hoặc tin nhắn, đôi khi còn sử dụng cả điện thoại.  \n\nRootkit: là một bộ công cụ phần mềm dành cho việc che dấu làm các tiến trình \nđang chạy, các file hoặc dữ liệu hệ thống. Rootkit có nguồn gốc từ các ứng dụng \ntương đối hiền, nhưng những năm gần đây, rootkit đã bị sử dụng ngày càng \nnhiều bởi các phần mềm ác tính, giúp kẻ xâm nhập hệ thống giữ được đường \ntruy nhập một hệ thống trong khi tránh bị phát hiện. Người ta đã biết đến các \nrootkit dành cho nhiều hệ điều hành khác nhau chẳng hạn Linux, Solaris và một \nsố phiên bản của Microsoft Windows. Các rootkit thường sửa đổi một số phần \ncủa hệ điều hành hoặc tự cài đặt chúng thành các driver hay các môdule trong \nnhân hệ điều hành (kernel module).  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n137\n\nKhi hay tin CD nhạc của Sony cài đặt rookit để giấu file chống sao chép xuất \nhiện vào tháng 11 năm ngoái, giới tin tặc hân hoan và nhanh chóng khai thác ứng \ndụng của Sony. Phần mềm của Sony giấu bất kỳ file hay tiến trình bắt đầu với \n\"$sys$\", những kẻ viết phần mềm độc hại đã đổi tên file để lợi dụng đặc điểm \nnày . \n\nVào tháng 3, nhà sản xuất phần mềm chống virus ở Tây Ban Nha là Panda \nSoftware cho biết họ đang tìm biến thể của sâu Bagle cực kỳ độc hại có trang bị \nkhả năng của rootkit. Trầm trọng hơn, tương tự như các \"nhà sản xuất\" chương \ntrình botnet, những kẻ tạo phần mềm rootkit còn bán hoặc phát tán miễn phí các \ncông cụ, giúp những tay viết phần mềm độc hại dễ dàng bổ sung chức năng \nrootkit cho các virus cũ như Bagle hay tạo loại mới. Một dự án do Microsoft và \ncác nhà nghiên cứu của đại học Michigan thực hiện thật sự mở đường cho \nnghiên cứu rootkit, tạo ra một phương thức mới gần như \"đặt\" HĐH chạy trên \nphần mềm có tên SubVirt (tên của dự án nghiên cứu). HĐH vẫn làm việc bình \nthường, nhưng \"máy ảo\" điều khiển mọi thứ HĐH nhìn thấy và có thể dễ dàng \ngiấu chính nó. \n\nMay mắn là kỹ thuật này không dễ thực hiện và người dùng dễ nhận ra vì làm \nchậm hệ thống và làm thay đổi những file nhất định. Hiện giờ, loại siêu rootkit \nnày chỉ mới ở dạng ý tưởng, cần nhiều thời gian trước khi tin tặc có thể thực hiện \nphương thức tấn công này. \n\n \n\nPhần mềm tống tiền (Ransomware): là loại phần mềm ác tính sử dụng một hệ \nthống mật mã hóa yếu (phá được) để mã hóa dữ liệu thuộc về một cá nhân và đòi \ntiền chuộc thì mới khôi phục lại.  \n\nCửa hậu (Backdoor): trong một hệ thống máy tính, cửa hậu là một phương \npháp vượt qua thủ tục chứng thực người dùng thông thường hoặc để giữ đường \ntruy nhập từ xa tới một máy tính, trong khi cố gắng không bị phát hiện bởi việc \ngiám sát thông thường. Cửa hậu có thể có hình thức một chương trình được cài \nđặt (ví dụ Back Orifice hoặc cửa hậu rookit Sony/BMG rootkit được cài đặt khi \nmột đĩa bất kỳ trong số hàng triệu đĩa CD nhạc của Sony được chơi trên một máy \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n138\n\ntính chạy Windows), hoặc có thể là một sửa đổi đối với một chương trình hợp \npháp - đó là khi nó đi kèm với Trojan.  \n\nVirus lây qua passport: Loại virus này lây qua các thẻ RFID cá nhân để thay \nđổi nội dung của thẻ, buộc tội người dùng và có thể ăn cắp passport. Vì sóng \nRFID không lây qua kim loại nên khi không cần dùng, bạn nên để trong hộp kim \nloại.  \n\nVirus điện thoại di động: chỉ riêng hệ thống PC đã đủ làm người dùng đau đầu, \nnay lại có virus điện thoại di động. Loại này thường lây qua tin nhắn. Một vài \nvirus ĐTDĐ cũng đánh sập HĐH và làm hỏng thiết bị. Một số khác chỉ gây khó \nchịu như thay đổi các biểu tượng làm thiết bị trở nên khó sử dụng. Một số ít còn \nnhằm vào tiền. Ví dụ, một Trojan lây lan các điện thoại ở Nga gửi tin nhắn tới \nnhững dịch vụ tính tiền người gửi.  \n\n \n\nDanh sách các đuôi tệp có khả năng di truyền và bị lây nhiễm \n\n \n\nCác tập tin trên hệ điều hành Windows mang đuôi mở rộng sau có nhiều khả \nnăng bị virus tấn công. \n\n \n\n .bat: Microsoft Batch File (Tệp xử lí theo lô)  \n\n .chm: Compressed HTML Help File (Tệp tài liệu dưới dạng nén HTML)  \n\n .cmd: Command file for Windows NT (Tệp thực thi của Windows NT)  \n\n .com: Command file (program) (Tệp thực thi)  \n\n .cpl: Control Panel extension (Tệp của Control Panel)  \n\n .doc: Microsoft Word (Tệp của chương trình Microsoft Word)  \n\n .exe: Executable File (Tệp thực thi)  \n\n .hlp: Help file (Tệp nội dung trợ giúp người dùng)  \n\n .hta: HTML Application (Ứng dụng HTML)  \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n139\n\n .js: JavaScript File (Tệp JavaScript)  \n\n .jse: JavaScript Encoded Script File (Tệp mã hoá JavaScript)  \n\n .lnk: Shortcut File (Tệp đường dẫn)  \n\n .msi: Microsoft Installer File (Tệp cài đặt)  \n\n .pif: Program Information File (Tệp thông tin chương trình)  \n\n .reg: Registry File  \n\n .scr: Screen Saver (Portable Executable File)  \n\n .sct: Windows Script Component  \n\n .shb: Document Shortcut File  \n\n .shs: Shell Scrap Object  \n\n .vb: Visual Basic File  \n\n .vbe: Visual Basic Encoded Script File  \n\n .vbs: Visual Basic File  \n\n .wsc: Windows Script Component  \n\n .wsf: Windows Script File  \n\n .wsh: Windows Script Host File  \n\n .{*}: Class ID (CLSID) File Extensions  \n\n \n\nCác hình thức lây nhiễm của virus máy tính \n\nVirus lây nhiễm theo cách cổ điển \n\nCách cổ điển nhất của sự lây nhiễm, bành trướng của các loai virus máy tính là \nthông qua các thiết bị lưu trữ di động: Trước đây đĩa mềm và đĩa CD chứa \nchương trình thường là phương tiện bị lợi dụng nhiều nhất để phát tán. Ngày nay \nkhi đĩa mềm rất ít được sử dụng thì phương thức lây nhiễm này chuyển qua các ổ \nUSB, các đĩa cứng di động hoặc các thiết bị giải trí kỹ thuật số. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n140\n\nVirus lây nhiễm qua thư điện tử \n\nKhi mà thư điện tử (e-mail) được sử dụng rộng rãi trên thế giới thì virus chuyển \nhướng sang lây nhiễm thông qua thư điện tử thay cho các cách lây nhiễm truyền \nthống. \n\nKhi đã lây nhiễm vào máy nạn nhân, virus có thể tự tìm ra danh sách các địa chỉ \nthư điện tử sẵn có trong máy và nó tự động gửi đi hàng loạt (mass mail) cho \nnhững địa chỉ tìm thấy. Nếu các chủ nhân của các máy nhận được thư bị nhiễm \nvirus mà không bị phát hiện, tiếp tục để lây nhiễm vào máy, virus lại tiếp tục tìm \nđến các địa chỉ và gửi tiếp theo. Chính vì vậy số lượng phát tán có thể tăng theo \ncấp số nhân khiến cho trong một thời gian ngắn hàng hàng triệu máy tính bị lây \nnhiễm, có thể làm tê liệt nhiều cơ quan trên toàn thế giới trong một thời gian rất \nngắn. \n\nKhi mà các phần mềm quản lý thư điện tử kết hợp với các phần mềm diệt virus \ncó thể khắc phục hành động tự gửi nhân bản hàng loạt để phát tán đến các địa chỉ \nkhác trong danh bạ của máy nạn nhân thì chủ nhân phát tán virus chuyển qua \nhình thức tự gửi thư phát tán virus bằng nguồn địa chỉ sưu tập được trước đó. \n\nPhương thực lây nhiễm qua thư điển tử bao gồm: \n\nLây nhiễm vào các file đính kèm theo thư điện tử (attached mail). Khi đó ngưòi \ndùng sẽ không bị nhiễm virus cho tới khi file đính kèm bị nhiễm virus được kích \nhoạt (do đặc diểm này các virus thường được \"trá hình\" bởi các tiêu đề hấp dẫn \nnhư sex, thể thao hay quảng cáo bán phần mềm với giá vô cùng rẻ.)  \n\nLây nhiễm do mở một liên kết trong thư điện tử Các liên kết trong thư điện tử có \nthể dẫn đến một trang web được cài sẵn virus, cách này thường khai thác các lỗ \nhổng của trình duyệt và hệ điều hành. Một cách khác, liên kết dẫn tới việc thực \nthi một đoạn mã, và máy tính bị có thể bị lây nhiễm virus.  \n\nLây nhiễm ngay khi mở để xem thư điện tử: Cách này vô cùng nguy hiểm bởi \nchưa cần kích hoạt các file hoặc mở các liên kết, máy tính đã có thể bị lây nhiễm \nvirus. Cách này cũng thường khai thác các lỗi của hệ điều hành.  \n\nVirus lây nhiễm qua mạng Internet \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n141\n\nTheo sự phát triển rộng rãi của Internet trên thế giới mà hiện nay các hình thức \nlây nhiễm virus qua Internet trở thành các phương thức chính của virus ngày nay. \n\nCó các hình thức lây nhiễm virus và phần mềm độc hại thông qua Internet như \nsau: \n\nLây nhiễm thông qua các file tài liệu, phần mềm: Là cách lây nhiễm cổ điển, \nnhưng thay thế các hình thức truyền file theo cách cổ điển (đĩa mềm, đĩa USB...) \nbằng cách tải từ Internet, trao đổi, thông qua các phần mềm...  \n\nLây nhiễm khi đang truy cập các trang web được cài đặt virus (theo cách vô tình \nhoặc cố ý): Các trang web có thể có chứa các mã hiểm độc gây lây nhiễm virus \nvà phần mềm độc hại vào máy tính của người sử dụng khi truy cập vào các trang \nweb đó.  \n\nLây nhiễm virus hoặc chiếm quyền điều khiển máy tính thông qua các lỗi bảo \nmật hệ điều hành, ứng dụng sẵn có trên hệ điều hành hoặc phần mềm của hãng \nthứ ba: Điều này có thể khó tin đối với một số người sử dụng, tuy nhiên tin tặc \ncó thể lợi dụng các lỗi bảo mật của hệ điều hành, phần mềm sẵn có trên hệ điều \nhành (ví dụ Winidow Media Player) hoặc lỗi bảo mật của các phần mềm của \nhãng thứ ba (ví dụ Acrobat Reader) để lây nhiễm virus hoặc chiếm quyền kiểm \nsoát máy tính nạn nhân khi mở các file liên kết với các phần mềm này.  \n\nBiến thể \n\nMột hình thức trong cơ chế hoạt động của virus là tạo ra các biến thể của chúng. \nBiến thể của virus là sự thay đổi mã nguồn nhằm các mục đích tránh sự phát hiện \ncủa phần mềm diệt virus hoặc làm thay đổi hành động của nó. \n\nMột số loại virus có thể tự tạo ra các biến thể khác nhau gây khó khăn cho quá \ntrình phát hiện và tiêu diệt chúng. Một số biến thể khác xuất hiện do sau khi \nvirus bị nhận dạng của các phần mềm diệt virus, chính tác giả hoặc các tin tặc \nkhác (biết được mã của chúng) đã viết lại, nâng cấp hoặc cải tiến chúng để tiếp \ntục phát tán. \n\nVirus có khả năng vô hiệu hoá phần mềm diệt virus \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n142\n\nMột số virus có khả năng vô hiệu hoá hoặc can thiệp vào hệ điều hành làm tê liệt \n(một số) phần mềm diệt virus. Sau hành động này chúng mới tiến hành lây \nnhiễm và tiếp tục phát tán. Một số khác lây nhiễm chính vào phần mềm diệt \nvirus (tuy khó khăn hơn) hoặc ngăn cản sự cập nhật của các phần mềm diệt \nvirus. \n\nCác cách thức này không quá khó nếu như chúng nắm rõ được cơ chế hoạt động \ncủa các phần mềm diệt virus và được lây nhiễm hoặc phát tác trước khi hệ thống \nkhởi động các phần mềm này. Chúng cũng có thể sửa đổi file hots của hệ điều \nhành Windows để người sử dụng không thể truy cập vào các website và phần \nmềm diệt virus không thể liên lạc với server của mình để cập nhật. \n\n \n\n16.2.2 Denial of Service (DoS) và Brute Force Attack \n\nMột cuộc tấn công từ chối dịch vụ (tấn công DoS) hay tấn công từ chối dịch vụ \nphân tán (tấn công DDoS) là sự cố gắng làm cho tài nguyên của một máy tính \nkhông thể sử dụng được nhằm vào những người dùng của nó. Mặc dù phương \ntiện để tiến hành, động cơ, mục tiêu của tấn công từ chối dịch vụ là khác nhau, \nnhưng nói chung nó gồm có sự phối hợp, sự cố gắng ác ý của một người hay \nnhiều người để chống lại Internet site hoặc service (dịch vụ Web) vận hành hiệu \nquả hoặc trong tất cả, tạm thời hay một cách không xác định. Thủ phạm tấn công \ntừ chối dịch vụ nhằm vào các mục tiêu site hay server tiêu biểu như ngân hàng, \ncổng thanh toán thẻ tín dụng và thậm chí DNS root servers. \n\nMột phương thức tấn công phổ biến kéo theo sự bão hoà máy mục tiêu với các \nyêu cầu liên lạc bên ngoài, đến mức nó không thể đâp ứng giao thông hợp pháp, \nhoặc dáp ứng quá chậm. Trong điều kiện chung, các cuộc tấn công DoS được bổ \nsung bởi ép máy mục tiêu khởi động lại hoặc tiêu thụ hết tài nguyên của nó đến \nmức nó không cung cấp dịch vụ, hoặc làm tắc nghẽn liên lạc giữa người sử dụng \nvà nạn nhân. \n\nTấn công từ chối dịch vụ đựoc lưu ý sự vi phạm chính sách sử dụng đúng \ninternet của IAB(Internet Architecture Board). Chúng cũng cấu thành sự vi phạm \nluật dân sự. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n143\n\n \nNhận diện \n\nUS-CERT xác định dấu hiệu của một vụ tấn cống từ chối dịch vụ gồm có : \n\n Mạng thực thi chậm khác thường (mở file hay truy cập Website).  \n\n Không thể dùng một Website cụ thể.  \n\n Không có thể truy cập bất kỳ Website nào  \n\n Tăng lượng thư rác nhận được (như một trận \"boom mail\")  \n\n Không phải tất các các dịch vụ ngừng chạy,thậm chí đó là kết quả của \nmột hoạt động nguy hại, tất yếu của tấn công DoS. \n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nhttp://www.ebook.edu.vn\n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n\nVũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên \n \n\n144\n\nTấn công từ chối dịch cũng có thể dẫn tới vấn đề về nhánh mạng của máy đang \nbị tấn công. Ví dụ băng thông của router giữa Internet và Lan có thể bị tiêu thụ \nbởi tấn công, làm tổn hại không chỉ máy tính ý định tấn công mà còn là toàn thể \nmạng. Nếu cuộc tấn công dẫn tới tỉ lệ lớn thích đáng, toàn bộ vùng địa lý của kết \nnối Internet có thể bị tổn hại nằm ngoài sự hiểu biết của kẻ tấn công cấu hình \nchính xác, trang thiết bị mong manh. \n\nCác phương thức tấn công \n\nTấn công từ chối dịch vụ là một loại hình tấn công nhằm ngăn chặn những người \ndùng hợp lệ được sử dụng một dịch vụ nào đó. Các cuộc tấn công có thể được \nthực hiện nhằm vào bất kì một thiết bị mạng nào bao gồm là tấn công vào các \nthiết bị định tuyến, web, thư điện tử và hệ thống DNS. \n\nTấn công từ chối dịch vụ có thẻ được thực hiện theo một số cách nhất định. Có \nnăm kiểu tấn công cơ bản sau đây: \n\n Nhằm tiêu tốn tài nguyên tính toán như băng thông, dung lượng đĩa cứng \nhoặc thời gian xử lý  \n\n Phá vỡ các thông tin cấu hình như thông tin định tuyến  \n\n Phá vỡ các trạng thái thông tin như việc tự động reset lại các phiên TCP.  \n\n P","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2011/201111/20111113/snow_fire_/giao_trinh_mang_doanh_nghiep_6417.txt","sentences":[[1,"http://www.ebook.edu.vn LỜI NÓI ĐẦU Cùng với sự phát triển nhanh chóng của nền kinh tế"],[2,"Vấn đề ứng dụng hệ thống Mạng thông tin vào điều hành và sản xuất trong doanh nghiệp ngày càng được đẩy mạnh"],[3,"Nhà quản lý mong muốn Quản trị viên mạng thông tin phải nắm được hầu hết các công nghệ mạng để nhanh chóng triển khai, ứng dụng những công nghệ mạng tiên tiến vào phục vụ điều hành sản xuất cũng như lập kế hoạch xây dựng và bảo vệ hệ thống thông tin nội bộ của doanh nghiệp tránh khỏi mọi nguy cơ tấn công"],[4,"Với cuốn giáo trình này, tôi cố gắng tập trung đi sâu vào các công nghệ mới nhất hiện đang được áp dụng trong doanh nghiệp tại thời điểm hiện tại"],[5,"Giáo trình này gồm 16 bài trong đó có 09 bài giảng, 06 bài thực hành và 01 bài thảo luận"],[6,"Mục tiêu cuốn sách đi vào các vấn đề chính sau: Thiết kế lược đồ địa chỉ IP cho doanh nghiệp Cơ bản về công nghệ mạng không dây Vấn đề định tuyến và chuyển mạch trong mạng doanh nghiệp Triển khai các dịch vụ máy chủ (Mail Server, Web Server, DNS, DHCP\u2026) Cơ bản về bảo mật Mong muốn thì nhiều nhưng trong thời gian 3 tín chỉ của môn học này chúng ta chưa thể bao quát toàn bộ các công nghệ mạng áp dụng cho doanh nghiệp mà chỉ có thể đi vào những công nghệ chính"],[7,"Hi vọng từ đó sinh viên tự nghiên cứu, học hỏi để có thể làm chủ được các công nghệ và áp dụng tốt kiến thức đã học vào công việc mai sau"],[8,"Mọi ý kiến đóng góp của sinh viên và các bạn đồng nghiệp xin gửi về theo địa chỉ sau"],[9,"http://www.ebook.edu.vn Địa chỉ liên hệ: Vũ Khánh Quý - Bộ môn Mạng máy tính và Truyền thông - Khoa Công nghệ Thông tin, Đại học Sư phạm Kỹ thuật Hưng Yên Tel: (03213) 713153 Email: quyvk@utehy.edu.vn URL: http://www.utehy.edu.vn"],[10,"http://www.ebook.edu.vn Tên Module: Thiết kế mạng doanh nghiệp Mã Module: Giáo viên: Vũ Khánh Quý Ngành học: Công nghệ Thông tin Số giờ học: 140(30/30) Loại hình đào tạo: Chính qui Thời gian thực hiện: Học kỳ III Năm học: 2008/2009 Loại Module: LT+TH Phiên bản: 20090105 1"],[11,"Mục tiêu: Sau khi hoàn thành module này, người học có khả năng: Sau khi hoàn thành module này, người học có khả năng: - Đánh giá được các hoạt động của các thiết bị phần cứng và phần mềm trong một mô hình mạng LAN, WAN sẵn có - Tư vấn trong việc lựa chọn các thiết bị phần cứng phần mềm để thiết kế mạng LAN, WAN phù hợp với nhu cầu của doanh nghiệp nhỏ - Đánh giá được các yêu cầu về quản lý mạng, an ninh mạng và các ràng buộc khác trong quá trình thiết kế mạng - Thiết kế được mạng LAN trong tòa nhà phục vụ cho công tác giảng dạy và nghiên cứu - Thiết kế được mạng WAN cho Trường học phục vụ công tác đào tạo và quản lý của Nhà trường"],[12,"Module này giúp người học phát triển các năng lực: Phân tích (2); Tư vấn (2); Thực hiện (3); Thiết kế (3) và Bảo trì (2)"],[13,"2"],[14,"Điều kiện tiên quyết: Người học đã học Mạng máy tính"],[15,"3"],[16,"Mô tả module: Module này nhằm cung cấp cho người học các kiến thức để Thiết kế được các hệ thống mạng LAN/WAN; Kiểm tra, đánh giá hiệu năng hoạt động của hệ thống; Xử lý được các sự cố xảy ra; Có kỹ năng cơ bản về bảo mật trong hệ thống mạng doanh nghiệp nhỏ"],[17,""],[18,"http://www.ebook.edu.vn 4"],[19,"Nội dung module: Bài 1: Tổng quan về mạng doanh nghiệp 1.1.Giới thiệu môn học, phương pháp học 1.2.Cách sử dụng các phần mềm thiết kế giả lập VMWare, Boson 1.3.Giới thiệu hệ thống mạng thực tế của một số doanh nghiệp Bài 2: Địa chỉ mạng 2.1.Địa chỉ IP và Subnetmask 2.2.Các loại địa chỉ IP 2.2.1.Địa chỉ IP Private, Public 2.2.3.Địa chỉ IP Unicast, Multicast, Broadcast 2.3.Nguyên lý dịch chuyển địa chỉ IP (NAT) 2.4 Nguyên lý cấp phát DHCP Bài 3: Công nghệ Wireless 3.1"],[20,"Tổng quan về Wireless 3.2"],[21,"Các chuẩn Wireless 3.3"],[22,"Cấu hình mạng Wireless 3.3.1"],[23,"Các thành phần thiết lập mạng mạng WLAN 3.3.2"],[24,"WLAN và SSID 3.3.3"],[25,"Cấu hình một mạng WLAN đơn giản Bài 4: Cơ bản về cấu hình định tuyến 4.1"],[26,"Các giao thức định tuyến 4.2"],[27,"Giao thức định tuyến nội vùng RIP 4.3"],[28,"Giao thức định tuyến động OSPF Bài 5:Thực hành về định tuyến Cấu hình định tuyến cho các mạng Bài 6:Cấu hình NAT trên Router 6.1"],[29,"Khái niệm về NAT 6.2"],[30,"Nat tĩnh \u2013 Static NAT 6.3"],[31,"Nat động \u2013 Dynamic NAT"],[32,"http://www.ebook.edu.vn 6.4"],[33,"Nat Overload \u2013 PAT Bài 7:Thực hành Cấu hình NAT trên Router Bài 8:Cấu hình chuyển mạch (Switching) 8.1"],[34,"Cơ bản về cấu hình Switch 8.2"],[35,"Cấu hình VLAN Bài 9:Thực hành Cấu hình chuyển mạch và VLAN Bài 10: Thảo luận Một số chủ đề thảo luận Các kỹ năng cần có của một kỹ sư trong vai trò HelpDesk Quy trình thiết kế và nâng cấp hệ thống mạng đã có Tìm hiểu các giao thức mã hoá trong mạng WLAN Mạng Wimax Tìm hiểu VoIP Công nghệ VPN Bài 11: Cấu hình các Web Server, DNS Server 11.1"],[36,"Dịch vụ phân giải tên miến \u2013 DNS Server 11.1.1"],[37,"Nguyên lý phân giải tên miền 11.1.2"],[38,"Xây dựng máy chủ phân giải tên miền cho mạng doanh nghiệp 11.2"],[39,"Dịch vụ Web Server 11.2.1"],[40,"Giao thức HTTP và HTTPS 11.2.2"],[41,"Triển khai Website doanh nghiệp trên Server Bài 12: Thực hành cấu hình các dịch vụ mạng cơ bản 12.1"],[42,"Cấu hình Active Directory (AD) 12.2 Cấu hình IIS 12.3 Cấu hình DNS 12.4 Cấu hình DHCP Bài 13"],[43,"Xây dựng một Mail Server 13.1"],[44,"Giao thức SMTP, POP3, IMAP 13.2"],[45,"Triển khai Mail Server cho doanh nghiệp Bài 14"],[46,"Thực hành Xây dựng một Mail Server Triển khai Mail Server cho doanh nghiệp Bài 15: Thực hành Proxy và Firewall"],[47,"http://www.ebook.edu.vn 15.1"],[48,"Nguyên lý hoạt động của Proxy 15.2"],[49,"Nguyên lý hoạt động của Firewall 15.3"],[50,"Triển khai xây dựng hệ thống tường lửa cho doanh nghiệp Bài 16"],[51,"Cơ bản về bảo mật 16.1 Các nguy cơ tiềm tàng trên mạng 16.2"],[52,"Các phương thức tấn công 16.2.1 Viruses, Worms, Trojan Horses"],[53,"16.2.2 Denial of Service (DoS) và Brute Force Attack 16.3"],[54,"Các chính sách bảo mật 5"],[55,"Tài liệu tham khảo: Sách giáo trình, Slide do giáo viên biên soạn"],[56,"Sách tham khảo: [1]"],[57,"Cisco System, \"CCNA Discovery1 4.0\", Cisco System, 2007 [2]"],[58,"Cisco System, \"CCNA Discovery2 4.0\", Cisco System, 2007 [3]"],[59,"J.C"],[60,"Mackin and Ian McLean, \u201cWindows Server 2003 Network Infrastructure\u201d, Microsoft Press, 2005 6"],[61,"Học liệu: Giáo trình lưu hành nội bộ, sách tham khảo, hệ thống bài tập mẫu, bài tập tự làm, máy tính, tài nguyên trên Internet, Projector"],[62,"7"],[63,"Đánh giá: Hình thức đánh giá: - Kiểm tra giữa kỳ (Triển khai trên môi trường giả lập): 20% - Đánh giá quá trình (kết quả các buổi thực hành): 10% - Kiểm tra cuối kỳ: 70% Tiêu chí đánh giá: - Kỹ năng thiết kế, xây dựng bài toán - Kỹ năng cài đặt bài toán Người đánh giá: Giáo viên giảng dạy và người học"],[64,"8"],[65,"Kế hoạch học tập Bố trí giảng dạy module Mạng doanh nghiệp (3 tín chỉ) như sau: 27 tiết lý thuyết (thực hiện trong 9 buổi, mỗi buổi 3 tiết), 36 tiết sinh viên làm tiểu luận (giáo viên tự bố trí lịch gặp, hướng dẫn sinh viên), 18 tiết thực hành (thực hiện trong 6 buổi, mỗi buổi 3 tiết) và 90 giờ chuẩn bị cá nhân (đề cương 130 trang)"],[66,"http://www.ebook.edu.vn"],[67,"http://www.ebook.edu.vn 8"],[68,"Kế hoạch học tập: Bài Mục tiêu Hoạt động giáo viên SG GV Hoạt động sinh viên SG SV Điều kiện thực hiện 1 - Xác định được vị trí, vai trò và nội dung của Module trong chương trình đào tạo - Xây dựng được kế hoạch và phương pháp học tập phù hợp"],[69,"- Lựa chọn được nguồn học liệu phục vụ cho môn học - Trình bày được những lợi ích đem lại cho doanh nghiệp khi có hệ thống mạng"],[70,"- Trình bày được các bước để trở thành một nhà quản trị mạng trong doanh nghiệp - Nêu mục tiêu, nội dung và kế hoạch học tập của Module - Giới thiệu nguồn học liệu phục vụ cho học Mudule, phương pháp học tập và các tiêu chí đánh giá - Tổ chức thảo luận các lợi ích đem lại cho doanh nghiệp khi có hệ thống mạng - Quá trình để trở thành một nhà nhà quản trị mạng trong doanh nghiệp - Kết luận và tổng kết các nội dung thảo luận - Trả lời các câu hỏi của sinh viên - Phát phiếu yêu cầu các nội dung cần nghiên cứu trong bài 2 3h - Lĩnh hội và đặt các câu hỏi thắc mắc - Lựa chọn được phương pháp học tập và nguồn học liệu phục vụ cho Module - Thảo luận các nội dung trong phiếu yêu cầu - Ghi chú những vấn đề cơ bản - Nêu các câu hỏi thắc mắc 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[71,"2 - Trình bày cấu trúc địa chỉ IP v4 - Mối quan hệ giữa Subnetmask và địa chỉ IP"],[72,"- Tổ chức thảo luận về kiến trúc Ipv4 và mối liên quan giữa địa chỉ IP và Subnetmask - Đưa ra bài tập yêu cầu sinh viên 3h - Trình bày được cấu trúc IP v4 - Hiểu rõ mối quan hệ giữa địa chỉ IP và Subnetmask 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[73,""],[74,"http://www.ebook.edu.vn - Thự hiện phân chia dải địa chỉ IP thành các Subnet có subnetmask bằng nhau và không bằng nhau - Thiết kế được lược đồ IP phù hợp cho một doanh nghiệp"],[75,"thực hiện phân chia địa chỉ IP thành các Subnet có Subnetmask bằng nhau và không bằng nhau"],[76,"- Tư vấn và giải đáp các vấn đề khó khăn khi sinh viên gặp vướng mắc cũng như cách tính toán và phân chia một dải IP thành các Subnet theo đáp ứng yêu cầu của người sử dụng - Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra 3 - Phân tích được các ưu nhược điểm của mạng không dây và mạng có dây - Trình bày được các mô hình ứng dụng mạng không dây - Trình bày được các chuẩn mạng 802.11a,b,g và đặc điểm của mỗi chuẩn"],[77,"- Trình bày được chức năng của các thiết bị cơ bản trong mạng WLAN - Trình bày được khái niệm kênh truyền và SSID trong mạng WLAN - Tổ chức thảo luận về mạng WLAn, các ưu nhược điểm và các mô hình ứng dụng - Giải đáp cho sinh viên các vấn đề khó khăn và định hướng cho sinh viên thảo luận theo đúng chủ đề - Trả lời các câu hỏi thắc mắc của sinh viên - Cấu hình thử nghiệm mạng WLAN 3h - Thảo luận theo các nội dung giáo viên đưa ra - Nêu các câu hỏi, thắc mắc trong quá trình thảo luận - Quan sát các gợi ý và phân tích của giáo viên và để từ đó đưa ra những nhận định và ý kiến của mình về vấn đề thảo luận"],[78,"- Cấu hình thử nghiệm mạng WLAN với chức năng cơ bản 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu, AccessPoint, Card mạng không dây"],[79,""],[80,"http://www.ebook.edu.vn - Cấu hình mạng WLAN đơn giản 4 - Trình bày được các giao thức định tuyến - So sánh định tuyến tĩnh và động, Distance Vector và Link State - Đặc điểm của định tuyến Rip v1 - Cấu hình định tuyến hệ thống sử dụng Rip v1 - Tổ chức thảo luận về định tuyến và Router - Tổ chức thảo luận về định tuyến tĩnh và định tuyến động, Distance Vector và Linkstate - Hướng dẫn sinh viên cấu hình định tuyến hệ thống mạng nội bộ - Trả lời các câu hỏi thắc mắc của sinh viên 3h - Thảo luận về các chủ đề do giáo viên hướng dẫn - Quan sát và thực hiện cấu hình LAB định tuyến với giao thức Rip V1 - Quan sát cách gợi ý và phân tích của giáo viên để từ đó đưa ra những nhận định và ý kiến của mình về vấn đề thảo luận"],[81,"4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[82,"5 - Thiết kế được lược đồ địa chỉ IP cho doanh nghiệp - Thực hiện cấu hình định tuyến cho các mạng bằng định tuyến tĩnh và định tuyến động với Rip v1, Rip v2 - Đánh giá được ưu nhược điểm giữa định tuyến tĩnh và định tuyến động - Đưa trước tài liêu thảo luận cho sinh viên - Thảo luận thiết kế lược đồ địa chỉ IP - Cho sinh viên phát biểu ý kiến về các vấn đề thảo luận theo nhóm đã phân công trước - Trả lời các câu hỏi thắc mắc của sinh viên - Nhận xét, đánh giá và tổng kết vấn 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra - Thiết kế lược đồ địa chỉ IP cho doanh nghiệp và cấu 6h Phòng học thực hành có trang bị máy tính, máy chiếu"],[83,""],[84,"http://www.ebook.edu.vn đề thảo luận hình định tuyến giữa các mạng 6 - Trình bày được các khái niệm về NAT tĩnh, NAT động - So sánh ưu nhược điểm của các loại NAT - Trình bày nguyên lý hoạt động của PAT - Cấu hình PAT trên Router cho phép các IP trong LAN ra IP Public - Tổ chức thảo luận cho sinh viên hiểu rõ khái niệm về NAT, so sánh ưu nhược điểm mỗi loại - Tổ chức thảo luận về PAT và sự cần thiết có PAT - Hướng dẫn sinh viên thực hiện bài lab cấu hình PAT - Cung cấp các tài liệu liên quan đến kiến thức NAT - Trả lời các câu hỏi thắc mắc của sinh viên trong quá trình thực hành - Nhận xét, đánh giá và tổng kết vấn đề thảo luận 3h - Chủ động tham gia thảo luận về chủ đề do giáo viên hướng dẫn - Trình bày các nội dung mà mình đã tìm hiểu - Thực hiện tìm hiểu và cấu hình bài lab do giáo viên đưa ra 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[85,""],[86,"http://www.ebook.edu.vn 7 - So sánh ưu nhược điểm mỗi loại NAT - Cấu hình PAT trên Router để NAT các IP trong LAN ra IP Public - Phân tích được nguyên lý hoạt động chuyển đổi địa chỉ IP - Thảo luận thiết kế lược đồ địa chỉ IP - Cho sinh viên phát biểu ý kiến về các vấn đề thảo luận theo nhóm đã phân công trước - Chuẩn bị bài thực hành - Trả lời các câu hỏi thắc mắc của sinh viên trong quá trình thực hành - Kiểm tra tiến độ thực hiện bài tập thực hành của sinh viên - Giao công việc cho tuần tiếp theo 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra - Thực hành NAT các IP trong LAN ra IP Public 6h Phòng học thực hành có trang bị máy tính, máy chiếu"],[87,"8 - Trình bày nguyên lý hoạt động cơ bản của Switch - Trình bày khái niệm VLAN và những ứng dụng của VLAN trong thực tiễn - Cấu hình VLAN trên Switch - Sử dụng Router định tuyến giữa các VLAN - Tổ chức thảo luận cho sinh viên tìm hiểu nguyên lý hoạt động của Switch hỗ trợ VLAN, khái niệm VLAN và nguyên lý hoạt động của gói tin trong VLAN - Cung cấp các tài liệu liên quan đến kiến thức VLAN, định tuyến giữa các VLAN với Router - Trả lời các câu hỏi thắc mắc của sinh viên trong quá trình thực hành - Nhận xét, đánh giá và tổng kết vấn đề thảo luận 3h - Chủ động tham gia thảo luận về chủ đề do giáo viên hướng dẫn - Trình bày các nội dung mà mình đã tìm hiểu - Quan sát cách gợi ý và phân tích của giáo viên để từ đó đưa ra những nhận định và ý kiến của mình về vấn đề thảo luận"],[88,"- Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[89,""],[90,"http://www.ebook.edu.vn 9 - Trình bày nguyên lý hoạt động của VLAN và các ứng dụng VLAN trong thực tiễn - Cấu hình VLAN trên Switch hỗ trợ VLAN - Cấu hình định tuyến giữa các VLAN sử dụng Router -Ứng dụng mô hình mạng có VLAN vào thiết kế hệ thống mạng trong doanh nghiệp - Thảo luận nguyên lý hoạt động của VLAN - Cho sinh viên phát biểu ý kiến về các vấn đề thảo luận theo nhóm đã phân công trước - Chuẩn bị bài thực hành - Trả lời các câu hỏi thắc mắc của sinh viên trong quá trình thực hành - Kiểm tra tiến độ thực hiện bài tập thực hành của sinh viên - Giao công việc cho tuần tiếp theo 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra - Thực hành bài lab chia VLAN và định tuyến giữa các VLAN sử dụng Router 6h Phòng học thực hành có trang bị máy tính, máy chiếu, Switch hỗ trợ VLAN và Router"],[91,"10 - Phân nhóm và giao chủ đề thảo luận cho từng nhóm - Phân nhóm sinh viên - Chuẩn bị các chủ đề thảo luận - Hướng dẫn sinh viên các bước thực hiện và nguồn tài liệu cần tìm hiểu - Nhận xét, đánh giá và tổng kết vấn đề giao chủ đề - Nhận nhóm và báo cáo chủ đề mong muốn tìm hiểu với giáo viên nếu có - Tham gia các hoạt động do giáo viên tổ chức và đưa ra các câu hỏi thắc mắc cần giải đáp - Tìm hiểu các nguồn tài liệu do giáo viên cung cấp Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[92,"http://www.ebook.edu.vn 11 - Trình bày nguyên lý phân giải tên miền của máy chủ DNS và nhiệm vụ của việc phân giải tên miền - So sánh hai giao thức http và https - Trình bày cách cấu hình máy chủ DNS và Web Server - Thảo luận vê nhiệm vụ của viện phân giải tên miền và nguyên lý phân giải tên miền - Thảo luận các giao thức truy cập web http và https - Hướng dẫn thực hiện lab cấu hình web server và DNS server - Trả lời các câu hỏi, thắc mắc của sinh viên - Kết luận, tổng kết các nội dung thảo luận 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra - Quan sát cách gợi ý và phân tích của giáo viên để từ đó đưa ra những nhận định và ý kiến của mình về vấn đề thảo luận 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[93,"12 - Phân tích được nguyên lý làm việc của máy chủ DNS và web Server - Thực hiện Public một website đơn giản cho phép truy cập website với tên miền Nam - Bảo mật dữ liệu truy cập với https - Cấu hình cấp phát IP động cho các Client - Phát tài liêu thảo luận cho sinh viên - Thảo luận về nguyên lý làm việc của DNS Server và web Server - Thảo luận về sự cần thiết xây dựng một site nội bộ cho doanh nghiệp - Giao bài thực hành - Kiểm tra tiến độ thực hiện bài tập thực hành của sinh viên - Đánh giá và gợi ý các cách làm cho sinh viên - Giao công việc cho tuần tiếp theo 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Thực hiện bài lab xây dựng một site nội bộ cho doanh nghiệp cho phép các nhân viên truy cập vào thông qua tên miền với Ip cho các Client được cấp phát động 6h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[94,""],[95,"http://www.ebook.edu.vn 13 - Trình bày các giao thức gửi nhận mail POP3, SMTP, IMAP - Gửi và nhận thư sử dụng SMTP qua Telnet - Cấu hình Mail server phục vụ cho doanh nghiệp - Thảo luận về nhu cầu và sự cần thiết triển khai hệ thống mail trong doanh nghiệp - Thảo luận về các giao thức gửi nhận mail POP3, SMTP, IMAP - Hướng dẫn sinh viên thực hiện Lab cấu hình triển khai hệ thống Mail với Mdaemon Server - Đánh giá và gợi ý các cách làm cho sinh viên - Nhận xét, đánh giá và tổng kết vấn đề thảo luận 3h - Tham gia vào thảo luận, đưa ra câu hỏi - Tham gia trả lời những câu hỏi tình huống mà giáo viên đưa ra - Tham gia thực hiện bài lab do giáo viên đưa ra - Quan sát cách gợi ý và phân tích của giáo viên để từ đó đưa ra những nhận định và ý kiến của mình về vấn đề thảo luận 4h Phòng học lý thuyết có trang bị máy tính, máy chiếu"],[96,"14 - Phân tích được nguyên lý làm việc của máy chủ Mail Server - Gửi và nhận thư sử dụng giao thức SMTP thông qua telnet - Cấu hình máy chủ Mail Server - Tổ chức thảo luận về nguyên lý làm việc của máy chủ Mail Server - Các lệnh thực hiện nhận và gửi mail sử dụng SMTP qua telnet - Giao bài thực hành - Kiểm tra tiến độ thực hiện bài tập thực hành của sinh viên - Đánh giá và gợi ý các cách làm cho sinh viên - Giao công việc cho tuần tiếp theo 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Thực hiện bài Lab triển khai Mail Server cho doanh nghiệp 6h Phòng học thực hành có trang bị máy tính, máy chiếu"],[97,""],[98,"http://www.ebook.edu.vn 15 - So sánh ưu nhược điểm và nguyên lý hoạt động của mỗi loại Firewall - Xây dựng mô hình hệ thống mạng doanh nghiệp và thiết lập hệ thống tường lửa bảo vệ hệ thống mạng doanh nghiệp - Tổ chức thảo luận các loại firewall và ưu nhược điểm mỗi loại - Giao bài thực hành - Kiểm tra tiến độ thực hiện bài tập thực hành của sinh viên - Đánh giá và gợi ý các cách làm cho sinh viên 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Thực hiện bài Lab triển khai tường lửa bảo vệ hệ thống mạng của doanh nghiệp 6h Phòng thực hành Tài liệu tham khảo 16 - Trình bày các nguy cơ trên mạng - Phận biệt được các đặc điểm của Virus, Trojan, Worm - Nhận dạng các kiểu tấn công DoS - Giải mã Pass với Brute Force Attack - Các chính sách bảo mật - Tổ chức thảo luận các nguy cơ trên mạng - Tổ chức thảo luận các laọi Virus, Worm, Trojan - Tổ chức thảo luận các kiểu tấn công DoS - Đánh giá và gợi ý các cách làm cho sinh viên - Nhận xét, đánh giá và tổng kết vấn đề thảo luận 3h - Sinh viên đọc trước tài liệu về vấn đề thảo luận - Tham gia vào thảo luận, đưa ra câu hỏi - Thực hiện bài Lab triển khai tường lửa bảo vệ hệ thống mạng của doanh nghiệp 4h Phòng lý thuyết có trang bị máy chiếu Tài liệu tham khảo Thông qua khoa/ bộ môn Giáo viên"],[99,"http://www.ebook.edu.vn"],[100,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 19 Bài 1: Tổng quan về mạng doanh nghiệp ................................................................................"],[101,"21 1.1 Giới thiệu môn học, phương pháp học .........................................................................."],[102,"21 1.2.Cách sử dụng các phần mềm thiết kế giả lập VMWare, Boson ...................................."],[103,"22 1.2.1 Phần mềm VMWare ..............................................................................................."],[104,"22 1.2.2 Phần mềm Boson Netsim........................................................................................"],[105,"23 1.3"],[106,"Giới thiệu hệ thống mạng thực tế của một số doanh nghiệp........................................."],[107,"24 Bài 2: Địa chỉ mạng ................................................................................................................."],[108,"26 2.1.Địa chỉ IP và Subnetmask.............................................................................................."],[109,"26 2.2"],[110,"Các loại địa chỉ IP........................................................................................................."],[111,"26 2.2.1"],[112,"Địa chỉ IP Private, IP Public .................................................................................."],[113,"26 2.2.2.Địa chỉ IP Unicast, Multicast, Broadcast ................................................................"],[114,"27 2.3.Nguyên lý dịch chuyển địa chỉ IP (NAT) ......................................................................"],[115,"27 2.3.1 Các thuật ngữ trong NAT ......................................................................................."],[116,"27 2.3.2"],[117,"Các kiểu NAT ........................................................................................................"],[118,"28 2.4"],[119,"Nguyên lý thu nhận một địa chỉ IP từ DHCP Server...................................................."],[120,"29 Bài 3: Công nghệ Wireless ......................................................................................................"],[121,"31 3.1"],[122,"Tổng quan về Wireless ................................................................................................."],[123,"31 3.2"],[124,"Các chuẩn Wireless......................................................................................................."],[125,"31 3.3"],[126,"Cấu hình mạng Wireless ..............................................................................................."],[127,"32 3.3.1"],[128,"Các thành phần thiết lập mạng WLAN.................................................................."],[129,"32 3.3.2"],[130,"WLAN và SSID....................................................................................................."],[131,"40 3.3.3"],[132,"Cấu hình một mạng WLAN đơn giản...................................................................."],[133,"41 Bài 4: Cơ bản về cấu hình định tuyến......................................................................................"],[134,"42 4.1"],[135,"Các giao thức định tuyến .............................................................................................."],[136,"42 4.2"],[137,"Giao thức định tuyến nội vùng RIP .............................................................................."],[138,"49 4.3"],[139,"Giao thức định tuyến động OSPF ................................................................................."],[140,"55 Bài 5:Thực hành về định tuyến................................................................................................"],[141,"62 Bài 6: Cấu hình NAT trên Router............................................................................................"],[142,"63 6.1"],[143,"Khái niệm chung về NAT............................................................................................."],[144,"63 6.2 Nat tĩnh \u2013 Static NAT ...................................................................................................."],[145,"66 6.3"],[146,"Nat động \u2013 Dynamic NAT............................................................................................"],[147,"67 6.4"],[148,"Nat Overload \u2013 PAT ....................................................................................................."],[149,"67 Bài 7:Thực hành Cấu hình NAT trên Router..........................................................................."],[150,"69 Bài 8:Cấu hình chuyển mạch (Switching) ..............................................................................."],[151,"70 8.1"],[152,"Cấu hình Switch và VLAN..........................................................................................."],[153,"70 Bài 9:Thực hành Cấu hình chuyển mạch và VLAN................................................................"],[154,"75 Bài 10: Thảo luận....................................................................................................................."],[155,"77 Bài 11: Cấu hình các Web Server, DNS Server ......................................................................"],[156,"78 11.1"],[157,"Dịch vụ phân giải tên miến \u2013 DNS Server.................................................................."],[158,"78 11.1.1"],[159,"Nguyên lý phân giải tên miền .............................................................................."],[160,"78 11.1.2"],[161,"Xây dựng máy chủ phân giải tên miền cho mạng doanh nghiệp........................."],[162,"80 11.2"],[163,"Dịch vụ Web Server...................................................................................................."],[164,"89 11.2.1"],[165,"Giao thức HTTP và HTTPS................................................................................."],[166,"89 11.2.2"],[167,"Triển khai Website doanh nghiệp trên Server ....................................................."],[168,"89 Bài 12: Thực hành cấu hình các dịch vụ mạng cơ bản .........................................................."],[169,"103"],[170,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 20 Bài 13"],[171,"Xây dựng một Mail Server........................................................................................"],[172,"104 13.1"],[173,"Giao thức SMTP, POP3, IMAP................................................................................"],[174,"104 13.2"],[175,"Triển khai Mail Server cho doanh nghiệp ................................................................"],[176,"110 Bài 14"],[177,"Thực hành Xây dựng một Mail Server......................................................................"],[178,"115 Bài 15: Thực hành Proxy và Firewall ...................................................................................."],[179,"116 15.1"],[180,"Nguyên lý hoạt động của Proxy................................................................................"],[181,"116 15.2"],[182,"Nguyên lý hoạt động của Firewall ............................................................................"],[183,"120 15.3"],[184,"Triển khai xây dựng hệ thống tường lửa cho doanh nghiệp ....................................."],[185,"127 Bài 16: Cơ bản về bảo mật....................................................................................................."],[186,"128 16.1"],[187,"Một số nguy cơ tấn công trên mạng.........................................................................."],[188,"128 16.2"],[189,"Các phương thức tấn công ........................................................................................"],[190,"130 16.2.1 Viruses, Worms, Trojan Horses.........................................................................."],[191,"130 16.2.2 Denial of Service (DoS) và Brute Force Attack ................................................."],[192,"142 16.3"],[193,"Các chính sách bảo mật ............................................................................................"],[194,"145"],[195,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 21 Bài 1: Tổng quan về mạng doanh nghiệp 1.1 Giới thiệu môn học, phương pháp học Với xu thế ứng dụng hệ thống thông tin vào tất cả các hoạt động sản xuất của các doanh nghiệp, vấn đề triển khai một hệ thống mạng khi xây dựng một doanh nghiệp là điều tất yếu"],[196,"Do vậy nhu cầu nhân lực ở trình độ chuyên gia trong lĩnh vực mạng doanh nghiệp trên thị trường lao động hiện nay đang rất nhiều"],[197,"Mạng doanh nghiệp là môn học được giảng dạy sau Module Mạng cơ bản và trước Module Bảo mật mạng và Module Mạng thế hệ mới"],[198,"Mục đích của môn học giúp sinh viên đạt được các kỹ năng về quản trị mạng LAN, tư vấn, thiết kế và xây dựng được một hệ thống mạng cho doanh nghiệp có quy mô nhỏ với các yêu cầu cụ thể như sau: - Đánh giá được các hoạt động của các thiết bị phần cứng và phần mềm trong một mô hình mạng LAN, WAN sẵn có - Tư vấn trong việc lựa chọn các thiết bị phần cứng phần mềm để thiết kế mạng LAN, WAN phù hợp với nhu cầu của doanh nghiệp nhỏ - Đánh giá được các yêu cầu về quản lý mạng, an ninh mạng và các ràng buộc khác trong quá trình thiết kế mạng - Thiết kế được mạng LAN trong tòa nhà phục vụ cho công tác giảng dạy và nghiên cứu - Thiết kế được mạng WAN cho Trường học phục vụ công tác đào tạo và quản lý của Nhà trường"],[199,"Đây là môn học mang tính ứng dụng thực tiễn rất cao do vậy đòi hỏi sinh viên chuẩn bị kỹ các tài liệu và phương tiện học tập cần thiết"],[200,"Gồm có - Các phần mềm giả lập thiết kế mạng : - VMWare Simulator, Boson Netsim Simulator - ISA Server - Mail Exchange Server, Mail Mdeamon Server - Sách giáo trình, Slide do giáo viên biên soạn"],[201,""],[202,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 22 - Sách tham khảo: [1]"],[203,"Cisco System, \"CCNA Discovery1 4.0\", Cisco System, 2007 [2]"],[204,"Cisco System, \"CCNA Discovery2 4.0\", Cisco System, 2007 [3]"],[205,"J.C"],[206,"Mackin and Ian McLean, \u201cWindows Server 2003 Network Infrastructure\u201d, Microsoft Press, 2005 Trong quá trình học tập sinh viên cần chủ động đọc trước tài liệu tại nhà, các tài liệu do giáo viên giao cho về nhà tự học, tham gia trao đổi kiến thức trên forum của nhà trường và các forum khác như : \u2022 http://quantrimang.com \u2022 http://nhatnghe.com.vn \u2022 http://vnpro.org"],[207,"1.2.Cách sử dụng các phần mềm thiết kế giả lập VMWare, Boson 1.2.1 Phần mềm VMWare VMWare là phần mềm giả lập cho phép cài đặt nhiều hệ điều hành trên một máy tính có cấu hình mạnh"],[208,"VMWare cho phép chúng ta cài nhiều hệ điều hành khác nhau như Window XP, Window Server 2003, Window Vista, Window Server 2008, Linux.."],[209,"trên cùng một máy tính và tại một thời điểm có thể cùng khởi động nhiều máy tính ảo trên một máy tính thật"],[210,"Đây là một tiện ích vô cùng thú vị và cần thiết cho các sinh viên khi học về mạng máy tính và cần cấu hình một lúc nhiều hệ thống khác nhau tạo thành một hệ thống mạng ảo"],[211,""],[212,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 23 Trên đây là hình khi máy ảo VMWare đang cùng lúc được cài đặt và chạy cả 03 hệ điều hành gồm Window Server 2003, Window XP và Red Hat Linux để thực tập"],[213,"1.2.2 Phần mềm Boson Netsim Boson Netsim là phần mềm cho phép giả lập các hoạt động của các thiết bị mạng Cisco"],[214,"Với thị phần chiếm trên 70% toàn thế giới về thiết bị mạng, các thiết bị mạng của cisco luôn là lựa chọn số một cho tất cả các nhà thiết kế và triển khai hệ thống do độ ổn định và tính tin cậy cũng như sự bảo đảm của Cisco trong vấn đề an toàn thông tin"],[215,"Boson Netsim sau khi cài đặt gồm 02 tiện ích con : \u2022 Boson Netsim Design \u2022 Boson netsim Simulator"],[216,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 24 Boson Netsim Design là tiện ích cho phép chúng ta thiết kế các mô hình mạng ảo khi không có điều kiện tiếp xúc với thiết bị thật"],[217,"Dù vậy Boson Design có thể cho phép giả lập đến 90% các mô hình thật"],[218,"Boson Netsim được thực hiện sau khi bạn đã thiết kế hệ thống giả lập"],[219,"Nhiệm vụ của nó là tạo ra môi trường giả lập để thực hiện các câu lệnh cấu hình hệ thống đã được thiết kế bởi Boson Design trên môi trường CLI (Conmand Line Interface)"],[220,"1.3"],[221,"Giới thiệu hệ thống mạng thực tế của một số doanh nghiệp Giới thiệu tổng quan sơ đồ hệ thống mạng một số doanh nghiệp"],[222,"Trong hình là sơ đồ hệ thống mạng Trường ĐH SPKT Hưng Yên"],[223,""],[224,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 25"],[225,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 26 Bài 2: Địa chỉ mạng 2.1.Địa chỉ IP và Subnetmask Kiến thức về địa chỉ IP và các kiến thức liên quan đến Mô hình TCP/IP, Subneting đã được trang bị tại Module Mạng cơ bản, đây là một khối kiến thức nền tảng rất quan trọng, sinh viên cần xem lại tài liệu đã học"],[226,"Để ôn tập lại khối kiến thức này sinh viên cần hoàn tất bài tập sau:"],[227,"Hệ thống mạng của công ty ABC như hình vẽ, công ty được cấp phát dải đỉa chỉ 192.168.0.0/16"],[228,"Thực hiện chia dải địa chỉ trên thành các Subnet thoả mãn điều kiện số host trong mỗi Subnet như trên hình với điều kiện tối ưu hoá không gian địa chỉ IP"],[229,"2.2"],[230,"Các loại địa chỉ IP 2.2.1"],[231,"Địa chỉ IP Private, IP Public IP private là những IP không được định tuyến trên Internet, bao gồm các dải địa chỉ sau: 10.0.0.0 --> 10.255.255.255 172.16.0.0 --> 172.16.31.255 192.168.0.0 --> 192.168.255.255 1000 host \u2013 LAN1 500 host \u2013 LAN3 250 host \u2013 LAN 2"],[232,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 27 Các dải địa chỉ IP còn lại của lớp A, B, C là những địa chỉ IP Public (thuộc quyền sở hữu của ISP và nhà cung cấp địa chỉ Internet) 2.2.2.Địa chỉ IP Unicast, Multicast, Broadcast Địa chỉ Broadcast là địa chỉ quảng bá cho một Subnet theo chiều từ PC đến tất cả các PC trong cùng Subnet : PC-> all PC Địa chỉ Unicast là địa chỉ cho phép gửi từ một địa chỉ đến một địa chỉ khác : PC->PC Địa chỉ Multicast là địa chỉ cho phép gửi từ một host đến một nhóm host khác: PC-> Group PC, các địa chỉ này thuộc lớp D"],[233,"2.3.Nguyên lý dịch chuyển địa chỉ IP (NAT) 2.3.1 Các thuật ngữ trong NAT Khi một máy thực hiện NAT sẽ có cả 2 chiều out và in theo quy định của Interface - Cisco sử dụngthuật ngữ 2 chiều này của NAT gọi là inside và outside, các nhóm địa chỉ trong NAT bao gồm: + Inside local: nhóm địa chỉ bên trong + Inside global: địa chỉ toàn cục bên trong (địa chỉ này đại diện cho các host của bạn kết nối ra ngoài Internet, chính là địa chỉ mà ISP cấp cho bạn) + Outside local address : là địa chỉ riêng của host bên ngoài mạng nội bộ + Outside global address: là địa chỉ public của host bên ngoài (vd www.yahoo.com) khi host bên trong thực hiện NAT để chuyển đổi IP, quá trình NAT như sau: inside local ip address ----- inside global ip address ----- outside global ip address vd: 192.168.1.2 ----- 58.187.41.17:2412 ------- 209.191.93.52"],[234,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 28 Chẳng hạn, khi vào trang web www.yahoo.com, đầu tiên sẽ có một request tới web server yahoo, đây chính là thực hiện NAT outside, khi bạn nhận được reply từ Yahoo server, quá trình ngược lại, lúc này chính là thực hiện NAT inside NAT inside ngược lại với NAT outside, khi gói dữ liệu đến được thiết bị thực hiện NAT, nó xem trong bảng NAT (NAT table) và thấy rằng 58.187.41.17:2412 tương ứng với 192.168.1.2, lúc đó NAT sẽ thực hiện đổi lại địa chỉ IP của gói tin và gói dữ liệu đó sẽ đến được đúng địa chỉ của máy trong LAN của bạn"],[235,"Hoàn toàn tương tự như vậy với inbound và outbound (chỉ khác nó là thuật ngữ của Microsoft), nếu có dùng chỉ số port trong quá trình chuyển đổi thì đó là PAT, còn chỉ dùng địa chỉ IP thì lúc đó chuyển đổi là NAT Câu lệnh net use thường dùng để map share trong mạng lan (tuy vậy bạn có thể map một máy khác qua Internet, nếu máy đó phép share như vậy - chẳng hạn đã NAT hết port và cho phép hết các service), kết nối trong Lan, hay kết nối qua Internet đều có thể thực hiện giống nhau, qua Internet thì chỉ bị hạn chế bởi tốc độ và chất lượng, thường là chậm hơn nhiều so với mạng LAN, tuy vậy ít ai dùng lệnh net use để map một share từ ngoài Internet, thường dùng các công cụ khác, như là FTP, HTTP.."],[236,"và các công cụ chia sẻ qua Internet"],[237,"2.3.2"],[238,"Các kiểu NAT Có 2 kiểu NAT cơ bản là NAT và PAT : Giống nhau Dùng để chuyển đổi địa chỉ IP private thành địa chỉ IP public, giúp cho máy trong mạng Lan của bạn có thể kết nối với Internet, và giúp tiết kiệm không gian của địa chỉ IP public, một cty có thể chỉ cần 1 hay vài địa chỉ IP public mà vẫn cho phép toàn bộ mạng của họ kết nối ra thế giới bên ngoài.Khác nhau :"],[239,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 29 NAT : Network Address Translation : chuyển đổi địa chỉ IP thành địa chỉ bên ngoài (có 2 dạng chuyển đổi là 1-1 : static, và chuyển đổi overload, khi bạn được cấp nhiều IP từ ISP) Ví dụ: chuyển đổi 1-1 là : 192.168.0.1 <---> 186.15.4.2, còn chuyển đổi overload thì một địa chỉ bên trong sẽ được chuyển đổi thành một địa chỉ bên ngoài (nếu như địa chỉ bên ngoài chưa sử dụng) PAT (Port Address Translation), thường là các router ADSL mặc định dùng kiểu chuyển đổi này, vì ban chỉ có 1 IP public, nếu toàn bộ LAN của bạn đều muốn kết nối ra ngoài - với một địa chỉ IP public (58.187.168.41)=> lúc đó địa chỉ bên trong sẽ được chuyển đổi thành địa chỉ đó kết hợp với chỉ số port, nếu port đó chưa sử dụng Ví dụ: Bạn có một LAN nhỏ với dải IP : 192.168.1.x , khi đó các máy trong lan sẽ được chuyển đổi chẳng hạn với vài máy: 192.168.1.3 <-->58.187.168.41:2413 192.168.1.4 <-->58.187.168.41:2414 192.168.1.5 <-->58.187.168.41:2415 192.168.1.6 <-->58.187.168.41:2416 ..."],[240,"Các chỉ số port thường dùng từ 1024 đến 65535 (not well-known port), vì well-known port là chủ yếu dùng cho server, số port này đáp ứng được hầu hết các mạng LAN"],[241,"2.4"],[242,"Nguyên lý thu nhận một địa chỉ IP từ DHCP Server"],[243,"Có hai cách để một host có thể thu nhận được một địa chỉ IP, người sử dụng có thể cấu hình TCP/IP bằng tay bằng cách tự nhập vào các thông số, cách thứ 2 thường được sử dụng trong các công ty vì các nhân viên văng phòng thường"],[244,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 30 không thể nhớ được các con số do người quản trị hệ thống mạng trong công ty cung cấp"],[245,"Để host có thể thu nhận tự động một IP từ Server, bạn phải cài đặt dịch vụ DHCP trên máy chủ"],[246,"Client và Server sẽ đàm phán với nhau để cấp một IP cho Client theo sơ đồ sau:"],[247,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 31 Bài 3: Công nghệ Wireless 3.1"],[248,"Tổng quan về Wireless Wireless hay mạng 802.11 là hệ thống mạng không dây sử dụng sóng vô tuyến, giống như điện thoại di động, truyền hình và radio"],[249,"Hệ thống này hiện nay đang được triển khai rộng rãi tại nhiều điểm công cộng hay tại nhà riêng"],[250,"Hệ thống cho phép truy cập Internet tại những khu vực có sóng của hệ thống này, hoàn toàn không cần đến cáp nối"],[251,"Ngoài các điểm kết nối công cộng (hotspots), WiFi có thể được thiết lập ngay tại nhà riêng"],[252,"Tên gọi 802.11 bắt nguồn từ viện IEEE (Institute of Electrical and Electronics Engineers)"],[253,"Viện này tạo ra nhiều chuẩn cho nhiều giao thức kỹ thuật khác nhau, và nó sử dụng một hệ thống số nhằm phân loại chúng; 3 chuẩn thông dụng của Wireless hiện nay là 802.11a/b/g"],[254,"3.2"],[255,"Các chuẩn Wireless Wireless truyền và phát tín hiệu ở tần số 2.4 GHz hoặc 5GHz"],[256,"Tần số này cao hơn so với các tần số sử dụng cho điện thoại di động, các thiết bị cầm tay và truyền hình"],[257,"Tần số cao hơn cho phép tín hiệu mang theo nhiều dữ liệu hơn"],[258,"Wireless sử dụng chuẩn 802.11: Chuẩn 802.11b là phiên bản đầu tiên trên thị trường"],[259,"Đây là chuẩn chậm nhất và rẻ tiền nhất, và nó trở thành ít phổ biến hơn so với các chuẩn khác"],[260,"802.11b phát tín hiệu ở tần số 2.4 GHz, nó có thể xử lý đến 11 megabit/giây"],[261,"Chuẩn 802.11g cũng phát ở tần số 2.4 GHz, nhưng nhanh hơn so với chuẩn 802.11b, tốc độ xử lý đạt 54 megabit/giây"],[262,"Chuẩn 802.11g nhanh hơn vì nó sử dụng mã OFDM (orthogonal frequency-division multiplexing), một công nghệ mã hóa hiệu quả hơn"],[263,"Chuẩn 802.11a phát ở tần số 5 GHz và có thể đạt đến 54 megabit/ giây"],[264,"Nó cũng sử dụng mã OFDM"],[265,"Những chuẩn mới hơn sau này như 802.11n còn nhanh hơn chuẩn 802.11a, nhưng 802.11n vẫn chưa phải là chuẩn cuối cùng"],[266,""],[267,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 32 3.3"],[268,"Cấu hình mạng Wireless 3.3.1"],[269,"Các thành phần thiết lập mạng WLAN Card mạng không dây (NIC_Wireless) Các máy tính nằm trong vùng phủ sóng WiFi cần có các bộ thu không dây, adapter, để có thể kết nối vào mạng"],[270,"Các bộ này có thể được tích hợp vào các máy tính xách tay hay để bàn hiện đại"],[271,"Hoặc được thiết kế ở dạng để cắm vào khe PC card hoặc cổng USB, hay khe PCI"],[272,"Khi đã được cài đặt adapter không dây và phần mềm điều khiển (driver), máy tính có thể tự động nhận diện và hiển thị các mạng không dây đang tồn tại trong khu vực"],[273,"Access Point (AP) AP là thiết bị phổ biến nhất trong WLAN chỉ đứng sau PC card không dây"],[274,"Như tên của nó đã chỉ ra, AP cung cấp cho client một điểm truy cập vào mạng"],[275,"AP là một thiết bị half-duplex có mức độ thông minh tương đương với một Switch Ethernet phức tạp"],[276,"Hình dưới đây mô tả AP và nơi sử dụng chúng trong mạng WLAN"],[277,""],[278,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 33 AP có thể giao tiếp với các client không dây, với mạng có dây và với các AP khác"],[279,"Có 3 mode hoạt động chính mà bạn có thể cấu hình trong một AP Root mode Repeater mode Bridge mode Root mode Root mode được sử dụng khi AP được kết nối với mạng backbone có dây thông qua giao diện có dây (thường là Ethernet) của nó"],[280,"Hầu hết các AP sẽ hỗ trợ các mode khác ngoài root mode, tuy nhiên root mode là cấu hình mặc định"],[281,"Khi một AP được kết nối với phân đoạn có dây thông qua cổng ethernet của nó, nó sẽ được cấu hình để hoạt động trong root mode"],[282,"Khi ở trong root mode, các AP được kết nối với cùng một hệ thống phân phối có dây có thể nói chuyện được với nhau thông qua phân đoạn có dây"],[283,"AP giao tiếp với nhau để thực hiện các chức năng của roaming như reassociation"],[284,"Các client không dây có thể giao tiếp với các client không dây khác nằm trong những cell (ô tế bào, hay vùng phủ sóng của AP) khác nhau thông qua AP tương ứng mà chúng kết nối vào, sau đó các"],[285,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 34 AP này sẽ giao tiếp với nhau thông qua phân đoạn có dây như ví dụ trong hình dưới"],[286,"Bridge mode Trong Bride mode, AP hoạt động hoàn toàn giống với một Bridge không dây (sẽ được thảo luận ở phần sau)"],[287,"Thật vậy, AP sẽ trở thành một Bridge không dây khi được cấu hình theo cách này"],[288,"Chỉ một số ít các AP trên thị trường có hỗ trợ chức năng Bridge, điều này sẽ làm cho thiết bị có giá cao hơn đáng kể"],[289,"Chúng ta sẽ giải thích một cách ngắn gọn Bridge không dây hoạt động như thế nào, nhưng bạn có thể thấy từ hình dưới rằng Client không kết nối với Bridge, nhưng thay vào đó, Bridge được sử dụng để kết nối 2 hoặc nhiều đoạn mạng có dây lại với nhau bằng kết nối không dây"],[290,""],[291,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 35 Repeater Mode Trong Repeater mode, AP có khả năng cung cấp một đường kết nối không dây upstream vào mạng có dây thay vì một kết nối có dây bình thường"],[292,"Như bạn thấy trong hình dưới, một AP hoạt động như là một root AP và AP còn lại hoạt động như là một Repeater không dây"],[293,"AP trong repeater mode kết nối với các client như là một AP và kết nối với upstream AP như là một client"],[294,"Việc sử dụng AP trong Repeater mode là hoàn toàn không nên trừ khi cực kỳ cần thiết bởi vì các cell xung quanh mỗi AP trong trường hợp này phải chồng lên nhau ít nhất là 50%"],[295,"Cấu hình này sẽ giảm trầm trọng phạm vi mà một client có thể kết nối đến repeater AP"],[296,"Thêm vào đó, Repeater AP giao tiếp cả với client và với upstream AP thông qua kết nối không dây, điều này sẽ làm giảm throughput trên đoạn mạng không dây"],[297,"Người sử dụng được kết nối với một Repeater AP sẽ cảm nhận được throughput thấp và độ trễ cao"],[298,"Thông thường thì bạn nên disable cổng Ethernet khi hoạt động trong repeater mode"],[299,""],[300,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 36 Các tùy chọn phổ biến (Common Options) AP có sẵn nhiều tùy chọn phần cứng và phần mềm khác nhau"],[301,"Các tùy chọn phổ biến bao gồm: + Anten cố định hay có thể tháo lắp"],[302,"+ Khả năng lọc cao cấp + Antenna có thể tháo được (Removeable hay Modular) + Thay đổi công suất phát + Các kiểu khác nhau của kết nối có dây Fixed or Detachable Antenna Tùy thuộc vào nhu cầu doanh nghiệp của bạn hay nhu cầu của khách hàng, bạn sẽ cần phải chọn giữa AP có anten cố định hay AP có anten có thể tháo lắp"],[303,"Một AP với anten có thể tháo lắp cho bạn khả năng sử dụng các loại anten khác nhau để kết nối với AP sử dụng cable có chiều dài khác nhau tùy nhu cầu của bạn"],[304,"Ví dụ: Nếu bạn cần treo một AP ở trong nhà nhưng lại cho phép người sử dụng truy cập vào mạng ở bên ngoài thì bạn sẽ cần kết nối với cable và anten ngoài trời trực tiếp với AP và chỉ treo anten bên ngoài"],[305,""],[306,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 37 AP có thể có hoặc không có anten diversity (tính năng đa dạng anten)"],[307,"WLAN anten diversity là việc sử dụng nhiều anten với nhiều input trên một receiver duy nhất để lấy mẫu tín hiệu đến thông qua mỗi anten"],[308,"Việc lấy mấu tín hiệu từ 2 anten cho phép xác định được tín hiệu input của anten nào là tốt hơn"],[309,"Hai anten có thể có mức độ nhận tín hiệu khác nhau bởi vì một hiện tượng được gọi là multipath"],[310,"Advanced Filtering Capability Các chức năng lọc MAC hay protocol có thể được bao gồm trong AP"],[311,"Lọc thường được sử dụng để ngăn chặn kẻ xâm nhập vào mạng WLAN của bạn"],[312,"Như là một phương thức bảo mật cơ bản, một AP có thể được cấu hình để lọc những thiết bị không nằm trong danh sách lọc MAC của AP"],[313,"Việc lọc protocol cho phép admin quyết định và điều khiển giao thức nào nên được sử dụng trong mạng WLAN"],[314,"Ví dụ: Nếu Admin chỉ muốn cho phép truy cập http trong mạng WLAN để người dùng có thể lướt web và truy cập mail dạng web (yahoo), thì việc cấu hình lọc giao thức http sẽ ngăn chận tất cả các loại giao thức khác"],[315,"Removable (Modular) Radio Card Một số nhà sản xuất cho phép bạn thêm vào và tháo ra các radio card từ khe PCMCIA trên AP"],[316,"Một số AP có thể có 2 Anten dành cho các mục đích đặc biệt"],[317,"Việc có 2 Anten trong một AP cho phép một radio card có thể hoạt động như là một AP trong khi một radio card khác hoạt động như là một Bridge"],[318,"Một cách khác là sử dụng mỗi radio card như là một AP độc lập"],[319,"Việc có mỗi card hoạt động như là một AP độc lập cho phép gấp đôi số lượng người sử dụng trong cùng một không gian vật lý mà không cần phải mua thêm một AP khác"],[320,"Khi AP được cấu hình theo cách này, mỗi radio card sẽ được cấu hình trên một kênh không chồng lên nhau, lý tưởng là kênh 1 và kênh 11"],[321,"Variable Output Power"],[322,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 38 Việc thay đổi công suất phát cho phép admin điều khiển công suất (miliwatt) mà AP sử dụng để truyền dữ liệu"],[323,"Việc điều khiển công suất phát ra có thể là cần thiết trong một số trường hợp khi các node ở xa không thể xác định được AP"],[324,"Nó cũng cho phép bạn điều khiển vùng phủ sóng của một AP"],[325,"Khi công suất phát ra trên một AP tăng lên, client có thể di chuyển xa AP hơn mà không mất kết nối với AP"],[326,"Tính năng này cũng hữu ích trong việc bảo mật bằng cách cho phép thay đổi kích thước của cell RF làm cho các kẻ xâm nhập không thể kết nối với mạng từ bên ngoài tòa nhà của công ty"],[327,"Ngoài AP có công suất phát thay đổi thì ta cũng có thể sử dụng AP có công suất phát cố định"],[328,"Với AP có công suất phát cố định thì bạn có thể sử dụng các bộ khuếch đại, bộ suy hao, cable dài, hay anten có độ lợi cao"],[329,"Điều quan trọng trong việc điều khiển công suất phát ra trên cả AP và Anten là phải tuân theo qui định của FCC Varied Types of Connectivity Các tùy chọn kết nối cho một AP có thể bao gồm 10BaseTx, 100BaseTx, 10/100BaseTx, 100BaseFx, Token Ring, \u2026 Bởi vì AP thường là thiết bị mà client kết nối vào và giao tiếp với backbone mạng có dây, vì thế admin phải hiểu làm thế nào để kết nối AP vào mạng có dây"],[330,"Thiết kế và kết nối AP chính xác sẽ giúp ngăn chặn việc nghẽn cổ chai ở AP hoặc xa hơn có thể là trục trặc thiết bị"],[331,"Hãy xét việc sử dụng một AP chuẩn trong mạng WLAN"],[332,"Nếu trong trường hợp này AP đã được xác định là sẽ đặt ở vị trí cách 150m từ wiring closet gần nhất, thì việc sử dụng cable CAT5 ethernet sẽ không thể hoạt động được"],[333,"Đây là một vấn đề bởi vì ethernet qua cable CAT5 chỉ hoạt động được trong phạm vi 100m"],[334,"Trong trường hợp này việc mua một AP có kết nối 100BaseFx và chạy cable quang từ wiring closet đến AP đã làm trước đó rồi thì vấn đề sẽ dễ dàng hơn"],[335,"Configuration and Management Các phương pháp được sử dụng để cấu hình và quản lý AP sẽ khác nhau tùy nhà sản xuất"],[336,"Hầu hết họ đều cung cấp ít nhất là console, telnet, USB, hay web server"],[337,"Một số AP còn có phần mềm cấu hình và quản lý riêng"],[338,"Nhà sản xuất cấu hình AP với một IP address trong cấu hình khởi tạo"],[339,"Nếu admin cần thiết lập lại"],[340,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 39 thiết lập mặc định, thường thì sẽ có một nút phục vụ chức năng này nằm bên ngoài AP"],[341,"Các chức năng trên AP là khác nhau"],[342,"Tuy nhiên, có một điều là không đổi: AP có càng nhiều tính năng thì giá của nó càng cao"],[343,"Ví dụ, một số AP SOHO sẽ có WEP, MAC filter và thậm chí là Web server"],[344,"Nếu các tính năng như xem bảng association, hỗ trợ 802.1x/EAP, VPN, Routing, Inter AP Protocol, RADIUS thì giá của nó sẽ gấp nhiều lần so với AP thông thường"],[345,"Thậm chí các tính năng chuẩn trên các AP tương thích Wi-Fi đôi khi cũng khác nhau tùy nhà sản xuất"],[346,"Ví dụ 2 dòng SOHO AP khác nhau có thể hỗ trợ MAC filter nhưng chỉ một trong số chúng cho phép bạn permit hay deny cụ thể một trạm nào đó"],[347,"Một số AP hỗ trợ kết nối có dây full-duplex 10/100Mbps, trong khi một số khác chỉ có kết nối 10BaseT half-duplex"],[348,"Việc hiểu tính năng nào là cần thiết cho AP trong môi trường SOHO, mid-range, hay enterprise-level là một điều quan trọng nếu bạn muốn trở thành một nhà quản trị mạng không dây"],[349,"Dưới đây là danh sách các tính năng cần có cho một AP trong môi trường SOHO và Enterprise"],[350,"Danh sách này không có nghĩa là đầy đủ bởi vì một số nhà sản xuất đã có nhiều tính năng mới"],[351,"Danh sách này chỉ cung cấp một điểm bắt đầu để chọn AP cho SOHO"],[352,"Small Office, Home Office (SOHO) + Mac filter + WEP (64 hay 128 bit) + Giao diện cấu hình USB hay console + Giao diện cấu hình Web đơn giản + Các phần mềm cấu hình đơn giản Enterprise + Phần mềm cấu hình cao cấp + Giao diện cấu hình web cao cấp"],[353,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 40 + Telnet + SNMP + 802.1x/EAP + RADIUS client + VPN client và server + Routing (dynamic hoặc static) + Chức năng Repeater + Chức năng Bridge Việc sử dụng sách hướng dẫn của nhà sản xuất sẽ cung cấp nhiều thông tin chi tiết cho mỗi dòng sản phẩm"],[354,"Nếu bạn là một nhà quản trị mạng WLAN thì bạn nên biết môi trường hoạt động của bạn để tìm kiếm những sản phẩm thỏa mãn nhu cầu sử dụng cũng như bảo mật, sau đó hãy so sánh các tinh năng của 3 hay 4 nhà sản xuất khác nhau để chọn được thiết bị tối ưu"],[355,"Quá trình này có thể tốn nhiều thời gian, nhưng thời gian sử dụng để học về các sản phẩm khác nhau trên thị trường là rất hữu ích"],[356,"Các nguồn tài nguyên tốt nhất để tìm hiểu về dòng sản phẩm nào đó trên thị trường chính là website của nhà sản xuất"],[357,"Khi chọn một AP, hãy nhớ chọn nhà sản xuất có hỗ trợ ngoài các tính năng và giá cả"],[358,"3.3.2"],[359,"WLAN và SSID Mạng không dây nội bộ theo chuẩn IEEE 802.11 bảo mật dùng thông số cấu hình SSID (Service Set ID)"],[360,"Kỹ thuật này hoạt động theo 2 chế độ + Chế độ không bảo mật thì theo chu kỳ thời gian Access Point gửi Broadcast SSID của mình đến các máy trạm dùng card mạng wireless.Mô hình này thường dùng cho các điểm internet công cộng (Hot Post) + Chế độ thứ 2 là chế độ bảo mật, Access Point không gửi SSID của mình cho máy trạm mà máy trạm phải có cùng thông số SSID (được cấu hình trong card wireless trên máy trạm) với Access Point"],[361,"Mô hình này thường sử dụng cho hệ thống mạng công ty)"],[362,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 41 3.3.3"],[363,"Cấu hình một mạng WLAN đơn giản nhỏ Yêu cầu thiết bị Một Modem ADSL Một đường Internet Một AccessPoint PC có card Wireless Cấu hình hệ thống Cấu hình sơ đồ hệ thống theo hình Cấu hình AccessPoint Wireless cho các PC có card mạng không dây kết nối được Internet"],[364,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 42 Bài 4: Cơ bản về cấu hình định tuyến 4.1"],[365,"Các giao thức định tuyến Trong ngành mạng máy tính, định tuyến (tiếng Anh: routing hay routeing) là quá trình chọn lựa các đường đi trên một mạng máy tính để gửi dữ liệu qua đó"],[366,"Việc định tuyến được thực hiện cho nhiều loại mạng, trong đó có mạng điện thoại, liên mạng, Internet, mạng giao thông"],[367,"Routing chỉ ra hướng, sự di chuyển của các gói (dữ liệu) được đánh địa chỉ từ mạng nguồn của chúng, hướng đến đích cuối thông qua các node trung gian; thiết bị phần cứng chuyên dùng được gọi là router (bộ định tuyến)"],[368,"Tiến trình định tuyến thường chỉ hướng đi dựa vào bảng định tuyến, đó là bảng chứa những lộ trình tốt nhất đến các đích khác nhau trên mạng"],[369,"Vì vậy việc xây dựng bảng định tuyến, được tổ chức trong bộ nhớ của router, trở nên vô cùng quan trọng cho việc định tuyến hiệu quả"],[370,"Routing khác với bridging (bắc cầu) ở chỗ trong nhiệm vụ của nó thì các cấu trúc địa chỉ gợi nên sự gần gũi của các địa chỉ tương tự trong mạng, qua đó cho phép nhập liệu một bảng định tuyến đơn để mô tả lộ trình đến một nhóm các địa chỉ"],[371,"Vì thế, routing làm việc tốt hơn bridging trong những mạng lớn, và nó trở thành dạng chiếm ưu thế của việc tìm đường trên mạng Internet"],[372,"Các mạng nhỏ có thể có các bảng định tuyến được cấu hình thủ công, còn những mạng lớn hơn có topo mạng phức tạp và thay đổi liên tục thì xây dựng thủ công các bảng định tuyến là vô cùng khó khăn"],[373,"Tuy nhiên, hầu hết mạng điện thoại chuyển mạch chung (public switched telephone network - PSTN) sử dụng bảng định tuyến được tính toán trước, với những tuyến dự trữ nếu các lộ trình trực tiếp đều bị nghẽn"],[374,"Định tuyến động (dynamic routing) cố gắng giải quyết vấn đề này"],[375,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 43 bằng việc xây dựng bảng định tuyến một cách tự động, dựa vào những thông tin được giao thức định tuyến cung cấp, và cho phép mạng hành động gần như tự trị trong việc ngăn chặn mạng bị lỗi và nghẽn"],[376,"Định tuyến động chiếm ưu thế trên Internet"],[377,"Tuy nhiên, việc cấu hình các giao thức định tuyến thường đòi hỏi nhiều kinh nghiệm; đừng nên nghĩ rằng kỹ thuật nối mạng đã phát triển đến mức hoàn thành tự động việc định tuyến"],[378,"Cách tốt nhất là nên kết hợp giữa định tuyến thủ công và tự động"],[379,"Những mạng trong đó các gói thông tin được vận chuyển, ví dụ như Internet, chia dữ liệu thành các gói, rồi dán nhãn với các đích đến cụ thể và mỗi gói được lập lộ trình riêng biệt"],[380,"Các mạng xoay vòng, như mạng điện thoại, cũng thực hiện định tuyến để tìm đường cho các vòng (ví dụ như cuộc gọi điện thoại) để chúng có thể gửi lượng dữ liệu lớn mà không phải tiếp tục lặp lại địa chỉ đích"],[381,"Định tuyến IP truyền thống vẫn còn tương đối đơn giản vì nó dùng cách định tuyến bước kế tiếp (next-hop routing), router chỉ xem xét nó sẽ gửi gói thông tin đến đâu, và không quan tâm đường đi sau đó của gói trên những bước truyền còn lại"],[382,"Tuy nhiên, những chiến lược định tuyến phức tạp hơn có thể được, và thường được dùng trong những hệ thống như MPLS, ATM hay Frame Relay, những hệ thống này đôi khi được sử dụng như công nghệ bên dưới để hỗ trợ cho mạng IP"],[383,"Thuật toán vector (distance-vector routing protocols) Thuật toán này dùng thuật toán Bellman-Ford"],[384,"Phương pháp này chỉ định một con số, gọi là chi phí (hay trọng số), cho mỗi một liên kết giữa các node trong mạng"],[385,"Các node sẽ gửi thông tin từ điểm A đến điểm B qua đường đi mang lại tổng chi phí thấp nhất (là tổng các chi phí của các kết nối giữa các node được dùng)"],[386,""],[387,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 44 Thuật toán hoạt động với những hành động rất đơn giản"],[388,"Khi một node khởi động lần đầu, nó chỉ biết các node kề trực tiếp với nó, và chi phí trực tiếp để đi đến đó (thông tin này, danh sách của các đích, tổng chi phí của từng node, và bước kế tiếp để gửi dữ liệu đến đó tạo nên bảng định tuyến, hay bảng khoảng cách)"],[389,"Mỗi node, trong một tiến trình, gửi đến từng \u201chàng xóm\u201d tổng chi phí của nó để đi đến các đích mà nó biết"],[390,"Các node \u201chàng xóm\u201d phân tích thông tin này, và so sánh với những thông tin mà chúng đang \u201cbiết\u201d; bất kỳ điều gì cải thiện được những thông tin chúng đang có sẽ được đưa vào các bảng định tuyến của những \u201chàng xóm\u201d này"],[391,"Đến khi kết thúc, tất cả node trên mạng sẽ tìm ra bước truyền kế tiếp tối ưu đến tất cả mọi đích, và tổng chi phí tốt nhất"],[392,"Khi một trong các node gặp vấn đề, những node khác có sử dụng node hỏng này trong lộ trình của mình sẽ loại bỏ những lộ trình đó, và tạo nên thông tin mới của bảng định tuyến"],[393,"Sau đó chúng chuyển thông tin này đến tất cả node gần kề và lặp lại quá trình trên"],[394,"Cuối cùng, tất cả node trên mạng nhận được thông tin cập nhật, và sau đó sẽ tìm đường đi mới đến tất cả các đích mà chúng còn tới được"],[395,"Thuật toán trạng thái kết nối (Link-state routing protocols) Khi áp dụng các thuật toán trạng thái kết nối, mỗi node sử dụng dữ liệu cơ sở của nó như là một bản đồ của mạng với dạng một đồ thị"],[396,"Để làm điều này, mỗi node phát đi tới tổng thể mạng những thông tin về các node khác mà nó có thể kết nối được, và từng node góp thông tin một cách độc lập vào bản đồ"],[397,"Sử dụng bản đồ này, mỗi router sau đó sẽ quyết định về tuyến đường tốt nhất từ nó đến mọi node khác"],[398,"Thuật toán đã làm theo cách này là Dijkstra, bằng cách xây dựng cấu trúc dữ liệu khác, dạng cây, trong đó node hiện tại là gốc, và chứa mọi noded khác trong mạng"],[399,"Bắt đầu với một cây ban đầu chỉ chứa chính nó"],[400,"Sau đó lần lượt từ tập các"],[401,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 45 node chưa được thêm vào cây, nó sẽ thêm node có chi phí thấp nhất để đến một node đã có trên cây"],[402,"Tiếp tục quá trình đến khi mọi node đều được thêm"],[403,"Cây này sau đó phục vụ để xây dựng bảng định tuyến, đưa ra bước truyền kế tiếp tốt ưu, \u2026 để từ một node đến bất kỳ node khác trên mạng"],[404,"So sánh các thuật toán định tuyến Các giao thức định tuyến với thuật toán vector tỏ ra đơn giản và hiệu quả trong các mạng nhỏ, và đòi hỏi ít (nếu có) sự giám sát"],[405,"Tuy nhiên, chúng không làm việc tốt, và có tài nguyên tập hợp ít ỏi, dẫn đến sự phát triển của các thuật toán trạng thái kết nối tuy phức tạp hơn nhưng tốt hơn để dùng trong các mạng lớn"],[406,"Giao thức vector kém hơn với rắc rối về đếm đến vô tận"],[407,"Ưu điểm chính của định tuyến bằng trạng thái kết nối là phản ứng nhanh nhạy hơn, và trong một khoảng thời gian có hạn, đối với sự thay đổi kết nối"],[408,"Ngoài ra, những gói được gửi qua mạng trong định tuyến bằng trạng thái kết nối thì nhỏ hơn những gói dùng trong định tuyến bằng vector"],[409,"Định tuyến bằng vector đòi hỏi bảng định tuyến đầy đủ phải được truyền đi, trong khi định tuyến bằng trạng thái kết nối thì chỉ có thông tin về \u201chàng xóm\u201d của node được truyền đi"],[410,"Vì vậy, các gói này dùng tài nguyên mạng ở mức không đáng kể"],[411,"Khuyết điểm chính của định tuyến bằng trạng thái kết nối là nó đòi hỏi nhiều sự lưu trữ và tính toán để chạy hơn định tuyến bằng vector"],[412,"Giao thức được định tuyến và giao thức định tuyến Sự nhầm lẫn thường xảy ra giữa \u201cgiao thức được định tuyến\u201d và \u201cgiao thức định tuyến\u201d (\u201crouted protocols\u201d và \u201crouting protocols\u201d)"],[413,""],[414,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 46 Giao thức được định tuyến (routed protocols hay routable protocols ) Một giao thức đã được định tuyến là bất kỳ một giao thức mạng nào cung cấp đầy đủ thông tin trong địa chỉ tầng mạng của nó để cho phép một gói tin được truyền đi từ một máy chủ (host) đến máy chủ khác dựa trên sự sắp xếp về địa chỉ, không cần biết đến đường đi tổng thể từ nguồn đến đích"],[415,"Giao thức đã được định tuyến định nghĩa khuôn dạng và mục đích của các trường có trong một gói"],[416,"Các gói thông thường được vận chuyển từ hệ thống cuối đến một hệ thống cuối khác"],[417,"Hầu như tất cả giao thức ở tầng 3 các giao thức khác ở các tầng trên đều có thể được định tuyến, IP là một ví dụ"],[418,"Nghĩa là gói tin đã đuợc định hướng (có địa chỉ rõ ràng )giống như lá thư đã được ghi địa chỉ rõ chỉ còn chờ routing (tìm đường đi đến địa chỉ đó) Các giao thức ở tầng 2 như Ethernet là những giao thức không định tuyến được, vì chúng chỉ chứa địa chỉ tầng liên kết, không đủ để định tuyến: một số giao thức ở tầng cao dựa trực tiếp vào đây mà không có thêm địa chỉ tầng mạng, như NetBIOS, cũng không định tuyến được"],[419,"Giao thức định tuyến (routing protocols) Giao thức định tuyến được dùng trong khi thi hành thuật toán định tuyến để thuận tiện cho việc trao đổi thông tin giữa các mạng, cho phép các router xây dựng bảng định tuyến một cách linh hoạt"],[420,"Trong một số trường hợp, giao thức định tuyến có thể tự chạy đè lên giao thức đã được định tuyến: ví dụ, BGP chạy đè trên TCP: cần chú ý là trong quá trình thi hành hệ thống không tạo ra sự lệ thuộc giữa giao thức định tuyến và đã được định tuyến"],[421,"Danh sách các giao thức định tuyến Giao thức định tuyến trong"],[422,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 47 Router Information Protocol (RIP) Open Shortest Path First (OSPF) Intermediate System to Intermediate System (IS-IS) Hai giao thức sau đây thuộc sở hữa của Cisco, và được hỗ trợ bởi các router Cisco hay những router của những nhà cung cấp mà Cisco đã đăng ký công nghệ: Interior Gateway Routing Protocol (IGRP) Enhanced IGRP (EIGRP) Giao thức định tuyến ngoài Exterior Gateway Protocol (EGP) Border Gateway Protocol (BGP) Constrained Shortest Path First (CSPF) Thông số định tuyến (Routing metrics) Một thông số định tuyến bao gồm bất kỳ giá trị nào được dùng bởi thuật toán định tuyến để xác định một lộ trình có tốt hơn lộ trình khác hay không"],[423,"Các thông số có thể là những thông tin như băng thông (bandwidth), độ trễ (delay), đếm bước truyền, chi phí đường đi, trọng số, kích thước tối đa gói tin (MTU - Maximum transmission unit), độ tin cậy, và chi phí truyền thông"],[424,"Bảng định tuyến chỉ lưu trữ những tuyến tốt nhất có thể, trong khi cơ sở dữ liệu trạng thái kết nối hay topo có thể lưu trữ tất cả những thông tin khác"],[425,"Router dùng tính năng phân loại mức tin cậy (administrative distance -AD) để chọn đường đi tốt nhất khi nó \u201cbiết\u201d hai hay nhiều đường để đến cùng một đích theo các giao thức khác nhau"],[426,"AD định ra độ tin cậy của một giao thức định tuyến"],[427,"Mỗi giao thức định tuyến được ưu tiên trong thứ tự độ tin cậy từ cao đến"],[428,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 48 thấp nhất có một giá trị AD"],[429,"Một giao thức có giá trị AD thấp hơn thì được tin cậy hơn, ví dụ: OSPF có AD là 110 sẽ được chọn thay vì RIP có AD là 120"],[430,"Bảng sau đây cho biết sự sắp xếp mức tin cậy được dùng trong các router Cisco Các lớp giao thức định tuyến Dựa vào quan hệ của các dòng router với các hệ thống tự trị, có nhiều lớp giao thức định tuyến như sau:"],[431,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 49 Giao thức định tuyến trong mạng Ad-hoc xuất hiện ở những mạng không có hoặc ít phương tiện truyền dẫn"],[432,"Interior Gateway Protocols (IGPs) trao đổi thông tin định tuyến trong một AS"],[433,"Các ví dụ thường thấy là: o IGRP (Interior Gateway Routing Protocol) o EIGRP (Enhanced Interior Gateway Routing Protocol) o OSPF (Open Shortest Path First) o RIP (Routing Information Protocol) o IS-IS (Intermediate System to Intermediate System) Chú ý: theo nhiều tài liệu của Cisco, EIGRP không phân lớp như giao thức trạng thái kết nối"],[434,"Exterior Gateway Protocols (EGPs) định tuyến giữa các AS"],[435,"EGPs gồm: o EGP (giao thức cũ để nối mạng Internet trước đây, bây giờ đã lỗi thời) o BGP (Border Gateway Protocol: phiên bản hiện tại, BGPv4, có từ khoảng năm 1995) 4.2"],[436,"Giao thức định tuyến nội vùng RIP RIP (tiếng Anh: Routing Information Protocol) là một giao thức định tuyến nội vùng sử dụng thuật toán định tuyến Distance-vector"],[437,"Các đặc điểm: Là giao thức định tuyến theo vector khoảng cách (Distance Vector ) , tức là RIP sẽ cập nhật toàn bộ hoặc 1 phần bảng định tuyến của mình cho các Router láng giềng kết nối trực tiếp với nó"],[438,"Bảng định tuyến gồm các thông"],[439,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 50 tin như : địa chỉ của router kế tiếp trên đường đi , tổng chi phí từ chính router đó đến mạng đích\u2026 Là giao thức định tuyến theo kiểu classful ( tức định tuyến theo lớp địa chỉ) vì rip k mang theo thông tin subnet mask đi kèm (FLSM) Chọn đường đi dựa vào thông số định tuyến là hop count ( số router ) hay còn nói metric của RIP là hop count, dùng simple routing metric"],[440,"Chính vì thế mà đôi lúc có 1 số đường mà rip chọn k phải là đường tối ưu nhất đến mạng đích"],[441,"Nếu 1 packet đến mạng đích có số lượng hop vượt quá 15 thì nó sẽ bị drop"],[442,"Do cái tính khó chịu này của RIP nên mới nó được cho là khó mở rộng , phù hợp với mạng nhỏ ( nhưng mèo thấy nó không nhỏ đâu đối với vn ) Update định kì 30s ( thay đổi bằng câu lệnh update-timers)"],[443,"Ngoài ra RIP còn các giá trị thời gian khác như invalid , holdown và flush timer set bằng câu lệnh sau timers basic update invalid holdown flush Administrative Distance (AD) = 120 , thông số này càng nhỏ thì càng ưu tiên Load balacing ( chia tải ) maximum là 6 đường , default là 4 đường có thể set lại bằng câu lệnh maximum-paths"],[444,"Việc chia tải ở đây đòi hỏi các đường phải có chi phí (cost)bằng nhau mới được nhé hay còn gọi là equal-cost mà cost của rip là hop count vì thế nếu tốc độ của 2 đường khác nhau như 1 đường là dial-up và 1 đường là T1 thì cũng như vậy thôi"],[445,"Các cơ chế chống Loop Count to infinity ( định nghĩa giá trị tối đa) khi trong mạng xảy ra loop , gói tin chạy lòng vòng hoài trong mạng cho đến khi có tiến trình nào đó cắt đứt vòng lặp gọi là đếm vô hạn .Với rip metric là hop count vì thế mỗi khi thông tin cập nhật được \u201cđi qua\u201d 1 router thì số lượng hop sẽ tăng lên 1"],[446,"Bản thân"],[447,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 51 rip sẽ khắc phục tình trạng đếm đến vô hạn bằng cách cứ thông số định tuyến mà vượt quá 15 thì packet đó sẽ bị drop Route poisioning ( poison reverse ): thường thì khi 1 đường mạng nào đó có thông số định tuyến tăng dần lên thì đã bị tình nghi là loop rồi nhé"],[448,"Lúc đó router sẽ phát đi 1 thông tin poison reverse để xóa đi đường đó và cho nó vào trạng thái holddown"],[449,"Triggered update ( câu lệnh ip rip triggered) : vì rip cập nhật thông tin định tuyến 30s 1 lần vì thế khi có 1 mạng thay đổi thì phải chờ đến hết 1 chu kỳ 30s thì các router khác trong mạng mới biết được sự thay đổi đó"],[450,"Cơ chế triggered update này giúp router cập nhật ngay sự thay đổi trong mạng mà k cần phải đợi hết chu kỳ đó"],[451,"Kết hợp cơ chế này cùng poison reverse là ok"],[452,"Holdown timer :khi router A nhận được 1 thông tin về 1 mạng X từ 1 router B nói rằng mạng X bị đứt thì router A sẽ set holddown timer"],[453,"Trong suốt thời gian holddown này , router sẽ không cập nhật bất kì thông tin định tuyến nào về mạng X từ các router khác trong mạng , chẳng hạn router C cập nhật cho A nói , mạng X còn sống thì router A sẽ phớt lờ thông tin đó đi"],[454,"Trừ phi router B nói với nó là mạng X sống lại rồi thì router A mới cập nhật nhé Split Horizon tức là khi router gửi thông tin định tuyến ra 1 interface , thì router sẽ k gửi ngược trở lại các thông tin định tuyến mà nó học được từ cổng đó"],[455,"Cơ chế này chỉ tránh được loop giữa 2 router Kết hợp Split horizon với poision reverse : nếu đọc phớt qua , các bạn sẽ thấy 2 anh này trái ngược nhau , chắc là 2 cơ chế này đố kị nhau đây"],[456,"Nhưng thực ra khi kết hợp lại sẽ hữu dụng trong khi mạng gặp sự cố , hình như mặc định là nó k dùng cơ chế này hay nói cách khác 2 cơ chế này tách riêng không làm chung vì sợ làm tăng kích thước của bảng định tuyến"],[457,"Khi router A học được"],[458,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 52 1 mạng X bị die từ router B từ cổng S0/0 chẳng hạn , thì A sẽ advertise lại mạng X đó ra cổng s0/0 tiếp tục với hop count là 16 Quá trình gửi và nhận thông tin định tuyến Mô hình minh họa Lúc gửi thông tin định tuyến: Trước khi gửi update (về đường mạng 131.108 và 131.99) cho router 2 thì router 1 phải check rằng Đường mạng 131.108.5.0/24 có cùng major net với 131.108.2.0/24 hay không"],[459,"Trong trường hợp này là có, Router 1 mới check típ 131.108.5.0 và 131.108.2.0 có cùng subnet mask hay không"],[460,"Nếu trùng, Router 1 sẽ quảng bá đường mạng này"],[461,"Nếu k trùng , router 1 sẽ drop packet đó Đường mạng 137.99.88.0/24 có cùng major net với 131.108.2.0/24 hay không"],[462,"Nếu không thì router 1 sẽ làm động tác là tổng hợp (summarize) 137.99.88.0/24 tại major net boundary thành 137.99.0.0 và quảng bá nó"],[463,"Trong mô hình này thì ta nhận được kết quả như thế này trong khi thi hành lệnh debug ip rip"],[464,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 53 Nhận update : Lúc này debug ip rip ngay trên router 2 thì ta thấy như thế này Router 2 sẽ check để xem nên apply mask nào cho đường mạng 131 và 137 này đây 131.108.5.0 và 131.108.2.0( xét trên interface mà nhận update vào) có cùng 1 major net k"],[465,"Nếu có thì apply thẳng mask của interface mà nó nhận update, trong trường hợp này là apply /24)"],[466,"Nếu mạng được quảng bá tức 131.108 mà /32 thì router 2 sẽ apply /32 và típ tục quảng bá cho các router khác là /32( điều này nó khác với IGRP nhé) 131.108.5.0 và 137.99.0.0 có cùng major net k"],[467,"Nếu không xét tiếp, trong bảng định tuyến có subnet nào hay mạng con của major net này mà nó học từ các interface khác không"],[468,"Nếu không thì router 2 sẽ apply thẳng classful subnet mask là /16 luôn vì 137 là mạng lớp B"],[469,"Chú ý ở đây nó sẽ apply host mask nếu như giữa 2 router là 1 unnumbered link và chứa thông tin về subnet ( tức là khi đó các bit trong phần portion của network được set)"],[470,"Ngược lại thì router sẽ ignore thông tin định tuyến này đi Lúc này show ip route thử xem"],[471,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 54 Do ripv2 phát triển từ ripv1 nên nó cũng còn thừa hưởng những đặc điểm của ripv1 như : Là giao thức định tuyến theo vector khoảng cách Cost của nó là hop count"],[472,"Ở đây cho mèo sử dụng từ cost thay cho metric nhé"],[473,"Vì nếu lỡ có ai xem qua BGP rùi thì sẽ bị lộn 1 tí"],[474,"Maximum hop count vẫn là 15 Cũng sử dụng các cơ chế chống lặp vòng như ripv1 Nhưng Ripv2 có các điểm cải tiến khác version 1 như Nhiều thông tin định tuyến hơn như có gửi subnet mask đi kèm với địa chỉ mạng trong thông tin mà nó update"],[475,"Hỗ trợ VLSM ( Variable length subnet mask ) subnet mask khác nhau, CIDR ( Classless Interdomain Routing ) và route summarization Có cơ chế xác thực thông tin khi nhận được bằng plaintext hoặc mã hóa MD5 Gởi thông tin định tuyến theo địa chỉ multicast là 224.0.0.9 bằng với 01- 00-5E-00-00-09"],[476,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 55 4.3"],[477,"Giao thức định tuyến động OSPF Tổng Quan Về OSPF OSPF là một giao thức định tuyến theo trạng thái đường liên kết được triển khai dựa trên các chuẩn mở"],[478,"OSPF được mô tả trong nhiều chuẩn của IETF (Internet Engineering Task Force)"],[479,"Chuẩn mở ở đây có nghĩa là OSPF hoàn toàn mở với công cộng, không có tính độc quyền"],[480,"Nếu so sánh với RIPv1 và RIPv2 là một giao thức nội thì IGP tốt hơn vì khả năng mở rộng của nó"],[481,"RIP chỉ giới hạn trong 15 hop, hội tụ chậm và đôi khi còn chọn đường có tốc độ chậm vì khi quyết định chọn đường nó không quan tâm đến các yếu quan trọng khác như băng thông chẳng hạn"],[482,"OSPF khắc phục được các nhược điểm của RIP vì nó là một giao thức định tuyến mạnh, có khả năng mởi rộng, phù hợp với các hệ thống mạng hiện đại"],[483,"OSPF có thể cấu hình đơn vùng để sử dụng cho các mạng nhỏ"],[484,"So Sánh OSPF Với Giao Thức Định Tuyến Theo Distance Vector Router định tuyến theo trạng thái đường liên kết có một cơ sở đầy đủ về cấu trúc hệ thống mạng"],[485,"Chúng chỉ thực hiện trao đổi thông tin về trạng thái đường liên kết lúc khởi động và khi hệ thống mạng có sự thay đổi"],[486,"Chúng không phát quảng bá bảng định tuyến theo định kỳ như các router định tuyến theo distance vector"],[487,"Do đó, các router định tuyến theo trạng thái đường liên kết sử dụng ít băng thông hơn cho hoạt động duy trì bảng định tuyến"],[488,"RIP phù hợp với các mạng nhỏ và đường tốt nhất đối với RIP là đường có số hop ít nhất"],[489,"OSPF thì phù hợp với mạng lớn, có khả năng mở rộng, đường đi tốt nhất của OSPF được xác định dựa trên tốc độ của đường truyền"],[490,"RIP cũng như các giao thức định tuyến theo distance vector khác đều sử dụng thuật toán chọn"],[491,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 56 đường đơn giản"],[492,"Còn thuật toán SPF thì phức tạp"],[493,"Do đó, nếu router chạy theo giao thức định tuyến theo distance vector thì sẽ ít tốn bộ nhớ và cần năng lực xử lý thấp hơn so với khi chạy OSPF"],[494,"OSPF chọn đường dựa trên chi phí được tính từ tốc độ của đường truyền"],[495,"Đường truyền có tốc độ càng cao thì chi phí OSPF tương ứng càng thấp"],[496,"OSPF chọn đường tốt nhất từ cây SPF"],[497,"OSPF bảo đảm không bị định tuyến lặp vòng"],[498,"Còn giao thức định tuyến theo distance vector vẫn có thể bị loop"],[499,"Nếu một kết nối không ổn định, chập chờn, việc phát liên tục các thông tin về trạng thái của đường kiên kết này sẽ dẫn đén tình trạng các thông tin quảng cáo không đồng bộ làm cho kết quả chọn đường của các router bị đảo lộn"],[500,"OSPF giải quyết được các vấn đề sau: Tốc độ hội tụ"],[501,"Hỗ trợ VLSM (Variable Length Subnet Mask)"],[502,"Kích cỡ mạng"],[503,"Chọn đường"],[504,"Nhóm các thành viên"],[505,"Trong một hệ thống mạng lớn, RIP phải mất ít nhất vài phút mới có thể hội tụ được vì mỗi router chỉ trao đổi bảng định tuyến với các router láng giềng kết nối trực tiếp với mình mà thôi"],[506,"Còn đối với OSPF sau khi đã hội tụ vào lúc khởi động, khi có thay đổi thì việc hội tụ sẽ rất nhanh vì chỉ có thông tin về sự thay đổi được phát ra cho mọi router trong vùng"],[507,"OSPF có hỗ trợ VLSM nên nó được xem là một giao thức định tuyến không theo lớp địa chỉ"],[508,"RIPv1 không hỗ trợ VLSM, nhưng RIPv2 thì có"],[509,""],[510,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 57 Đối với RIP, một mạng đích cách xa hơn 15 router xem như không thể đến được vì RIP có số lượng hop giới hạn là 15"],[511,"Điều này làm kích thước mạng của RIP bị giới hạn trong phạm vi nhỏ"],[512,"OSPF thì không giới hạn về kích thước mạng, nó hoàn toàn có thể phù hợp với mạng vừa và lớn"],[513,"Khi nhận được từ router láng giềng các báo cáo về số lượng hop đến mạng đích, RIP sẽ cộng thêm 1 vào thông số hop này và dựa vào số lượng hop đó để chọn đường đến mạng đích"],[514,"Đường nào có khoảng cách ngắn nhất hay nói cách khác là có số lương hop ít nhất sẽ là đường tốt nhất đối với RIP"],[515,"Nhận xét thấy thuật toán chọn đường như vậy là rất đơn giản và không đòi hỏi nhiều bộ nhớ và năng lực xử lý của router"],[516,"RIP không hề quan tâm đến băng thông đường truyền khi quyết định chọn đường"],[517,"OSPF thì chọn đường dựa vào chi phí được tính từ băng thông của đường truyền"],[518,"Mọi OSPF đều có thông tin đầy đủ về cấu trúc của hệ thống mạng và dựa vào đó để chọn đường đi tốt nhất"],[519,"Do đó, thuật toán chọn đường này rất phức tạp, đòi hỏi nhiều bộ nhớ và năng lực xử lý của router cao hơn so với RIP"],[520,"RIP sử dụng cấu trúc mạng dạng ngang hàng"],[521,"Thông tin định tuyến được truyền lần lượt cho mọi router trong cùng một hệ thống RIP"],[522,"Còn OSPF sử dụng khái niệm về phân vùng"],[523,"Một mạng OSPF có thể chia các router thành nhiều nhóm"],[524,"Bằng cách này, OSPF có thể giới hạn lưu thông trong từng vùng"],[525,"Thay đổi trong vùng này không ảnh hưởng đến hoạt động của các vùng khác"],[526,"Cấu trúc phân lớp như vậy cho phép hệ thống mạng có khả năng mở rộng một cách hiệu quả"],[527,"Thuật Toán Chọn Đường Ngắn Nhất Theo thuật toán này, đường tốt nhất là đường có chi phí thấp nhất"],[528,"Thuật toán được sử dụng là Dijkstra, thuật toán này xem hệ thống mạng là mọt tập hợp các nodes được kết nối với nhau bằng kết nối point-to-point"],[529,"Mỗi kết nối này có một"],[530,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 58 chi phí"],[531,"Mỗi nodes có một tên"],[532,"Mỗi nodes có đầy đủ cơ sở dữ liệu về trạng thái của các đường liên kết"],[533,"Do đó, chúng có đầy đủ thông tin về cấu trúc vật lý của hệ thống mạng"],[534,"Tất cả các cơ sở dữ liệu này điều giống nhau cho mọi router trong cùng một vùng"],[535,"Các Loại Mạng OSPF Các OSPF phải thiết lập mối quan hệ láng giềng để trao đổi thông tin định tuyến"],[536,"Trong mỗi mạng IP kết nối vào router"],[537,"Nó đều cố gắng ít nhất là trở thành một láng giềng hoặc là một láng giềng thân mật với một router khác, router OSPF quyết định chọn router nào làm láng giềng thân mật là tùy thuộc vào từng loại mạng kết nối với nó"],[538,"Có một số router có thể cố gắng trở thành láng giềng thân mật với mọi router láng giềng khác"],[539,"Có một số router khác lại có thể chỉ cố gắng trở thành láng giềng thân mật với một hoặc hai router láng giềng thôi"],[540,"Một khi mối quan hệ láng giềng thân mật đã được thiết lập giữa hai láng giềng với nhau thì thông tin về trạng thái đường liên kết mới được trao đổi"],[541,"Giao thức OSPF nhận biết các loại mạng sau: Mạng quảng bá đa truy cập, ví dụ mạng Ethernet"],[542,"Mạng point-to-point"],[543,"Mạng không quảng bá đa truy cập (NBMA \u2013 NonBroadcast Multil- Access), ví dụ Frame Relay"],[544,"Mạng Point-to-Multipoint có thể được nhà quản trị mạng cấu hình cho một cổng của router"],[545,"Trong mạng đa truy cập không thể biết được là có bao nhiêu router sẽ có thể được kết nối vào mạng"],[546,"Trong mạng point-to-point thì chỉ có hai router được kết nối với nhau"],[547,""],[548,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 59 Trong mạng quảng bá đa truy cập có rất nhiều router kết nối vào"],[549,"Nếu mỗi router đều thiết lập mối quan hệ thân mật với mọi router khác và thực hiện trao đổi thông tin về trạng thái đường liên kết với mọi router láng giềng thì sẽ quá tải"],[550,"Nếu có 10 router thì sẽ cần 45 mối liên hệ thân mật, nếu có n router thì sẽ có n*(n-1)/2 mối quan hệ láng giềng cần thiết lập"],[551,"Giải pháp cho vấn đề quá tải trên là bầu ra một router làm đại diện (DR- Designated Router)"],[552,"Router này sẽ thiết lập mối quan hệ thân mật với mọi router khác trong mạng quản bá"],[553,"Mọi router còn lại sẽ chỉ gởi thông tin về trạng thái đường liên kết cho DR"],[554,"Sau đó DR sẽ gởi các thông tin này cho mọi router khác trong mạng bằng địa chỉ multicast 224.0.0.5 DR đóng vai trò như một người phát ngôn chung"],[555,"Việc bầu DR rất có hiệu quả nhưng cũng có một nhược điểm"],[556,"DR trở thành một tâm điểm nhạy cảm đối với sự cố"],[557,"Do đó, cần có một router thứ hai được bầu ra để làm đại diện dự phòng (BDR \u2013 Backup Designated Router), router này sẽ đảm trách vai trò của DR nếu DR bị sự cố"],[558,"Để đảm bảo cả DR và BDR đều nhận được thông tin về trạng thái đường liên kết từ mọi router khác trong cùng một mạng, địa chỉ multicast 224.0.0.6 cho các router đại diện"],[559,"Trong mạng point-to-point chỉ có 2 router kết nối với nhau nên không cần bầu ra DR và DBR"],[560,"Hai router này sẽ thiết lập mối quan hệ láng giềng thân mật với nhau"],[561,"Loại Mạng Các Đặc Tính Bầu DR Broadcast, Multi-Access Ethernet,ToKen Ring,FĐI Có NonBroadcast Multi-Access Frame Relay,X25,SMDS Có Point-to-Point PPP,HDLC Không Point-to-Multipoint Được cấu hình bởi Administrator Không"],[562,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 60 Giao Thức OSPF Hello Khi router bắt đầu khởi động tiến trình định tuyến OSPF trên một cổng nào đó thì nó sẽ gởi một gói hello ra cổng đó và tiếp tục gởi hello theo định kỳ"],[563,"Giao thức hello đưa ra các nguyên tắc quản lý việc trao đổi các gói OSPF hello"],[564,"Ở lớp 3 của mô hình OSI, gói hello mang địa chỉ multicast 224.0.5.0 địa chỉ này chỉ đến tất cả các OSPF router"],[565,"OSPF router sử dụng gói hello để thiết lập một quan hệ láng giềng thân mật mới và để xác định là router láng giềng có còn hoạt động hay không"],[566,"Mặc định hello được gởi đi 10 giây một lần trong mạng quảng bá đa truy cập và mạng Point-to-Point"],[567,"Trên cổng nói vào mạng NBMA, ví dụ như Frame Relay, chu trình mặc định của hello là 30 giây"],[568,"Trong mạng đa truy cập, giao thức hello tiến hành bầu DR và BDR"],[569,"Mặc dù gói hello rất nhỏ nhưng nó cũng bao gồm cả phần header của gói OSPF"],[570,"Cấu trúc của phần header trong gói OSPF được thể hiện như hình sau"],[571,"Nếu gói hello thì trường Type sẽ có giá trị là một"],[572,"Các thông điệp Hello trong OSPF thực hiện ba chức năng chính: Tìm ra những router chạy OSPF khác trên cùng một mạng chung"],[573,"Kiểm tra sự tương thích trong các thông số cấu hình"],[574,"Giám sát tình trạng của láng giềng để phản ứng nếu láng giềng bị fail"],[575,"Để tìm ra những router láng giềng, OSPF lắng nghe những thông điệp Hello được gửi đến 224.0.0.5"],[576,"Đây là địa chỉ multicast tượng trưng cho tất cả các router OSPF, trên bất cứ cổng nào đã bật OSPF"],[577,"Các gói Hello sẽ lấy nguồn từ địa chỉ primary trên cổng, nói cách khác, Hello không dùng địa chỉ phụ"],[578,"(OSPF"],[579,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 61 router sẽ quảng bá các địa chỉ phụ nhưng nó sẽ không gửi Hello từ những địa chỉ này và không bao giờ hình thành mối quan hệ dùng địa chỉ phụ"],[580,"Khi hai router tìm ra nhau thông qua các gói Hello, các router thực hiện các phép kiểm tra các thông số như sau: o Các router phải vượt qua tiến trình xác thực"],[581,"o Các router phải trong cùng địa chỉ mạng primary, phải có cùng subnetmask"],[582,"o Phải trong cùng OSPF area"],[583,"o Phải có cùng kiểu vùng OSPF"],[584,"o Không có trùng RID"],[585,"o OSPF Hello và Deadtimer phải bằng nhau"],[586,"Nếu bất kỳ điều kiện nào nêu trên không thỏa mãn, hai router đơn giản sẽ không hình thành quan hệ láng giềng"],[587,"Cũng lưu ý rằng một trong những điều kiện quan trọng nhất mà hai bên không cần giống là chỉ số ID của tiến trình OSPF, như được cấu hình trong câu lệnh router ospf process-id"],[588,"Bạn cũng nên lưu ý rằng giá trị MTU phải bằng nhau để các gói tin DD được gửi thành công giữa những láng giềng nhưng thông số này không được kiểm tra trong tiến trình Hello"],[589,"Chức năng thứ ba của Hello là để duy trì liên lạc giữa những láng giềng"],[590,"Các láng giềng gửi Hello ở mỗi chu kỳ hello interval; nếu router không nhận được Hello trong khoảng thời gian dead interval sẽ làm cho router tin rằng láng giềng của nó đã fail"],[591,"Khoảng thời gian hello interval mặc định bằng 10 giây trên những cổng LAN và 30 giây trong những đường T1 hoặc đường thấp hơn T1"],[592,"Thời gian dead interval mặc định bằng bốn lần thời gian hello interval"],[593,""],[594,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 62 Bài 5:Thực hành về định tuyến Thiết kế sơ đồ hệ thống mạng như trong hình Yêu cầu Sử dụng giao thức định tuyến tĩnh cấu hình định tuyến giữa các LAN Sửu dụng giao thức IGRP với AS=100 cấu hình định tuyến giữa các LAN Kết quả Các PC thuộc các LAN ping được đến nhau"],[595,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 63 Bài 6: Cấu hình NAT trên Router 6.1"],[596,"Khái niệm chung về NAT Hai mươi năm trước đây, IPv4 đưa ra một mô hình địa chỉ và cũng đáp ứng được một trong khoảng thời gian, nhưng trong tương lai gần không đáp ứng đủ"],[597,"Trong khi đó, IPv6 được xem là một không gian địa chỉ không giới hạn, thì được triển khai thử nghiệm chậm chạp và chắc chắn sẽ thay thế IPv4 trong tương lai gần"],[598,"Trong thời gian chờ đợi sự thay đổi đó, một số kỹ thuật để có thể sử dụng để sử dụng có hiệu quả tài nguyên IP đó là: NAT (Network Address Translation); PAT ( Port address translation ); VLSM ( Variable-Length Subnet Mask )"],[599,"Nat là chữ viết tắt của chữ Network Address Translate (Dịch địa chỉ IP)"],[600,"NAT có 02 mục đích Ẩn địa chỉ IP trong hệ thống mạng nội bộ trước khi gói tin đi ra Internet giằm giảm thiểu nguy cơ tấn công trên mạng Tiết kiệm không gian địa chỉ IP Có 03 phương án NAT Nat tĩnh (Static Nat) Nat động (Dynamic Nat) Nat overload \u2013 PAT (Port Address Translate)"],[601,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 64 Host A sử dụng 1 địa chỉ dành riêng 192.168.2.23, host B sử dụng 1 địa chỉ công cộng 192.31.7.130"],[602,"Khi Host A gửi một packet đến host B, backet sẽ được truyền qua router và router thực hiên qúa trình NAT"],[603,"NAT sẽ thay thế địa chỉ nguồn private ip address (192.168.2.23) thành một public IP address (203.10.5.23) và forwards the packet., với địa chỉ này packet sẽ được định tuyến trên internet tới destination address (192.31.7.130)"],[604,"Khi host B gửi gói tin hồi đáp tới host A, destination address của gói tin sẽ là 203.10.5.23"],[605,"gói tin này đi qua router và sẽ được NAT thành địa chỉ 192.168.2.23 Inside local address - Địa chỉ IP được gán cho một host của mạng trong"],[606,"Đây là địa chỉ được cấu hình như là một tham số của hệ điều hành trong máy tính hoặc được gán một cách tự động thông qua các giao thức như DHCP"],[607,"Địa chỉ này không phải là những địa chỉ IP hợp lệ được cấp bởi NIC (Network Information Center) hoặc nhà cung cấp dịch vụ Internet"],[608,"Inside global address - Là một địa chỉ hợp lệ được cấp bởi NIC hoặc một nhà cung cấp dịch vụ trung gian"],[609,"Địa chỉ này đại diện cho một hay nhiều địa chỉ IP inside local trong việc giao tiếp với mạng bên ngoài Outside local address - Là địa chỉ IP của một host thuộc mạng bên ngoài, các host thuộc mạng bên trong sẽ nhìn host thuộc mạng bên ngoài thông qua địa chỉ này"],[610,"Outside local không nhất thiết phải là một địa chỉ hợp lệ trên mạng IP (có thể là địa chỉ private)"],[611,""],[612,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 65 Outside global address - Là địa chỉ IP được gán cho một host thuộc mạng ngoài bởi người sở hữu host đó"],[613,"Địa chỉ này được gán bằng một địa chỉ IP hợp lệ trên mạng Internet"],[614,"Với sơ đồ mạng (Hình 6.1) ta có NAT Table Inside local address 192.168.2.23 Inside global address 205.10.5.23 Outside globaladdress 197.31.7.130 Các gói tin bắt nguồn từ phần mạng \u201cinside\u201d sẽ có địa chỉ source IP là địa chỉ kiểu \u201cinside local\u201d và destination IP là \u201couside local\u201d khi nó còn ở trong phần mạng \u201cinside\u201d"],[615,"Cũng gói tin đó, khi được chuyển ra mạng \u201coutside\u201d source IP address sẽ được chuyển thành \"inside global address\" và địa destination IP của gói tin sẽ là \u201coutside global address\u201d"],[616,"Ngược lại, khi một gói tin bắt nguồn từ một mạng \u201coutside\u201d, khi nó còn đang ở mạng \u201coutside\u201d đó, địa chỉ source IP của nó sẽ là \"outside global address\", địa chỉ destination IP sẽ là \"inside global address\""],[617,"Cũng gói tin đó khi được chuyển vào mạng \u201cinside\u201d, địa chỉ source sẽ là \"outside local address\" và địa chỉ destination của gói tin sẽ là \"inside local address\""],[618,""],[619,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 66 6.2 Nat tĩnh \u2013 Static NAT Nat tĩnh hay còn gọi là Static NAT là phương thức NAT một đổi một"],[620,"Nghĩa là một địa chỉ IP cố định trong LAN sẽ được ánh xạ ra một địa chỉ IP Public cố định trước khi gói tin đi ra Internet"],[621,"Phương pháp này không nhằm tiết kiệm địa chỉ IP mà chỉ có mục đích ánh xạ một IP trong LAN ra một IP Public để ẩn IP nguồn trước khi đi ra Internet làm giảm nguy cơ bị tấn công trên mạng"],[622,"Ví dụ: chuyển đổi một địa chỉ IP riêng 165.10.1.2 255.255.255.0 sang dải địa chỉ IP công cộng từ 169.10.1.50 dến 169.10.1.100"],[623,"Dùng (Netsim) để cấu hình"],[624,"Sau khi cấu hình song ta dùng lệnh show ip nat translations sẽ có kế quả như sau"],[625,"Phương án này có nhược điểm là nếu trong LAN có bao nhiêu IP muốn đi ra Internet thì ta phải có từng đó IP Public để ánh xạ"],[626,"Do vậy phương án NAT tĩnh chỉ được dúng với các máy chủ thuộc vùng DMZ với nhiệm vụ Public các Server này lên Internet"],[627,""],[628,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 67 6.3"],[629,"Nat động \u2013 Dynamic NAT Nat động (Dynamic NAT) là một giải pháp tiết kiệm IP Public cho NAT tĩnh"],[630,"Thay vì ánh xạ từng IP cố định trong LAN ra từng IP Public cố định"],[631,"LAN động cho phép NAT cả dải IP trong LAN ra một dải IP Public cố định ra bên ngoài"],[632,"Ví dụ: Hệ thống LAN trong công ty có 100 IP, nếu muốn 100 IP này truy cập Internet thì theo phương án NAT tĩnh công ty sẽ phải thuê từ ISP 100 IP Public"],[633,"Điều này quá tốn kém, giải pháp NAT động cho phép chỉ cần thuê từ ISP 10 IP Public nếu tại cùng một thời điểm chỉ có 10 IP trong LAN truy cập Internet"],[634,"Tuy nhiên giải pháp NAT động vẫn có hạn chế vì nếu tại một thời điểm công ty cần 20 IP trong LAN truy cập Internet thì mười IP truy cập sau sẽ phải đợi đến khi nào có IP rỗi (các IP trước không chiếm dụng IP Public nữa) thì mới có thể truy cập Internet được"],[635,"Chính vì thế giải pháp NAT động ít khi được sử dụng"],[636,"6.4"],[637,"Nat Overload \u2013 PAT"],[638,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 68 Nat overload \u2013 PAT là giải pháp được dùng nhiều nhất đặc biệt là trong các Modem ADSL, đây là giải pháp mang lại cả hai ưu điểm của NAT đó là: Ẩn địa chỉ IP trong hệ thống mạng nội bộ trước khi gói tin đi ra Internet giằm giảm thiểu nguy cơ tấn công trên mạng Tiết kiệm không gian địa chỉ IP Bản chất PAT là kết hợp IP Public và số hiệu cổng (port) trước khi đi ra Internet"],[639,"Lúc này mỗi IP trong LAN khi đi ra Internet sẽ được ánh xạ ra một IP Public kết hợp với số hiệu cổng Ví dụ: Trong ví dụ trên PAT sử dụng số port nguồn cùng với địa chỉ IP riêng bên trong để phân biệt khi chuyển đổi"],[640,"Router thực hiện chuyển đổi địa chỉ ip nguồn từ 10.0.0.4 sang 179.9.8.80"],[641,"port nguồn 1331"],[642,"tương tự ip nguồn từ 10.0.0.2 sang 179.9.8.80"],[643,"port nguồn là 1555 Giải pháp PAT thực sự tiết kiệm không gian địa chỉ IP vì với mỗi IP Public có thể đại diện cho 65.536 IP trong LAN theo lý thuyết, tuy nhiên thực tế mỗi IP Public đại diện cho khoảng 4000 IP trong LAN"],[644,"Đây cũng là một con số địa chỉ IP khổng lồ thừa sức cung cấp cho bất kỳ một công ty nào lớn nhất thế giới"],[645,""],[646,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 69 Bài 7:Thực hành Cấu hình NAT trên Router Thực hành cấu hình NAT tĩnh, động, Overload Công ty du lịch ABC cần khoảng 100 địa chỉ IP riêng dịch sang một dãy địa chỉ IP thật để có thể định tuyến ra ISP"],[647,"ABC đã thực hiện điều này bằng cách sử dụng NAT, dịch các địa chỉ riêng thành các địa chỉ công cộng được cấp bởi các nhà cung cấp dịch vụ ISP"],[648,"Sử dụng phần mềm giả lập thiết kế mạng Boson thiết kế sơ đồ hệ thống mạng như hình vẽ"],[649,"Thực hiện 1"],[650,"Cấu hình các địa chỉ IP trên các router theo sơ đồ trên, kiểm tra các kết nối trực tiếp bằng lệnh show cdp neighbor"],[651,"Kiểm tra bằng cách ping giữa các workstation và router NAT, giữa WebServer và router ISP1"],[652,""],[653,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 70 Bài 8:Cấu hình chuyển mạch (Switching) 8.1"],[654,"Cấu hình Switch và VLAN Switch (tiếng Anh), hay còn gọi là thiết bị chuyển mạch, là một thiết bị dùng để kết nối các đoạn mạng với nhau theo mô hình mạng hình sao (star)"],[655,"Theo mô hình này, switch đóng vai trò là thiết bị trung tâm, tất cá các máy tính đều được nối về đây"],[656,"Trong mô hình tham chiếu OSI, switch hoạt động ở tầng liên kết dữ liệu, ngoài ra có một số loại switch cao cấp hoạt động ở tầng mạng"],[657,"Cấu hình các thông số cơ bản cho Catalys Switch với giao diện dòng lệnh CLI"],[658,"Các tác vụ cần thực hiện bao gồm đặt tên cho switch, cấu hình các interface vlan, cấu hình để telnet vào switch\u2026.Dùng máy trạm kết nối với switch qua kết nối console, giao diện tương tác người dùng sử dụng trình HyperTerminal"],[659,"Đây là một công cụ đuợc MS Windows hỗ trợ"],[660,"Thực hiện Khởi động nguồn của switch"],[661,"Trên giao diện Hyper Terminal hiện ra các thông số khởi tạo trong quá trình khởi động Switch"],[662,"Would you like to enter the initial configuration dialog"],[663,"[yes/no]: no"],[664,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 71 Người dùng sẽ được hỏi nếu muốn vào các hộp thoại để cấu hình tự động, trả lời NO (vì mục đích của người dùng là muốn vào chế độ CLI (command line interface)"],[665,"Vào enable mode xem cấu hình mặc định của switch Switch>enable Switch#show running-config Thiết lập các thông số cho switch như hostname, enable password, console password và virtual terminal password"],[666,"Các loại password sử dụng có phân biệt chữ thường và chữ hoa"],[667,"Do đó người dùng cần phân biết các ký tự sử dụng chữ viết hoa khác với chữ viêt thường"],[668,"Ví dụ Cisco khác với cisco"],[669,"Switch#config terminal Switch(config)#hostname Vnpro Vnpro(config)#enable password cisco Vnpro(config)#enable secret class Vnpro(config)#line console 0 Vnpro(config-line)#password console Vnpro(config-line)#login Vnpro(config-line)#^Z Switch hỗ trợ các Virtual Line dùng cho các phiên telnet"],[670,"Cần cấu hình password cho các line này mới có thể telnet vào Switch (trình tự cấu hình hỗ trợ telnet sẽ trình bày sau)"],[671,"Để xem thông tin về các Virtual Line trên Switch: dùng lệnh \u201cshow line\u201d"],[672,""],[673,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 72 Vnpro#show line Cấu hình password cho các line vty Vnpro#config terminal Vnpro(config)#line vty 0 4 Vnpro(config-line)#password cisco Vnpro(config-line)#login Cấu hình trên thiết bị Cisco, mỗi dòng lệnh do người dùng gõ vào"],[674,"Sau khi nhấn phím \u201center\u201d cấu hình hệ thống sẽ lập tức thay đổi"],[675,"Vì vậy, đối với các hệ thống mạng thật, trước khi thay đổi một thông số nào đó của thiết bị, cần phải sao lưu lại cấu hình ban đầu để có thể khôi phục lại khi cần thiết"],[676,"Cấu hình Vlan"],[677,"Kiếm tra cấu hình Vlan mặc định trên Switch Vnpro#show vlan Mặc định trên Switch chỉ có Vlan 1 với tất cả các port đều nằm trong Vlan này, Vlan 1002 dành riêng cho FDDI, Vlan 1003 dành riêng cho TOKEN-RING\u2026 Có hai cách tạo thêm Vlan Cách 1:Thao tác trên Vlan database Vnpro#vlan database Vnpro(vlan)#vtp domain Chuyenviet Vnpro(vlan)#vtp server Vnpro(vlan)#vlan 10 name Admin Vnpro(vlan)#vlan 20 name User Cách 2: Tưong tác trực tiếp đến Vlan cần tạo ra Vnpro(config)#interface vlan 10"],[678,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 73 Vnpro(config-if)#exit Vnpro(config)# Vnpro(config)#interface vlan 20 Vnpro(config-if)#exit Vnpro(config)# Để gán các port vào các Vlan, thực hiện các bước sau: Ví dụ ta cần gán các port fastethernet 2 vào Vlan 10, port fastetehnet 3 vào Vlan 20 Vnpro(config)#interface fastethernet0/2 Vnpro(config-if-range)#switchport access vlan 10 Vnpro(config-if-range)#exit Vnpro(config)#interface fastethernet0/3 Vnpro(config-if-range)#switchport access vlan 20 Vnpro(config-if-range)#exit Kiểm tra lại cấu hình Vlan Vnpro#show vlan Cấu hình IP cho interface Vlan: các interface Vlan được cấu hình IP chỉ mang tính chất luận lý"],[679,"IP này phục vụ cho việc quản lý, địa chỉ IP luận lý này còn có thể dùng để telnet vào Switch từ xa và chạy các ứng dụng SNMP"],[680,"Vnpro#config terminal Enter configuration commands, one per line"],[681,"End with CNTL/Z"],[682,"Vnpro(config)#interface vlan 10 Vnpro(config-if)#ip address 10.0.0.1 255.255.255.0 Vnpro(config-if)#no shutdown Lưu cấu hình vào NVRAM Vnpro#copy running-config startup-config"],[683,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 74 Cần chú ý gán default-gateway cho switch bằng câu lệnh VnPro#ip default-gateway 10.0.0.100 Địa chỉ 10.0.0.100 có thể dùng là địa chỉ của PC được dùng để telnet vào switch"],[684,""],[685,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 75 Bài 9:Thực hành Cấu hình chuyển mạch và VLAN Thực hiện định tuyến giữa các VLAN theo sơ đồ sau đây"],[686,"Các bước thực hiện trên Switch2900 1"],[687,"Vào chế độ privileged mode, cấu hình mật khẩu telnet cho switch 2"],[688,"Gán địa chỉ IP và default gateway cho VLAN1 cho tiện việc quản trị 3"],[689,"Thiết lập vtp transparent mode 4"],[690,"Tạo mới VLAN2 trong cơ sở dữ liệu VLAN của switch"],[691,"VLAN1 mặc định đã có sẵn 5"],[692,"Kích hoạt trunking trên cổng giao tiếp Fa0/1 6"],[693,"Encapsulation trunking bằng sử dụng isl hay dot1q 7"],[694,"Cho phép tất cả các VLAN được chuyển qua kết nối trunk: 8"],[695,"Gán cổng Fa0/2 và VLAN 2"],[696,""],[697,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 76 Cấu hình trên Router 2600 Series 1"],[698,"Vào privileged mode cấu hình mật khẩu telnet cho router 2"],[699,"Chọn cổng fa0/0 để cấu hình trunk, 3"],[700,"Kích hoạt trunking trên sub-interface Fa0/0.1 và encapsulation bằng isl 4"],[701,"Cấu hình thông tin lớp 3 cho sub-interface Fa0/0.1 5"],[702,"Kích hoạt trunking trên sub-interface Fa0/0.2 và encapsulation bằng isl 6"],[703,"Cấu hình thông tin Layer 3 cho sub-interface Fa0/0.2"],[704,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 77 Bài 10: Thảo luận Một số chủ đề thảo luận Các nguy cơ tiềm tàng trên mạng o Viruses, Worms, Trojan Horses"],[705,"o Denial of Service (DoS) và Brute Force Attack Các kỹ năng cần có của một kỹ sư trong vai trò HelpDesk Quy trình thiết kế và nâng cấp hệ thống mạng đã có Tìm hiểu các giao thức mã hoá trong mạng WLAN"],[706,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 78 Bài 11: Cấu hình các Web Server, DNS Server 11.1"],[707,"Dịch vụ phân giải tên miến \u2013 DNS Server 11.1.1"],[708,"Nguyên lý phân giải tên miền Chức năng của DNS Mỗi Website có một tên (là tên miền hay đường dẫn URL:Universal Resource Locator) và một địa chỉ IP"],[709,"Địa chỉ IP gồm 4 nhóm số cách nhau bằng dấu chấm"],[710,"Khi mở một trình duyệt Web và nhập tên website, trình duyệt sẽ đến thẳng website mà không cần phải thông qua việc nhập địa chỉ IP của trang web"],[711,"Quá trình \"dịch\" tên miền thành địa chỉ IP để cho trình duyệt hiểu và truy cập được vào website là công việc của một DNS server"],[712,"Các DNS trợ giúp qua lại với nhau để dịch địa chỉ \"IP\" thành \"tên\" và ngược lại"],[713,"Người sử dụng chỉ cần nhớ \"tên\", không cần phải nhớ địa chỉ IP (địa chỉ IP là những con số rất khó nhớ)"],[714,"Nguyên tắc làm việc của DNS Mỗi nhà cung cấp dịch vụ vận hành và duy trì DNS server riêng của mình, gồm các máy bên trong phần riêng của mỗi nhà cung cấp dịch vụ đó trong Internet"],[715,""],[716,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 79 Tức là, nếu một trình duyệt tìm kiếm địa chỉ của một website thì DNS server phân giải tên website này phải là DNS server của chính tổ chức quản lý website đó chứ không phải là của một tổ chức (nhà cung cấp dịch vụ) nào khác"],[717,"INTERNIC (Internet Network Information Center) chịu trách nhiệm theo dõi các tên miền và các DNS server tương ứng"],[718,"INTERNIC là một tổ chức được thành lập bởi NFS (National Science Foundation), AT&T và Network Solution, chịu trách nhiệm đăng ký các tên miền của Internet"],[719,"INTERNIC chỉ có nhiệm vụ quản lý tất cả các DNS server trên Internet chứ không có nhiệm vụ phân giải tên cho từng địa chỉ"],[720,"DNS có khả năng tra vấn các DNS server khác để có được một cái tên đã được phân giải"],[721,"DNS server của mỗi tên miền thường có hai việc khác biệt"],[722,"Thứ nhất, chịu trách nhiệm phân giải tên từ các máy bên trong miền về các địa chỉ Internet, cả bên trong lẫn bên ngoài miền nó quản lý"],[723,"Thứ hai, chúng trả lời các DNS server bên ngoài đang cố gắng phân giải những cái tên bên trong miền nó quản lý"],[724,"- DNS server có khả năng ghi nhớ lại những tên vừa phân giải"],[725,"Để dùng cho những yêu cầu phân giải lần sau"],[726,"Số lượng những tên phân giải được lưu lại tùy thuộc vào quy mô của từng DNS"],[727,""],[728,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 80 Cách sử dụng DNS Do các DNS có tốc độ biên dịch khác nhau, có thể nhanh hoặc có thể chậm, do đó người sử dụng có thể chọn DNS server để sử dụng cho riêng mình"],[729,"Có các cách chọn lựa cho người sử dụng"],[730,"Sử dụng DNS mặc định của nhà cung cấp dịch vụ (internet), trường hợp này người sử dụng không cần điền địa chỉ DNS vào network connections trong máy của mình"],[731,"Sử dụng DNS server khác (miễn phí hoặc trả phí) thì phải điền địa chỉ DNS server vào network connections"],[732,"Địa chỉ DNS server cũng là 4 nhóm số cách nhau bởi các dấu chấm 11.1.2"],[733,"Xây dựng máy chủ phân giải tên miền cho mạng doanh nghiệp Máy chủ phân giải tên miền DNS là gì"],[734,"Mỗi máy tính, thiết bị mạng tham gia vào mạng Internet đều \"nói chuyện \" với nhau bằng địa chỉ IP (Internet Protocol)"],[735,"Để thuận tiện cho việc sử dụng và dễ nhớ ta dùng tên (Domain name) để xác định thiết bị đó"],[736,"Hệ thống tên miễn DNS"],[737,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 81 (Domain Name System) được sử dụng để ánh xạ tên miễn thành địa chỉ IP"],[738,"Vì vậy, khi muốn liên hệ tới các máy, chúng chỉ cần sử dụng chuỗi ký tự dễ nhớ (domain name) như: www.microsoft.com, www.ibm.com..., thay vì sử dụng địa chỉ IP là một dãy số dài khó nhớ"],[739,"Máy chủ phân giải tên miền (DNS server) là những máy chủ được cài đặt, và cung cấp dịch vụ phân giải tên miền DNS"],[740,"Máy chủ DNS được phân ra thành 2 loại như sau: - Primary DNS Server (PDS) Primary DNS Server (PDS) là nguồn xác thực thông tin chính thức cho các tên miền mà nó được phép quản lý"],[741,"Thông tin về một tên miền do PDS được phân cấp quản lý thì được lưu trữ tại đây và sau đó có thể được chuyển sang các Secondary DNS Server (SDS)"],[742,"Các tên miền do PDS quản lý thì được tạo, và sửa đổi tại PDS và sau đó được cập nhật đến các SDS"],[743,"- Secondare DNS Server(SDS)"],[744,"DNS được khuyến nghị nên sử dụng ít nhất là hai DNS server để lưu địa chỉ cho mỗi một vùng (zone)"],[745,"PDS quản lý các vùng và SDS được sử dụng để lưu trữ dự phòng cho vùng, và cho cả PDS"],[746,"SDS không nhất thiết phải có những khuyến khích hãy sử dụng"],[747,"SDS được phép quản lý tên miền nhưng dữ liệu về tên miền không phải được tạo ra từ SDS mà được lấy về từ PDS"],[748,"SDS có thể cung cấp các hoạt động ở chế độ không tải trên mạng"],[749,"Khi lượng truy vấn vùng tăng cao, PDS sẽ chuyển bớt tải sang SDS (quá trình này còn được gọi là cân bằng tải), hoặc khi PDS bị sự cố thì SDS hoạt động thay thế cho đến khi PDS hoạt động trở lại, SDS thường được sử dụng tại nơi gần với các máy trạm (client) để có thể phục vụ cho các truy vấn một cách dễ dàng"],[750,"Tuy nhiên, cài đặt SDS trên cùng một subnet hoặc dùng một kết nối với PDS là không nên"],[751,""],[752,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 82 Điều đó sẽ là một giải pháp tốt để dự phòng cho PDS, vì khi kết nối đến PDS bị hỏng thì cũng không ảnh hưởng gì tới đến SDS"],[753,"Ngoài ra PDS luôn duy trì một lượng lớn dữ liệu và thường xuyên thay đổi hoặc thêm các địa chỉ mới vào các vùng"],[754,"Do đó, DNS server sử dụng một cơ chế cho phép chuyển các thông tin từ PDS sang SDS và lưu giữ trên đĩa"],[755,"Khi cần phục hồi dữ liệu về các vùng, chúng ta có thể sử dụng giải pháp lấy toàn bộ hoặc chỉ lấy phần thay đổi"],[756,"Thay đổi DNS"],[757,"Thông thường khi kết nối Internet, tất cả mọi dấu hiệu cho thấy cuộc kết nối suôn sẻ"],[758,"Thế nhưng, sau khi đã gõ địa chỉ website vào trình duyệt rồi mà đợi mãi vẫn chẳng thấy website hiện ra"],[759,"Thanh Status (màu xanh lục) trên IE cũng không thấy xuất hiện"],[760,"Kiểm tra lại mọi thứ thì vẫn thấy bình thường.."],[761,"Mãi một lúc lâu sau mới thấy trình duyệt thông báo Connecting to 64.128.xxx.xxx rồi sau đó vào website bình thường"],[762,"Nhưng mỗi lần click vào link nào trên trang thì vẫn lặp lại tình trạng cũ"],[763,"DNS, Domain Name Server, hay còn gọi là máy chủ tên miền - là một trong những khâu vô cùng quan trọng trong tiến trình duyệt web của bạn"],[764,"Mỗi máy tính trên Internet được đánh dấu bằng một địa chỉ IP, là một mớ số đó, nhất là trong tương lai địa chỉ IP sẽ dài gấp bốn lần địa chỉ hiện nay"],[765,"DNS chính là giải pháp"],[766,"Thay vì bắt con người nhớ số, mỗi số IP sẽ được đổi thành chữ và DNS có nhiệm vụ đổi chữ thành số tương ứng khi có yêu cầu"],[767,"Địa chỉ của DNS thường được cung cấp tự động trực tiếp mỗi khi bạn thiết lập kết nối với ISP (nhà cung cấp dịch vụ Internet)"],[768,"Ở Việt Nam, mỗi ISP thường có hai hoặc nhiều DNS để phục vụ số lượng khách hàng của mình"],[769,""],[770,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 83 Thế nhưng thường cũng không đủ dùng"],[771,"Vì vậy không ai cấm việc xài dịch vụ của ISP này nhưng thiết lập DNS của ISP khác, hoặc một DNS nào đó tốt hơn trong các giờ cao điểm"],[772,"Thao tác thay DNS cũng rất dễ dàng"],[773,"Bạn mở cửa sổ Network/properties để vào Internet Protocol(TCP/IP) Properties"],[774,"Nếu bạn dùng mặc định DNS do ISP cung cấp thì chọn \"Obtain DNS server address automatically\" Nếu muốn dùng DNS theo ý mình thì chọn dòng \" User the following DNS server addresses\", sau đó điền địa chỉ IP của DNS vào 2 dòng bên dưới"],[775,"Preferrer DNS server là địa chỉ được trình duyệt tìm đến đầu tiên"],[776,"Alternate DNS server dành cho server dự phòng, trong trường hợp server đầu tiên quá bận"],[777,"<Network > chính là tên của kết nối Internet của bạn"],[778,"Cấu hình cho dịch vụ DNS"],[779,"Để tạo một Zone mới kích chuột vào Action chọn NewZone như hình trên"],[780,""],[781,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 84 Sau đó chọn Next"],[782,"Chọn Standard Primary nếu bạn muốn thiết lập một zone mới, còn nếu bạn đã có một zone nào đó rồi thì bạn có thể chọn Secondary để tạo một bản sao lưu"],[783,"Kích chuột chọn Next để tiếp tục"],[784,""],[785,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 85 Nhập vào nội dung của Zone bạn muốn thiết lập rồi chọn Next"],[786,"Chọn Next"],[787,""],[788,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 86 Sau đó chọn Finish"],[789,"Chuột phải vào phần mà bạn vừa tạo và chọn NewHost để tạo ra một Host mới"],[790,""],[791,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 87 Chọn tuỳ ý một cái tên và chọn địa chỉ IP của Host"],[792,"Nhấn Add Host -> Ok -> Done"],[793,"Tiếp tục thiết lập Alias, đây là một định danh của Site mà bạn cần thiết lập"],[794,""],[795,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 88 Chọn một tên để thay thế cho định danh mạng"],[796,"Kế tiếp chọn Browse\u2026 Tìm đúng Zone mà bạn đã tạo Host và chọn Host đó - nhấn OK"],[797,"Lúc này bạn đã có thông tin đầy đủ về một tên miền mà mình sẽ tạo ra"],[798,""],[799,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 89 Nhấn OK để tiếp tục"],[800,"Để có thể thử nghiệm việc phận giải một tên miền với DNS ta hãy sử dụng một dịch vụ ISS để kiểm tra"],[801,"11.2"],[802,"Dịch vụ Web Server 11.2.1"],[803,"Giao thức HTTP và HTTPS Giao thức HTTP HTTP (HyperText Transfer Protocol), tiếng Việt gọi là Giao Thức Truyền Siêu Văn Bản"],[804,"HTTP là một giao thức chuẩn trực thuộc lớp ứng dụng trong mô hình 7 lớp OSI và được dùng để liên hệ thông tin giữa máy cung cấp dịch vụ (Web Server) và máy dùng dịch vụ (Client)"],[805,"HTTP tương thích với nhiều định dạng thông tin, media và hồ sơ"],[806,"Giao thức HTTPS HTTPS( Secure HTTP), là một sự kết hợp giữa giao thức HTTP và giao thức bảo mật SSL hay TLS cho phép trao đổi thông tin một cách bảo mật trên Internet"],[807,"Giao thức HTTPS thường được dùng trong các giao dịch cần sự bảo mật như e- commerce, e-banking .."],[808,"trên Internet"],[809,"11.2.2"],[810,"Triển khai Website doanh nghiệp trên Server Để triển khai một website doanh nghiệp trên Server ta phải cài dịch vụ Web Server lên máy chủ đó"],[811,"Tuỳ thuộc vào Hệ điều hành và ngôn ngữ lập trình Web mà bạn sẽ quyết định cài lên Server dịch vụ Web Server IIS cho Window hay Apache cho Linux"],[812,"Sau đây là các bước triển khai dịch vụ Webserver IIS trên máy chủ Window"],[813,""],[814,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 90 Các bước cài đặt ISS khá dễ dàng các bạn có thể cài các mục như với cài DNS, chỉ khác là trong hộp thoại chọn các bạn chọn: Như trên hình hoặc có thể tuỳ chọn trong mục Details"],[815,""],[816,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 91 Xuất hiện bảng sau, chúng ta chọn Next"],[817,""],[818,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 92 đặt tên mô tả cho Website này và chọn Next"],[819,"Chọn các thiết lập:"],[820,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 93 Nhập địa chỉ IP của máy chủ vào mục IP nếu như bạn muốn chỉ định các máy khác địa chỉ web được chỉ tới là địa chỉ nào"],[821,"Chọn cổng truy cập trên máy chủ, thông thường chúng ta để cổng 80 nhưng tuỳ vào người quản trị mạng mà chúng ta có thể chọn cổng bất kỳ để tránh sự dòm ngó từ bên ngoài"],[822,"Chọn Next"],[823,"Trong mục này bạn hãy chọn đường dẫn lưu trang web của bạn và chọn Next"],[824,""],[825,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 94 Thiết lập các chế độ ghi đọc của người dùng trên Site này và chọn Next"],[826,"Click vào Finish để kết thúc chọn"],[827,""],[828,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 95 Click chuột phải vào trang web mà bạn vừa tạo và cấu hình các thuộc tính cho chúng"],[829,""],[830,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 96 Trên trang tuỳ chọn này bạn có thể cấu hình lại các thông số mà trước đó bạn đã tạo ra"],[831,"Để thiết lập trang chỉ định khi trình duyệt web của máy Client yêu cầu sẽ được mở ra"],[832,"Đầu tiên bạn chọn Add để thêm mới tên trang và chọn ,ví dụ tên trang chủ của tôi là index.com thì tôi gõ vào là index.com và Add vào"],[833,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 97 Nhấn Apply rồi OK"],[834,"Khi đó trên trình duyệt của máy khách bạn chỉ cần gõ thuongdao.com mà không cần phải gõ địa chỉ IP của trang web vào"],[835,"Nếu bạn không để cổng mặc định là 80 thì ngay sau địa chỉ bạn gõ: và tên cổng vào"],[836,"Ví dụ nếu tôi để cổng là 8080 thì tôi gõ trong trình duyệt là http://thuongdao.com:8080 2"],[837,"Cấu hình dịch vụ IIS Để cấu hình dịch vụ web cho IIS bạn vào My Computer > Control Panel > Administrative Tool > Internet Services Manager"],[838,"Sau đó làm như hình minh hoạ"],[839,""],[840,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 98 Sau khi nhấp vào properties sẽ hiện lên bảng website"],[841,""],[842,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 99 Description: Mô tả tên của Website"],[843,"Ip Address: Phần này cho phép chúng ta gắn địa chỉ IP cho Website"],[844,"TCP Port: Cổng cho phép kết nối vào Website mặc định là cổng 80 Unlimited: Cho phép kết nối không giới hạn thời gian"],[845,"Limited To: Giới hạn thời gian kết nối với Website"],[846,"Thẻ tiếp theo là Home Directory"],[847,""],[848,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 100 Directory Browsing: Chức năng cho phép hiển thị Browser khi không có trang chủ mặc định"],[849,"A redirection a URl: Là tính năng cho phép ta chuyển tiếp đến một trang nào đó (dùng bằng URL) Thẻ tiếp theo là Document"],[850,""],[851,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 101 Phần này cho phép ta thêm chỉ mục Index cho website của mình"],[852,"Tức là nếu bạn muốn website của mình mặc định là chạy files index.php"],[853,"Thì bạn vào phần add sau đó đánh vào index.php"],[854,"Rồi dùng dấu mũi tên bên trái đưa index.php lên trên đầu tiên như hình minh hoạ"],[855,"Nhớ rằng chỉ mục document này nó sẽ tự tìm từ trên xuống dưới(sau index.php không có nó sẽ tự tìm Default.htm\u2026) Thẻ tiếp theo là Directory Security"],[856,""],[857,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 102 Trong phần này bạn nhớ để ý mặc định là cho phép chế độ truy cập nặc danh tức là ai cũng có thể vào website của mình"],[858,"Ta tick vào như hình minh hoạ trên"],[859,"Còn nếu muốn khi truy cập vào site của mình phải có Username và password (tức là Uer trong computer) thì bỏ tick ở phần Anonymous access thay bằng Basic authentication .Khi đó bất cứ ai truy cập vào site của bạn cũng cần phải có username và password trên server của bạn"],[860,""],[861,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 103 Bài 12: Thực hành cấu hình các dịch vụ mạng cơ bản Cấu hình Active Directory (AD) Cấu hình IIS Cấu hình DNS Cấu hình DHCP"],[862,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 104 Bài 13"],[863,"Xây dựng một Mail Server 13.1"],[864,"Giao thức SMTP, POP3, IMAP SMTP (tiếng Anh: Simple Mail Transfer Protocol - giao thức truyền tải thư tín đơn giản) là một chuẩn truyền tải thư điện tử qua mạng Internet"],[865,"SMTP được định nghĩa trong bản RFC 821 (STD 10) và được chỉnh lý bằng bản RFC 1123 (STD 3)"],[866,"Giao thức hiện dùng được là ESMTP (extended SMTP - SMTP mở rộng), được định nghĩa trong bản RFC 2821"],[867,"Lịch sử SMTP là một giao thức dùng nền văn bản và tương đối đơn giản"],[868,"Trước khi một thông điệp được gửi, người ta có thể định vị một hoặc nhiều địa chỉ nhận cho thông điệp - những địa chỉ này thường được kiểm tra về sự tồn tại trung thực của chúng)"],[869,"Việc kiểm thử một trình chủ SMTP là một việc tương đối dễ dàng, dùng chương trình ứng dụng \"telnet\" (xem dưới đây)"],[870,"SMTP dùng cổng 25 của giao thức TCP"],[871,"Để xác định trình chủ SMTP của một tên miền nào đấy (domain name), người ta dùng một mẫu tin MX (Mail eXchange - Trao đổi thư) của DNS (Domain Name System - Hệ thống tên miền)"],[872,"SMTP bắt đầu được sử dụng rộng rãi vào những năm đầu thập niên kỷ 1980"],[873,"Tại thời điểm đó, SMTP chỉ là một phần mềm bổ sung của bộ trình ứng dụng đồng giao thức UUCP (Unix to Unix CoPy - Sao chép từ máy Unix sang máy Unix) nhưng tiện lợi hơn trong việc truyền tải thư điện tử giữa các máy vi tính - những máy này thỉnh thoảng mới lại được kết nối với nhau một lần, để truyền thông dữ"],[874,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 105 liệu"],[875,"Thực ra, SMTP sẽ làm việc tốt hơn nếu các máy gửi và máy nhận được kết nối liên tục"],[876,"Sendmail là một trong những phần mềm đặc vụ truyền tải thư tín (mail transfer agent) đầu tiên (nếu không phải là cái trước tiên nhất) thực thi giao thức SMTP"],[877,"Tính đến năm 2001, người ta đã thấy có ít nhất là 50 chương trình ứng dụng thực thi giao thức SMTP, bao gồm cả trình khách (phần mềm dùng để gửi thông điệp) và trình chủ (phần mềm dùng để nhận thông điệp)"],[878,"Một số trình chủ SMTP nổi tiếng có thể liệt kê bao gồm: exim, Postfix, qmail, và Microsoft Exchange Server"],[879,"Do thiết kế của giao thức dùng dạng thức văn bản thường của bộ mã ASCII, khi bản thiết kế được khởi công, chức năng của SMTP giải quyết tập tin có dạng thức nhi phân rất kém"],[880,"Những tiêu chuẩn như MIME đã được xây dựng để mã hóa những tập tin nhị phân, cho phép chúng được truyền tải dùng giao thức SMTP"],[881,"Hiện nay, phần lớn các trình chủ SMTP hỗ trở phần mở rộng 8BITMIME của SMTP, cho phép các tập tin ở dạng thức nhị phân được truyền thông qua đường dây, dễ như việc truyền tải văn bản thường vậy"],[882,"SMTP là một giao thức \"đẩy\" thông điệp và không cho phép ai \"rút\" thông điệp từ máy chủ ở xa, theo yêu cầu của mình, một cách tùy tiện"],[883,"Để lấy được thông điệp, một trình khách thư điện tử phải dùng POP3 (Post Office Protocol - Giao thức bưu điện tử) hoặc IMAP (Internet Message Access Protocol - Giao thức truy cập thông điệp Internet)"],[884,"Chúng ta còn có thể dùng phần mềm ETRN (Extended Turn) để khởi động một trình chủ SMTP phân phát thông điệp mà nó đang lưu trữ"],[885,""],[886,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 106 Ví dụ về truyền thông của SMTP Sau khi kết nối giữa người gửi (trình khách) và người nhận (trình chủ) đã được thiết lập, những việc làm sau đây là những việc hoàn toàn hợp lệ, đối với một phiên giao dịch dùng giao thức SMTP"],[887,"Trong cuộc hội thoại dưới đây, những gì trình khách gửi được đánh dấu bằng chữ C: đứng trước, còn những gì trình chủ gửi được đánh dấu bằng S:"],[888,"Các hệ thống máy tính đều có thể thiết lập một kết nối, bằng cách dùng những dòng lệnh của phần mềm telnet, trên một máy khách"],[889,"Chẳng hạn: telnet www.example.com 25 khởi động một kết nối SMTP từ máy gửi thông điệp đến máy chủ site www.example.com"],[890,""],[891,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 107 Bảo vệ trong SMTP và thư rác Một trong những giới hạn của bản thiết kế SMTP gốc là việc nó không cung cấp một phương tiện nào để chứng thực (authentication) người gửi khi chúng ta cần"],[892,"Chính vì thế mà phần mở rộng SMTP-AUTH đã được thiết kế và bổ sung"],[893,"Mặc dầu đã có phần chứng thực người gửi bổ sung, nhũng lạm thư điện tử vẫn còn là một vấn đề lớn, khó giải quyết"],[894,"Việc sửa đổi giao thức SMTP một cách triệt để, hoặc thay thế giao thức toàn bằng một cái khác, là một việc không dễ gì thực hiện được, vì sự thay đổi sẽ gây ảnh hưởng đến mạng lưới truyền thông của những máy chủ SMTP khổng lồ, đã và đang được dùng"],[895,"Internet Mail 2000 là một trong những bản dự thảo đề cập đến vấn đề này"],[896,"Vì lý do trên, một số đề nghị về việc dùng các giao thức bên lề để hỗ trợ hoạt động của SMTP đã được công bố"],[897,"Nhóm nghiên cứu chống thư nhũng lạm (Anti- Spam Research Group) của Lực lượng chuyên trách nghiên cứu liên mạng (Internet Research Task Force - viết tắt là IRTF) hiện đang làm việc trên một số dự thảo về chứng thực thư điện tử (E-mail authentication) và một số những dự thảo khác liên quan đến việc cung cấp một cơ chế chứng thực nguồn gửi với tính năng: tuy đơn giản song linh hoạt, tuy ở mức độ hạng nhẹ song có khả năng khuếch trương"],[898,"Những hoạt động gần đây của Lực lượng chuyên trách nghiên cứu liên mạng (Internet Engineering Task Force - viết tắt là IETF), bao gồm MARID (2004) (cộng với sự tiến tới hai cuộc thử nghiệm được IETF chấp thuận trong năm 2005 sau đó), và DKIM (DomainKeys - tạm dịch là \"Chìa khóa tại vùng\") trong năm 2006"],[899,""],[900,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 108 POP3 Post Office Protocol phiên bản 3 (POP3) là một giao thức tầng ứng dụng, dùng để lấy thư điện tử từ server mail, thông qua kết nối TCP/IP"],[901,"POP3 và IMAP4 (Internet Message Access Protocol) là 2 chuẩn giao thức Internet thông dụng nhất dùng để lấy nhận email"],[902,"Hầu như các máy tính hiện nay đều hỗ trợ cả 2 giao thức Trước POP3, đã có 2 phiên bản là POP1 và POP2"],[903,"Khi POP3 ra đời, đã ngay lập tức thay thế hoàn toàn các phiên bản cũ"],[904,"Vì vậy, ngày nay, nhắc đến POP thì thường là ám chỉ POP3"],[905,"Thiết kế của POP3 hỗ trợ chức năng cho người dùng có kết nối internet không thường trực (như kết nối dial-up), cho phép người dùng kết nối với server, tải mail về, sau đó có thể xem, thao tác với mail offline"],[906,"Mặc dù trong giao thức hỗ trợ leave mail on server (để nguyên mail trên server), nhưng hầu hết người dùng đều thực hiện mặc định, tức là: kết nối, tải mail về, xóa mail trên server rồi ngắt kết nối"],[907,"IMAP Internet Message Access Protocol (IMAP) cung cấp lệnh để phần mềm thư điện tử trên máy khách và máy chủ dùng trong trao đổi thông tin"],[908,"Đó là phương pháp để người dùng cuối truy cập thông điệp thư điện tử hay bảng tin điện tử từ máy chủ về thư trong môi trường cộng tác"],[909,"Nó cho phép chương trình thư điện tử dùng cho máy khách - như Netscape Mail, Eudora của Qualcomm, Lotus Notes hay Microsoft Outlook - lấy thông điệp từ xa trên máy chủ một cách dễ dàng như trên đĩa cứng cục bộ"],[910,""],[911,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 109 Chuẩn về thư điện tử được ủng hộ IMAP là cơ chế cho phép lấy thông tin về thư điện tử của bạn, hay chính các thông điệp từ mail server của môi trường cộng tác"],[912,"Giao thức thư điện tử này cho phép người dùng kết nối bằng đường điện thoại vào máy chủ Internet từ xa, xem xét phần tiêu đề và người gửi của thư điện tử trước khi tải những thư này về máy chủ của mình"],[913,"Với IMAP người dùng có thể truy cập các thông điệp như chúng được lưu trữ cục bộ trong khi thực tế lại là thao tác trên máy chủ cách xa hàng ki lô mét"],[914,"Với khả năng truy cập từ xa này, IMAP dễ được người dùng cộng tác chấp nhận vì họ coi trọng khả năng làm việc lưu động"],[915,"Khả năng truy cập là chìa khóa Người dùng thường xuyên đi lại muốn lưu thông điệp của họ trên máy chủ để đến bất kỳ đầu cuối nào cũng có thể đọc và làm việc được"],[916,"IMAP cho phép thực hiện điều đó"],[917,"IMAP khác với giao thức truy cập thư điện tử Post Office Protocol (POP)"],[918,"POP lưu trữ toàn bộ thông điệp trên máy chủ"],[919,"Người dùng kết nối bằng đường điện thoại vào máy chủ và POP sẽ đưa các thông điệp vào in-box của người dùng, sau đó xóa thư trên máy chủ"],[920,"Hai giao thức này đã được dùng từ hơn 10 năm nay"],[921,"Theo một nhà phân tích thì khác biệt chính giữa POP (phiên bản hiện hành 3.0) và IMAP (phiên bản hiện hành 4.0) là POP3 cho người dùng ít quyền điều khiển hơn trên thông điệp"],[922,""],[923,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 110 IMAP mang lại cho người dùng một phương thức lưu trữ thư điện tử thông minh và nhờ đó có thể xem những thông điệp này trước khi tải chúng xuống, bao gồm cả việc có tải xuống những file đính kèm thư hay không"],[924,"Người dùng cũng có thể áp dụng các bộ lọc và cơ chế tìm kiếm trên máy chủ và có thể lấy thư từ bất kỳ máy nào, bất cứ ở đâu"],[925,"Tuy nhiên, các nhà sản xuất đã thông dịch các đặc tả mơ hồ của IMAP 4 theo nhiều cách khác nhau và điều đó dẫn đến sự không nhất quán trong chương trình thư dành cho máy khách và máy chủ, chẳng hạn người dùng có thể sẽ không đọc được file đính kèm trong Netscape Mail bằng chương trình Eudora Pro"],[926,"Tuy nhiên, theo dự đoán những vấn đề này sẽ nhanh chóng được giải quyết trong thời gian tới"],[927,"13.2"],[928,"Triển khai Mail Server cho doanh nghiệp Có nhiều Mail Server để triển khai một hệ thống Mail cho doanh nghiệp"],[929,"Trong phần này tôi xin giới thiệu Mdaemon là một mail Server dễ triển khai và có đầy đủ các tính năng thông dụng phục vụ cho một doanh nghiệp"],[930,""],[931,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 111 Cài đặt và cấu hình Mdaemon Setup > Primary Domain Primary domain, FQDN domain, machine name: tên domain của bạn Primary Domain IP: IP máy bạn"],[932,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 112 Qua tab DNS : chỉnh về IP mà ISP bạn đang dùng (ở đây tôi dùng Viettel)"],[933,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 113 Để tạo mailbox với password đơn giản, vào Menu Setup > Miscellaneous Options > Tab Misc > bỏ chọn \"Require strong passwords\""],[934,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 114 Tạo Account"],[935,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 115 Bài 14"],[936,"Thực hành Xây dựng một Mail Server Chuẩn bị Một Server đã cài dịch vụ DNS, IIS Mail Server Mdeamon hoặc Exchange Yêu cầu: Cấu hình mail Server và tạo account cho các thành viên trong lớp sử dụng để gửi và nhận mail"],[937,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 116 Bài 15: Thực hành Proxy và Firewall 15.1"],[938,"Nguyên lý hoạt động của Proxy Khái niệm Proxy Proxy là một Internet server làm nhiệm vụ chuyển tiếp thông tin và kiểm soát tạo sự an toàn cho việc truy cập Internet của các máy khách, còn gọi là khách hàng sử dụng dịch vụ internet"],[939,"Trạm cài đặt proxy gọi là proxy server"],[940,"Proxy hay trạm cài đặt proxy có địa chỉ IP và một cổng truy cập cố định"],[941,"Ví dụ: 123.234.111.222:80 Địa chỉ IP của proxy trong ví dụ là 123.234.111.222 và cổng truy cập là 80"],[942,"Chức năng của proxy Đối với một só hãng, công ty người ta sử dụng proxy vào việc: -Proxy chia sẽ đường truyền: giúp nhiều máy truy cập Internet thông qua 1 máy, mà máy này gọi là Proxy server"],[943,"Chỉ duy nhất máy Proxy này cần modem và account truy cập internet, các máy client (các máy trực thuộc) muốn truy cập internet qua máy này chỉ cần nối mạng LAN tới máy Proxy và truy cập địa chỉ yêu cầu.Những yêu cầu của người sử dung sẽ qua trung gian proxy server thay thế cho server thật sự mà người sử dụng cần giao tiếp, tại điểm trung gian này công ty kiểm soát được mọi giao tiếp từ trong công ty ra ngoài intrnet và từ internet vào máy của công ty"],[944,"Sử dụng Proxy, công ty có thể cấm nhân viên truy cập những địa chỉ web không cho phép, cải thiện tốc độ truy cập nhờ sự lưu trữ cục bộ các trang web trong bộ nhớ của proxy server và giấu định danh địa chỉ của mạng nội bộ gây khó khăn cho việc thâm nhập từ bên ngoài vào các máy của công ty"],[945,""],[946,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 117 Hình 15.1 Đối với các nhà cung cấp dịch vụ đường truyền internet: -Do trên mạng internet có lượng thông tin rất phong phú, theo quan điểm của từng quốc gia, của từng chủng tộc hay địa phương, các nhà cung cấp dịch vụ internet khu vực đó sẽ phối hợp proxy với kỹ thuật tường lửa để tạo ra một bộ lọc gọi là firewall proxy nhằm ngăn chặn các thông tin độc hại hoặc trái thuần phong mỹ tục đối với quốc gia, đói với chủng tộc hay địa phương đó"],[947,"Địa chỉ các websit mà khách hàng yêu cầu truy cập sẽ được lọc tại bộ lọc này, nếu địa chỉ không bị cấm thì yêu cầu của khách hàng tiếp tục được gửi đi, tới các DNS server của các nhà cung cấp dịch vụ"],[948,"Firewall proxy sẽ lọc tất cả các thông tin từ internet gửi vào máy của khách hàng và ngược lại"],[949,"Ý nghĩa của proxy Proxy không chỉ có giá trị bởi nó làm được nhiệm vụ của một bộ lọc thông tin, nó còn tạo ra được sự an toàn cho các khách hàng của nó, firewal Proxy ngăn chặn hiệu quảt sư xâm nhập của các đối tượng không mong muốn vào máy của"],[950,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 118 khách hàng"],[951,"Proxy lưu trữ dược các thông tin mà khách hàng cần trong bộ nhớ, do đó làm giảm thời gian truy tìm làm cho việc sử dụng băng thông hiệu quả"],[952,"Proxy server giống như một vệ sĩ bảo vệ khỏi những rắc rối trên Internet"],[953,"Một Ps thường nằm bên trong tường lửa, giữa trình duyệt web và server thật, làm chức năng tạm giữ những yêu cầu Internet của các máy khách để chúng không giao tiếp trực tiếp Internet"],[954,"Người dùng sẽ không truy cập được những trang web không cho phép (bị công ty cấm)"],[955,"Mọi yêu cầu của máy khách phải qua Ps, nếu địa chỉ IP có trên proxy, nghĩa là Website này được lưu trữ cục bộ, thì trang này sẽ đươc truy cập mà không cần phải kết nối Internet, nếu không có trên Ps và trang này không bị cấm yêu cầu sẽ được chuyển đến server thật, DNS server.."],[956,"và ra Internet"],[957,"Ps lưu trữ cục bộ các trang Web thường truy cập nhất trong bộ đệm giảm chi phí, tốc độ hiển thị trang Web nhanh"],[958,"Proxy server bảo vệ mạng nội bộ khỏi bị xác định bởi bên ngoài bằng cách mang lại cho mạng hai định danh: một cho nội bộ, một cho bên ngoài"],[959,"Điều này tạo ra một \u201cbí danh\u201d đối với thế giới bên ngoài gây khó khăn đối với nếu người dùng \u201ctự tung tự tác\u201d hay các tay bẻ khóa muốn xâm nhập trực tiếp máy nào đó"],[960,"Cách sử dụng proxy hiệu quả Do các proxy có quy mô bộ nhớ khác nhau và số lượng người đang sử dụng proxy nhiều-ít khác nhau, Proxy server hoạt động quá tải thì tốc độ truy cập internet của khách hàng có thể bị chậm"],[961,"Mặt khác một số websit khách hàng có đầy đủ điều kiện nhân thân để đọc, nghiên cứu nhưng bị tường lửa chặn không truy cập được thì biện pháp đổi proxy để truy cập là điều cần thiết nhằm đảm bảo công việc"],[962,"Do đó người sử dụng có thể chọn proxy server để sử dụng cho riêng"],[963,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 119 mình"],[964,"Có các cách chọn lựa cho người sử dụng"],[965,"Sử dụng proxy mặc định của nhà cung cấp dịch vụ (internet), trường hợp này người sử dụng không cần điền địa chỉ IP của proxy vào cửa sổ internet option của trình duyệt trong máy của mình"],[966,"Sử dụng proxy server khác (phải trả phí hoặc miễn phí) thì phải điền địa chỉ IP của proxy server vào cửa sổ internet option của trình duyệt"],[967,"Một số Proxy miễn phí tham khảo"],[968,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 120 15.2"],[969,"Nguyên lý hoạt động của Firewall Khái niệm tường lửa (Firewall) Trong ngành mạng máy tính, bức tường lửa (tiếng Anh: firewall) là rào chắn mà một số cá nhân, tổ chức, doanh nghiệp, cơ quan nhà nước lập ra nhằm ngăn chặn người dùng mạng Internet truy cập các thông tin không mong muốn hoặc/và ngăn chặn người dùng từ bên ngoài truy nhập các thông tin bảo mật nằm trong mạng nội bộ"],[970,"Tường lửa là một thiết bị phần cứng và/hoặc một phần mềm hoạt động trong một môi trường máy tính nối mạng để ngăn chặn một số liên lạc bị cấm bởi chính sách an ninh của cá nhân hay tổ chức, việc này tương tự với hoạt động của các bức tường ngăn lửa trong các tòa nhà"],[971,"Tường lửa còn được gọi là Thiết bị bảo vệ biên giới (Border Protection Device - BPD), đặc biệt trong các ngữ cảnh của NATO, hay bộ lọc gói tin (packet filter) trong hệ điều hành BSD - một phiên bản Unix của Đại học California, Berkeley"],[972,"Nhiệm vụ cơ bản của tường lửa là kiểm soát giao thông dữ liệu giữa hai vùng tin cậy khác nhau"],[973,"Các vùng tin cậy (zone of trust) điển hình bao gồm: mạng Internet (vùng không đáng tin cậy) và mạng nội bộ (một vùng có độ tin cậy cao)"],[974,"Mục đích cuối cùng là cung cấp kết nối có kiểm soát giữa các vùng với độ tin cậy khác nhau thông qua việc áp dụng một chính sách an ninh và mô hình kết nối dựa trên nguyên tắc quyền tối thiểu (principle of least privilege)"],[975,"Cấu hình đúng đắn cho các tường lửa đòi hỏi kĩ năng của người quản trị hệ thống"],[976,"Việc này đòi hỏi hiểu biết đáng kể về các giao thức mạng và về an ninh"],[977,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 121 máy tính"],[978,"Những lỗi nhỏ có thể biến tường lửa thành một công cụ an ninh vô dụng"],[979,"Lịch sử phát triển Firewall Công nghệ tường lửa bắt đầu xuất hiện vào cuối những năm 1980 khi Internet vẫn còn là một công nghệ khá mới mẻ theo khía cạnh kết nối và sử dụng trên toàn cầu"],[980,"Ý tưởng đầu tiên được đã hình thành sau khi hàng loạt các vụ xâm phạm nghiêm trọng đối với an ninh liên mạng xảy ra vào cuối những năm 1980"],[981,"Năm 1988, một nhân viên tại trung tâm nghiên cứu NASA Ames tại California gửi một bản ghi nhớ qua thư điện tử tới đồng nghiệp rằng: \"Chúng ta đang bị một con VIRUS Internet tấn công"],[982,"Nó đã đánh Berkeley, UC San Diego, Lawrence Livermore, Stanford, và NASA Ames.\" Con virus được biết đến với tên Sâu Morris này đã được phát tán qua thư điện tử và khi đó đã là một sự khó chịu chung ngay cả đối với những người dùng vô thưởng vô phạt nhất"],[983,"Sâu Morris là cuộc tấn công diện rộng đầu tiên đối với an ninh Internet"],[984,"Cộng đồng mạng đã không hề chuẩn bị cho một cuộc tấn công như vậy và đã hoàn toàn bị bất ngờ"],[985,"Sau đó, cộng đồng Internet đã quyết định rằng ưu tiên tối cao là phải ngăn chặn không cho một cuộc tấn công bất kỳ nào nữa có thể xảy ra, họ bắt đầu cộng tác đưa ra các ý tưởng mới, những hệ thống và phần mềm mới để làm cho mạng Internet có thể trở lại an toàn"],[986,""],[987,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 122 Năm 1988, bài báo đầu tiên về công nghệ tường lửa được công bố, khi Jeff Mogul thuộc Digital Equipment Corp"],[988,"phát triển các hệ thống lọc đầu tiên được biết đến với tên các tường lửa lọc gói tin"],[989,"Hệ thống khá cơ bản này đã là thế hệ đầu tiên của cái mà sau này sẽ trở thành một tính năng kỹ thuật an toàn mạng được phát triển cao"],[990,"Từ năm 1980 đến năm 1990, hai nhà nghiên cứu tại phòng thí nghiệm AT&T Bell, Dave Presetto và Howard Trickey, đã phát triển thế hệ tường lửa thứ hai, được biến đến với tên các tường lửa tầng mạch (circuit level firewall)"],[991,"Các bài báo của Gene Spafford ở Đại học Purdue, Bill Cheswick ở phòng thí nghiệm AT&T và Marcus Ranum đã mô tả thế hệ tường lửa thứ ba, với tên gọi tường lửa tầng ứng dụng (application layer firewall), hay tường lửa dựa proxy (proxy-based firewall)"],[992,"Nghiên cứu công nghệ của Marcus Ranum đã khởi đầu cho việc tạo ra sản phẩn thương mại đầu tiên"],[993,"Sản phẩm này đã được"],[994,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 123 Digital Equipment Corporation's (DEC) phát hành với tên SEAL"],[995,"Đợt bán hàng lớn đầu tiên của DEC là vào ngày 13 tháng 9 năm 1991 cho một công ty hóa chất tại bờ biển phía Đông của Mỹ"],[996,"Tại AT&T, Bill Cheswick và Steve Bellovin tiếp tục nghiên cứu của họ về lọc gói tin và đã phát triển một mô hình chạy được cho công ty của chính họ, dựa trên kiến trúc của thế hệ tường lửa thứ nhất của mình"],[997,"Năm 1992, Bob Braden và Annette DeSchon tại Đại học Nam California đã phát triển hệ thống tường lửa lọc gói tin thế hệ thứ tư"],[998,"Sản phẩm có tên \u201cVisas\u201d này là hệ thống đầu tiên có một giao diện với màu sắc và các biểu tượng, có thể dễ dàng cài đặt thành phần mềm cho các hệ điều hành chẳng hạn Microsoft Windows và Mac/OS của Apple và truy nhập từ các hệ điều hành đó"],[999,"Năm 1994, một công ty Israel có tên Check Point Software Technologies đã xây dựng sản phẩm này thành một phần mềm sẵn sàng cho sử dụng, đó là FireWall-1"],[1000,"Một thế hệ thứ hai của các tường lửa proxy đã được dựa trên công nghệ Kernel Proxy"],[1001,"Thiết kế này liên tục được cải tiến nhưng các tính năng và mã chương trình cơ bản hiện đang được sử dụng rộng rãi trong cả các hệ thống máy tính gia đình và thương mại"],[1002,"Cisco, một trong những công ty an ninh mạng lớn nhất trên thế giới đã phát hành sản phẩm này năm 1997"],[1003,"Thế hệ FireWall-1 mới tạo thêm hiệu lực cho động cơ kiểm tra sâu gói tin bằng cách chia sẻ chức năng này với một hệ thống ngăn chặn xâm nhập"],[1004,"Các loại tường lửa Có ba loại tường lửa cơ bản tùy theo: Truyền thông được thực hiện giữa một nút đơn và mạng, hay giữa một số mạng"],[1005,"Truyền thông được chặn tại tầng mạng, hay tại tầng ứng dụng"],[1006,""],[1007,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 124 Tường lửa có theo dõi trạng thái của truyền thông hay không"],[1008,"Phân loại theo phạm vi của các truyền trông được lọc, có các loại sau: Tường lửa cá nhân, một ứng dụng phần mềm với chức năng thông thường là lọc dữ liệu ra vào một máy tính đơn"],[1009,"Tường lửa mạng, thường chạy trên một thiết bị mạng hay máy tính chuyên dụng đặt tại ranh giới của hai hay nhiều mạng hoặc các khu phi quân sự (mạng con trung gian nằm giữa mạng nội bộ và mạng bên ngoài)"],[1010,"Một tường lửa thuộc loại này lọc tất cả giao thông dữ liệu vào hoặc ra các mạng được kết nối qua nó"],[1011,"Loại tường lửa mạng tương ứng với ý nghĩa truyền thống của thuật ngữ \"tường lửa\" trong ngành mạng máy tính"],[1012,"Khi phân loại theo các tầng giao thức nơi giao thông dữ liệu có thể bị chặn, có ba loại tường lửa chính: Tường lửa tầng mạng"],[1013,"Ví dụ iptables"],[1014,"Tường lửa tầng ứng dụng"],[1015,"Ví dụ TCP Wrappers"],[1016,"Tường lửa ứng dụng"],[1017,"Ví dụ: hạn chế các dịch vụ ftp bằng việc định cấu hình tại tệp /etc/ftpaccess"],[1018,"Các loại tường lửa tầng mạng và tường lửa tầng ứng dụng thường trùm lên nhau, mặc dù tường lửa cá nhân không phục vụ mạng, nhưng một số hệ thống đơn đã cài đặt chung cả hai"],[1019,"Cuối cùng, nếu phân loại theo tiêu chí rằng tường lửa theo dõi trạng thái của các kết nối mạng hay chỉ quan tâm đến từng gói tin một cách riêng rẽ, có hai loại tường lửa: Tường lửa có trạng thái (Stateful firewall) Tường lửa phi trạng thái (Stateless firewall)"],[1020,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 125 Lý do sử dụng tường lửa Mạng internet ngày càng phát triển và phổ biến rộng khắp mọi nơi, lợi ích của nó rất lớn"],[1021,"Tuy nhiên cũng có rất nhiều ngoại tác không mong muốn đối với các cá nhân là cha mẹ hay tổ chức, doanh nghiệp, cơ quan nhà nước.."],[1022,"như các trang web không phù hợp lứa tuổi, nhiệm vụ, lợi ích, đạo đức, pháp luật hoặc trao đổi thông tin bất lợi cho cá nhân, doanh nghiệp.."],[1023,"Do vậy họ (các cá nhân, tổ chức, cơ quan và nhà nước) sử dụng tường lửa để ngăn chặn"],[1024,"Một lý do khác là một số quốc gia theo chế độ độc tài, độc đảng áp dụng tường lửa để ngăn chận quyền trao đổi, tiếp cận thông tin của công dân nước mình không cho họ truy cập vào các trang web hoặc trao đổi với bên ngoài, điều mà nhà cầm quyền cho rằng không có lợi cho chế độ đó"],[1025,"Cách thức ngăn chặn Để ngăn chặn các trang web không mong muốn, các trao đổi thông tin không mong muốn người ta dùng cách lọc các địa chỉ web không mong muốn mà họ đã tập hợp được hoặc lọc nội dung thông tin trong các trang thông qua các từ khóa để ngăn chặn những người dùng không mong muốn truy cập vào mạng và cho phép người dùng hợp lệ thực hiện việc truy xuất"],[1026,"Bức tường lửa có thể là một thiết bị định hướng (Router, một thiết bị kết nối giữa hai hay nhiều mạng và chuyển các thông tin giữa các mạng này) hay trên một máy chủ (Server), bao gồm phần cứng và/hoặc phần mềm nằm giữa hai mạng (chẳng hạn mạng Internet và mạng liên kết các gia đình, điểm kinh doanh internet, tổ chức, công ty, hệ thống Ngân hàng, cơ quan nhà nước"],[1027,"Cơ quan nhà nước có thể lập bức tường lửa ngay từ cổng Internet quốc gia hoặc yêu cầu các nhà cung cấp dịch vụ đường truyền (IXP) và cung cấp dịch vụ Internet (ISP) thiết lập hệ thống tường lửa hữu hiệu hoặc yêu cầu các đại lý kinh"],[1028,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 126 doanh internet thực hiện các biện pháp khác như Thông tư liên tịch số 02/2005/TTLT về quản lý đại lý Internet có hiệu lực vào đầu tháng 8-2005 ở Việt Nam"],[1029,"Vượt tường lửa Các trang web bị chận nhất là các trang web sex thường rất linh động thay đổi địa chỉ để tránh sự nhận diện hoặc nhanh chóng thông báo địa chỉ mới một cách hạn chế với các đối tượng dùng đã định"],[1030,"Người dùng ở các nước có hệ thống tường lửa có thể tiếp cận với nội dung bị chận qua các ngõ khác bằng cách thay đổi địa chỉ Proxy, DNS hoặc qua vùng nhớ đệm cached của trang tìm kiếm thông dụng như Google, Yahoo..., hoặc sử dụng phần mềm miễn phí Tor"],[1031,"Nói chung người dùng mạng hiểu biết nhiều về máy tính thì biết nhiều kỹ xảo vượt tường lửa"],[1032,"Hiệu quả khi sử dụng tường lửa Bức tường lửa chỉ có hiệu quả tốt một thời gian sau đó các trang web bị chận cũng như người sử dụng dùng mưu mẹo, kỹ xảo, kỹ thuật để né và vuợt tường, vì vậy phải luôn luôn cập nhật kỹ thuật, nhận điện các địa chỉ mới để thay đổi phương thức hoạt động, điều này làm tốc độ truy cập chung bị giảm và đòi hỏi phải nâng cấp trang thiết bị, kỹ thuật"],[1033,"Nhược điểm khi sử dụng tường lửa Sử dụng tường lửa cần phải xử lý một lượng lớn thông tin nên việc xử lý lọc thông tin có thể làm chậm quá trình kết nối của người kết nối"],[1034,"Việc sử dụng tường lửa chỉ hữu hiệu đối với những người không thành thạo kỹ thuật vượt tường lửa, những người sử dụng khác có hiểu biết có thể dễ dàng vượt qua tường lửa bằng cách sử dụng các proxy không bị ngăn chặn"],[1035,""],[1036,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 127 15.3"],[1037,"Triển khai xây dựng hệ thống tường lửa cho doanh nghiệp Mô tả sơ đồ hệ thống: Gồm 01 PC đóng vai trò Domain Controller (DC) Mạng LAN thuộc dải IP 192.168.1.0/24 DMZ thuộc dải IP 172.16.1.0/24 External có dải IP 10.0.0.0/30 Firewall có 03 Fast Ethernet tương ứng 03 phân vùng LAN (Internal), DMZ và External Yêu cầu: Các PC join vào Domain (DC) File Server và Web Server thuộc vùng DMZ cho phép các PC thuộc LAN truy cập vào Các PC thuộc LAN có thể truy cập Internet theo sự cho phép của Firewall"],[1038,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 128 Bài 16: Cơ bản về bảo mật 16.1"],[1039,"Một số nguy cơ tấn công trên mạng Những nguy cơ bảo mật đe dọa mất mát dữ liệu nhạy cảm luôn là mối lo ngại của những doanh nghiệp vừa và nhỏ"],[1040,"Sau đây là 10 nguy cơ bảo mật được đánh giá là nguy hiểm nhất mà doanh nghiệp phải đối mặt"],[1041,"Những nhân viên bất mãn với công ty Trong một số doanh nghiệp vừa và nhỏ, những dữ liệu kinh doanh quan trọng hay thông tin khách hàng thường được giao phó cho một cá nhân"],[1042,"Điều này tạo nên tình trạng \"lệ thuộc quyền hạn\" nguy hiểm"],[1043,"Khi cá nhân đó bất mã vì một lý do nào đó với công ty và ban điều hành công ty"],[1044,"Lúc này vấn đề chỉ còn là thời gian và quyền hạn kiểm soát thông tin của anh ta mà thôi"],[1045,"Không có kế hoạch xử lý rủi ro Hệ thống máy tính, mạng của doanh nghiệp luôn phải đối mặt với nhiều nguy cơ bảo mật, từ việc hư hỏng vật lý cho đến các trường hợp bị tấn công từ tin tặc hay virus đều có khả năng gây tổn hại cho dữ liệu"],[1046,"Khá nhiều doanh nghiệp vừa và nhỏ thiếu hẳn chính sách phản ứng với việc thất thoát dữ liệu hay kế hoạch khắc phục sự cố"],[1047,"Đại đa số đều lúng túng và bắt đầu các hoạt động mang tính ứng phó"],[1048,"Những thiết lập mặc định không được thay đổi"],[1049,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 129 Tin tặc hiện nay thường dùng các tập tin chứa đựng hàng trăm ngàn tài khoản mặc định (username và password) của các thiết bị kết nối mạng để dò tìm quyền hạn truy xuất khả năng đăng nhập vào hệ thống mạng"],[1050,"Nếu các tài khoản, thiết lập mặc định không được thay đổi, tin tặc sẽ dễ dàng chiếm quyền điểu khiển tài nguyên mạng"],[1051,"Môi trường mạng tại gia không an toàn Đối với một vài doanh nghiệp nhỏ, các nhân viên thường đem máy tính xách tay (laptop) của mình đến văn phòng để làm việc"],[1052,"Trong môi trường mạng tại gia đình, chế độ bảo mật thường rất kém hay thậm chí không có những thiết lập bảo vệ"],[1053,"Do đó, những chiếc laptop của nhân viên có thể là nguồn gốc phát tán virus, malware hay trở thành zombie trung gian để tin tặc tấn công vào hệ thống mạng của doanh nghiệp"],[1054,"Thiếu cảnh giác với mạng công cộng Một thủ đoạn chung tin tặc hay sử dụng để dẫn dụ những nạn nhân là đặt một thiết bị trung chuyển wireless access-point không cài đặt mật khẩu (unsecured) rồi gán một cái nhãn như \"Mạng Wi-Fi miễn phí\" và rung đùi ngồi chờ những kết nối \"ngây thơ\" rơi vào bẫy"],[1055,"Tin tặc sẽ dùng các công cụ thâu tóm gói dữ liệu mạng giúp nhận biết cả những văn bản hay bất kỳ những gì mà nhân viên doanh nghiệp gõ rồi gửi ra ngoài"],[1056,"Mất mát thiết bị di động Rất nhiều doanh nghiệp, thậm chí gần đây còn có cả một vài hãng lớn bị thất thoát dữ liệu quan trọng do mất cắp máy tính xách tay, thất lạc điện thoại di động hay các đĩa flash USB lưu trữ"],[1057,"Dữ liệu trong các thiết bị này thường ít được mã hóa hay bảo vệ bằng mật khẩu, rất dễ dàng xử lý một khi đã sở hữu chúng"],[1058,"Lỗi từ máy chủ web Hiện còn khá nhiều doanh nghiệp không coi trọng việc đặt website của mình tại máy chủ nào, mức độ bảo mật ra sao"],[1059,"Do đó, website kinh doanh của doanh nghiệp sẽ là mồi ngon của các đợt tấn công SQL Injection hay botnet"],[1060,"Duyệt web tràn lan"],[1061,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 130 Không phải nhân viên văn phòng nào cũng đủ am hiểu tường tận về những hiểm họa rình rập trên mạng Internet như malware, spyware, virus, trojan.."],[1062,"Họ cứ vô tư truy cập vào các website không xác định hoặc bị dẫn dụ click vào những website được tin tặc bày cỗ chào đón và thế là máy tính của nhân viên sẽ là cánh cửa giúp tin tặc xâm nhập vào trong mạng của doanh nghiệp"],[1063,"Email chứa đựng mã độc Những cuộc giội bom thư rác sẽ làm tràn ngập hộp thư của bạn với những tiêu đề hấp dẫn như những vụ scandal tình ái, hình ảnh nóng bỏng hay các lời mời chào kinh doanh.."],[1064,"chỉ một cú nhấp chuột sai lầm thì ngay lập tức máy tính sẽ tải về các đoạn mã độc làm tiền đề cho hàng loạt phần mềm độc hại đi sau xâm nhập vào máy tính"],[1065,"Không vá lỗi bảo mật Hơn 90% các cuộc tấn công vào hệ thống mạng đều cố gắng khai thác các lỗi bảo mật đã được biết đến"],[1066,"Mặc dù các bản vá lỗi vẫn thường xuyên được những hãng sản xuất cung cấp ngay sau khi lỗi được phát hiện nhưng một vài doanh nghiệp lại không coi trọng việc cập nhật lỗi thường nhật dẫn đến việc các lỗi bảo mật mở toang cổng chào đón những cuộc tấn công"],[1067,"16.2"],[1068,"Các phương thức tấn công 16.2.1 Viruses, Worms, Trojan Horses"],[1069,"Trong khoa học máy tính, virus máy tính (thường được người sử dụng gọi tắt là virus) là những chương trình hay đoạn mã được thiết kế để tự nhân bản và sao chép chính nó vào các đối tượng lây nhiễm khác (file, ổ đĩa, máy tính ..)"],[1070,"Trước đây, virus thường được viết bởi một số người am hiểu về lập trình muốn chứng tỏ khả năng của mình nên thường virus có các hành động như: cho một chương trình không hoạt động đúng, xóa dữ liệu, làm hỏng ổ cứng,.."],[1071,"hoặc gây ra những trò đùa khó chịu"],[1072,"Những virus mới được viết trong thời gian gần đây không còn thực hiện các trò đùa hay sự phá hoại đối máy tính của nạn nhân bị lây nhiễm nữa, mà đa phần"],[1073,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 131 hướng đến việc lấy cắp các thông tin cá nhân nhạy cảm (các mã số thẻ tín dụng) mở cửa sau cho tin tặc đột nhập chiếm quyền điều khiển hoặc các hành động khác nhằm có lợi cho người phát tán virus"],[1074,"Chiếm trên 90% số virus đã được phát hiện là nhắm vào hệ thống sử dụng hệ điều hành họ Windows chỉ đơn giản bởi hệ điều hành này được sử dụng nhiều nhất trên thến giới"],[1075,"Do tính thông dụng của Windows nên các tin tặc thường tập trung hướng vào chúng nhiều hơn là các hệ điều hành khác"],[1076,"(Cũng có quan điểm cho rằng Windows có tính bảo mật không tốt bằng các hệ điều hành khác (như Linux) nên có nhiều virus hơn, tuy nhiên nếu các hệ điều hành khác cũng thông dụng như Windows hoặc thị phần các hệ điều hành ngang bằng nhau thì cũng lượng virus xuất hiện có lẽ cũng tương đương nhau)"],[1077,"Lược sử của virus Có nhiều quan điểm khác nhau về lịch sử của virus điện toán"],[1078,"Ở đây chỉ nêu rất vắn tắt và khái quát những điểm chung nhất và, qua đó, chúng ta có thể hiểu chi tiết hơn về các loại virus: Năm 1949: John von Neuman (1903-1957) phát triển nền tảng lý thuyết tự nhân bản của một chương trình cho máy tính"],[1079,"Vào cuối thập niên 1960 đầu thập niên 1970 đã xuất hiện trên các máy Univax 1108 một chương trình gọi là \"Pervading Animal\" tự nó có thể nối với phần sau của các tập tin tự hành"],[1080,"Lúc đó chưa có khái niệm virus"],[1081,"Năm 1981: Các virus đầu tiên xuất hiện trong hệ điều hành của máy tính Apple II"],[1082,"Năm 1983: Tại Đại Học miền Nam California, tại Hoa Kỳ, Fred Cohen lần đầu đưa ra khái niệm computer virus như định nghĩa ngày nay"],[1083,"Năm 1986: Virus \"the Brain\", virus cho máy tính cá nhân (PC) đầu tiên, được tạo ra tại Pakistan bởi Basit và Amjad"],[1084,"Chương trình này nằm trong phần khởi động (boot sector) của một dĩa mềm 360Kb và nó sẽ lây nhiễm tất cả các ổ dĩa mềm"],[1085,"Đây là loại \"stealth virus\" đầu tiên"],[1086,""],[1087,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 132 Cũng trong tháng 12 năm này, virus cho DOS được khám phá ra là virus \"VirDem\""],[1088,"Nó có khả năng tự chép mã của mình vào các tệp tự thi hành (executable file) và phá hoại các máy tính VAX/VMS"],[1089,"Năm 1987: Virus đầu tiên tấn công vào command.com là virus \"Lehigh\""],[1090,"Năm 1988: Virus Jerusalem tấn công đồng loạt các đại học và các công ty trong các quốc gia vào ngày thứ Sáu 13"],[1091,"Đây là loại virus hoạt động theo đồng hồ của máy tính (giống bom nổ chậm cài hàng loạt cho cùng một thời điểm)"],[1092,"Tháng 11 cùng năm, Robert Morris, 22 tuổi, chế ra worm chiếm cứ các máy tính của ARPANET, làm liệt khoảng 6.000 máy"],[1093,"Morris bị phạt tù 3 năm và 10.000 dollar"],[1094,"Mặc dù vậy anh ta khai rằng chế ra virus vì \"chán đời\" (boresome)"],[1095,"Năm 1990: Chương trình thương mại chống virus đầu tiên ra đời bởi Norton"],[1096,"Năm 1991: Virus đa hình (polymorphic virus) ra đời đầu tiên là virus \"Tequilla\""],[1097,"Loại này biết tự thay đổi hình thức của nó, gây ra sự khó khăn cho các chương trình chống virus"],[1098,"Năm 1994: Những người thiếu kinh nghiệm, vì lòng tốt đã chuyển cho nhau một điện thư cảnh báo tất cả mọi người không mở tất cả những điện thư có cụm từ \"Good Times\" trong dòng bị chú (subject line) của chúng"],[1099,"Đây là một loại virus giả (hoax virus) đầu tiên xuất hiện trên các điện thư và lợi dụng vào \"tinh thần trách nhiệm\" của các người nhận được điện thư này để tạo ra sự luân chuyển"],[1100,"Năm 1995: Virus văn bản (macro virus) đầu tiên xuất hiện trong các mã macro trong các tệp của Word và lan truyền qua rất nhiều máy"],[1101,"Loại virus này có thể làm hư hệ điều hành chủ"],[1102,"Macro virus là loại virus viết ra bằng ngôn ngữ lập trình Visual Basic cho các ứng dụng (VBA) và tùy theo khả năng, có thể lan nhiễm trong các ứng dụng văn phòng của Microsoft như Word, Excel, PowerPoint, OutLook,..."],[1103,"Loại macro này, nổi tiếng có virus Baza và virus Laroux, xuất hiện năm 1996, có thể nằm trong cả Word hay"],[1104,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 133 Excel"],[1105,"Sau này, virus Melissa, năm 1997, tấn công hơn 1 triệu máy, lan truyền bởi một tệp đính kèm kiểu Word bằng cách đọc và gửi đến các địa chỉ của Outlook trong các máy đã bị nhiễm virus"],[1106,"Virus Tristate, năm 1999, có thể nằm trong các tệp Word, Excel và Power Point"],[1107,"Năm 2000: Virus Love Bug, còn có tên ILOVEYOU, đánh lừa tính hiếu kì của mọi người"],[1108,"Đây là một loại macro virus"],[1109,"Đặc điểm là nó dùng đuôi tập tin dạng \"ILOVEYOU.txt.exe\""],[1110,"Lợi dụng điểm yếu của Outlook thời bấy giờ: theo mặc định sẵn, đuôi dạng .exe sẽ tự động bị dấu đi"],[1111,"Ngoài ra, virus này còn có một đặc tính mới của spyware: nó tìm cách đọc tên và mã nhập của máy chủ và gửi về cho tay hắc đạo"],[1112,"Khi truy cứu ra thì đó là một sinh viên người Philippines"],[1113,"Tên này được tha bổng vì Philippines chưa có luật trừng trị những người tạo ra virus cho máy tính"],[1114,"Năm 2002: Tác giả của virus Melissa, David L"],[1115,"Smith, bị xử 20 tháng tù"],[1116,"Năm 2003: Virus Slammer, một loại worm lan truyền với vận tốc kỉ lục, truyền cho khoảng 75 ngàn máy trong 10 phút"],[1117,"Năm 2004: Đánh dấu một thế hệ mới của virus là worm Sasser"],[1118,"Với virus này thì người ta không cần phải mở đính kèm của điện thư mà chỉ cần mở lá thư là đủ cho nó xâm nhập vào máy"],[1119,"Cũng may là Sasser không hoàn toàn hủy hoại máy mà chỉ làm cho máy chủ trở nên chậm hơn và đôi khi nó làm máy tự khởi động trở lại"],[1120,"Tác giả của worm này cũng lập một kỉ lục khác: tay hắc đạo (hacker) nổi tiếng trẻ nhất, chỉ mới 18 tuổi, Sven Jaschan, người Đức"],[1121,"Tuy vậy, vì còn nhỏ tuổi, nên vào tháng 7 năm 2005 nên tòa án Đức chỉ phạt anh này 3 năm tù treo và 30 giờ lao động công ích"],[1122,"Với khả năng của các tay hacker, virus ngày ngay có thể xâm nhập bằng cách bẻ gãy các rào an toàn của hệ điều hành hay chui vào các chổ hở của các phần mềm nhất là các chương trình thư điện tử, rồi từ đó lan tỏa khắp nơi theo các nối kết mạng hay qua thư điện tử"],[1123,"Do dó, việc truy tìm ra nguồn gốc phát tán virus sẽ càng khó hơn nhiều"],[1124,"Chính Microsoft, hãng chế tạo các phần mềm phổ biến, cũng là một nạn nhân"],[1125,"Họ đã phải nghiên cứu, sửa chữa và phát hành rất nhiều"],[1126,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 134 các phần mềm nhằm sửa các khuyết tật của phần mềm cũng như phát hành các thế hệ của gói dịch vụ (service pack) nhằm giảm hay vô hiệu hóa các tấn công của virus"],[1127,"Nhưng dĩ nhiên với các phần mềm có hàng triệu dòng mã nguồn thì mong ước chúng hoàn hảo theo ý nghĩa của sự an toàn chỉ có trong lý thuyết"],[1128,"Đây cũng là cơ hội cho các nhà sản xuất các loại phần mềm bảo vệ có đất dụng võ"],[1129,"Tương lai không xa có lẽ virus sẽ tiến thêm các bước khác như: nó bao gồm mọi điểm mạnh sẵn có (polymorphic, sasser hay tấn công bằng nhiều cách thức, nhiều kiểu) và còn kết hợp với các thủ đọan khác của phần mềm gián điệp (spyware)"],[1130,"Đồng thời nó có thể tấn công vào nhiều hệ điều hành khác nhau chứ không nhất thiết nhắm vào một hệ điều hành độc nhất như trong trường hợp của Windows hiện giờ"],[1131,"Và có lẽ virus sẽ không hề (thậm chí là không cần) thay đổi phương thức tấn công: lợi dụng điểm yếu của máy tính cũng như chương trình"],[1132,"Các khái niệm có liên quan Sâu máy tính(worm): là các chương trình cũng có khả năng tự nhân bản tự tìm cách lan truyền qua hệ thống mạng (thường là qua hệ thống thư điện tử)"],[1133,"Điểm cần lưu ý ở đây, ngoài tác hại thẳng lên máy bị nhiễm, nhiệm vụ chính của worm là phá các mạng (network) thông tin, làm giảm khả năng hoạt động hay ngay cả hủy hoại các mạng này"],[1134,"Nhiều nhà phân tích cho rằng worm khác với virus, họ nhấn mạnh vào đặc tính phá hoại mạng nhưng ở đây worm được là một loại virus đặc biệt"],[1135,"Worm nổi tiếng nhất được tạo bởi Robert Morris vào năm 1988"],[1136,"Nó có thể làm hỏng bất kì hệ điều hành UNIX nào trên Internet"],[1137,"Tuy vậy, có lẽ worm tồn tại lâu nhất là virus happy99, hay các thế hệ sau đó của nó có tên là Trojan"],[1138,"Các worm này sẽ thay đổi nội dung tệp wsok32.dll của Windows và tự gửi bản sao của chính chúng đi đến các địa chỉ cho mỗi lần gửi điện thư hay message"],[1139,"Phần mềm ác tính (malware): (chữ ghép của maliciuos và software) chỉ chung các phần mềm có tính năng gây hại như virus, worm và Trojan horse"],[1140,"Trojan Horse: đây là loại chương trình cũng có tác hại tương tự như virus chỉ khác là nó không tự nhân bản ra"],[1141,"Như thế, cách lan truyền duy nhất là thông qua"],[1142,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 135 các thư dây chuyền Để trừ loại này người chủ máy chỉ việc tìm ra tập tin Trojan horse rồi xóa nó đi là xong"],[1143,"Tuy nhiên, không có nghĩa là không thể có hai con Trojan horse trên cùng một hệ thống"],[1144,"Chính những kẻ tạo ra các phần mềm này sẽ sử dụng kỹ năng lập trình của mình để sao lưu thật nhiều con trước khi phát tán lên mạng"],[1145,"Đây cũng là loại virus cực kỳ nguy hiểm"],[1146,"Nó có thể hủy ổ cứng, hủy dữ liệu"],[1147,"Phần mềm gián điệp (spyware): Đây là loại virus có khả năng thâm nhập trực tiếp vào hệ điều hành mà không để lại \"di chứng\""],[1148,"Thường một số chương trình diệt virus có kèm trình diệt spyware nhưng diệt khá kém đối với các đợt \"dịch\""],[1149,"Phần mềm quảng cáo (adware): Loại phần mềm quảng cáo, rất hay có ở trong các chương trình cài đặt tải từ trên mạng"],[1150,"Một số phần mềm vô hại, nhưng một số có khả năng hiển thị thông tin kịt màn hình, cưỡng chế người sử dụng"],[1151,"Botnet: Trước đây, loại này thường dùng để nhắm vào các hệ thống điều khiển máy tính từ xa, nhưng hiện giờ lại nhắm vào người dùng"],[1152,"Điều đặc biệt nguy hiểm là các botnet được phơi bày từ các hacker không cần kỹ thuật lập trình cao"],[1153,"Nó được rao bán với giá từ 20USD trở lên cho các hacker"],[1154,"Hậu quả của nó để lại không nhỏ: mất tài khoản"],[1155,"Nếu liên kết với một hệ thống máy tính lớn, nó có thể tống tiền cả một doanh nghiệp"],[1156,"Nhóm của Sites ở Sunbelt cùng với đội phản ứng nhanh của công ty bảo mật iDefense Labs đã tìm ra một botnet chạy trên nền web có tên là Metaphisher"],[1157,"Thay cho cách sử dụng dòng lệnh, tin tặc có thể sử dụng giao diện đồ họa, các biểu tượng có thể thay đổi theo ý thích, chỉ việc dịch con trỏ, nhấn chuột và tấn công"],[1158,"Theo iDefense Labs, các bot do Metaphisher điều khiển đã lây nhiễm hơn 1 triệu PC trên toàn cầu"],[1159,"Thậm chí trình điều khiển còn mã hóa liên lạc giữa nó và bot \"đàn em\" và chuyển đi mọi thông tin về các PC bị nhiễm cho người chủ bot như vị trí địa lý, các bản vá bảo mật của Windows và những trình duyệt đang chạy trên mỗi PC"],[1160,"Những công cụ tạo bot và điều khiển dễ dùng trên góp phần làm tăng vọt số PC bị nhiễm bot được phát hiện trong thời gian gần đây"],[1161,"Thí dụ, Jeanson James"],[1162,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 136 Ancheta, 21 tuổi, người Mỹ ở bang California, bị tuyên án 57 tháng tù vì đã vận hành một doanh nghiệp \"đen\" thu lợi bất chính dựa vào các botnet điều khiển 400.000 \"thành viên\" và 3 tay điều khiển bot bị bắt ở Hà Lan mùa thu năm trước chính là trung tâm \"đầu não\" điều khiển hơn 1,5 triệu PC"],[1163,"Mặc dù đã có luật để bắt những tội phạm kiểu này, nhưng do dễ dàng có được những công cụ phá hoại nên luôn có thêm người mới gia nhập hàng ngũ hacker vì tiền hay vì tò mò"],[1164,"Keylogger: là phần mềm ghi lại chuỗi phím gõ của người dùng"],[1165,"Nó có thể hữu ích cho việc tìm nguồn gốc lỗi sai trong các hệ thống máy tính và đôi khi được dùng để đo năng suất làm việc của nhân viên văn phòng"],[1166,"Các phần mềm kiểu này rất hữu dụng cho ngành luật pháp và tình báo - ví dụ, cung cấp một phương tiện để lấy mật khẩu hoặc các khóa mật mã và nhờ đó qua mắt được các thiết bị an ninh"],[1167,"Tuy nhiên, các phần mềm keylogger được phổ biến rộng rãi trên Internet và bất cứ ai cũng có thể sử dụng cho mục đích lấy trộm mật khẩu và chìa khóa mã hóa"],[1168,"Phishing: là một hoạt động phạm tội dùng các kỹ thuật lừa đảo"],[1169,"Kẻ lừa đảo cố gắng lừa lấy các thông tin nhạy cảm, chẳng hạn như mật khẩu và thông tin về thẻ tín dụng, bằng cách giả là một người hoặc một doanh nghiệp đáng tin cậy trong một giao dịch điện tử"],[1170,"Phishing thường được thực hiện bằng cách sử dụng thư điện tử hoặc tin nhắn, đôi khi còn sử dụng cả điện thoại"],[1171,"Rootkit: là một bộ công cụ phần mềm dành cho việc che dấu làm các tiến trình đang chạy, các file hoặc dữ liệu hệ thống"],[1172,"Rootkit có nguồn gốc từ các ứng dụng tương đối hiền, nhưng những năm gần đây, rootkit đã bị sử dụng ngày càng nhiều bởi các phần mềm ác tính, giúp kẻ xâm nhập hệ thống giữ được đường truy nhập một hệ thống trong khi tránh bị phát hiện"],[1173,"Người ta đã biết đến các rootkit dành cho nhiều hệ điều hành khác nhau chẳng hạn Linux, Solaris và một số phiên bản của Microsoft Windows"],[1174,"Các rootkit thường sửa đổi một số phần của hệ điều hành hoặc tự cài đặt chúng thành các driver hay các môdule trong nhân hệ điều hành (kernel module)"],[1175,""],[1176,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 137 Khi hay tin CD nhạc của Sony cài đặt rookit để giấu file chống sao chép xuất hiện vào tháng 11 năm ngoái, giới tin tặc hân hoan và nhanh chóng khai thác ứng dụng của Sony"],[1177,"Phần mềm của Sony giấu bất kỳ file hay tiến trình bắt đầu với \"$sys$\", những kẻ viết phần mềm độc hại đã đổi tên file để lợi dụng đặc điểm này"],[1178,"Vào tháng 3, nhà sản xuất phần mềm chống virus ở Tây Ban Nha là Panda Software cho biết họ đang tìm biến thể của sâu Bagle cực kỳ độc hại có trang bị khả năng của rootkit"],[1179,"Trầm trọng hơn, tương tự như các \"nhà sản xuất\" chương trình botnet, những kẻ tạo phần mềm rootkit còn bán hoặc phát tán miễn phí các công cụ, giúp những tay viết phần mềm độc hại dễ dàng bổ sung chức năng rootkit cho các virus cũ như Bagle hay tạo loại mới"],[1180,"Một dự án do Microsoft và các nhà nghiên cứu của đại học Michigan thực hiện thật sự mở đường cho nghiên cứu rootkit, tạo ra một phương thức mới gần như \"đặt\" HĐH chạy trên phần mềm có tên SubVirt (tên của dự án nghiên cứu)"],[1181,"HĐH vẫn làm việc bình thường, nhưng \"máy ảo\" điều khiển mọi thứ HĐH nhìn thấy và có thể dễ dàng giấu chính nó"],[1182,"May mắn là kỹ thuật này không dễ thực hiện và người dùng dễ nhận ra vì làm chậm hệ thống và làm thay đổi những file nhất định"],[1183,"Hiện giờ, loại siêu rootkit này chỉ mới ở dạng ý tưởng, cần nhiều thời gian trước khi tin tặc có thể thực hiện phương thức tấn công này"],[1184,"Phần mềm tống tiền (Ransomware): là loại phần mềm ác tính sử dụng một hệ thống mật mã hóa yếu (phá được) để mã hóa dữ liệu thuộc về một cá nhân và đòi tiền chuộc thì mới khôi phục lại"],[1185,"Cửa hậu (Backdoor): trong một hệ thống máy tính, cửa hậu là một phương pháp vượt qua thủ tục chứng thực người dùng thông thường hoặc để giữ đường truy nhập từ xa tới một máy tính, trong khi cố gắng không bị phát hiện bởi việc giám sát thông thường"],[1186,"Cửa hậu có thể có hình thức một chương trình được cài đặt (ví dụ Back Orifice hoặc cửa hậu rookit Sony/BMG rootkit được cài đặt khi một đĩa bất kỳ trong số hàng triệu đĩa CD nhạc của Sony được chơi trên một máy"],[1187,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 138 tính chạy Windows), hoặc có thể là một sửa đổi đối với một chương trình hợp pháp - đó là khi nó đi kèm với Trojan"],[1188,"Virus lây qua passport: Loại virus này lây qua các thẻ RFID cá nhân để thay đổi nội dung của thẻ, buộc tội người dùng và có thể ăn cắp passport"],[1189,"Vì sóng RFID không lây qua kim loại nên khi không cần dùng, bạn nên để trong hộp kim loại"],[1190,"Virus điện thoại di động: chỉ riêng hệ thống PC đã đủ làm người dùng đau đầu, nay lại có virus điện thoại di động"],[1191,"Loại này thường lây qua tin nhắn"],[1192,"Một vài virus ĐTDĐ cũng đánh sập HĐH và làm hỏng thiết bị"],[1193,"Một số khác chỉ gây khó chịu như thay đổi các biểu tượng làm thiết bị trở nên khó sử dụng"],[1194,"Một số ít còn nhằm vào tiền"],[1195,"Ví dụ, một Trojan lây lan các điện thoại ở Nga gửi tin nhắn tới những dịch vụ tính tiền người gửi"],[1196,"Danh sách các đuôi tệp có khả năng di truyền và bị lây nhiễm Các tập tin trên hệ điều hành Windows mang đuôi mở rộng sau có nhiều khả năng bị virus tấn công"],[1197,".bat: Microsoft Batch File (Tệp xử lí theo lô) .chm: Compressed HTML Help File (Tệp tài liệu dưới dạng nén HTML) .cmd: Command file for Windows NT (Tệp thực thi của Windows NT) .com: Command file (program) (Tệp thực thi) .cpl: Control Panel extension (Tệp của Control Panel) .doc: Microsoft Word (Tệp của chương trình Microsoft Word) .exe: Executable File (Tệp thực thi) .hlp: Help file (Tệp nội dung trợ giúp người dùng) .hta: HTML Application (Ứng dụng HTML)"],[1198,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 139 .js: JavaScript File (Tệp JavaScript) .jse: JavaScript Encoded Script File (Tệp mã hoá JavaScript) .lnk: Shortcut File (Tệp đường dẫn) .msi: Microsoft Installer File (Tệp cài đặt) .pif: Program Information File (Tệp thông tin chương trình) .reg: Registry File .scr: Screen Saver (Portable Executable File) .sct: Windows Script Component .shb: Document Shortcut File .shs: Shell Scrap Object .vb: Visual Basic File .vbe: Visual Basic Encoded Script File .vbs: Visual Basic File .wsc: Windows Script Component .wsf: Windows Script File .wsh: Windows Script Host File .{*}: Class ID (CLSID) File Extensions Các hình thức lây nhiễm của virus máy tính Virus lây nhiễm theo cách cổ điển Cách cổ điển nhất của sự lây nhiễm, bành trướng của các loai virus máy tính là thông qua các thiết bị lưu trữ di động: Trước đây đĩa mềm và đĩa CD chứa chương trình thường là phương tiện bị lợi dụng nhiều nhất để phát tán"],[1199,"Ngày nay khi đĩa mềm rất ít được sử dụng thì phương thức lây nhiễm này chuyển qua các ổ USB, các đĩa cứng di động hoặc các thiết bị giải trí kỹ thuật số"],[1200,""],[1201,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 140 Virus lây nhiễm qua thư điện tử Khi mà thư điện tử (e-mail) được sử dụng rộng rãi trên thế giới thì virus chuyển hướng sang lây nhiễm thông qua thư điện tử thay cho các cách lây nhiễm truyền thống"],[1202,"Khi đã lây nhiễm vào máy nạn nhân, virus có thể tự tìm ra danh sách các địa chỉ thư điện tử sẵn có trong máy và nó tự động gửi đi hàng loạt (mass mail) cho những địa chỉ tìm thấy"],[1203,"Nếu các chủ nhân của các máy nhận được thư bị nhiễm virus mà không bị phát hiện, tiếp tục để lây nhiễm vào máy, virus lại tiếp tục tìm đến các địa chỉ và gửi tiếp theo"],[1204,"Chính vì vậy số lượng phát tán có thể tăng theo cấp số nhân khiến cho trong một thời gian ngắn hàng hàng triệu máy tính bị lây nhiễm, có thể làm tê liệt nhiều cơ quan trên toàn thế giới trong một thời gian rất ngắn"],[1205,"Khi mà các phần mềm quản lý thư điện tử kết hợp với các phần mềm diệt virus có thể khắc phục hành động tự gửi nhân bản hàng loạt để phát tán đến các địa chỉ khác trong danh bạ của máy nạn nhân thì chủ nhân phát tán virus chuyển qua hình thức tự gửi thư phát tán virus bằng nguồn địa chỉ sưu tập được trước đó"],[1206,"Phương thực lây nhiễm qua thư điển tử bao gồm: Lây nhiễm vào các file đính kèm theo thư điện tử (attached mail)"],[1207,"Khi đó ngưòi dùng sẽ không bị nhiễm virus cho tới khi file đính kèm bị nhiễm virus được kích hoạt (do đặc diểm này các virus thường được \"trá hình\" bởi các tiêu đề hấp dẫn như sex, thể thao hay quảng cáo bán phần mềm với giá vô cùng rẻ.) Lây nhiễm do mở một liên kết trong thư điện tử Các liên kết trong thư điện tử có thể dẫn đến một trang web được cài sẵn virus, cách này thường khai thác các lỗ hổng của trình duyệt và hệ điều hành"],[1208,"Một cách khác, liên kết dẫn tới việc thực thi một đoạn mã, và máy tính bị có thể bị lây nhiễm virus"],[1209,"Lây nhiễm ngay khi mở để xem thư điện tử: Cách này vô cùng nguy hiểm bởi chưa cần kích hoạt các file hoặc mở các liên kết, máy tính đã có thể bị lây nhiễm virus"],[1210,"Cách này cũng thường khai thác các lỗi của hệ điều hành"],[1211,"Virus lây nhiễm qua mạng Internet"],[1212,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 141 Theo sự phát triển rộng rãi của Internet trên thế giới mà hiện nay các hình thức lây nhiễm virus qua Internet trở thành các phương thức chính của virus ngày nay"],[1213,"Có các hình thức lây nhiễm virus và phần mềm độc hại thông qua Internet như sau: Lây nhiễm thông qua các file tài liệu, phần mềm: Là cách lây nhiễm cổ điển, nhưng thay thế các hình thức truyền file theo cách cổ điển (đĩa mềm, đĩa USB...) bằng cách tải từ Internet, trao đổi, thông qua các phần mềm.."],[1214,"Lây nhiễm khi đang truy cập các trang web được cài đặt virus (theo cách vô tình hoặc cố ý): Các trang web có thể có chứa các mã hiểm độc gây lây nhiễm virus và phần mềm độc hại vào máy tính của người sử dụng khi truy cập vào các trang web đó"],[1215,"Lây nhiễm virus hoặc chiếm quyền điều khiển máy tính thông qua các lỗi bảo mật hệ điều hành, ứng dụng sẵn có trên hệ điều hành hoặc phần mềm của hãng thứ ba: Điều này có thể khó tin đối với một số người sử dụng, tuy nhiên tin tặc có thể lợi dụng các lỗi bảo mật của hệ điều hành, phần mềm sẵn có trên hệ điều hành (ví dụ Winidow Media Player) hoặc lỗi bảo mật của các phần mềm của hãng thứ ba (ví dụ Acrobat Reader) để lây nhiễm virus hoặc chiếm quyền kiểm soát máy tính nạn nhân khi mở các file liên kết với các phần mềm này"],[1216,"Biến thể Một hình thức trong cơ chế hoạt động của virus là tạo ra các biến thể của chúng"],[1217,"Biến thể của virus là sự thay đổi mã nguồn nhằm các mục đích tránh sự phát hiện của phần mềm diệt virus hoặc làm thay đổi hành động của nó"],[1218,"Một số loại virus có thể tự tạo ra các biến thể khác nhau gây khó khăn cho quá trình phát hiện và tiêu diệt chúng"],[1219,"Một số biến thể khác xuất hiện do sau khi virus bị nhận dạng của các phần mềm diệt virus, chính tác giả hoặc các tin tặc khác (biết được mã của chúng) đã viết lại, nâng cấp hoặc cải tiến chúng để tiếp tục phát tán"],[1220,"Virus có khả năng vô hiệu hoá phần mềm diệt virus"],[1221,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 142 Một số virus có khả năng vô hiệu hoá hoặc can thiệp vào hệ điều hành làm tê liệt (một số) phần mềm diệt virus"],[1222,"Sau hành động này chúng mới tiến hành lây nhiễm và tiếp tục phát tán"],[1223,"Một số khác lây nhiễm chính vào phần mềm diệt virus (tuy khó khăn hơn) hoặc ngăn cản sự cập nhật của các phần mềm diệt virus"],[1224,"Các cách thức này không quá khó nếu như chúng nắm rõ được cơ chế hoạt động của các phần mềm diệt virus và được lây nhiễm hoặc phát tác trước khi hệ thống khởi động các phần mềm này"],[1225,"Chúng cũng có thể sửa đổi file hots của hệ điều hành Windows để người sử dụng không thể truy cập vào các website và phần mềm diệt virus không thể liên lạc với server của mình để cập nhật"],[1226,"16.2.2 Denial of Service (DoS) và Brute Force Attack Một cuộc tấn công từ chối dịch vụ (tấn công DoS) hay tấn công từ chối dịch vụ phân tán (tấn công DDoS) là sự cố gắng làm cho tài nguyên của một máy tính không thể sử dụng được nhằm vào những người dùng của nó"],[1227,"Mặc dù phương tiện để tiến hành, động cơ, mục tiêu của tấn công từ chối dịch vụ là khác nhau, nhưng nói chung nó gồm có sự phối hợp, sự cố gắng ác ý của một người hay nhiều người để chống lại Internet site hoặc service (dịch vụ Web) vận hành hiệu quả hoặc trong tất cả, tạm thời hay một cách không xác định"],[1228,"Thủ phạm tấn công từ chối dịch vụ nhằm vào các mục tiêu site hay server tiêu biểu như ngân hàng, cổng thanh toán thẻ tín dụng và thậm chí DNS root servers"],[1229,"Một phương thức tấn công phổ biến kéo theo sự bão hoà máy mục tiêu với các yêu cầu liên lạc bên ngoài, đến mức nó không thể đâp ứng giao thông hợp pháp, hoặc dáp ứng quá chậm"],[1230,"Trong điều kiện chung, các cuộc tấn công DoS được bổ sung bởi ép máy mục tiêu khởi động lại hoặc tiêu thụ hết tài nguyên của nó đến mức nó không cung cấp dịch vụ, hoặc làm tắc nghẽn liên lạc giữa người sử dụng và nạn nhân"],[1231,"Tấn công từ chối dịch vụ đựoc lưu ý sự vi phạm chính sách sử dụng đúng internet của IAB(Internet Architecture Board)"],[1232,"Chúng cũng cấu thành sự vi phạm luật dân sự"],[1233,""],[1234,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 143 Nhận diện US-CERT xác định dấu hiệu của một vụ tấn cống từ chối dịch vụ gồm có : Mạng thực thi chậm khác thường (mở file hay truy cập Website)"],[1235,"Không thể dùng một Website cụ thể"],[1236,"Không có thể truy cập bất kỳ Website nào Tăng lượng thư rác nhận được (như một trận \"boom mail\") Không phải tất các các dịch vụ ngừng chạy,thậm chí đó là kết quả của một hoạt động nguy hại, tất yếu của tấn công DoS"],[1237,""],[1238,"http://www.ebook.edu.vn Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên Vũ Khánh Quý \u2013 Khoa CNTT \u2013 ĐH Sư phạm Kỹ thuật Hưng Yên 144 Tấn công từ chối dịch cũng có thể dẫn tới vấn đề về nhánh mạng của máy đang bị tấn công"],[1239,"Ví dụ băng thông của router giữa Internet và Lan có thể bị tiêu thụ bởi tấn công, làm tổn hại không chỉ máy tính ý định tấn công mà còn là toàn thể mạng"],[1240,"Nếu cuộc tấn công dẫn tới tỉ lệ lớn thích đáng, toàn bộ vùng địa lý của kết nối Internet có thể bị tổn hại nằm ngoài sự hiểu biết của kẻ tấn công cấu hình chính xác, trang thiết bị mong manh"],[1241,"Các phương thức tấn công Tấn công từ chối dịch vụ là một loại hình tấn công nhằm ngăn chặn những người dùng hợp lệ được sử dụng một dịch vụ nào đó"],[1242,"Các cuộc tấn công có thể được thực hiện nhằm vào bất kì một thiết bị mạng nào bao gồm là tấn công vào các thiết bị định tuyến, web, thư điện tử và hệ thống DNS"],[1243,"Tấn công từ chối dịch vụ có thẻ được thực hiện theo một số cách nhất định"],[1244,"Có năm kiểu tấn công cơ bản sau đây: Nhằm tiêu tốn tài nguyên tính toán như băng thông, dung lượng đĩa cứng hoặc thời gian xử lý Phá vỡ các thông tin cấu hình như thông tin định tuyến Phá vỡ các trạng thái thông tin như việc tự động reset lại các phiên TCP"],[1245,"P"]],"downloaded":true,"m":[-1,-1],"n":"giao_trinh_mang_doanh_nghiep_6417.txt","o":"https://tailieu.vn/docview/tailieu/2011/201111/20111113/snow_fire_/giao_trinh_mang_doanh_nghiep_6417.pdf"},{"saved_path":"temp/cau_hinh_vlan_tren_cisco_3937.txt","r":0,"s":[],"t":"\nViệc này được thực hiện khi bạn - quản trị viên - đặt một số cổng switch\ntrong VLAN ngoại trừ VLAN 1 - VLAN mặc định. Tắt cả các công trong\n\nmột mạng VLAN đơn đều thuộc một miền quảng bá duy nhất.\n\nVì các switch có thê giao tiếp với nhau nên một số công trên switch A có thể\nnăm trong VLAN 10 và một số công trên switch B cũng có thê trong VLAN\n10, Các bản tin quảng bá giữa những máy tính này sẽ không bị lộ trên các\ncông thuộc bất kỳ VLAN nào ngoại trừ VLAN 10. Tuy nhiên, tắt cả các máy\ntính này đều có thể giao tiếp với nhau vì chúng thuộc cùng một VLAN. Nếu\nkhông được cầu hình bồ sung, chúng sẽ không thể giao tiếp với các máy tính\nkhác nằm ngoài VLAN này.\n\nVLAN có cần thiết không?\n\nCó một điều quan trọng mà tôi cần nhắn mạnh, đó là bạn không cần cầu hình\nmột mạng LAN ảo trừ khi mạng máy tính của bạn quá lớn và có lưu lượng\ntruy cập quá nhiều. Nhiều khi người ta đùng VLAN chỉ đơn giản vì lý do\nmạng máy tính mà họ đang làm việc đã sử dụng chúng rồi.\n\nThêm một vấn đề quan trọng nữa, đó là trên switch Cisco, VLAN được kích\nhoạt mặc định và tất cả các máy tính đã năm trong một VLAN. VLAN đó\nchính là VLAN 1. Bởi thế mà theo mặc định, bạn có thể sử dụng tất cả các\n\ncông trên switch và tất cả các máy tính đều có khả năng giao tiếp với nhau.\nKhi nào bạn cần một VLAN?\nBạn cần cân nhắc việc sử dụng VLAN trong các trường hợp sau:\n\n+ . Bạn có hơn 200 máy tính trong mạng LAN\n\n+ . Lưu lượng quảng bá (broadcast traffic) trong mạng LAN của bạn quá\n\nlớn\n�Khi một liên kết giữa hai switch hoặc giữa một router và một switch truyền\n\ntải lưu lượng của nhiều VLAN thì công đó gọi là công trunk.\nCổng trunk phải chạy giao thức đường truyền đặc biệt. Giao thức được sử\ndụng có thể là giao thức độc quyền ISL của Cisco hoặc IEEE chuẩn 802.1q.\nLàm thế nào đề tạo VLAN?\nCách cầu hình một mạng VLAN có thể thay đồi tùy từng mẫu switch Cisco\nkhác nhau. Mục tiêu của bạn là:\n\n+. Tạo VLAN mới\n\n+ Đặt mỗi cồng vào VLAN thích hợp\nGiả dụ chúng ta muốn tạo VLAN 5 và 10. Chúng ta muốn đặt cổng 2 và 3\n\nvào VLAN 5 (Marketing) và công 4 và 5 vào VLAN 10 (Nhân sự). Sau đây\n\nlà cách thực hiện trên switch Cisco 2950:\n\n \n\n \n\nBÉ KHÍ: beu Cgữơe Trwsfr St Hrd30 bEp\n\ns12 4X >Q q%@ #2?\n\nPATTI ĐỊ\n03:53:20: %8YS-i-CINFTR_I: Ennfigured fpnm rnnsnle bị cnnenle\nCRT18cnnf\n\nEnter configuration commands, one per line. End with CHIL/Z.\nCAT3(conFLg 8d?\n\n% Mnnerngniztrt rcmmar\n\nEAT1 (rnnf'\n\nCR8T1[config:\nEBI1(conFig vian}texit\n|ERT1|conFL8)\n\nEAT1\n\nEAT1 (cnnf\u2020g-vian)texi\nE8Ti[config)ginterface fast\nERI1(conf1g)8interf'ace\nCAT1(cunFig-1F)4\nEAT1 (mi\nPAT1 (cm\n\nCRI1(config si):\nEAI1(cunFig-i\nEAT1(cưi\nEAT1 (rnnf'\nPAT1 (cnnf'\nCR1 conP'\nCAI1(conFig-xF)#exit\nCT1 (coi ì\n\nEAT1 (Ennf'\nPAT1 (conf' 0\nCRT1+(conFig it) hạ\nCRI1(conFig)HEÑ\n\nBmsir SẼai GEN l8, l3 |2URmm G3inx NHIN CÍ SH số\n\n \n\n \n\n  \n\n     \n\n \n \n  \n   \n \n \n  \n  \n  \n \n \n \n\n \n\n \n\nTại thời điểm này, chỉ có công 2 và 3 là có thể giao tiếp với nhau cũng như\n\nchỉ có công 4 và 5 có thề giao tiếp với nhau. Lý do là vì chúng nằm trên\n�VLAN là gì? Làm thế nào để cầu hình một VLAN trên Switch Cisco?\n\n \n\nVLAN 20\n\nVLAN 1ũ Acrounling\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nVUAN3I\n\nSetuy - Secuiy  Seufy\n\n \n\n \n\nĐã bao giờ bạn tự đặt cho mình những câu hỏi như: mạng LAN do (hay\nVLAN) là gì? Khi nào và tại sao bạn cần có một VLAN? Bài viết sau đây sẽ\nchia sẻ với các bạn những kiến thức cơ bản về VLAN, giúp bạn có khái niệm\n\nvề VLAN và sự hữu ích của nó.\n\n \n�LAN là gì?\n\nChắc hắn phân lớn các bạn đều hiểu thế nào là một mạng LAN. Tuy nhiên\nchúng ta vẫn nên nhắc lại một chút, bởi lẽ nếu bạn không năm được mạng\nLAN là gì, bạn sẽ không thể có khái niệm về VLAN.\n\nLAN là một mạng cục bộ (viết tắt của Local Area Network), được định\nnghĩa là tắt cả các máy tính trong cùng một miền quảng bá (broadcast\ndomain). Cần nhớ rằng các router (bộ định tuyến) chặn bản tin quảng bá,\ntrong khi switch (bộ chuyền mạch) chỉ chuyên tiếp chúng.\n\nVLAN là gì?\n\nNhư đã giới thiệu phía trên, VLAN là một mạng LAN ảo. Về mặt kỹ thuật,\nVLAN là một miền quảng bá được tạo bởi các switch. Bình thường thì\nrouter đóng vai trò tạo ra miền quảng bá. Đối với VLAN, switch có thể tạo\n\nra miên quảng bá.\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n' VLAN 20\nVLAN 10 Accounting\nPublishing Đ \u201c4\nccounting\n>x\nPublishing 2\nccounting\nma đồ đồ độ\n\nSecurity Security Security\n\n \n\n \n\n \n\nẢnh mình họa: thebryantadvantage.com\n�+ . Các nhóm làm việc cần gia tăng bảo mật hoặc bị làm chậm vì quá\nnhiều bản tin quảng bá.\n+. Các nhóm làm việc cần nằm trên cùng một miền quảng bá vì họ đang\ndùng chung các ứng dụng. Ví dụ như một công ty sử dụng điện thoại\nVolP. Một số người muốn sử dụng điện thoại có thể thuộc một mạng\nVLAN khác, không cùng với người dùng thường xuyên.\n+. Hoặc chỉ để chuyển đồi một switch đơn thành nhiều switch ảo.\nTại sao không chia subnet?\nMột câu hỏi thường gặp đó là tại sao không chia subnet (mạng con) thay vì\nsử dụng VLAN? Mỗi VLAN nên ở subnet của riêng mình. VLAN có ưu\nđiểm hơn subnet ở chỗ các máy tính tại những vị trí vật lý khác nhau (không\nquay lại cùng một router) có thề nằm trong cùng một mạng. Hạn chế của\nviệc chia subnet với một router đó là tất cả máy tính trên subnet đó phải\nđược kết nói tới cùng một switch và switch đó phải được kết nói tới một\ncông trên router.\nVới VLAN, một máy tính có thể được kết nồi tới switch này trong khi máy\ntính khác có thể kết nói tới switch kia mà tất cả các máy tính vẫn năm trên\nVLAN chung (miền quảng bá).\nLàm thế nào các máy tính trên VLAN khác nhau có thể giao tiếp với\nnhau?\nCác máy tính trên VLAN khác nhau có thể giao tiếp với một router hoặc một\nswitch Layer 3. Do mỗi VLAN là subnet của riêng nó, router hoặc switch\n\nLayer 3 phải được dùng đề định tuyên giữa các subnet.\n\nCổng trunk là gì?\n�cùng VLAN. Đề máy tính ở công 2 có thề giao tiếp với máy tính ở công 4,\nbạn cần phải cầu hình công trunk tới router nhằm giúp nó có thể tháo gỡ\n\nthông tin VLAN, định tuyến gói dữ liệu và bồ sung lại thông tin VLAN.\nVLAN cung cấp những gì?\n\nVLAN giúp tăng hiệu suất mạng LAN cỡ trung bình và lớn vì nó hạn chế\nbản tin quảng bá. Khi số lượng máy tính và lưu lượng truyền tải tăng cao, số\nlượng gói tin quảng bá cũng gia tăng. Bằng cách sử dụng VLAN, bạn sẽ hạn\n\nchế được bản tin quảng bá.\n\nVLAN cũng tăng cường tính bảo mật bởi vì thực chất bạn đặt một nhóm\n\nmáy tính trong một VLAN vào mạng riêng của chúng.\nTổng kết\nDưới đây là tổng kết những ý chính trong bài:\n\n+. VLAN là một miền quảng bá tạo bởi các switch.\n\n+ . Quản trị viên phải tạo VLAN sau đó chỉ định cồng nào vào VLAN\n\nnào một cách thủ công.\n\n+. VLAN giúp tăng hiệu suất cho mạng LAN cỡ vừa và lớn.\n\n+ . Tắt cả các máy tính đều nằm trong VLAN 1 theo mặc định.\n\n+ . Công trunk là cồng đặc biệt sử dụng giao thức ISL hoặc 802.1q, nhờ\nthế nó có thề truyền tải lưu lượng của nhiều VLAN.\n\n+ . Đề các máy tính thuộc các VLAN khác nhau giao tiếp với nhau, bạn\n\ncần đùng một router hoặc switch Layer 3.\n�","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2011/20110117/votinh0nline/cau_hinh_vlan_tren_cisco_3937.txt","sentences":[[1,"Tắt cả các công trong một mạng VLAN đơn đều thuộc một miền quảng bá duy nhất"],[2,"Vì các switch có thê giao tiếp với nhau nên một số công trên switch A có thể năm trong VLAN 10 và một số công trên switch B cũng có thê trong VLAN 10, Các bản tin quảng bá giữa những máy tính này sẽ không bị lộ trên các công thuộc bất kỳ VLAN nào ngoại trừ VLAN 10"],[3,"Tuy nhiên, tắt cả các máy tính này đều có thể giao tiếp với nhau vì chúng thuộc cùng một VLAN"],[4,"Nếu không được cầu hình bồ sung, chúng sẽ không thể giao tiếp với các máy tính khác nằm ngoài VLAN này"],[5,"VLAN có cần thiết không"],[6,"Có một điều quan trọng mà tôi cần nhắn mạnh, đó là bạn không cần cầu hình một mạng LAN ảo trừ khi mạng máy tính của bạn quá lớn và có lưu lượng truy cập quá nhiều"],[7,"Nhiều khi người ta đùng VLAN chỉ đơn giản vì lý do mạng máy tính mà họ đang làm việc đã sử dụng chúng rồi"],[8,"Thêm một vấn đề quan trọng nữa, đó là trên switch Cisco, VLAN được kích hoạt mặc định và tất cả các máy tính đã năm trong một VLAN"],[9,"VLAN đó chính là VLAN 1"],[10,"Bởi thế mà theo mặc định, bạn có thể sử dụng tất cả các công trên switch và tất cả các máy tính đều có khả năng giao tiếp với nhau"],[11,"Khi nào bạn cần một VLAN"],[12,"Bạn cần cân nhắc việc sử dụng VLAN trong các trường hợp sau: +"],[13,"Bạn có hơn 200 máy tính trong mạng LAN +"],[14,"Lưu lượng quảng bá (broadcast traffic) trong mạng LAN của bạn quá lớn �Khi một liên kết giữa hai switch hoặc giữa một router và một switch truyền tải lưu lượng của nhiều VLAN thì công đó gọi là công trunk"],[15,"Cổng trunk phải chạy giao thức đường truyền đặc biệt"],[16,"Giao thức được sử dụng có thể là giao thức độc quyền ISL của Cisco hoặc IEEE chuẩn 802.1q"],[17,"Làm thế nào đề tạo VLAN"],[18,"Cách cầu hình một mạng VLAN có thể thay đồi tùy từng mẫu switch Cisco khác nhau"],[19,"Mục tiêu của bạn là: +"],[20,"Tạo VLAN mới + Đặt mỗi cồng vào VLAN thích hợp Giả dụ chúng ta muốn tạo VLAN 5 và 10"],[21,"Chúng ta muốn đặt cổng 2 và 3 vào VLAN 5 (Marketing) và công 4 và 5 vào VLAN 10 (Nhân sự)"],[22,"Sau đây là cách thực hiện trên switch Cisco 2950: BÉ KHÍ: beu Cgữơe Trwsfr St Hrd30 bEp s12 4X >Q q%@ #2"],[23,"PATTI ĐỊ 03:53:20: %8YS-i-CINFTR_I: Ennfigured fpnm rnnsnle bị cnnenle CRT18cnnf Enter configuration commands, one per line"],[24,"End with CHIL/Z"],[25,"CAT3(conFLg 8d"],[26,"% Mnnerngniztrt rcmmar EAT1 (rnnf' CR8T1[config: EBI1(conFig vian}texit |ERT1|conFL8) EAT1 EAT1 (cnnf\u2020g-vian)texi E8Ti[config)ginterface fast ERI1(conf1g)8interf'ace CAT1(cunFig-1F)4 EAT1 (mi PAT1 (cm CRI1(config si): EAI1(cunFig-i EAT1(cưi EAT1 (rnnf' PAT1 (cnnf' CR1 conP' CAI1(conFig-xF)#exit CT1 (coi ì EAT1 (Ennf' PAT1 (conf' 0 CRT1+(conFig it) hạ CRI1(conFig)HEÑ Bmsir SẼai GEN l8, l3 |2URmm G3inx NHIN CÍ SH số Tại thời điểm này, chỉ có công 2 và 3 là có thể giao tiếp với nhau cũng như chỉ có công 4 và 5 có thề giao tiếp với nhau"],[27,"Lý do là vì chúng nằm trên �VLAN là gì"],[28,"Làm thế nào để cầu hình một VLAN trên Switch Cisco"],[29,"VLAN 20 VLAN 1ũ Acrounling VUAN3I Setuy - Secuiy Seufy Đã bao giờ bạn tự đặt cho mình những câu hỏi như: mạng LAN do (hay VLAN) là gì"],[30,"Khi nào và tại sao bạn cần có một VLAN"],[31,"Bài viết sau đây sẽ chia sẻ với các bạn những kiến thức cơ bản về VLAN, giúp bạn có khái niệm về VLAN và sự hữu ích của nó"],[32,"�LAN là gì"],[33,"Chắc hắn phân lớn các bạn đều hiểu thế nào là một mạng LAN"],[34,"Tuy nhiên chúng ta vẫn nên nhắc lại một chút, bởi lẽ nếu bạn không năm được mạng LAN là gì, bạn sẽ không thể có khái niệm về VLAN"],[35,"LAN là một mạng cục bộ (viết tắt của Local Area Network), được định nghĩa là tắt cả các máy tính trong cùng một miền quảng bá (broadcast domain)"],[36,"Cần nhớ rằng các router (bộ định tuyến) chặn bản tin quảng bá, trong khi switch (bộ chuyền mạch) chỉ chuyên tiếp chúng"],[37,"VLAN là gì"],[38,"Như đã giới thiệu phía trên, VLAN là một mạng LAN ảo"],[39,"Về mặt kỹ thuật, VLAN là một miền quảng bá được tạo bởi các switch"],[40,"Bình thường thì router đóng vai trò tạo ra miền quảng bá"],[41,"Đối với VLAN, switch có thể tạo ra miên quảng bá"],[42,"' VLAN 20 VLAN 10 Accounting Publishing Đ \u201c4 ccounting >x Publishing 2 ccounting ma đồ đồ độ Security Security Security Ảnh mình họa: thebryantadvantage.com �+"],[43,"Các nhóm làm việc cần gia tăng bảo mật hoặc bị làm chậm vì quá nhiều bản tin quảng bá"],[44,"+"],[45,"Các nhóm làm việc cần nằm trên cùng một miền quảng bá vì họ đang dùng chung các ứng dụng"],[46,"Ví dụ như một công ty sử dụng điện thoại VolP"],[47,"Một số người muốn sử dụng điện thoại có thể thuộc một mạng VLAN khác, không cùng với người dùng thường xuyên"],[48,"+"],[49,"Hoặc chỉ để chuyển đồi một switch đơn thành nhiều switch ảo"],[50,"Tại sao không chia subnet"],[51,"Một câu hỏi thường gặp đó là tại sao không chia subnet (mạng con) thay vì sử dụng VLAN"],[52,"Mỗi VLAN nên ở subnet của riêng mình"],[53,"VLAN có ưu điểm hơn subnet ở chỗ các máy tính tại những vị trí vật lý khác nhau (không quay lại cùng một router) có thề nằm trong cùng một mạng"],[54,"Hạn chế của việc chia subnet với một router đó là tất cả máy tính trên subnet đó phải được kết nói tới cùng một switch và switch đó phải được kết nói tới một công trên router"],[55,"Với VLAN, một máy tính có thể được kết nồi tới switch này trong khi máy tính khác có thể kết nói tới switch kia mà tất cả các máy tính vẫn năm trên VLAN chung (miền quảng bá)"],[56,"Làm thế nào các máy tính trên VLAN khác nhau có thể giao tiếp với nhau"],[57,"Các máy tính trên VLAN khác nhau có thể giao tiếp với một router hoặc một switch Layer 3"],[58,"Do mỗi VLAN là subnet của riêng nó, router hoặc switch Layer 3 phải được dùng đề định tuyên giữa các subnet"],[59,"Cổng trunk là gì"],[60,"�cùng VLAN"],[61,"Đề máy tính ở công 2 có thề giao tiếp với máy tính ở công 4, bạn cần phải cầu hình công trunk tới router nhằm giúp nó có thể tháo gỡ thông tin VLAN, định tuyến gói dữ liệu và bồ sung lại thông tin VLAN"],[62,"VLAN cung cấp những gì"],[63,"VLAN giúp tăng hiệu suất mạng LAN cỡ trung bình và lớn vì nó hạn chế bản tin quảng bá"],[64,"Khi số lượng máy tính và lưu lượng truyền tải tăng cao, số lượng gói tin quảng bá cũng gia tăng"],[65,"Bằng cách sử dụng VLAN, bạn sẽ hạn chế được bản tin quảng bá"],[66,"VLAN cũng tăng cường tính bảo mật bởi vì thực chất bạn đặt một nhóm máy tính trong một VLAN vào mạng riêng của chúng"],[67,"Tổng kết Dưới đây là tổng kết những ý chính trong bài: +"],[68,"VLAN là một miền quảng bá tạo bởi các switch"],[69,"+"],[70,"Quản trị viên phải tạo VLAN sau đó chỉ định cồng nào vào VLAN nào một cách thủ công"],[71,"+"],[72,"VLAN giúp tăng hiệu suất cho mạng LAN cỡ vừa và lớn"],[73,"+"],[74,"Tắt cả các máy tính đều nằm trong VLAN 1 theo mặc định"],[75,"+"],[76,"Công trunk là cồng đặc biệt sử dụng giao thức ISL hoặc 802.1q, nhờ thế nó có thề truyền tải lưu lượng của nhiều VLAN"],[77,"+"],[78,"Đề các máy tính thuộc các VLAN khác nhau giao tiếp với nhau, bạn cần đùng một router hoặc switch Layer 3"],[79,"�"]],"downloaded":true,"m":[-1,-1],"n":"cau_hinh_vlan_tren_cisco_3937.txt","o":"https://tailieu.vn/docview/tailieu/2011/20110117/votinh0nline/cau_hinh_vlan_tren_cisco_3937.pdf"},{"saved_path":"temp/Xây dựng thuật toán Ảo hóa mạng trên nền tảng  Software Defined Networking.txt","r":0,"s":[],"t":"\n\n\tTRƯỜNG ĐẠI HỌC BÁCH KHOA HÀ NỘI\nVIỆN ĐIỆN TỬ - VIỄN THÔNG\n\n\nĐỒ ÁN\nTỐT NGHIỆP ĐẠI HỌC\nĐề tài:\nXây dựng thuật toán Ảo hóa mạng \ntrên nền tảng  Software Defined Networking\n\n\n\t\n\tKIM BẢO LONG\n\n\tLớp ĐT10 \u2013 K55\n\n\n\tGiảng viên hướng dẫn:\n\n\tPGS.TS. VŨ VĂN YÊM\n\n\n\t\n\t\n\t\n\n\t\n\t\n\n\t\n\t\n\n\n\n\n\n\n\n\nHà Nội,  5-2015\n\n\t\nTRƯỜNG ĐẠI HỌC BÁCH KHOA HÀ NỘI\nVIỆN ĐIỆN TỬ - VIỄN THÔNG\n\n\nĐỒ ÁN\nTỐT NGHIỆP ĐẠI HỌC\nĐề tài:\nXây dựng thuật toán Ảo hóa mạng \ntrên nền tảng  Software Defined Networking\n\n\n\n\t\n\tKIM BẢO LONG\n\n\tLớp ĐT10 \u2013 K55\n\n\n\tGiảng viên hướng dẫn:\n\n\tPGS.TS. VŨ VĂN YÊM\n\n\n\t\n\n\n\t\n\t\n\n\t\n\t\n\n\t\n\t\n\n\tCán bộ phản biện:\n\t\n\n\n\n\n\nHà Nội,  5-2015\n\n\nĐánh giá quyển đồ án tốt nghiệp\n(Dùng cho giảng viên hướng dẫn)\nGiảng viên đánh giá:......................................................\nHọ và tên Sinh viên:................................................ MSSV:\u2026\u2026\u2026\u2026\u2026\u2026\u2026\nTên đồ án: ................................... ................................... ...................................\n\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026..\nChọn các mức điểm phù hợp cho sinh viên trình bày theo các tiêu chí dưới đây: \nRất kém (1); Kém (2);  Đạt (3);  Giỏi (4);  Xuất sắc (5) \n\tCó sự kết hợp giữa lý thuyết và thực hành (20)\n\n\t1\n\tNêu rõ tính cấp thiết và quan trọng của đề tài, các vấn đề và các giả thuyết (bao gồm mục đích và tính phù hợp) cũng như phạm vi ứng dụng của đồ án\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t2\n\tCập nhật kết quả nghiên cứu gần đây nhất (trong nước/quốc tế)\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t3\n\tNêu rõ và chi tiết phương pháp nghiên cứu/giải quyết vấn đề \n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t4\n\tCó kết quả mô phỏng/thưc nghiệm và trình bày rõ ràng kết quả đạt được\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\tCó khả năng phân tích và đánh giá kết quả  (15)\n\n\t5\n\tKế hoạch làm việc rõ ràng bao gồm mục tiêu và phương pháp thực hiện dựa trên kết quả nghiên cứu lý thuyết một cách có hệ thống\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t6\n\tKết quả được trình bày một cách logic và dễ hiểu, tất cả kết quả đều được phân tích và đánh giá thỏa đáng.\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t7\n\tTrong phần kết luận, tác giả chỉ rõ sự khác biệt (nếu có) giữa kết quả đạt được và mục tiêu ban đầu đề ra đồng thời cung cấp lập luận để đề xuất hướng giải quyết có thể thực hiện trong tương lai.\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\tKỹ năng viết (10)\n\n\t8\n\tĐồ án trình bày đúng mẫu quy định với cấu trúc các chương logic và đẹp mắt (bảng biểu, hình ảnh rõ ràng, có tiêu đề, được đánh số thứ tự và được giải thích hay đề cập đến trong đồ án, có căn lề, dấu cách sau dấu chấm, dấu phẩy v.v), có mở đầu chương và kết luận chương, có liệt kê tài liệu tham khảo và có trích dẫn đúng quy định\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t9\n\tKỹ năng viết xuất sắc (cấu trúc câu chuẩn, văn phong khoa học, lập luận logic và có cơ sở, từ vựng sử dụng phù hợp v.v.)\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\tThành tựu nghiên cứu khoa học (5) (chọn 1 trong 3 trường hợp)\n\n\t10a\n\tCó bài báo khoa học được đăng hoặc chấp nhận đăng/đạt giải SVNC khoa học giải 3 cấp  Viện trở lên/các giải thưởng khoa học (quốc tế/trong nước) từ giải 3 trở lên/ Có đăng ký bằng phát minh sáng chế\n\t5\n\n\t10b\n\tĐược báo cáo tại hội đồng cấp Viện trong hội nghị sinh viên nghiên cứu khoa học nhưng không đạt giải từ giải 3 trở lên/Đạt giải khuyến khích trong các kỳ thi quốc gia và quốc tế khác về chuyên ngành như TI contest.\n\t2\n\n\t10c\n\tKhông có thành  tích về nghiên cứu khoa học\n\t0\n\n\tĐiểm tổng\n\t/50\n\n\tĐiểm tổng quy đổi về thang 10\n\t\n\n\n\n\n3. Nhận xét thêm của Thầy/Cô (giảng viên hướng dẫn nhận xét về thái độ và tinh thần làm việc của sinh viên)\n................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tNgày:      /         /201\n                                                               Người nhận xét\n(Ký và ghi rõ họ tên)\n\n\nĐánh giá quyển đồ án tốt nghiệp\n(Dùng cho cán bộ phản biện)\nGiảng viên đánh giá:......................................................\nHọ và tên Sinh viên:................................................ MSSV:\u2026\u2026\u2026\u2026\u2026\u2026\u2026\nTên đồ án: ................................... ................................... ...................................\n\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026..\nChọn các mức điểm phù hợp cho sinh viên trình bày theo các tiêu chí dưới đây: \nRất kém (1); Kém (2);  Đạt (3);  Giỏi (4);  Xuất sắc (5) \n\tCó sự kết hợp giữa lý thuyết và thực hành (20)\n\n\t1\n\tNêu rõ tính cấp thiết và quan trọng của đề tài, các vấn đề và các giả thuyết (bao gồm mục đích và tính phù hợp) cũng như phạm vi ứng dụng của đồ án\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t2\n\tCập nhật kết quả nghiên cứu gần đây nhất (trong nước/quốc tế)\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t3\n\tNêu rõ và chi tiết phương pháp nghiên cứu/giải quyết vấn đề \n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t4\n\tCó kết quả mô phỏng/thưc nghiệm và trình bày rõ ràng kết quả đạt được\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\tCó khả năng phân tích và đánh giá kết quả  (15)\n\n\t5\n\tKế hoạch làm việc rõ ràng bao gồm mục tiêu và phương pháp thực hiện dựa trên kết quả nghiên cứu lý thuyết một cách có hệ thống\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t6\n\tKết quả được trình bày một cách logic và dễ hiểu, tất cả kết quả đều được phân tích và đánh giá thỏa đáng.\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t7\n\tTrong phần kết luận, tác giả chỉ rõ sự khác biệt (nếu có) giữa kết quả đạt được và mục tiêu ban đầu đề ra đồng thời cung cấp lập luận để đề xuất hướng giải quyết có thể thực hiện trong tương lai.\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\tKỹ năng viết (10)\n\n\t8\n\tĐồ án trình bày đúng mẫu quy định với cấu trúc các chương logic và đẹp mắt (bảng biểu, hình ảnh rõ ràng, có tiêu đề, được đánh số thứ tự và được giải thích hay đề cập đến trong đồ án, có căn lề, dấu cách sau dấu chấm, dấu phẩy v.v), có mở đầu chương và kết luận chương, có liệt kê tài liệu tham khảo và có trích dẫn đúng quy định\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\t9\n\tKỹ năng viết xuất sắc (cấu trúc câu chuẩn, văn phong khoa học, lập luận logic và có cơ sở, từ vựng sử dụng phù hợp v.v.)\n\t1\n\t2\n\t3\n\t4\n\t5\n\n\tThành tựu nghiên cứu khoa học (5) (chọn 1 trong 3 trường hợp)\n\n\t10a\n\tCó bài báo khoa học được đăng hoặc chấp nhận đăng/đạt giải SVNC khoa học giải 3 cấp  Viện trở lên/các giải thưởng khoa học (quốc tế/trong nước) từ giải 3 trở lên/ Có đăng ký bằng phát minh sáng chế\n\t5\n\n\t10b\n\tĐược báo cáo tại hội đồng cấp Viện trong hội nghị sinh viên nghiên cứu khoa học nhưng không đạt giải từ giải 3 trở lên/Đạt giải khuyến khích trong các kỳ thi quốc gia và quốc tế khác về chuyên ngành như TI contest.\n\t2\n\n\t10c\n\tKhông có thành  tích về nghiên cứu khoa học\n\t0\n\n\tĐiểm tổng\n\t/50\n\n\tĐiểm tổng quy đổi về thang 10\n\t\n\n\n\n3. Nhận xét thêm của Thầy/Cô \n................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tNgày:      /         /201\n                                                                         Người nhận xét\n(Ký và ghi rõ họ tên)\n\n\n\nLỜI NÓI ĐẦU\n\nNgày nay công nghệ thông tin đang ngày càng phát triển rất mạnh mẽ. Nhu cầu trao đổi thông tin dẫn đến gia tăng lưu lượng cũng như khối lượng dữ liệu. Để có thể đáp ứng điều này, hệ thống mạng và hệ thống máy chủ cũng không ngừng gia tăng cả về kích thước với việc tăng số lượng và được phân bố rộng khắp trên toàn thế giới. Tuy nhiên, việc gia tăng của hệ thống mạng và hệ thống máy chủ này chưa đáp ứng được với nhu cầu trao đổi dữ liệu. \nSự chuyển tiếp từ IPv4 lên IPv6, bắt đầu hơn mười năm trước đây và vẫn còn có nhiều thiếu sót lớn, trong khi thực tế Ipv6 chỉ là sự nâng cấp giao thức. Software defined networking (SDN) là kỹ thuật mạng mới nổi được hy vọng thay đổi những hạn chế của cơ sở hạ tầng mạng hiện nay. Đồng thời, ảo hóa mạng trên nền tảng SDN được công nhận là một công nghệ hứa hẹn cho mạng Internet trong tương lai. Việc ứng dụng công nghệ này dựa trên các thuật toán ảo hóa mạng có tính tự động có thể nhanh chóng xây dựng các mạng ảo nhanh chóng, trên một cơ sở hạ tầng mạng có sẵn, tối ưu hóa sử dụng tài nguyên của hạ tầng mạng hiện có. Trong Đồ Án của mình, em xin đề xuất một số thuật toán ảo hóa mạng mới, khảo sát và so sánh chúng khi với các mạng ảo vào hạ tầng mạng khác nhau, từ đó có thể đánh giá được các thuật toán về tỉ lệ chấp nhận các mạng ảo vào hạ tầng mạng và tỉ lệ tài nguyên vật lý còn thừa của hạ tầng mạng.\nTrong quá trình thực hiện đề tài do sự hạn chế về nền tảng kiến thức, kinh nghiệm nghiên cứu, cùng với hạn chế về mặt thời gian nên đồ án không thể tránh khỏi những thiếu sót. Em rất mong thầy cô tham gia đóng góp phê bình để đồ án của em được hoàn thiện hơn.\nXin trân trọng cảm ơn trường Đại học Bách khoa Hà Nội, Viện Điện Tử Viễn Thông trong suốt 5 năm qua đã dạy bảo và cung cấp cho em những kiến thức nền tảng rất có ích phục vụ cho quá trình thực hiện đồ án cũng như cuộc sống sau này. \n\nXin chân thành cảm ơn PGS.TS Vũ Văn Yêm, người đã trực tiếp hướng dẫn em thực hiện đồ án này, cùng PGS.TS Nguyễn Hữu Thanh, Ths. Trần Mạnh Nam đã dìu dắt, giúp đỡ và tận tình chỉ bảo em trong suốt thời gian thực hiện đồ án. \nXin cảm ơn tập thể các bạn trong nhóm Network Virtualization, phòng laboratory nghiên cứu Future Network đã cùng mình nghiên cứu, chia sẻ trong suốt thời gian qua. \nCuối cùng, xin gửi lời cảm ơn tới gia đình, bố mẹ, anh em, đã là nền tảng, là người luôn theo sát, chăm sóc động viên cho con trong suốt cuộc đời này. Dù bất cứ khi nào, thành quả của con đạt được không thể thiếu công ơn sinh thành và dạy dỗ của gia đình.\n\n\nTÓM TẮT ĐỒ ÁN\nNgày nay, nhu cầu sử dụng và trao đổi dữ liệu ngày càng tăng cao trên toàn thế giới. Trong khi đó, hệ thống cơ sở hạ tầng, các thiết bị mạng các thiết bị máy chủ cũng gia tăng nhưng vẫn khó khăn trong việc đáp ứng nhu cầu tăng cao đó. Vì vậy, giải pháp ảo hóa ra đời, ảo hóa mạng cho phép nhiều kiến trúc ảo có thể cùng tồn tại trên một hạ tầng mạng vật lý chung. Mà quá trình nhúng các mạng ảo lên trên một hạ tầng vật lý chung sao cho đạt được hiệu suất cao nhất lại là một bài toán NP-hard. Trong khi đó, các thuật toán hiện tại mới chỉ tập trung vào giải quyết các bài toán theo phương pháp phỏng đoán và vẫn còn bị hạn chế về mặt tối ưu tài nguyên sử dụng. Trong đề tài này, tác giả tập trung vào xây dựng các thuật toán ảo hóa mạng mà cụ thể là các thuật toán tối ưu tài nguyên, nâng cao tỉ lệ chấp nhận các yêu cầu đến trong quá trình ảo hóa mạng. Bằng việc phát triền các thuật toán độc lập, rồi sau đó đưa ra một Framework mới giúp cho việc đánh giá các thuật toán trở nên đơn giản, thuận tiện, nâng cao được hiệu quả trong quá trình đánh giá các thuật toán ảo hóa mạng. Trong đề tài này tác giả đi sâu vào phát triển các thuật toán ảo hóa mạng liên quan đến Node Mapping và Link Mapping cho phép ánh xạ tương ứng các nút ảo, link ảo từ các yêu cầu lên trên hạ tầng mạng vật lý. Thêm vào đó,  tác giả đã xây dựng lại các thuật toán đã có trước đó và so sánh thuật toán mới xây dựng với các thuật toán đó. Kết quả cho thấy, thuật toán mới có tỉ lệ chấp nhận các yêu cầu cao hơn, hiệu suất sử dụng tài nguyên lớn hơn các thuật toán đã có, rất thích hợp để ứng dụng vào quá trình ảo hóa mạng trên nền tàng công nghệ Software Defined Networking. \n\n\nABSTRACT\n\nNowadays, the demand for communication and interaction amongst people through network system is increasing significantly in the world. While network infrastructure such as network devives and services are also increasing, the difficulty in exchanging data through network system has not sovled. Therefore, the Network Virtualization has been found, it allows multiple heterogeneous virtual architectures to simultaneously coexist on a shared infrastructure. Embedding multiple virtual networks on a shared substrate is a challenging problem that deals with highest efficient mapping is known as NP-hard problem. Meanwhile, the existing algorithms focus on heuristic algorithms for virtual network embedding problems or restricted by the space to allow efficient solutions. In this project, the author concentrates on research new Virtual Network Embedding Algorithms, which focus on improving an acceptance ratio and resource utilization. By developing independemt algorithms, the author also built a new framework which permits users can evaluate the algorithms. In this topic, the author focuses on researching into the Algorithms for Node Mapping and Link Mapping which give the mapping results for Virtual Nodes on the Substrate Node and Virtual Link onto physical path in the infrastructure. Then, the author built some existing alrorithms to compare them with the proposed algorithm. From the results, the new Algorithms not only have higher acceptance ratio but also get the resource efficiency more than the built-in algorithms. To sum up, the new algorithms are able to use in Network Virtualization technology which based on Software Defined Networking.\n\n\n\n\n\nMỤC LỤC\nLỜI NÓI ĐẦU\t7\nTÓM TẮT ĐỒ ÁN\t9\nABSTRACT\t10\nMỤC LỤC\t11\nDANH SÁCH HÌNH VẼ\t13\nDANH SÁCH CÁC BẢNG BIỂU\t14\nDANH SÁCH CÁC TỪ VIẾT TẮT\t15\nPHẦN MỞ ĐẦU\t16\nCHƯƠNG 1. GIỚI THIỆU CHUNG\t18\n1.1 Đặt vấn đề\t18\n1.2 Mục tiêu đề tài\t19\n1.3 Kế hoạch thực hiện\t19\nCHƯƠNG 2. CƠ SỞ LÝ THUYẾT\t20\n2.1. Tổng quan về Software Defined Networking\t20\n2.2. Tổng quan về công nghệ ảo hóa\t22\n2.2.1 Ảo hóa hệ thống lưu trữ\t22\n2.2.2 Ảo hóa hệ thống máy chủ\t24\n2.2.3 Ảo hóa mạng\t24\n2.3. Tổng quan về ảo hóa mạng sử dụng công nghệ OpenFlow\t28\n2.3.1 OpenFlow Controller\t29\n2.3.2 Giao thức OpenFlow\t30\n2.3.3 Open vSwitch\t34\n2.3.4 Các công cụ ảo hóa\t35\n2.4. Kết luận\t38\nCHƯƠNG 3. NGHIÊN CỨU THUẬT TOÁN ẢO HÓA MẠNG\t39\n3.1. Tổng quan về thuật toán Ảo hóa mạng\t39\n3.2. Phân loại các bài toán Ảo hóa mạng\t41\n3.3. Bài toán Ảo hóa mạng\t42\n3.3.1 Mạng vật lý\t42\n3.3.2 Virtual Network Request\t43\n3.3.3 Tài nguyên của mạng\t44\n3.3.4 Phân bố tài nguyên cho các mạng ảo\t44\n3.3.5 Tải lưu lượng yêu cầu\t46\n3.4. Kết luận\t47\nCHƯƠNG 4. XÂY DỰNG CÁC THUẬT TOÁN ẢO HÓA MẠNG\t48\n4.1. Thuật toán Node Mapping\t48\n4.1.1 Ý tưởng thuật toán\t48\n4.1.2 Mã giả thuật toán\t48\n4.1.3 Mô tả chi tiết thuật toán\t50\n4.2. Thuật toán Link Mapping\t51\n4.2.1 Ý tưởng thuật toán\t51\n4.2.2 Mã giả thuật toán\t51\n4.2.3 Mô tả chi tiết thuật toán\t52\nCHƯƠNG 5. KẾT QUẢ ĐẠT ĐƯỢC VÀ ĐÁNH GIÁ\t53\n5.1. Framework\t53\n5.2. Kết quả thu được\t55\n5.2.1 Phương pháp đánh giá\t55\n5.2.2 Đánh giá kết quả thu được\t58\n5.3. Hướng phát triển của đề tài\t61\nKẾT LUẬN\t62\nTÀI LIỆU THAM KHẢO\t63\n\n\n\nDANH SÁCH HÌNH VẼ\nHình 2.1 Kiến trúc mạng Software Defined Networking\t20\nHình 2.2 Mô hình ảo hóa mạng lưu trữ SVC của IBM\t23\nHình 2.3 Mô hình triển khai VLAN trong mạng cục bộ\t26\nHình 2.4 Công nghệ VPN\t27\nHình 2.5 Kiến trúc OpenFlow\t31\nHình 2.6 OpenFlow Controller và Openflow Switch\t32\nHình 2.7 Open vSwitch\t34\nHình 2.8 Ảo hóa FlowVisor\t36\nHình 2.9 Thể hiện hạ tầng vật lý và kết nối ảo\t38\nHình 3.1 Các VN Request được ánh xạ lên mạng vật lý\t40\nHình 3.2 Mạng vật lý và mạng ảo\t43\nHình 5.1 Tiến trình hoạt động của Framework\t53\nHình 5.2 Kiến trúc Framework\t54\nHình 5.3 Giao diện đồ họa của Framework\t55\nHình 5.4 Tỉ lệ chấp nhận và tải giữa các thuật toán Node Mapping\t58\nHình 5.5 Tỉ lệ chấp nhận và tải giữa các thuật toán Link Mapping\t59\nHình 5.6 Tỉ lệ băng thông còn thừa khi cùng tỉ lệ chấp nhận\t59\nHình 5.7 Tỉ lệ chấp nhận theo số nút\t60\nHình 5.8 Tỉ lệ chấp nhận, băng thông còn thừa với số luồng tách tối đa\t60\n\n\n\nDANH SÁCH CÁC BẢNG BIỂU\nBảng  4.1 Mã giả thuật toán NeiNR\t48\nBảng  4.2 Mã giả thuật toán NeiHEE\t49\nBảng  4.3 Mã giả thuật toán B-Mapping\t51\n\n\nDANH SÁCH CÁC TỪ VIẾT TẮT\n\n\tViết tắt\n\tTiếng Anh\n\tTiếng Việt\n\n\tADVisor\n\tAdvanced FlowVisor\n\t\n\n\tVeRTIGo\n\tViRtual TopologIes Generalization in OpenFlow networks\n\t\n\n\t\n\tSwitch\n\tChuyển mạch\n\n\t\n\tRouter\n\tBộ định tuyến\n\n\tVMs\n\tVirtual Machines\n\tMáy ảo\n\n\t\n\tSwitch\n\tChuyển mạch\n\n\t\n\tRouter \n\tBộ định tuyến\n\n\tNAT\n\tNetwork Address Translation\n\tChuyển đổi địa chỉ mạng\n\n\tIP\n\tInternet Protocol\n\tGiao thức Internet\n\n\tSSL\n\tSecure Socket Layer\n\t\n\n\tVLAN\n\tVirtual Local Arena Network\n\tMạng cục bộ ảo\n\n\tVPN\n\tVirtual personal network\n\tMạng riêng ảo\n\n\tMPLS\n\tMultiprotocol Label Switching \n\t\n\n\tWDM\n\tWavelength-division multiplexing\n\t\n\n\tOS\n\tOperating System\n\tHệ điều hành\n\n\tMAC\n\tMedia Access Control\n\tGiao thức điều khiển truy nhập\n\n\tRAID\n\tRedundant Arrays of Inexpensive Disks\n\tGhép ổ đĩa\n\n\tIT\n\tInformation Technology\n\tCông nghệ thông tin\n\n\tSDN\n\tSoftware Defined Networking\n\tMạng định nghĩa bằng phần mềm\n\n\tVNE\n\tVirtual Network Embedding\n\tNhúng mạng ảo\n\n\t\n\tNode Mapping\n\tÁnh xạ nút\n\n\t\n\tLink Mapping\n\tÁnh xạ link\n\n\tVN Requet\n\tVirtual Network Request\n\tMạng ảo yêu cầu\n\n\t\n\tDemand\n\tYêu cầu\n\n\nPHẦN MỞ ĐẦU\nĐặt vấn đề\nNgày nay, nhu cầu trao đổi dữ liệu qua mạng máy tính gia tăng một cách nhanh chóng. Các hệ thống mạng và các thiết bị mạng như switch, router cũng gia tăng cả về số lượng lẫn chất lượng để đáp ứng nhu cầu đó. Tuy nhiên, thực trạng hiện tại của cả ngành công nghệ thông tin phải đối mặt đó là hệ thống mạng không đủ để đáp ứng nhu cầu của người sử dụng. Vì vậy, các giải pháp ra đời để có thể giải quyết được những vấn đề cấp bách mà ngành công nghệ thông tin đang gặp phải. Công nghệ ảo hóa ra đời với bước đi tiên phong trong việc nâng cao hiệu quả sử dụng phần cứng, các thiết bị mạng. Trong đề tài này chỉ để cập đến các thuật toán ảo hóa mạng sử dụng cho công nghệ ảo hóa mạng mà cụ thể là công nghệ ảo hóa sử dụng công nghệ OpenFlow. Các thuật toán này sẽ đưa ra các giải pháp giúp quá trình ảo hóa mạng có thể nâng cao được hiệu quả sử dụng thiết bị mạng. Mục tiêu của đề tài này là xây dựng các thuật toán ảo hóa mạng cho các nút ảo và link ảo, sau đó các kết quả này sẽ được sử dụng để ảo hóa mạng một cách tự động, tạo ra các mạng ảo tượng ứng với yêu cầu của các khách hàng. \nHướng triển khai đề tài\nĐầu tiên, tác giả sẽ tìm hiểu về hệ thống ảo hóa hiện tại, các công nghệ ảo hóa mạng và đặc biệt là công nghệ ảo hóa sử dụng công nghệ OpenFlow. Sau đó, tác giả sẽ đi sâu vào việc tìm hiểu các thuật toán được ứng dụng trong công nghệ ảo hóa mạng. Từ đó, đưa ra những nhược điểm mà các thuật toán ảo hóa mạng hiện tại còn vướng phải so với nhu cầu từ thực tế. Cuối cùng, tác giả sẽ xây dựng các thuật toán mới nhằm giải quyết các vấn đề còn tồn tại để có thể nâng cao được hiệu suất xử lý cho công nghệ ảo hóa mạng.\nCấu trúc đồ án\n- Chương 1 tập trung vào việc giới thiệu đề tài, nêu lên các vấn đề khó khăn cần phải giải quyết đối với nhu cầu trao đổi thông tin trong mạng máy tính hiện nay và các khó khăn khác. Từ đó, nêu lên các vấn đề cần giải quyết đặc biệt là việc tối ưu tài nguyên sử dụng trong quá trình ảo hóa sử dụng công nghệ OpenFlow. \n- Chương 2 tập trung vào giới thiệu cơ sở lý thuyết về công nghệ Software Defined Networking, các công nghệ ảo hóa hiện tại, công nghệ ảo hóa mạng sử dụng OpenFlow. \n- Chương 3 đề cập đến việc nghiên cứu đánh giá các thuật toán hiện tại đang được sử dụng trong công nghệ ảo hóa mạng. Sau đó dựa vào yêu cầu từ thực tế, tác giả sẽ tiến hành mô hình hóa bài toán ảo hóa mạng để sử dụng cho việc giải quyết bài toán ở chương sau.\n- Chương 4 Tác giả sẽ đưa ra các ý tưởng nhằm giải quyết các vấn đề mà bài toán toán ảo hóa mạng đã đặt ra. Tác giả sẽ lần lượt đưa ra ý tưởng, mã giả thuật toán rồi sau đó sẽ mô tả chi tiết đối với hai bài toán Node Mapping và Link Mapping.\n- Chương 5 sẽ trình bày về Framework mà tác giả xây dựng để sử dụng trong quá trình đánh giá, mô phỏng các thuật toán ảo hóa mạng. Tác giả sẽ trình bày về phương pháp mà tác giả sử dụng để đánh giá hiệu năng các thuật toán. Cuối cùng, tác giả sẽ đưa ra các kết quả thông kê từ các thuật toán và nhận xét, kết luận từ các kết quả đó.\n\n\nCHƯƠNG 1. GIỚI THIỆU CHUNG\nChương 1 tập trung vào việc giới thiệu đề tài, nêu lên các vấn đề khó khăn, hạn chế cầu phải giái quyết trong việc tối ưu tài nguyên sử dụng quá trình ảo hóa mạng hiện nay. Từ đó, nêu lên các bài toán cần giải quyết đặc biệt là các thuật toán ảo hóa mạng trên nền tảng công nghệ Software Defined Networking.\n1.1 Đặt vấn đề\nNgày nay, nhu cầu trao đổi thông tin công nghệ ngày càng cao dân đến sự gia tăng nhanh chóng của nhu cầu sử dụng mạng. Sự gia tăng của các thiết bị mạng như router, switch không đủ để đáp ứng các nhu cầu đó. Thêm vào đó, các nhà khoa học khó khăn trong việc tìm một môi trường thực tế để triển khai thử nghiệm các giao thức mới. Vào thời điểm này, nhất thiết phải có một giải pháp để giải quyết vấn đề đang nảy sinh này. \nVào thời điểm đó, hàng loạt các giải pháp ảo hóa ra đời như ảo hóa hệ thống lưu trữ, ảo hóa hệ thống mạng, ảo hóa ứng dụng và ảo hóa hệ thống máy chủ. Trong ảo hóa mạng có Vlan-Virtual Local Area Network, VPN - virtual personal network, MPLS,WDM\u2026 nhưng các giải pháp này vẫn chưa giải quyết được triệt để vấn đề tài nguyên. Công nghệ ảo hóa mạng sử dụng công nghệ OpenFlow ra đời như một giải pháp tiên phong, tháo gỡ những vướng mắc của việc gia tăng nhu cầu sử dụng mạng trong khi hệ thống, cơ sở hạ tầng mạng tăng lên không đáp ứng đủ nhu cầu sử dụng đó. Tuy nhiên, hiện tại vẫn chưa có được một giải pháp tối ưu trong việc sử dụng tài nguyên vật lý trong quá trình ảo hóa. Trong khi, các thuật toán ảo hóa mạng đã có vẫn chưa đưa ra được giải pháp tối ưu tốt nhất, gây lãng phí tài nguyên trong quá trình ảo hóa mạng.\nBài toán ảo hóa mạng trên nền tàng Software Defined Networing thương được chia ra thành hai bài toán nhỏ: Node Mapping và Link Mapping; các thuật toán này sẽ tập trung vào giải quyết các vấn đề còn tồn tại liên quan đến ảo hóa nút và ảo hóa link. Các thuật toán Node Mapping và Link Mapping  hiện tại vẫn chưa hoàn toàn tối ưu được tài nguyên sử dụng và hiệu suất xử lý các yêu cầu vẫn chưa cao. Vì vậy, trong đề tài này, tác giả sẽ tập trung phát triển, xây dựng các thuật toán ảo hóa mạng mới nhằm nâng cao hiệu suất xử lý các yêu cầu từ phía khách hàng, mặt khác vẫn đảm bảo tối ưu được tài nguyên sử dụng của hạ tầng vật lý. \n1.2 Mục tiêu đề tài\nMục tiêu của đề tài này là xây dựng các thuật tóa ảo hóa mạng để ứng dụng trong công nghệ ảo hóa mạng cho phép các nhà quản trị mạng có thể tối ưu được tài nguyên cần phải bỏ ra, trong khi vẫn đảm bảo đáp ứng được nhiều nhất có thể các yêu cầu từ phía khách hàng. \nCác thuật toán có các chức năng chính sau:\n- Đầu vào là hạ tầng mạng vật lý và các yêu cầu mạng từ phía các khách hàng.\n- Thuật toán sẽ xử lý, đưa ra các phương pháp ánh xạ từ các phần tử mạng ảo như nút ảo, link ảo lên trên các nút và đường vật lý mà vẫn đảm bảo về mặt tài nguyên yêu cầu cho các mạng ảo.\n- Thuật toán sẽ đưa ra phương án ánh xạ sao có các yêu cầu được xử lý nhiều nhất có thể, mà vẫn đảm bảo được hiệu suất sử dụng tài nguyên cao.\n- Đưa ra phương án đánh giá, so sánh giữa thuật toán mới xây dựng được với các thuật toán đã có sẵn.\n1.3 Kế hoạch thực hiện\n- Tìm hiểu cơ sở lý thuyết về Software Defined Networking.\n- Tìm hiểu cơ sở lý thuyết ảo hóa mạng.\n- Tìm hiểu cơ sở lý thuyết ảo hóa mạng sử dụng công nghệ OpenFlow.\n- Tìm hiểu các bài toán ảo hóa mạng.\n- Tiến hành xây dựng ý tưởng, triển khai thuật toán dưới dạng mã giả.\n- Đưa ra các phương án đánh giá, so sánh hiệu suất sử lý của thuật toán.\n\n\nCHƯƠNG 2. CƠ SỞ LÝ THUYẾT\nChương 2 tập trung vào giới thiệu cơ sở lý thuyết về Software Defined Networking [1], OpenFlow[6][10][11], các công nghệ ảo hóa hiện tại.\nTổng quan về Software Defined Networking\nTrong hệ thống mạng hiện này, sự kết hợp giữa phần điều khiển và phần chuyển mạch trong các Router và Switch chính là giải pháp cho phép thông tin dưới dạng các gói tin truyền khắp thế giới. Mặc dù phổ biến nhưng mạng IP truyền thống rất phức tạp và khó để quản lý. Và để có thể triển khai được một hệ thống mạng như vậy cần cấu hình cho từng thiết bị mạng riêng rẽ, điều này khiến cho hệ thống mạng gặp rất nhiều khó khăn cho việc quản lý và vận hành. Tự động cấu hình và cơ chế phản hồi là không tồn tại ở mạng IP hiện nay. Do vậy vấn đề lớn nhất đặt ra là cần thiết có một cơ chế/chính sách trong môi trường động như thế.\n\nHình 2.1 Kiến trúc mạng Software Defined Networking\nSoftware-Definded Networking (SDN) là một cách tiếp cận mới trong việc thiết kế, xây dựng và quản lý hệ thống mạng. Về cơ bản, SDN chia tách độc lập hai cơ chế hiện đang tồn tại trong cùng một thiết bị mạng: Cơ chế điều khiển (Control Plane), cơ chế chuyển tiếp dữ liệu (Data Plane) để có thể tối ưu hoạt động của hai cơ chế này.\nVề cơ bản, SDN được chia làm ba phần lớn như trong Hình 2.1: Phần ứng dụng (Application Layer), Phần Điều Khiển (Control Layer) và phần thiết bị (Infrastructure Layer). Các phần sẽ liên kết với nhau thông qua giao thức hoặc các API.\nInfrastructure layer: Lớp vật lý của hệ thống mạng, bao gồm thiết bị mạng và các liên kết giữa chúng. Tại đây, dữ liệu sẽ được chuyển tiếp nhanh dựa trên những chỉ thị từ tầng điều khiển thông qua giao thức OpenFlow.\nControl layer: Lớp điều khiển, có vai trò:\n+ Cung cấp API để có thể xây dựng các ứng dụng cho hệ thống mạng\n+ Thu nhận thông tin từ hệ thống mạng vật lý, điều khiển hệ thống mạng Vật lý\nApplication layer: Từ các API được cung cấp từ lớp điều khiển, người sử dụng có thể lập trình hoạt động cho hệ thống mạng để tối ưu hoạt động htoe một yêu cầu nhất định.\nSo sánh với kiến trúc mạng truyền thống:\nTrong hệ thống mạng truyền thống, các thiết bị mạng (Layer 2, layer 3) phải mang trên mình nhiều chức năng để đảm bảo hoạt động. Ví dụ: Các chức năng của Layer Switch hiện nay: VLAN, Spanning tree, Quality of Service, Security... Và đa số các thiết bị mạng và các giao thức này hoạt động độc lập với nhau vì mỗi nhà sản xuất cung cấp các giải pháp mạng khác nhau. Những điều này tạo ra sự phân mảnh hệ thống mạng, giảm hiệu năng hoạt động.\nVới SDN, việc điều khiển được tập trung tại Controller Layer, các thiết bị mạng chỉ có nhiệm vụ chuyển tiếp gói tin do đó sự khác biệt giữa những nhà sản xuất không ảnh hưởng tới toàn hệ thống mạng. Điều này cũng giống như sự phát triển của máy tính hiện nay, mỗi máy tính được cung cấp và sản xuất bởi những nhà sản xuất khác nhau (Dell, HP, IBM, Apple, Google..), chạy các hệ điều hành khác nhau (Windows, MacOS, Linux, Unix,...) nhưng đều có khả năng truy cập và sử dụng internet dựa trên giao thức mạng TCP/IP. Về phía người sử dụng, người dùng không phải có mặt trực tiếp tại các thiết bị mạng để cấu hình cho các thiết bị mạng, họ chỉ cần thông qua các API đã được cung cấp cùng với một chút kiến thức về TCP/IP để có thể xây dựng ứng dụng cho toàn hệ thống mạng.\nTổng quan về công nghệ ảo hóa\nẢo hóa là các hành động của việc tạo ra một phiên bản ảo ( chứ không phải là thực tế) của một cái gì đó , bao gồm nhưng không giới hạn trong một nền tảng ảo phần cứng, hệ điều hành (OS), thiết bị lưu trữ , hoặc tài nguyên mạng. Trong năm 2005, phần mềm ảo hóa đã phát triển nhanh hơn so với các chuyên gia tưởng tượng. Có bốn lĩnh vực CNTT mà ảo hóa đang làm là: ảo hóa hệ thống lưu trữ, ảo hóa hệ thống máy chủ, ảo hóa hệ thống mạng, ảo hóa ứng dụng.\n2.2.1 Ảo hóa hệ thống lưu trữ\nẢo hóa hệ thống lưu trữ về cơ bản là sự mô phỏng, giả lập việc lưu trữ từ các thiết bị lưu trữ vật lý. Các thiết bị này có thể là băng từ, ổ cứng hay kết hợp cả 2 loại. Việc làm này mang lại các ích lợi như việc tăng tốc khả năng truy xuất dữ liệu, do việc phân chia các tác vụ đọc, viết trong mạng lưu trữ. Ngoài ra, việc mô phỏng các thiết bị lưu trữ vật lý cho phép tiết kiệm thời gian hơn thay vì phải định vị xem máy chủ nào hoạt động trên ổ cứng nào để truy xuất. Lưu trữ ảo hóa có thể chỉ định lưu trữ bất cứ lúc nào, và cũng cho phép không gây gián đoạn di chuyển dữ liệu (tức là quá trình sao chép đĩa ảo từ một vị trí khác là ẩn so với máy chủ sử dụng đĩa ảo đó).\nẢo hóa lưu trữ là giải pháp mà các hãng công nghệ quan tâm và phát triển thành sản phẩm, ví dụ như SFS (Storage Area Networks File System), SVC (Storage Area Network Volume Controller) của hãng IBM. Hình 2.2 khái quát giải pháp SVC của IBM. Mạng lưu trữ gồm các thiết bị, tủ đĩa khác nhau được SVC ảo hóa thành một nguồn lưu trữ hợp nhất. Các động thái sao chép hay dịch chuyển dữ liệu bên trong nguồn lưu trữ hợp nhất đó được các ứng dụng tiến hành thuận tiện. Các ứng dụng tại các máy chủ hoàn toàn không \u201cnhận thấy\u201d được nguồn lưu trữ hợp nhất thật ra được tạo nên bởi các thiết bị vật lý độc lập.\n\nHình 2.2 Mô hình ảo hóa mạng lưu trữ SVC của IBM\nẢo hóa hệ thống lưu trữ có ba dạng mô hình dưới đây:\nHost-based: Trong mô hình này, ngăn cách giữa lớp ảo hóa và ổ đĩa vật lý là driver điều khiển của các ổ đĩa. Phần mềm ảo hóa sẽ truy xuất tài nguyên (các ổ cứng vật lý) thông qua sự điều khiển và truy xuất của lớp Driver này.\nStorage-device based: Trong dạng này, phần mềm ảo hóa giao tiếp trực tiếp với ổ cứng. Ta có thể xem như đây là 1 dạng firmware đặc biệt, được cài trực tiếp vào ổ cứng. Dạng này cho phép truy xuất nhanh nhất tới ổ cứng, nhưng cách thiết lập thường khó khăn và phức tạp hơn các mô hình khác. Dịch vụ ảo hóa được cung cấp cho các Server thông qua một thiết bị điều khiển gọi là Primary Storage Controller.\nNetwork-based:  Trong mô hình này, việc ảo hóa sẽ được thực thi trên một thiết bị mạng, ở đây có thể là một thiết bị switch hay một máy chủ. Các switch hay máy chủ này kết nối với các trung tâm lưu trữ (SAN). Từ các switch hay server này, các ứng dụng kết nối vào được giao tiếp với trung tâm dữ liệu bằng các \u201cổ cứng\u201d mô phỏng do switch hay máy chủ tạo ra dựa trên trung tâm dữ liệu thật. Đây cũng là mô hình hay gặp nhất trên thực tế.\n2.2.2 Ảo hóa hệ thống máy chủ\nẢo hóa máy chủ đề cập đến các phân vùng của các nguồn tài nguyên của một máy chủ vật lý vào nhiều môi trường thực hiện, mỗi trong số đó có thể lưu trữ một máy chủ khác nhau. Đây là loại ảo hóa mà còn được gọi là hợp nhất máy chủ, là một thực tế phổ biến trong trung tâm dữ liệu doanh nghiệp để cải thiện sử dụng nguồn lực và tập trung bảo trì. Máy chủ ảo hóa tách riêng phần mềm chạy trên một máy chủ từ phần cứng máy chủ vật lý.\nMáy chủ ảo hóa được khuyến khích cho các ứng dụng nhỏ quy mô vừa, đem lại nhiều lợi ích như tăng tính di động, dễ dàng thiết lập với các máy chủ ảo, giúp việc quản lý, chia sẻ tài nguyên tốt hơn, quản lý luồng làm việc phù hợp với nhu cầu, tăng hiệu suất làm việc của một máy chủ vật lý.\nXét về kiến trúc hệ thống, các mô hình ảo hóa hệ thống máy chủ có thể ở hai dạng sau:\nHost-based:  Kiến trúc này sử dụng một lớp hypervisor chạy trên nền tảng hệ điều hành, sử dụng các dịch vụ được hệ điều hành cung cấp để phân chia tài nguyên tới các máy ảo. Một số hệ thống hypervisor dạng Hosted có thể kể đến như VMware Server, VMware Workstation, Microsoft Virtual Server\u2026\nHypervisor-based:  hay còn gọi là bare-metal hypervisor. Trong kiến trúc này, lớp phần mềm hypervisor chạy trực tiếp trên nền tảng phần cứng của máy chủ, không thông qua bất kì một hệ điều hành hay một nền tảng nào khác. Qua đó, các hypervisor này có khả năng điều khiển, kiểm soát phần cứng của máy chủ. Đồng thời, nó cũng có khả năng quản lý các hệ điều hành chạy trên nó. Một số ví dụ về các hệ thống Bare-metal hypervisor như là Oracle VM, VMware ESX Server, IBM's POWER Hypervisor, Microsoft's Hyper-V, Citrix XenServer\u2026\n2.2.3 Ảo hóa mạng\nẢo hóa hệ thống mạng là một tiến trình hợp nhất tài nguyên, thiết bị mạng cả phần cứng lẫn phần mềm thành một hệ thống mạng ảo. Sau đó, các tài nguyên này sẽ được phân chia thành các channel và gắn với một máy chủ hoặc một thiết bị nào đó.\nCó nhiều phương pháp để thực hiện việc ảo hóa hệ thống mạng.Sau đây tác giả sẽ giới thiệu một vài mô hình ảo hóa hệ thống mạng:\nẢo hóa lớp mạng (Virtualized overlay network): Trong mô hình này, nhiều hệ thống mạng ảo sẽ cùng tồn tại trên một lớp nền tài nguyên dùng chung. Các tài nguyên đó bao gồm các thiết bị mạng như router, switch, các dây truyền dẫn, NIC. Việc thiết lập nhiều hệ thống mạng ảo này sẽ cho phép sự  trao đổi thông suốt giữa các hệ thống mạng khác nhau, sử dụng các giao thức và phương tiện truyền tải khác nhau.\nMô hình ảo hóa của Cisco: đó là phân mô hình ảo hóa ra làm 3 khu vực, với các chức năng chuyên biệt. Mỗi khu vực sẽ có các liên kết với các khu vực khác để cung cấp các giải pháp đến tay người dùng một cách thông suốt:\n+ Khu vực quản lý truy cập (Access Control)\n+ Khu vực đường dẫn (Path Isolation)\n+ Khu vực liên kết với dịch vụ (Services Edge)\n2.2.3.1 Công nghệ ảo hóa VLAN\nVLAN là viết tắt của Virtual Local Area Network hay còn gọi là mạng LAN ảo. Một VLAN được định nghĩa là một nhóm logic các thiết bị mạng và được thiết lập dựa trên các yếu tố như chức năng, bộ phận, ứng dụng\u2026 của công ty và hoạt động của chúng như là một mạng độc lập. Những VLAN này cho phép người quản trị mạng thực hiện truy nhập và thực thi các chính sách bảo mật với các nhóm người dùng đặc biệt.\nPhân loại VLAN\nPort - based VLAN: là cách cấu hình VLAN đơn giản và phổ biến. Mỗi cổng của Switch được gắn với một VLAN xác định.\nMAC address based VLAN: Cách cấu hình này ít được sử dụng do có nhiều bất tiện trong việc quản lý. Mỗi địa chỉ MAC được đánh dấu với một VLAN xác định.\nProtocol \u2013 based VLAN: Cách cấu hình này gần giống như MAC Address based, nhưng sử dụng một địa chỉ logic hay địa chỉ IP thay thế cho địa chỉ MAC.\nLợi ích của VLAN\nTiết kiệm băng thông của hệ thống mạng: VLAN chia mạng LAN thành nhiều đoạn (segment) nhỏ, mỗi đoạn đó là một vùng quảng bá (broadcast domain). Việc chia VLAN giúp tiết kiệm băng thông của hệ thống mạng.\nTăng khả năng bảo mật: Do các thiết bị ở các VLAN khác nhau không thể truy nhập vào nhau (trừ khi ta sử dụng router nối giữa các VLAN).\nDễ dàng thêm hay bớt máy tính vào VLAN: Việc thêm một máy tính vào VLAN rất đơn giản, chỉ cần cấu hình cổng cho máy đó vào VLAN mong muốn.\nGiúp mạng có tính linh động cao: với VLAN, ta chỉ cần cấu hình lại các cổng switch rồi đặt chúng vào các VLAN theo yêu cầu.\nVLAN có thể được cấu hình tĩnh hay động. \n\nHình 2.3 Mô hình triển khai VLAN trong mạng cục bộ\n2.2.3.2 Công nghệ ảo hóa mạng riêng ảo VPN\nVPN (Virtual Private Network) là công nghệ cung cấp một phương thức giao tiếp an toàn giữa các mạng riêng dựa vào kỹ thuật gọi là tunneling để tạo ra một mạng riêng trên nền Internet. Về bản chất, đây là quá trình đặt toàn bộ gói tin vào trong một lớp header chứa thông tin định tuyến có thể truyền qua mạng trung gian. \nVề căn bản, mỗi VPN là một mạng riêng rẽ sử dụng một mạng chung (thường là internet) để kết nối cùng với các hay nhiều người sử dụng từ xa. \nĐể có thể gửi và nhận dữ liệu thông qua mạng công cộng mà vẫn bảo đảm tính an tòan và bảo mật VPN cung cấp các cơ chế mã hóa dữ liệu trên đường truyền tạo ra một đường ống bảo mật giữa nơi nhận và nơi gửi (Tunnel) giống như một kết nối point-to-point trên mạng riêng. Dữ liệu phải được mã hóa hay che giấu đi chỉ cung cấp phần đầu gói dữ liệu (header) là thông tin về đường đi cho phép nó có thể đi đến đích thông qua mạng công cộng một cách nhanh chóng. Các đường kết nối VPN thường được gọi là đường ống VPN.\n\nHình 2.4 Công nghệ VPN\nVPN cung cấp nhiều đặc tính hơn so với những mạng truyền thống và những mạng leased-line: \nChi phí thấp hơn những mạng riêng\nTính linh hoạt cho khả năng kinh tế trên Internet: VPN vốn đã có tính linh hoạt và có thể leo thang những kiến trúc mạng hơn là những mạng cổ điển, bằng cách đó nó có thể hoạt động kinh doanh nhanh chóng và chi phí một cách hiệu quả cho việc kết nối mở rộng.\nĐơn giản hóa những gánh nặng. \nNhững cấu trúc mạng ống, vì thế giảm việc quản lý những gánh nặng: Sử dụng một giao thức Internet backbone loại trừ những PVC tĩnh hợp với kết nối hướng những giao thức như là Frame Rely và ATM. \nTăng tình bảo mật: các dữ liệu quan trọng sẽ được che giấu đối với những người không có quyền truy cập và cho phép truy cập đối với những người dùng có quyền truy cập. \nHỗ trợ các giao thức mạng thông dụng nhất hiện nay như TCP/IP \nBảo mật địa chỉ IP: bởi vì thông tin được gửi đi trên VPN đã được mã hóa do đó các điạ chỉ bên trong mạng riêng được che giấu và chỉ sử dụng các địa chỉ bên ngoài Internet.\n2.2.3.3 Công nghệ ảo hóa OpenFlow\nGiải pháp OpenFlow mang lại khả năng ảo hóa toàn diện cho toàn bộ hệ thống Network, được kỳ vọng là một trong những chuẩn sẽ thay đổi kiến trúc hạ tầng network trong tương lai gần. Các chuẩn Network đã và đang trải qua một giai đoạn phát triển vượt bậc trong suốt hai thập kỷ gần đây. Các chuẩn mới được đưa ra nhằm khắc phục những khuyết điểm của các chuẩn cũ khi có nhu cầu mở rộng, thay đổi chức năng của hạ tầng Network. Đó chính là lý do đã thúc đẩy các nhà nghiên cứu đưa ra OpenFlow.Ảo hóa OpenFlow sẽ được trình bày chi tiết ở các chương sau.\nTổng quan về ảo hóa mạng sử dụng công nghệ OpenFlow\nCũng giống như ảo hóa máy tính, ảo hóa mạng OpenFlow hứa hẹn sẽ tăng hiệu quả sử dụng phần cứng, cho phép người dùng chia sẻ tài nguyên mạng. Một điều quan trọng hơn, ảo hóa mạng OpenFlow cũng cung cấp môi trường thực và tin cậy đề triển khai và đánh giá các giao thức thử nghiệm trên hạ tầng mạng thực.\nẢo hóa mạng OpenFlow có thể được hiểu rõ ràng hơn khi so sánh với ảo hóa máy tính. Thành công của ảo hóa máy tính liên quan trực tiếp đến lớp trừu tượng của lớp phần cứng phía dưới. Ảo hóa máy tính có một lớp phần cứng trừu tượng cho phép phân chia và chia sẻ tài nguyên giữa các hệ điều hành khác nhau. Hệ quả là mỗi hệ điều hành sở hữu một lượng phần cứng riêng biệt. Lớp trừu tượng phần cứng này cho phép đổi mới nhanh chóng cả phần trên và phần dưới của lớp ảo hóa. Phần trên, khả năng xây dựng lớp trừu tượng phần cứng cho phép các hệ điều hành tùy chỉnh tùy biến. Phần dưới, các phần cứng khác nhau có thể được sử dụng miễn là nó có thể tương thích với lớp trừu tượng phần cứng. Điều này cho phép các phần cứng khác nhau có các lệnh khác nhau được tối ưu cho hiệu xuất tốt hơn, ít năng lượng hơn.\nMục tiêu của ảo hóa mạng OpenFlow cũng giống như vậy. Vì vậy, hạ tầng mạng cũng giống phần cứng cũng có lớp trừu tượng phần cứng. Lớp này thực hiện nhiệm vụ đơn giản là phân chia hạ tầng mạng, do đó, nhiều hạ tầng mạng con có thể hoạt động song song với nhau mà không gây nhiễu cho nhau. Bên trên lớp trừu tượng phần cứng, các giao thức mới có thể được thử nghiệm độc lập trọng các slice riêng biệt của cùng một hạ tầng mạng. Bên dưới lớp ảo hóa, phần cứng mới có thể được phát triển cho các môi trường khác nhau, với tốc độ khác nhau, năng lượng khác nhau.\n2.3.1 OpenFlow Controller\nCác bộ điều khiển mạng dùng trong mạng OpenFlow gồm có: bộ điều khiển mạng mặc định, POX[2], NOX, SNAC (giao diện Web để quản lý các OpenFlow switch), Beacon (Java). Tuy nhiên bộ điều khiển mạng chính và đáng chú ý nhất là bộ điều khiển mạng POX. POX là bộ điều khiển mở, phát triển bằng ngôn ngữ Python, cấu trúc đơn giản, gọn nhẹ, dễ dàng tạo và thêm các mô đun mới.\nMục đích chính của POX gồm có: \nCung cấp một platform cho phép người lập trình, phát triển mạng triển khai các ý tưởng mới trong lĩnh vực mạng, sử dụng phần cứng thật. Các nhà phát triển có thể điều khiển tất cả các kết nối trong mạng gồm có: forwarding, routing\u2026 Ngoài ra POX còn điều khiển cả flow-table trong switch.\nCung cấp phần mềm quản lý mạng hữu ích cho các tổng đài (operator), gồm có việc quản lý tập trung cho tất cả các switch trong mạng, điều khiển truy nhập của người dùng.\nPhương thức hoạt động của POX:\nPOX chạy riêng rẽ trên một máy và quản lý việc chuyển tiếp các bản tin giữa nhiều switch khác nhau. Trong quá trình mô phỏng, giả lập POX được chạy trên cùng một máy với đồ hình mạng được tạo ra bởi Mininet.\nPOX cung cấp các giao diện lập trình giúp cho nhà phát triển sử dụng dễ dàng lấy được thông tin về sự kiện trong mạng, can thiệp vào lưu lượng, điều khiển các quyết định chuyển mạch của switch và tạo được lưu lượng.\nKhi có flow mới xuất hiện trọng mạng, các gói đầu tiên sẽ được gửi đến bộ điều khiển mạng POX, tại đây có thể thực hiện được: quyết định xem khi nào sẽ chuyển tiếp các gói đi trong mạng, định tuyến cho gói tin, thu thập các thông tin thống kê, chỉnh sửa được gói trong flow đó hoặc có thể xem thêm được về các gói khác trong cùng flow để thu thập được thêm nhiều thông tin.\nPOX đơn thuần chỉ là một platform, việc điều khiển mạng được thực hiện bởi các phần tử chức năng trong POX gọi là POX component, mỗi component thực thi một chức năng riêng biệt như định tuyến, chuyển mạch, xác thực... Có thể chạy một lúc nhiều POX component với các chức năng điều khiển khác nhau làm cho việc điều khiển và quản lý mạng trở nên hoàn hảo hơn. Các ứng dụng trong bộ điều khiển mạng POX có thể kết hợp với nhận biết các sự kiện trong mạng (network event), can thiệp vào lưu lượng trong mạng, điều khiển định tuyến của các switch và tạo ra lưu lượng.\n2.3.2 Giao thức OpenFlow\n\tOpenFlow là giao thức truyền thông đầu tiên được sử dụng giữa lớp Điều khiển và lớp chuyển tiếp trong kiến trúc mạng SDN. OpenFlow cho phép truy cập trực và thao tác trên phần chuyển mạch của các thiết bị mạng như là Router, Switch trong cả 2 trường hợp thực và ảo. Trên thực tế hiện nay vẫn chưa xuất hiện 1 giao thức chuẩn nào có cùng chức năng như OpenFlow, và sự ra đời của OpenFlow là cần thiết để chuyển công việc điều khiển mạng chuyển mạch lên trên các phần mềm điều khiển tập trung hợp lý.\n\tÝ tưởng rất đơn giản: chúng ta lợi dụng thực tế là hầu hết các Chuyển mạch Ethernet và Router đều có chức các Flow Table, hoạt động ở line-rate (Tốc độ đường dây) để xây dựng các thành phần chức năng như Firewall, NAT, QoS và phân tích thống kê được vận chuyển qua mạng. Trong thực tế, các Flow Table của các nhà sản xuất là khác nhau, vì thế nên OpenFlow đã tiêu chuẩn hóa các tập chức năng chung nhất, những chức năng mà đang được chạy trên hầu hết các Switch và Router.\n\tOpenFlow cung cấp giao thức mở để có thể lập trình với Flow Table ở nhiều Switch và Router khác nhau. Nhà quản trị mạng có thể phân chia lưu lượng mạng một cách phù hợp vào các sản phầm. Nhà nghiên cứu có thể điều khiển các luồng của họ bằng cách lựa chọn Router mà các luồng dữ liệu sẽ đi qua, và xử lý dữ liệu nhận được. Bằng cách tiếp cận này, các nhà nghiên cứu có thể thử nghiệm các giao thức định tuyến mới, các mô hình bảo mật, tổ chức địa chỉ mạng.\n\tMột OpenFlow gồm 3 phần chính:\nFlow Table: mỗi thao tác được gắn liền với mỗi Flow Entry để báo cho Switch biết làm thế nào để xử lý luồng dữ liệu đến.\nSecure Channel: dùng để kết nối Switch với bộ Controller,cho phép các lệnh và các gói dữ liệu có thể được gửi đi giữa Controller và Switch.\nOpenFlow Protocol: Cung cấp cấp 1 phương thức mở và chuẩn để Controller có thể giao thiếp với Switch.\n\nHình 2.5 Kiến trúc OpenFlow\n\tFlow là một định nghĩa rộng, Flow được xác định bởi dung lượng của các phần tử trong Flow Table. Ví dụ như, một Flow có thể là một kết nối TCP, trong đó bao gồm tất cả các gói đến từ một MAC và một IP cụ thể, hoặc là tất cả các gói dữ liệu có chung VLAN ID, hoặc cũng có thể là tất cả các gói đến từ cùng một cổng của Switch. Mỗi Flow Entry có một tác vụ tương ứng đi liền với nó; có 3 tác vụ cơ bản sau (3 tác vụ này các OpenFlow switch đều phải hỗ trợ):\nForward luồng các gói đến cổng đã cho trước. Tác vụ này cho phép gói được định tuyến qua mạng. Ở hầu hết các Switch, tác vụ này được chạy ở line-rate.\nĐóng gói và chuyển tiếp luồng các gói này đến Controller. Gói được phân phối đến Secure Channel, tại đây gói sẽ được đóng gói và gửi đến Controller. Thường được sử dụng cho gói đầu tiên của một Flow mới, vì thế Controller có thể quyết định Flow này có nên được thêm vào Flow Table hay không. Hoặc trong một vài trường hợp, tác vụ này có thể được  sử dụng để chuyển tiếp tất cả các gói đến Controller để xử lý.\nHủy một luồng các gói. Được sử dụng trong Bảo mật, để chống tấn công từ chối dịch vụ, ...\n\tMỗi Entry trong Flow Table có 3 trường:\nHeader gói: để xác định luồng\nTác vụ: xác định gói nên được xử lý như thế nào\nThống kê: Theo dõi số lượng các gói và byte của mỗi luồng\n\tController: Controller có thể thêm và bỏ đi các Flow-Entry trong Flow Table.\n\n\nHình 2.6 OpenFlow Controller và Openflow Switch\nLợi ích khi sử dụng OpenFlow\nCông nghệ SDN sử dụng OpenFlow cho phép giải quyết các ứng dụng băng thông cao,giúp mạng có thể thích ứng với các nhu cầu kinh doanh thay đổi,giúp giảm đáng kể các hoạt động và quản lý phác tạp. Các lợi ích có thể đạt được thông qua kiến thúc SDN sử dụng OpenFlow:\nTập trung hóa điều khiển trong môi trường nhiều nhà cung cấp thiết bị: phần mềm Controller của SDN có thể điều khiển bất kì thiết bị mạng có hỗ trợ OpenFlow từ bất kì nhà cung cấp thiết bị nào. Như ở trong Hình 2.6 thể hiện một mạng SDN gồm các Switch hỗ trợ OpenFlow được điều khiển bằng một Controller thông qua giao thức OpenFlow.\nGiảm sử phức tạp thông qua tự động hóa: Kiến trúc SDN trên cơ sở OpenFlow cung cấp 1 FrameWork quản lý tự động và linh hoạt\nTốc độ đổi mới cao hợn: Áp dụng OpenFlow cho phép các nhà khai thác mạng lập trình lại mạng trong thời gian thực để đảm bảo nhu cầu kinh doanh và yêu cầu từ phía người dùng.\nGia tăng độ tinh cậy và khả năng an ninh của mạng: Kiến trúc SDN dựa trên cơ sở OpenFlow cung cấp điều khiển và tầm nhìn hoàn chỉnh trên mạng,nên có thể đảm bảo điều khiển truy nhập, định hình lưu lượng,QoS,an ninh, và các chính sách nhất quán trên toàn bộ cơ sở hạ tầng mạng không dây và có dây.\nĐiều khiển mạng chi tiết hơn.\nTập trung hóa điều khiển mạng và tạo ra trạng thái thông tin có sẵn cho các ứng dụng mức cao hơn, đáp ứng tốt hơn cho nhu cầu thay đổi của người dùng.\n2.3.3 Open vSwitch\n\nHình 2.7 Open vSwitch\nOpenvSwitch[5] là thiết bị chuyển mạch đa tầng được phát triển trên nền tảng Apache 2.0. OpenvSwitch được thiết kế để phục vụ tự động mạng thông qua lập trình, và hỗ trợ các chuẩn giao thức và giao diện quản lý như NetFlow, sFlow, SPAN, RSPAN, CLI, LACP, 802.1ag. Thêm vào đó, OpenvSwitch cũng được thiết kế để hỗ trợ phân phối trên nhiều server vật lý giống như VMware\u2019s vNetwork switch hay Cisco\u2019s Nexus 1000V.\nOpenvSwitch được thiết kế để tạo ra một nền tảng chuyển mạch ảo chất lượng cao, nó sẽ hỗ trợ các chuẩn giao tiếp quản lý và cho phép phát triển chức năng chuyển mạch dựa trên lập trình.\nOpenvSwitch là thiết bị chuyển mạch ảo trong môi trường VM. OpenvSwitch hỗ trợ nhiều công nghệ ảo hóa nền tảng Linux bao gồm Xen/XenServer, KVM và Vitural Box.\nNền tảng mã nguồn của OpenvSwitch được viết trên nền tảng ngôn ngữ C và có thể dễ dàng kết nối với các môi trường khác. Các tính năng của OpenvSwitch thể hiện qua Hình 2.6 mà cụ thể như sau:\nKết nối liên VM thông qua NetFlow, sFlow(R), IPFIX, SPAN, và GRE-tuneled mirors.\nVACP (IEEE 802.1AX-2008).\nChuẩn 802.1Q VLAN với cổng trunk và cổng access.\nBFD và 802.1ag theo dõi link.\nSTP (IEEE 802.1D-1998).\nĐiều khiển QoS.\nHFSC qdisc.\nĐiều khiển luồng dữ liệu.\nNIC bonding với nguồn MAC load balancing, active backup, L4 hashing.\nHỗ trợ giao thức OpenFlow.\nHỗ trợ IPv6.\nCác giao thức tunneling (GRE, VXLAN, IPsec, GRE và VXLAN over IPsec).\nGiao thức cấu hình từ xa với C và Python.\nKernel và user-space máy chuyển mạch.\nHỗ trợ nhiều bảng chuyển mạch song song với máy lưu trữ luồng dữ liệu.\nLớp chuyển mạch trừu tượng để tích hợp phần mềm mới và nền tảng phần cứng mới.\n2.3.4 Các công cụ ảo hóa\n2.3.4.1 Flowvisor\nFlowVisor[8][9] là một phần mềm tạo ra một lớp ảo hóa trung gian giữa phần mềm và phần cứng, cho phép tạo ra các mạng ảo \u2013 slice ảo trên nền phần cứng. Mỗi một mạng ảo được điều khiển bằng một controller, ứng với một phần mềm, ứng dụng. \n\nHình 2.8 Ảo hóa FlowVisor\nCũng giống như lớp ảo hóa trên máy tính, FlowVisor đúng giữa phần cứng và phần mềm để điều khiển chúng. Và giống như hệ điều hành sử dụng các lệnh để điều khiển phần cứng phía dưới, FlowVisor sử dụng giao thức OpenFlow để điều khiển cơ sở hạ tầng mạng phía dưới. FlowVisor sẽ là trung gian giữa nhiều OpenFlow controller, mỗi controller điều khiển 1 mạng ảo \u2013 1 slice, và mỗi controller sẽ điều khiển và nhìn thấy mạng ảo - slice của chính nó, trong khí đó, các mạng ảo - slice được biệt lập với các mạng ảo - slice khác. \nCác đặc tính của FlowVisor: \nFlowVisor xác định mạng ảo - slice thông qua các flowspace.\nFlowVisor nằm giữa OpenFlow controller và switch. OpenFlow controller chỉ có thể nhìn và điều khiển switch trong slice của controller.\nFlowVisor phân chia băng thông các link theo cách gán tốc độ dữ liệu tối thiểu tương ứng vào các slice (chức năng bị lỗi của FlowVisor).\nFlowVisor phân chia bảng flow ở mỗi switch theo cách đánh dấu mỗi dòng flow-entry thuộc controller nào.\nTóm lại, FlowVisor hoạt động như là OpenFlow proxy làm nhiệm vụ xử lý message từ Openflow controller trước khi đến Open-Flow enabled switch. \nĐể có thể ảo hóa được mạng, các tài nguyên có thể được phân chia theo các flowspace là:\nBăng thông: FlowVisor sẽ gắn mỗi slice tương ứng với một phần băng thông của link. \nĐồ hình: Mỗi slice sẽ có một đồ hình mạng tương ứng bao gồm các switch và router được kết nối với nhau. Đồ hình của slice sẽ là tập con của đồ hình vật lý.\nLưu lượng: Mỗi slice có thể được gắn với một luồng hoặc nhiều luồng khác nhau. Mỗi luồng có thể định nghĩa bởi: địa chỉ Ethernet, địa chỉ IP, dịch vụ ví dụ http, telnet\u2026\nCPU: Mỗi switch và router có tài nguyên tính toán, tài nguyên này cũng có thể được phân chia trong các slice. Đối với slice có tốc độ xử lý CPU không phù hợp, slice đó có thể không xử lý kịp và làm mất gói tin trong quá trình truyền thông tin.\nBảng chuyển tiếp: Mỗi slice sẽ sở hữu một số lượng nhất định các entry trong bảng chuyển tiếp của switch và router. \n2.3.4.2 VeRTIGo và ADVisor\nAdVisor & VeRTIGo[4] là phần mềm được xây dựng dựa trên mạng điều khiển bằng khả trình được thiết kế cho ảo hóa mạng. AdVisor & VeRTIGo được xây dựng dựa trên FlowVisor bao gồm tất cả đặc tính của ảo hóa mạng: đặc biêt, AdVisor & VeRTIGo có thể tạo ra được một node ảo hóa và tạo ra được các link ảo giữa các node không có link vật lý kết nối trực tiếp. \nThực chất của tạo kết nối link ảo là luồng dữ liệu vẫn sẽ đi qua các link vật lý. Khi đó, các tầng ứng dụng bên trên cũng như người dùng chỉ biết được rằng, đây là mạng full-connected tức là tất cả các nốt mạng đều được kết nối trực tiếp với nhau. (Hình 2.9)\n\nHình 2.9 Thể hiện hạ tầng vật lý và kết nối ảo\nTác dụng của link ảo và nốt ảo trong ảo hóa mạng là rất lớn. Như vậy, đối với một đồ hình bất kỳ, nhà cung cấp dịch vụ giờ đây có thể xây dựng những đồ hình bất kỳ cho khách hàng, khách hàng giờ đây chỉ phải tập trung vào phát triển các tầng ứng dung, các dịch vụ trên đồ hình đó. \nKết luận \nTóm lại trong chương này tác giả đã trình bày một cách tổng quan về các công nghệ ảo hóa hiện nay, các công nghệ ảo hóa mạng được sử dụng, và đặc biệt là công nghệ ảo hóa mạng sử dụng công nghệ OpenFlow. Cuối chương tác giả có trình bày các thành phần cấu thành nên hệ thống ảo hóa mạng sử dụng OpenFlow.\n\n\nCHƯƠNG 3. NGHIÊN CỨU THUẬT TOÁN ẢO HÓA MẠNG\nTrong chương này, đề cập đến việc nghiên cứu thuật toán Ảo hóa mạng được ứng dụng trong công nghệ Software Defined Networking. Sau đó, tác giả sẽ nêu ra một số vấn đề còn tồn tại và đưa ra giải pháp để giải quyết các vấn đề đó.\n3.1. Tổng quan về thuật toán Ảo hóa mạng\nTrong công nghệ ảo hóa trên nền tảng SDN, để có thể tối đa được hiệu suất sử dụng tài nguyên vật lý, tối ưu về mặt năng lượng tiêu thụ yêu cầu cần phải giải quyết bài toán Ảo hóa mạng (Virtual Network Embedding[12][13] - VNE) để đưa ra phương án ảo hóa mạng trên cơ sở tài nguyên hiện có của hạ tầng mạng vật lý. Tuy nhiên khi giải quyết các bài toán liên quan đến vẫn còn vấp phải rất nhiều khó khăn, bởi các lý do sau:\nRàng buộc giữa nút và link[14]:Mỗi mạng ảo đều có yêu cầu sử dụng tài nguyên của mạng vật lý như tài nguyên của nút ảo bao gồm CPU, kích thước bộ nhớ, dung lượng bộ nhớ lưu trữ; tài nguyên về mặt băng thông của link ảo liên kết giữa các nút ảo cần phải được đáp ứng. Ví dụ, để thử nghiệm các công nghệ mạng mới, các nhà nghiên cứu yêu cầu mạng thử nghiệm cần phải đảm bảo mỗi nút mạng cần có CPU có tần số  1GHz và 10 Mbps băng thông cho mỗi link. Ngoài ra, các mạng ảo còn có thể có thêm các yêu cầu như vị trí của nút ảo trên hạ tầng mạng hay trễ truyền dẫn tối đa trên link. Ví dụ như một công ty cung cấp dịch vụ về game yêu cầu các nút mạng cần phải được đặt ở các thành phố lớn, các link liên kết giữa chúng phải có trễ truyền dẫn nhỏ hơn 50 ms thì mới đảm bảo được chất lượng dịch vụ. Chính do những điều kiện ràng buộc về nút và link như trên đã khiến cho Ảo hóa mạng trở thành một bài toán khó giải quyết, cần phải cân nhắc kĩ trước khi đưa ra quyết định ánh xạ một mạng ảo lên trên hạ tầng vật lý.\nKiểm soát việc chấp nhận mạng ảo mới: Trong trường hợp tài nguyên của mạng vật lý đã sử dụng hết, việc chấp nhận thêm các mạng ảo mới sẽ khiến cho tài nguyên của các mạng ảo đã có bị xâm phạm từ đó ảnh hưởng đến chất lượng dịch vụ của các mạng ảo đó, do đó các mạng ảo mới đến sẽ bị từ chối hoặc được đưa vào một hàng đợi để đảm bảo tài nguyên phục vụ cho các mạng ảo đã có hoặc chỉ chấp nhận thêm các yêu cầu mới trong trường hợp tài nguyên dự trữ của mạng được đưa ra sử dụng hoặc khi có mạng ảo nào đó ra khỏi mạng vật lý và giải phòng tài nguyên vật lý.\nCác yêu cầu Online: Các nhà quản lý không thể dự đoán được các Virtual Network Request (VN Request) sẽ đến như thế nào. Các VN Request có thể đến ngẫu nhiên và được ánh xạ vào mạng vật lý tại các thời điểm khác nhau và tồn tại trong các khoảng thời gian khác nhau. Ví dụ như các nhà cung cấp dịch vụ có thể triển khai các dịch vụ mới bất cứ lúc nào, duy trì dịch vụ trong một khoảng thời gian bất kì hoặc bất cứ lúc nào cũng có thể tạm dừng dịch vụ trong nếu không thu được lợi nhuận. Thực tế cho thấy, các thuật toán Ảo hóa mạng phải giải quyết các VN Request ngay khi chúng đến chứ không tích trữ các VN Request lại rồi mới giải quyết một lúc nhiều yêu cầu. Các bài toán liên quan đến yêu cầu online tương đối khó giải quyết bởi các thuật toán Ảo hóa mạng không thể biết trước được khi nào các VNR sẽ đến và các VN Request có tính chất như nào, do đó không thể đưa ra một giải pháp nào tối ưu được trong mọi trường hợp.\n\nHình 3.1 Các VN Request được ánh xạ lên mạng vật lý\nSự đa dạng của các VN Request:  Các mạng ảo có thể có đồ hình mạng khác nhau. Các nhà nghiên cứu có thể chạy các thử nghiệm với các đồ hình mạng khác  nhau trên cùng một hạ tầng vật lý như ở Hình 3.1 để kiểm chứng rằng các giao thức của họ có thể chạy trên nhiều đồ hình mạng. Hoặc các nhà cung cấp có thể tùy biến thay đổi đồ hình mạng để phù hợp với các ứng dụng dịch vụ khác nhau như đồ hình hub-and-spoke phù hợp với việc truy cập vào các Server trung tâm hay đồ hình dạng cây sẽ phù hợp với việc phân phối luồng video đến nhóm các người dùng. Việc phải xử lý các mạng ảo với hình dạng khác nhau, trong khi vẫn phải đảm bảo được hiệu suất xử lý đem đến nhiều khó khăn cho việc tìm ra các giải thuật tối ưu cho quá trình Ảo hóa mạng.\nVới cả bốn thuộc tính trên của bài toán Ảo hóa mạng khiến rất khó tìm ra phương án tối ưu nhất. Tuy nhiên, trên thực tế, các bài toán ảo hóa mạng có thể đơn giản đi bằng cách bỏ qua một vài thuộc tính, điều kiện ràng buộc. Ví dụ như ta có thể bỏ đi thuộc tính online của bài toán Ảo hóa mạng và xử lý các yêu cầu đến Offline, bằng cách này ta có thể nắm được tổng thể của tất cả các yêu cầu và đưa ra giải pháp tối ưu nhất. Một bài toán VNE cần phải giải quyết vấn đề tài nguyên cho cả nút và link của các mạng ảo. Vì thế, một bài toán VNE thường được chia thành hai bài toán nhỏ: bài toán Virtual Node Mapping sẽ giải quyết vấn đề tài nguyên cho các nút ảo và bài toán Virtual Link Mapping là bài toán sẽ đi tìm các đường trên mạng vật lý phù hợp với link ảo.\n3.2. Phân loại các bài toán Ảo hóa mạng\nNhững vấn đề khó khăn gặp phải ở trên, tùy thuộc vào từng điều kiện, cách xử lý các yêu cầu mà chúng ta có thể chia bài toán Ảo hóa mạng thành nhiều dạng khác nhau. Phần dưới đây sẽ trình bày về các loại thuật toán Ảo hóa mạng:\nNode Mapping và Link Mapping: Ngoài ra, một bài toán Ảo hóa mạng cần phải giải quyết vấn đề tài nguyên cho cả nút ảo và link ảo của các VN Request. Node Mapping là bài toán được sử dụng để tìm ra cách ánh xạ các nút ảo lên trên các nút vật lý, trong khi đó Link Mapping là bài toán được sử dụng để tìm phép ánh xạ từ các link ảo lên đường vật lý kết nối hai nút vật lý được hai nút ảo nguồn và đích ánh xạ lên. Các thuật toán ảo hóa mạng hiện tại đều hướng theo hướng tối ưu được hiệu suất sử dụng tài nguyên, tối ưu năng lượng tiêu thụ bằng cách tối ưu tài nguyên kết hợp cả Node Mapping và Link Mapping. Thường thì nút mapping sẽ được thực hiện trước tiên ánh xạ các nút ảo vào nút vật lý sao cho thỏa mãn được các điều kiện của yêu cầu; sau đó link mapping mới được triển khai để tạo các kết nối link ảo giữa các nút ảo tương ứng. Ngoài ra, trong các bài toán link mapping, chúng ta còn có thể chia thành hai loại chính là: Single-path Mapping và Multi-path Mapping. Cả hai loại bài toán trên đều sử dụng các thuật toán định tuyến mạng để tìm các đường đi có thể có từ nút nguồn đến nút đích theo yêu cầu. Với bài toán Link Mapping loại Single-path, mỗi yêu cầu sẽ chỉ được ánh xạ lên duy nhất một đường vật lý nếu đường vật lý đó có thể đáp ứng đủ lượng băng thông yêu cầu. Khác với bài toán Single-path, các bài toán Multi-path có thể tách một yêu cầu thành các yêu cầu nhỏ rồi ánh xạ lên các đường vật lý nếu cần thiết. Các thuật toán Multi-path tuy phức tạp hơn, nhưng lại có độ linh hoạt cao, có tỉ lệ chấp nhận cũng như khả năng tối ưu hiệu suất sử dụng tài nguyên cao hơn so với thuật toán Single-path. \nBài toán Mapping nối tiếp và Mapping song song: Trong bài toán Mapping nối tiếp, các yêu cầu sẽ được duyệt và ánh xạ lần lượt, từng yêu cầu lên mạng vật lý và chủ yếu sẽ theo tính chất đến trước phục vụ trước. Mặt khác, ở bài toán Mapping song song, các yêu cầu sẽ được xét duyệt với cùng một mức độ ưu tiên như nhau. Dễ dàng nhận ra rằng, các bài toán nối tiếp sẽ khó có thể tối ưu được về mặt tài nguyên, bù lại các bài toán này rất đơn giản để triển khai và phù hợp với việc xử lý các yêu cầu Online. Bài toán Multi-path Mapping với khả năng tối ưu hiệu suất sử dụng tài nguyên cao, tuy nhiên khi có các yêu cầu đến thì phải duyệt lại toàn bộ các yêu cầu trong hệ thống nhằm đưa ra phương pháp ánh xạ với hiệu quả tốt nhất có thể.\nBài toán Động và bài toán Tĩnh: một bài toán ảo hóa mạng có thể là bài toán Tĩnh (trong trường hợp mạng vật lý không đổi) hoặc bài toán Động (trong điều kiện cả các mạng ảo và mạng vật lý đều thay đổi). Trên thực tế, bài toán ảo hóa mạng cũng sẽ giải quyết ngay các yêu cầu ngay khi chúng đến, ta có dạng bài toán Online, chứ không đưa vào hàng đợi rồi sau đó mới giải quyết tất cả, đây là bài toán Offline,\u2026\n3.3. Bài toán Ảo hóa mạng\n3.3.1 Mạng vật lý\nTrong đồ án này, tác giả mô hình hóa mạng vật lý bằng cách sử dụng đồ thị vô hướng, có trọng số GS = (NS, LS). Trong đó NS là tập hợp các Nút vật lý và LS là tập hợp các link liên kết vật lý. Mỗi nút vật lý nS ϵ NS đại điện cho một OpenFlow Switch trong mạng, mỗi nút vật lý sẽ có tương ứng một tài nguyên vật lý tính theo CPU Capacity c(nS). Mỗi link liên kết vật lý lS (xS, yS) ϵ LS kết nối giữa nút nguồn xS và nút đích yS sẽ có tài nguyên băng thông vật lý là b(lS).\nGọi PS là tập hợp tất cả các đường vật lý giữa các cặp nút trong mạng, ta có PS(sS,dS) là tập hợp tất cả các đường vật lý từ nút nguồn sS đến nút đích dS.\nTrong Hình 3.1 bên dưới, đồ hình mạng màu đen thể hiện Mạng vật lý, các ô hình chữ nhật bên cạnh các nút mạng thể hiện cho CPU Capacity của nút mạng đó. Các nhãn trên các link liên kết tương ứng với băng thông hiện có của link đó.\n\nHình 3.2 Mạng vật lý và mạng ảo\n3.3.2 Virtual Network Request\nTương tự như mạng vật lý, tác giả cũng sử dụng đồ thị vô hướng có trọng số GV=(NV,LV) để thể hiện một VN Request. Mỗi VN Request bản chất là mạng ảo, do yêu cầu của khác hàng đặt ra. Một VN Request có NV là tập hợp các nút ảo, LV là tập hợp các link ảo. Mỗi nút ảo nVϵ NV của VN Request yêu cầu tài nguyên vật lý là c(nV), mỗi link ảo sẽ có yêu cầu về mặt băng thông là b(lV). Các nút ảo trong một VN Request được liên kết với nhau bởi các Link ảo.\nHình 3.1 thể hiện hai VN Request trong bài toán VNE. Các nút mạng và link liên kết trong đồ hình của VN Request đều là ảo. Mỗi nút ảo có một khung hình chữ nhật bên cạnh thể hiện yêu cầu về CPU Capacity của nút ảo. Mỗi link ảo cũng có nhãn tương ứng thể hiện yêu cầu về mặt băng thông của link ảo đó. \n3.3.3 Tài nguyên của mạng\nGọi tài nguyên chưa sử dụng của một nút vật lý nS ϵ NS là RN (nS), mà tài nguyên vật lý của Nút ở đây là CPU Capacity. Do đó ta có:\n                (3.1)\nTrong đó  là chỉ tập hợp tất cả các Nút ảo nVϵ NV được ánh xạ vào nút vật lý nSϵ NS\nTương tự như vậy, ta có tài nguyên chưa sử dụng của link vật lý lS ϵ LS là RL (lS), mà cụ thể tài nguyên của link ở đây là băng thông. Ta có\n                (3.2)\nTrong đó  tập hợp tất cả các đường vật lý được các link ảo ánh xạ lên, và các đường vật lý này đều đi qua link vật lý lS. Với mỗi một link ảo được ánh xạ lên các đường đi qua link vật lý như vậy, link vật lý sẽ phải tiêu tốn một lượng băng thông là b(lV) để phục vụ cho link ảo đó.\nNgoài ra, mỗi đường vật lý trong mạng có một đặc trưng là băng thông tối đa mà đường vật lý đó có thể cho một luồng lưu lượng đi qua. Băng thông tối đa mà đường vật lý có thể đáp ứng được chính bằng băng thông nhỏ nhất của các Link vật lý nằm trên đường vật lý đó:\nRP (P) =                 (3.3)\n3.3.4 Phân bố tài nguyên cho các mạng ảo\nKhi có một VN Request đến, chúng ta cần phải xác định xem nên chấp nhận hay từ chối VN Request đó. Nếu VN Request đó được chấp nhận, chúng ta cần phải ánh xạ Request đó vào mạng vật lý sao cho mạng vật lý có thể đáp ứng được tất cả các yêu cầu về mặt tài nguyên của VN Request. Trong trường hợp, mạng vật lý không có đủ tài nguyên để đáp ứng yêu cầu của VN Request thì chúng ta cần phải từ chối, không xử lý VN Request đó để tránh ảnh hưởng tới các VN Request đang được ánh xạ vào hạ tầng mạng.\nNhư đã đề cập ở phần trên, việc ánh xạ các VN Request vào mạng vật lý có thể được chia thành 2 bài toán chính:\nNode Mapping: Ánh xạ các nút ảo vào nút vật lý.\nLink Mapping: Ánh xạ các link ảo lên các đường vật lý.\n3.3.4.1 Node Mapping\nMỗi VN Request do nhiều Demand tạo thành. Mỗi Demand được cấu thành từ 2 nút ảo nguồn, đích và một link ảo liên kết giữa hai nút ảo đó. Các nút ảo trong cùng một Demand phải nằm ở các nút vật lý khác nhau.\nNode Mapping được sử dụng để đưa ra cách ánh xạ một nút ảo trong Demand vào một nút vật lý nào đó sao cho thỏa mãn được yêu cầu về mặt CPU Capacity của Node ảo trong Demand đó. Sau khi giải quyết bài toán Node mapping ta sẽ có tập các ánh xạ giữa tập các Nút ảo NV và tập các Nút vật lý NS.\n                (3.4)\nMỗi một nút ảo chỉ có thể thuộc một nút vật lý, nhưng mỗi nút vật lý lại có thể chứa nhiều nút ảo\nTa gọi MN là tập hợp các ánh xạ từ NV vào NS \nMN= NV→NS | nVϵNV                (3.5)\nĐiều kiện ràng buộc:\n\nĐiều kiện ràng buộc trên chỉ rõ, tài nguyên CPU của nút vật lý luôn phải lớn hơn hoặc bằng tổng yêu cầu về CPU Capacity của tất cả các nút ảo được ánh xạ vào nút vật lý đó.\n3.3.4.2 Link Mapping\nGiải bài toán Link Mapping đồng nghĩa với việc đi tìm lời giải cho việc ánh xạ các Link ảo lên trên hạ tầng mạng vật lý sao cho đảm bảo đáp ứng được yêu cầu về mặt băng thông của link ảo đó. Mỗi Link ảo sẽ được ánh xạ lên một đường vật lý (Single-path) hoặc nhiều đường vật lý (Multi-Path) để có thể đáp ứng được băng thông yêu cầu giữa hai nút ảo tương ứng. Gọi ML là tập hợp các ánh xạ từ các link ảo LV vào các đường vật lý PS, ta có: \nML= LV→PS | Vϵ LV                (3.7)\nML (V(xV,yV)) PS(MN(xV),MN(yV))                (3.8)\nTrong đó MN(nV) là nút vật lý mà nút ảo nV được ánh xạ vào\nĐiều kiện ràng buộc:\nRP (pS) ≥ b(lV(xV,yV))  | lV(xV,yV)→pS                (3.9)\n3.3.5 Tải lưu lượng yêu cầu\n3.3.5.1 Tài nguyên của mạng vật lý\n\tTài nguyên của link: Được tính bằng tổng băng thông vật lý của tất cả các link trong Mạng vật lý.\n\tTài nguyên của nút: Được tính bằng tổng Capacity vật lý của tất cả các nút trong mạng vật lý.\n3.3.5.2 Tải lưu lượng\n\tMỗi VN Request do khách hàng đưa ra đều sẽ có một tải nhất định so với mạng vật lý, tải này phụ thuộc vào yêu cầu về CPU Capacity của nút ảo và băng thông yêu cầu của Link ảo trong VN Request đó. Ở đây tác giả đưa ra cách tính tải của một VN Request VNRi theo công thức:\n\nTrong đó:\nlà tải lưu lượng của VN Request thứ i.\n  là hệ số của nút và link trong công thức, mặc định  =1\nc(xV) , c(yV)  lần lượt là yêu cầu về CPU Capacity của nút ảo nguồn xV và nút ảo đích yV của Demand đó.\nb(lv) là băng thông yêu cầu của link ảo lv giữa 2 nút ảo.\n là tổng tài nguyên của nút vật lý trong mạng.\n là tổng tài nguyên của link vật lý trong mạng.\nMỗi VN Request là một tập hợp gồm các Demand, do đó tải lưu lượng của một VN Request chính bằng tổng tải lưu lượng của các Demand trong VN Request ảo đó.\nVí dụ: một Demand có dạng dưới đây\n<xV>     <c(xV)>     <yV>     <c(yV)>     <b(l(xV, yV))>     <VN Request>\na          500             b             30                   40                      VN1\nGiả sử: Một nút vật lý có Capacity là 100 đơn vị CPU và một link vật lý có Băng thông là 1000 Mbps. Ở trên là một Demand yêu cầu 1 Link ảo [xV  yV] có yêu cầu về mặt băng thông là 500 Mbps, ở 2 đầu link là 2 nút ảo xV,yV với xV yêu cầu một CPU capacity là 30 đơn vị và yV yêu cầu là 40 đơn vị.\n3.4. Kết luận\nNhư vậy, sau khi tìm hiểu tổng quan về bài toán Ảo hóa mạng \u2013 Virtual Network Embedding, tác giả đã mô hình hóa bài toán thể có thể giải quyết bài toán ở chương sau. Chương sau sẽ trình bày các thuật toán Ảo hóa mạng dựa trên mô hình đã đưa ra ở phần này.\n\n\nCHƯƠNG 4. XÂY DỰNG CÁC THUẬT TOÁN ẢO HÓA MẠNG\nTừ mô hình mạng đã được triển khai ở chương trước, chương 4 đề cập đến ý tưởng xây dựng các thuật toán Node Mapping và Link Mapping. Các thuật toán này tập trung vào việc nâng cao tỉ lệ chấp nhận của các VN Request, đồng thời tối ưu hiệu suất sử dụng tài nguyên trong mạng.\n1. Thuật toán Node Mapping\n4.1.1 Ý tưởng thuật toán\nỞ thuật toán Node Mapping, ý tưởng của tác giả là sẽ sắp xếp các nút vật lý dựa trên số lượng hàng xóm của chúng, nút nào có nhiều hàng xóm chứng tỏ sẽ có nhiều link kết nối đến các nút khác trong mạng, điều này sẽ tạo điều kiện thuận lợi cho việc triển khai Link Mapping, tránh được hiện tượng link ảo phải ánh xạ sử dụng nút ẩn, tối ưu được tài nguyên. Do vậy, trong thuật toán Node Mapping, tác giả sẽ xếp hạng các nút theo số lượng hàng xóm mà nút đó có; các nút có xếp hạng cao sẽ được ưu tiên để xử lý trước.\n4.1.2 Mã giả thuật toán\n4.1.2.1 Hàm NeiNR\nBảng  4.1 Mã giả thuật toán NeiNR\n\tAlgorithm 1: Node rank \u2013 NeiNR\n\n\t1. procedure: NeiNR(N)\n2. repeat\n3.     Sắp xếp theo |Nnei(n)| giảm dần, nϵN\n4.     if |Nnei(m)|=|Nnei(n)|   m,nϵ N then\n5.         Sắp xếp theo c(n) giảm dần\n6.         if c(m)=c(n), m,nϵN then\n      Sắp xếp theo  giảm dần\n7.         end if\n8.     end if\n9. until N được sắp xếp giảm dần\n10. end procedure\n\n\n4.1.2.2 Thuật toán Node Mapping NeiHEE\nBảng  4.2 Mã giả thuật toán NeiHEE\n\tAlgorithm 2: NeiHEE VNE node mapping\n\n\t1. Input: NS, NV và VNR\n2. Begin:\n3.     if  NV=Ø or NV=Ø then\n4.         KẾT THÚC\n5.     else\n    //Sắp xếp các VNR theo nút đầu tiên trong NeiNR()  | Ni ϵ VNRi\n6.     VNR←sort(VNR)\n7.     NeiNR(NS)\n8.     Bật nút nS←pop(NS), =+nS, \\nS\n9.     for all VNRi in VNR do\n10.         NeiNR()  | nVϵ, in VNRi\n11.         for all nV in NiV do\n12.             for all nS in NS do\n13.                 if Nnei(nV)∩Nvir(nS)≠Ø then\n14.                     continue \n15.                 else if nS chưa bật and Nnei(nS)∩ =Ø then\n16.                     continue\n17.                 else Bật nS, =+nS, \\nS\n18.                 end if                \n19.                 if c(nV) ≤ RN(nS) then\n20.                     Nvir(nS)+nV\n21.                     RN(nS)=RN(nS)-c(nv)\n22.                     KẾT THÚC\n23.                 end if\n24.             end for\n25.         end for\n26.         NeiNR()\n27.         NS=+\n28.     end for\n29. end if\n30. KẾT THÚC\n31. output: NS,Nvir(NS)\n\n\n\n4.1.3 Mô tả chi tiết thuật toán\n4.1.3.1 Hàm NeiNR\nNhư đã trình bày ở phần ý tưởng thuật toán, đầu tiên tác giả sẽ xây dựng hàm có chức năng xếp hạng nút NeiNR để xếp hạng các nút theo tiêu chí đã đề ra trước đó. Đầu vào của NeiNR là tập các nút chưa được xếp hạng. Gọi Nnei(n) là tập các hàng xóm của nút n,   là tổng băng thông hiện có của tất cả các link kết nối đến nút n. Hàm NeiNR đầu tiên sẽ sắp xếp các nút trong tập N theo số lượng hàng xóm giảm dần; trong trường hợp các nút m,n có cùng số hàng xóm thì nút nào có CPU Capacity cao hơn sẽ được xếp hạng cao hơn; trường hợp hai nút có CPU Capacity bằng nhau thì ta sẽ ưu tiên nút có    lớn hơn được xếp hạng cao hơn.\n4.3.1.2 Thuật toán Node Mapping NeiHEE\nThuật toán NeiHEE là thuật toán ảo hóa mạng tập trung chủ yếu vào việc nâng cao tỉ lệ chấp nhận, giảm tối thiểu các nút ẩn trên hạ tầng vật lý sau khi ánh xạ các nút ảo lên trên các nút vật lý. Đầu vào của thuật toán là NS, NV và VNR, thuật toán sẽ kết thúc ngay lập tức nếu một trong hai tập NS hoặc NV rỗng. Để bắt đầu quá trình ánh xạ nút ảo vào nút vật lý, thuật toán sẽ bật nút vật lý nS đầu tiên trong tập NS lên trước, đây là nút vật lý được xếp hạng cao nhất, đồng thời nút đó sẽ được chuyển từ tập các nút tắt  sang tập các nút đã bật . \nVới mỗi VN Request, thuật toán sẽ xếp hạng tất cả các nút ảo trong VN Request đó sử dụng hàm NeiNR. Với mỗi nút ảo nV, ta cần phải tìm ra một nút vật lý phù hợp nhất để ánh xạ lên. Dòng 13 là điều kiện để đảm bảo hai nút ảo là hàng xóm của nhau không được ánh xạ vào cũng một nút vật lý, trong đó Nvir(nS) là tập hợp các nút ảo được ánh xạ lên nút vật lý nS. Một nút ảo nV chỉ được ánh xạ lên nút vật lý nS khi và chỉ khi c(nV)≤c(nS) (dòng 19). Để tối ưu được tài nguyên, tối thiểu được số nút ẩn trong mạng vật lý thì vấn đề đặt ra là số nút cần bật phải nhỏ nhất có thể. Do đó, thuật toán NeiHEE sẽ duyệt các nút đã bật  trước để tìm nút vật lý cho nút ảo ánh xạ lên; trường hợp duyệt hết các nút trong  mà vẫn chưa tìm ra nút vật lý phù hợp thì thuật toán sẽ bật một nút mới lên. Để đảm bảo tối thiểu được số nút ẩn phải sử dụng, thuật toán sẽ chỉ bật một nút khi nút đó có ít nhất một hàng xóm đã được bật (dòng 15, 17). Cùng với đó, sau khi xử lý xong một VNR, thuật toán sẽ sử dụng hàm NeiNR để xếp hạng lại các nút đã bật, cập nhật lại tài nguyên, trạng thái của các nút vật lý trong mạng. \nThuật toán sẽ kết thúc sau khi duyệt xong hết tất cả các VN Request và đưa ra kết quả là trạng thái của các nút vật lý, tập ánh xạ của các nút ảo lên hạ tầng vật lý (dòng 31).\n1. Thuật toán Link Mapping\n4.2.1 Ý tưởng thuật toán\nỞ phần này, tác giả sẽ trình bày về thuật toán Link Mapping, tác giả tiến hành xây dựng thuật toán B-Mapping nhằm nâng cao tỉ lệ chấp nhận các VNR, tối ưu tài nguyên sử dụng sau khi ánh xạ các link ảo lên trên các đường vật lý. Trong thuật toán này, tác giả sử dụng khái niệm \u201cnút thắt cổ chai\u201d, đây là link có khả năng cạn kiệt tài nguyên nhiều nhất trong quá trình ánh xạ. Khi xác định được link này, thuật toán sẽ tìm cách tránh link đó ra để hạn chế tối thiểu số link bị cạn kiệt tài nguyên băng thông trong mạng.\n4.2.2 Mã giả thuật toán\nBảng  4.3 Mã giả thuật toán B-Mapping\n\tAlgorithm 3: B-Mapping Algorithm\n\n\t1. Input: GS=(NS,ES), GV=(NV,EV)\n2. repeat\n3.      = BFS(GS,GV)\n4.     for all eV in EV do    \n5.         if (eV)= Ø\n6.             reject eV\n7.         else\n            GS←map (GS,) \n8.         end if\n9.     end for\n10.     eb = max [η(ES)] // eb là link \u201cnút thắt cổ chai\u201d\n    //Sắp xếp EV theo băng thông tăng dần\n11.     EV←sort(EV)\n12.     P=(EV) \n13.     if  {eS ϵ p  |   p ϵ P} then\n14.         P=P/p\n15.     end if\n16.     if P=Ø then\n17.         P=(EV)\n18.     end if\n19.     for all p in P do\n20.         eV= getVirtualLink(p)\n21.         if  cV ≤ RP(P) then\n22.             ML=ML+{c(eV), p}\n23.             RE(eS)=RE(eS) \u2013 cV      eS ϵ p\n24.             GV=GV\\eV\n25.         else\n26.             ML=ML+{RP(p),p}\n27.             c(eV) = c(eV) \u2013 RP(p);\n28.             RE(eS)=RE(eS) - RP(p)      eS ϵ p\n29.         end if\n30.     end for\n31. until GV=Ø \n32. output: ML, GS\n\n\n\n4.2.3 Mô tả chi tiết thuật toán\nHầu hết các thuật toán Link Mapping hiện tại đều là thuật toán ánh xạ nối tiếp, có nghĩa là các demand được xử lý từng cái một. Tác giả đưa ra thuật toán B-Mapping có cách xử lý khác với các thuật toán đã có, ánh xạ song song. Trong thuật toán này, tất cả các demand sẽ được duyệt cùng một lúc, sau đó mới quyết định xem demand nào sẽ được xử lý trước, do có sự xét duyệt cẩn thận như vậy nên các thuật toán ánh xạ song song thường có tỉ lệ chấp nhận và hiệu suất sử dụng tài nguyên cao hơn các thuật toán ánh xạ nối tiếp.\n\n\nCHƯƠNG 5. KẾT QUẢ ĐẠT ĐƯỢC VÀ ĐÁNH GIÁ\nChương 5 sẽ trình bày cách thức kiểm thử, đánh giá các thuật toán ảo hóa mạng như đã trình bày ở chương 4. Đồng thời cũng đưa ra số liệu đo được giúp đánh giá, so sánh các thuật toán ảo hóa mạng theo các tiêu chí như tỉ lệ chấp nhận, hiệu suất sử dụng tài nguyên, \u2026\n1. Framework\nỞ phần này, tác giả sẽ trình bày về Framework mới mà tác giả đã xây dựng cho phép đánh giá và so sánh hiệu năng hoạt động của các thuật toán ảo hóa mạng khác nhau.\n\nHình 5.1 Tiến trình hoạt động của Framework\nHình 5.1 mô tả các bước trong tiến trình hoạt động của Framework mà tác giả xây dựng nên. Ở bước đầu tiên, người sử dụng có thể tạo ra mạng vật lý với các tham số tương ứng với tài nguyên của mạng vật lý như băng thông của link, CPU capacity của nút mạng. Bên cạnh đó, Framework này còn cho phép người dùng có thể sinh ra các đồ hình mạng tự động sử dụng thuật toán Waxman bằng cách đưa vào số lượng nút. Phương trình dưới đấy được sử dụng trong thuật toán Waxman nhằm xác định xác suất có link kết nối giữa hai nút u, v:\n         (5.1)\nTrong phương trình trên, giá trị của α, β nằm trong khoảng (0, 1]; d là khoảng cách giữa hai nút vật lý u và v trong hệ thống mạng, L đại diện cho khoảng cách tối đa giữa hai nút trong đồ hình mạng. Khi giá trị của α càng lớn thì khả năng có link kết nối giữa hai nút trong đồ hình mạng càng cao, β càng tăng thì khả năng có link giữa hai nút nằm xa nhau càng tăng. Ở bước thứ hai, các VN Request sẽ được sinh ra ngẫu nhiên theo các tỉ lệ lưu lượng yêu cầu. Tỉ lệ lưu lượng yêu cầu là tỉ số giữa băng thông yêu cầu của link ảo và tổng băng thông của tất cả các link vật lý. Sau bước này, cả hạ tầng mạng vật lý và các VN Request đều sẽ được lưu trữ trong cơ sở dữ liệu của Framework. Sau đó, các thuật toán ảo hóa mạng sẽ có thể sử dụng cùng một dữ liệu về mạng vât lý và các VN Request lưu trong cơ sở dữ liệu để xử lý, kết quả đầu ra sẽ tùy thuộc vào cách xử lý của thuật toán. Cuối cùng, các kết quả thu được từ các thuật toán sẽ được tổng hợp, thống kê lại để người dùng có thể đánh giá được hiệu năng của các thuật toán ảo hóa. Các dữ liệu được thống kê thường sẽ là tỉ lệ chấp nhận VN Request, tài nguyên chưa sử dụng, thời gian xử lý, năng lượng tiêu thụ, \u2026\nHình 5.2 thể hiện kiến trúc Framework mà tác giả đưa ra, kiến trúc này được cấu thành từ các khối cụ thể như sau:\n\nHình 5.2 Kiến trúc Framework \nMô đun mạng: bao gồm hai khối chính là Mạng vật lý và VN Request. Khối mạng vật lý cho phép người dùng tạo ra hạ tầng mạng vật lý bằng cách nhập vào các tham số đầu vào. Mô đun này cũng đưa ra giao diện cho phép người dùng có thể sinh ra đồ hình mạng bằng các Mô đun con hoặc là quản lý, phân bố tài nguyên cho mạng vật tý. Khối VN Request được sử dụng để quản lý các VN Request.\nMô đun kịch bản: Mô đun này nhận các tham số cài đặt kịch bản từ Controller do người dùng nhập vào, rồi sử dụng các tham số đó tự động thiết lập mạng vật lý, VN Request từ các tham số đó.\nMô đun đánh giá: Mô đun này thống kê các số liệu đo được và đưa ra kết quả dưới dạng để người dùng có thể đánh giá hiệu năng của thuật toán.\nMô đun nhúng: Mô đun này có chức năng chính là thực hiện các thuật toán Node Mapping và Link Mapping do người dùng thêm vào.\nBộ điều khiển: là khối điều khiển chính của kiến trúc này. Mô đun này được tích hợp và phát triển thêm giao diện đồ họa cho phép người dùng có thể điều khiển toàn bộ hoạt động của Framework như ở trong Hình 5.3 Người dùng có thể dễ dàng sử dụng các loại kịch bản, các thuật toán khác nhau tùy theo nhu cầu.\n- Cơ sở dữ liệu: Lưu trữ dữ liệu về đồ hình mạng, tài nguyên, các mạng ảo,\u2026\n\nHình 5.3 Giao diện đồ họa của Framework\n1. Kết quả thu được\n5.2.1 Phương pháp đánh giá\nSử dụng Framework đã xây dựng ở trên, tác giả đã tích hợp các thuật toán Node Mapping và Link Mapping mà tác giả đã xây dựng được; cùng với đó tác giả cũng tích hợp thêm các thuật toán có sẵn để có thể so sánh các thuật toán về mặt hiệu năng, tối ưu tài nguyên, từ đó chọn ra thuật toán phù hợp nhất với nhu cầu sử dụng.\n\n\nCác thuật toán tích hợp thêm:\n5.2.1","u":"http://202.191.57.85:8000/InternetData/Data/khoDATN/DTVT full/doc/Xây dựng thuật toán Ảo hóa mạng trên nền tảng  Software Defined Networking.txt","sentences":[[1,"ĐỒ ÁN TỐT NGHIỆP ĐẠI HỌC Đề tài: Xây dựng thuật toán Ảo hóa mạng trên nền tảng Software Defined Networking"],[2,"KIM BẢO LONG Lớp ĐT10 \u2013 K55"],[3,"Giảng viên hướng dẫn: PGS.TS"],[4,"VŨ VĂN YÊM"],[5,""],[6,"Hà Nội, 5-2015 TRƯỜNG ĐẠI HỌC BÁCH KHOA HÀ NỘI VIỆN ĐIỆN TỬ - VIỄN THÔNG"],[7,"ĐỒ ÁN TỐT NGHIỆP ĐẠI HỌC Đề tài: Xây dựng thuật toán Ảo hóa mạng trên nền tảng Software Defined Networking"],[8,"KIM BẢO LONG Lớp ĐT10 \u2013 K55"],[9,"Giảng viên hướng dẫn: PGS.TS"],[10,"VŨ VĂN YÊM"],[11,""],[12,"Cán bộ phản biện:"],[13,"Hà Nội, 5-2015"],[14,"Đánh giá quyển đồ án tốt nghiệp (Dùng cho giảng viên hướng dẫn) Giảng viên đánh giá:....................................................."],[15,"Họ và tên Sinh viên:..............................................."],[16,"MSSV:\u2026\u2026\u2026\u2026\u2026\u2026\u2026 Tên đồ án: .................................."],[17,".................................."],[18,".................................."],[19,"\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026."],[20,"Chọn các mức điểm phù hợp cho sinh viên trình bày theo các tiêu chí dưới đây: Rất kém (1); Kém (2); Đạt (3); Giỏi (4); Xuất sắc (5) Có sự kết hợp giữa lý thuyết và thực hành (20) 1 Nêu rõ tính cấp thiết và quan trọng của đề tài, các vấn đề và các giả thuyết (bao gồm mục đích và tính phù hợp) cũng như phạm vi ứng dụng của đồ án 1 2 3 4 5 2 Cập nhật kết quả nghiên cứu gần đây nhất (trong nước/quốc tế) 1 2 3 4 5 3 Nêu rõ và chi tiết phương pháp nghiên cứu/giải quyết vấn đề 1 2 3 4 5 4 Có kết quả mô phỏng/thưc nghiệm và trình bày rõ ràng kết quả đạt được 1 2 3 4 5 Có khả năng phân tích và đánh giá kết quả (15) 5 Kế hoạch làm việc rõ ràng bao gồm mục tiêu và phương pháp thực hiện dựa trên kết quả nghiên cứu lý thuyết một cách có hệ thống 1 2 3 4 5 6 Kết quả được trình bày một cách logic và dễ hiểu, tất cả kết quả đều được phân tích và đánh giá thỏa đáng"],[21,"1 2 3 4 5 7 Trong phần kết luận, tác giả chỉ rõ sự khác biệt (nếu có) giữa kết quả đạt được và mục tiêu ban đầu đề ra đồng thời cung cấp lập luận để đề xuất hướng giải quyết có thể thực hiện trong tương lai"],[22,"1 2 3 4 5 Kỹ năng viết (10) 8 Đồ án trình bày đúng mẫu quy định với cấu trúc các chương logic và đẹp mắt (bảng biểu, hình ảnh rõ ràng, có tiêu đề, được đánh số thứ tự và được giải thích hay đề cập đến trong đồ án, có căn lề, dấu cách sau dấu chấm, dấu phẩy v.v), có mở đầu chương và kết luận chương, có liệt kê tài liệu tham khảo và có trích dẫn đúng quy định 1 2 3 4 5 9 Kỹ năng viết xuất sắc (cấu trúc câu chuẩn, văn phong khoa học, lập luận logic và có cơ sở, từ vựng sử dụng phù hợp v.v.) 1 2 3 4 5 Thành tựu nghiên cứu khoa học (5) (chọn 1 trong 3 trường hợp) 10a Có bài báo khoa học được đăng hoặc chấp nhận đăng/đạt giải SVNC khoa học giải 3 cấp Viện trở lên/các giải thưởng khoa học (quốc tế/trong nước) từ giải 3 trở lên/ Có đăng ký bằng phát minh sáng chế 5 10b Được báo cáo tại hội đồng cấp Viện trong hội nghị sinh viên nghiên cứu khoa học nhưng không đạt giải từ giải 3 trở lên/Đạt giải khuyến khích trong các kỳ thi quốc gia và quốc tế khác về chuyên ngành như TI contest"],[23,"2 10c Không có thành tích về nghiên cứu khoa học 0 Điểm tổng /50 Điểm tổng quy đổi về thang 10"],[24,"3"],[25,"Nhận xét thêm của Thầy/Cô (giảng viên hướng dẫn nhận xét về thái độ và tinh thần làm việc của sinh viên) ..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................."],[26,"Ngày: / /201 Người nhận xét (Ký và ghi rõ họ tên)"],[27,"Đánh giá quyển đồ án tốt nghiệp (Dùng cho cán bộ phản biện) Giảng viên đánh giá:....................................................."],[28,"Họ và tên Sinh viên:..............................................."],[29,"MSSV:\u2026\u2026\u2026\u2026\u2026\u2026\u2026 Tên đồ án: .................................."],[30,".................................."],[31,".................................."],[32,"\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026."],[33,"Chọn các mức điểm phù hợp cho sinh viên trình bày theo các tiêu chí dưới đây: Rất kém (1); Kém (2); Đạt (3); Giỏi (4); Xuất sắc (5) Có sự kết hợp giữa lý thuyết và thực hành (20) 1 Nêu rõ tính cấp thiết và quan trọng của đề tài, các vấn đề và các giả thuyết (bao gồm mục đích và tính phù hợp) cũng như phạm vi ứng dụng của đồ án 1 2 3 4 5 2 Cập nhật kết quả nghiên cứu gần đây nhất (trong nước/quốc tế) 1 2 3 4 5 3 Nêu rõ và chi tiết phương pháp nghiên cứu/giải quyết vấn đề 1 2 3 4 5 4 Có kết quả mô phỏng/thưc nghiệm và trình bày rõ ràng kết quả đạt được 1 2 3 4 5 Có khả năng phân tích và đánh giá kết quả (15) 5 Kế hoạch làm việc rõ ràng bao gồm mục tiêu và phương pháp thực hiện dựa trên kết quả nghiên cứu lý thuyết một cách có hệ thống 1 2 3 4 5 6 Kết quả được trình bày một cách logic và dễ hiểu, tất cả kết quả đều được phân tích và đánh giá thỏa đáng"],[34,"1 2 3 4 5 7 Trong phần kết luận, tác giả chỉ rõ sự khác biệt (nếu có) giữa kết quả đạt được và mục tiêu ban đầu đề ra đồng thời cung cấp lập luận để đề xuất hướng giải quyết có thể thực hiện trong tương lai"],[35,"1 2 3 4 5 Kỹ năng viết (10) 8 Đồ án trình bày đúng mẫu quy định với cấu trúc các chương logic và đẹp mắt (bảng biểu, hình ảnh rõ ràng, có tiêu đề, được đánh số thứ tự và được giải thích hay đề cập đến trong đồ án, có căn lề, dấu cách sau dấu chấm, dấu phẩy v.v), có mở đầu chương và kết luận chương, có liệt kê tài liệu tham khảo và có trích dẫn đúng quy định 1 2 3 4 5 9 Kỹ năng viết xuất sắc (cấu trúc câu chuẩn, văn phong khoa học, lập luận logic và có cơ sở, từ vựng sử dụng phù hợp v.v.) 1 2 3 4 5 Thành tựu nghiên cứu khoa học (5) (chọn 1 trong 3 trường hợp) 10a Có bài báo khoa học được đăng hoặc chấp nhận đăng/đạt giải SVNC khoa học giải 3 cấp Viện trở lên/các giải thưởng khoa học (quốc tế/trong nước) từ giải 3 trở lên/ Có đăng ký bằng phát minh sáng chế 5 10b Được báo cáo tại hội đồng cấp Viện trong hội nghị sinh viên nghiên cứu khoa học nhưng không đạt giải từ giải 3 trở lên/Đạt giải khuyến khích trong các kỳ thi quốc gia và quốc tế khác về chuyên ngành như TI contest"],[36,"2 10c Không có thành tích về nghiên cứu khoa học 0 Điểm tổng /50 Điểm tổng quy đổi về thang 10"],[37,"3"],[38,"Nhận xét thêm của Thầy/Cô ..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................."],[39,"Ngày: / /201 Người nhận xét (Ký và ghi rõ họ tên)"],[40,"LỜI NÓI ĐẦU Ngày nay công nghệ thông tin đang ngày càng phát triển rất mạnh mẽ"],[41,"Nhu cầu trao đổi thông tin dẫn đến gia tăng lưu lượng cũng như khối lượng dữ liệu"],[42,"Để có thể đáp ứng điều này, hệ thống mạng và hệ thống máy chủ cũng không ngừng gia tăng cả về kích thước với việc tăng số lượng và được phân bố rộng khắp trên toàn thế giới"],[43,"Tuy nhiên, việc gia tăng của hệ thống mạng và hệ thống máy chủ này chưa đáp ứng được với nhu cầu trao đổi dữ liệu"],[44,"Sự chuyển tiếp từ IPv4 lên IPv6, bắt đầu hơn mười năm trước đây và vẫn còn có nhiều thiếu sót lớn, trong khi thực tế Ipv6 chỉ là sự nâng cấp giao thức"],[45,"Software defined networking (SDN) là kỹ thuật mạng mới nổi được hy vọng thay đổi những hạn chế của cơ sở hạ tầng mạng hiện nay"],[46,"Đồng thời, ảo hóa mạng trên nền tảng SDN được công nhận là một công nghệ hứa hẹn cho mạng Internet trong tương lai"],[47,"Việc ứng dụng công nghệ này dựa trên các thuật toán ảo hóa mạng có tính tự động có thể nhanh chóng xây dựng các mạng ảo nhanh chóng, trên một cơ sở hạ tầng mạng có sẵn, tối ưu hóa sử dụng tài nguyên của hạ tầng mạng hiện có"],[48,"Trong Đồ Án của mình, em xin đề xuất một số thuật toán ảo hóa mạng mới, khảo sát và so sánh chúng khi với các mạng ảo vào hạ tầng mạng khác nhau, từ đó có thể đánh giá được các thuật toán về tỉ lệ chấp nhận các mạng ảo vào hạ tầng mạng và tỉ lệ tài nguyên vật lý còn thừa của hạ tầng mạng"],[49,"Trong quá trình thực hiện đề tài do sự hạn chế về nền tảng kiến thức, kinh nghiệm nghiên cứu, cùng với hạn chế về mặt thời gian nên đồ án không thể tránh khỏi những thiếu sót"],[50,"Em rất mong thầy cô tham gia đóng góp phê bình để đồ án của em được hoàn thiện hơn"],[51,"Xin trân trọng cảm ơn trường Đại học Bách khoa Hà Nội, Viện Điện Tử Viễn Thông trong suốt 5 năm qua đã dạy bảo và cung cấp cho em những kiến thức nền tảng rất có ích phục vụ cho quá trình thực hiện đồ án cũng như cuộc sống sau này"],[52,"Xin chân thành cảm ơn PGS.TS Vũ Văn Yêm, người đã trực tiếp hướng dẫn em thực hiện đồ án này, cùng PGS.TS Nguyễn Hữu Thanh, Ths"],[53,"Trần Mạnh Nam đã dìu dắt, giúp đỡ và tận tình chỉ bảo em trong suốt thời gian thực hiện đồ án"],[54,"Xin cảm ơn tập thể các bạn trong nhóm Network Virtualization, phòng laboratory nghiên cứu Future Network đã cùng mình nghiên cứu, chia sẻ trong suốt thời gian qua"],[55,"Cuối cùng, xin gửi lời cảm ơn tới gia đình, bố mẹ, anh em, đã là nền tảng, là người luôn theo sát, chăm sóc động viên cho con trong suốt cuộc đời này"],[56,"Dù bất cứ khi nào, thành quả của con đạt được không thể thiếu công ơn sinh thành và dạy dỗ của gia đình"],[57,"TÓM TẮT ĐỒ ÁN Ngày nay, nhu cầu sử dụng và trao đổi dữ liệu ngày càng tăng cao trên toàn thế giới"],[58,"Trong khi đó, hệ thống cơ sở hạ tầng, các thiết bị mạng các thiết bị máy chủ cũng gia tăng nhưng vẫn khó khăn trong việc đáp ứng nhu cầu tăng cao đó"],[59,"Vì vậy, giải pháp ảo hóa ra đời, ảo hóa mạng cho phép nhiều kiến trúc ảo có thể cùng tồn tại trên một hạ tầng mạng vật lý chung"],[60,"Mà quá trình nhúng các mạng ảo lên trên một hạ tầng vật lý chung sao cho đạt được hiệu suất cao nhất lại là một bài toán NP-hard"],[61,"Trong khi đó, các thuật toán hiện tại mới chỉ tập trung vào giải quyết các bài toán theo phương pháp phỏng đoán và vẫn còn bị hạn chế về mặt tối ưu tài nguyên sử dụng"],[62,"Trong đề tài này, tác giả tập trung vào xây dựng các thuật toán ảo hóa mạng mà cụ thể là các thuật toán tối ưu tài nguyên, nâng cao tỉ lệ chấp nhận các yêu cầu đến trong quá trình ảo hóa mạng"],[63,"Bằng việc phát triền các thuật toán độc lập, rồi sau đó đưa ra một Framework mới giúp cho việc đánh giá các thuật toán trở nên đơn giản, thuận tiện, nâng cao được hiệu quả trong quá trình đánh giá các thuật toán ảo hóa mạng"],[64,"Trong đề tài này tác giả đi sâu vào phát triển các thuật toán ảo hóa mạng liên quan đến Node Mapping và Link Mapping cho phép ánh xạ tương ứng các nút ảo, link ảo từ các yêu cầu lên trên hạ tầng mạng vật lý"],[65,"Thêm vào đó, tác giả đã xây dựng lại các thuật toán đã có trước đó và so sánh thuật toán mới xây dựng với các thuật toán đó"],[66,"Kết quả cho thấy, thuật toán mới có tỉ lệ chấp nhận các yêu cầu cao hơn, hiệu suất sử dụng tài nguyên lớn hơn các thuật toán đã có, rất thích hợp để ứng dụng vào quá trình ảo hóa mạng trên nền tàng công nghệ Software Defined Networking"],[67,""],[68,"ABSTRACT Nowadays, the demand for communication and interaction amongst people through network system is increasing significantly in the world"],[69,"While network infrastructure such as network devives and services are also increasing, the difficulty in exchanging data through network system has not sovled"],[70,"Therefore, the Network Virtualization has been found, it allows multiple heterogeneous virtual architectures to simultaneously coexist on a shared infrastructure"],[71,"Embedding multiple virtual networks on a shared substrate is a challenging problem that deals with highest efficient mapping is known as NP-hard problem"],[72,"Meanwhile, the existing algorithms focus on heuristic algorithms for virtual network embedding problems or restricted by the space to allow efficient solutions"],[73,"In this project, the author concentrates on research new Virtual Network Embedding Algorithms, which focus on improving an acceptance ratio and resource utilization"],[74,"By developing independemt algorithms, the author also built a new framework which permits users can evaluate the algorithms"],[75,"In this topic, the author focuses on researching into the Algorithms for Node Mapping and Link Mapping which give the mapping results for Virtual Nodes on the Substrate Node and Virtual Link onto physical path in the infrastructure"],[76,"Then, the author built some existing alrorithms to compare them with the proposed algorithm"],[77,"From the results, the new Algorithms not only have higher acceptance ratio but also get the resource efficiency more than the built-in algorithms"],[78,"To sum up, the new algorithms are able to use in Network Virtualization technology which based on Software Defined Networking"],[79,""],[80,"MỤC LỤC LỜI NÓI ĐẦU 7 TÓM TẮT ĐỒ ÁN 9 ABSTRACT 10 MỤC LỤC 11 DANH SÁCH HÌNH VẼ 13 DANH SÁCH CÁC BẢNG BIỂU 14 DANH SÁCH CÁC TỪ VIẾT TẮT 15 PHẦN MỞ ĐẦU 16 CHƯƠNG 1"],[81,"GIỚI THIỆU CHUNG 18 1.1 Đặt vấn đề 18 1.2 Mục tiêu đề tài 19 1.3 Kế hoạch thực hiện 19 CHƯƠNG 2"],[82,"CƠ SỞ LÝ THUYẾT 20 2.1"],[83,"Tổng quan về Software Defined Networking 20 2.2"],[84,"Tổng quan về công nghệ ảo hóa 22 2.2.1 Ảo hóa hệ thống lưu trữ 22 2.2.2 Ảo hóa hệ thống máy chủ 24 2.2.3 Ảo hóa mạng 24 2.3"],[85,"Tổng quan về ảo hóa mạng sử dụng công nghệ OpenFlow 28 2.3.1 OpenFlow Controller 29 2.3.2 Giao thức OpenFlow 30 2.3.3 Open vSwitch 34 2.3.4 Các công cụ ảo hóa 35 2.4"],[86,"Kết luận 38 CHƯƠNG 3"],[87,"NGHIÊN CỨU THUẬT TOÁN ẢO HÓA MẠNG 39 3.1"],[88,"Tổng quan về thuật toán Ảo hóa mạng 39 3.2"],[89,"Phân loại các bài toán Ảo hóa mạng 41 3.3"],[90,"Bài toán Ảo hóa mạng 42 3.3.1 Mạng vật lý 42 3.3.2 Virtual Network Request 43 3.3.3 Tài nguyên của mạng 44 3.3.4 Phân bố tài nguyên cho các mạng ảo 44 3.3.5 Tải lưu lượng yêu cầu 46 3.4"],[91,"Kết luận 47 CHƯƠNG 4"],[92,"XÂY DỰNG CÁC THUẬT TOÁN ẢO HÓA MẠNG 48 4.1"],[93,"Thuật toán Node Mapping 48 4.1.1 Ý tưởng thuật toán 48 4.1.2 Mã giả thuật toán 48 4.1.3 Mô tả chi tiết thuật toán 50 4.2"],[94,"Thuật toán Link Mapping 51 4.2.1 Ý tưởng thuật toán 51 4.2.2 Mã giả thuật toán 51 4.2.3 Mô tả chi tiết thuật toán 52 CHƯƠNG 5"],[95,"KẾT QUẢ ĐẠT ĐƯỢC VÀ ĐÁNH GIÁ 53 5.1"],[96,"Framework 53 5.2"],[97,"Kết quả thu được 55 5.2.1 Phương pháp đánh giá 55 5.2.2 Đánh giá kết quả thu được 58 5.3"],[98,"Hướng phát triển của đề tài 61 KẾT LUẬN 62 TÀI LIỆU THAM KHẢO 63"],[99,"DANH SÁCH HÌNH VẼ Hình 2.1 Kiến trúc mạng Software Defined Networking 20 Hình 2.2 Mô hình ảo hóa mạng lưu trữ SVC của IBM 23 Hình 2.3 Mô hình triển khai VLAN trong mạng cục bộ 26 Hình 2.4 Công nghệ VPN 27 Hình 2.5 Kiến trúc OpenFlow 31 Hình 2.6 OpenFlow Controller và Openflow Switch 32 Hình 2.7 Open vSwitch 34 Hình 2.8 Ảo hóa FlowVisor 36 Hình 2.9 Thể hiện hạ tầng vật lý và kết nối ảo 38 Hình 3.1 Các VN Request được ánh xạ lên mạng vật lý 40 Hình 3.2 Mạng vật lý và mạng ảo 43 Hình 5.1 Tiến trình hoạt động của Framework 53 Hình 5.2 Kiến trúc Framework 54 Hình 5.3 Giao diện đồ họa của Framework 55 Hình 5.4 Tỉ lệ chấp nhận và tải giữa các thuật toán Node Mapping 58 Hình 5.5 Tỉ lệ chấp nhận và tải giữa các thuật toán Link Mapping 59 Hình 5.6 Tỉ lệ băng thông còn thừa khi cùng tỉ lệ chấp nhận 59 Hình 5.7 Tỉ lệ chấp nhận theo số nút 60 Hình 5.8 Tỉ lệ chấp nhận, băng thông còn thừa với số luồng tách tối đa 60"],[100,"DANH SÁCH CÁC BẢNG BIỂU Bảng 4.1 Mã giả thuật toán NeiNR 48 Bảng 4.2 Mã giả thuật toán NeiHEE 49 Bảng 4.3 Mã giả thuật toán B-Mapping 51"],[101,"DANH SÁCH CÁC TỪ VIẾT TẮT Viết tắt Tiếng Anh Tiếng Việt ADVisor Advanced FlowVisor VeRTIGo ViRtual TopologIes Generalization in OpenFlow networks Switch Chuyển mạch Router Bộ định tuyến VMs Virtual Machines Máy ảo Switch Chuyển mạch Router Bộ định tuyến NAT Network Address Translation Chuyển đổi địa chỉ mạng IP Internet Protocol Giao thức Internet SSL Secure Socket Layer VLAN Virtual Local Arena Network Mạng cục bộ ảo VPN Virtual personal network Mạng riêng ảo MPLS Multiprotocol Label Switching  WDM Wavelength-division multiplexing OS Operating System Hệ điều hành MAC Media Access Control Giao thức điều khiển truy nhập RAID Redundant Arrays of Inexpensive Disks Ghép ổ đĩa IT Information Technology Công nghệ thông tin SDN Software Defined Networking Mạng định nghĩa bằng phần mềm VNE Virtual Network Embedding Nhúng mạng ảo Node Mapping Ánh xạ nút Link Mapping Ánh xạ link VN Requet Virtual Network Request Mạng ảo yêu cầu Demand Yêu cầu"],[102,"PHẦN MỞ ĐẦU Đặt vấn đề Ngày nay, nhu cầu trao đổi dữ liệu qua mạng máy tính gia tăng một cách nhanh chóng"],[103,"Các hệ thống mạng và các thiết bị mạng như switch, router cũng gia tăng cả về số lượng lẫn chất lượng để đáp ứng nhu cầu đó"],[104,"Tuy nhiên, thực trạng hiện tại của cả ngành công nghệ thông tin phải đối mặt đó là hệ thống mạng không đủ để đáp ứng nhu cầu của người sử dụng"],[105,"Vì vậy, các giải pháp ra đời để có thể giải quyết được những vấn đề cấp bách mà ngành công nghệ thông tin đang gặp phải"],[106,"Công nghệ ảo hóa ra đời với bước đi tiên phong trong việc nâng cao hiệu quả sử dụng phần cứng, các thiết bị mạng"],[107,"Trong đề tài này chỉ để cập đến các thuật toán ảo hóa mạng sử dụng cho công nghệ ảo hóa mạng mà cụ thể là công nghệ ảo hóa sử dụng công nghệ OpenFlow"],[108,"Các thuật toán này sẽ đưa ra các giải pháp giúp quá trình ảo hóa mạng có thể nâng cao được hiệu quả sử dụng thiết bị mạng"],[109,"Mục tiêu của đề tài này là xây dựng các thuật toán ảo hóa mạng cho các nút ảo và link ảo, sau đó các kết quả này sẽ được sử dụng để ảo hóa mạng một cách tự động, tạo ra các mạng ảo tượng ứng với yêu cầu của các khách hàng"],[110,"Hướng triển khai đề tài Đầu tiên, tác giả sẽ tìm hiểu về hệ thống ảo hóa hiện tại, các công nghệ ảo hóa mạng và đặc biệt là công nghệ ảo hóa sử dụng công nghệ OpenFlow"],[111,"Sau đó, tác giả sẽ đi sâu vào việc tìm hiểu các thuật toán được ứng dụng trong công nghệ ảo hóa mạng"],[112,"Từ đó, đưa ra những nhược điểm mà các thuật toán ảo hóa mạng hiện tại còn vướng phải so với nhu cầu từ thực tế"],[113,"Cuối cùng, tác giả sẽ xây dựng các thuật toán mới nhằm giải quyết các vấn đề còn tồn tại để có thể nâng cao được hiệu suất xử lý cho công nghệ ảo hóa mạng"],[114,"Cấu trúc đồ án - Chương 1 tập trung vào việc giới thiệu đề tài, nêu lên các vấn đề khó khăn cần phải giải quyết đối với nhu cầu trao đổi thông tin trong mạng máy tính hiện nay và các khó khăn khác"],[115,"Từ đó, nêu lên các vấn đề cần giải quyết đặc biệt là việc tối ưu tài nguyên sử dụng trong quá trình ảo hóa sử dụng công nghệ OpenFlow"],[116,"- Chương 2 tập trung vào giới thiệu cơ sở lý thuyết về công nghệ Software Defined Networking, các công nghệ ảo hóa hiện tại, công nghệ ảo hóa mạng sử dụng OpenFlow"],[117,"- Chương 3 đề cập đến việc nghiên cứu đánh giá các thuật toán hiện tại đang được sử dụng trong công nghệ ảo hóa mạng"],[118,"Sau đó dựa vào yêu cầu từ thực tế, tác giả sẽ tiến hành mô hình hóa bài toán ảo hóa mạng để sử dụng cho việc giải quyết bài toán ở chương sau"],[119,"- Chương 4 Tác giả sẽ đưa ra các ý tưởng nhằm giải quyết các vấn đề mà bài toán toán ảo hóa mạng đã đặt ra"],[120,"Tác giả sẽ lần lượt đưa ra ý tưởng, mã giả thuật toán rồi sau đó sẽ mô tả chi tiết đối với hai bài toán Node Mapping và Link Mapping"],[121,"- Chương 5 sẽ trình bày về Framework mà tác giả xây dựng để sử dụng trong quá trình đánh giá, mô phỏng các thuật toán ảo hóa mạng"],[122,"Tác giả sẽ trình bày về phương pháp mà tác giả sử dụng để đánh giá hiệu năng các thuật toán"],[123,"Cuối cùng, tác giả sẽ đưa ra các kết quả thông kê từ các thuật toán và nhận xét, kết luận từ các kết quả đó"],[124,"CHƯƠNG 1"],[125,"GIỚI THIỆU CHUNG Chương 1 tập trung vào việc giới thiệu đề tài, nêu lên các vấn đề khó khăn, hạn chế cầu phải giái quyết trong việc tối ưu tài nguyên sử dụng quá trình ảo hóa mạng hiện nay"],[126,"Từ đó, nêu lên các bài toán cần giải quyết đặc biệt là các thuật toán ảo hóa mạng trên nền tảng công nghệ Software Defined Networking"],[127,"1.1 Đặt vấn đề Ngày nay, nhu cầu trao đổi thông tin công nghệ ngày càng cao dân đến sự gia tăng nhanh chóng của nhu cầu sử dụng mạng"],[128,"Sự gia tăng của các thiết bị mạng như router, switch không đủ để đáp ứng các nhu cầu đó"],[129,"Thêm vào đó, các nhà khoa học khó khăn trong việc tìm một môi trường thực tế để triển khai thử nghiệm các giao thức mới"],[130,"Vào thời điểm này, nhất thiết phải có một giải pháp để giải quyết vấn đề đang nảy sinh này"],[131,"Vào thời điểm đó, hàng loạt các giải pháp ảo hóa ra đời như ảo hóa hệ thống lưu trữ, ảo hóa hệ thống mạng, ảo hóa ứng dụng và ảo hóa hệ thống máy chủ"],[132,"Trong ảo hóa mạng có Vlan-Virtual Local Area Network, VPN - virtual personal network, MPLS,WDM\u2026 nhưng các giải pháp này vẫn chưa giải quyết được triệt để vấn đề tài nguyên"],[133,"Công nghệ ảo hóa mạng sử dụng công nghệ OpenFlow ra đời như một giải pháp tiên phong, tháo gỡ những vướng mắc của việc gia tăng nhu cầu sử dụng mạng trong khi hệ thống, cơ sở hạ tầng mạng tăng lên không đáp ứng đủ nhu cầu sử dụng đó"],[134,"Tuy nhiên, hiện tại vẫn chưa có được một giải pháp tối ưu trong việc sử dụng tài nguyên vật lý trong quá trình ảo hóa"],[135,"Trong khi, các thuật toán ảo hóa mạng đã có vẫn chưa đưa ra được giải pháp tối ưu tốt nhất, gây lãng phí tài nguyên trong quá trình ảo hóa mạng"],[136,"Bài toán ảo hóa mạng trên nền tàng Software Defined Networing thương được chia ra thành hai bài toán nhỏ: Node Mapping và Link Mapping; các thuật toán này sẽ tập trung vào giải quyết các vấn đề còn tồn tại liên quan đến ảo hóa nút và ảo hóa link"],[137,"Các thuật toán Node Mapping và Link Mapping hiện tại vẫn chưa hoàn toàn tối ưu được tài nguyên sử dụng và hiệu suất xử lý các yêu cầu vẫn chưa cao"],[138,"Vì vậy, trong đề tài này, tác giả sẽ tập trung phát triển, xây dựng các thuật toán ảo hóa mạng mới nhằm nâng cao hiệu suất xử lý các yêu cầu từ phía khách hàng, mặt khác vẫn đảm bảo tối ưu được tài nguyên sử dụng của hạ tầng vật lý"],[139,"1.2 Mục tiêu đề tài Mục tiêu của đề tài này là xây dựng các thuật tóa ảo hóa mạng để ứng dụng trong công nghệ ảo hóa mạng cho phép các nhà quản trị mạng có thể tối ưu được tài nguyên cần phải bỏ ra, trong khi vẫn đảm bảo đáp ứng được nhiều nhất có thể các yêu cầu từ phía khách hàng"],[140,"Các thuật toán có các chức năng chính sau: - Đầu vào là hạ tầng mạng vật lý và các yêu cầu mạng từ phía các khách hàng"],[141,"- Thuật toán sẽ xử lý, đưa ra các phương pháp ánh xạ từ các phần tử mạng ảo như nút ảo, link ảo lên trên các nút và đường vật lý mà vẫn đảm bảo về mặt tài nguyên yêu cầu cho các mạng ảo"],[142,"- Thuật toán sẽ đưa ra phương án ánh xạ sao có các yêu cầu được xử lý nhiều nhất có thể, mà vẫn đảm bảo được hiệu suất sử dụng tài nguyên cao"],[143,"- Đưa ra phương án đánh giá, so sánh giữa thuật toán mới xây dựng được với các thuật toán đã có sẵn"],[144,"1.3 Kế hoạch thực hiện - Tìm hiểu cơ sở lý thuyết về Software Defined Networking"],[145,"- Tìm hiểu cơ sở lý thuyết ảo hóa mạng"],[146,"- Tìm hiểu cơ sở lý thuyết ảo hóa mạng sử dụng công nghệ OpenFlow"],[147,"- Tìm hiểu các bài toán ảo hóa mạng"],[148,"- Tiến hành xây dựng ý tưởng, triển khai thuật toán dưới dạng mã giả"],[149,"- Đưa ra các phương án đánh giá, so sánh hiệu suất sử lý của thuật toán"],[150,"CHƯƠNG 2"],[151,"CƠ SỞ LÝ THUYẾT Chương 2 tập trung vào giới thiệu cơ sở lý thuyết về Software Defined Networking [1], OpenFlow[6][10][11], các công nghệ ảo hóa hiện tại"],[152,"Tổng quan về Software Defined Networking Trong hệ thống mạng hiện này, sự kết hợp giữa phần điều khiển và phần chuyển mạch trong các Router và Switch chính là giải pháp cho phép thông tin dưới dạng các gói tin truyền khắp thế giới"],[153,"Mặc dù phổ biến nhưng mạng IP truyền thống rất phức tạp và khó để quản lý"],[154,"Và để có thể triển khai được một hệ thống mạng như vậy cần cấu hình cho từng thiết bị mạng riêng rẽ, điều này khiến cho hệ thống mạng gặp rất nhiều khó khăn cho việc quản lý và vận hành"],[155,"Tự động cấu hình và cơ chế phản hồi là không tồn tại ở mạng IP hiện nay"],[156,"Do vậy vấn đề lớn nhất đặt ra là cần thiết có một cơ chế/chính sách trong môi trường động như thế"],[157,"Hình 2.1 Kiến trúc mạng Software Defined Networking Software-Definded Networking (SDN) là một cách tiếp cận mới trong việc thiết kế, xây dựng và quản lý hệ thống mạng"],[158,"Về cơ bản, SDN chia tách độc lập hai cơ chế hiện đang tồn tại trong cùng một thiết bị mạng: Cơ chế điều khiển (Control Plane), cơ chế chuyển tiếp dữ liệu (Data Plane) để có thể tối ưu hoạt động của hai cơ chế này"],[159,"Về cơ bản, SDN được chia làm ba phần lớn như trong Hình 2.1: Phần ứng dụng (Application Layer), Phần Điều Khiển (Control Layer) và phần thiết bị (Infrastructure Layer)"],[160,"Các phần sẽ liên kết với nhau thông qua giao thức hoặc các API"],[161,"Infrastructure layer: Lớp vật lý của hệ thống mạng, bao gồm thiết bị mạng và các liên kết giữa chúng"],[162,"Tại đây, dữ liệu sẽ được chuyển tiếp nhanh dựa trên những chỉ thị từ tầng điều khiển thông qua giao thức OpenFlow"],[163,"Control layer: Lớp điều khiển, có vai trò: + Cung cấp API để có thể xây dựng các ứng dụng cho hệ thống mạng + Thu nhận thông tin từ hệ thống mạng vật lý, điều khiển hệ thống mạng Vật lý Application layer: Từ các API được cung cấp từ lớp điều khiển, người sử dụng có thể lập trình hoạt động cho hệ thống mạng để tối ưu hoạt động htoe một yêu cầu nhất định"],[164,"So sánh với kiến trúc mạng truyền thống: Trong hệ thống mạng truyền thống, các thiết bị mạng (Layer 2, layer 3) phải mang trên mình nhiều chức năng để đảm bảo hoạt động"],[165,"Ví dụ: Các chức năng của Layer Switch hiện nay: VLAN, Spanning tree, Quality of Service, Security.."],[166,"Và đa số các thiết bị mạng và các giao thức này hoạt động độc lập với nhau vì mỗi nhà sản xuất cung cấp các giải pháp mạng khác nhau"],[167,"Những điều này tạo ra sự phân mảnh hệ thống mạng, giảm hiệu năng hoạt động"],[168,"Với SDN, việc điều khiển được tập trung tại Controller Layer, các thiết bị mạng chỉ có nhiệm vụ chuyển tiếp gói tin do đó sự khác biệt giữa những nhà sản xuất không ảnh hưởng tới toàn hệ thống mạng"],[169,"Điều này cũng giống như sự phát triển của máy tính hiện nay, mỗi máy tính được cung cấp và sản xuất bởi những nhà sản xuất khác nhau (Dell, HP, IBM, Apple, Google..), chạy các hệ điều hành khác nhau (Windows, MacOS, Linux, Unix,...) nhưng đều có khả năng truy cập và sử dụng internet dựa trên giao thức mạng TCP/IP"],[170,"Về phía người sử dụng, người dùng không phải có mặt trực tiếp tại các thiết bị mạng để cấu hình cho các thiết bị mạng, họ chỉ cần thông qua các API đã được cung cấp cùng với một chút kiến thức về TCP/IP để có thể xây dựng ứng dụng cho toàn hệ thống mạng"],[171,"Tổng quan về công nghệ ảo hóa Ảo hóa là các hành động của việc tạo ra một phiên bản ảo ( chứ không phải là thực tế) của một cái gì đó , bao gồm nhưng không giới hạn trong một nền tảng ảo phần cứng, hệ điều hành (OS), thiết bị lưu trữ , hoặc tài nguyên mạng"],[172,"Trong năm 2005, phần mềm ảo hóa đã phát triển nhanh hơn so với các chuyên gia tưởng tượng"],[173,"Có bốn lĩnh vực CNTT mà ảo hóa đang làm là: ảo hóa hệ thống lưu trữ, ảo hóa hệ thống máy chủ, ảo hóa hệ thống mạng, ảo hóa ứng dụng"],[174,"2.2.1 Ảo hóa hệ thống lưu trữ Ảo hóa hệ thống lưu trữ về cơ bản là sự mô phỏng, giả lập việc lưu trữ từ các thiết bị lưu trữ vật lý"],[175,"Các thiết bị này có thể là băng từ, ổ cứng hay kết hợp cả 2 loại"],[176,"Việc làm này mang lại các ích lợi như việc tăng tốc khả năng truy xuất dữ liệu, do việc phân chia các tác vụ đọc, viết trong mạng lưu trữ"],[177,"Ngoài ra, việc mô phỏng các thiết bị lưu trữ vật lý cho phép tiết kiệm thời gian hơn thay vì phải định vị xem máy chủ nào hoạt động trên ổ cứng nào để truy xuất"],[178,"Lưu trữ ảo hóa có thể chỉ định lưu trữ bất cứ lúc nào, và cũng cho phép không gây gián đoạn di chuyển dữ liệu (tức là quá trình sao chép đĩa ảo từ một vị trí khác là ẩn so với máy chủ sử dụng đĩa ảo đó)"],[179,"Ảo hóa lưu trữ là giải pháp mà các hãng công nghệ quan tâm và phát triển thành sản phẩm, ví dụ như SFS (Storage Area Networks File System), SVC (Storage Area Network Volume Controller) của hãng IBM"],[180,"Hình 2.2 khái quát giải pháp SVC của IBM"],[181,"Mạng lưu trữ gồm các thiết bị, tủ đĩa khác nhau được SVC ảo hóa thành một nguồn lưu trữ hợp nhất"],[182,"Các động thái sao chép hay dịch chuyển dữ liệu bên trong nguồn lưu trữ hợp nhất đó được các ứng dụng tiến hành thuận tiện"],[183,"Các ứng dụng tại các máy chủ hoàn toàn không \u201cnhận thấy\u201d được nguồn lưu trữ hợp nhất thật ra được tạo nên bởi các thiết bị vật lý độc lập"],[184,"Hình 2.2 Mô hình ảo hóa mạng lưu trữ SVC của IBM Ảo hóa hệ thống lưu trữ có ba dạng mô hình dưới đây: Host-based: Trong mô hình này, ngăn cách giữa lớp ảo hóa và ổ đĩa vật lý là driver điều khiển của các ổ đĩa"],[185,"Phần mềm ảo hóa sẽ truy xuất tài nguyên (các ổ cứng vật lý) thông qua sự điều khiển và truy xuất của lớp Driver này"],[186,"Storage-device based: Trong dạng này, phần mềm ảo hóa giao tiếp trực tiếp với ổ cứng"],[187,"Ta có thể xem như đây là 1 dạng firmware đặc biệt, được cài trực tiếp vào ổ cứng"],[188,"Dạng này cho phép truy xuất nhanh nhất tới ổ cứng, nhưng cách thiết lập thường khó khăn và phức tạp hơn các mô hình khác"],[189,"Dịch vụ ảo hóa được cung cấp cho các Server thông qua một thiết bị điều khiển gọi là Primary Storage Controller"],[190,"Network-based:  Trong mô hình này, việc ảo hóa sẽ được thực thi trên một thiết bị mạng, ở đây có thể là một thiết bị switch hay một máy chủ"],[191,"Các switch hay máy chủ này kết nối với các trung tâm lưu trữ (SAN)"],[192,"Từ các switch hay server này, các ứng dụng kết nối vào được giao tiếp với trung tâm dữ liệu bằng các \u201cổ cứng\u201d mô phỏng do switch hay máy chủ tạo ra dựa trên trung tâm dữ liệu thật"],[193,"Đây cũng là mô hình hay gặp nhất trên thực tế"],[194,"2.2.2 Ảo hóa hệ thống máy chủ Ảo hóa máy chủ đề cập đến các phân vùng của các nguồn tài nguyên của một máy chủ vật lý vào nhiều môi trường thực hiện, mỗi trong số đó có thể lưu trữ một máy chủ khác nhau"],[195,"Đây là loại ảo hóa mà còn được gọi là hợp nhất máy chủ, là một thực tế phổ biến trong trung tâm dữ liệu doanh nghiệp để cải thiện sử dụng nguồn lực và tập trung bảo trì"],[196,"Máy chủ ảo hóa tách riêng phần mềm chạy trên một máy chủ từ phần cứng máy chủ vật lý"],[197,"Máy chủ ảo hóa được khuyến khích cho các ứng dụng nhỏ quy mô vừa, đem lại nhiều lợi ích như tăng tính di động, dễ dàng thiết lập với các máy chủ ảo, giúp việc quản lý, chia sẻ tài nguyên tốt hơn, quản lý luồng làm việc phù hợp với nhu cầu, tăng hiệu suất làm việc của một máy chủ vật lý"],[198,"Xét về kiến trúc hệ thống, các mô hình ảo hóa hệ thống máy chủ có thể ở hai dạng sau: Host-based:  Kiến trúc này sử dụng một lớp hypervisor chạy trên nền tảng hệ điều hành, sử dụng các dịch vụ được hệ điều hành cung cấp để phân chia tài nguyên tới các máy ảo"],[199,"Một số hệ thống hypervisor dạng Hosted có thể kể đến như VMware Server, VMware Workstation, Microsoft Virtual Server\u2026 Hypervisor-based:  hay còn gọi là bare-metal hypervisor"],[200,"Trong kiến trúc này, lớp phần mềm hypervisor chạy trực tiếp trên nền tảng phần cứng của máy chủ, không thông qua bất kì một hệ điều hành hay một nền tảng nào khác"],[201,"Qua đó, các hypervisor này có khả năng điều khiển, kiểm soát phần cứng của máy chủ"],[202,"Đồng thời, nó cũng có khả năng quản lý các hệ điều hành chạy trên nó"],[203,"Một số ví dụ về các hệ thống Bare-metal hypervisor như là Oracle VM, VMware ESX Server, IBM's POWER Hypervisor, Microsoft's Hyper-V, Citrix XenServer\u2026 2.2.3 Ảo hóa mạng Ảo hóa hệ thống mạng là một tiến trình hợp nhất tài nguyên, thiết bị mạng cả phần cứng lẫn phần mềm thành một hệ thống mạng ảo"],[204,"Sau đó, các tài nguyên này sẽ được phân chia thành các channel và gắn với một máy chủ hoặc một thiết bị nào đó"],[205,"Có nhiều phương pháp để thực hiện việc ảo hóa hệ thống mạng.Sau đây tác giả sẽ giới thiệu một vài mô hình ảo hóa hệ thống mạng: Ảo hóa lớp mạng (Virtualized overlay network): Trong mô hình này, nhiều hệ thống mạng ảo sẽ cùng tồn tại trên một lớp nền tài nguyên dùng chung"],[206,"Các tài nguyên đó bao gồm các thiết bị mạng như router, switch, các dây truyền dẫn, NIC"],[207,"Việc thiết lập nhiều hệ thống mạng ảo này sẽ cho phép sự  trao đổi thông suốt giữa các hệ thống mạng khác nhau, sử dụng các giao thức và phương tiện truyền tải khác nhau"],[208,"Mô hình ảo hóa của Cisco: đó là phân mô hình ảo hóa ra làm 3 khu vực, với các chức năng chuyên biệt"],[209,"Mỗi khu vực sẽ có các liên kết với các khu vực khác để cung cấp các giải pháp đến tay người dùng một cách thông suốt: + Khu vực quản lý truy cập (Access Control) + Khu vực đường dẫn (Path Isolation) + Khu vực liên kết với dịch vụ (Services Edge) 2.2.3.1 Công nghệ ảo hóa VLAN VLAN là viết tắt của Virtual Local Area Network hay còn gọi là mạng LAN ảo"],[210,"Một VLAN được định nghĩa là một nhóm logic các thiết bị mạng và được thiết lập dựa trên các yếu tố như chức năng, bộ phận, ứng dụng\u2026 của công ty và hoạt động của chúng như là một mạng độc lập"],[211,"Những VLAN này cho phép người quản trị mạng thực hiện truy nhập và thực thi các chính sách bảo mật với các nhóm người dùng đặc biệt"],[212,"Phân loại VLAN Port - based VLAN: là cách cấu hình VLAN đơn giản và phổ biến"],[213,"Mỗi cổng của Switch được gắn với một VLAN xác định"],[214,"MAC address based VLAN: Cách cấu hình này ít được sử dụng do có nhiều bất tiện trong việc quản lý"],[215,"Mỗi địa chỉ MAC được đánh dấu với một VLAN xác định"],[216,"Protocol \u2013 based VLAN: Cách cấu hình này gần giống như MAC Address based, nhưng sử dụng một địa chỉ logic hay địa chỉ IP thay thế cho địa chỉ MAC"],[217,"Lợi ích của VLAN Tiết kiệm băng thông của hệ thống mạng: VLAN chia mạng LAN thành nhiều đoạn (segment) nhỏ, mỗi đoạn đó là một vùng quảng bá (broadcast domain)"],[218,"Việc chia VLAN giúp tiết kiệm băng thông của hệ thống mạng"],[219,"Tăng khả năng bảo mật: Do các thiết bị ở các VLAN khác nhau không thể truy nhập vào nhau (trừ khi ta sử dụng router nối giữa các VLAN)"],[220,"Dễ dàng thêm hay bớt máy tính vào VLAN: Việc thêm một máy tính vào VLAN rất đơn giản, chỉ cần cấu hình cổng cho máy đó vào VLAN mong muốn"],[221,"Giúp mạng có tính linh động cao: với VLAN, ta chỉ cần cấu hình lại các cổng switch rồi đặt chúng vào các VLAN theo yêu cầu"],[222,"VLAN có thể được cấu hình tĩnh hay động"],[223,"Hình 2.3 Mô hình triển khai VLAN trong mạng cục bộ 2.2.3.2 Công nghệ ảo hóa mạng riêng ảo VPN VPN (Virtual Private Network) là công nghệ cung cấp một phương thức giao tiếp an toàn giữa các mạng riêng dựa vào kỹ thuật gọi là tunneling để tạo ra một mạng riêng trên nền Internet"],[224,"Về bản chất, đây là quá trình đặt toàn bộ gói tin vào trong một lớp header chứa thông tin định tuyến có thể truyền qua mạng trung gian"],[225,"Về căn bản, mỗi VPN là một mạng riêng rẽ sử dụng một mạng chung (thường là internet) để kết nối cùng với các hay nhiều người sử dụng từ xa"],[226,"Để có thể gửi và nhận dữ liệu thông qua mạng công cộng mà vẫn bảo đảm tính an tòan và bảo mật VPN cung cấp các cơ chế mã hóa dữ liệu trên đường truyền tạo ra một đường ống bảo mật giữa nơi nhận và nơi gửi (Tunnel) giống như một kết nối point-to-point trên mạng riêng"],[227,"Dữ liệu phải được mã hóa hay che giấu đi chỉ cung cấp phần đầu gói dữ liệu (header) là thông tin về đường đi cho phép nó có thể đi đến đích thông qua mạng công cộng một cách nhanh chóng"],[228,"Các đường kết nối VPN thường được gọi là đường ống VPN"],[229,"Hình 2.4 Công nghệ VPN VPN cung cấp nhiều đặc tính hơn so với những mạng truyền thống và những mạng leased-line: Chi phí thấp hơn những mạng riêng Tính linh hoạt cho khả năng kinh tế trên Internet: VPN vốn đã có tính linh hoạt và có thể leo thang những kiến trúc mạng hơn là những mạng cổ điển, bằng cách đó nó có thể hoạt động kinh doanh nhanh chóng và chi phí một cách hiệu quả cho việc kết nối mở rộng"],[230,"Đơn giản hóa những gánh nặng"],[231,"Những cấu trúc mạng ống, vì thế giảm việc quản lý những gánh nặng: Sử dụng một giao thức Internet backbone loại trừ những PVC tĩnh hợp với kết nối hướng những giao thức như là Frame Rely và ATM"],[232,"Tăng tình bảo mật: các dữ liệu quan trọng sẽ được che giấu đối với những người không có quyền truy cập và cho phép truy cập đối với những người dùng có quyền truy cập"],[233,"Hỗ trợ các giao thức mạng thông dụng nhất hiện nay như TCP/IP Bảo mật địa chỉ IP: bởi vì thông tin được gửi đi trên VPN đã được mã hóa do đó các điạ chỉ bên trong mạng riêng được che giấu và chỉ sử dụng các địa chỉ bên ngoài Internet"],[234,"2.2.3.3 Công nghệ ảo hóa OpenFlow Giải pháp OpenFlow mang lại khả năng ảo hóa toàn diện cho toàn bộ hệ thống Network, được kỳ vọng là một trong những chuẩn sẽ thay đổi kiến trúc hạ tầng network trong tương lai gần"],[235,"Các chuẩn Network đã và đang trải qua một giai đoạn phát triển vượt bậc trong suốt hai thập kỷ gần đây"],[236,"Các chuẩn mới được đưa ra nhằm khắc phục những khuyết điểm của các chuẩn cũ khi có nhu cầu mở rộng, thay đổi chức năng của hạ tầng Network"],[237,"Đó chính là lý do đã thúc đẩy các nhà nghiên cứu đưa ra OpenFlow.Ảo hóa OpenFlow sẽ được trình bày chi tiết ở các chương sau"],[238,"Tổng quan về ảo hóa mạng sử dụng công nghệ OpenFlow Cũng giống như ảo hóa máy tính, ảo hóa mạng OpenFlow hứa hẹn sẽ tăng hiệu quả sử dụng phần cứng, cho phép người dùng chia sẻ tài nguyên mạng"],[239,"Một điều quan trọng hơn, ảo hóa mạng OpenFlow cũng cung cấp môi trường thực và tin cậy đề triển khai và đánh giá các giao thức thử nghiệm trên hạ tầng mạng thực"],[240,"Ảo hóa mạng OpenFlow có thể được hiểu rõ ràng hơn khi so sánh với ảo hóa máy tính"],[241,"Thành công của ảo hóa máy tính liên quan trực tiếp đến lớp trừu tượng của lớp phần cứng phía dưới"],[242,"Ảo hóa máy tính có một lớp phần cứng trừu tượng cho phép phân chia và chia sẻ tài nguyên giữa các hệ điều hành khác nhau"],[243,"Hệ quả là mỗi hệ điều hành sở hữu một lượng phần cứng riêng biệt"],[244,"Lớp trừu tượng phần cứng này cho phép đổi mới nhanh chóng cả phần trên và phần dưới của lớp ảo hóa"],[245,"Phần trên, khả năng xây dựng lớp trừu tượng phần cứng cho phép các hệ điều hành tùy chỉnh tùy biến"],[246,"Phần dưới, các phần cứng khác nhau có thể được sử dụng miễn là nó có thể tương thích với lớp trừu tượng phần cứng"],[247,"Điều này cho phép các phần cứng khác nhau có các lệnh khác nhau được tối ưu cho hiệu xuất tốt hơn, ít năng lượng hơn"],[248,"Mục tiêu của ảo hóa mạng OpenFlow cũng giống như vậy"],[249,"Vì vậy, hạ tầng mạng cũng giống phần cứng cũng có lớp trừu tượng phần cứng"],[250,"Lớp này thực hiện nhiệm vụ đơn giản là phân chia hạ tầng mạng, do đó, nhiều hạ tầng mạng con có thể hoạt động song song với nhau mà không gây nhiễu cho nhau"],[251,"Bên trên lớp trừu tượng phần cứng, các giao thức mới có thể được thử nghiệm độc lập trọng các slice riêng biệt của cùng một hạ tầng mạng"],[252,"Bên dưới lớp ảo hóa, phần cứng mới có thể được phát triển cho các môi trường khác nhau, với tốc độ khác nhau, năng lượng khác nhau"],[253,"2.3.1 OpenFlow Controller Các bộ điều khiển mạng dùng trong mạng OpenFlow gồm có: bộ điều khiển mạng mặc định, POX[2], NOX, SNAC (giao diện Web để quản lý các OpenFlow switch), Beacon (Java)"],[254,"Tuy nhiên bộ điều khiển mạng chính và đáng chú ý nhất là bộ điều khiển mạng POX"],[255,"POX là bộ điều khiển mở, phát triển bằng ngôn ngữ Python, cấu trúc đơn giản, gọn nhẹ, dễ dàng tạo và thêm các mô đun mới"],[256,"Mục đích chính của POX gồm có: Cung cấp một platform cho phép người lập trình, phát triển mạng triển khai các ý tưởng mới trong lĩnh vực mạng, sử dụng phần cứng thật"],[257,"Các nhà phát triển có thể điều khiển tất cả các kết nối trong mạng gồm có: forwarding, routing\u2026 Ngoài ra POX còn điều khiển cả flow-table trong switch"],[258,"Cung cấp phần mềm quản lý mạng hữu ích cho các tổng đài (operator), gồm có việc quản lý tập trung cho tất cả các switch trong mạng, điều khiển truy nhập của người dùng"],[259,"Phương thức hoạt động của POX: POX chạy riêng rẽ trên một máy và quản lý việc chuyển tiếp các bản tin giữa nhiều switch khác nhau"],[260,"Trong quá trình mô phỏng, giả lập POX được chạy trên cùng một máy với đồ hình mạng được tạo ra bởi Mininet"],[261,"POX cung cấp các giao diện lập trình giúp cho nhà phát triển sử dụng dễ dàng lấy được thông tin về sự kiện trong mạng, can thiệp vào lưu lượng, điều khiển các quyết định chuyển mạch của switch và tạo được lưu lượng"],[262,"Khi có flow mới xuất hiện trọng mạng, các gói đầu tiên sẽ được gửi đến bộ điều khiển mạng POX, tại đây có thể thực hiện được: quyết định xem khi nào sẽ chuyển tiếp các gói đi trong mạng, định tuyến cho gói tin, thu thập các thông tin thống kê, chỉnh sửa được gói trong flow đó hoặc có thể xem thêm được về các gói khác trong cùng flow để thu thập được thêm nhiều thông tin"],[263,"POX đơn thuần chỉ là một platform, việc điều khiển mạng được thực hiện bởi các phần tử chức năng trong POX gọi là POX component, mỗi component thực thi một chức năng riêng biệt như định tuyến, chuyển mạch, xác thực.."],[264,"Có thể chạy một lúc nhiều POX component với các chức năng điều khiển khác nhau làm cho việc điều khiển và quản lý mạng trở nên hoàn hảo hơn"],[265,"Các ứng dụng trong bộ điều khiển mạng POX có thể kết hợp với nhận biết các sự kiện trong mạng (network event), can thiệp vào lưu lượng trong mạng, điều khiển định tuyến của các switch và tạo ra lưu lượng"],[266,"2.3.2 Giao thức OpenFlow OpenFlow là giao thức truyền thông đầu tiên được sử dụng giữa lớp Điều khiển và lớp chuyển tiếp trong kiến trúc mạng SDN"],[267,"OpenFlow cho phép truy cập trực và thao tác trên phần chuyển mạch của các thiết bị mạng như là Router, Switch trong cả 2 trường hợp thực và ảo"],[268,"Trên thực tế hiện nay vẫn chưa xuất hiện 1 giao thức chuẩn nào có cùng chức năng như OpenFlow, và sự ra đời của OpenFlow là cần thiết để chuyển công việc điều khiển mạng chuyển mạch lên trên các phần mềm điều khiển tập trung hợp lý"],[269,"Ý tưởng rất đơn giản: chúng ta lợi dụng thực tế là hầu hết các Chuyển mạch Ethernet và Router đều có chức các Flow Table, hoạt động ở line-rate (Tốc độ đường dây) để xây dựng các thành phần chức năng như Firewall, NAT, QoS và phân tích thống kê được vận chuyển qua mạng"],[270,"Trong thực tế, các Flow Table của các nhà sản xuất là khác nhau, vì thế nên OpenFlow đã tiêu chuẩn hóa các tập chức năng chung nhất, những chức năng mà đang được chạy trên hầu hết các Switch và Router"],[271,"OpenFlow cung cấp giao thức mở để có thể lập trình với Flow Table ở nhiều Switch và Router khác nhau"],[272,"Nhà quản trị mạng có thể phân chia lưu lượng mạng một cách phù hợp vào các sản phầm"],[273,"Nhà nghiên cứu có thể điều khiển các luồng của họ bằng cách lựa chọn Router mà các luồng dữ liệu sẽ đi qua, và xử lý dữ liệu nhận được"],[274,"Bằng cách tiếp cận này, các nhà nghiên cứu có thể thử nghiệm các giao thức định tuyến mới, các mô hình bảo mật, tổ chức địa chỉ mạng"],[275,"Một OpenFlow gồm 3 phần chính: Flow Table: mỗi thao tác được gắn liền với mỗi Flow Entry để báo cho Switch biết làm thế nào để xử lý luồng dữ liệu đến"],[276,"Secure Channel: dùng để kết nối Switch với bộ Controller,cho phép các lệnh và các gói dữ liệu có thể được gửi đi giữa Controller và Switch"],[277,"OpenFlow Protocol: Cung cấp cấp 1 phương thức mở và chuẩn để Controller có thể giao thiếp với Switch"],[278,"Hình 2.5 Kiến trúc OpenFlow Flow là một định nghĩa rộng, Flow được xác định bởi dung lượng của các phần tử trong Flow Table"],[279,"Ví dụ như, một Flow có thể là một kết nối TCP, trong đó bao gồm tất cả các gói đến từ một MAC và một IP cụ thể, hoặc là tất cả các gói dữ liệu có chung VLAN ID, hoặc cũng có thể là tất cả các gói đến từ cùng một cổng của Switch"],[280,"Mỗi Flow Entry có một tác vụ tương ứng đi liền với nó; có 3 tác vụ cơ bản sau (3 tác vụ này các OpenFlow switch đều phải hỗ trợ): Forward luồng các gói đến cổng đã cho trước"],[281,"Tác vụ này cho phép gói được định tuyến qua mạng"],[282,"Ở hầu hết các Switch, tác vụ này được chạy ở line-rate"],[283,"Đóng gói và chuyển tiếp luồng các gói này đến Controller"],[284,"Gói được phân phối đến Secure Channel, tại đây gói sẽ được đóng gói và gửi đến Controller"],[285,"Thường được sử dụng cho gói đầu tiên của một Flow mới, vì thế Controller có thể quyết định Flow này có nên được thêm vào Flow Table hay không"],[286,"Hoặc trong một vài trường hợp, tác vụ này có thể được sử dụng để chuyển tiếp tất cả các gói đến Controller để xử lý"],[287,"Hủy một luồng các gói"],[288,"Được sử dụng trong Bảo mật, để chống tấn công từ chối dịch vụ, .."],[289,"Mỗi Entry trong Flow Table có 3 trường: Header gói: để xác định luồng Tác vụ: xác định gói nên được xử lý như thế nào Thống kê: Theo dõi số lượng các gói và byte của mỗi luồng Controller: Controller có thể thêm và bỏ đi các Flow-Entry trong Flow Table"],[290,"Hình 2.6 OpenFlow Controller và Openflow Switch Lợi ích khi sử dụng OpenFlow Công nghệ SDN sử dụng OpenFlow cho phép giải quyết các ứng dụng băng thông cao,giúp mạng có thể thích ứng với các nhu cầu kinh doanh thay đổi,giúp giảm đáng kể các hoạt động và quản lý phác tạp"],[291,"Các lợi ích có thể đạt được thông qua kiến thúc SDN sử dụng OpenFlow: Tập trung hóa điều khiển trong môi trường nhiều nhà cung cấp thiết bị: phần mềm Controller của SDN có thể điều khiển bất kì thiết bị mạng có hỗ trợ OpenFlow từ bất kì nhà cung cấp thiết bị nào"],[292,"Như ở trong Hình 2.6 thể hiện một mạng SDN gồm các Switch hỗ trợ OpenFlow được điều khiển bằng một Controller thông qua giao thức OpenFlow"],[293,"Giảm sử phức tạp thông qua tự động hóa: Kiến trúc SDN trên cơ sở OpenFlow cung cấp 1 FrameWork quản lý tự động và linh hoạt Tốc độ đổi mới cao hợn: Áp dụng OpenFlow cho phép các nhà khai thác mạng lập trình lại mạng trong thời gian thực để đảm bảo nhu cầu kinh doanh và yêu cầu từ phía người dùng"],[294,"Gia tăng độ tinh cậy và khả năng an ninh của mạng: Kiến trúc SDN dựa trên cơ sở OpenFlow cung cấp điều khiển và tầm nhìn hoàn chỉnh trên mạng,nên có thể đảm bảo điều khiển truy nhập, định hình lưu lượng,QoS,an ninh, và các chính sách nhất quán trên toàn bộ cơ sở hạ tầng mạng không dây và có dây"],[295,"Điều khiển mạng chi tiết hơn"],[296,"Tập trung hóa điều khiển mạng và tạo ra trạng thái thông tin có sẵn cho các ứng dụng mức cao hơn, đáp ứng tốt hơn cho nhu cầu thay đổi của người dùng"],[297,"2.3.3 Open vSwitch Hình 2.7 Open vSwitch OpenvSwitch[5] là thiết bị chuyển mạch đa tầng được phát triển trên nền tảng Apache 2.0"],[298,"OpenvSwitch được thiết kế để phục vụ tự động mạng thông qua lập trình, và hỗ trợ các chuẩn giao thức và giao diện quản lý như NetFlow, sFlow, SPAN, RSPAN, CLI, LACP, 802.1ag"],[299,"Thêm vào đó, OpenvSwitch cũng được thiết kế để hỗ trợ phân phối trên nhiều server vật lý giống như VMware\u2019s vNetwork switch hay Cisco\u2019s Nexus 1000V"],[300,"OpenvSwitch được thiết kế để tạo ra một nền tảng chuyển mạch ảo chất lượng cao, nó sẽ hỗ trợ các chuẩn giao tiếp quản lý và cho phép phát triển chức năng chuyển mạch dựa trên lập trình"],[301,"OpenvSwitch là thiết bị chuyển mạch ảo trong môi trường VM"],[302,"OpenvSwitch hỗ trợ nhiều công nghệ ảo hóa nền tảng Linux bao gồm Xen/XenServer, KVM và Vitural Box"],[303,"Nền tảng mã nguồn của OpenvSwitch được viết trên nền tảng ngôn ngữ C và có thể dễ dàng kết nối với các môi trường khác"],[304,"Các tính năng của OpenvSwitch thể hiện qua Hình 2.6 mà cụ thể như sau: Kết nối liên VM thông qua NetFlow, sFlow(R), IPFIX, SPAN, và GRE-tuneled mirors"],[305,"VACP (IEEE 802.1AX-2008)"],[306,"Chuẩn 802.1Q VLAN với cổng trunk và cổng access"],[307,"BFD và 802.1ag theo dõi link"],[308,"STP (IEEE 802.1D-1998)"],[309,"Điều khiển QoS"],[310,"HFSC qdisc"],[311,"Điều khiển luồng dữ liệu"],[312,"NIC bonding với nguồn MAC load balancing, active backup, L4 hashing"],[313,"Hỗ trợ giao thức OpenFlow"],[314,"Hỗ trợ IPv6"],[315,"Các giao thức tunneling (GRE, VXLAN, IPsec, GRE và VXLAN over IPsec)"],[316,"Giao thức cấu hình từ xa với C và Python"],[317,"Kernel và user-space máy chuyển mạch"],[318,"Hỗ trợ nhiều bảng chuyển mạch song song với máy lưu trữ luồng dữ liệu"],[319,"Lớp chuyển mạch trừu tượng để tích hợp phần mềm mới và nền tảng phần cứng mới"],[320,"2.3.4 Các công cụ ảo hóa 2.3.4.1 Flowvisor FlowVisor[8][9] là một phần mềm tạo ra một lớp ảo hóa trung gian giữa phần mềm và phần cứng, cho phép tạo ra các mạng ảo \u2013 slice ảo trên nền phần cứng"],[321,"Mỗi một mạng ảo được điều khiển bằng một controller, ứng với một phần mềm, ứng dụng"],[322,"Hình 2.8 Ảo hóa FlowVisor Cũng giống như lớp ảo hóa trên máy tính, FlowVisor đúng giữa phần cứng và phần mềm để điều khiển chúng"],[323,"Và giống như hệ điều hành sử dụng các lệnh để điều khiển phần cứng phía dưới, FlowVisor sử dụng giao thức OpenFlow để điều khiển cơ sở hạ tầng mạng phía dưới"],[324,"FlowVisor sẽ là trung gian giữa nhiều OpenFlow controller, mỗi controller điều khiển 1 mạng ảo \u2013 1 slice, và mỗi controller sẽ điều khiển và nhìn thấy mạng ảo - slice của chính nó, trong khí đó, các mạng ảo - slice được biệt lập với các mạng ảo - slice khác"],[325,"Các đặc tính của FlowVisor: FlowVisor xác định mạng ảo - slice thông qua các flowspace"],[326,"FlowVisor nằm giữa OpenFlow controller và switch"],[327,"OpenFlow controller chỉ có thể nhìn và điều khiển switch trong slice của controller"],[328,"FlowVisor phân chia băng thông các link theo cách gán tốc độ dữ liệu tối thiểu tương ứng vào các slice (chức năng bị lỗi của FlowVisor)"],[329,"FlowVisor phân chia bảng flow ở mỗi switch theo cách đánh dấu mỗi dòng flow-entry thuộc controller nào"],[330,"Tóm lại, FlowVisor hoạt động như là OpenFlow proxy làm nhiệm vụ xử lý message từ Openflow controller trước khi đến Open-Flow enabled switch"],[331,"Để có thể ảo hóa được mạng, các tài nguyên có thể được phân chia theo các flowspace là: Băng thông: FlowVisor sẽ gắn mỗi slice tương ứng với một phần băng thông của link"],[332,"Đồ hình: Mỗi slice sẽ có một đồ hình mạng tương ứng bao gồm các switch và router được kết nối với nhau"],[333,"Đồ hình của slice sẽ là tập con của đồ hình vật lý"],[334,"Lưu lượng: Mỗi slice có thể được gắn với một luồng hoặc nhiều luồng khác nhau"],[335,"Mỗi luồng có thể định nghĩa bởi: địa chỉ Ethernet, địa chỉ IP, dịch vụ ví dụ http, telnet\u2026 CPU: Mỗi switch và router có tài nguyên tính toán, tài nguyên này cũng có thể được phân chia trong các slice"],[336,"Đối với slice có tốc độ xử lý CPU không phù hợp, slice đó có thể không xử lý kịp và làm mất gói tin trong quá trình truyền thông tin"],[337,"Bảng chuyển tiếp: Mỗi slice sẽ sở hữu một số lượng nhất định các entry trong bảng chuyển tiếp của switch và router"],[338,"2.3.4.2 VeRTIGo và ADVisor AdVisor & VeRTIGo[4] là phần mềm được xây dựng dựa trên mạng điều khiển bằng khả trình được thiết kế cho ảo hóa mạng"],[339,"AdVisor & VeRTIGo được xây dựng dựa trên FlowVisor bao gồm tất cả đặc tính của ảo hóa mạng: đặc biêt, AdVisor & VeRTIGo có thể tạo ra được một node ảo hóa và tạo ra được các link ảo giữa các node không có link vật lý kết nối trực tiếp"],[340,"Thực chất của tạo kết nối link ảo là luồng dữ liệu vẫn sẽ đi qua các link vật lý"],[341,"Khi đó, các tầng ứng dụng bên trên cũng như người dùng chỉ biết được rằng, đây là mạng full-connected tức là tất cả các nốt mạng đều được kết nối trực tiếp với nhau"],[342,"(Hình 2.9) Hình 2.9 Thể hiện hạ tầng vật lý và kết nối ảo Tác dụng của link ảo và nốt ảo trong ảo hóa mạng là rất lớn"],[343,"Như vậy, đối với một đồ hình bất kỳ, nhà cung cấp dịch vụ giờ đây có thể xây dựng những đồ hình bất kỳ cho khách hàng, khách hàng giờ đây chỉ phải tập trung vào phát triển các tầng ứng dung, các dịch vụ trên đồ hình đó"],[344,"Kết luận Tóm lại trong chương này tác giả đã trình bày một cách tổng quan về các công nghệ ảo hóa hiện nay, các công nghệ ảo hóa mạng được sử dụng, và đặc biệt là công nghệ ảo hóa mạng sử dụng công nghệ OpenFlow"],[345,"Cuối chương tác giả có trình bày các thành phần cấu thành nên hệ thống ảo hóa mạng sử dụng OpenFlow"],[346,"CHƯƠNG 3"],[347,"NGHIÊN CỨU THUẬT TOÁN ẢO HÓA MẠNG Trong chương này, đề cập đến việc nghiên cứu thuật toán Ảo hóa mạng được ứng dụng trong công nghệ Software Defined Networking"],[348,"Sau đó, tác giả sẽ nêu ra một số vấn đề còn tồn tại và đưa ra giải pháp để giải quyết các vấn đề đó"],[349,"3.1"],[350,"Tổng quan về thuật toán Ảo hóa mạng Trong công nghệ ảo hóa trên nền tảng SDN, để có thể tối đa được hiệu suất sử dụng tài nguyên vật lý, tối ưu về mặt năng lượng tiêu thụ yêu cầu cần phải giải quyết bài toán Ảo hóa mạng (Virtual Network Embedding[12][13] - VNE) để đưa ra phương án ảo hóa mạng trên cơ sở tài nguyên hiện có của hạ tầng mạng vật lý"],[351,"Tuy nhiên khi giải quyết các bài toán liên quan đến vẫn còn vấp phải rất nhiều khó khăn, bởi các lý do sau: Ràng buộc giữa nút và link[14]:Mỗi mạng ảo đều có yêu cầu sử dụng tài nguyên của mạng vật lý như tài nguyên của nút ảo bao gồm CPU, kích thước bộ nhớ, dung lượng bộ nhớ lưu trữ; tài nguyên về mặt băng thông của link ảo liên kết giữa các nút ảo cần phải được đáp ứng"],[352,"Ví dụ, để thử nghiệm các công nghệ mạng mới, các nhà nghiên cứu yêu cầu mạng thử nghiệm cần phải đảm bảo mỗi nút mạng cần có CPU có tần số 1GHz và 10 Mbps băng thông cho mỗi link"],[353,"Ngoài ra, các mạng ảo còn có thể có thêm các yêu cầu như vị trí của nút ảo trên hạ tầng mạng hay trễ truyền dẫn tối đa trên link"],[354,"Ví dụ như một công ty cung cấp dịch vụ về game yêu cầu các nút mạng cần phải được đặt ở các thành phố lớn, các link liên kết giữa chúng phải có trễ truyền dẫn nhỏ hơn 50 ms thì mới đảm bảo được chất lượng dịch vụ"],[355,"Chính do những điều kiện ràng buộc về nút và link như trên đã khiến cho Ảo hóa mạng trở thành một bài toán khó giải quyết, cần phải cân nhắc kĩ trước khi đưa ra quyết định ánh xạ một mạng ảo lên trên hạ tầng vật lý"],[356,"Kiểm soát việc chấp nhận mạng ảo mới: Trong trường hợp tài nguyên của mạng vật lý đã sử dụng hết, việc chấp nhận thêm các mạng ảo mới sẽ khiến cho tài nguyên của các mạng ảo đã có bị xâm phạm từ đó ảnh hưởng đến chất lượng dịch vụ của các mạng ảo đó, do đó các mạng ảo mới đến sẽ bị từ chối hoặc được đưa vào một hàng đợi để đảm bảo tài nguyên phục vụ cho các mạng ảo đã có hoặc chỉ chấp nhận thêm các yêu cầu mới trong trường hợp tài nguyên dự trữ của mạng được đưa ra sử dụng hoặc khi có mạng ảo nào đó ra khỏi mạng vật lý và giải phòng tài nguyên vật lý"],[357,"Các yêu cầu Online: Các nhà quản lý không thể dự đoán được các Virtual Network Request (VN Request) sẽ đến như thế nào"],[358,"Các VN Request có thể đến ngẫu nhiên và được ánh xạ vào mạng vật lý tại các thời điểm khác nhau và tồn tại trong các khoảng thời gian khác nhau"],[359,"Ví dụ như các nhà cung cấp dịch vụ có thể triển khai các dịch vụ mới bất cứ lúc nào, duy trì dịch vụ trong một khoảng thời gian bất kì hoặc bất cứ lúc nào cũng có thể tạm dừng dịch vụ trong nếu không thu được lợi nhuận"],[360,"Thực tế cho thấy, các thuật toán Ảo hóa mạng phải giải quyết các VN Request ngay khi chúng đến chứ không tích trữ các VN Request lại rồi mới giải quyết một lúc nhiều yêu cầu"],[361,"Các bài toán liên quan đến yêu cầu online tương đối khó giải quyết bởi các thuật toán Ảo hóa mạng không thể biết trước được khi nào các VNR sẽ đến và các VN Request có tính chất như nào, do đó không thể đưa ra một giải pháp nào tối ưu được trong mọi trường hợp"],[362,"Hình 3.1 Các VN Request được ánh xạ lên mạng vật lý Sự đa dạng của các VN Request: Các mạng ảo có thể có đồ hình mạng khác nhau"],[363,"Các nhà nghiên cứu có thể chạy các thử nghiệm với các đồ hình mạng khác nhau trên cùng một hạ tầng vật lý như ở Hình 3.1 để kiểm chứng rằng các giao thức của họ có thể chạy trên nhiều đồ hình mạng"],[364,"Hoặc các nhà cung cấp có thể tùy biến thay đổi đồ hình mạng để phù hợp với các ứng dụng dịch vụ khác nhau như đồ hình hub-and-spoke phù hợp với việc truy cập vào các Server trung tâm hay đồ hình dạng cây sẽ phù hợp với việc phân phối luồng video đến nhóm các người dùng"],[365,"Việc phải xử lý các mạng ảo với hình dạng khác nhau, trong khi vẫn phải đảm bảo được hiệu suất xử lý đem đến nhiều khó khăn cho việc tìm ra các giải thuật tối ưu cho quá trình Ảo hóa mạng"],[366,"Với cả bốn thuộc tính trên của bài toán Ảo hóa mạng khiến rất khó tìm ra phương án tối ưu nhất"],[367,"Tuy nhiên, trên thực tế, các bài toán ảo hóa mạng có thể đơn giản đi bằng cách bỏ qua một vài thuộc tính, điều kiện ràng buộc"],[368,"Ví dụ như ta có thể bỏ đi thuộc tính online của bài toán Ảo hóa mạng và xử lý các yêu cầu đến Offline, bằng cách này ta có thể nắm được tổng thể của tất cả các yêu cầu và đưa ra giải pháp tối ưu nhất"],[369,"Một bài toán VNE cần phải giải quyết vấn đề tài nguyên cho cả nút và link của các mạng ảo"],[370,"Vì thế, một bài toán VNE thường được chia thành hai bài toán nhỏ: bài toán Virtual Node Mapping sẽ giải quyết vấn đề tài nguyên cho các nút ảo và bài toán Virtual Link Mapping là bài toán sẽ đi tìm các đường trên mạng vật lý phù hợp với link ảo"],[371,"3.2"],[372,"Phân loại các bài toán Ảo hóa mạng Những vấn đề khó khăn gặp phải ở trên, tùy thuộc vào từng điều kiện, cách xử lý các yêu cầu mà chúng ta có thể chia bài toán Ảo hóa mạng thành nhiều dạng khác nhau"],[373,"Phần dưới đây sẽ trình bày về các loại thuật toán Ảo hóa mạng: Node Mapping và Link Mapping: Ngoài ra, một bài toán Ảo hóa mạng cần phải giải quyết vấn đề tài nguyên cho cả nút ảo và link ảo của các VN Request"],[374,"Node Mapping là bài toán được sử dụng để tìm ra cách ánh xạ các nút ảo lên trên các nút vật lý, trong khi đó Link Mapping là bài toán được sử dụng để tìm phép ánh xạ từ các link ảo lên đường vật lý kết nối hai nút vật lý được hai nút ảo nguồn và đích ánh xạ lên"],[375,"Các thuật toán ảo hóa mạng hiện tại đều hướng theo hướng tối ưu được hiệu suất sử dụng tài nguyên, tối ưu năng lượng tiêu thụ bằng cách tối ưu tài nguyên kết hợp cả Node Mapping và Link Mapping"],[376,"Thường thì nút mapping sẽ được thực hiện trước tiên ánh xạ các nút ảo vào nút vật lý sao cho thỏa mãn được các điều kiện của yêu cầu; sau đó link mapping mới được triển khai để tạo các kết nối link ảo giữa các nút ảo tương ứng"],[377,"Ngoài ra, trong các bài toán link mapping, chúng ta còn có thể chia thành hai loại chính là: Single-path Mapping và Multi-path Mapping"],[378,"Cả hai loại bài toán trên đều sử dụng các thuật toán định tuyến mạng để tìm các đường đi có thể có từ nút nguồn đến nút đích theo yêu cầu"],[379,"Với bài toán Link Mapping loại Single-path, mỗi yêu cầu sẽ chỉ được ánh xạ lên duy nhất một đường vật lý nếu đường vật lý đó có thể đáp ứng đủ lượng băng thông yêu cầu"],[380,"Khác với bài toán Single-path, các bài toán Multi-path có thể tách một yêu cầu thành các yêu cầu nhỏ rồi ánh xạ lên các đường vật lý nếu cần thiết"],[381,"Các thuật toán Multi-path tuy phức tạp hơn, nhưng lại có độ linh hoạt cao, có tỉ lệ chấp nhận cũng như khả năng tối ưu hiệu suất sử dụng tài nguyên cao hơn so với thuật toán Single-path"],[382,"Bài toán Mapping nối tiếp và Mapping song song: Trong bài toán Mapping nối tiếp, các yêu cầu sẽ được duyệt và ánh xạ lần lượt, từng yêu cầu lên mạng vật lý và chủ yếu sẽ theo tính chất đến trước phục vụ trước"],[383,"Mặt khác, ở bài toán Mapping song song, các yêu cầu sẽ được xét duyệt với cùng một mức độ ưu tiên như nhau"],[384,"Dễ dàng nhận ra rằng, các bài toán nối tiếp sẽ khó có thể tối ưu được về mặt tài nguyên, bù lại các bài toán này rất đơn giản để triển khai và phù hợp với việc xử lý các yêu cầu Online"],[385,"Bài toán Multi-path Mapping với khả năng tối ưu hiệu suất sử dụng tài nguyên cao, tuy nhiên khi có các yêu cầu đến thì phải duyệt lại toàn bộ các yêu cầu trong hệ thống nhằm đưa ra phương pháp ánh xạ với hiệu quả tốt nhất có thể"],[386,"Bài toán Động và bài toán Tĩnh: một bài toán ảo hóa mạng có thể là bài toán Tĩnh (trong trường hợp mạng vật lý không đổi) hoặc bài toán Động (trong điều kiện cả các mạng ảo và mạng vật lý đều thay đổi)"],[387,"Trên thực tế, bài toán ảo hóa mạng cũng sẽ giải quyết ngay các yêu cầu ngay khi chúng đến, ta có dạng bài toán Online, chứ không đưa vào hàng đợi rồi sau đó mới giải quyết tất cả, đây là bài toán Offline,\u2026 3.3"],[388,"Bài toán Ảo hóa mạng 3.3.1 Mạng vật lý Trong đồ án này, tác giả mô hình hóa mạng vật lý bằng cách sử dụng đồ thị vô hướng, có trọng số GS = (NS, LS)"],[389,"Trong đó NS là tập hợp các Nút vật lý và LS là tập hợp các link liên kết vật lý"],[390,"Mỗi nút vật lý nS ϵ NS đại điện cho một OpenFlow Switch trong mạng, mỗi nút vật lý sẽ có tương ứng một tài nguyên vật lý tính theo CPU Capacity c(nS)"],[391,"Mỗi link liên kết vật lý lS (xS, yS) ϵ LS kết nối giữa nút nguồn xS và nút đích yS sẽ có tài nguyên băng thông vật lý là b(lS)"],[392,"Gọi PS là tập hợp tất cả các đường vật lý giữa các cặp nút trong mạng, ta có PS(sS,dS) là tập hợp tất cả các đường vật lý từ nút nguồn sS đến nút đích dS"],[393,"Trong Hình 3.1 bên dưới, đồ hình mạng màu đen thể hiện Mạng vật lý, các ô hình chữ nhật bên cạnh các nút mạng thể hiện cho CPU Capacity của nút mạng đó"],[394,"Các nhãn trên các link liên kết tương ứng với băng thông hiện có của link đó"],[395,"Hình 3.2 Mạng vật lý và mạng ảo 3.3.2 Virtual Network Request Tương tự như mạng vật lý, tác giả cũng sử dụng đồ thị vô hướng có trọng số GV=(NV,LV) để thể hiện một VN Request"],[396,"Mỗi VN Request bản chất là mạng ảo, do yêu cầu của khác hàng đặt ra"],[397,"Một VN Request có NV là tập hợp các nút ảo, LV là tập hợp các link ảo"],[398,"Mỗi nút ảo nVϵ NV của VN Request yêu cầu tài nguyên vật lý là c(nV), mỗi link ảo sẽ có yêu cầu về mặt băng thông là b(lV)"],[399,"Các nút ảo trong một VN Request được liên kết với nhau bởi các Link ảo"],[400,"Hình 3.1 thể hiện hai VN Request trong bài toán VNE"],[401,"Các nút mạng và link liên kết trong đồ hình của VN Request đều là ảo"],[402,"Mỗi nút ảo có một khung hình chữ nhật bên cạnh thể hiện yêu cầu về CPU Capacity của nút ảo"],[403,"Mỗi link ảo cũng có nhãn tương ứng thể hiện yêu cầu về mặt băng thông của link ảo đó"],[404,"3.3.3 Tài nguyên của mạng Gọi tài nguyên chưa sử dụng của một nút vật lý nS ϵ NS là RN (nS), mà tài nguyên vật lý của Nút ở đây là CPU Capacity"],[405,"Do đó ta có: (3.1) Trong đó là chỉ tập hợp tất cả các Nút ảo nVϵ NV được ánh xạ vào nút vật lý nSϵ NS Tương tự như vậy, ta có tài nguyên chưa sử dụng của link vật lý lS ϵ LS là RL (lS), mà cụ thể tài nguyên của link ở đây là băng thông"],[406,"Ta có (3.2) Trong đó tập hợp tất cả các đường vật lý được các link ảo ánh xạ lên, và các đường vật lý này đều đi qua link vật lý lS"],[407,"Với mỗi một link ảo được ánh xạ lên các đường đi qua link vật lý như vậy, link vật lý sẽ phải tiêu tốn một lượng băng thông là b(lV) để phục vụ cho link ảo đó"],[408,"Ngoài ra, mỗi đường vật lý trong mạng có một đặc trưng là băng thông tối đa mà đường vật lý đó có thể cho một luồng lưu lượng đi qua"],[409,"Băng thông tối đa mà đường vật lý có thể đáp ứng được chính bằng băng thông nhỏ nhất của các Link vật lý nằm trên đường vật lý đó: RP (P) = (3.3) 3.3.4 Phân bố tài nguyên cho các mạng ảo Khi có một VN Request đến, chúng ta cần phải xác định xem nên chấp nhận hay từ chối VN Request đó"],[410,"Nếu VN Request đó được chấp nhận, chúng ta cần phải ánh xạ Request đó vào mạng vật lý sao cho mạng vật lý có thể đáp ứng được tất cả các yêu cầu về mặt tài nguyên của VN Request"],[411,"Trong trường hợp, mạng vật lý không có đủ tài nguyên để đáp ứng yêu cầu của VN Request thì chúng ta cần phải từ chối, không xử lý VN Request đó để tránh ảnh hưởng tới các VN Request đang được ánh xạ vào hạ tầng mạng"],[412,"Như đã đề cập ở phần trên, việc ánh xạ các VN Request vào mạng vật lý có thể được chia thành 2 bài toán chính: Node Mapping: Ánh xạ các nút ảo vào nút vật lý"],[413,"Link Mapping: Ánh xạ các link ảo lên các đường vật lý"],[414,"3.3.4.1 Node Mapping Mỗi VN Request do nhiều Demand tạo thành"],[415,"Mỗi Demand được cấu thành từ 2 nút ảo nguồn, đích và một link ảo liên kết giữa hai nút ảo đó"],[416,"Các nút ảo trong cùng một Demand phải nằm ở các nút vật lý khác nhau"],[417,"Node Mapping được sử dụng để đưa ra cách ánh xạ một nút ảo trong Demand vào một nút vật lý nào đó sao cho thỏa mãn được yêu cầu về mặt CPU Capacity của Node ảo trong Demand đó"],[418,"Sau khi giải quyết bài toán Node mapping ta sẽ có tập các ánh xạ giữa tập các Nút ảo NV và tập các Nút vật lý NS"],[419,"(3.4) Mỗi một nút ảo chỉ có thể thuộc một nút vật lý, nhưng mỗi nút vật lý lại có thể chứa nhiều nút ảo Ta gọi MN là tập hợp các ánh xạ từ NV vào NS MN= NV→NS | nVϵNV (3.5) Điều kiện ràng buộc: Điều kiện ràng buộc trên chỉ rõ, tài nguyên CPU của nút vật lý luôn phải lớn hơn hoặc bằng tổng yêu cầu về CPU Capacity của tất cả các nút ảo được ánh xạ vào nút vật lý đó"],[420,"3.3.4.2 Link Mapping Giải bài toán Link Mapping đồng nghĩa với việc đi tìm lời giải cho việc ánh xạ các Link ảo lên trên hạ tầng mạng vật lý sao cho đảm bảo đáp ứng được yêu cầu về mặt băng thông của link ảo đó"],[421,"Mỗi Link ảo sẽ được ánh xạ lên một đường vật lý (Single-path) hoặc nhiều đường vật lý (Multi-Path) để có thể đáp ứng được băng thông yêu cầu giữa hai nút ảo tương ứng"],[422,"Gọi ML là tập hợp các ánh xạ từ các link ảo LV vào các đường vật lý PS, ta có: ML= LV→PS | Vϵ LV (3.7) ML (V(xV,yV)) PS(MN(xV),MN(yV)) (3.8) Trong đó MN(nV) là nút vật lý mà nút ảo nV được ánh xạ vào Điều kiện ràng buộc: RP (pS) ≥ b(lV(xV,yV)) | lV(xV,yV)→pS (3.9) 3.3.5 Tải lưu lượng yêu cầu 3.3.5.1 Tài nguyên của mạng vật lý Tài nguyên của link: Được tính bằng tổng băng thông vật lý của tất cả các link trong Mạng vật lý"],[423,"Tài nguyên của nút: Được tính bằng tổng Capacity vật lý của tất cả các nút trong mạng vật lý"],[424,"3.3.5.2 Tải lưu lượng Mỗi VN Request do khách hàng đưa ra đều sẽ có một tải nhất định so với mạng vật lý, tải này phụ thuộc vào yêu cầu về CPU Capacity của nút ảo và băng thông yêu cầu của Link ảo trong VN Request đó"],[425,"Ở đây tác giả đưa ra cách tính tải của một VN Request VNRi theo công thức: Trong đó: là tải lưu lượng của VN Request thứ i"],[426,"là hệ số của nút và link trong công thức, mặc định =1 c(xV) , c(yV) lần lượt là yêu cầu về CPU Capacity của nút ảo nguồn xV và nút ảo đích yV của Demand đó"],[427,"b(lv) là băng thông yêu cầu của link ảo lv giữa 2 nút ảo"],[428,"là tổng tài nguyên của nút vật lý trong mạng"],[429,"là tổng tài nguyên của link vật lý trong mạng"],[430,"Mỗi VN Request là một tập hợp gồm các Demand, do đó tải lưu lượng của một VN Request chính bằng tổng tải lưu lượng của các Demand trong VN Request ảo đó"],[431,"Ví dụ: một Demand có dạng dưới đây <xV> <c(xV)> <yV> <c(yV)> <b(l(xV, yV))> <VN Request> a 500 b 30 40 VN1 Giả sử: Một nút vật lý có Capacity là 100 đơn vị CPU và một link vật lý có Băng thông là 1000 Mbps"],[432,"Ở trên là một Demand yêu cầu 1 Link ảo [xV yV] có yêu cầu về mặt băng thông là 500 Mbps, ở 2 đầu link là 2 nút ảo xV,yV với xV yêu cầu một CPU capacity là 30 đơn vị và yV yêu cầu là 40 đơn vị"],[433,"3.4"],[434,"Kết luận Như vậy, sau khi tìm hiểu tổng quan về bài toán Ảo hóa mạng \u2013 Virtual Network Embedding, tác giả đã mô hình hóa bài toán thể có thể giải quyết bài toán ở chương sau"],[435,"Chương sau sẽ trình bày các thuật toán Ảo hóa mạng dựa trên mô hình đã đưa ra ở phần này"],[436,"CHƯƠNG 4"],[437,"XÂY DỰNG CÁC THUẬT TOÁN ẢO HÓA MẠNG Từ mô hình mạng đã được triển khai ở chương trước, chương 4 đề cập đến ý tưởng xây dựng các thuật toán Node Mapping và Link Mapping"],[438,"Các thuật toán này tập trung vào việc nâng cao tỉ lệ chấp nhận của các VN Request, đồng thời tối ưu hiệu suất sử dụng tài nguyên trong mạng"],[439,"1"],[440,"Thuật toán Node Mapping 4.1.1 Ý tưởng thuật toán Ở thuật toán Node Mapping, ý tưởng của tác giả là sẽ sắp xếp các nút vật lý dựa trên số lượng hàng xóm của chúng, nút nào có nhiều hàng xóm chứng tỏ sẽ có nhiều link kết nối đến các nút khác trong mạng, điều này sẽ tạo điều kiện thuận lợi cho việc triển khai Link Mapping, tránh được hiện tượng link ảo phải ánh xạ sử dụng nút ẩn, tối ưu được tài nguyên"],[441,"Do vậy, trong thuật toán Node Mapping, tác giả sẽ xếp hạng các nút theo số lượng hàng xóm mà nút đó có; các nút có xếp hạng cao sẽ được ưu tiên để xử lý trước"],[442,"4.1.2 Mã giả thuật toán 4.1.2.1 Hàm NeiNR Bảng 4.1 Mã giả thuật toán NeiNR Algorithm 1: Node rank \u2013 NeiNR 1"],[443,"procedure: NeiNR(N) 2"],[444,"repeat 3"],[445,"Sắp xếp theo |Nnei(n)| giảm dần, nϵN 4"],[446,"if |Nnei(m)|=|Nnei(n)| m,nϵ N then 5"],[447,"Sắp xếp theo c(n) giảm dần 6"],[448,"if c(m)=c(n), m,nϵN then Sắp xếp theo giảm dần 7"],[449,"end if 8"],[450,"end if 9"],[451,"until N được sắp xếp giảm dần 10"],[452,"end procedure"],[453,"4.1.2.2 Thuật toán Node Mapping NeiHEE Bảng 4.2 Mã giả thuật toán NeiHEE Algorithm 2: NeiHEE VNE node mapping 1"],[454,"Input: NS, NV và VNR 2"],[455,"Begin: 3"],[456,"if NV=Ø or NV=Ø then 4"],[457,"KẾT THÚC 5"],[458,"else //Sắp xếp các VNR theo nút đầu tiên trong NeiNR() | Ni ϵ VNRi 6"],[459,"VNR←sort(VNR) 7"],[460,"NeiNR(NS) 8"],[461,"Bật nút nS←pop(NS), =+nS, \\nS 9"],[462,"for all VNRi in VNR do 10"],[463,"NeiNR() | nVϵ, in VNRi 11"],[464,"for all nV in NiV do 12"],[465,"for all nS in NS do 13"],[466,"if Nnei(nV)∩Nvir(nS)≠Ø then 14"],[467,"continue 15"],[468,"else if nS chưa bật and Nnei(nS)∩ =Ø then 16"],[469,"continue 17"],[470,"else Bật nS, =+nS, \\nS 18"],[471,"end if 19"],[472,"if c(nV) ≤ RN(nS) then 20"],[473,"Nvir(nS)+nV 21"],[474,"RN(nS)=RN(nS)-c(nv) 22"],[475,"KẾT THÚC 23"],[476,"end if 24"],[477,"end for 25"],[478,"end for 26"],[479,"NeiNR() 27"],[480,"NS=+ 28"],[481,"end for 29"],[482,"end if 30"],[483,"KẾT THÚC 31"],[484,"output: NS,Nvir(NS)"],[485,"4.1.3 Mô tả chi tiết thuật toán 4.1.3.1 Hàm NeiNR Như đã trình bày ở phần ý tưởng thuật toán, đầu tiên tác giả sẽ xây dựng hàm có chức năng xếp hạng nút NeiNR để xếp hạng các nút theo tiêu chí đã đề ra trước đó"],[486,"Đầu vào của NeiNR là tập các nút chưa được xếp hạng"],[487,"Gọi Nnei(n) là tập các hàng xóm của nút n, là tổng băng thông hiện có của tất cả các link kết nối đến nút n"],[488,"Hàm NeiNR đầu tiên sẽ sắp xếp các nút trong tập N theo số lượng hàng xóm giảm dần; trong trường hợp các nút m,n có cùng số hàng xóm thì nút nào có CPU Capacity cao hơn sẽ được xếp hạng cao hơn; trường hợp hai nút có CPU Capacity bằng nhau thì ta sẽ ưu tiên nút có lớn hơn được xếp hạng cao hơn"],[489,"4.3.1.2 Thuật toán Node Mapping NeiHEE Thuật toán NeiHEE là thuật toán ảo hóa mạng tập trung chủ yếu vào việc nâng cao tỉ lệ chấp nhận, giảm tối thiểu các nút ẩn trên hạ tầng vật lý sau khi ánh xạ các nút ảo lên trên các nút vật lý"],[490,"Đầu vào của thuật toán là NS, NV và VNR, thuật toán sẽ kết thúc ngay lập tức nếu một trong hai tập NS hoặc NV rỗng"],[491,"Để bắt đầu quá trình ánh xạ nút ảo vào nút vật lý, thuật toán sẽ bật nút vật lý nS đầu tiên trong tập NS lên trước, đây là nút vật lý được xếp hạng cao nhất, đồng thời nút đó sẽ được chuyển từ tập các nút tắt sang tập các nút đã bật"],[492,"Với mỗi VN Request, thuật toán sẽ xếp hạng tất cả các nút ảo trong VN Request đó sử dụng hàm NeiNR"],[493,"Với mỗi nút ảo nV, ta cần phải tìm ra một nút vật lý phù hợp nhất để ánh xạ lên"],[494,"Dòng 13 là điều kiện để đảm bảo hai nút ảo là hàng xóm của nhau không được ánh xạ vào cũng một nút vật lý, trong đó Nvir(nS) là tập hợp các nút ảo được ánh xạ lên nút vật lý nS"],[495,"Một nút ảo nV chỉ được ánh xạ lên nút vật lý nS khi và chỉ khi c(nV)≤c(nS) (dòng 19)"],[496,"Để tối ưu được tài nguyên, tối thiểu được số nút ẩn trong mạng vật lý thì vấn đề đặt ra là số nút cần bật phải nhỏ nhất có thể"],[497,"Do đó, thuật toán NeiHEE sẽ duyệt các nút đã bật trước để tìm nút vật lý cho nút ảo ánh xạ lên; trường hợp duyệt hết các nút trong mà vẫn chưa tìm ra nút vật lý phù hợp thì thuật toán sẽ bật một nút mới lên"],[498,"Để đảm bảo tối thiểu được số nút ẩn phải sử dụng, thuật toán sẽ chỉ bật một nút khi nút đó có ít nhất một hàng xóm đã được bật (dòng 15, 17)"],[499,"Cùng với đó, sau khi xử lý xong một VNR, thuật toán sẽ sử dụng hàm NeiNR để xếp hạng lại các nút đã bật, cập nhật lại tài nguyên, trạng thái của các nút vật lý trong mạng"],[500,"Thuật toán sẽ kết thúc sau khi duyệt xong hết tất cả các VN Request và đưa ra kết quả là trạng thái của các nút vật lý, tập ánh xạ của các nút ảo lên hạ tầng vật lý (dòng 31)"],[501,"1"],[502,"Thuật toán Link Mapping 4.2.1 Ý tưởng thuật toán Ở phần này, tác giả sẽ trình bày về thuật toán Link Mapping, tác giả tiến hành xây dựng thuật toán B-Mapping nhằm nâng cao tỉ lệ chấp nhận các VNR, tối ưu tài nguyên sử dụng sau khi ánh xạ các link ảo lên trên các đường vật lý"],[503,"Trong thuật toán này, tác giả sử dụng khái niệm \u201cnút thắt cổ chai\u201d, đây là link có khả năng cạn kiệt tài nguyên nhiều nhất trong quá trình ánh xạ"],[504,"Khi xác định được link này, thuật toán sẽ tìm cách tránh link đó ra để hạn chế tối thiểu số link bị cạn kiệt tài nguyên băng thông trong mạng"],[505,"4.2.2 Mã giả thuật toán Bảng 4.3 Mã giả thuật toán B-Mapping Algorithm 3: B-Mapping Algorithm 1"],[506,"Input: GS=(NS,ES), GV=(NV,EV) 2"],[507,"repeat 3"],[508,"= BFS(GS,GV) 4"],[509,"for all eV in EV do 5"],[510,"if (eV)= Ø 6"],[511,"reject eV 7"],[512,"else GS←map (GS,) 8"],[513,"end if 9"],[514,"end for 10"],[515,"eb = max [η(ES)] // eb là link \u201cnút thắt cổ chai\u201d //Sắp xếp EV theo băng thông tăng dần 11"],[516,"EV←sort(EV) 12"],[517,"P=(EV) 13"],[518,"if {eS ϵ p | p ϵ P} then 14"],[519,"P=P/p 15"],[520,"end if 16"],[521,"if P=Ø then 17"],[522,"P=(EV) 18"],[523,"end if 19"],[524,"for all p in P do 20"],[525,"eV= getVirtualLink(p) 21"],[526,"if cV ≤ RP(P) then 22"],[527,"ML=ML+{c(eV), p} 23"],[528,"RE(eS)=RE(eS) \u2013 cV eS ϵ p 24"],[529,"GV=GV\\eV 25"],[530,"else 26"],[531,"ML=ML+{RP(p),p} 27"],[532,"c(eV) = c(eV) \u2013 RP(p); 28"],[533,"RE(eS)=RE(eS) - RP(p) eS ϵ p 29"],[534,"end if 30"],[535,"end for 31"],[536,"until GV=Ø 32"],[537,"output: ML, GS"],[538,"4.2.3 Mô tả chi tiết thuật toán Hầu hết các thuật toán Link Mapping hiện tại đều là thuật toán ánh xạ nối tiếp, có nghĩa là các demand được xử lý từng cái một"],[539,"Tác giả đưa ra thuật toán B-Mapping có cách xử lý khác với các thuật toán đã có, ánh xạ song song"],[540,"Trong thuật toán này, tất cả các demand sẽ được duyệt cùng một lúc, sau đó mới quyết định xem demand nào sẽ được xử lý trước, do có sự xét duyệt cẩn thận như vậy nên các thuật toán ánh xạ song song thường có tỉ lệ chấp nhận và hiệu suất sử dụng tài nguyên cao hơn các thuật toán ánh xạ nối tiếp"],[541,"CHƯƠNG 5"],[542,"KẾT QUẢ ĐẠT ĐƯỢC VÀ ĐÁNH GIÁ Chương 5 sẽ trình bày cách thức kiểm thử, đánh giá các thuật toán ảo hóa mạng như đã trình bày ở chương 4"],[543,"Đồng thời cũng đưa ra số liệu đo được giúp đánh giá, so sánh các thuật toán ảo hóa mạng theo các tiêu chí như tỉ lệ chấp nhận, hiệu suất sử dụng tài nguyên, \u2026 1"],[544,"Framework Ở phần này, tác giả sẽ trình bày về Framework mới mà tác giả đã xây dựng cho phép đánh giá và so sánh hiệu năng hoạt động của các thuật toán ảo hóa mạng khác nhau"],[545,"Hình 5.1 Tiến trình hoạt động của Framework Hình 5.1 mô tả các bước trong tiến trình hoạt động của Framework mà tác giả xây dựng nên"],[546,"Ở bước đầu tiên, người sử dụng có thể tạo ra mạng vật lý với các tham số tương ứng với tài nguyên của mạng vật lý như băng thông của link, CPU capacity của nút mạng"],[547,"Bên cạnh đó, Framework này còn cho phép người dùng có thể sinh ra các đồ hình mạng tự động sử dụng thuật toán Waxman bằng cách đưa vào số lượng nút"],[548,"Phương trình dưới đấy được sử dụng trong thuật toán Waxman nhằm xác định xác suất có link kết nối giữa hai nút u, v: (5.1) Trong phương trình trên, giá trị của α, β nằm trong khoảng (0, 1]; d là khoảng cách giữa hai nút vật lý u và v trong hệ thống mạng, L đại diện cho khoảng cách tối đa giữa hai nút trong đồ hình mạng"],[549,"Khi giá trị của α càng lớn thì khả năng có link kết nối giữa hai nút trong đồ hình mạng càng cao, β càng tăng thì khả năng có link giữa hai nút nằm xa nhau càng tăng"],[550,"Ở bước thứ hai, các VN Request sẽ được sinh ra ngẫu nhiên theo các tỉ lệ lưu lượng yêu cầu"],[551,"Tỉ lệ lưu lượng yêu cầu là tỉ số giữa băng thông yêu cầu của link ảo và tổng băng thông của tất cả các link vật lý"],[552,"Sau bước này, cả hạ tầng mạng vật lý và các VN Request đều sẽ được lưu trữ trong cơ sở dữ liệu của Framework"],[553,"Sau đó, các thuật toán ảo hóa mạng sẽ có thể sử dụng cùng một dữ liệu về mạng vât lý và các VN Request lưu trong cơ sở dữ liệu để xử lý, kết quả đầu ra sẽ tùy thuộc vào cách xử lý của thuật toán"],[554,"Cuối cùng, các kết quả thu được từ các thuật toán sẽ được tổng hợp, thống kê lại để người dùng có thể đánh giá được hiệu năng của các thuật toán ảo hóa"],[555,"Các dữ liệu được thống kê thường sẽ là tỉ lệ chấp nhận VN Request, tài nguyên chưa sử dụng, thời gian xử lý, năng lượng tiêu thụ, \u2026 Hình 5.2 thể hiện kiến trúc Framework mà tác giả đưa ra, kiến trúc này được cấu thành từ các khối cụ thể như sau: Hình 5.2 Kiến trúc Framework Mô đun mạng: bao gồm hai khối chính là Mạng vật lý và VN Request"],[556,"Khối mạng vật lý cho phép người dùng tạo ra hạ tầng mạng vật lý bằng cách nhập vào các tham số đầu vào"],[557,"Mô đun này cũng đưa ra giao diện cho phép người dùng có thể sinh ra đồ hình mạng bằng các Mô đun con hoặc là quản lý, phân bố tài nguyên cho mạng vật tý"],[558,"Khối VN Request được sử dụng để quản lý các VN Request"],[559,"Mô đun kịch bản: Mô đun này nhận các tham số cài đặt kịch bản từ Controller do người dùng nhập vào, rồi sử dụng các tham số đó tự động thiết lập mạng vật lý, VN Request từ các tham số đó"],[560,"Mô đun đánh giá: Mô đun này thống kê các số liệu đo được và đưa ra kết quả dưới dạng để người dùng có thể đánh giá hiệu năng của thuật toán"],[561,"Mô đun nhúng: Mô đun này có chức năng chính là thực hiện các thuật toán Node Mapping và Link Mapping do người dùng thêm vào"],[562,"Bộ điều khiển: là khối điều khiển chính của kiến trúc này"],[563,"Mô đun này được tích hợp và phát triển thêm giao diện đồ họa cho phép người dùng có thể điều khiển toàn bộ hoạt động của Framework như ở trong Hình 5.3 Người dùng có thể dễ dàng sử dụng các loại kịch bản, các thuật toán khác nhau tùy theo nhu cầu"],[564,"- Cơ sở dữ liệu: Lưu trữ dữ liệu về đồ hình mạng, tài nguyên, các mạng ảo,\u2026 Hình 5.3 Giao diện đồ họa của Framework 1"],[565,"Kết quả thu được 5.2.1 Phương pháp đánh giá Sử dụng Framework đã xây dựng ở trên, tác giả đã tích hợp các thuật toán Node Mapping và Link Mapping mà tác giả đã xây dựng được; cùng với đó tác giả cũng tích hợp thêm các thuật toán có sẵn để có thể so sánh các thuật toán về mặt hiệu năng, tối ưu tài nguyên, từ đó chọn ra thuật toán phù hợp nhất với nhu cầu sử dụng"],[566,"Các thuật toán tích hợp thêm: 5.2.1"]],"downloaded":true,"m":[-1,-1],"n":"Xây dựng thuật toán Ảo hóa mạng trên nền tảng  Software Defined Networking.txt","o":"Đồ án tốt nghiệp | 2015\t\tKim Bảo Long | K55"},{"saved_path":"temp/ccna_ca_n_ba_n_bach_khoa_aptech_5241.txt","r":0,"s":[],"t":"\n\n \n\nPhòng Chuyên môn Bachkhoa-Aptech \nHÀ NỘI 5/2016 | VERSION 1.0 \n\nCCNA CƠ BẢN \nLƯU HÀNH NỘI BỘ \n\n \n  \n\n\n\n \n\n1 \nLưu hành nội bộ \n\n \nMục lục \n\nChương I : Mạng cơ bản .............................................................................................................. 8 \n1.1 Mạng (Network) ............................................................................................................ 8 \n1.2 Mạng nội bộ (Local Area Network \u2013 LAN).................................................................. 8 \n1.3 Mạng diện rộng (Wide Area Network \u2013 WAN)............................................................ 9 \n1.4 Mạng đô thị (Metro-politan Area Network \u2013 MAN) .................................................... 9 \n1.5 Mạng cá nhân (Personal Area Network - PAN).......................................................... 10 \n1.6 Internet ........................................................................................................................ 10 \n1.7 Những kích thước hệ thống mạng ............................................................................... 10 \n1.8 Thiết bị chuyển mạch Cisco (Switch Cisco) ............................................................... 11 \n1.9 Thiết bị mạng không dây (Wireless Access Point) ..................................................... 11 \n1.10 Thiết bị định tuyến Cisco (Router Cisco) ................................................................... 11 \n1.11 Thiết bị tường lửa Cisco (Firewall Cisco) .................................................................. 11 \n1.12 Điện thoại sử dụng địa chỉ IP/ thiết bị thoại (IP phone/ Voice Devices) .................... 12 \n1.13 Thiết bị mạng kết nối trong gia đình ........................................................................... 13 \n1.14 Giới thiệu về Cisco ...................................................................................................... 13 \n1.15 Các cấp bậc chứng chỉ của Cisco ................................................................................ 13 \n1.16 Thi chứng chỉ CCNA Cisco ........................................................................................ 14 \n1.17 Những nội dung mới trong CCNA 200-120 ............................................................... 14 \n\nChương II: TCP/IP ..................................................................................................................... 16 \n2.1 Giao thức (protocol) .................................................................................................... 16 \n2.2 TCP/IP là gì ................................................................................................................. 16 \n2.3 Địa chỉ TCP/IP ............................................................................................................ 16 \n2.4 Địa chỉ IPv4 ................................................................................................................ 16 \n2.5 Bảng chuyển đổi từ hệ Nhị Phân sang hệ Thập Phân ................................................. 17 \n2.6 Bảng chuyển đổi từ hệ Thập Phân sang hệ Nhị Phân ................................................. 17 \n2.7 Gán một địa chỉ IP tĩnh cho máy vi tính ..................................................................... 18 \n2.8 Gán địa chỉ IPv4 động cho 1 Host .............................................................................. 19 \n2.9 Phạm vi khả dụng của IPv4 ......................................................................................... 20 \n2.10 Các lớp địa chỉ IP (IP Address Classification) ............................................................ 20 \n2.11 Phần Mạng và Host ..................................................................................................... 20 \n\n\n\n \n\n2 \nLưu hành nội bộ \n\n2.12 Mạng và địa chỉ Broadcast .......................................................................................... 20 \n2.13 Subnet \u2013 mask ............................................................................................................. 21 \n2.14 Địa chỉ riêng (Reserved Address) ............................................................................... 21 \n2.15 127.x.x.x \u2013 địa chỉ Loopback ...................................................................................... 21 \n2.16 Địa chỉ IP Private/ IP Public ....................................................................................... 22 \n2.17 Địa chỉ cá nhân (Private IP Address) .......................................................................... 22 \n2.18 Phân bổ địa chỉ IP ....................................................................................................... 23 \n2.19 Mạng con (subnetting) ................................................................................................ 23 \n2.20 FLSM và VLSM ......................................................................................................... 23 \n2.21 Ví dụ về VLSM ........................................................................................................... 24 \n2.22 Một vài ví dụ về VLSM .............................................................................................. 25 \n2.23 Những câu hỏi về Mạng con (Subnet) ........................................................................ 27 \n2.24 Các phương thức kết nối ............................................................................................. 27 \n2.25 Unicast......................................................................................................................... 27 \n2.26 Broadcast ..................................................................................................................... 28 \n2.27 Multicast ...................................................................................................................... 28 \n2.28 Giới thiệu về thiết bị định tuyến (Router) và thiết bị chuyển mạch (Switch) ............. 29 \n2.29 Các phương tiện truyền thông ..................................................................................... 29 \n2.30 Cáp xoắn đôi \u2013 UTP (Unshielded Twisted Pair ) ........................................................ 29 \n2.31 Cáp thẳng và cáp chéo................................................................................................. 30 \n2.32 Cáp đồng trục  (Co-axial cable) .................................................................................. 31 \n2.33 Cáp quang (Fiber cables) ............................................................................................ 31 \n2.34 Mạng LAN không dây (Wireless LAN) ..................................................................... 32 \n2.35 Thiết lập một mạng LAN cơ bản sử dụng Cisco Packet Tracer ................................. 32 \n2.36 Router (thiết bị định tuyến) ......................................................................................... 33 \n2.37 Các hãng sản xuất thiết bị định tuyến ( Router ) ......................................................... 33 \n2.38 Phân biệt thiết bị Cisco và phạm vi sử dụng ............................................................... 33 \n2.39 Access Layer Router ................................................................................................... 34 \n2.40 Distribution Layer Router ........................................................................................... 35 \n2.41 Core Layer Router ....................................................................................................... 35 \n2.42 Phân loại Router .......................................................................................................... 36 \n2.43 Các cổng kết nối ra bên ngoài của Router : LAN, WAN, Admin ports...................... 36 \n2.44 Cổng LAN \u2013 cổng WAN............................................................................................. 36 \n\n\n\n \n\n3 \nLưu hành nội bộ \n\n2.45 Cổng Console (Console port) ...................................................................................... 37 \n2.46 Cổng kết nối phụ (Auxiliary Port ................................................................................ 37 \n2.47 AUI (Attachment Unit Interface) ................................................................................ 38 \n2.48 Các cổng kết nối ra ngoài của router (tiếp) ................................................................. 39 \n2.49 Các thành phần của Router ......................................................................................... 39 \n\nChương III : Những câu lệnh cơ bản (Basic Commands) ....................................................... 41 \n3.1 Kết nối Console ........................................................................................................... 41 \n3.2 Các chế độ (Mode) trên Router Cisco ......................................................................... 43 \n3.3 Đặt password cho các kết nối ...................................................................................... 46 \n3.4 Cấu hình password cho Router ................................................................................... 46 \n3.5 Mã hóa mật khẩu ......................................................................................................... 47 \n3.6 Lưu cấu hình đã thực hiện cho Router ........................................................................ 47 \n3.7 Xóa cấu hình đã thiết lập trên Router ......................................................................... 47 \n3.8 Banner ......................................................................................................................... 48 \n3.9 Kết nối điểm \u2013 điểm sử dụng cable Serial .................................................................. 48 \n3.10 Những luật lưu ý khi thiết lập địa chỉ IP cho Router .................................................. 49 \n3.11 Gán địa chỉ IP cho Router ........................................................................................... 49 \n3.12 Lab : câu lệnh cơ bản trên Router ............................................................................... 50 \n3.13 Cable kết nối RJ45 ...................................................................................................... 53 \n\nChương IV: Định tuyến (Routing) ............................................................................................. 54 \n4.1 Định tuyến ................................................................................................................... 54 \n4.2 Các phương pháp định tuyến ...................................................................................... 54 \n4.3 Định tuyến tĩnh (Static Routing) ................................................................................. 54 \n4.4 Cấu hình định tuyến tĩnh ............................................................................................. 55 \n4.5 Default Route .............................................................................................................. 56 \n4.6 Triển khai phương pháp Default Route ....................................................................... 57 \n\nChương V: Định tuyến động (Dynamic Routing) .................................................................... 60 \n5.1 Định tuyến động (Dynamic Routing) .......................................................................... 60 \n5.2 Các giao thức định tuyến động .................................................................................... 60 \n5.3 Giao thức Classfull ...................................................................................................... 60 \n5.4 Giao thức Classless ..................................................................................................... 61 \n5.5 RIP (Routing Information Protocol) ........................................................................... 61 \n5.6 Rip Timers ................................................................................................................... 61 \n\n\n\n \n\n4 \nLưu hành nội bộ \n\n5.7 So sánh Ripv1 và Ripv2 .............................................................................................. 61 \n5.8 Ưu điểm của giao thức RIP ......................................................................................... 62 \n5.9 Nhược điểm của giao thức RIP ................................................................................... 62 \n5.10 Bài Lab : cấu hình giao thức định tuyến Ripv1 .......................................................... 62 \n5.11 Cấu hình RIPv2 ........................................................................................................... 64 \n5.12 Administrative Distance .............................................................................................. 68 \n5.13 Autonomous System - AS ........................................................................................... 68 \n5.14 Phân loại giao thức định tuyến động ........................................................................... 69 \n5.15 Giao thức EIGRP (Enhanced Interior Gateway Routing Protocol) ............................ 69 \n5.16 Bảng thông tin EIGRP : .............................................................................................. 70 \n5.17 Chỉ số Metric của EIGRP ............................................................................................ 70 \n5.18 Bài lab : cấu hình giao thức EIGRP ............................................................................ 71 \n5.19 OSPF \u2013 Open Shortest Path First ................................................................................ 76 \n5.20 Thiết lập truyền thông hai chiều trong OSPF ............................................................. 77 \n5.21 Khám phá thông tin các dải địa chỉ trong mạng.......................................................... 78 \n5.22 Router-ID .................................................................................................................... 78 \n5.23 Thêm một Entries trạng thái đường Link .................................................................... 78 \n5.24 OSPF tables ................................................................................................................. 79 \n5.25 Các vùng OSPF (OSPF Areas) ................................................................................... 79 \n5.26 Những vấn đề có thể xảy ra trong quá trình duy trì mạng lưới OSPF ........................ 79 \n5.27 Giải pháp : phân cấp định tuyến trong OSPF .............................................................. 80 \n5.28 Các vùng trong OSPF (OSPF Areas) .......................................................................... 80 \n5.29 Ưu điểm của giao thức OSPF ...................................................................................... 81 \n5.30 Nhược điểm của giao thức OSPF ................................................................................ 81 \n5.31 Bài Lab : OSPF đơn vùng (1 area ) ............................................................................. 81 \n5.32 Bài lab : OSPF đa vùng ............................................................................................... 85 \n\nChương VI: Access Control List ................................................................................................ 89 \n6.1 Access Control List (ACL) \u2013 kiểm soát truy cập ........................................................ 89 \n6.2 Các dạng Access-list ................................................................................................... 89 \n6.3 Bài lab : cơ bản Access-list ......................................................................................... 90 \n6.4 Bài lab : Access-list nâng cao ..................................................................................... 91 \n6.5 Named Access-list ....................................................................................................... 92 \n6.6 Bài Lab : Named ACL ................................................................................................ 92 \n\n\n\n \n\n5 \nLưu hành nội bộ \n\nChương VII: NAT ....................................................................................................................... 94 \n7.1 NAT (Network address translation) ............................................................................ 94 \n7.2 Dải địa chỉ IP Private .................................................................................................. 94 \n7.3 Các dạng cơ bản của NAT .......................................................................................... 94 \n7.4 Static NAT .................................................................................................................. 94 \n7.5 Dynamic NAT ............................................................................................................. 95 \n7.6 Port Address Translasion (Dynamic Nat Overload) ................................................... 95 \n7.7 Bài Lab : Static NAT................................................................................................... 96 \n7.8 Bài Lab : Dynamic NAT ............................................................................................. 97 \n7.9 Bài Lab : Port Address Translation ............................................................................. 98 \n\nChương VIII: Chuyển mạch .................................................................................................... 100 \n8.1 Router & Switch ........................................................................................................ 100 \n8.2 Phân biệt giữa Hub và Switch ................................................................................... 100 \n8.3 Cơ chế hoạt động của ARP ....................................................................................... 101 \n8.4 Switch học địa chỉ MAC như thế nào ....................................................................... 101 \n8.5 Broadcast Domain ..................................................................................................... 102 \n8.6 CSMA/CD ................................................................................................................. 102 \n8.7 Collision Domain ...................................................................................................... 103 \n8.8 Phân loại Switch ........................................................................................................ 103 \n8.9 Kiến trúc phân tầng trong thiết kế của Cisco ............................................................ 103 \n8.10 Khởi tạo cấu hình switch ........................................................................................... 104 \n\nChương IX: VLAN & Trunk ................................................................................................... 106 \n9.1 Virtual LAN .............................................................................................................. 106 \n9.2 Lợi ích của việc sử dụng VLAN ............................................................................... 106 \n\nChương X: Phân loại VLAN .................................................................................................... 107 \n10.1 VLAN tĩnh ................................................................................................................ 107 \n10.2 LAB 1\u2013 Kiểm tra cấu hình VLAN ............................................................................ 109 \n10.3 VLAN động ............................................................................................................... 112 \n10.4 Trunking .................................................................................................................... 113 \n\nChương XI: Phân loại links/ports ............................................................................................ 114 \n11.1 Access links ............................................................................................................... 114 \n11.2 Trunk links ................................................................................................................ 114 \n11.3 Frame Tagging .......................................................................................................... 114 \n\n\n\n \n\n6 \nLưu hành nội bộ \n\n11.4 Trunking Protocol ..................................................................................................... 115 \n11.5 Cấu hình trunking ...................................................................................................... 115 \n\nChương XII: Giao thức Spanning-tree ................................................................................... 116 \n12.1 Bridging loops (Vòng lặp) ........................................................................................ 116 \n12.2 Giải pháp tránh Bridging loops ................................................................................. 116 \n12.3 Giao thức STP ........................................................................................................... 116 \n12.4 STP hoạt động như thế nào ....................................................................................... 117 \n12.5 Lựa  chọn Root Bridge .............................................................................................. 118 \n12.6 Lựa chọn Root Port ................................................................................................... 118 \n12.7 STP Port Cost ............................................................................................................ 118 \n12.8 Lựa chọn Designated port và Non Designated port .................................................. 118 \n12.9 BPDU ........................................................................................................................ 118 \n12.10 Các trạng thái port của STP ...................................................................................... 119 \n12.11 LAB: Kiểm tra spanning-tree .................................................................................... 119 \n\nChương XIII: IPV6 ................................................................................................................... 127 \n13.1 IP Address ................................................................................................................. 127 \n13.2 2 phiên bản của IP ..................................................................................................... 127 \n13.3 IPv6 là phiên bản được nâng cấp của IPv4 ............................................................... 127 \n13.4 IPV6 Types ............................................................................................................... 127 \n13.5 Kiến trúc địa chỉ IPv6 ............................................................................................... 127 \n13.6 Địa chỉ Unicast .......................................................................................................... 127 \n13.7 Địa chỉ local .............................................................................................................. 128 \n13.8 Địa chỉ default ........................................................................................................... 128 \n13.9 Địa chỉ Multicast ....................................................................................................... 128 \n13.10 Địa chỉ Any Cast ....................................................................................................... 128 \n13.11 Đặt địa chỉ IPv6 ......................................................................................................... 128 \n13.12 Stateless ..................................................................................................................... 128 \n13.13 IPV6 ROUTING ....................................................................................................... 130 \n13.14 Các loại định tuyến IPV6 .......................................................................................... 130 \n13.15 Định tuyến tĩnh .......................................................................................................... 131 \n\nChương XIV : Giao thức định tuyến động trong IPV6 ......................................................... 134 \n14.1 IGP ............................................................................................................................ 134 \n14.2 EGP ........................................................................................................................... 134 \n\n\n\n \n\n7 \nLưu hành nội bộ \n\n14.3 RIPng ........................................................................................................................ 134 \n14.4 OSPFv3 ..................................................................................................................... 136 \n14.5 EIGRP FOR IPv6 ...................................................................................................... 138 \n\nChương XV: Các công nghệ mạng WAN ............................................................................... 140 \n15.1 Các kiểu kết nối trong mạng WAN ........................................................................... 140 \n15.2 Các kiểu kết nối mới của mạng WAN ...................................................................... 141 \n15.3 Kênh riêng (Leased line) ........................................................................................... 141 \n15.4 Giao thức WAN ........................................................................................................ 141 \n15.5 Xác thực PPP (Point \u2013 to \u2013 Point Protocol) .............................................................. 143 \n15.6 Bài Lab : cấu hình PAP ............................................................................................. 144 \n15.7 Bài Lab : cấu hình CHAP ......................................................................................... 145 \n15.8 Các loại kết nối WAN bao gồm ................................................................................ 146 \n15.9 Leased Line ............................................................................................................... 146 \n15.10 Kỹ thuật chuyển mạch kênh (Circuit Switching) ...................................................... 146 \n15.11 Kỹ thuật chuyển mạch gói (Packet Switching) ......................................................... 147 \n15.12 Các ưu điểm của chuyển mạch gói: .......................................................................... 148 \n15.13 Công nghệ Frame Relay ............................................................................................ 149 \n15.14 Các thuộc tính Frame relay ....................................................................................... 150 \n15.15 Các loại mạng Frame Relay ...................................................................................... 150 \n15.16 Cấu hình Frame realy Point to Point ......................................................................... 151 \n15.17 Mô hình kết nối WAN hiện đại ................................................................................. 153 \n15.18 Metro Ethernet .......................................................................................................... 153 \n15.19 Lợi ích mô hình Metro Ethernet ................................................................................ 154 \n15.20 Phạm vi, đối tượng sử dụng dịch vụ ......................................................................... 154 \n15.21 VPN ........................................................................................................................... 155 \n15.22 Các tình huống thông dụng của VPN ........................................................................ 156 \n\nChương XVI: FTTH GPON ..................................................................................................... 157 \n16.1 Mạng quang bị động (PON) ...................................................................................... 157 \n16.2 Các chuẩn mạng quang bị động PON ....................................................................... 157 \n16.3 Ứng dụng công nghệ cho dịch vụ Internet cáp quang (FTTH) ................................. 158 \n\n \n \n\n\n\n \n\n8 \nLưu hành nội bộ \n\n \nChương I : Mạng cơ bản \n\n1.1 Mạng (Network) \n Nhóm hai hay nhiều thiết bị kết nối với nhau cho phép chia sẻ thông tin và tài \n\nnguyên hệ thống. \n\n  \n1.2 Mạng nội bộ (Local Area Network \u2013 LAN) \n\n Sự kết nối của các thiết bị mạng trong cùng một vị trí địa lý (văn phòng\\ tòa \nnhà ). \n \n\n \n \n \n\n\n\n \n\n9 \nLưu hành nội bộ \n\n1.3 Mạng diện rộng (Wide Area Network \u2013 WAN) \n Sự kết nối của các thiết bị mạng từ hai hay nhiều vùng khác nhau. \n Nhiều mạng LAN kết nối đến nhau. \n\n \n\n  \n1.4 Mạng đô thị (Metro-politan Area Network \u2013 MAN) \n\n Là mạng bao phủ trong phạm vi một đô thị/ thành phố. \n \n\n \n\n\n\n \n\n10 \nLưu hành nội bộ \n\n \n1.5 Mạng cá nhân (Personal Area Network - PAN) \n\n Hai hay nhiều máy vi tính kết nối với nhau giới hạn từ 4 \u2013 6m. \n \n \n\n \n \n \n \n \n \n \n \n\n \n1.6 Internet  \n\n \n1.7 Những kích thước hệ thống mạng \n\n \n\n\n\n \n\n11 \nLưu hành nội bộ \n\n1.8 Thiết bị chuyển mạch Cisco (Switch Cisco) \n \n\n  \n1.9 Thiết bị mạng không dây (Wireless Access Point) \n\n  \n1.10 Thiết bị định tuyến Cisco (Router Cisco) \n\n \n\n   \n1.11 Thiết bị tường lửa Cisco (Firewall Cisco) \n\n \n\n   \n\n\n\n \n\n12 \nLưu hành nội bộ \n\n  \n1.12 Điện thoại sử dụng địa chỉ IP/ thiết bị thoại (IP phone/ Voice Devices) \n\n \n\n   \n \n \n \n \n\n\n\n \n\n13 \nLưu hành nội bộ \n\n1.13 Thiết bị mạng kết nối trong gia đình  \n\n  \n1.14 Giới thiệu về Cisco  \n\n Luôn đi đầu trong lĩnh vực chế tạo các thiết bị mạng trên thế giới. \n Bao gồm các thiết bị : \n\na. Thiết bị định tuyến (Routers). \nb. Thiết bị chuyển mạch (Switchs). \nc. Thiết bị tường lửa (Firewalls). \nd. Thiết bị thoại (Voice Devices). \ne. Trung tâm lưu trữ dữ liệu (Datacenter). \nf. Thiết bị mạng không dây (Wireless ). \n\n \n\n   \n1.15 Các cấp bậc chứng chỉ của Cisco \n\n \n\n \n\n\n\n \n\n14 \nLưu hành nội bộ \n\n  \n1.16 Thi chứng chỉ CCNA Cisco \n\n Thi trên máy tính. \n Được quản trị thông qua VUE www.vue.com  \n Chi phí thi : 295$. \n Thời gian thi : 90 phút. \n 50 \u2013 55 câu hỏi. \n Các dạng câu hỏi trong chứng chỉ CCNA : \n\na. Lựa chọn nhiều đáp án. \nb. Teslet (dạng tổng hợp 4 \u2013 5 câu hỏi sử dụng chung một mô hình). \nc. Kéo và thả đáp án. \nd. Mô phỏng các bài lab. \ne. Simlets (giống với teslet nhưng khác là sẽ hiển thị các câu lệnh). \n\n Điểm thi đỗ chứng chỉ : 825/1000. \n \n\n1.17 Những nội dung mới trong CCNA 200-120 \n Hoạt động của dữ liệu mạng. \n Địa chỉ IPv4/IPv6. \n Công nghệ mạng chuyển mạch mạng LAN . \n Công nghệ định tuyến IP. \n Các thiết bị bảo mật trong hệ thống mạng. \n Khắc phục lỗi trong hệ thống mạng. \n Công nghệ mạng WAN. \n Thông tin chi tiết : http://bachkhoa-aptech.com/ hoặc www.cisco.com  \n\n\n\n \n\n15 \nLưu hành nội bộ \n\n \n1.18 Những điều bạn đạt được \n\n Lớp học theo tiêu chuẩn quốc tế. \n Những cuốn sách chi tiết về các bài lab thực hành. \n Video chi tiết về bài học. \n Các công cụ mô phỏng hệ thống. \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n16 \nLưu hành nội bộ \n\nChương II: TCP/IP \n \n\n2.1 Giao thức (protocol) \n Tập hợp các quy tắc cho phép các thiết bị có thể giao tiếp, trao đổi thông tin \n\nvới nhau. \n Các giao thức mạng phổ biến : \n\na. TCP/IP \nb. IPx/SPx \nc. Appletalk \nd. Netbios \ne. OSI \n\n \n2.2 TCP/IP là gì \n\n TCP/IP là giao thức cơ bản được sử dụng giữa các máy vi tính và các thiết bị \nmạng truyền thông với nhau . \n\n 2.3 Địa chỉ TCP/IP  \n Địa chỉ IP là địa chỉ Logical được cung cấp cho toàn bộ các thiết bị trong hệ \n\nthống mạng. \n Nằm trong tầng mạng - Networks (tầng 3 \n\ntrong mô hình tham chiếu OSI) . \n 2 phiên bản IP là : \n\na. IPv4 \nb. IPv6 \n\n \n \n\n2.4 Địa chỉ IPv4 \n Biểu diễn dưới dạng nhị phân (bit 0 và 1). \n VD : Địa chỉ IP 192.168.1.2 ở dạng nhị phân (32 bit) là \n\n11000000.10101000.0000001.00000010 \n 32 bit được chia làm 4 octet: 11000000 \u2013 Octet thứ 1. \n\n            10101000 \u2013 Octet thứ 2. \n            00000001 \u2013 Octet thứ 3. \n            00000010 \u2013 Octet thứ 4. \n\n\n\n \n\n17 \nLưu hành nội bộ \n\n Địa chỉ IP ở dạng Thập phân :  85.5.191.1 \n\n  \n2.5 Bảng chuyển đổi từ hệ Nhị Phân sang hệ Thập Phân \n\n \n1 1 0 0 1 1 0 0 \n27 26 25 24 23 22 21 20 \n\n128 64 32 16 8 4 2 1 \nGiá trị thập phân khi quy đổi = 20 x 0 + 21 x 0 + 22 x 1 + 23 x 1 + 24 x 0 + 25 x 0 + 26 x 1 + \n27 x 1  = 204 \nVậy giá trị thập phân khi quy đổi từ dãy số hệ nhị phân 11001100 = 204 \n \n\n1 1 0 0 0 0 0 1 \n27 26 25 24 23 22 21 20 \n\n128 64 32 16 8 4 2 1 \n   Giá trị thập phân khi quy đổi = 20 x 1 + 21 x 0 + 22 x 0 + 23 x 0 + 24 x 0 + 25 x 0 + 26 x 1 + 27 \n\nx 1                 = 193  \n Vậy giá trị thập phân khi quy đổi từ dãy số hệ nhị phân 11000001 = 193 \n \n2.6 Bảng chuyển đổi từ hệ Thập Phân sang hệ Nhị Phân \n\n \n\n \n \n\n\n\n \n\n18 \nLưu hành nội bộ \n\n \n \n2.7 Gán một địa chỉ IP tĩnh cho máy vi tính \n\n \n \n \n \n \n \n \n \n \n \n\n \n \n\n\n\n \n\n19 \nLưu hành nội bộ \n\n \n \n \n \n \n \n \n \n \n \n2.8 Gán địa chỉ IPv4 động cho 1 Host \n \n\n \n \nDHCP (Dynamic Host Configuration       \nProtocol): là dịch vụ \u201cđược dùng\u201d cho phép gán \nIPv4 một cách tự động cho các host trong hệ \nthống, giảm thiểu khối lượng công việc của các \nquản trị viên hoặc nhân viên hỗ trợ mạng và theo \nđó loại bỏ các lỗi kết nối không đáng có . \n \n \n \n \n \n \n\n \n \n \n \n\n\n\n \n\n20 \nLưu hành nội bộ \n\n2.9 Phạm vi khả dụng của IPv4 \n Lấy VD cho octet đầu tiên : 8 bit đầu tiên, giá trị có thể là 0 và 1 ở mỗi bit, vì \n\nvậy ta có 256 giao hoán. \n\n 2.10 Các lớp địa chỉ IP (IP Address Classification) \n Địa chỉ IP được chia thành 5 lớp sau: \n\nLớp A : 0 → 127 \nLớp B : 128 → 191     Dải địa chỉ IP của các lớp địa chỉ mạng. \nLớp C : 192 → 223 \nLớp D : 224 → 239                      Sử dụng cho các dịch vụ, giao thức Multicasting. \nLớp E : 240 → 255              Sử dụng cho nghiên cứu và phát triển. \n \n\n2.11 Phần Mạng và Host  \n Địa chỉ IP được chia làm 2 phần là Network ID và Host ID. \n Lớp A : N.H.H.H \n Lớp B : N.N.H.H \n Lớp C : N.N.N.H \n H : Host ID \u2013 địa chỉ của một thiết bị cụ thể trong hệ thống mạng. \n N : Network ID \u2013 là địa chỉ cấp cho từng mạng riêng. \n\n \n2.12 Mạng và địa chỉ Broadcast  \n\n Network ID:  \na. Định danh cho một mạng. \nb. Các bit trong phần Host ID đều là bit 0. \n\n Địa chỉ Broadcast :  \na. Là địa chỉ đại diện cho toàn bộ thiết bị trong một mạng. \nb. Là địa chỉ IP lớn nhất trong một dải mạng. \nc. Các bit trong phần Host ID đều là bit 1. \n\n IP khả dụng trong một mạng: \na. Là những IP có thể sử dụng để gán cho các Host. \n\n \n \n \n\n\n\n \n\n21 \nLưu hành nội bộ \n\n VD \u2013 địa chỉ lớp C: \n192.168.1.0 \u2013 địa chỉ mạng. \n192.168.1.1 → 192.168.1.254 \u2013 địa chỉ khả dụng (có thể sử dụng cho Host/client) . \n192.168.1.255 \u2013 địa chỉ Broadcast. \n \n\n VD \u2013 địa chỉ lớp B: \n172.16.0.0 \u2013 địa chỉ mạng. \n172.16.0.1 → 172.16.255.254 \u2013 địa chỉ khả dụng (có thể sử dụng cho Host/Client). \n172.16.255.255 \u2013 địa chỉ Broadcast. \n\n \n VD \u2013 địa chỉ lớp A:  \n\n10.0.0.0 \u2013 địa chỉ mạng. \n10.0.0.1 → 10.255.255.254 \u2013 địa chỉ khả dụng (có thể sử dụng cho Host/Client). \n10.255.255.255 \u2013 địa chỉ Broadcast. \n\n \n2.13 Subnet \u2013 mask \n\n Subnet \u2013 mask là để phân biệt giữa phần Network và phần Host. \n 1 là đại diện cho phần Network. \n 0 là đại diện cho phần Host. \n Class A N.H.H.H 255.0.0.0 \n Class B N.N.H.H 255.255.0.0 \n Class C N.N.N.H 255.255.255.0 \n\n \n2.14 Địa chỉ riêng (Reserved Address) \n\n Class D và Class E. \n Gồm Network ID và Broadcast ID. \n 0.x.x.x  -  không hợp lệ. \n 127.x.x.x  -  dành cho địa chỉ Loopback. \n\n \n2.15 127.x.x.x \u2013 địa chỉ Loopback \n\n Địa chỉ Loopback là địa chỉ được sử dụng để kiểm tra giao thức TCP/IP trên \nchính thiết bị đó. \n\n  \n \n\n\n\n \n\n22 \nLưu hành nội bộ \n\n \n \n\n2.16 Địa chỉ IP Private/ IP Public \n\n Private IP Public IP \n1. Được sử dụng trong mạng LAN \n\nhoặc trong một tổ chức riêng. \n2. Không được nhận diện Internet. \n3. Cấp phát tự do bởi người quản trị hệ \n\nthống. \n4. Là địa chỉ duy nhất trong một mạng \n\nhoặc một tổ chức. \n5. Miễn phí. \n6. Không được đăng kí chủ sở hữu. \n\n1. Được sử dụng là địa chỉ công cộng \ntrong Internet. \n\n2. Được nhận diện trên Internet. \n3. Được cung cấp bởi nhà cung cấp \n\ndịch vụ (từ IANA), việc cấp phát \ntuân thủ các quy trình quy định \nnghiêm ngặt. \n\n4. Là địa chỉ duy nhất trên toàn cầu \n5. Phải trả chi phí cho nhà cung cấp \n\ndịch vụ ( hay IANA). \n6. Được đăng ký chủ sở hữu. \n\n \n2.17 Địa chỉ cá nhân (Private IP Address) \n\n Là địa chỉ nhất định trong mỗi lớp địa chỉ IP được các tổ chức sử dụng để cấp \nphát cho các thiết bị trong mạng nội bộ. \n\n Lớp A : 10.0.0.0 đến 10.255.255.255  \n Lớp B : 172.16.0.0 đến 172.31.255.255  \n Lớp C : 192.168.0.0 đến 192.168.255.255  \n\n \n \n \n \n \n \n \n\n\n\n \n\n23 \nLưu hành nội bộ \n\n \n \n\n2.18 Phân bổ địa chỉ IP \nĐăng ký Internet theo khu vực (Regional Internet Registries - RIRs) \nĐăng ký chính thức tại IANA.org : \nhttp://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xhtml  \n\n \n2.19 Mạng con (subnetting) \n\n Là quá trình chia từ một mạng lớn đơn thành những mạng con. \n Mạng con giúp cho giảm thiểu sự lãng phí địa chỉ IP. \n\n  \n2.20 FLSM và VLSM \n\n Mạng con có thể được thực hiện theo 2 phương hướng sau : \na. FLSM (Fixed Length Subnet Mask \u2013 mạng có chiều dài cố định ). \nb. VLSM (Variable Length Subnet Mask \u2013 mạng có chiều dài thay đổi). \n\n Mạng con có thể được thực hiện dựa trên các yêu cầu sau :  \na. Yêu cầu về số Host(số host): theo công thức 2h \u2013 2 ≥  số hot. \nb. Yêu cầu về Network (số net): theo công thức 2n ≥  số net. \n\n\n\n \n\n24 \nLưu hành nội bộ \n\n      Trong đó h = Host bit và n = Network Bit \n \n\n2.21 Ví dụ về VLSM \nVD về chia địa chỉ IP : cho dải mạng sau 10.0.0.0/16 \nA : 200 host \nB : 80 host \nC : 15 host \n \nBan đầu dải mạng được cấp : 10.0.0.0/16 \nĐược xác định là 10.0.0.0  với 10.0 (16 bit ) là NetID và  \n                                                    0.0 (16bit )  là HostID \nmang đi chia cho 200 host \ncó công thức : 2h \u2013 2 ≥ x          (với h là số bit phần HostID \u2013 x là số lượng IP yêu cầu) \n                 vậy 2h \u2013 2 ≥ 200                  \n        < = > h = 8 vì 28 \u2013 2 = 254  > 200 host (yêu cầu ban đầu) \nVậy HostID = 8 \nMà HostID + NetID = 32 bit, => NetID = 24 bit \nDải ban đầu được cung cấp là 10.0.0.0/16 là 16 bit NetID và 16 bit HostID \nDải sau khi chia cho 200 host có 24 bit NetID và 8bit HostID vậy ở đây NetID sẽ mượn 8 bit \ntừ HostID để làm NetID (tức là NetID sẽ mượn thêm 1 octet thứ 3 từ HostID làm NetID ) \nDải ban đầu viết lại dưới dạng nhị phân là là  : 10|00000000|00000000|00000000 \n(10.0.0.0/16) Dải sau khi chia cho A                                     : 10|00000000|00000000|00000000 \n(10.0.0.0/24) 8 bit của NetID sẽ chạy từ 8 bit thấp nhất là 0 : 00000000 đến cao nhất là 8 bit 1 : 11111111 \nNhư vậy là dải 10.0.00000000.00000000/24 sẽ chạy từ 10.0.0.0 \u2013 10.0.0.255 tức là có 254 \nđịa chỉ  (phù hợp cho việc sử dụng để cho 200 host) \n        10.0.00000001.00000000 /24 \n        10.0.00000010.00000000 /24 \n                   \u2026\u2026. \n        10.0.11111111.00000000 \nVậy để chia cho 200 host ta dùng dải địa chỉ 10.0.0.0/24 \u2013 10.0.1.0/24 \nTiếp theo để chia cho 80 host ta sẽ sử dụng tiếp dải thứ 2, từ 10.0.1.0/24 để chia \n \nB: 80 host, sử dụng các phép tính tương tự ta có : 2h \u2013 2 ≥ 80  \nVậy h = 7 vì 27 \u2013 2 = 126 > 80               \nVậy NetID ở đây = 32 \u2013 HostID = 32 \u2013 7 =25  \nDải sử dụng để chia là 10.0.1.0/24 có NetID = 24 \nDải sử dụng cho 80 host có NetID = 25 \nở đây NetID cũ và NetID khi mang đi chia chênh nhau 1 bit, như vậy là NetID đã mượn \nthêm 1 bit của Host ID để làm NetID \n10.0.1.00000000/24 \n10.0.1.00000000/25 \n1 bit NetID mượn của HostID sẽ có 2 giá trị là 0 và 1, vậy ở đây ta có \n10.0.1.00000000 tương đương với địa chỉ IP dưới dạng thập phân 10.0.1.0/25  \n10.0.1.10000000                                                                               10.0.1.128/25 \nVậy dải địa chỉ mang đi cho 80 host là từ 10.0.1.0/25 \u2013 10.0.1.128/25 \n\n\n\n \n\n25 \nLưu hành nội bộ \n\nTiếp tục mang đi chia cho 15 host \nTa lấy tiếp từ 10.0.1.128/25 ra đi chia. \nVẫn áp dụng công thức 2h \u2013 2 ≥ 15 vậy h = 5 , và từ đây ta có NetID = 32 \u2013 5 = 27 \nDải địa chỉ ban đầu mang đi chia là 10.0.1.128/25 có NetID là 25 \nDải địa chỉ sau khi đã chia cho 15 host có NetID là 27. Vậy ở đây NetID đã mượn thêm 2 bit \ntừ HostID để làm NetID. \nViết lại dải địa chỉ IP dưới dạng số nhị phân :  \n10.0.1.10000000 /25 \n10.0.1.10000000 /27 \n Số Bit NetID mượn từ HotsID làm NetID là 2 bit, sẽ có 22  = 4 giá trị từ 00 \u2013 11 \n10.0.1.1000000/27                viết lại dải địa chỉ IP dưới dạng thập phân : 10.0.1.128/27 \n. . .  \n10.0.1.1110000/27              viết lại dải địa chỉ IP dưới dạng thập phân : 10.0.1.224/27 \nVậy dải địa chỉ mang đi cho 15 host là 10.0.1.128/27 \u2013 10.0.1.224/27 \n\n \n2.22 Một vài ví dụ về VLSM \n\n Dưới đây bạn có thể tìm thấy một vài sơ đồ mẫu cơ bản  \n \n\n  \n\n \n\n\n\n \n\n26 \nLưu hành nội bộ \n\n \n\n  \n Bài tập về VLSM \n\n Lớp C (C \u2013 Class):  \na. Yêu cầu : 100, 50, 20, 10 (Host). \nb. Yêu cầu : 120, 40, 12, 4 (Host). \n\n Lớp B (B \u2013 Class): \na. Yêu cầu : 4000, 1000, 500, 200 (Host). \nb. Yêu cầu : 16000, 2000, 200, 120, 100 (Host). \n\n Lớp A (A \u2013 Class): \na. Yêu cầu : 32000, 8000, 1000, 500, 200 (Host). \nb. Yêu cầu : 4000, 200, 120, 60, 30, 12, 10 (Host). \n\n\n\n \n\n27 \nLưu hành nội bộ \n\n2.23 Những câu hỏi về Mạng con (Subnet) \n Tìm subnet \u2013 mask, phạm vi của IP ( Địa chỉ dải mạng \u2013 Network ID và địa chỉ \n\nBroadcast), Host khả dụng, mạng con (Subnet). \na. 28.10.145.10/18 \nb. 150.12.110.10/25 \nc. 150.50.50.50/23 \nd. 100.10.185.10/20 \ne. 50.1.112.10/21 \nf. 112.10.78.40/22 \ng. 172.16.221.10/19 \n\n \n2.24 Các phương thức kết nối \n\n Trong hệ thống mạng IPv4, các Host có thể kết nối với nhau bằng một trong \nnhững phương thức truyền tải sau : \n\na. Unicast. \nb. Broadcast. \nc. Multicast. \n\n \n2.25 Unicast \n\n Là phương thức gửi gói tin từ một Host này đến một Host khác trong hệ thống \nmạng. \n\n  \n \n \n \n \n \n \n\n\n\n \n\n28 \nLưu hành nội bộ \n\n \n2.26 Broadcast  \n\n Là phương thức gửi gói tin từ một Host đến toàn bộ các Host còn lại trong hệ \nthống mạng. \n\n \n \n2.27 Multicast \n\n Là phương thức gửi gói tin từ một Host đến một nhóm các Host khác được chỉ \nđịnh hoặc xác định trước, có thể là ở một hệ thống khác. \n\n Giảm tải hệ thống. \n Gửi theo địa chỉ gán riêng cho nhóm multicast : từ 224.0.0.0 đến \n\n239.255.255.255 \n\n  \n \n \n \n \n \n \n \n \n\n\n\n \n\n29 \nLưu hành nội bộ \n\n2.28 Giới thiệu về thiết bị định tuyến (Router) và thiết bị chuyển mạch (Switch)  \n\n  \n\n  \n \n2.29 Các phương tiện truyền thông \n\n Cáp quang. \n Cáp đồng (cáp xoắn đôi - UTP và cáp đồng trục). \n Kết nối không dây. \n\n \n \n\n2.30 Cáp xoắn đôi \u2013 UTP (Unshielded Twisted Pair ) \n \n               \n\n \n \n \n \n \n \n \n\n\n\n \n\n30 \nLưu hành nội bộ \n\n \n2.31 Cáp thẳng và cáp chéo \n\n \n\n  \n\n \n\n\n\n \n\n31 \nLưu hành nội bộ \n\n2.32 Cáp đồng trục  (Co-axial cable) \n\n  \n2.33 Cáp quang (Fiber cables) \n\n Có thể truyền với khoảng cách dài hơn và truyền với băng thông lớn hơn. \n \n\n  \n \n\n\n\n \n\n32 \nLưu hành nội bộ \n\n2.34 Mạng LAN không dây (Wireless LAN) \n \n \n\n  \n2.35 Thiết lập một mạng LAN cơ bản sử dụng Cisco Packet Tracer \n\n Kết nối 4 máy vi tính trong mạng LAN sử dụng thiết bị chuyển mạch Switch. \n Cấu hình địa chỉ IP cho toàn bộ PC sử dụng dải địa chỉ 192.168.1.0/24 \n Kiểm tra kết nối giữa các thiết bị sử dụng câu lệnh Ping. \n\n \n\n  \n \n \n \n \n \n \n\n\n\n \n\n33 \nLưu hành nội bộ \n\n2.36 Router (thiết bị định tuyến) \n Là thiết bị được sử dụng để kết nối hai hay nhiều mạng khác nhau (thiết bị liên \n\nmạng). \n  \n\n \n \n \n \n \n \n \n \n \n\n \n2.37 Các hãng sản xuất thiết bị định tuyến ( Router )  \n\n Nhiều công ty sản xuất thiết bị Router như : \na. Cisco. \nb. Nortel. \nc. Multicom. \nd. Cyclades. \ne. Juniper. \nf. Dlink. \ng. Linksys. \nh. 3Com. \n\n \n \n \n\n2.38 Phân biệt thiết bị Cisco và phạm vi sử dụng  \n Access Layer Router . \n Distribution Layer Router. \n Core Layer Router. \n\n\n\n \n\n34 \nLưu hành nội bộ \n\n \n \n2.39 Access Layer Router \n\n Là thiết bị được sử dụng trong các tổ chức \u2013 doanh nghiệp nhỏ (SMB). \n Router Series :  800, 1000, 1600, 1700, 1800, 2500. \n\n \n\n  \n \n\n \n\n\n\n \n\n35 \nLưu hành nội bộ \n\n2.40 Distribution Layer Router \n Là router được sử dụng trong các nhà cung cấp dịch vụ mạng (ISPs \u2013 Internet \n\nService Providers ) và được biết đến là Router lớp ISP. \n Router Series : 2600, 3200, 3600, 3700, 3800. \n\n \n\n  \n2.41 Core Layer Router \n\n Là router được sử dụng để kết nối giữa các nhà cung cấp dịch vụ mạng trên \ntoàn cầu, và được biết đến với tên gọi là Backbone Routers (Router trục chính). \n\n Các Router Series: 6400, 7200, 7300, 7400, 7500, 7600, 10000, 12000. \n \n\n \n\n \n\n\n\n \n\n36 \nLưu hành nội bộ \n\n2.42 Phân loại Router \n \n\nThiết bị định tuyến thiết kế cố định \u2013 \nFixed Router \n\nThiết bị định tuyến thiết kế theo \nModular - Modular Router \n\na. Tất cả các cổng kết nối đều đã được \ntích hợp sẵn trên Motherboard (không có \ncổng phụ hoặc slot hỗ trợ kết nối phụ). \nb. Không có khả năng nâng cấp (thêm \n)các cổng giao tiếp. \nc. Router series 800, 2500. \n\na. Có những slot phụ hỗ trợ mở rộng kết \nnối tùy theo nhu cầu phát triển của doanh \nnghiệp. \nb. Những router thuộc tầng Distribution \nvà Core đều là các Modular Router. \nc. Router series 1600, 1700, 1800, 2600, \n2800, 3600, 3700 . \n\n \n \n\n2.43 Các cổng kết nối ra bên ngoài của Router : LAN, WAN, Admin ports \n \n\n  \n2.44 Cổng LAN \u2013 cổng WAN \n\nCổng LAN (LAN port) \u2013 RJ45 Cổng WAN (WAN port) \na. Ethernet : tốc độ 10 Mbps. \nb. Fast Ethernet : 100 Mbps. \nc. Gigabit Ethernet  : 1000 Mbps. \n\na. Cổng Serial. \nb. 60 chân (pin) hoặc 26 chân cắm. \n\n \n\n\n\n \n\n37 \nLưu hành nội bộ \n\n \n \n2.45 Cổng Console (Console port) \n\n Thường được sử dụng cho việc thiết lập cấu hình ban đầu của thiết bị, hoặc \nkhôi phục mật khẩu. \n\n Là cổng RJ45. \n\n 2.46 Cổng kết nối phụ (Auxiliary Port \n Sử dụng cho việc kết nối từ xa để quản trị. \n Là cổng kết nối RJ45. \n Sử dụng cable Console hoặc cable Rollover. \n\n\n\n \n\n38 \nLưu hành nội bộ \n\n Router Cisco 2500 \n\n  \n2.47 AUI (Attachment Unit Interface) \n\n AUI có cấu tạo là 15 chân (pin) ở phía đầu cái, đầu đực là cổng RJ45. \n Được biết đến với tên gọi là cổng Ethernet, cổng LAN, hay cổng Gateway mặc \n\nđịnh. \n Được sử dụng để kết nối từ mạng LAN đến Router. \n Bộ thu phát (Transceiver) được sử dụng để chuyển đổi từ 8 dây điện kết nối \n\nthành 15 dây . Chuyển đổi từ RJ45 đến 15 pin. \n \n\n  \n\n\n\n \n\n39 \nLưu hành nội bộ \n\n2.48 Các cổng kết nối ra ngoài của router (tiếp) \n Giao diện kết nối LAN \u2013 Ethernet \n\na. AUI (Attachment Unit Interfaces) (E0) \u2013 15 chân (pin). \nb. 10baseT \u2013 RJ45. \n\n Giao diện kết nối WAN \na. Serial Interface (S0, S1, s0/0, s0/1, s0/0/0 v\u2026v\u2026 ) \u2013 60 chân/26 chân \n\n(kết nối thông minh). \nb. Mạng tích hợp đa dịch vụ (ISDN \u2013 Intergrated Service Digital Network) \n\n(BR10 v\u2026v\u2026) \u2013 RJ45  (sử dụng cho việc kết nối WAN). \n Cổng quản trị : \n\na. Cổng Console \u2013 RJ45 \u2013 cho phép quản trị nội bộ. \nb. Cổng Auxiliary \u2013 RJ45 \u2013 cho phép quản trị từ xa. \n \n\n2.49 Các thành phần của Router \n Post : Power On Self Test \u2013 kiểm tra phần cứng thiết bị. \n ROM : khởi chạy thư viện chương trình và cho phép tìm kiếm hệ điều hành \n\nmạng IOS - Internetwork Operating System (Flash / TFTP / ROM). \n Flash : nơi lưu trữ IOS của Router. \n NVRAM : nơi lưu trữ cố định những câu lệnh \u2013 những cấu hình triển khai cho \n\nRouter. \n RAM : nơi lưu trữ tạm thời những câu lệnh \u2013 những cấu hình đang chạy cho \n\nRouter. \n \n\n \n\n\n\n \n\n40 \nLưu hành nội bộ \n\n \n\n  \n Thực hiện POST và nạp thư việc các chương trình : \n\na. POST là một quá trình xảy ra khi router bắt đầu khởi động. POST được \nsử dụng để kiểm tra các thành phần phần cứng của Router. \n\nb. Sau quá trình POST, các thư viện chương trình nằm trong hệ điều hành \nCisco (Cisco IOS) được nạp vào RAM. \n\n Nạp phần mềm hệ điều mạng (IOS): \na. Tùy theo giá trị của thanh ghi có thể thiết lập tùy chọn nạp hệ điều hành  \n\ntừ các phân vùng khác nhau: bộ nhớ Flash (Flash Memory) / TFTP \nserver. \n\nb. Để thiết lập nạp hệ điều hành IOS từ flash các thanh ghi cần được thiết \nlập giá trị 0x2102. \n\n Thực hiện các tập tin lưu cấu hình khởi động hoặc vào phần chế độ thiết lập \na. Sau khi file hệ điều hành (IOS) được nạp xong, thư viện chương trình sẽ \n\ntìm các file lưu cấu hình khởi động trong NVRAM. \nb. File này chứa toàn bộ những lệnh cấu hình và thông số đã lưu trước đó, \n\nbao gồm các địa chỉ IP, thông tin định tuyến, mật khẩu, và một vài các \nthông số đã cấu hình. \n\nc. Nếu không có file cấu hình trong router, nó sẽ hướng dẫn người dùng \nđăng nhập vào chế độ thiết lập để bắt đầu tiến trình cấu hình. \n\nd. Nếu tìm thấy file Startup Configuration, router nạp thành công hệ điều \nhành và các file cấu hình. \n \n\n \n \n \n\n\n\n \n\n41 \nLưu hành nội bộ \n\nChương III : Những câu lệnh cơ bản (Basic \nCommands) \n\n3.1 Kết nối Console  \n\n  \n Kết nối Console: \n\na. Kết nối trực tiếp bằng cable Rollover đến cổng console của Router \n(cổng kết nối RJ45). \n\nb. Khởi chạy phần mềm giả lập trên PC. \n Trên hệ điều hành Windows 7:  \n\na. Download và cài đặt chương trình Secure CRT hoặc Putty theo đường \nlink sau: \nhttps://www.vandyke.com/download/securecrt/download.html \nhttp://www.putty.org/ \n \n\n \n\n\n\n \n\n42 \nLưu hành nội bộ \n\n \n1. Khởi chạy Secure CRT , hoặc PuTTY: \n\n \n\n  \n2. Thiết lập các thông số đăng nhập bao gồm: Protocol, Port, Baud rate \n\n \n\n \n\n\n\n \n\n43 \nLưu hành nội bộ \n\n3. Màn hình đăng nhập thành công \n \n\n \n \n \n\n Các phần mềm hỗ trợ truy cập thiết bị qua giao diện CLI: \na. Hyper Terminal (tích hợp sẵn trên Windows XP hoặc cài đặt trên các \n\nphiên bản Windows mới hơn). \nb. PuTTY. \nc. Tera Term. \nd. Secure CRT. \ne. OS X Terminal. \n\n \n \n \n \n3.2 Các chế độ (Mode) trên Router Cisco \n\n Chế độ Setup : khi NVRAM trống (không lưu giữ file cấu hình). \nCisco CISCO2911/K9 (revision 1.0) with 491520K/32768K bytes of memory. \nProcessor board ID FTX152400KS \n3 Gigabit Ethernet interfaces \nDRAM configuration is 64 bits wide with parity disabled. \n255K bytes of non-volatile configuration memory. \n249856K bytes of ATA System CompactFlash 0 (Read/Write) \n \n--- System Configuration Dialog --- \n\n \nContinue with configuration dialog? [yes/no]: \n\n \n \n \n\n\n\n \n\n44 \nLưu hành nội bộ \n\n Chế độ Người dùng (User Mode): chỉ cho phép thực hiện các câu lệnh cơ bản \nkiểm tra thông tin hệ thống \n\nRouter>show flash          (hiển thị thông tin của Router) \n   System flash directory: \n   File Length Name/status \n  3 33591768 c2900-universalk9-mz.SPA.151-4.M4.bin \n  2 28282 sigdef-category.xml \n  1 227537 sigdef-default.xml \n  [33847587 bytes used, 221896413 available, 255744000 total] \n  249856K bytes of processor board System flash (Read/Write) \n \nRouter>show ip interface brief          (hiển thị các cổng kết nối trên Router) \n   Interface                      IP-Address    OK?     Method     Status                                    Protocol \n   GigabitEthernet0/0     unassigned     YES     unset         administratively     down     down \n   GigabitEthernet0/1     unassigned     YES     unset         administratively     down     down \n   GigabitEthernet0/2     unassigned     YES     unset         administratively     down     down \n   Vlan1                          unassigned     YES     unset         administratively     down     down \n \nRouter>ping 10.10.10.10          (kiểm tra kết nối của Router đến địa chỉ 10.10.10.10) \n   Type escape sequence to abort. \n         Sending 5, 100-byte ICMP Echos to 10.10.10.10, timeout is 2 seconds: \n          ..... \n         Success rate is 0 percent (0/5) \n \nRouter>traceroute 10.10.10.10  (kiểm tra tuyến đường từ Router đến địa chỉ 10.10.10.10) \n   Type escape sequence to abort. \n   Tracing the route to 10.10.10.10 \n   1   *   *   *  \n   2   *   *   * \n \nRouter>show version          (Hiển thị Version của Router) \n   Cisco IOS Software, C2900 Software (C2900-UNIVERSALK9-M), Version 15.1(4)M4, \nRELEASE SOFTWARE (fc2) \n   Technical Support: http://www.cisco.com/techsupport \n   Copyright (c) 1986-2012 by Cisco Systems, Inc. \n   Compiled Thurs 5-Jan-12 15:41 by pt_team \n \n   ROM: System Bootstrap, Version 15.1(4)M4, RELEASE SOFTWARE (fc1) cisco2911 \nuptime is 15 minutes, 38 seconds \n   System returned to ROM by power-on \n   System image file is \"flash0:c2900-universalk9-mz.SPA.151-1.M4.bin\" \n   Last reload type: Normal Reload \n \n   This product contains cryptographic features and is subject to United States and local country \nlaws governing import, export, transfer and use. Delivery of Cisco cryptographic products does \nnot imply third-party authority to import, export, distribute or use encryption. Importers, \nexporters, distributors and users are responsible for compliance with U.S. and local country \n\n\n\n \n\n45 \nLưu hành nội bộ \n\nlaws. By using this product you agree to comply with applicable laws and regulations. If you \nare unable to comply with U.S. and local laws, return this product immediately. \n \n    A summary of U.S. laws governing Cisco cryptographic products may be found at: \nhttp://www.cisco.com/wwl/export/crypto/tool/stqrg.html \n \n    If you require further assistance please contact us by sending email to export@cisco.com. \n    Cisco CISCO2911/K9 (revision 1.0) with 491520K/32768K bytes of memory. \n    Processor board ID FTX152400KS \n    3 Gigabit Ethernet interfaces \n    DRAM configuration is 64 bits wide with parity disabled. \n    255K bytes of non-volatile configuration memory. \n    249856K bytes of ATA System CompactFlash 0 (Read/Write) \n     License Info: \n     License UDI: \n     ------------------------------------------------- \n     Device# PID SN \n     ------------------------------------------------- \n     *0 CISCO2911/K9 FTX15240767 \n \n \n    Technology Package License Information for Module:'c2900' \n    ---------------------------------------------------------------- \n    Technology Technology-package Technology-package \n    Current Type Next reboot \n    ----------------------------------------------------------------- \n    ipbase ipbasek9 Permanent ipbasek9 \n    security None None None \n    uc None None None \n    data None None None \n \n    Configuration register is 0x2102 \n\n \n Chế độ đặc quyền (Privilege Mode):  \n\na. Cho phép thực hiện toàn bộ các câu lệnh để kiểm tra, cấu hình hệ thống \nRouter> enable \nRouter # show flash      (hiển thị thông tin router) \nRouter # show version      (hiển thị phiên bản của router) \nRouter # show ip interface brief      (hiển thị thông tin các cổng kết nối trên Router) \nRouter # ping 10.10.10.10      (kiểm tra kết nối từ router đến địa chỉ 10.10.10.10) \nRouter # traceroute 10.10.10.10      (kiểm tra tuyến đường đi từ router đến địa chỉ \n10.10.10.10 đi theo đường nào ) Router # show running-config       (hiển thị các câu lệnh đã sử dụng trên Router) \nRouter # show startup-config \nRouter # Copy \nRouter # Erase  \n\n \n\n\n\n \n\n46 \nLưu hành nội bộ \n\n Chế độ cấu hình chung cho Router: \n \n\nRouter # configure terminal \nRouter (config) #  \nRouter (config) # Hostname Bachkhoa-Aptech \nBachkhoa-Aptech (config) \n\n \n3.3 Đặt password cho các kết nối \n\n Kết nối Console. \n Kết nối Auxiliary. \n Kết nối VTY (telnet). \n\nPassword cho kết nối qua cổng Console  \n   Bachkhoa-Aptech(config)#line console 0 \n   Bachkhoa-Aptech(config-line)#password bachkhoa-aptech123456a@ \n   Bachkhoa-Aptech(config-line)#login \n   Bachkhoa-Aptech(config-line)#exit \n\n \nPassword cho kết nối qua cổng Auxiliary \n   Bachkhoa-Aptech(config)#line aux 0 \n   Bachkhoa-Aptech(config-line)#password Bachkhoa-aptech1234567a@ \n   Bachkhoa-Aptech(config-line)#login \n   Bachkhoa-Aptech(config-line)#exit \n \nPassword cho kết nối Telnet \n   Bachkhoa-Aptech(config)#line vty 0 4 \n   Bachkhoa-Aptech(config-line)#password Bachkhoa-aptech12345678a@ \n   Bachkhoa-Aptech(config-line)#login \n   Bachkhoa-Aptech(config-line)#exit \n\n \n3.4 Cấu hình password cho Router \n\n Để bảo mật cho Router, chúng ta đặt password đăng nhập. Với mỗi lần đăng \nnhập Router sẽ hỏi đến Password. \n\n   Router > enable \nPassword : . . . . . . . \n\nPassword được lưu dưới dạng văn bản rõ ràng \n   Bachkhoa-Aptech(config)# enable password Bachkhoa-Aptech123456a@ \n \nPassword được lưu dưới dạng văn bản mã hóa \n   Bachkhoa-Aptech(config)# enable secret Bachkhoa-Aptech12345a@ \n\n \nKiểm tra thông tin \n\nBachkhoa-Aptech#show run \nenable secret 5 $1$3DaE$C0FuV/sfz/8b8j0A3i6Zz0 \nenable password Bachkhoa-Aptech123456a@ \n\n\n\n \n\n47 \nLưu hành nội bộ \n\n \n3.5 Mã hóa mật khẩu \n\n Chuyển đổi mật khẩu từ dạng văn bản ký tự bình thường thành dạng văn bản \nmã hóa. \n\nBachkhoa-Aptech(config)# service password-encryption \n \n\nKiểm tra thông tin \nBachkhoa-Aptech#show run \n! \nenable secret 5 $1$3DaE$C0FuV/sfz/8b8j0A3i6Zz0 \nenable password 7 1327161103070C252A6909232127100F475152020C0E5274! \nline con 0 \nexec-timeout 0 0 \nprivilege level 15 \npassword 7 06575D721F1A5C4F0437 \nlogging synchronous \nlogin \nstopbits 1 \nline aux 0 \nexec-timeout 0 0 \nprivilege level 15 \npassword 7 014254570F5E5058794D6E \nlogging synchronous \nlogin \nstopbits 1 \nline vty 0 4 \npassword 7 15300A0F0C21232B297E14320702150B50040A0C06020F23 \nlogin \n! \n\n \n3.6 Lưu cấu hình đã thực hiện cho Router \n\n \n   Bachkhoa-Aptech(config)# copy running-config startup-config \nor \n   Bachkhoa-Aptech(config)# write memory \nor \n   Bachkhoa-Aptech(config)# write \n\n \n3.7 Xóa cấu hình đã thiết lập trên Router  \n\n \nBachkhoa-Aptech# erase startup-config \nBachkhoa-Aptech# reload \n\n \n \n\n\n\n \n\n48 \nLưu hành nội bộ \n\n3.8 Banner \n \n\nBachkhoa-Aptech(config)# banner motd #He Thong Dao Tao CNTT Quoc Te Bachkhoa-\nAptech#  \n\nKiểm tra thông tin \nBachkhoa-Aptech#show run \n! \nbanner motd ^CHe Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech^C \n! \n\n \n3.9 Kết nối điểm \u2013 điểm sử dụng cable Serial \n\n  \nDTE (Data Terminal Equipment) DCE (Data Communication Equipment) \n\n- Thiết bị cuối xử lý dữ liệu. \n- Đồng ý nhận xung nhịp. \n- VD cho thiết bị DTE trong một \n\nđường truyền thuê riêng : Router. \n- VD cho thiết bị DTE trong một \n\nmạng Dial Up: Computer. \n\n- Thiết bị kết cuối kênh số liệu. \n- Tạo ra các xung nhịp. \n- VD cho thiết bị DCE trong một đường \n\ntruyền thuê riêng : modem V.35 hoặc \nG.703 \n\n- VD cho thiết bị DCE trong một mạng \nDial Up: Modem Dial Up.  \n\n \n\n\n\n \n\n49 \nLưu hành nội bộ \n\n3.10 Những luật lưu ý khi thiết lập địa chỉ IP cho Router \n Các interface kết nối giữa 02 router với nhau cùng chung 01 mạng. \n Các interface trên 01 router phải thuộc các vùng mạng khác nhau. \n Các router trong cùng 01 mạng không nên đặt trùng dải mạng của nhau. \n\n \n3.11 Gán địa chỉ IP cho Router \n\n \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface s4/0 \nR1(config-if)#ip address 10.10.10.10 255.255.255.0 \nR1(config-if)# clock rate 64000 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#end \nR1# \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface s4/0 \nR2(config-if)#ip address 10.10.10.20 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface s4/1 \nR2(config-if)#ip address 20.20.20.20 255.255.255.0 \nR1(config-if)# clock rate 64000 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#end \nR2# \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#interface s4/0 \nR3(config-if)#ip address 20.20.20.30 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#end \nR3# \nWarning: Attempting to overwrite an NVRAM configuration previously written by a different \nversion of the system image. \nOverwrite the previous NVRAM configuration?[confirm] \n\n\n\n \n\n50 \nLưu hành nội bộ \n\n \n3.12 Lab : câu lệnh cơ bản trên Router + cấu hình gán địa chỉ IP trên Router \n\n(phân biệt cấu hình đặt địa chỉ IP khi sử dụng dây Serial và dây cáp mạng \nRJ45) \n\n \n\n  \n Cấu hình cơ bản và đặt địa chỉ IP cho Router \n\nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#hostname Router1 \nRouter1(config)#Banner motd \"He Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech\" \nRouter1(config)#enable password Bachkhoa-Aptech \nRouter1(config)#enable secret 123456a@ \nRouter1(config)#line console 0 \nRouter1(config-line)#password Bachkhoa-Aptech \nRouter1(config-line)#login \nRouter1(config-line)#exit \nRouter1(config)# \nRouter1(config)#line vty 0 4 \nRouter1(config-line)#password Bachkhoa-Aptech \nRouter1(config-line)#login \nRouter1(config-line)#exit \nRouter1(config)#line aux 0 \nRouter1(config-line)#password Bachkhoa-Aptech \nRouter1(config-line)#login \nRouter1(config-line)#exit \nRouter1(config)# \nRouter1(config)#service password-encryption \nRouter1(config)#interface serial 4/0 \nRouter1(config-if)#ip address 10.10.10.10 255.255.255.0 \nRouter1(config-if)#clock rate 64000 \nRouter1(config-if)#no shut \nRouter1(config-if)#exit \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#hostname Router2 \nRouter2(config)#banner motd \"He Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech\" \nRouter2(config)#enable password Bachkhoa-Aptech \nRouter2(config)#enable secret 123456a@ \nRouter2(config)#line console 0 \nRouter2(config-line)#password 1234567a@ \n\n\n\n \n\n51 \nLưu hành nội bộ \n\nRouter2(config-line)#login \nRouter2(config-line)#exit \nRouter2(config)# \nRouter2(config)#line vty 0 4 \nRouter2(config-line)#password 12345678a@ \nRouter2(config-line)#login \nRouter2(config-line)#exit \nRouter2(config)# \nRouter2(config)#line aux 0 \nRouter2(config-line)#password 123456789a@ \nRouter2(config-line)#login \nRouter2(config-line)#exit \nRouter2(config)# \nRouter2(config)#service password-encryption \nRouter2(config)#interface Serial 4/0 \nRouter2(config-if)#ip address 10.10.10.20 255.255.255.0 \nRouter2(config-if)#no shut \nRouter2(config-if)#exit \nRouter2(config)# \nRouter2(config)#interface fastEthernet 0/0 \nRouter2(config-if)#ip address 20.20.20.20 255.255.0.0 \nRouter2(config-if)#no shut \nRouter2(config-if)#exit \nRouter2(config)#end \nRouter2#wr \nRouter2# \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#hostname Router3 \nRouter3(config)#banner motd \"He Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech\" \nRouter3(config)#enable password 123456a@ \nRouter3(config)#enable secret 1234567a@ \nRouter3(config)#line console 0 \nRouter3(config-line)#password 12345678a@ \nRouter3(config-line)#login \nRouter3(config-line)#exit \nRouter3(config)# \nRouter3(config)#line vty 0 4 \nRouter3(config-line)#password 123456789a@ \nRouter3(config-line)#login \nRouter3(config-line)#exit \nRouter3(config)# \nRouter3(config)#line aux 0 \nRouter3(config-line)#password 1234567890a@ \nRouter3(config-line)#login \nRouter3(config-line)#exit \nRouter3(config)# \nRouter3(config)#service password-encryption \n\n\n\n \n\n52 \nLưu hành nội bộ \n\nRouter3(config)#interface fastEthernet 0/0 \nRouter3(config-if)#ip address 20.20.20.30 255.255.0.0 \nRouter3(config-if)#no shut \nRouter3(config-if)# \nRouter3(config-if)#exit \nRouter3(config)# \nRouter3(config)#end \nRouter3# \nRouter3#wr  \n\n Hiển thị thông tin bảng định tuyến và các địa chỉ đã đặt cho cổng mạng trên \nRouter \u2013 kiểm tra và sửa lỗi nếu có : \n\nRouter1#show ip route \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, Serial4/0  \nRouter1#show ip interface brief \nInterface                        IP-Address      OK?     Method     Status                               Protocol \nFastEthernet0/0             unassigned      YES     unset         administratively   down   down \nFastEthernet1/0             unassigned      YES     unset         administratively   down   down \nFastEthernet2/0             unassigned      YES     unset         administratively   down   down \nFastEthernet3/0             unassigned      YES     unset         administratively   down   down \nSerial4/0                       10.10.10.10     YES     manual     up                                      up Serial4/1                        unassigned      YES     unset         administratively   down   down \nSerial4/2                        unassigned      YES     unset         administratively   down   down \nSerial4/3                        unassigned      YES     unset         administratively   down   down \nVirtual-Access1            unassigned      YES     unset         up                                      up \nRouter2#show ip route \n     20.0.0.0/16 is subnetted, 1 subnets \nC       20.20.0.0 is directly connected, FastEthernet0/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, Serial4/0  \nRouter2#show ip interface brief \nInterface                        IP-Address      OK?   Method     Status                                 Protocol \nFastEthernet0/0             20.20.20.20     YES   manual     up                                       up \nFastEthernet1/0             unassigned      YES   unset         administratively    down    down \nFastEthernet2/0             unassigned      YES   unset         administratively    down    down \nFastEthernet3/0             unassigned      YES   unset         administratively    down    down \nSerial4/0                       10.10.10.20      YES   manual     up                                        up Serial4/1                        unassigned       YES   unset        administratively     down    down \nSerial4/2                        unassigned       YES   unset        administratively     down    down \nSerial4/3                        unassigned       YES   unset        administratively     down    down \nVirtual-Access1            unassigned       YES   unset        up                                         up \nRouter3#show ip route \n     20.0.0.0/16 is subnetted, 1 subnets \n\n\n\n \n\n53 \nLưu hành nội bộ \n\nC       20.20.0.0 is directly connected, FastEthernet0/0  \nRouter3#show ip interface brief \nInterface                        IP-Address      OK?     Method    Status                                  Protocol \nFastEthernet0/0          20.20.20.30     YES     manual     up                                        up FastEthernet1/0             unassigned      YES     unset        administratively     down    down \nFastEthernet2/0             unassigned      YES     unset        administratively     down    down \nFastEthernet3/0             unassigned      YES     unset        administratively     down    down \nSerial4/0                        unassigned      YES     unset        administratively     down    down \nSerial4/1                        unassigned      YES     unset        administratively     down    down \nSerial4/2                        unassigned      YES     unset        administratively     down    down \nSerial4/3                        unassigned      YES     unset        administratively     down    down \nVirtual-Access1            unassigned      YES     unset        up                                          up  \n\n3.13 Cable kết nối RJ45 \n \n\n  RJ45 là một chuẩn được quy định cho các loại cáp kết nối trong một hệ thống \nmạng. Kết nối RJ45 thường được thấy nhiều nhất ở cáp Ethernet và trong hệ \nthống mạng. \n\n Cáp RJ45 có điểm đặc trưng gồm 8 chân kết nối cho phép truyền tải các tín hiệu. \nChuẩn RJ45 xác định vị trí cần thiết của các dây khi được kết nối.  Có một vài chuẩn kết nối khác mà bạn có thể nhầm lẫn với chuẩn RJ45. Ví dụ \ntiêu biểu là RJ11 (được sử dụng để kết nối đến các điện thoại analog): Có hình \ndạng giống với chuẩn RJ45 nhưng kích thước nhỏ hơn & sử dụng 4 chân (pin) \nkết nối.  \n\n\n\n \n\n54 \nLưu hành nội bộ \n\nChương IV: Định tuyến (Routing) \nĐịnh tuyến động (Dynamic), định tuyến tĩnh (Static), định tuyến (Default). \n\n \n4.1 Định tuyến \n\n Là quá trình tìm kiếm và xác định đường đi tốt nhất tới một mạng đích. \n\n  \n4.2 Các phương pháp định tuyến \n\n Phương pháp định tuyến động (Dynamic Routing). \n Phương pháp định tuyến tĩnh (Static Routing). \n Phương pháp Default Route. \n\n \n4.3 Định tuyến tĩnh (Static Routing) \n\n Là phương pháp người quản trị phải cấu hình thủ công. \n Bắt buộc phải khai báo điểm đến trong mạng. \n Bảo mật. \n Sử dụng phù hợp cho các hệ thống mạng có quy mô nhỏ. \n Administrative Distance là bằng 0 hoặc 1. \n Nhược điểm :  \n\na. Chỉ phù hợp cho hệ thống mạng quy mô nhỏ. \nb. Toàn bộ những cấu hình cho hệ thống mạng đều là cấu hình thủ công. \nc. Khi hệ thống có sự thay đổi (có thêm tuyến đường mới hoặc một tuyến \n\nđường bị hỏng \u2013 ngắt) thì người quản trị sẽ phải thay đổi thông tin định \ntuyến trên tất cả router một cách thủ công. \n \n \n \n \n\n\n\n \n\n55 \nLưu hành nội bộ \n\n4.4 Cấu hình định tuyến tĩnh \n\n Cấu hình cơ bản \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.10.10 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#end \nR1# \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface fastEthernet 0/0 \nR2(config-if)#ip address 10.10.10.20 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface fastEthernet 1/0 \nR2(config-if)#ip address 20.20.20.20 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#end \nR2# \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#interface fastEthernet 0/0 \nR3(config-if)#ip address 20.20.20.30 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#end \nR3# \n\n \nKiểm tra thông tin bảng định tuyến trước khi cấu hình định tuyến tĩnh \n\nR1#show ip route \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \nR2#show ip route \n     20.0.0.0/24 is subnetted, 1 subnets \nC       20.20.20.0 is directly connected, FastEthernet1/0 \n     10.0.0.0/24 is subnetted, 1 subnets \n\n\n\n \n\n56 \nLưu hành nội bộ \n\nC       10.10.10.0 is directly connected, FastEthernet0/0 \nR3#show ip route \n     20.0.0.0/24 is subnetted, 1 subnets \nC       20.20.20.0 is directly connected, FastEthernet0/0 \n\n \nĐịnh tuyến tĩnh trên các Router \n\n- Cấu trúc lệnh : \nRouter(config)# ip route [mạng đích] [subnet mask] [exit interface | next hop] \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#ip route 20.20.20.0 255.255.255.0 10.10.10.20 \nR1(config)#end \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#ip route 10.10.10.0 255.255.255.0 20.20.20.20 \nR3(config)#end \n\n \n Sau khi cấu hình định tuyến tĩnh, kiểm tra thông tin bảng định tuyến bằng câu lệnh \n\n: [Show ip route] và xem thông tin. \n \nKiểm tra thông tin bảng định tuyến sau khi đã cấu hình định tuyến tĩnh \n\nR1#show ip route \n     20.0.0.0/24 is subnetted, 1 subnets \nS       20.20.20.0 [1/0] via 10.10.10.20      10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \nR3#show ip route \n     20.0.0.0/24 is subnetted, 1 subnets \nC       20.20.20.0 is directly connected, FastEthernet0/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nS       10.10.10.0 [1/0] via 20.20.20.20  \n\n4.5 Default Route \n Default Route sử dụng trong trường hợp không biết được đích đến của gói tin, thường \n\nđược sử dụng trong hệ thống Internet khi mà không biết đích đến. \n Được sử dụng tại các vị trí cuối trong hệ thống mạng. \n Là tuyến đường được ưu tiên cuối cùng trong việc định tuyến. \n Default routes có thể giúp cho việc làm giảm khối lượng thông tin mà bảng định \n\ntuyến cần phải có. \n \n \n \n \n\n\n\n \n\n57 \nLưu hành nội bộ \n\n4.6 Triển khai phương pháp Default Route  \n \n\n Cấu hình cơ bản \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.10.2 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#interface loopback 0 \nR1(config-if)#ip address 1.1.1.1 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)# \nR1(config)#interface loopback 1 \nR1(config-if)#ip address 3.3.3.3 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)# \nR1(config)#interface loopback 2 \nR1(config-if)#ip address 5.5.5.5 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#end \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface fastEthernet 0/0 \nR2(config-if)#ip address 10.10.10.20 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#interface loopback 0 \nR2(config-if)#ip address 2.2.2.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface loopback 1 \nR2(config-if)#ip address 4.4.4.4 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface loopback 2 \n\n\n\n \n\n58 \nLưu hành nội bộ \n\nR2(config-if)#ip address 6.6.6.6 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#end \nR2# \n\n \nVới phương pháp định tuyến tĩnh (thông tin đích đến được khai báo rõ ràng) \n\nR1(config)#ip route 2.2.2.0 255.255.255.0 10.10.10.20 \nR1(config)#ip route 4.4.4.0 255.255.255.0 10.10.10.20 \nR1(config)#ip route 6.6.6.0 255.255.255.0 10.10.10.20 \nR2(config)#ip route 1.1.1.0 255.255.255.0 10.10.10.10 \nR2(config)#ip route 3.3.3.0 255.255.255.0 10.10.10.10 \nR2(config)#ip route 5.5.5.0 255.255.255.0 10.10.10.10 \n\n \nThông tin bảng định tuyến sau khi triển khai cấu hình định tuyến tĩnh \n\nR1#show ip route \n     1.0.0.0/24 is subnetted, 1 subnets \nC       1.1.1.0 is directly connected, Loopback0 \n     2.0.0.0/24 is subnetted, 1 subnets \nS       2.2.2.0 [1/0] via 10.10.10.20      3.0.0.0/24 is subnetted, 1 subnets \nC       3.3.3.0 is directly connected, Loopback1 \n     4.0.0.0/24 is subnetted, 1 subnets \nS       4.4.4.0 [1/0] via 10.10.10.20      5.0.0.0/24 is subnetted, 1 subnets \nC       5.5.5.0 is directly connected, Loopback2 \n     6.0.0.0/24 is subnetted, 1 subnets \nS       6.6.6.0 [1/0] via 10.10.10.20      10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \nR2#show ip route \n     1.0.0.0/24 is subnetted, 1 subnets \nS       1.1.1.0 [1/0] via 10.10.10.10      2.0.0.0/24 is subnetted, 1 subnets \nC       2.2.2.0 is directly connected, Loopback0 \n     3.0.0.0/24 is subnetted, 1 subnets \nS       3.3.3.0 [1/0] via 10.10.10.10      4.0.0.0/24 is subnetted, 1 subnets \nC       4.4.4.0 is directly connected, Loopback1 \n     5.0.0.0/24 is subnetted, 1 subnets \nS       5.5.5.0 [1/0] via 10.10.10.10 \n     6.0.0.0/24 is subnetted, 1 subnets C       6.6.6.0 is directly connected, Loopback2 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0  \n\n\n\n \n\n59 \nLưu hành nội bộ \n\nVới phương pháp định tuyến mặc định (Default route) \nR1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 \nR2(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.10 \nCó thể hiểu đơn giản 2 câu lệnh này như sau : \n\n- Trên router 2 chúng ta có 3 đường loopback có địa chỉ là 2.2.2.2, 4.4.4.4 và 6.6.6.6. \nNếu theo phương pháp định tuyến tĩnh thông thường, muốn đi đến đường nào thì ta \nphải định tuyến tĩnh đến đường đó, tức là trỏ cho router biết là đích đến như thế nào. \nMục tiêu của Router 1 đi đến các đường loopback của Router 2 thì Router 1 phải trỏ \nstatic đến từng đường trên Router 2. Nhưng nếu dùng phương pháp định tuyến mặc \nđịnh thì ở đây thông tin đích đến là 0.0.0.0 0.0.0.0 tức là nó có thể bỏ qua thông tin \nđích đến, mà khi có gói tin đến Router 1, nó sẽ tự động đẩy toàn bộ gói tin đi đến cổng \n10.10.10.20, là cổng mà Router 2 kết nối với nó. Như vậy thì Router 2 sẽ nhận các gói \ntin Router 1 chuyển sang, và trong Router 2 đã có thông tin đích đến là những đường \nloopback. Quá trình chuyển gói tin thành công \n\n- Triển khai tương tự trên Router 2, đẩy gói tin về router 1 thông qua cổng 10.10.10.10 \n \n\nThông tin bảng định tuyến sau khi triển khai cấu hình định tuyến tĩnh mặc định \nR1#show ip route \n     1.0.0.0/24 is subnetted, 1 subnets \nC       1.1.1.0 is directly connected, Loopback0 \n     3.0.0.0/24 is subnetted, 1 subnets \nC       3.3.3.0 is directly connected, Loopback1 \n     5.0.0.0/24 is subnetted, 1 subnets \nC       5.5.5.0 is directly connected, Loopback2 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \nS*   0.0.0.0/0 [1/0] via 10.10.10.20 \nR2#show ip route \n     2.0.0.0/24 is subnetted, 1 subnets \nC       2.2.2.0 is directly connected, Loopback0 \n     4.0.0.0/24 is subnetted, 1 subnets \nC       4.4.4.0 is directly connected, Loopback1 \n     6.0.0.0/24 is subnetted, 1 subnets \nC       6.6.6.0 is directly connected, Loopback2 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \nS*   0.0.0.0/0 [1/0] via 10.10.10.10  \n\n \n \n \n \n \n\n\n\n \n\n60 \nLưu hành nội bộ \n\nChương V: Định tuyến động (Dynamic Routing) \n \n5.1 Định tuyến động (Dynamic Routing) \n\n Ưu điểm của định tuyến động (Dynamic Routing) so với định tuyến tĩnh (Static \nRouting) : \n\n1. Hoạt động nhờ vào quá trình truyền nhận các thông tin định tuyến được \nquảng bá từ các Router. \n\n2. Các Router hàng xóm (Router kết nối trực tiếp) trao đổi và xây dựng \nthông tin bảng định tuyến một cách tự động. \n\n3. Tự động cập nhật thông tin bảng định tuyến khi có sự thay đổi trong mô \nhình hệ thống mạng. \n\n4. Giảm công việc quản trị. \n5. Phù hợp với các hệ thống mạng lớn. \n\n  \n5.2 Các giao thức định tuyến động \n\n Distance-Vector Protocol. \n Link-State Protocol. \n Hybrid Protocol. \n\nDistance-Vector Protocol Link-State Protocol Hybrid Protocol \n- Hoạt động dựa trên thuật \n\ntoán Bellman Ford. \n- Cập nhật theo một chu kỳ. \n- Tự động trao đổi toàn bộ \n\nthông tin bảng định tuyến \n- Giao thức Classfull: \n\nRIPv1,IGRP. \n- Giao thức Classless: RIPv2, \n\nEIGRP. \n- Cập nhật thông qua bản tin \n\nBroadcast. \n- Sử dụng ít tài nguyên hệ \n\nthống. \n- Dễ dàng cấu hình. \n\n- Hoạt động dựa trên thuật \ntoán Dijktra. \n\n- Cập nhật không theo định \nkỳ, thông qua trạng thái \nhoạt động của đường link \nkết nối. \n\n- Cập nhật các thông tin còn \nthiếu nếu bảng định tuyến \nkhông có. \n\n- Giao thức Classless: OSPF, \nIS-IS. \n\n- Cập nhật thông qua bản tin \nMulticast. \n\n- Sử dụng một phần tài \nnguyên hệ thống. \n\n- Cấu hình hệ thống khó, cần \ncó kiến thức sâu rộng. \n\n- Hoạt động dựa trên thuật \ntoán DUAL. \n\n- Cập nhật không theo định \nkỳ. \n\n- Cập nhật các thông tin còn \nthiếu trong bảng định \ntuyến. \n\n- Là giao thức Classless. \n- Cập nhật thông qua bản tin \n\nMulticast. \n- VD: EIGRP. \n- Sử dụng ít tài nguyên hệ \n\nthống. \n- Dễ dàng cấu hình. \n\n \n5.3 Giao thức Classfull \n\n Giao thức định tuyến Classfull : khi cập nhật thông tin định tuyến thì các giao \nthức định tuyến Classfull sẽ không quảng bá Subnet mask đi kèm trong thông \ntin định tuyến. \n\n\n\n \n\n61 \nLưu hành nội bộ \n\n Cũng có nghĩa là toàn bộ tất cả các thiết bị trong hệ thống đều sử dụng chung \nmột subnet mask như nhau. \n\n VD : RIPv1, IGRP. \n \n\n5.4 Giao thức Classless \n Giao thức Classless : khi cập nhật thông tin định tuyến thì các giao thức định \n\ntuyến Classfull sẽ quảng bá Subnet mask đi kèm trong thông tin định tuyến. \n Hỗ trợ VLSM.  \n VD : RIPv2, EIGRP, OSPF, IS-IS. \n\n \n5.5 RIP (Routing Information Protocol) \n\n Là giao thức tiêu chuẩn mở rộng. \n Thuộc giao thức Distance \u2013 Vector. \n Cập nhật thông qua bản tin broadcast : 255.255.255.255 \n Metric : hop count, ≤ 15. \n Hỗ trợ cân bằng tải tối đa trên 4 đường có metric bằng nhau. \n Sử dụng cho mô hình mạng nhỏ. \n Trao đổi thông tin định tuyến định kỳ 30 giây. \n Administrative Distance = 120. \n\n \n5.6 Rip Timers \n\n Update timer (thời gian để gửi bản tin update thông tin) : 30s, là thời gian cho \nphép các router gửi bản tin update sang router hàng xóm để cập nhật thông tin. \n\n Invalid timer (thời gian không hợp lệ) : 180s , là thời gian cho phép router chờ \nđợi bản tin update. Thông tin update nếu không được phản hồi trong thời gian \nnày, toàn bộ các tuyến đường update sẽ không được xác định và loại bỏ. \n\n Flush timer : 240s, là thời gian mà trước khi các tuyến đường không hợp lệ sẽ \nbị xóa bỏ khỏi thông tin bảng định tuyến. \n\n Hold Down timer: 180s, là khoảng thời gian được tính từ khi router nhận được \nthông tin một route là unreachable. Trong khoảng thời gian này, router vẫn \ntiếp tục dùng route để forward gói tin và bỏ qua tất cả các thông tin cập nhật về \nroute đó với metric bằng hoặc lớn hơn metric router đang có. \n \n\n5.7 So sánh Ripv1 và Ripv2 \n \n\nRipv1 Ripv2 \n- Giao thức Classfull. \n- Không có cơ chế xác thực. \n- Sử dụng bản tin broadcast để cập nhật : \n\n255.255.255.255 \n\n- Giao thức Classless. \n- Hỗ trợ cơ chế xác thực. \n- Sử dụng địa chỉ multicast : 224.0.0.9 \n\n \n\n\n\n \n\n62 \nLưu hành nội bộ \n\n5.8 Ưu điểm của giao thức RIP \n Dễ dàng triển khai. \n Không hạn chế khả năng thiết kế (không giống như OSPF). \n Sử dụng ít tài nguyên hệ thống. \n\n \n5.9 Nhược điểm của giao thức RIP \n\n Tiêu tốn lớn băng thông trong quá trình gửi bản tin Broadcast mỗi 30s/ 1 lần. \n Hoạt động dựa trên giá trị hop count. \n Không có khả năng mở rộng vì giá trị cao nhất của Hop count = 15. \n Hội tụ mạng chậm. \n\n \n5.10 Bài Lab : cấu hình giao thức định tuyến Ripv1 \n\n \n\n Cấu hình cơ bản trên các Router \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.10.2 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#end \nR1# \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface fastEthernet 2/0 \nR2(config-if)#ip address 10.10.10.3 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface fastEthernet 1/0 \nR2(config-if)#ip address 172.16.1.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#end \nR2# \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#interface fastEthernet 0/0 \nR3(config-if)#ip address 172.16.1.3 255.255.255.0 \nR3(config-if)#no shut \n\n\n\n \n\n63 \nLưu hành nội bộ \n\nR3(config-if)#exit \nR3(config)#interface fastEthernet 1/0 \nR3(config-if)#ip address 192.168.1.2 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#end \nR3#wr \nR4#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR4(config)#interface fastEthernet 0/0 \nR4(config-if)#ip address 192.168.1.3 255.255.255.0 \nR4(config-if)#no shut \nR4(config-if)#exit \nR4(config)#end \nR4# \nR4#wr \n\n \nCấu hình giao thức RIPv1 \n\nCâu lệnh tổng quát : \nRouter(config)# router rip         (khởi chạy giao thức Rip trên Router) \nRouter(config-if)# network [dải địa chỉ Router kết nối trực tiếp]        (khai báo dải địa chỉ của \nRouter mang đi quảng bá và để các router khác cập nhật thông tin vào bảng định tuyến) \nR1(config)#router rip \nR1(config-router)#network 10.10.10.0 \nR1(config-router)#end \nR2(config)#router rip \nR2(config-router)#network 10.10.10.0 \nR2(config-router)#network 172.16.1.0 \nR2(config-router)#end \nR3(config)#router rip \nR3(config-router)#network 172.16.1.0 \nR3(config-router)#network 192.168.1.0 \nR3(config-router)#end \nR4(config)#router rip \nR4(config-router)#network 192.168.1.0 \nR4(config-router)#end \n\n \nKiểm tra thông tin bảng định tuyến \n\nR1#show ip route \n   R   172.16.0.0/16 [120/1] via 10.10.10.3, 00:00:13, FastEthernet0/0 \n          10.0.0.0/24 is subnetted, 1 subnets \n   C    10.10.10.0 is directly connected, FastEthernet0/0 \n   R    192.168.1.0/24 [120/2] via 10.10.10.3, 00:00:13, FastEthernet0/0 \nR2#show ip route \n           172.16.0.0/24 is subnetted, 1 subnets \n   C        172.16.1.0 is directly connected, FastEthernet1/0 \n\n\n\n \n\n64 \nLưu hành nội bộ \n\n           10.0.0.0/24 is subnetted, 1 subnets \n   C     10.10.10.0 is directly connected, FastEthernet2/0 \n   R     192.168.1.0/24 [120/1] via 172.16.1.3, 00:00:09, FastEthernet1/0 \nR3#show ip route \n          172.16.0.0/24 is subnetted, 1 subnets \n   C       172.16.1.0 is directly connected, FastEthernet0/0 \n   R    10.0.0.0/8 [120/1] via 172.16.1.2, 00:00:08, FastEthernet0/0 \n   C    192.168.1.0/24 is directly connected, FastEthernet1/0 \nR4#show ip route \n   R    172.16.0.0/16 [120/1] via 192.168.1.2, 00:00:08, FastEthernet0/0 \n   R    10.0.0.0/8 [120/2] via 192.168.1.2, 00:00:08, FastEthernet0/0 \n   C    192.168.1.0/24 is directly connected, FastEthernet0/0 \nNhận xét : thông tin bảng định tuyến trong này có phần không chính xác so với mô hình hiện \ntại đang triển khai. Chúng ta có thể thấy mô hình hiện tại đang triển khai bao gồm 3 dải địa chỉ \nIP là : 10.10.10.0/24, 172.16.1.0/24, 192.168.1.0/24. Nhưng thông tin được cập nhật trong các \nbảng định tuyến, tuyến đường 10.10.10.0/24 trở thành 10.0.0.0/8, tuyến đường 172.16.1.0/24 \ntrở thành 172.16.0.0/16. Đơn giản là vì chúng ta đang triển khai giao thức RipV1, mà Ripv1 \nlại là giao thức Classfull (không gửi kèm subnet mask trong bảng định tuyến). Vậy nên các \nRouter hàng xóm khi được nhận thông tin update nó sẽ tự gán subnet mask cho tuyến đường \nnó cập nhật theo Class IP. \n\n \n5.11 Cấu hình RIPv2 \n\n \n\n  \nCấu hình cơ bản trên các Router \n\nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.10.2 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#end \nR1# \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface fastEthernet 2/0 \nR2(config-if)#ip address 10.10.10.3 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \n\n\n\n \n\n65 \nLưu hành nội bộ \n\nR2(config)#interface fastEthernet 1/0 \nR2(config-if)#ip address 172.16.1.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#end \nR2# \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#interface fastEthernet 0/0 \nR3(config-if)#ip address 172.16.1.3 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#interface fastEthernet 1/0 \nR3(config-if)#ip address 192.168.1.2 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#end \nR4#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR4(config)#interface fastEthernet 0/0 \nR4(config-if)#ip address 192.168.1.3 255.255.255.0 \nR4(config-if)#no shut \nR4(config-if)#exit \nR4(config)#end \nR4# \n\n \nCấu hình giao thức Ripv2 \n\nCâu lệnh tổng quát : \nRouter(config)# router rip    (khởi chạy giao thức Rip trên Router) \nRouter(config-router)# version 2    (khai báo version 2 của giao thức Rip, với giao thức Ripv1, \nkhông cần khai báo version) \nRouter(config-router)# network [dải địa chỉ Router kết nối trực tiếp]    (khai báo dải địa chỉ \ncủa Router mang đi quảng bá và để các router khác cập nhật thông tin vào bảng định tuyến) \nRouter (config-router) no auto-summary    (tắt chế độ gộp các dải địa chỉ khi gửi thông tin \nbảng định tuyến update) \nR1(config)#router rip \nR1(config-router)#version 2 \nR1(config-router)#network 10.10.10.0 \nR1(config-router)#no auto-summary \nR1(config-router)#end \nR1# \nR2(config)#router rip \nR2(config-if)#version 2 \nR2(config-router)#network 10.10.10.0 \nR2(config-router)#network 172.16.1.0 \nR2(config-router)#no auto-summary \nR2(config-router)#end \n\n\n\n \n\n66 \nLưu hành nội bộ \n\nR3(config)#router rip \nR3(config-if)#version 2 \nR3(config-router)#network 172.16.1.0 \nR3(config-router)#network 192.168.1.0 \nR3(config-router)#no auto-summary \nR3(config-router)#end \nR4(config)#router rip \nR4(config-if)#version 2 \nR4(config-router)#network 192.168.1.0 \nR4(config-router)#no auto-summary \nR4(config-router)#end \n\n \nKiểm tra thông tin bảng định tuyến và thông tin giao thức đã triển khai \n\nR1#show ip route      \n     172.16.0.0/24 is subnetted, 1 subnets \nR       172.16.1.0 [120/1] via 10.10.10.3, 00:00:12, FastEthernet0/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \nR    192.168.1.0/24 [120/2] via 10.10.10.3, 00:00:10, FastEthernet0/0 \n \nR1#show ip protocol \nRouting Protocol is \"rip\" \n  Sending updates every 30 seconds, next due in 17 seconds \n  Invalid after 180 seconds, hold down 180, flushed after 240   Outgoing update filter list for all interfaces is not set \n  Incoming update filter list for all interfaces is not set \n  Redistributing: rip \n  Default version control: send version 2, receive version 2 \n    Interface             Send  Recv  Triggered RIP  Key-chain \n    FastEthernet0/0       2     2 \n  Automatic network summarization is not in effect \n  Maximum path: 4 \n  Routing for Networks: \n    10.0.0.0 \n  Routing Information Sources: \n    Gateway         Distance      Last Update \n    10.10.10.3           120      00:00:23 \n  Distance: (default is 120) \nR2#show ip route \n     172.16.0.0/24 is subnetted, 1 subnets \nC       172.16.1.0 is directly connected, FastEthernet1/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet2/0 \nR    192.168.1.0/24 [120/1] via 172.16.1.3, 00:00:08, FastEthernet1/0 \n \nR2#show ip protocol \nRouting Protocol is \"rip\" \n\n\n\n \n\n67 \nLưu hành nội bộ \n\n  Sending updates every 30 seconds, next due in 2 seconds \n  Invalid after 180 seconds, hold down 180, flushed after 240   Outgoing update filter list for all interfaces is not set \n  Incoming update filter list for all interfaces is not set \n  Redistributing: rip \n  Default version control: send version 2, receive version 2 \n    Interface             Send  Recv  Triggered RIP  Key-chain \n    FastEthernet1/0       2     2 \n    FastEthernet2/0       2     2 \n  Automatic network summarization is not in effect \n  Maximum path: 4 \n  Routing for Networks: \n    10.0.0.0 \n    172.16.0.0 \n  Routing Information Sources: \n    Gateway         Distance      Last Update \n    172.16.1.3           120      00:00:24 \n  Distance: (default is 120) \nR3#show ip route \n     172.16.0.0/24 is subnetted, 1 subnets \nC       172.16.1.0 is directly connected, FastEthernet0/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nR       10.10.10.0 [120/1] via 172.16.1.2, 00:00:01, FastEthernet0/0 \nC    192.168.1.0/24 is directly connected, FastEthernet1/0 \n \nR3#show ip protocol \nRouting Protocol is \"rip\" \n  Sending updates every 30 seconds, next due in 18 seconds \n  Invalid after 180 seconds, hold down 180, flushed after 240   Outgoing update filter list for all interfaces is not set \n  Incoming update filter list for all interfaces is not set \n  Redistributing: rip \n  Default version control: send version 2, receive version 2 \n    Interface             Send  Recv  Triggered RIP  Key-chain \n    FastEthernet0/0       2     2 \n    FastEthernet1/0       2     2 \n  Automatic network summarization is not in effect \n  Maximum path: 4 \n  Routing for Networks: \n    172.16.0.0 \n    192.168.1.0 \n  Routing Information Sources: \n    Gateway         Distance      Last Update \n    172.16.1.2           120      00:00:11 \n  Distance: (default is 120) \nR4#show ip route \n     172.16.0.0/24 is subnetted, 1 subnets \nR       172.16.1.0 [120/1] via 192.168.1.2, 00:00:17, FastEthernet0/0 \n\n\n\n \n\n68 \nLưu hành nội bộ \n\n     10.0.0.0/24 is subnetted, 1 subnets \nR       10.10.10.0 [120/2] via 192.168.1.2, 00:00:17, FastEthernet0/0 \nC    192.168.1.0/24 is directly connected, FastEthernet0/0 \n \nR4#show ip protocol \nRouting Protocol is \"rip\" \n  Sending updates every 30 seconds, next due in 21 seconds \n  Invalid after 180 seconds, hold down 180, flushed after 240   Outgoing update filter list for all interfaces is not set \n  Incoming update filter list for all interfaces is not set \n  Redistributing: rip \n  Default version control: send version 2, receive version 2 \n    Interface             Send  Recv  Triggered RIP  Key-chain \n    FastEthernet0/0       2     2 \n  Automatic network summarization is not in effect \n  Maximum path: 4 \n  Routing for Networks: \n    192.168.1.0 \n  Routing Information Sources: \n    Gateway         Distance      Last Update \n    192.168.1.2          120      00:00:21 \n  Distance: (default is 120) \n\n \n5.12 Administrative Distance \n\n Là chỉ số tin cậy của thông tin định tuyến khi các Router trao đổi với nhau. \n Giá trị của AD từ 0 đến 255. \n Giá trị càng nhỏ thì độ tin cậy càng lớn. \n Một vài giá trị AD mặc định. \n\n1. Đường kết nối trực tiếp (Directly Connected) = 0. \n2. Định tuyến tĩnh (Static Route) = 1. \n3. Giao thức IGRP = 100. \n4. Giao thức EIGRP = 90. \n5. Giao thức OSPF = 110. \n6. Giao thức Rip = 120. \n\n \n5.13 Autonomous System - AS \n\n Là tập hợp các router dưới quyền quản trị của 1 tổ chức, doanh nghiệp và có \nchung một chính sách định tuyến. \n\n Mỗi AS được định danh bằng một giá trị, gọi là Autonomous System Number \n(ASN). \n\n ASN có giá trị từ 1 \u2013 65535 \n1. Public AS : 1 \u2013 64512. \n2. Private AS : 64513 \u2013 65535. \n\n \n\n\n\n \n\n69 \nLưu hành nội bộ \n\n5.14 Phân loại giao thức định tuyến động \n \n\nIGP EGP \n- Interior Gateway Protocol. \n- Được sử dụng trong một miền tự trị \n\n(AS). \n- Các giao thức : RIP, IGRP, EIGRP, \n\nOSPF, IS \u2013 IS. \n\n- Exterior Gateway Protocol. \n- Được sử dụng giữa các miền tự trị \n\nkhác nhau. \n- Giao thức : BGP (Border Gateway \n\nProtocol). \n \n\n  \n5.15 Giao thức EIGRP (Enhanced Interior Gateway Routing Protocol) \n\n Là giao thức nâng cao của Distance Vector. \n Là giao thức tiêu chuẩn chỉ sử dụng cho các thiết bị của Cisco. \n Thuộc giao thức Classless. \n Bao gồm tất cả các tính năng của IGRP. \n Hop count tối đa là 255 (bản tin có thể đi qua tối đa 255 Router ). \n Administrative Distance = 90. \n Khả năng thiết kế hệ thống mạng linh hoạt. \n Phương thức truyền dữ liệu là multicast và unicast, thay thế cho broadcast. \n Dễ dàng cấu hình cho hệ thống mạng LAN và WAN. \n Cập nhật thông tin qua địa chỉ Multicast 224.0.0.10 \n\n\n\n \n\n70 \nLưu hành nội bộ \n\n Bản tin Hello gửi định kỳ 5 giây / 1 lần. \n Khả năng hội tụ nhanh. \n Hỗ trợ cho các giao thức IP (Internet Protocol), IPX (Internetwork Packet \n\neXchange), Apple Talk. \n Sử dụng thuật toán DUAL (Diffusion Update ALgorithm) để tính toán đường \n\nđi tốt nhất. \n Hỗ trợ loadbalancing cho cả 2 cơ chế equal cost và unequal cost. \n\n \n5.16 Bảng thông tin EIGRP : \n\n Bảng thông tin láng giềng (Neighbor Table) : \n1. Liệt kê các Router kết nối trực tiếp. \n2. Câu lệnh kiểm tra : show ip eigrp neighbor. \n\n Bảng mô hình liên kết: \n1. Bao gồm danh sách các đường định tuyến tốt nhất học đường từ router \n\nkhác. \n2. Câu lệnh kiểm tra : show ip eigrp topology \n\n Bảng thông tin định tuyến: \n1. Chứa đường đi tốt nhất đến đích. \n2. Câu lệnh kiểm tra : show ip route \n\n \n5.17 Chỉ số Metric của EIGRP \n\n Metric của EIGRP bao gồm 5 chỉ số : \n1. Bandwidth (BW) \u2013 băng thông. \n2. Delay \u2013 độ trễ. \n3. Load \u2013 khả năng truyền tải. \n4. Max Tranfers Unit (MTU) \u2013 đơn vị lớn nhất gói tin có thể truyền đi là \n\n1500 byte. \n5. Reliability \u2013 độ tin cậy. \n\n Mặc định sẽ sử dụng giá trị của Bandwidth và Delay để tính chỉ số Metric . \n Công thức tính chỉ số Metric khi giá trị K là mặc định : (K1 = 1, K2 = 0, K3 = \n\n1, K4 = 0 và K5 = 0). \nMetric = 1 ∗  ∗ 3 ∗  \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n71 \nLưu hành nội bộ \n\n5.18 Bài lab : cấu hình giao thức EIGRP \n\n  \nCâu lệnh giao thức EIGRP \n\nRouter(config)# router EIGRP [AS number] (khởi chạy giao thức EIGRP có AS number . . . . )   \nRouter(config-router)# network [dải địa chỉ kết nối trực tiếp trong giao thức EIGRP] [wildcard \nmask]         (khai báo dải địa chỉ trong EIGPR ) \n \nChú thích: Wildcard Mask \u2013 là một dải 32 bit nhị phân và được dùng để chỉ ra phần HostID \ncủa một mạng. Cách tìm Wildcard Mask : \nQuy đổi Subnet mask sang giá trị nhị phân. VD: Subnet Mask = 255.255.0.0. Ta quy đổi \nSubnet Mask từ giá trị Thập Phân về giá trị Nhị Phân. \n11111111.11111111.00000000.00000000 \nVì Subnet Mask và Wildcard Mask đối nghịch nhau, nên những bit nào ở Subnet Mask = 0 thì \nWildcard Mask = 1 và ngược lại \nVậy Wildcard Mask = 00000000.00000000.11111111.11111111 và kế tiếp chúng ta quy đổi về \ntừ giá trị Nhị Phân thành giá trị Thập Phân = 0.0.255.255 \n\n \nCấu hình cơ bản \n\nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface loopback 1 \nR1(config-if)#ip address 8.8.8.8 255.0.0.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#interface loopback 2 \nR1(config-if)#ip address 9.9.9.9 255.255.0.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.10.2 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface fastEthernet 1/0 \nR2(config-if)#ip address 10.10.10.3 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#interface fastEthernet 0/0 \nR2(config-if)#ip address 20.20.20.2 255.255.255.0 \n\n\n\n \n\n72 \nLưu hành nội bộ \n\nR2(config-if)#no shut \nR2(config-if)#exit \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#interface loopback 1 \nR3(config-if)#ip address 18.18.18.18 255.0.0.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#interface loopback 2 \nR3(config-if)#ip address 19.19.19.19 255.255.0.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)#interface fastEthernet 1/0 \nR3(config-if)#ip address 20.20.20.3 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \n\n \nCấu hình giao thức EIGRP \n\nR1(config)#router eigrp 123 \nR1(config-router)#network 8.8.8.0 0.255.255.255 \nR1(config-router)#network 9.9.9.0 0.0.255.255 \nR1(config-router)#network 10.10.10.0 0.0.0.255 \nR1(config-router)#no auto-summary \nR1(config-router)#end \nR2(config)#router eigrp 123 \nR2(config-router)#network 10.10.10.0 0.0.0.255 \nR2(config-router)#no auto-summary \nR2(config-router)#exit \nR2(config)#router eigrp 456 \nR2(config-router)#network 20.20.20.0 0.0.0.255 \nR2(config-router)#no auto-summary \nR2(config-router)#end \nR3(config)#router eigrp 456 \nR3(config-router)#network 18.18.18.0 0.255.255.255 \nR3(config-router)#network 19.19.19.0 0.0.255.255 \nR3(config-router)#network 20.20.20.0 0.0.0.255 \nR3(config-router)#no auto-summary \nR3(config-router)#end \n\n \nKiểm tra sau khi đã cấu hình \n\nR1#show ip eigrp neighbors \nIP-EIGRP neighbors for process 123 \nH   Address                 Interface       Hold Uptime   SRTT        RTO   Q        Seq      Type \n                                                         (sec)                (ms)                      Cnt     Num \n0   10.10.10.3              Fa0/0            12                    00:02:47    656     3936   0          4  \nR1#show ip route \n\n\n\n \n\n73 \nLưu hành nội bộ \n\nC    8.0.0.0/8 is directly connected, Loopback1 \n     9.0.0.0/16 is subnetted, 1 subnets \nC       9.9.0.0 is directly connected, Loopback2 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \n \nR1#show ip eigrp topology \nIP-EIGRP Topology Table for AS(123)/ID(9.9.9.9) \nP 9.9.0.0/16, 1 successors, FD is 128256 \n         via Connected, Loopback2 \nP 8.0.0.0/8, 1 successors, FD is 128256 \n         via Connected, Loopback1 \nP 10.10.10.0/24, 1 successors, FD is 28160 \n         via Connected, FastEthernet0/0 \nR2#show ip eigrp neighbors \nIP-EIGRP neighbors for process 123 \nH   Address                 Interface       Hold Uptime   SRTT        RTO  Q       Seq    Type \n                                                         (sec)                (ms)                     Cnt    Num \n0   10.10.10.2              Fa1/0            10                    00:04:54    36      216    0        2 IP-EIGRP neighbors for process 456 \nH   Address                 Interface       Hold Uptime   SRTT        RTO   Q        Seq   Type \n                                                         (sec)                (ms)                      Cnt     Num \n0   20.20.20.3              Fa0/0            14                    00:03:26    507     3042   0        2  \nR2#show ip route \n     19.0.0.0/16 is subnetted, 1 subnets \nD       19.19.0.0 [90/156160] via 20.20.20.3, 00:03:50, FastEthernet0/0 \nD    18.0.0.0/8 [90/156160] via 20.20.20.3, 00:03:50, FastEthernet0/0 \n     20.0.0.0/24 is subnetted, 1 subnets \nC       20.20.20.0 is directly connected, FastEthernet0/0 \nD    8.0.0.0/8 [90/156160] via 10.10.10.2, 00:05:14, FastEthernet1/0 \n     9.0.0.0/16 is subnetted, 1 subnets \nD       9.9.0.0 [90/156160] via 10.10.10.2, 00:05:14, FastEthernet1/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet1/0 \n \nR2#show ip eigrp topology \nIP-EIGRP Topology Table for AS(123)/ID(20.20.20.2) \nP 9.9.0.0/16, 1 successors, FD is 156160 \n         via 10.10.10.2 (156160/128256), FastEthernet1/0 \nP 8.0.0.0/8, 1 successors, FD is 156160 \n         via 10.10.10.2 (156160/128256), FastEthernet1/0 \nP 10.10.10.0/24, 1 successors, FD is 28160 \n         via Connected, FastEthernet1/0 \n \nIP-EIGRP Topology Table for AS(456)/ID(20.20.20.2) \nP 19.19.0.0/16, 1 successors, FD is 156160 \n         via 20.20.20.3 (156160/128256), FastEthernet0/0 \n\n\n\n \n\n74 \nLưu hành nội bộ \n\nP 18.0.0.0/8, 1 successors, FD is 156160 \n         via 20.20.20.3 (156160/128256), FastEthernet0/0 \nP 20.20.20.0/24, 1 successors, FD is 28160 \n         via Connected, FastEthernet0/0 \nR3#show ip eigrp neighbors \nIP-EIGRP neighbors for process 456 \nH   Address                 Interface       Hold Uptime   SRTT         RTO  Q        Seq    Type \n                                                         (sec)                 (ms)                     Cnt     Num \n0   20.20.20.2              Fa1/0            10                    00:07:15    1         4500   0        4  \nR3#show ip route \n     19.0.0.0/16 is subnetted, 1 subnets \nC       19.19.0.0 is directly connected, Loopback2 \nC    18.0.0.0/8 is directly connected, Loopback1 \n     20.0.0.0/24 is subnetted, 1 subnets \nC       20.20.20.0 is directly connected, FastEthernet1/0 \n \nR3#show ip eigrp topology \nIP-EIGRP Topology Table for AS(456)/ID(19.19.19.19) \nP 19.19.0.0/16, 1 successors, FD is 128256 \n         via Connected, Loopback2 \nP 18.0.0.0/8, 1 successors, FD is 128256 \n         via Connected, Loopback1 \nP 20.20.20.0/24, 1 successors, FD is 28160 \n         via Connected, FastEthernet1/0 \nNhận xét : thông qua bảng định tuyến và topology chúng ta có thể thấy \u2013 các router triển khai \nEIGRP trong cùng một AS trao đổi thông tin với nhau, nhưng khác AS thì không thể trao đổi \nthông tin. \n\n \nCấu hình cho phép các Router thuộc các vùng AS khác nhau trong EIGRP giao \n\ntiếp và trao đổi thông tin \nR2(config)#router eigrp 123 \nR2(config-router)#redistribute eigrp 456 \nR2(config-router)#exit \nR2(config)#router eigrp 456 \nR2(config-router)#redistribute eigrp 123 \nR2(config-router)#end \n\n  \nKiểm tra lại thông tin sau khi đã cho phép kết nối EIGRP các vùng AS khác nhau \nR1#show ip route \n     19.0.0.0/16 is subnetted, 1 subnets \nD EX    19.19.0.0 [170/158720] via 10.10.10.3, 00:00:15, FastEthernet0/0 \nD EX    18.0.0.0/8 [170/158720] via 10.10.10.3, 00:00:15, FastEthernet0/0 \n     20.0.0.0/24 is subnetted, 1 subnets \nD EX    20.20.20.0 [170/30720] via 10.10.10.3, 00:00:15, FastEthernet0/0 \nC    8.0.0.0/8 is directly connected, Loopback1 \n     9.0.0.0/16 is subnetted, 1 subnets \n\n\n\n \n\n75 \nLưu hành nội bộ \n\nC       9.9.0.0 is directly connected, Loopback2 \n     10.0.0.0/24 is subnetted, 1 subnets \nC       10.10.10.0 is directly connected, FastEthernet0/0 \n \nR1#show ip eigrp neighbors \nIP-EIGRP neighbors for process 123 \nH   Address                 Interface       Hold Uptime   SRTT      RTO   Q        Seq    Type \n                                                         (sec)                (ms)                    Cnt     Num \n0   10.10.10.3              Fa0/0            11                    00:13:32  530     3180   0         5  \nR1#show ip eigrp topology \nIP-EIGRP Topology Table for AS(123)/ID(9.9.9.9) \nP 19.19.0.0/16, 1 successors, FD is 158720 \n         via 10.10.10.3 (158720/156160), FastEthernet0/0 \nP 9.9.0.0/16, 1 successors, FD is 128256 \n         via Connected, Loopback2 \nP 8.0.0.0/8, 1 successors, FD is 128256 \n         via Connected, Loopback1 \nP 10.10.10.0/24, 1 successors, FD is 28160 \n         via Connected, FastEthernet0/0 \nP 18.0.0.0/8, 1 successors, FD is 158720 \n         via 10.10.10.3 (158720/156160), FastEthernet0/0 \nP 20.20.20.0/24, 1 successors, FD is 30720 \n         via 10.10.10.3 (30720/28160), FastEthernet0/0 \n \nR1#ping 18.18.18.18 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 18.18.18.18, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms \n \nR1#ping 19.19.19.19 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 19.19.19.19, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 36/36/36 ms \nR3#show ip route \n     19.0.0.0/16 is subnetted, 1 subnets \nC       19.19.0.0 is directly connected, Loopback2 \nC    18.0.0.0/8 is directly connected, Loopback1 \n     20.0.0.0/24 is subnetted, 1 subnets \nC       20.20.20.0 is directly connected, FastEthernet1/0 \nD EX 8.0.0.0/8 [170/158720] via 20.20.20.2, 00:01:10, FastEthernet1/0 \n     9.0.0.0/16 is subnetted, 1 subnets \nD EX    9.9.0.0 [170/158720] via 20.20.20.2, 00:01:10, FastEthernet1/0 \n     10.0.0.0/24 is subnetted, 1 subnets \nD EX    10.10.10.0 [170/30720] via 20.20.20.2, 00:01:10, FastEthernet1/0 \n \n\n\n\n \n\n76 \nLưu hành nội bộ \n\nR3#show ip eigrp neighbors \nIP-EIGRP neighbors for process 456 \nH   Address                 Interface       Hold Uptime   SRTT       RTO   Q      Seq     Type \n                                                         (sec)                 (ms)                   Cnt    Num \n0   20.20.20.2              Fa1/0            12                    00:13:14   48      288    0         5 \n R3#show ip eigrp topology \nIP-EIGRP Topology Table for AS(456)/ID(19.19.19.19) \nP 9.9.0.0/16, 1 successors, FD is 158720 \n         via 20.20.20.2 (158720/156160), FastEthernet1/0 \nP 19.19.0.0/16, 1 successors, FD is 128256 \n         via Connected, Loopback2 \nP 8.0.0.0/8, 1 successors, FD is 158720 \n         via 20.20.20.2 (158720/156160), FastEthernet1/0 \nP 10.10.10.0/24, 1 successors, FD is 30720 \n         via 20.20.20.2 (30720/28160), FastEthernet1/0 \nP 18.0.0.0/8, 1 successors, FD is 128256 \n         via Connected, Loopback1 \nP 20.20.20.0/24, 1 successors, FD is 28160 \n         via Connected, FastEthernet1/0 \n \nR3#ping 8.8.8.8 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 8.8.8.8, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms \n \nR3#ping 9.9.9.9 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 9.9.9.9, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/39/56 ms \n\n  \n5.19 OSPF \u2013 Open Shortest Path First \n\n OSPF được phát triển bởi Internet Engineerong Task Force (IETF) như một sự \nthay thế những nhược điểm và hạn chế của RIP. \n\n Là một giao thức chuẩn mở. \n Là một giao thức trạng thái đường link (Link state protocol). \n Là giao thức định tuyến classless. \n Sử dụng thuật toán \u201cDijkstra\u201d Shortes Path First (SPF) để xây dựng bảng định \n\ntuyến. \n Không giới hạn số lượng hop \u2013 count trong mạng. \n Metric là Cost (cost = 108/Bandwidth). \n Administrative Distance = 110. \n OSPF hỗ trợ VLSM và CIDR. \n\n\n\n \n\n77 \nLưu hành nội bộ \n\n Chỉ hỗ trợ Equal cost Loadbalacing. \n OSPF được chia thành các vùng (Area) để dễ dàng cho việc quản lý và kiểm \n\nsoát lưu lượng. \n Sử dụng địa chỉ Multicast 224.0.0.5 và 224.0.0.6 \n Thời gian hộ tụ nhanh. \n Các gói tin Hello được gửi mỗi 10s (Hello Intervals), Dead Intervals = 40s. \n\n  \n5.20 Thiết lập truyền thông hai chiều trong OSPF \n\n \n\n  \n \n \n \n \n \n \n \n\n\n\n \n\n78 \nLưu hành nội bộ \n\n5.21 Khám phá thông tin các dải địa chỉ trong mạng \n \n\n 5.22 Router-ID  \n Là giá trị định danh cho một router khi tham gia vào miền OSPF. \n Nếu các interface loopback được cấu hình trên router, thì địa chỉ IP cao nhất \n\ntrong các IP này sẽ được sử dụng làm Router \u2013 ID. \n Nếu các interfacce loopback không được cấu hình, thì địa chỉ IP cao nhất của \n\ncác interface vật lý đang active sẽ được sử dụng làm router \u2013 ID. \n Người ta sử dụng địa chỉ loopback vì những lý do sau: \n\n1. Loopback interface ổn định hơn các interface vật lý. \n2. Inteface loopback chỉ fail chỉ khi toàn bộ router fail. \n\n \n5.23 Thêm một Entries trạng thái đường Link \n\n \n\n  \n \n\n\n\n \n\n79 \nLưu hành nội bộ \n\n5.24 OSPF tables \n Neighbor Tables :  \n\na. Được biết như là cơ sở dữ liệu liền kề (adjacency database). \nb. Lưu danh sách các router láng giềng (neighbor). \nc. # show ip ospf neighbor. \n\n Database Table \na. Thường được gọi là LSDB (Link state database). \nb. Lưu thông tin của tất cả tuyến đường khả thi tới các mạng trong area. \nc. # show ip ospf database \n\n Routing Table \na. Lưu danh sách các đường đi tốt nhất tới các mạng đích. \nb. Show ip route. \n\n \n5.25 Các vùng OSPF (OSPF Areas) \n\n Bao gồm tất cả các router có cùng thông tin, dữ liệu. \n Có bất cứ thay đổi nào cũng sẽ tác động đến toàn bộ các router. \n Vùng (Area) được coi như là một nhóm nội vùng của Router. \n\n  \n5.26 Những vấn đề có thể xảy ra trong quá trình duy trì mạng lưới OSPF \n\n \n\n  \n \n \n\n\n\n \n\n80 \nLưu hành nội bộ \n\n5.27 Giải pháp : phân cấp định tuyến trong OSPF \n Làm giảm , tối ưu hóa thông tin. \n Hạn chế những sự thay đổi phát sinh trong vùng (không làm tràn thông tin ra \n\nbên ngoài vùng). \n Các Router cùng được triển khai trong một vùng góp phần tính toán trong thuật \n\ntoán. \n \n\n \n \n5.28 Các vùng trong OSPF (OSPF Areas) \n\n Vùng \u2013 là một nhóm các routers (Vùng hay khu vực cần thống nhất). \n OSPF cung cấp cơ chế cho phép thiết kế mạng phân cấp với nhiều vùng khác \n\nnhau. \n Tất cả các Router giữ chung các thông tin giống nhau sẽ ở trong cùng một vùng. \n Bất cứ sự thay đổi nào trong một vùng sẽ tác động lên các Router trong vùng đó. \n Luật : \n\na. Phải có 1 area gọi là area 0 (gọi là Area chính - Backbone). \nb. Tất cả các Area khác đều phải kết nối đến Area 0. \nc. Phải có ít nhất 1 Router làm Router biên (kết nối giữa các vùng). \nd. Các Interfaces của một Router phải trong cùng một Area. \n\n \n\n\n\n \n\n81 \nLưu hành nội bộ \n\n  \n5.29 Ưu điểm của giao thức OSPF  \n\n Tiêu chuẩn mở : có thể triển khai trên nhiều loại router của các hãng khác nhau. \n Không giới hạn số router triển khai. \n Không gây ra hiện tượng bị loop mạng. \n Hội tụ nhanh hơn. \n\n \n5.30 Nhược điểm của giao thức OSPF \n\n Tiêu thụ một lượng lớn tài nguyên CPU. \n Thiết kế khá phức tạp. \n Chỉ hỗ trợ cân bằng tải cho các đường có cost bằng nhau. \n Hỗ trợ cho giao thức IP, không hỗ trợ cho IXP và AppleTalk. \n\n \n5.31 Bài Lab : OSPF đơn vùng (1 area )  \n\n \n\n  \nCấu hình cơ bản \n\nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.12.1 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \n\n\n\n \n\n82 \nLưu hành nội bộ \n\nR2(config)#interface fastEthernet 1/0 \nR2(config-if)#ip address 10.10.12.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface fastEthernet 0/0 \nR2(config-if)#ip address 10.10.23.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR3(config)#interface fastEthernet 1/0 \nR3(config-if)#ip address 10.10.23.3 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)# \n\n \nCâu lệnh tổng quát của giao thức OSPF \n\nR1(config)#router ospf 1 (khởi chạy giao thức OSPF trên Router và gán cho 1 process-id như \nlà một tên gọi) \nR1(config-router)#network [dải địa chỉ kết nối trực tiếp trong giao thức OSPF] [Widecard \nMask của dải địa chỉ đó] [area đang triển khai] \nR1(config-router)#end \n\n \nTriển khai giao thức OSPF area 0 trên các Router \n\nR1(config)#router ospf 1 \nR1(config-router)#network 10.10.12.0 0.0.0.255 area 0 \nR1(config-router)#end \nR2(config)#router ospf 1 \nR2(config-router)#network 10.10.12.0 0.0.0.255 area 0 \nR2(config-router)#network 10.10.23.0 0.0.0.255 area 0 \nR2(config-router)#end \nR3(config)#router ospf 1 \nR3(config-router)#network 10.10.23.0 0.0.0.255 area 0 \nR3(config-router)#end \n\n \nKiểm tra giao thức OSPF  \n\nR1#show ip ospf neighbor \nNeighbor ID     Pri   State                 Dead Time   Address          Interface \n10.10.23.2        1      FULL/DR         00:00:39      10.10.12.2      FastEthernet0/0  \nR1#show ip route \n     10.0.0.0/24 is subnetted, 2 subnets \nC       10.10.12.0 is directly connected, FastEthernet0/0 \nO       10.10.23.0 [110/2] via 10.10.12.2, 00:04:06, FastEthernet0/0  \nR1#show ip ospf interface \n\n\n\n \n\n83 \nLưu hành nội bộ \n\nFastEthernet0/0 is up, line protocol is up \n  Internet Address 10.10.12.1/24, Area 0 \n  Process ID 1, Router ID 10.10.12.1, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State BDR, Priority 1 \n  Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 \n  Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:06 \n  Index 1/1, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.23.2  (Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nR1#ping 10.10.23.3 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 10.10.23.3, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 64/68/84 ms \nR2#show ip ospf neighbor \nNeighbor ID     Pri   State                 Dead Time     Address          Interface \n10.10.23.3        1      FULL/DR         00:00:35        10.10.23.3      FastEthernet0/0 \n10.10.12.1        1      FULL/BDR       00:00:35       10.10.12.1       FastEthernet1/0  \nR2#show ip ospf interface \nFastEthernet0/0 is up, line protocol is up \n  Internet Address 10.10.23.2/24, Area 0 \n  Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State BDR, Priority 1 \n  Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 \n  Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:05 \n  Index 2/2, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.23.3  (Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nFastEthernet1/0 is up, line protocol is up \n  Internet Address 10.10.12.2/24, Area 0 \n  Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 \n\n\n\n \n\n84 \nLưu hành nội bộ \n\n  Transmit Delay is 1 sec, State DR, Priority 1 \n  Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 \n  Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:04 \n  Index 1/1, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.12.1  (Backup Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nR2#show ip route \n     10.0.0.0/24 is subnetted, 2 subnets \nC       10.10.12.0 is directly connected, FastEthernet1/0 \nC       10.10.23.0 is directly connected, FastEthernet0/0 \nR3#show ip ospf neighbor \nNeighbor ID     Pri   State                   Dead Time   Address         Interface \n10.10.23.2        1      FULL/BDR        00:00:36      10.10.23.2      FastEthernet1/0  \nR3#show ip ospf interface \nFastEthernet1/0 is up, line protocol is up \n  Internet Address 10.10.23.3/24, Area 0 \n  Process ID 1, Router ID 10.10.23.3, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State DR, Priority 1 \n  Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 \n  Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:01 \n  Index 1/1, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.23.2  (Backup Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nR3#show ip route \n     10.0.0.0/24 is subnetted, 2 subnets \nO       10.10.12.0 [110/2] via 10.10.23.2, 00:08:47, FastEthernet1/0 C       10.10.23.0 is directly connected, FastEthernet1/0 \n \nR3#ping 10.10.12.1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 10.10.12.1, timeout is 2 seconds: \n\n\n\n \n\n85 \nLưu hành nội bộ \n\n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 64/71/96 ms \n\n \n5.32 Bài lab : OSPF đa vùng \n\n \n\n Cấu hình cơ bản \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip address 10.10.12.1 255.255.255.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)# \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#interface fastEthernet 1/0 \nR2(config-if)#ip address 10.10.12.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR2(config)#interface fastEthernet 0/0 \nR2(config-if)#ip address 10.10.23.2 255.255.255.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)# \nR3#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR3(config)#interface fastEthernet 1/0 \nR3(config-if)#ip address 10.10.23.3 255.255.255.0 \nR3(config-if)#no shut \nR3(config-if)#exit \nR3(config)# \n\n \nTriển khai giao thức OSPF area 0 trên các Router \n\nR1(config)#router ospf 1 \nR1(config-router)#network 10.10.12.0 0.0.0.255 area 0 \nR1(config-router)#end \n\n\n\n \n\n86 \nLưu hành nội bộ \n\nR2(config)#router ospf 1 \nR2(config-router)#network 10.10.12.0 0.0.0.255 area 0 \nR2(config-router)#network 10.10.23.0 0.0.0.255 area 1 \nR2(config-router)#end \nR3(config)#router ospf 1 \nR3(config-router)#network 10.10.23.0 0.0.0.255 area 1 \nR3(config-router)#end \n\n \nKiểm tra giao thức OSPF  \n\nR1#show ip ospf neighbor \nNeighbor ID     Pri   State                  Dead Time     Address          Interface \n10.10.23.2        1      FULL/DR         00:00:38         10.10.12.2      FastEthernet0/0  \nR1#show ip ospf interface \nFastEthernet0/0 is up, line protocol is up \n  Internet Address 10.10.12.1/24, Area 0 \n  Process ID 1, Router ID 10.10.12.1, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State BDR, Priority 1 \n  Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 \n  Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:07 \n  Index 1/1, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.23.2  (Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nR1#show ip route \n     10.0.0.0/24 is subnetted, 2 subnets \nC       10.10.12.0 is directly connected, FastEthernet0/0 \nO IA    10.10.23.0 [110/2] via 10.10.12.2, 00:00:10, FastEthernet0/0  \nR1#ping 10.10.23.3 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 10.10.23.3, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 60/64/68 ms \nR2#show ip ospf neighbor \nNeighbor ID     Pri   State                   Dead Time   Address          Interface \n10.10.12.1        1      FULL/BDR        00:00:38      10.10.12.1      FastEthernet1/0 \n10.10.23.3        1      FULL/DR           00:00:34      10.10.23.3      FastEthernet0/0  \nR2#show ip ospf interface \n\n\n\n \n\n87 \nLưu hành nội bộ \n\nFastEthernet1/0 is up, line protocol is up \n  Internet Address 10.10.12.2/24, Area 0 \n  Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State DR, Priority 1 \n  Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 \n  Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:09 \n  Index 1/1, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.12.1  (Backup Designated Router) \n  Suppress hello for 0 neighbor(s) \n \n \nFastEthernet0/0 is up, line protocol is up \n  Internet Address 10.10.23.2/24, Area 1 \n  Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State BDR, Priority 1 \n  Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 \n  Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:01 \n  Index 1/2, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.23.3  (Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nR2#show ip route \n     10.0.0.0/24 is subnetted, 2 subnets \nC       10.10.12.0 is directly connected, FastEthernet1/0 \nC       10.10.23.0 is directly connected, FastEthernet0/0 \nR3#show ip ospf neighbor \nNeighbor ID     Pri   State                   Dead Time   Address         Interface \n10.10.23.2        1      FULL/BDR        00:00:37      10.10.23.2      FastEthernet1/0  \nR3#show ip ospf interface \nFastEthernet1/0 is up, line protocol is up \n  Internet Address 10.10.23.3/24, Area 1 \n  Process ID 1, Router ID 10.10.23.3, Network Type BROADCAST, Cost: 1 \n  Transmit Delay is 1 sec, State DR, Priority 1 \n\n\n\n \n\n88 \nLưu hành nội bộ \n\n  Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 \n  Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 \n  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 \n    oob-resync timeout 40 \n    Hello due in 00:00:04 \n  Index 1/1, flood queue length 0 \n  Next 0x0(0)/0x0(0) \n  Last flood scan length is 1, maximum is 1 \n  Last flood scan time is 0 msec, maximum is 0 msec \n  Neighbor Count is 1, Adjacent neighbor count is 1 \n    Adjacent with neighbor 10.10.23.2  (Backup Designated Router) \n  Suppress hello for 0 neighbor(s) \n \nR3#show ip route \n     10.0.0.0/24 is subnetted, 2 subnets \nO IA    10.10.12.0 [110/2] via 10.10.23.2, 00:03:49, FastEthernet1/0 C       10.10.23.0 is directly connected, FastEthernet1/0 \n \nR3#ping 10.10.12.1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 10.10.12.1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 64/64/68 ms \n\n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n89 \nLưu hành nội bộ \n\nChương VI: Access Control List \n \n\n6.1 Access Control List (ACL) \u2013 kiểm soát truy cập \n ACL là việc triển khai những luật cho phép đồng ý hoặc không đồng ý những \n\nkết nối cụ thể giữa các thiết bị định tuyến. \n Đó là sự bảo mật cho các thiết bị ở tầng 3 (layer 3) mà nó kiểm soát khả năng \n\nkết nối từ thiết bị định tuyến đến các thiết bị khác . \n Còn được gọi là Packet Filtering Firewall. \n\n \n\n  \n6.2 Các dạng Access-list \n\n \n\n  \n \n \n\n\n\n \n\n90 \nLưu hành nội bộ \n\n \nSTANDARD ACCESS LIST EXTENDED ACCESS LIST \n\n- Dải số cho Standard Access List từ 1 \u2013 99 \n- Có thể chặn được Network, Host và \n\nSubnet. \n- Chặn toàn bộ các dịch vụ. \n- Thực hiện tại điểm gần nhất với đích. \n- Cơ chế lọc được thực hiện dựa trên địa chỉ \n\nIP nguồn . \n\n- Dải số cho Extended Access List từ 100 \u2013 \n199 \n\n- Người quản trị có thể đồng ý hoặc chặn bất \ncứ một Network, Host, Subnet và cả dịch \nvụ. \n\n- Được lựa chọn các dịch vụ muốn chặn \n- Cơ chế lọc được thực hiện dựa trên địa chỉ \n\nIP nguồn, địa chỉ IP đích, giao thức, cổng  \n \n\n6.3 Bài lab : cơ bản Access-list \n\n  \nKiểm tra kết nối trước khi triển khai Access-list \n\nR1#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 48/52/56 ms \nR4#ping 12.12.12.1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 12.12.12.1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 48/51/52 ms \n\n \nTriển khai Access-list trên Router 3 chặn kết nối từ Router 1 đến Router 4 \n\nR3(config)#access-list 14 deny 12.12.12.1 0.0.0.0 \nR3(config)#access-list 14 permit any \nR3(config)#interface f0/0 \nR3(config-if)#ip access-group 14 out \nChú thích : Trên Router 3 khởi tạo một Access-list cos ID 14 thực hiện chặn (deny) từ địa chỉ \n12.12.12.1 có wildcast mask là 0.0.0.0. Trên sơ đồ kết nối cổng FastEthernet 0/0 của Router 3 \nlà cổng đưa thông tin ra khi chuyển thông tin từ Router 1 → Router 2 → Router 3 và đến đích \nlà Router 4. Nên trên Router 3 chúng ta cho phép áp dụng Access-list cho cổng F0/0 xác định \nlà cổng OUT \n\n \nKiểm tra kết nối sau khi triển khai Access-list \n\nR1#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n\n\n\n \n\n91 \nLưu hành nội bộ \n\nUUUUU \nSuccess rate is 0 percent (0/5) \nR2#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/43/56 ms \n R3#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 24/32/36 ms \n\n \n6.4 Bài lab : Access-list nâng cao \n\n \nTriển khai kết nối các thiết bị trong hệ thống , kiểm tra kết nối và telnet từ \n\nComputer đến Router 3 \nComputer#ping 23.23.23.3 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 23.23.23.3, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 48/51/52 ms \n____________________________________________________________________________ \nComputer#telnet 23.23.23.3 \nTrying 23.23.23.3 ... Open \nUser Access Verification \nPassword: \nR3>enable \nR3# \n\n \n\n\n\n \n\n92 \nLưu hành nội bộ \n\nTriển khai Access-list Extended cho phép chặn chế độ telnet từ Computer đến \nRouter 3 (23.23.23.3) \n\nR1(config)# access-list 100 deny tcp 10.10.10.10 0.0.0.0 23.23.23.3 0.0.0.0 eq 23 \nR1(config)# access-list 100 permit any any \nR1(config)#interface FastEthernet 0/0 \nR1(config-if)#ip access-group 100 out \nR1(config-if)#end \n\n \nKiểm tra lại kết nối sau khi đã khởi tạo Access-list \n\nComputer# telnet 23.23.23.3 \nTrying 23.23.23.3 ... \n% Destination unreachable; gateway or host down \nR1#show access-list \nExtended IP access list 100 \n10 deny tcp 10.10.10.0 0.0.0.0 23.23.23.0 0.0.0.0 eq telnet (4 matches)  \n\n6.5 Named Access-list \n Access-list cũng được xác định khi sử dụng tên thay cho chỉ số. \n Sử dụng tên của Access-list trong một vài trường hợp đặc biệt. \n Không giới hạn chỉ số cho những trường hợp sử dụng Named Access-list \n Một trong những ưu điểm mới của ACL là cho phép kiểm soát băng thông và \n\ntuyến đường trên hệ thống. \n Những phiên bản hỗ trợ Name ACL : từ phiên bản IOS 11.2 trở lên. \n\n \n6.6 Bài Lab : Named ACL \n\n \n \n\nKiểm tra kết nối trước khi triển khai Access-list \nR1#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 48/52/56 ms \nR4#ping 12.12.12.1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 12.12.12.1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 48/51/52 ms \n\n \n\n\n\n \n\n93 \nLưu hành nội bộ \n\nTriển khai Access-list trên Router 3 chặn kết nối từ Router 1 đến Router 4 có tên \nlà  : \u201cDenyR1toR4\u201d \n\nR3(config)#ip access-list standard DenyR1toR4 \nR3(config-std-nacl)#deny 12.12.12.1 0.0.0.0 \nR3(config-std-nacl)#permit any \nR3(config-std-nacl)#exit \nR3(config)#interface f0/0 \nR3(config-if)#ip access-group DenyR1toR4 out \nR3(config-if)#exit \nR3(config)# \nChú thích : Trên Router 3 khởi tạo một Access-list có tên là DenyR1toR4 chặn Router 1 kết \nnối và gửi gói tin đến Router 4 \n\n \nKiểm tra kết nối trước sau khi triển khai Access-list \n\nR1#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \nUUUUU \nSuccess rate is 0 percent (0/5) \nR2#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/43/56 ms \n R3#ping 34.34.34.4 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 24/32/36 ms  \n\n \n \n \n \n \n \n\n\n\n \n\n94 \nLưu hành nội bộ \n\nChương VII: NAT \n7.1 NAT (Network address translation)  \n\n NAT là một phương pháp cho phép dịch chuyển từ địa chỉ IP này thành địa chỉ \nIP khác. \n\n Để có thể giao tiếp \u2013 trao đổi thông tin với hệ thống Internet, chúng ta phải  \nđăng ký địa chỉ IP Public. \n\n Địa chỉ chuyển đổi để giải quyết các vấn đề như sau : \na. Xử lý sự thiếu hụt trầm trọng của địa chỉ IPV4 hiện tại. \nb. Che dấu các hệ thống mạng triển khai trong doanh nghiệp. \n\n \n\n  \n7.2 Dải địa chỉ IP Private \n\n Class A : 10.0.0.0 đến 10.255.255.255 \n Class B : 172.16.0.0 đến 172.31.255.255 \n Class C : 192.168.0.0 đến 192.168.255.255 \n\n \n7.3 Các dạng cơ bản của NAT \n\n Static Nat. \n Dynamic Nat. \n Port Address Translation (PAT). \n\n \n7.4 Static NAT \n\n Thực hiện việc ánh xạ địa chỉ theo cách thủ công (từ một \u2013 đến \u2013 một). \n Với mỗi địa chỉ IP private đều phải có một địa chỉ đã đăng ký trên hệ thống \n\nInternet. Tức là khi muốn ánh xạ địa chỉ IP Private sẽ cần có một địa chỉ đã \nđăng ký trên Internet. \n\n\n\n \n\n95 \nLưu hành nội bộ \n\n \n7.5 Dynamic NAT \n\n Thực hiện việc ánh xạ địa chỉ bằng cách tự động (từ một \u2013 đến \u2013 một). \n Khi muốn ánh xạ địa chỉ IP Private sẽ cần có một địa chỉ đã đăng ký trên \n\nInternet. \n \n\n7.6 Port Address Translasion (Dynamic Nat Overload) \n Toàn bộ các User muốn kết nối đến Internet đều chỉ cần sử dụng đúng một địa \n\nchỉ trên toàn cầu . \n Ánh xạ theo việc từ nhiều \u2013 đến \u2013 một , bằng việc sử dụng các port khác nhau. \n PAT là lí do khiến cho chúng ta không bị thiếu hụt địa chỉ IP Internet. \n\n \n\n  \n \n \n \n \n \n\n\n\n \n\n96 \nLưu hành nội bộ \n\n7.7 Bài Lab : Static NAT \n \n\n  \nPrivate IP Public IP \n192.168.1.2 55.55.55.2 \n192.168.1.3 55.55.55.3 \n\n \n \n \n\nCấu hình NAT Static \nR1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 \nR2(config)#ip route 55.55.55.0 255.255.255.0 10.10.10.10 \nR1(config)#ip nat inside source static 192.168.1.2 55.55.55.2 \nR1(config)#ip nat inside source static 192.168.1.3 55.55.55.3 \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip nat inside \nR1(config-if)#exit \nR1(config)# \nR1(config)#interface fastEthernet 1/0 \nR1(config-if)#ip nat outside \nR1(config-if)#exit \nR1(config) \n\n \n \n\nKiểm tra NAT \nR1#show ip nat translations \nPro Inside global      Inside local       Outside local      Outside global \n--- 55.55.55.2         192.168.1.2        ---                --- \n--- 55.55.55.3         192.168.1.3        ---                --- \nC:\\Users\\Com1>ping 172.16.1.2 \nPinging 172.16.1.2 with 32 bytes of data: \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n \n \n\n\n\n \n\n97 \nLưu hành nội bộ \n\nC:\\Users\\Com1>ping 172.16.1.3 \nPinging 172.16.1.3 with 32 bytes of data: \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \n \n7.8 Bài Lab : Dynamic NAT \n\n \n\n  \nPrivate IP Public IP \n192.168.1.2 Pool : 55.55.55.1 → 55.55.55.200 \n192.168.1.3 \n\n \nCấu hình Dynamic Static \n\nR1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 \nR2(config)#ip route 55.55.55.0 255.255.255.0 10.10.10.10 \nR1(config)#access-list 55 permit 192.168.1.0 0.0.0.255 \nR1(config)#ip nat pool Bachkhoa-Aptech 55.55.55.1 55.55.55.200 netmask 255.255.255.0 \nR1(config)#ip nat inside source list 55 pool Bachkhoa-Aptech  \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip nat inside \nR1(config-if)#exit \nR1(config)# \nR1(config)#interface fastEthernet 1/0 \nR1(config-if)#ip nat outside \nR1(config-if)#exit \n \n\nKiểm tra Dynamic NAT \nC:\\Users\\Com1>ping 172.16.1.2 \nPinging 172.16.1.2 with 32 bytes of data: \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n \n\n\n\n \n\n98 \nLưu hành nội bộ \n\nC:\\Users\\Com2>ping 172.16.1.3 \nPinging 172.16.1.3 with 32 bytes of data: \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \nR1#show ip nat translations \nPro Inside global      Inside local       Outside local      Outside global \n--- 55.55.55.2           192.168.1.2        ---                --- \n--- 55.55.55.3           192.168.1.3        ---                --- \n \n\nClear Dynamic NAT ( cho phép nhận một địa chỉ NAT khác khi kết nối lại dịch vụ) \nR1#clear ip nat translation * \nC:\\Users\\Com1>ping 172.16.1.2 \nPinging 172.16.1.2 with 32 bytes of data: \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n \nC:\\Users\\Com2>ping 172.16.1.3 \nPinging 172.16.1.3 with 32 bytes of data: \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \nR1#show ip nat translation \nPro Inside global      Inside local       Outside local      Outside global \n--- 55.55.55.6         192.168.1.3        ---                --- \n--- 55.55.55.7         192.168.1.2        ---                --- \n \n7.9 Bài Lab : Port Address Translation \n\n \n\n Private IP Public IP \n192.168.1.2 55.55.55.2 192.168.1.3 \n\n\n\n \n\n99 \nLưu hành nội bộ \n\n \nKiểm tra Port Address Translation \n\nC:\\Users\\Com1>ping 172.16.1.2 \nPinging 172.16.1.2 with 32 bytes of data: \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 \n \nC:\\Users\\Com2>ping 172.16.1.3 \nPinging 172.16.1.3 with 32 bytes of data: \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 \n   Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 \nR1#show ip nat translations \nPro     Inside global        Inside local            Outside local         Outside global \nicmp  55.55.55.2:5701   192.168.1.2:5701   172.16.1.2:5701    172.16.1.2:5701 \nicmp  55.55.55.2:5702   192.168.1.2:5702   172.16.1.2:5702    172.16.1.2:5702 \nicmp  55.55.55.2:5703   192.168.1.2:5703   172.16.1.2:5703    172.16.1.2:5703 \nicmp  55.55.55.2:5704   192.168.1.2:5704   172.16.1.2:5704    172.16.1.2:5704 \nicmp  55.55.55.2:1440   192.168.1.3:1440   172.16.1.3:1440    172.16.1.3:1440 \nicmp  55.55.55.2:1441   192.168.1.3:1441   172.16.1.3:1441    172.16.1.3:1441 \nicmp  55.55.55.2:1442   192.168.1.3:1442   172.16.1.3:1442    172.16.1.3:1442 \nicmp  55.55.55.2:1443   192.168.1.3:1443   172.16.1.3:1443    172.16.1.3:1443 \n \n \n \n \n\nCấu hình Port Address Translation \nR1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 \nR2(config)#ip route 55.55.55.0 255.255.255.0 10.10.10.10 \nR1(config)#access-list 55 permit 192.168.1.0 0.0.0.255 \nR1(config)#ip nat pool Bachkhoa-Aptech 55.55.55.2 55.55.55.2 netmask 255.255.255.0 \nR1(config)#ip nat inside source list 55 pool Bachkhoa-Aptech overload \nR1(config)#interface fastEthernet 0/0 \nR1(config-if)#ip nat inside \nR1(config-if)#exit \nR1(config)# \nR1(config)#interface fastEthernet 1/0 \nR1(config-if)#ip nat outside \nR1(config-if)#exit \nR1(config) \n\n\n\n \n\n100 \nLưu hành nội bộ \n\nChương VIII: Chuyển mạch \n \n8.1 Router & Switch \n\n \n\n  \n8.2 Phân biệt giữa Hub và Switch \n\nHub \n \n\nSwitch \nHub không phải là thiết bị thông minh. Switch là thiết bị thông minh và duy trì bảng \n\nđịa chỉ MAC. \nHub luôn luôn thực thi hành động broadcasts. Switch thực thi cả broadcast và Unicast. \nHub hoạt động với các bit trạng thái 0 & 1. Switch hoạt đọng với địa chỉ vật lý (địa chỉ \n\nMAC). \nHub làm việc với băng thông chia sẻ. Switch làm việc với băng thông cố định. \nHub có 01 miền Broadcast và 01 miền \nCollision. \n\nSwitch mặc định có 01 miền Broadcast số \nlượng miền Collision phụ thuộc vào số port \ncủa Switch. \n\n \n\n  \n\n\n\n \n\n101 \nLưu hành nội bộ \n\n8.3 Cơ chế hoạt động của ARP \n \n\n 8.4 Switch học địa chỉ MAC như thế nào \n \n\n  \n \n \n \n \n \n \n \n\n\n\n \n\n102 \nLưu hành nội bộ \n\n8.5 Broadcast Domain \n Miền broadcast được định nghĩa là nhóm các thiết bị nhận được bản tin \n\nbroadcast khởi tạo từ bất kỳ thiết bị nào trong nhóm. \n \n\n  \n8.6 CSMA/CD \n\n Carrier Sense Multiple Access/ Collision Detection là giao thức quản lý việc \ntruy cập đường truyền trong mạng Ethernet. \n\n Sự xung đột được nhận biết bởi phương thức truy cập được gọi là CSMA/CD \nvà CSMA/CA. \n\n CSMA/CD được sử dụng cho mạng LAN có dây trong khi đó CSMA/CA được \nsử dụng cho mạng không dây. \n \n\n  \n \n\n\n\n \n\n103 \nLưu hành nội bộ \n\n8.7 Collision Domain \n Một miền đụng độ là 1 phân đoạn mạng với 2 hay nhiều thiết bị cùng chia sẻ \n\nbăng thông (ở đó có khả năng xảy ra xung đột). \n\n \n8.8 Phân loại Switch \n\n Unmanageable switches (switch không có khả năng quản lý) \na. Những switch này có đặc trưng dùng cho trường hợp cắm \n\nvà chạy ngay. \nb. Không cần cấu hình và xác thực. \nc. Không có cổng console. \n\n \n\n \n\n \n\n \n Manageable switches (switch có khả năng quản lý) \n\na. Những switch này cũng có thể cắm và chạy ngay. \nb. Có cổng console và truy cập dòng lệnh. \nc. Có thể xác thực và thay đổi cấu hình, hỗ trợ các tính năng nâng cao \n\nnhư VLAN, trunking, STP. \n \n\n \n\n \n8.9 Kiến trúc phân tầng trong thiết kế của Cisco \n\n Lớp Access : 2960X hoặc 3560 switch  (L2 switch). \n \n\n  \n \n\n \n\n \n\n\n\n \n\n104 \nLưu hành nội bộ \n\n Lớp Distribution : Catalyst 3550, 3750X (L3 switch hoặc multi-layer switch). \n \n\n \n\n \n\n Lớp Core : Catalyst 4500, 6500 (L3 switch hoặc multi-layer switch). \n \n\n \n\n \n\n \n8.10 Khởi tạo cấu hình switch \n\n Kết nối thông qua Console. \n Phần mềm truy cập bao gồm Hyperterminal, Putty, Xshell hoặc Secure CRT. \n\n \n \n \n8.11 Các lệnh căn bản  \nSwitch>enable \nSwitch#show running-config \nSwitch#show startup-config \nSwitch#show version \nSwitch#show flash \nSwitch#show mac-address-table \n\n\n\n \n\n105 \nLưu hành nội bộ \n\nSwitch#show interface status \nSwitch#config terminal \nSwitch(config)# \n\n \n8.12 Password  \nTạo mật khẩu truy cập Telnet \nSwitch(config)#line vty 0 4 \nSwitch(config-line)#password <password> \nSwitch(config-line)#login \n \nTạo mật khẩu truy cập Console \nSwitch(config)#line console 0 \nSwitch(config-line)#password <password> \nSwitch(config-line)#login \n \nTạo mật khẩu enable \nSwitch(config)#enable secret <password> \nhoặc \nSwitch(config)#enable password <password> \n\n \n8.13 Khởi tạo cấu hình switch cho truy cập Telnet \nTạo IP quản trị \nSwitch(config)#interface vlan 1 \nSwitch(config-if)#ip address <ip> <mask> \nSwitch(config-if)#no shutdown \n \nTạo Default Gateway \nSwitch(config)#ip default-gateway 192.168.1.100  \n \n \n \n \n \n  \n\n \n \n\n\n\n \n\n106 \nLưu hành nội bộ \n\nChương IX: VLAN & Trunk \n9.1 Virtual LAN \n\n Chia 01 miền broadcast thành nhiều miền broadcast nhỏ hơn. \n Nhằm tăng tính bảo mật lớp 2. \n VLAN 1 là VLAN mặc định và không thể thay đổi. \n Có thể tạo VLAN từ 2 tới 1001. \n Chỉ có thể được cấu hình trên các switch có khả năng quản lý được. \n\n \n9.2 Lợi ích của việc sử dụng VLAN  Giới hạn miền broadcast. \n\n Tăng tính bảo mật. \n Hiệu suất tốt hơn. \n\n \n\n \n\n \n\n\n\n \n\n107 \nLưu hành nội bộ \n\nChương X: Phân loại VLAN \n10.1 VLAN tĩnh \n\n VLAN tĩnh được định nghĩa dựa trên port. \n Cần được gán thủ công 01 port trên switch vào 01 VLAN. \n Còn được gọi là Port-Based VLANs. \n 01 port chỉ có thể duy nhất gán cho 01 VLAN, không thể gán 02 VLAN trên \n\ncùng 01 port. \n\n \nTạo VLAN \nSwitch(config)#vlan <no> \nSwitch(config-vlan)#name <name> \nSwitch(config-vlan)#exit \n \nGán port vào Vlan \nSwitch(config)#interface <interface type> <interface no> \nSwitch(config-if)#switchport mode access \nSwitch(config-if)#switchport access VLAN <no> \n\n \n\n \n \n \n\n\n\n \n\n108 \nLưu hành nội bộ \n\nTASK : Tạo 4 VAN (VLAN 10, 20, 30, 40) \n \n\nSwitch(config)#vlan 10 \nSwitch(config-vlan)#name sales \nSwitch(config-vlan)#vlan 20 \nSwitch(config-vlan)#name marketing \nSwitch(config-vlan)#vlan 30 \nSwitch(config-vlan)#vlan 40 \n\n \n\n \n\n \n\n \nTASK : Cấu hình port Fa0/8 VLAN 10, cấu hình các port từ (4-7) và port 10 VLAN \n20  \nSwitch(config)#int f0/8 \nSwitch(config-if)#switchport mode access \nSwitch(config-if)#switchport access vlan 10 \nSwitch(config-if)#exit \nSwitch(config)#interface range f0/4 \u2013 7, f0/10 \nSwitch(config-if-range)#switchport mode access \nSwitch(config-if-range)#switchport access vlan 20 \n\n \n\n \n\n \n\n \n\n\n\n \n\n109 \nLưu hành nội bộ \n\n \n10.2 LAB 1\u2013 Kiểm tra cấu hình VLAN \n\n \n                       TASK: \n\n1. Ping giữa 192.168.1.2, 192.168.1.3 và 192.168.1.4 \n3 PC có thể liên lạc với nhau do cùng chung 01 mạng và có cùng VLAN \n\n2. Tạo VLAN 20 \nGán port f0/3, f0/4 vào VLAN 20 \n\n3. Ping giữa 192.168.1.2 và 192.168.1.3 \n2 PC không thể liên lạc với nhau do cùng chung mạng nhưng khác VLAN \n(VLAN 1 và VLAN 20) \n\n4. Ping giữa 192.168.1.3 và 192.168.1.4  \n2 PC có thể trao đổi thông tin với nhau do cùng chung một mạng và chung \nVLAN 20 \n \n\nKiểm tra kết nối ban đầu \nPC1>ping 192.168.1.3 \n \nPinging 192.168.1.3 with 32 bytes of data: \nReply from 192.168.1.3: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \n \n \n\n\n\n \n\n110 \nLưu hành nội bộ \n\nPC1>ping 192.168.1.4 \nPinging 192.168.1.4 with 32 bytes of data: \nReply from 192.168.1.4: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nPing statistics for 192.168.1.4: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \nPC2>ping 192.168.1.2 \nPinging 192.168.1.2 with 32 bytes of data: \nReply from 192.168.1.2: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.2: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.2: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.2: bytes=32 time=0ms TTL=128 \nPing statistics for 192.168.1.2: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \n \nPC2>ping 192.168.1.4 \nPinging 192.168.1.4 with 32 bytes of data: \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=1ms TTL=128 \nPing statistics for 192.168.1.4: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \nPC3>ping 192.168.1.2 \nPinging 192.168.1.2 with 32 bytes of data: \nReply from 192.168.1.2: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.2: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.2: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.2: bytes=32 time=0ms TTL=128 \nPing statistics for 192.168.1.2: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \n \nPC3>ping 192.168.1.3 \nPinging 192.168.1.3 with 32 bytes of data: \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=1ms TTL=128 \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \n \n\nKhởi tạo VLAN 20 và gán port f0/3 và f0/3 cho VLAN 20 \nSwitch(config)#vlan 20 (khởi tạo VLAN 20) \nSwitch(config-vlan)#name TestBachkhoa-Aptech (đặt tên VLAN 20 là TestBachkhoa-\nAptech) \n\n\n\n \n\n111 \nLưu hành nội bộ \n\nSwitch(config-vlan)#exit \nSwitch(config)#interface range f0/3-4  (gán cổng f0/3-4\u2026..) \nSwitch(config-if-range)#switchport mode access \nSwitch(config-if-range)#switchport access vlan 20   (\u2026 cho VLAN 20) \nSwitch(config-if-range)#exit \nSwitch(config)# \n \nKiểm tra lại kết nối sau khi đã khởi tạo VLAN 20 và gán port f0/3 đến f0/4 cho VLAN 20 \n\nPC1>ping 192.168.1.3 \nPinging 192.168.1.3 with 32 bytes of data: \nRequest timed out. \nRequest timed out. \nRequest timed out. \nRequest timed out. \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 0, Lost = 4 (100% loss) \n \nPC1>ping 192.168.1.4 \nPinging 192.168.1.4 with 32 bytes of data: \nRequest timed out. \nRequest timed out. \nRequest timed out. \nRequest timed out. \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 0, Lost = 4 (100% loss) \nPC2>ping 192.168.1.2 \nPinging 192.168.1.2 with 32 bytes of data: \nRequest timed out. \nRequest timed out. \nRequest timed out. \nRequest timed out. \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 0, Lost = 4 (100% loss) \n \nPC2>ping 192.168.1.4 \nPinging 192.168.1.4 with 32 bytes of data: \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.4: bytes=32 time=1ms TTL=128 \nPing statistics for 192.168.1.4: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \nPC3>ping 192.168.1.2 \nPinging 192.168.1.2 with 32 bytes of data: \nRequest timed out. \nRequest timed out. \nRequest timed out. \n\n\n\n \n\n112 \nLưu hành nội bộ \n\nRequest timed out. \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 0, Lost = 4 (100% loss) \n \nPC3>ping 192.168.1.3 \nPinging 192.168.1.3 with 32 bytes of data: \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=1ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=0ms TTL=128 \nReply from 192.168.1.3: bytes=32 time=1ms TTL=128 \nPing statistics for 192.168.1.3: \nPackets: Sent = 4, Received = 4, Lost = 0 (0% loss), \nNhận xét : khi chưa triển khai VLAN 20 trên Switch, mặc định các PC khi kết nối vào Switch \nđều thuộc chung VLAN 1 nên luôn trao đổi được thông tin. Khi triển khai VLAN 20 và gán \ncổng F0/3 (từ PC 2 kết nối đến Switch) và cổng F0/4 (từ PC3 kết nối đến Switch) thì PC1 ở \nVLAN 1, PC2 và PC3 ở VLAN 20 nên không thể trao đổi thông tin giữa PC1 đến PC2 và PC3. \nNgược lại PC2 và PC3 cùng thuộc 1 VLAN 20 nên có thể trao đổi tin như bình thường. \n \n10.3 VLAN động \n\n VLAN động dựa trên địa chỉ MAC của 1 PC. \n Switch tự động gán cho port 01 VLAN. \n Mỗi port có thể là thành viên của nhiều VLAN. \n Để cấu hình VLAN động cần phần mềm quản lý được gọi là VMPS (VLAN \n\nMembership Policy Server). \n\n \n \n \n \n \n \n\n \n\n\n\n \n\n113 \nLưu hành nội bộ \n\n10.4 Trunking \n 01 VLAN có thể tồn tại trên nhiều switch. \n\n \n\n \n \n \n \n \n\n\n\n \n\n114 \nLưu hành nội bộ \n\nChương XI: Phân loại links/ports \n11.1 Access links  Kết nối tới thiết bị cuối (Hosts hoặc router). \n\n Là thành phần của 01 VLAN. \n \n\n11.2 Trunk links  Không thuộc bất kỳ VLAN nào. \n Có thể vận chuyển 01 hay nhiều VLAN. \n Kết nối giữa các thiết bị switch. \n\n \n\n  \n\n \n\n11.3 Frame Tagging \n Để vận chuyển được nhiều VLAN trên đường trunk giữa các switch đường \n\ntrunk sử dụng phương pháp tagging VLAN. \n Tag dùng để phân biệt các VLAN khác nhau. \n Tag VLAN chỉ xảy ra trên đường trunk. \n\n \n \n \n \n\n\n\n \n\n115 \nLưu hành nội bộ \n\n11.4 Trunking Protocol \nISL IEEE 802.1Q \n\nGiao thức độc quyền của Cisco. Giao thức chuẩn mở. \nHoạt động với Ethernet, Token ring, FDDI. Chỉ hoạt động với Ethernet. \nThêm 30 bytes tag. Chỉ thêm 4 byte . \nTất cả lưu lượng VLAN được tag.  \n\n \n11.5 Cấu hình trunking \n\nSwith(config)#interface <interface type> <interface no> \nSwitch(config-if)#switchport mode trunk \nSwitch(config-if)#switchport trunk encapsulation dot1q/ISL \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n116 \nLưu hành nội bộ \n\nChương XII: Giao thức Spanning-tree \n \n12.1 Bridging loops (Vòng lặp) \n\n Kết nối 02 hay nhiều link giữa các switch cung cấp khả năng dự phòng. \n Tuy nhiên tiềm ẩn khả năng loops khi các switch thực hiện truyền broadcast. \n\na. Bão broadcast. \nb. Bảng địa chỉ MAC không ổn định. \nc. Băng thông bị chiếm dụng do quá quá nhiều frame trao đổi. \n\n  \n12.2 Giải pháp tránh Bridging loops \n\n Chỉ kết nối 01 link giữa các switch (không kết nối dự phòng). \n Tạm thời ngắt các link mở rộng, link dự phòng. \n\na. Thủ công (sử dụng lệnh shutdown). \nb. Tự động khóa các link mở rộng (sử dụng giao thức STP). \n\n \n \n\n12.3 Giao thức STP \n STP cho phép chặn đứng khả năng loops xảy ra khi nhiều link được sử dụng để \n\nkết nối giữa các switch. \n STP tránh các rủi ro tiềm ẩn như bão broadcast, quá nhiều bản tin sao chép \n\nhoặc dữ liệu bảng MAC không ổn định. \n STP là chuẩn mở IEEE 802.1D. \n STP được bật tự động trên các switch của Cisco. \n\n\n\n \n\n117 \nLưu hành nội bộ \n\n \n \n\n12.4 STP hoạt động như thế nào \n STP hoạt động qua 3 bước bao gồm: \n\na. Lựa chọn Root Bridge. \nb. Lựa chọn Root port. \nc. Lựa chọn Designated port & Non Designated port. \n\n \n \n\n\n\n \n\n118 \nLưu hành nội bộ \n\n \n12.5 Lựa  chọn Root Bridge \n\n Switch có giá trị BID nhỏ nhất được chọn làm Root Bridge. \n BID hay còn gọi là Bridge ID có công thức tính như sau: BID = Priority + địa \n\nchỉ MAC của switch. \n Mọi LAN đều chỉ có duy nhất Root Bridge, các switch còn lại được xem là \n\nNon-root Bridges. \n \n\n12.6 Lựa chọn Root Port \n Port có khoảng cách được tính bằng cost nhỏ nhất tới Root Bridge. \n Tất cả các Non-root Bridge nhìn Root Port là hướng tối ưu nhất để đến Root \n\nBridge. \na. Tất cả các Non-root Bridge chỉ có duy nhất 01 root port. \nb. Dựa trên Path cost nhỏ nhất. \nc. Tiếp theo dựa trên Switch ID nhỏ nhất. \nd. Nếu 2 giá trị bằng nhau sẽ dựa theo giá trị nhỏ nhất của Port Priority và \n\nPort-ID. \n \n\n12.7 STP Port Cost \nLink Bandwidth STP Cost \n\n4 Mbps 250 \n10 Mbps 100 \n16 Mbps 62 \n45 Mbps 39 \n100 Mbps 19 \n155 Mbps 14 \n622 Mbps 6 \n\n1 Gbps 4 \n10 Gbps 2 \n\n \n12.8 Lựa chọn Designated port và Non Designated port \n\n Lựa chọn Designated port và Non Designated port cũng gồm 3 bước \na. Port Cost nhỏ nhất. \nb. Tiếp theo dựa trên Switch ID nhỏ nhất. \nc. Dựa trên giá trị nhỏ nhất của Port Priority và Port-ID. \n\n \n12.9 BPDU \n\n Tất cả các switch trao đổi thông tên dựa trên BPDU (Bridge Protocol Data \nUnit). \n\n BPDU được gửi mỗi 2 giây và có thời gian dead interval là 20 giây. \n 1 BPDU chứa đựng thông tin bao gồm port, switch, port  priority và địa chỉ. \n\n\n\n \n\n119 \nLưu hành nội bộ \n\n12.10 Các trạng thái port của STP \n Blocking 20 giây hoặc không giới hạn. \n Listening 15 giây. \n Learning 15 giây. \n Forwarding không giới hạn thời gian. \n Disable không giới hạn thời gian. \n\n \n12.11 LAB: Kiểm tra spanning-tree \n\n \n \n\nPort VLAN Network \n- F0/1 → F0/3 - 802.1q Trunk (Native VLAN 99) 172.16.99.0/24 \n- F0/5 → F0/7 - VLAN 10 - IT 172.16.1.0/24 \n- F0/8 → F0/10 - VLAN 20 - Sale 172.16.2.0/24 \n- F0/11 → F0/13 - VLAN 30 - Marketing 172.16.3.0/24 \n\n \nSwitch Name VTP Mode VTP Domain VTP Password \n\nS1 Domain Bachkhoa-Aptech 123456a@ \nS2 Client Bachkhoa-Aptech 123456a@ \nS3 Client Bachkhoa-Aptech 123456a@ \n\n \nCấu hình VTP trên các Switch \n\nSw1(config)#vtp mode server \nDevice mode already VTP SERVER. \nSw1(config)#vtp domain Bachkhoa-Aptech \nChanging VTP domain name from NULL to Bachkhoa-Aptech \n\n\n\n \n\n120 \nLưu hành nội bộ \n\nSw1(config)#vtp password 123456a@ \nSetting device VLAN database password to 123456a@ \nSw1(config)# \nSW2(config)#vtp mode client \nSetting device to VTP CLIENT mode. \nSW2(config)#vtp domain Bachkhoa-Aptech \nChanging VTP domain name from NULL to Bachkhoa-Aptech \nSW2(config)#vtp password 123456a@ \nSetting device VLAN database password to 123456a@ \nSw3(config)#vtp mode client \nSetting device to VTP CLIENT mode. \nSw3(config)#vtp domain Bachkhoa-Aptech \nChanging VTP domain name from NULL to Bachkhoa-Aptech \nSw3(config)#vtp password 123456a@ \nSetting device VLAN database password to 123456a@ \n\n \nCấu hình Trunking và Native VLAN (chọn VLAN 99 là Native VLAN) \n\nSw1(config)#interface range fastEthernet 0/1-3 \nSw1(config-if-range)#switchport mode trunk \nSw1(config-if-range)#switchport trunk native vlan 99 \nSw1(config-if-range)#no shut \nSw1(config-if-range)#end \nSw1# \nSW2(config)#interface range FastEthernet 0/1-3 \nSW2(config-if-range)#switchport mode trunk \nSW2(config-if-range)#switchport trunk native vlan 99 \nSW2(config-if-range)#end \nSW2# \nSw3(config)#interface range FastEthernet 0/1-3 \nSw3(config-if-range)#switchport mode trunk \nSw3(config-if-range)#switchport trunk native vlan 99 \nSw3(config-if-range)#end \nSw3# \n\n \nCấu hình VTP với các VLAN \n\nSw1(config)#vlan 99 \nSw1(config-vlan)#name Administrator \nSw1(config-vlan)#exit \nSw1(config)#vlan 10 \nSw1(config-vlan)#name IT \nSw1(config-vlan)#exit \nSw1(config)#vlan 20 \nSw1(config-vlan)#name Sale \nSw1(config-vlan)#exit \nSw1(config)#vlan 30 \nSw1(config-vlan)#name Marketing \n\n\n\n \n\n121 \nLưu hành nội bộ \n\nSw1(config-vlan)#exit \nSw1(config)# \n\n \nKiểm tra thông tin các VLAN đã khởi tạo \n\nSw1#show vlan brief \nVLAN     Name                    Status     Ports \n---- -------------------------------- --------- ------------------------------- \n1              default                   active     Fa0/3, Fa0/4, Fa0/5, Fa0/6 \n                                                             Fa0/7, Fa0/8, Fa0/9, Fa0/10 \n                                                             Fa0/11, Fa0/12, Fa0/13, Fa0/14 \n                                                             Fa0/15, Fa0/16, Fa0/17, Fa0/18 \n                                                             Fa0/19, Fa0/20, Fa0/21, Fa0/22 \n                                                             Fa0/23, Fa0/24, Gig0/1, Gig0/2 \n10            IT                           active  \n20            Sale                        active  \n30            Marketing              active  \n99            Administrator        active  1002        fddi-default            active  \n1003        token-ring-default  active  \n1004        fddinet-default       active  \n1005        trnet-default           active \nSw2#show vlan brief \nVLAN     Name                    Status     Ports \n---- -------------------------------- --------- ------------------------------- \n1              default                   active     Fa0/3, Fa0/4, Fa0/5, Fa0/6 \n                                                             Fa0/7, Fa0/8, Fa0/9, Fa0/10 \n                                                             Fa0/11, Fa0/12, Fa0/13, Fa0/14 \n                                                             Fa0/15, Fa0/16, Fa0/17, Fa0/18 \n                                                             Fa0/19, Fa0/20, Fa0/21, Fa0/22 \n                                                             Fa0/23, Fa0/24, Gig0/1, Gig0/2 \n10            IT                           active  \n20            Sale                        active  \n30            Marketing              active  \n99            Administrator        active  1002        fddi-default            active  \n1003        token-ring-default  active  \n1004        fddinet-default       active  \n1005        trnet-default           active \nSw3#show vlan brief \nVLAN     Name                    Status     Ports \n---- -------------------------------- --------- ------------------------------- \n1              default                   active     Fa0/3, Fa0/4, Fa0/5, Fa0/6 \n                                                             Fa0/7, Fa0/8, Fa0/9, Fa0/10 \n                                                             Fa0/11, Fa0/12, Fa0/13, Fa0/14 \n                                                             Fa0/15, Fa0/16, Fa0/17, Fa0/18 \n                                                             Fa0/19, Fa0/20, Fa0/21, Fa0/22 \n                                                             Fa0/23, Fa0/24, Gig0/1, Gig0/2 \n\n\n\n \n\n122 \nLưu hành nội bộ \n\n10            IT                           active  \n20            Sale                        active  \n30            Marketing              active  \n99            Administrator        active  1002        fddi-default            active  \n1003        token-ring-default  active  \n1004        fddinet-default       active  \n1005        trnet-default           active \n\n \nĐặt địa chỉ cho các interface VLAN để quản lý \n\nSw1(config)#interface vlan 99 \nSw1(config-if)#ip address 172.16.99.11 255.255.255.0 \nSw1(config-if)#no shut \nSw1(config-if)#exit \nSW2(config)#interface vlan 99 \nSW2(config-if)#ip address 172.16.99.22 255.255.255.0 \nSW2(config-if)#no shut \nSW2(config-if)#exit \nSw3(config)#int vlan 99 \nSw3(config-if)#ip address 172.16.99.33 255.255.255.0 \nSw3(config-if)#no shut \nSw3(config-if)#exit \n\n \nKiểm tra kết nối giữa các Switch \n\nSw1#ping 172.16.99.22 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms \n \nSw1#ping 172.16.99.33 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms \nSW2#ping 172.16.99.11 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms \n \nSW2#ping 172.16.99.33 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms \n\n\n\n \n\n123 \nLưu hành nội bộ \n\nSw3#ping 172.16.99.11 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms \n \nSw3#ping 172.16.99.22 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms \n\n \nKiểm tra kết nối giữa các Switch \n\nSw1#ping 172.16.99.22 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms \n \nSw1#ping 172.16.99.33 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms \nSW2#ping 172.16.99.11 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms \n \nSW2#ping 172.16.99.33 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms \nSw3#ping 172.16.99.11 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms \n \nSw3#ping 172.16.99.22 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms \n\n \n\n\n\n \n\n124 \nLưu hành nội bộ \n\nGán port cho các VLAN trên Sw3 \nSw3(config)#interface range FastEthernet 0/5-7 \nSw3(config-if-range)#switchport mode access \nSw3(config-if-range)#switchport access vlan 10 \nSw3(config-if-range)#exit \nSw3(config)#interface range FastEthernet 0/8-10 \nSw3(config-if-range)#switchport mode access \nSw3(config-if-range)#switchport access vlan 20 \nSw3(config-if-range)#exit \nSw3(config)#interface range FastEthernet 0/11-13 \nSw3(config-if-range)#switchport mode access \nSw3(config-if-range)#switchport access vlan 30 \nSw3(config-if-range)#exit \n\n \nKiểm tra cấu hình mặc định của 802.1D STP \n\nSw1#show spanning-tree \nVLAN0001 Spanning tree enabled protocol ieee \nRoot ID     Priority     32769 \nAddress     0000.0C4E.CABE \nCost 19 \nPort 1(FastEthernet0/1) \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nBridge ID      Priority      32769 (priority 32768 sys-id-ext 1) \nAddress 0001.C9BD.6746 \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nAging Time 20 \nInterface    Role     Sts       Cost      Prio.Nbr    Type \n---------------- ---- --- --------- -------- -------------------------------- \nFa0/2         Desg     FWD   19         128.2         P2p \nFa0/1         Root     FWD    19         128.1        P2p \n \nVLAN0010 Spanning tree enabled protocol ieee \nRoot ID      Priority 32778 \nAddress      0000.0C4E.CABE \nCost 19 \nPort 1(FastEthernet0/1) \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nBridge ID Priority 32778 (priority 32768 sys-id-ext 10) \nAddress 0001.C9BD.6746 \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nAging Time 20 \nInterface      Role           Sts        Cost    Prio.Nbr    Type \n------------------------------------------------------------------------ \nFa0/2           Desg          FWD     19       128.2         P2p \nFa0/1           Root           FWD    19        128.1        P2p \n\n\n\n \n\n125 \nLưu hành nội bộ \n\n \nVLAN0020 Spanning tree enabled protocol ieee \nRoot ID       Priority 32788 \nAddress       0000.0C4E.CABE \nCost 19 \nPort 1(FastEthernet0/1) \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nBridge ID Priority 32788 (priority 32768 sys-id-ext 20) \nAddress 0001.C9BD.6746 \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nAging Time 20 \nInterface      Role      Sts       Cost      Prio.Nbr    Type \n---------------- ---- --- --------- -------- -------------------------------- \nFa0/2            Desg    FWD    19        128.2          P2p \nFa0/1            Root     FWD    19       128.1           P2p \n \nVLAN0030 Spanning tree enabled protocol ieee \nRoot ID      Priority 32798 \nAddress      0000.0C4E.CABE \nCost 19 \nPort 1(FastEthernet0/1) \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nBridge ID Priority 32798 (priority 32768 sys-id-ext 30) \nAddress 0001.C9BD.6746 \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nAging Time 20 \n \nInterface      Role      Sts       Cost      Prio.Nbr    Type \n---------------- ---- --- --------- -------- -------------------------------- \nFa0/2           Desg      FWD   19        128.2          P2p \nFa0/1           Root      FWD    19        128.1         P2p \n \nVLAN0099 Spanning tree enabled protocol ieee \nRoot ID      Priority 32867 \nAddress      0000.0C4E.CABE \nCost 19 \nPort 1(FastEthernet0/1) \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nBridge ID Priority 32867 (priority 32768 sys-id-ext 99) \nAddress 0001.C9BD.6746 \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nAging Time 20 \n \nInterface      Role       Sts       Cost       Prio.Nbr     Type \n---------------- ---- --- --------- -------- -------------------------------- \n\n\n\n \n\n126 \nLưu hành nội bộ \n\nFa0/2           Desg      FWD    19          128.2          P2p \nFa0/1           Root      FWD     19         128.1           P2p \n\n \nKiểm tra VLAN 99 của Sw2 \n\nSW2#show spanning-tree vlan 99 \nVLAN0099 Spanning tree enabled protocol ieee \nRoot ID    Priority 32867 \nAddress    0000.0C4E.CABE \nThis bridge is the root Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nBridge ID Priority 32867 (priority 32768 sys-id-ext 99) \nAddress 0000.0C4E.CABE \nHello Time 2 sec Max Age 20 sec Forward Delay 15 sec \nAging Time 20 \nInterface    Role      Sts      Cost    Prio.Nbr     Type \n---------------- ---- --- --------- -------- -------------------------------- \nFa0/2          Desg    FWD    19      128.2          P2p \nFa0/1          Desg    FWD    19      128.1          P2p \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n127 \nLưu hành nội bộ \n\nChương XIII: IPV6 \n13.1 IP Address  \n\n Là địa chỉ logical của các thiết bị lớp 3 như: thiết bị định tuyến, thiết bị tường \nlửa\u2026 \n\n Mỗi thiết bị sẽ được cấp một địa chỉ logical để sử dụng và nhằm định danh \nthiết bị đó trên một môi trường mạng. \n \n\n13.2  2 phiên bản của IP \n IPv4 : sử dụng 32 bit địa chỉ. \n IPv6 : sử dụng 128 bit địa chỉ. \n\n \n13.3 IPv6 là phiên bản được nâng cấp của IPv4, với nhiều tính năng phát triển \n\nnhư: \n Có không gian địa chỉ lớn, cung cấp được nhiều địa chỉ hơn. IPv4 cần xử dụng \n\nnhiều phương pháp ( Subnetting, CIDR \u2013 Classless Inter Domain, NAT- \nNetwork Address Translation). \n\n Do không gian địa chỉ lớn, nên không cần thực hiên NAT . \n Có header đơn giản hơn so mới phiên bản IPv4. \n Không có bản tin broadcasts. \n  Hỗ trợ cho thiết bị Mobile IP. \n Hỗ trợ IPsec security. \n Dễ dàng cấp lại đia chỉ. \n Có khả năng hỗ trợ nhiều địa chỉ trên cùng một cổng vật lý hay logical. \n\n \n13.4 IPV6 Types \n\n Unicast. \n Multicast. \n Anycast. \n\n \n13.5 Kiến trúc địa chỉ IPv6 \n\n 128 bit địa chỉ. \n Định dạng thập lục phân. \n Ví dụ     2001:0db8:0000:0000:1234:0000:0000:3c4d \n\n              2001:db8::1234::3c4d \n \n\n13.6 Địa chỉ Unicast  \n Địa chỉ global : \n\na. Là địa chỉ IP public \nb. Bắt đầu với 2000::/3 \nc. Bắt đầu với 2 hoặc 3 \n\n\n\n \n\n128 \nLưu hành nội bộ \n\n13.7 Địa chỉ local \n Là địa chỉ private. \n Bắt đầu với FC00::/7 ( có thể bắt đầu với FC hay FD). \n Chúng không có trong bảng routable. \n\n \n13.8 Địa chỉ default \n\n Địa chỉ IPv6 được enable trên tất cả các cổng vật lý. Bắt đầu với FE80::/10 \n Router sẽ không qua địa chỉ này. \n\n \n13.9 Địa chỉ Multicast  \n\n Địa chỉ IPV6 multicast bắt đầu bằng FF ( FF00::/8). \n \n\n13.10 Địa chỉ Any Cast \n Giống địa chỉ Multicast , một địa chỉ được thiết lập trên nhiều cổng, thiết bị \n\nđịnh tuyến chỉ chuyển gói tin đến duy nhất một cổng được tìm đầu tiên. \n Địa chỉ Local và global cũng có thể được xử dụng như địa chỉ anycast. \n\n \n Ví dụ. \nDevice(config)# interface f0/0 \nDevice(config)# IPv6 address ipv6-prefix/prefix-length anycast \n \n13.11 Đặt địa chỉ IPv6 \nCấu hình bằng tay \nDevice(config)# interface f0/0 \nDevice(config)# IPv6 address fc00:11:11::1/64 \nCấu hình tự động \n\n Statefull  ( nhận IP qua DHCP ) \n Stateless ( Thiết bị sẽ lấy IPv6 cùng với địa chỉ MAC ) \n\n \n13.12 Stateless \n\n Thiết bị có thể lấy địa chỉ IPv6 cho chính nó thông qua địa chỉ MAC riêng của \nnó. \n\n Không cần bất kỳ DHCP server cũng như không cần cấu hình bằng tay. \n\n\n\n \n\n129 \nLưu hành nội bộ \n\n \n \n\n Ví dụ \n\n \nCấu hình địa chỉ Ipv6 cơ bản như topo trên:  \nRouter( config)# hostname R1 \nR1(config)# interface Serial1/0 \nR1(config-if)# ipv6 address 2001:12:12:12::1/64 \nR1(config-if)# no shut \nR1(config)# interface f0/0 \nR1(config-if)# ipv6 address fc00:11:11:11::1/64 \nR1(config-if)# no shut \nRouter( config)# hostname R2 \nR2(config)# interface Serial1/0 \nR2(config-if)# ipv6 address 2001:12:12:12::2/64 \nR2(config-if)# no shut \nR2(config)# interface f0/0 \nR2(config-if)# ipv6 address fc00:22:22:22::2/64 \nR2(config-if)# no shut  \n\n \n \n\n\n\n \n\n130 \nLưu hành nội bộ \n\nKiểm tra thông tin bảng định tuyến sau khi cấu hình \nR2#show ipv6 interface brief \nFastEthernet0/0            [up/up] \n    FE80::C603:16FF:FE68:0 \n    FC00:22:22:22::2 FastEthernet0/1            [administratively down/down] \nSerial1/0                  [up/up] \n    FE80::C603:16FF:FE68:0 \n    2001:12:12:12::2 Serial1/1                  [administratively down/down] \nSerial1/2                  [administratively down/down] \nSerial1/3                  [administratively down/down] \n \nR2#ping 2001:12:12:12::1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 2001:12:12:12::1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 0/7/12 ms  \n\nChúng ta có thể thấy địa chỉ Local có thể được cấu hình bằng tay hoặc router sẽ tự cấu hình, xử \ndụng địa chỉ Stateless . \n \nR2#show int f0/0 \nFastEthernet0/0 is up, line protocol is up \n  Hardware is Gt96k FE, address is c403.1668.0000 (bia c403.1668.0000)  \nR2#show ipv6 int br \nFastEthernet0/0            [up/up] \n    FE80::C603:16FF:FE68:0     FC00:22:22:22::2  \n\n Tất cả các địa chỉ local luôn bắt đầu với FE80:: và một phần của địa chỉ này \nđược thêm địa chỉ MAC của cổng vật lý đó. \n\n Địa chỉ MAC được xử dụng trong địa chỉ vật lý và stateless. \n \n\n13.13 IPV6 ROUTING \n IPv6 sử dụng các giao thức định tuyến như IPv4 với thêm một vài yêu cầu đặc \n\nbiệt của IPV6. \n \n\n13.14 Các loại định tuyến IPV6 \n Định tuyến tĩnh. \n Định tuyến RIP ( RIPng) \u2013 RFC2080. \n ĐỊnh tuyến IS-IS. \n\n\n\n \n\n131 \nLưu hành nội bộ \n\n OSPFv3 ( RFC 2740). \n MP-BGP ( RFC 2545/2858). \n EIGRP for IPv6. \n Định tuyến IPv6 được tích hợp sẵn trên các thiết bị định tuyến, nhưng default \n\nđịnh tuyến IPv6 được disable. \n Enable IPv6 trên router, ta sử dụng câu lệnh sau : \n\nRx( config) # ipv6 unicast-routing \n \n13.15 Định tuyến tĩnh \n\n \n Thực hiện kiến trúc câu lệnh giống với IPv4, chỉ đến địa chỉ muốn đến qua \n\nnext-hop, hoặc out interface. \nCấu hình Static cho mô hình mạng \n\nR1(config )# ipv6 route FC00:22:22:22::2/64 2001:12:12:12::2 \nR2(config )# ipv6 route FC00:11:11:11::1/64 S1/0 \n\n \nKiểm tra kết nối \u2013 thông tin bảng định tuyến sau khi đã triển khai static \n\nR2#show ipv6 route \nIPv6 Routing Table - 7 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nC   2001:12:12:12::/64 [0/0] \n     via ::, Serial1/0 \nL   2001:12:12:12::2/128 [0/0] \n     via ::, Serial1/0 \nS   FC00:11:11:11::/64 [1/0] \n     via ::, Serial1/0 C   FC00:22:22:22::/64 [0/0] \n     via ::, FastEthernet0/0 \n\n\n\n \n\n132 \nLưu hành nội bộ \n\nL   FC00:22:22:22::2/128 [0/0] \n     via ::, FastEthernet0/0 \nL   FE80::/10 [0/0] \n     via ::, Null0 \nL   FF00::/8 [0/0] \n     via ::, Null0 \n \nR2#ping FC00:11:11:11::1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 4/8/12 ms \nR1#ping FC00:22:22:22::2 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 8/15/20 ms  \n\n \nCấu hình Default Route \n\nR1(config )# ipv6 route 0::/0 2001:12:12:12::2 \nR2(config )# ipv6 route 0::/0 2001:12:12:12::1  \n\nKiểm tra kết nối \u2013 thông tin bảng định tuyến sau khi đã triển khai static \nR1#show ipv6 route \nIPv6 Routing Table - 9 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nS   ::/0 [1/0]      via 2001:12:12:12::2 \nC   2001:12:12::/64 [0/0] \n     via ::, Serial1/0 \n\n\n\n \n\n133 \nLưu hành nội bộ \n\nL   2001:12:12::1/128 [0/0] \n     via ::, Serial1/0 \nC   2001:12:12:12::/64 [0/0] \n     via ::, Serial1/0 \nL   2001:12:12:12::1/128 [0/0] \n     via ::, Serial1/0 \nC   FC00:11:11:11::/64 [0/0] \n     via ::, FastEthernet0/0 \nL   FC00:11:11:11::1/128 [0/0] \n     via ::, FastEthernet0/0 \nL   FE80::/10 [0/0] \n     via ::, Null0 \nL   FF00::/8 [0/0] \n     via ::, Null0 \n  \nR1#ping FC00:22:22:22::2 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 4/6/8 ms \nR2#show ipv6 route \nIPv6 Routing Table - 7 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nS   ::/0 [1/0]      via 2001:12:12:12::1 \nC   2001:12:12:12::/64 [0/0] \n     via ::, Serial1/0 \nL   2001:12:12:12::2/128 [0/0] \n     via ::, Serial1/0 \nC   FC00:22:22:22::/64 [0/0] \n     via ::, FastEthernet0/0 \nL   FC00:22:22:22::2/128 [0/0] \n     via ::, FastEthernet0/0 \nL   FE80::/10 [0/0] \n     via ::, Null0 \nL   FF00::/8 [0/0] \n     via ::, Null0 \n \nR2#ping fc00:11:11:11::1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 4/7/12 ms \n\n\n\n \n\n134 \nLưu hành nội bộ \n\n \nChương XIV : Giao thức định tuyến động trong IPV6 \nGiao thức định tuyến động trong IPv6 không đổi so với IPv4 \n \n14.1 IGP \n\n RIPng. \n Cisco EIGRP for IPv6. \n OSPFv3. \n\n \n14.2 EGP \n\n MP-BGP4. \n \n\n14.3 RIPng \n\n \nCấu hình triển khai Ripng \n\nR1(config)# ipv6 unicast-routing \nR1(config)# ipv6 router rip CCNA \nR1(config)# exit \nR1(config)# interface s1/0 \nR1(config-if)# ipv6 rip CCNA enable \nR1(config)# interface f0/0 \nR1(config-if)# ipv6 rip CCNA enable \nR2(config)# ipv6 unicast-routing \nR2(config)# ipv6 router rip CCNA \nR2(config)# exit \nR2(config)# interface s1/0 \nR2(config-if)# ipv6 rip CCNA enable \nR2(config)# interface f0/0 \nR2(config-if)# ipv6 rip CCNA enable  \n\n\n\n \n\n135 \nLưu hành nội bộ \n\n \nKiểm tra cấu hình Ripng \n\nR1#show ipv6 protocols \nIPv6 Routing Protocol is \"connected\" \nIPv6 Routing Protocol is \"static\" \nIPv6 Routing Protocol is \"rip CCNA\" \n  Interfaces: \n    Serial1/0     FastEthernet0/0 \n  Redistribution: \n    None \n \nR1#show ipv6 route \nIPv6 Routing Table - 6 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nC   2001:12:12:12::/64 [0/0] \n     via ::, Serial1/0 \nC   FC00:11:11:11::/64 [0/0] \n     via ::, FastEthernet0/0 \nL   FC00:11:11:11::1/128 [0/0] \n     via ::, FastEthernet0/0 \nR   FC00:22:22:22::/64 [120/2] \n     via FE80::C602:13FF:FE5C:0, Serial1/0 L   FE80::/10 [0/0] \n     via ::, Null0 \nL   FF00::/8 [0/0] \n     via ::, Null0 \n \nR1#ping fc00:22:22:22::2 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 8/8/12 ms \nR2#show ipv6 protocols \nIPv6 Routing Protocol is \"connected\" \nIPv6 Routing Protocol is \"static\" \nIPv6 Routing Protocol is \"rip CCNA\" \n  Interfaces: \n    FastEthernet0/0 \n    Serial1/0 \n  Redistribution: \n    None \n \n\n\n\n \n\n136 \nLưu hành nội bộ \n\nR2#show ipv6 route \nIPv6 Routing Table - 7 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nC   2001:12:12:12::/64 [0/0] \n     via ::, Serial1/0 \nL   2001:12:12:12::2/128 [0/0] \n     via ::, Serial1/0 \nR   FC00:11:11:11::/64 [120/2] \n     via FE80::C601:1AFF:FE6C:0, Serial1/0 C   FC00:22:22:22::/64 [0/0] \n     via ::, FastEthernet0/0 \nL   FC00:22:22:22::2/128 [0/0] \n     via ::, FastEthernet0/0 \nL   FE80::/10 [0/0] \n     via ::, Null0 \nL   FF00::/8 [0/0] \n     via ::, Null0 \n \nR2#ping fc00:11:11:11::1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 4/7/8 ms  \n\n14.4 OSPFv3 \n \n\n \n \n\n\n\n \n\n137 \nLưu hành nội bộ \n\nCấu hình triển khai OSPFv3 \nR1(config)# ipv6 unicast-routing \nR1(config)# ipv6 router ospf 1 \nR1(config-rtr)# router-id 11.1.1.1 \nR1(config)# int s1/0 \nR1(config-if)# ipv6 ospf 1 area 0 \nR1(config)# int f0/0 \nR1(config-if)# ipv6 ospf 1 area 0 \nR2(config)# ipv6 unicast-routing \nR2(config)# ipv6 router ospf 1 \nR2(config-rtr)# router-id 22.2.2.2 \nR2(config)# int s1/0 \nR2(config-if)# ipv6 ospf 1 area 0 \nR2(config)# int f0/0 \nR2(config-if)# ipv6 ospf 1 area 0  \n\nKiểm tra cấu hình OSPFv3 đã triển khai \nR1#show ipv6 ospf neighbor \nNeighbor ID     Pri   State           Dead Time   Interface ID    Interface \n22.2.2.2            1      FULL/  -     00:00:33      6                      Serial1/0  \nR1#show ipv6 route ospf \nIPv6 Routing Table - 6 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nO   FC00:22:22:22::/64 [110/74] \n     via FE80::C602:13FF:FE5C:0, Serial1/0  \nR1#ping  FC00:22:22:22::2 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 4/8/12 ms \nR2#show ipv6 ospf neighbor \nNeighbor ID     Pri   State           Dead Time   Interface ID    Interface \n11.1.1.1            1      FULL/  -     00:00:32      6                      Serial1/0  \nR2#show ipv6 route ospf \nIPv6 Routing Table - 7 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n\n\n\n \n\n138 \nLưu hành nội bộ \n\n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nOI  FC00:11:11:11::/64 [110/74] \n     via FE80::C601:1AFF:FE6C:0, Serial1/0 \n R2#ping  FC00:11:11:11::1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 8/8/12 ms  \n\n14.5 EIGRP FOR IPv6 \n\n \nCấu hình triển khai EIGRP \n\nR1(config)# ipv6 unicast-routing \nR1(config)# ipv6 router eigrp 100 \nR1(config-rtr)# no shut \nR1(config-rtr)# router-id 11.1.1.1 \nR1(config)# int s1/0 \nR1(config-if)# ipv6 eigrp 100 \nR1(config)# int f0/0 \nR1(config-if)# ipv6 eigrp 100 \nR2(config)# ipv6 unicast-routing \nR2(config)# ipv6 router eigrp 100 \nR2(config-rtr)# no shut \nR2(config-rtr)# router-id 22.2.2.2 \nR2(config)# int s1/0 \nR2(config-if)# ipv6 eigrp 100 \nR2(config)# int f0/0 \nR2(config-if)# ipv6 eigrp 100  \n\nKiểm tra cấu hình EIGRP \nR1#show ipv6 route  \nIPv6 Routing Table - 6 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n\n\n\n \n\n139 \nLưu hành nội bộ \n\n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nD   FC00:22:22:22::/64 [110/74] \n     via FE80::C602:13FF:FE5C:0, Serial1/0 \nR2#show ipv6 route  \nIPv6 Routing Table - 7 entries \nCodes: C - Connected, L - Local, S - Static, R - RIP, B - BGP \n       U - Per-user Static route \n       I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary \n       O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 \n       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 \nD   FC00:11:11:11::/64 [110/74] \n     via FE80::C601:1AFF:FE6C:0, Serial1/0  \nR2#ping  FC00:11:11:11::1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 8/8/12 ms  \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n\n \n\n140 \nLưu hành nội bộ \n\nChương XV: Các công nghệ mạng WAN \n \n\n  \n15.1 Các kiểu kết nối trong mạng WAN \n\n \n\n  \n \n \n\n \n\n\n\n \n\n141 \nLưu hành nội bộ \n\n15.2 Các kiểu kết nối mới của mạng WAN \n MPLS (Multiprotocol Label Switching). \n Metro Ethernet \u2013 mạng thành phố. \n VPN (Virtual Private Network) \u2013 mạng riêng ảo. \n DSL (Digital Subcriber Line) \u2013 kênh thuê bao số, cung cấp dịch vụ kết nối \n\nmạng thông qua cáp kết nối điện thoại. \n VSAT \u2013 mạng vệ tinh . \n\n \n15.3 Kênh riêng (Leased line) \n\n  \n \n \n\n15.4 Giao thức WAN \n \n\nHDLC PPP \n- High-level Data Link Control \n\nprotocol (giao thức kiểm soát ). \n- Độc quyền của Cisco. \n- Không hỗ trợ quá trình xác thực, nén \n\nthông tin và sửa lỗi. \n- Mặc định trên các đường sử dụng \n\ndây Serial kết nối. \n\n- Point to point Protocol (giao thức điểm \n\u2013 điểm). \n\n- Giao thức cơ bản trên các hệ thống \nmạng. \n\n- Hỗ trợ quá trình xác thực thông tin, nén \nthông tin và sửa lỗi. \n\n- Được xây dựng và phát triển dựa trên \nnền tảng HDLC.  \n\n \n\n\n\n \n\n142 \nLưu hành nội bộ \n\n  \nHDLC trên đường kết nối sử dụng dây Serial. \n\n \n \n \n \n\n  \nVà giao thức ARPA trên đường kết nối sử dụng dây mạng qua cổng Fast Ethernet \n\n \n\n\n\n \n\n143 \nLưu hành nội bộ \n\n  \nGiao thức PPP sau khi đã được khởi động trên cổng mạng \n\n \n Khởi động giao thức PPP : \n\na. Trên Router : \nR2#configure terminal \nR2(config)#interface Serial 4/0 \nR2(config-if)#encapsulation ppp \n. . . . .  \n\n15.5 Xác thực PPP (Point \u2013 to \u2013 Point Protocol) \n \n\nPAP CHAP \n- Password Authentication Protocol \n\n(giao thức xác thực bằng Password). \n- PAP cung cấp một phương pháp kết \n\nnối từ xa đơn giản thông qua 2 bước \nbắt tay kết nối. \n\n- PAP được thực hiện trong quá trình \nhình thành liên kết ban đầu. \n\n- PAP cũng không hẳn là một giao \nthức xác thực mạnh. \n\n- PAP gửi thông tin một cách rõ ràng \nqua đường kết nối. \n\n- Challenge handshake Authentication \nProtocol. \n\n- Sau khi link PPP được hình thành, \nRouter sẽ gửi một bản tin local chứa \nthông tin nó đã mã hóa cho kết nối từ xa \nmà Router đang kết nối. \n\n- Thiết bị kết nối từ xa đó sẽ gửi lại cho \nRouter một giá trị (MD5). \n\n- Router sẽ kiểm tra lại thông tin local nó \nđang mang và so sánh với giá trị nó vừa \nnhận lại được từ thiết bị kết nối từ xa đó. \n\n- Nếu hai giá trị là giống nhau, thì quá \ntrình xác thực sẽ thành công, còn nếu \nkhông thì Router sẽ tự động chấm dứt \nkết nối ngay lập tức.  \n\n\n\n \n\n144 \nLưu hành nội bộ \n\n  \n \n\n15.6 Bài Lab : cấu hình PAP  \n\n R1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#username R2 password Bachkhoa-Aptech123a@ \nR1(config)#interface Serial 4/0 \nR1(config-if)#ip address 10.10.10.10 255.255.255.0 \nR1(config-if)#encapsulation ppp \nR1(config-if)#ppp authentication pap \nR1(config-if)#ppp pap sent-username R2 password Bachkhoa-Aptech123a@ \nR1(config-if)#no shut \nR1(config-if)#end \nR1#wr \nR2#configure terminal \n\n\n\n \n\n145 \nLưu hành nội bộ \n\nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#username R1 password Bachkhoa-Aptech123a@ \nR2(config)#interface Serial 4/0 \nR2(config-if)#ip address 10.10.10.10 255.255.255.0 \nR2(config-if)#encapsulation ppp \nR2(config-if)#ppp authentication pap \nR2(config-if)#ppp pap sent-username R1 password Bachkhoa-Aptech123a@ \nR2(config-if)#no shut \nR2(config-if)#end \nR2#wr  \n\n \n15.7 Bài Lab : cấu hình CHAP \n\n  \nR1#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR1(config)#username R2 password Bachkhoa-Aptech123a@ \nR1(config)#interface Serial 4/0 \nR1(config-if)#ip address 10.10.10.10 255.255.255.0 \nR1(config-if)#encapsulation ppp \nR1(config-if)#ppp authentication chap \nR1(config-if)#no shut \nR1(config-if)#end \nR2#configure terminal \nEnter configuration commands, one per line.  End with CNTL/Z. \nR2(config)#username R1 password Bachkhoa-Aptech123a@ \nR2(config)#interface Serial 4/0 \nR2(config-if)#ip address 10.10.10.10 255.255.255.0 \nR2(config-if)#encapsulation ppp \nR2(config-if)#ppp authentication chap \nR2(config-if)#no shut \nR2(config-if)#end \nR2#wr \n\n \n \n \n\n\n\n \n\n146 \nLưu hành nội bộ \n\n15.8 Các loại kết nối WAN bao gồm \n Leased Line ( Kênh riêng). \n Chuyển mạch kênh. \n Chuyển mạch gói (Frame Relay, MPLS). \n\n \n15.9 Leased Line  \n\n Kênh truyền cố định từ nguồn tới đích. \n Băng thông cố định. \n Khả năng sẵn sàng 24/7. \n Giá thành cao. \n\n \n \n\n15.10 Kỹ thuật chuyển mạch kênh (Circuit Switching) \n Một đặc trưng nổi bật của kĩ thuật này là hai trạm muốn trao đổi thông tin với \n\nnhau thì giữa chúng sẽ được thiết lập một \u201c kênh\u201d (circuit) cố định, kênh kết nối \nnày được duy trì và dành riêng cho hai trạm cho tới khi cuộc truyền tin kết thúc. \nThông tin cuộc gọi là trong suốt. Quá trình thiết lập cuộc gọi tiến hành gồm 3 \ngiai đoạn: \n\n\n\n \n\n147 \nLưu hành nội bộ \n\n Giai đoạn thiết lập kêt nối: Thực chất quá trình này là liên kết các tuyến giữa các \ntrạm trên mạng thành một tuyến (kênh) duy nhất dành riêng cho cuộc gọi. Kênh \nnày đối với PSTN là 64kb/s (do bộ mã hóa PCM có tốc độ lấy mẫu tiếng nói \n8kb/s và được mã hóa 8 bit). \n\n Giai đoạn truyền tin: Thông tin cuộc gọi là trong suốt. Sự trong suốt thể hiện qua \nhai yếu tố: thông tin không bị thay đổi khi truyền qua mạng và độ trễ nhỏ. \n\n Giai đoạn giải phóng (huỷ bỏ) kết nối: Sau khi cuộc gọi kết thúc, kênh sẽ được \ngiải phóng để phục vụ cho các cuộc gọi khác. \n\n Qua đó, ta nhận thấy mạng chuyển mạch kênh có những ưu điểm nổi bật như \nchất lượng đường truyền tốt, ổn định, có độ trễ nhỏ. Các thiết bị mạng của chuyển \nmạch kênh đơn giản, có tính ổn định cao, chống nhiễu tốt. Nhưng ta cũng không \nthể không nhắc tới những hạn chế của phương thức truyền dữ liệu này như: \n\na. Sử dụng băng thông không hiệu quả: Tính không hiệu quả này thể hiện \nqua hai yếu tố. Thứ nhất, độ rộng băng thông cố định 64k/s. Thứ hai là \nkênh là dành riêng cho một cuộc gọi nhất định. Như vậy, ngay cả khi tín \nhiệu thoại là \u201clặng\u201d (không có dữ liệu) thì kênh vẫn không được chia sẻ \ncho cuộc gọi khác. \n\nb. Tính an toàn: Do tín hiệu thoại được gửi nguyên bản trên đường truyền \nnên rất dễ bị nghe trộm. Ngoài ra, đường dây thuê bao hoàn toàn có thể \nbị lợi dụng để an trộm cước viễn thông. \n\nc. Khả năng mở rộng của mạng kênh kém: Thứ nhất là do cơ sở hạ tầng khó \nnâng cấp và tương thích với các thiết bị cũ. Thứ hai, đó là hạn chế của hệ \nthống báo hiệu vốn đã được sử dụng từ trước đó không có khả năng tùy \nbiến cao. \n\n \n15.11 Kỹ thuật chuyển mạch gói (Packet Switching) \n\n Trong chuyển mạch gói mỗi bản tin được chia thành các gói tin (packet), có \nkhuôn dạng được quy định trước. Trong mỗi gói cũng có chứa thông tin điều \nkhiển: địa chỉ trạm nguồn, địa chỉ trạm đích và số thứ tự của gói tin,\u2026 Các thông \ntin điều khiển được tối thiểu, chứa các thông tin mà mạng yêu cầu để có thể định \n\n\n\n \n\n148 \nLưu hành nội bộ \n\ntuyến được cho các gói tin qua mạng và đưa nó tới đích. Tại mỗi node trên tuyến \ngói tin được nhận, nhớ và sau đó thì chuyển tiếp cho tới chạm đích. Vì kỹ thuật \nchuyển mạch gói trong quá trình truyền tin có thể được định tuyến động để \ntruyền tin. Điều khó khăn nhất đối với chuyển mạch gói là việc tập hợp các gói \ntin để tạo bản tin bản đầu đặc biệt là khi mà các gói tin được truyền theo nhiều \ncon đường khác nhau tới trạm đích. Chính vì lý do trên mà các gói tin cần phải \nđược đánh dấu số thứ tự, điều này có tác dụng, chống lặp, sửa sai và có thể truyền \nlại khi hiên tượng mất gói xảy ra. \n\n15.12 Các ưu điểm của chuyển mạch gói: \n Mềm dẻo và hiệu suất truyền tin cao: Hiệu suất sử dụng đường truyền rất cao vì \n\ntrong chuyển mạch gói không có khái niệm kênh cố định và dành riêng, mỗi \nđường truyền giữa các node có thể được các trạm cùng chia sẻ cho để truyền tin, \ncác gói tin sắp hàng và truyền theo tốc độ rất nhanh trên đường truyền. \n\n Khả năng tryền ưu tiên: Chuyển mạch gói còn có thể sắp thứ tự cho các gói để \ncó thể truyền đi theo mức độ ưu tiên. Trong chuyển mạch gói số cuộc gọi bị từ \nchối ít hơn nhưng phải chấp nhận một nhược điểm vi thời gian trễ sẽ tăng lên. \n\n Khả năng cung cấp nhiều dịch vụ thoại và phi thoại. \n Thích nghi tốt nếu như có lỗi xảy ra: Đặc tính này có được là nhờ khả năng định \n\ntuyến động của mạng. \n Bên cạnh những ưu điểm thì mạng chuyển mạch gói cũng bộ lộ những nhược \n\nđiểm như: \n Trễ đường truyền lớn: Do đi qua mỗi trạm, dữ liệu được lưu trữ, xử lý trước khi \n\nđược truyền đi. \n Độ tin cậy của mạng gói không cao, dễ xảy ra tắc nghẽn, lỗi mất bản tin \n Tính đa đường có thể gây ra lặp bản tin, làm tăng lưu lượng mạng không cần \n\nthiết. \n Tính bảo mật trên đường truyền chung là không cao. \n\n\n\n \n\n149 \nLưu hành nội bộ \n\n \n \n\n15.13 Công nghệ Frame Relay \n Sử dụng hạ tầng sẵn có của nhà cung cấp dịch vụ. \n Giá thành rẻ hơn so với thuê kênh riêng. \n\n \n\n\n\n \n\n150 \nLưu hành nội bộ \n\n \n15.14 Các thuộc tính Frame relay \n\n Virtual Circuit:  \na. Kết nối trong công nghệ frame realy được cung cấp bởi các kênh ảo (Virtual \n\nCircuit). \nb. Nhiều kết nối ảo trong cùng 01 kết nối vật lý. \n\n DLCI:  \na. Data link connection identifier là đường định danh một đường kết nối ảo trên \n\n01 đường vật lý nào đó. \nb. Giá trị từ 16 -1007. \nc. DLCI chỉ có ý nghĩa nội bộ trên 01 đường truyền. \n\n \n15.15 Các loại mạng Frame Relay \n\n Point to Point. \n Point to MultiPoint . \n\n \n\n\n\n \n\n151 \nLưu hành nội bộ \n\n \n15.16 Cấu hình Frame realy Point to Point \n\n \n \n\nCấu hình Frame-Relay trên các Router \nR1(config)#interface loopback 0 \nR1(config-if)#ip address 1.1.1.1 255.255.0.0 \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#interface serial 6/0 \nR1(config-if)#ip address 12.12.12.1 255.255.255.0 \nR1(config-if)#encapsulation frame-relay \nR1(config-if)#frame-relay lmi-type ansi \nR1(config-if)#no shut \nR1(config-if)#exit \nR1(config)#router eigrp 123 \nR1(config-router)#network 12.12.12.0 0.0.0.255 \nR1(config-router)#network 1.1.1.0 0.0.255.255 \nR1(config-router)#no auto-summary \nR1(config-router)#exit \nR1(config)# \nR2(config)#interface loopback 0 \nR2(config-if)#ip address 2.2.2.2 255.255.0.0 \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#interface serial 6/1 \nR2(config-if)#ip address 12.12.12.2 255.255.255.0 \nR2(config-if)#encapsulation frame-relay \nR2(config-if)#frame-relay lmi-type ansi \nR2(config-if)#no shut \nR2(config-if)#exit \nR2(config)#router eigrp 123 \nR2(config-router)#network 2.2.2.0 0.0.255.255 \nR2(config-router)#network 12.12.12.0 0.0.0.255 \nR2(config-router)#no auto-summary \nR2(config-router)#exit \nR2(config)# \n\n\n\n \n\n152 \nLưu hành nội bộ \n\nFRSW(config)#frame-relay switching \nFRSW(config)#interface serial 6/1 \nFRSW(config-if)#encapsulation frame-relay \nFRSW(config-if)#frame-relay lmi-type ansi \nFRSW(config-if)#frame-relay intf-type dce \nFRSW(config-if)#clock rate 64000 \nFRSW(config-if)#frame-relay route 123 int serial 6/0 456 \nFRSW(config-if)#no shut \nFRSW(config-if)#exit \nFRSW(config)#interface serial 6/0 \nFRSW(config-if)#encapsulation frame-relay \nFRSW(config-if)#frame-relay lmi-type ansi \nFRSW(config-if)#frame-relay intf-type dce \nFRSW(config-if)#clock rate 64000 \nFRSW(config-if)#frame-relay route 456 int serial 6/1 123 \nFRSW(config-if)#no shut \nFRSW(config-if)#exit \nFRSW(config)# \n\n \nKiểm tra cấu hình Frame-relay và thông tin trên các Router \n\nFRSW#show frame-relay route \nInput Intf      Input Dlci      Output Intf     Output Dlci     Status \nSerial6/0       456                Serial6/1         123                  active \nSerial6/1       123                Serial6/0         456                  active  \nFRSW#show frame lmi \nLMI Statistics for interface Serial6/0 (Frame Relay DCE) LMI TYPE = ANSI \n  Invalid Unnumbered info 0             Invalid Prot Disc 0 \n  Invalid dummy Call Ref 0               Invalid Msg Type 0 \n  Invalid Status Message 0                 Invalid Lock Shift 0 \n  Invalid Information ID 0                 Invalid Report IE Len 0 \n  Invalid Report Request 0                 Invalid Keep IE Len 0 \n  Num Status Enq. Rcvd 55                Num Status msgs Sent 55 \n  Num Update Status Sent 0               Num St Enq. Timeouts 0 \nLMI Statistics for interface Serial6/1 (Frame Relay DCE) LMI TYPE = ANSI \n  Invalid Unnumbered info 0            Invalid Prot Disc 0 \n  Invalid dummy Call Ref 0              Invalid Msg Type 0 \n  Invalid Status Message 0                Invalid Lock Shift 0 \n  Invalid Information ID 0                Invalid Report IE Len 0 \n  Invalid Report Request 0                Invalid Keep IE Len 0 \n  Num Status Enq. Rcvd 56               Num Status msgs Sent 56 \nR1#ping 2.2.2.2 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 2.2.2.2, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms \n\n\n\n \n\n153 \nLưu hành nội bộ \n\nR1#show ip route \n     1.0.0.0/16 is subnetted, 1 subnets \nC       1.1.0.0 is directly connected, Loopback0 \n     2.0.0.0/16 is subnetted, 1 subnets \nD       2.2.0.0 [90/2297856] via 12.12.12.2, 00:08:50, Serial6/0 \n     12.0.0.0/24 is subnetted, 1 subnets C       12.12.12.0 is directly connected, Serial6/0 \nR2#ping 1.1.1.1 \nType escape sequence to abort. \nSending 5, 100-byte ICMP Echos to 1.1.1.1, timeout is 2 seconds: \n!!!!! \nSuccess rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms \n \nR2#show ip route \n     1.0.0.0/16 is subnetted, 1 subnets \nD       1.1.0.0 [90/2297856] via 12.12.12.1, 00:09:39, Serial6/1      2.0.0.0/16 is subnetted, 1 subnets \nC       2.2.0.0 is directly connected, Loopback0 \n     12.0.0.0/24 is subnetted, 1 subnets \nC       12.12.12.0 is directly connected, Serial6/1 \n\n \n15.17 Mô hình kết nối WAN hiện đại \n\n MPLS (Metro Ethernet). \n VPN.  \n FTTH GPON. \n\n \n15.18 Metro Ethernet \n\n Metro Wan là dịch vụ cung cấp mạng riêng (nội bộ) với mục đích truyền dữ liệu dành \ncho doanh nghiệp có nhiều chi nhánh, trụ sở trên toàn quốc dựa trên hạ tầng \nMPLS/VPN Layer 2. \n\n Công nghệ MPLS layer 2 tận dụng ưu điểm của định tuyến IP cho phép nâng cao khả \nnăng chuyển gói qua mạng, tăng cường hiệu quả hoạt động của mạng. Đồng thời hỗ trợ \ncác tính năng QoS (Quality of Service), CoS (Class of Service) cho các dịch vụ yêu \ncầu chất lượng khác nhau như: voice, data, video\u2026 \n\n\n\n \n\n154 \nLưu hành nội bộ \n\n \n15.19 Lợi ích mô hình Metro Ethernet \n\n Chất lượng dịch vụ ổn định, Metro Wan-MPLS Layer 2 còn đáp ứng được tất cả \ncác mô hình kết nối: \n\na. Kết nối điểm \u2013 điểm (Point to point). \nb. Kết nối điểm \u2013 đa điểm (Point to Multipoint). \nc. Kết nối full mesh. \n\n Tiết kiệm chi phí: Dịch vụ Metro Wan-MPLS Layer 2 giúp khách hàng thiết lập \nmạng riêng với chi phí thấp do chỉ tạo kết nối ảo. Tất cả các điểm có thể liên hệ trực \ntiếp với nhau với chỉ một kết nối vật lý duy nhất tại mỗi địa điểm. \n\n Tính linh hoạt: Sử dụng dịch vụ này khách hàng dễ dàng mở rộng mô hình, tăng \nthêm điểm kết nối, tăng băng thông, tốc độ trong thời gian sử dụng mà không cần \nphải thay đổi mô hình hay kiến trúc mạng. \n\n Tính bảo mật cao: Kết nối giữa các điểm được mã hóa, gán nhãn và thiết lập đường \nhầm (tunnel) riêng trên hệ thống mạng lõi của nhà cung cấp dịch vụ. \n \n\n15.20 Phạm vi, đối tượng sử dụng dịch vụ \n Đối tượng sử dụng là các Doanh nghiệp, tổ chức lớn đang hoạt động trên lãnh \n\nthổ Việt Nam cần một đường truyền riêng tốc độ cao, ổn định, chất lượng cùng \nsự hỗ trợ kỹ thuật tốt nhất từ Viettel, bao gồm như: \n\na. Các khách sạn lớn, ngân hàng.. \nb. Các khu công nghiệp. \n\n\n\n \n\n155 \nLưu hành nội bộ \n\nc. Các trường cao đẳng, đại học. \nd. Các đại sứ quán, tổ chức quốc tế, văn phòng đại diện. \ne. Các công ty về lĩnh vực giải pháp CNTT. \nf. Các doanh nghiệp FDI. \n\n \n15.21 VPN \n\n VPN  là công nghệ xây dựng hệ thống mạng riêng ảo nhằm đáp ứng nhu cầu chia sẻ \nthông tin, truy cập từ xa và tiết kiệm chi phí. Trước đây, để truy cập từ xa vào hệ thống \nmạng, người ta thường sử dụng phương thức Remote Access quay số dựa trên mạng \nđiện thoại. Phương thức này vừa tốn kém vừa không an","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2018/20181012/tranhanh9196/ccna_ca_n_ba_n_bach_khoa_aptech_5241.txt","sentences":[[1,"1 Lưu hành nội bộ Mục lục Chương I : Mạng cơ bản ............................................................................................................."],[2,"8 1.1 Mạng (Network) ..........................................................................................................."],[3,"8 1.2 Mạng nội bộ (Local Area Network \u2013 LAN)................................................................."],[4,"8 1.3 Mạng diện rộng (Wide Area Network \u2013 WAN)..........................................................."],[5,"9 1.4 Mạng đô thị (Metro-politan Area Network \u2013 MAN) ..................................................."],[6,"9 1.5 Mạng cá nhân (Personal Area Network - PAN)........................................................."],[7,"10 1.6 Internet ......................................................................................................................."],[8,"10 1.7 Những kích thước hệ thống mạng .............................................................................."],[9,"10 1.8 Thiết bị chuyển mạch Cisco (Switch Cisco) .............................................................."],[10,"11 1.9 Thiết bị mạng không dây (Wireless Access Point) ...................................................."],[11,"11 1.10 Thiết bị định tuyến Cisco (Router Cisco) .................................................................."],[12,"11 1.11 Thiết bị tường lửa Cisco (Firewall Cisco) ................................................................."],[13,"11 1.12 Điện thoại sử dụng địa chỉ IP/ thiết bị thoại (IP phone/ Voice Devices) ..................."],[14,"12 1.13 Thiết bị mạng kết nối trong gia đình .........................................................................."],[15,"13 1.14 Giới thiệu về Cisco ....................................................................................................."],[16,"13 1.15 Các cấp bậc chứng chỉ của Cisco ..............................................................................."],[17,"13 1.16 Thi chứng chỉ CCNA Cisco ......................................................................................."],[18,"14 1.17 Những nội dung mới trong CCNA 200-120 .............................................................."],[19,"14 Chương II: TCP/IP ...................................................................................................................."],[20,"16 2.1 Giao thức (protocol) ..................................................................................................."],[21,"16 2.2 TCP/IP là gì ................................................................................................................"],[22,"16 2.3 Địa chỉ TCP/IP ..........................................................................................................."],[23,"16 2.4 Địa chỉ IPv4 ..............................................................................................................."],[24,"16 2.5 Bảng chuyển đổi từ hệ Nhị Phân sang hệ Thập Phân ................................................"],[25,"17 2.6 Bảng chuyển đổi từ hệ Thập Phân sang hệ Nhị Phân ................................................"],[26,"17 2.7 Gán một địa chỉ IP tĩnh cho máy vi tính ...................................................................."],[27,"18 2.8 Gán địa chỉ IPv4 động cho 1 Host ............................................................................."],[28,"19 2.9 Phạm vi khả dụng của IPv4 ........................................................................................"],[29,"20 2.10 Các lớp địa chỉ IP (IP Address Classification) ..........................................................."],[30,"20 2.11 Phần Mạng và Host ...................................................................................................."],[31,"20"],[32,"2 Lưu hành nội bộ 2.12 Mạng và địa chỉ Broadcast ........................................................................................."],[33,"20 2.13 Subnet \u2013 mask ............................................................................................................"],[34,"21 2.14 Địa chỉ riêng (Reserved Address) .............................................................................."],[35,"21 2.15 127.x.x.x \u2013 địa chỉ Loopback ....................................................................................."],[36,"21 2.16 Địa chỉ IP Private/ IP Public ......................................................................................"],[37,"22 2.17 Địa chỉ cá nhân (Private IP Address) ........................................................................."],[38,"22 2.18 Phân bổ địa chỉ IP ......................................................................................................"],[39,"23 2.19 Mạng con (subnetting) ..............................................................................................."],[40,"23 2.20 FLSM và VLSM ........................................................................................................"],[41,"23 2.21 Ví dụ về VLSM .........................................................................................................."],[42,"24 2.22 Một vài ví dụ về VLSM ............................................................................................."],[43,"25 2.23 Những câu hỏi về Mạng con (Subnet) ......................................................................."],[44,"27 2.24 Các phương thức kết nối ............................................................................................"],[45,"27 2.25 Unicast........................................................................................................................"],[46,"27 2.26 Broadcast ...................................................................................................................."],[47,"28 2.27 Multicast ....................................................................................................................."],[48,"28 2.28 Giới thiệu về thiết bị định tuyến (Router) và thiết bị chuyển mạch (Switch) ............"],[49,"29 2.29 Các phương tiện truyền thông ...................................................................................."],[50,"29 2.30 Cáp xoắn đôi \u2013 UTP (Unshielded Twisted Pair ) ......................................................."],[51,"29 2.31 Cáp thẳng và cáp chéo................................................................................................"],[52,"30 2.32 Cáp đồng trục (Co-axial cable) ................................................................................."],[53,"31 2.33 Cáp quang (Fiber cables) ..........................................................................................."],[54,"31 2.34 Mạng LAN không dây (Wireless LAN) ...................................................................."],[55,"32 2.35 Thiết lập một mạng LAN cơ bản sử dụng Cisco Packet Tracer ................................"],[56,"32 2.36 Router (thiết bị định tuyến) ........................................................................................"],[57,"33 2.37 Các hãng sản xuất thiết bị định tuyến ( Router ) ........................................................"],[58,"33 2.38 Phân biệt thiết bị Cisco và phạm vi sử dụng .............................................................."],[59,"33 2.39 Access Layer Router .................................................................................................."],[60,"34 2.40 Distribution Layer Router .........................................................................................."],[61,"35 2.41 Core Layer Router ......................................................................................................"],[62,"35 2.42 Phân loại Router ........................................................................................................."],[63,"36 2.43 Các cổng kết nối ra bên ngoài của Router : LAN, WAN, Admin ports....................."],[64,"36 2.44 Cổng LAN \u2013 cổng WAN............................................................................................"],[65,"36"],[66,"3 Lưu hành nội bộ 2.45 Cổng Console (Console port) ....................................................................................."],[67,"37 2.46 Cổng kết nối phụ (Auxiliary Port ..............................................................................."],[68,"37 2.47 AUI (Attachment Unit Interface) ..............................................................................."],[69,"38 2.48 Các cổng kết nối ra ngoài của router (tiếp) ................................................................"],[70,"39 2.49 Các thành phần của Router ........................................................................................"],[71,"39 Chương III : Những câu lệnh cơ bản (Basic Commands) ......................................................"],[72,"41 3.1 Kết nối Console .........................................................................................................."],[73,"41 3.2 Các chế độ (Mode) trên Router Cisco ........................................................................"],[74,"43 3.3 Đặt password cho các kết nối ....................................................................................."],[75,"46 3.4 Cấu hình password cho Router .................................................................................."],[76,"46 3.5 Mã hóa mật khẩu ........................................................................................................"],[77,"47 3.6 Lưu cấu hình đã thực hiện cho Router ......................................................................."],[78,"47 3.7 Xóa cấu hình đã thiết lập trên Router ........................................................................"],[79,"47 3.8 Banner ........................................................................................................................"],[80,"48 3.9 Kết nối điểm \u2013 điểm sử dụng cable Serial ................................................................."],[81,"48 3.10 Những luật lưu ý khi thiết lập địa chỉ IP cho Router ................................................."],[82,"49 3.11 Gán địa chỉ IP cho Router .........................................................................................."],[83,"49 3.12 Lab : câu lệnh cơ bản trên Router .............................................................................."],[84,"50 3.13 Cable kết nối RJ45 ....................................................................................................."],[85,"53 Chương IV: Định tuyến (Routing) ............................................................................................"],[86,"54 4.1 Định tuyến .................................................................................................................."],[87,"54 4.2 Các phương pháp định tuyến ....................................................................................."],[88,"54 4.3 Định tuyến tĩnh (Static Routing) ................................................................................"],[89,"54 4.4 Cấu hình định tuyến tĩnh ............................................................................................"],[90,"55 4.5 Default Route ............................................................................................................."],[91,"56 4.6 Triển khai phương pháp Default Route ......................................................................"],[92,"57 Chương V: Định tuyến động (Dynamic Routing) ..................................................................."],[93,"60 5.1 Định tuyến động (Dynamic Routing) ........................................................................."],[94,"60 5.2 Các giao thức định tuyến động ..................................................................................."],[95,"60 5.3 Giao thức Classfull ....................................................................................................."],[96,"60 5.4 Giao thức Classless ...................................................................................................."],[97,"61 5.5 RIP (Routing Information Protocol) .........................................................................."],[98,"61 5.6 Rip Timers .................................................................................................................."],[99,"61"],[100,"4 Lưu hành nội bộ 5.7 So sánh Ripv1 và Ripv2 ............................................................................................."],[101,"61 5.8 Ưu điểm của giao thức RIP ........................................................................................"],[102,"62 5.9 Nhược điểm của giao thức RIP .................................................................................."],[103,"62 5.10 Bài Lab : cấu hình giao thức định tuyến Ripv1 ........................................................."],[104,"62 5.11 Cấu hình RIPv2 .........................................................................................................."],[105,"64 5.12 Administrative Distance ............................................................................................."],[106,"68 5.13 Autonomous System - AS .........................................................................................."],[107,"68 5.14 Phân loại giao thức định tuyến động .........................................................................."],[108,"69 5.15 Giao thức EIGRP (Enhanced Interior Gateway Routing Protocol) ..........................."],[109,"69 5.16 Bảng thông tin EIGRP : ............................................................................................."],[110,"70 5.17 Chỉ số Metric của EIGRP ..........................................................................................."],[111,"70 5.18 Bài lab : cấu hình giao thức EIGRP ..........................................................................."],[112,"71 5.19 OSPF \u2013 Open Shortest Path First ..............................................................................."],[113,"76 5.20 Thiết lập truyền thông hai chiều trong OSPF ............................................................"],[114,"77 5.21 Khám phá thông tin các dải địa chỉ trong mạng........................................................."],[115,"78 5.22 Router-ID ..................................................................................................................."],[116,"78 5.23 Thêm một Entries trạng thái đường Link ..................................................................."],[117,"78 5.24 OSPF tables ................................................................................................................"],[118,"79 5.25 Các vùng OSPF (OSPF Areas) .................................................................................."],[119,"79 5.26 Những vấn đề có thể xảy ra trong quá trình duy trì mạng lưới OSPF ......................."],[120,"79 5.27 Giải pháp : phân cấp định tuyến trong OSPF ............................................................."],[121,"80 5.28 Các vùng trong OSPF (OSPF Areas) ........................................................................."],[122,"80 5.29 Ưu điểm của giao thức OSPF ....................................................................................."],[123,"81 5.30 Nhược điểm của giao thức OSPF ..............................................................................."],[124,"81 5.31 Bài Lab : OSPF đơn vùng (1 area ) ............................................................................"],[125,"81 5.32 Bài lab : OSPF đa vùng .............................................................................................."],[126,"85 Chương VI: Access Control List ..............................................................................................."],[127,"89 6.1 Access Control List (ACL) \u2013 kiểm soát truy cập ......................................................."],[128,"89 6.2 Các dạng Access-list .................................................................................................."],[129,"89 6.3 Bài lab : cơ bản Access-list ........................................................................................"],[130,"90 6.4 Bài lab : Access-list nâng cao ...................................................................................."],[131,"91 6.5 Named Access-list ......................................................................................................"],[132,"92 6.6 Bài Lab : Named ACL ..............................................................................................."],[133,"92"],[134,"5 Lưu hành nội bộ Chương VII: NAT ......................................................................................................................"],[135,"94 7.1 NAT (Network address translation) ..........................................................................."],[136,"94 7.2 Dải địa chỉ IP Private ................................................................................................."],[137,"94 7.3 Các dạng cơ bản của NAT ........................................................................................."],[138,"94 7.4 Static NAT ................................................................................................................."],[139,"94 7.5 Dynamic NAT ............................................................................................................"],[140,"95 7.6 Port Address Translasion (Dynamic Nat Overload) .................................................."],[141,"95 7.7 Bài Lab : Static NAT.................................................................................................."],[142,"96 7.8 Bài Lab : Dynamic NAT ............................................................................................"],[143,"97 7.9 Bài Lab : Port Address Translation ............................................................................"],[144,"98 Chương VIII: Chuyển mạch ..................................................................................................."],[145,"100 8.1 Router & Switch ......................................................................................................."],[146,"100 8.2 Phân biệt giữa Hub và Switch .................................................................................."],[147,"100 8.3 Cơ chế hoạt động của ARP ......................................................................................"],[148,"101 8.4 Switch học địa chỉ MAC như thế nào ......................................................................"],[149,"101 8.5 Broadcast Domain ...................................................................................................."],[150,"102 8.6 CSMA/CD ................................................................................................................"],[151,"102 8.7 Collision Domain ....................................................................................................."],[152,"103 8.8 Phân loại Switch ......................................................................................................."],[153,"103 8.9 Kiến trúc phân tầng trong thiết kế của Cisco ..........................................................."],[154,"103 8.10 Khởi tạo cấu hình switch .........................................................................................."],[155,"104 Chương IX: VLAN & Trunk .................................................................................................."],[156,"106 9.1 Virtual LAN ............................................................................................................."],[157,"106 9.2 Lợi ích của việc sử dụng VLAN .............................................................................."],[158,"106 Chương X: Phân loại VLAN ..................................................................................................."],[159,"107 10.1 VLAN tĩnh ..............................................................................................................."],[160,"107 10.2 LAB 1\u2013 Kiểm tra cấu hình VLAN ..........................................................................."],[161,"109 10.3 VLAN động .............................................................................................................."],[162,"112 10.4 Trunking ..................................................................................................................."],[163,"113 Chương XI: Phân loại links/ports ..........................................................................................."],[164,"114 11.1 Access links .............................................................................................................."],[165,"114 11.2 Trunk links ..............................................................................................................."],[166,"114 11.3 Frame Tagging ........................................................................................................."],[167,"114"],[168,"6 Lưu hành nội bộ 11.4 Trunking Protocol ...................................................................................................."],[169,"115 11.5 Cấu hình trunking ....................................................................................................."],[170,"115 Chương XII: Giao thức Spanning-tree .................................................................................."],[171,"116 12.1 Bridging loops (Vòng lặp) ......................................................................................."],[172,"116 12.2 Giải pháp tránh Bridging loops ................................................................................"],[173,"116 12.3 Giao thức STP .........................................................................................................."],[174,"116 12.4 STP hoạt động như thế nào ......................................................................................"],[175,"117 12.5 Lựa chọn Root Bridge ............................................................................................."],[176,"118 12.6 Lựa chọn Root Port .................................................................................................."],[177,"118 12.7 STP Port Cost ..........................................................................................................."],[178,"118 12.8 Lựa chọn Designated port và Non Designated port ................................................."],[179,"118 12.9 BPDU ......................................................................................................................."],[180,"118 12.10 Các trạng thái port của STP ....................................................................................."],[181,"119 12.11 LAB: Kiểm tra spanning-tree ..................................................................................."],[182,"119 Chương XIII: IPV6 .................................................................................................................."],[183,"127 13.1 IP Address ................................................................................................................"],[184,"127 13.2 2 phiên bản của IP ...................................................................................................."],[185,"127 13.3 IPv6 là phiên bản được nâng cấp của IPv4 .............................................................."],[186,"127 13.4 IPV6 Types .............................................................................................................."],[187,"127 13.5 Kiến trúc địa chỉ IPv6 .............................................................................................."],[188,"127 13.6 Địa chỉ Unicast ........................................................................................................."],[189,"127 13.7 Địa chỉ local ............................................................................................................."],[190,"128 13.8 Địa chỉ default .........................................................................................................."],[191,"128 13.9 Địa chỉ Multicast ......................................................................................................"],[192,"128 13.10 Địa chỉ Any Cast ......................................................................................................"],[193,"128 13.11 Đặt địa chỉ IPv6 ........................................................................................................"],[194,"128 13.12 Stateless ...................................................................................................................."],[195,"128 13.13 IPV6 ROUTING ......................................................................................................"],[196,"130 13.14 Các loại định tuyến IPV6 ........................................................................................."],[197,"130 13.15 Định tuyến tĩnh ........................................................................................................."],[198,"131 Chương XIV : Giao thức định tuyến động trong IPV6 ........................................................"],[199,"134 14.1 IGP ..........................................................................................................................."],[200,"134 14.2 EGP .........................................................................................................................."],[201,"134"],[202,"7 Lưu hành nội bộ 14.3 RIPng ......................................................................................................................."],[203,"134 14.4 OSPFv3 ...................................................................................................................."],[204,"136 14.5 EIGRP FOR IPv6 ....................................................................................................."],[205,"138 Chương XV: Các công nghệ mạng WAN .............................................................................."],[206,"140 15.1 Các kiểu kết nối trong mạng WAN .........................................................................."],[207,"140 15.2 Các kiểu kết nối mới của mạng WAN ....................................................................."],[208,"141 15.3 Kênh riêng (Leased line) .........................................................................................."],[209,"141 15.4 Giao thức WAN ......................................................................................................."],[210,"141 15.5 Xác thực PPP (Point \u2013 to \u2013 Point Protocol) ............................................................."],[211,"143 15.6 Bài Lab : cấu hình PAP ............................................................................................"],[212,"144 15.7 Bài Lab : cấu hình CHAP ........................................................................................"],[213,"145 15.8 Các loại kết nối WAN bao gồm ..............................................................................."],[214,"146 15.9 Leased Line .............................................................................................................."],[215,"146 15.10 Kỹ thuật chuyển mạch kênh (Circuit Switching) ....................................................."],[216,"146 15.11 Kỹ thuật chuyển mạch gói (Packet Switching) ........................................................"],[217,"147 15.12 Các ưu điểm của chuyển mạch gói: ........................................................................."],[218,"148 15.13 Công nghệ Frame Relay ..........................................................................................."],[219,"149 15.14 Các thuộc tính Frame relay ......................................................................................"],[220,"150 15.15 Các loại mạng Frame Relay ....................................................................................."],[221,"150 15.16 Cấu hình Frame realy Point to Point ........................................................................"],[222,"151 15.17 Mô hình kết nối WAN hiện đại ................................................................................"],[223,"153 15.18 Metro Ethernet ........................................................................................................."],[224,"153 15.19 Lợi ích mô hình Metro Ethernet ..............................................................................."],[225,"154 15.20 Phạm vi, đối tượng sử dụng dịch vụ ........................................................................"],[226,"154 15.21 VPN .........................................................................................................................."],[227,"155 15.22 Các tình huống thông dụng của VPN ......................................................................."],[228,"156 Chương XVI: FTTH GPON ...................................................................................................."],[229,"157 16.1 Mạng quang bị động (PON) ....................................................................................."],[230,"157 16.2 Các chuẩn mạng quang bị động PON ......................................................................"],[231,"157 16.3 Ứng dụng công nghệ cho dịch vụ Internet cáp quang (FTTH) ................................"],[232,"158"],[233,"8 Lưu hành nội bộ Chương I : Mạng cơ bản 1.1 Mạng (Network)  Nhóm hai hay nhiều thiết bị kết nối với nhau cho phép chia sẻ thông tin và tài nguyên hệ thống"],[234,"1.2 Mạng nội bộ (Local Area Network \u2013 LAN)  Sự kết nối của các thiết bị mạng trong cùng một vị trí địa lý (văn phòng\\ tòa nhà )"],[235,""],[236,"9 Lưu hành nội bộ 1.3 Mạng diện rộng (Wide Area Network \u2013 WAN)  Sự kết nối của các thiết bị mạng từ hai hay nhiều vùng khác nhau"],[237," Nhiều mạng LAN kết nối đến nhau"],[238,"1.4 Mạng đô thị (Metro-politan Area Network \u2013 MAN)  Là mạng bao phủ trong phạm vi một đô thị/ thành phố"],[239,""],[240,"10 Lưu hành nội bộ 1.5 Mạng cá nhân (Personal Area Network - PAN)  Hai hay nhiều máy vi tính kết nối với nhau giới hạn từ 4 \u2013 6m"],[241,"1.6 Internet 1.7 Những kích thước hệ thống mạng"],[242,"11 Lưu hành nội bộ 1.8 Thiết bị chuyển mạch Cisco (Switch Cisco) 1.9 Thiết bị mạng không dây (Wireless Access Point) 1.10 Thiết bị định tuyến Cisco (Router Cisco) 1.11 Thiết bị tường lửa Cisco (Firewall Cisco)"],[243,"12 Lưu hành nội bộ 1.12 Điện thoại sử dụng địa chỉ IP/ thiết bị thoại (IP phone/ Voice Devices)"],[244,"13 Lưu hành nội bộ 1.13 Thiết bị mạng kết nối trong gia đình 1.14 Giới thiệu về Cisco  Luôn đi đầu trong lĩnh vực chế tạo các thiết bị mạng trên thế giới"],[245," Bao gồm các thiết bị : a"],[246,"Thiết bị định tuyến (Routers)"],[247,"b"],[248,"Thiết bị chuyển mạch (Switchs)"],[249,"c"],[250,"Thiết bị tường lửa (Firewalls)"],[251,"d"],[252,"Thiết bị thoại (Voice Devices)"],[253,"e"],[254,"Trung tâm lưu trữ dữ liệu (Datacenter)"],[255,"f"],[256,"Thiết bị mạng không dây (Wireless )"],[257,"1.15 Các cấp bậc chứng chỉ của Cisco"],[258,"14 Lưu hành nội bộ 1.16 Thi chứng chỉ CCNA Cisco  Thi trên máy tính"],[259," Được quản trị thông qua VUE www.vue.com  Chi phí thi : 295$"],[260," Thời gian thi : 90 phút"],[261," 50 \u2013 55 câu hỏi"],[262," Các dạng câu hỏi trong chứng chỉ CCNA : a"],[263,"Lựa chọn nhiều đáp án"],[264,"b"],[265,"Teslet (dạng tổng hợp 4 \u2013 5 câu hỏi sử dụng chung một mô hình)"],[266,"c"],[267,"Kéo và thả đáp án"],[268,"d"],[269,"Mô phỏng các bài lab"],[270,"e"],[271,"Simlets (giống với teslet nhưng khác là sẽ hiển thị các câu lệnh)"],[272," Điểm thi đỗ chứng chỉ : 825/1000"],[273,"1.17 Những nội dung mới trong CCNA 200-120  Hoạt động của dữ liệu mạng"],[274," Địa chỉ IPv4/IPv6"],[275," Công nghệ mạng chuyển mạch mạng LAN"],[276," Công nghệ định tuyến IP"],[277," Các thiết bị bảo mật trong hệ thống mạng"],[278," Khắc phục lỗi trong hệ thống mạng"],[279," Công nghệ mạng WAN"],[280," Thông tin chi tiết : http://bachkhoa-aptech.com/ hoặc www.cisco.com"],[281,"15 Lưu hành nội bộ 1.18 Những điều bạn đạt được  Lớp học theo tiêu chuẩn quốc tế"],[282," Những cuốn sách chi tiết về các bài lab thực hành"],[283," Video chi tiết về bài học"],[284," Các công cụ mô phỏng hệ thống"],[285,""],[286,"16 Lưu hành nội bộ Chương II: TCP/IP 2.1 Giao thức (protocol)  Tập hợp các quy tắc cho phép các thiết bị có thể giao tiếp, trao đổi thông tin với nhau"],[287," Các giao thức mạng phổ biến : a"],[288,"TCP/IP b"],[289,"IPx/SPx c"],[290,"Appletalk d"],[291,"Netbios e"],[292,"OSI 2.2 TCP/IP là gì  TCP/IP là giao thức cơ bản được sử dụng giữa các máy vi tính và các thiết bị mạng truyền thông với nhau"],[293,"2.3 Địa chỉ TCP/IP  Địa chỉ IP là địa chỉ Logical được cung cấp cho toàn bộ các thiết bị trong hệ thống mạng"],[294," Nằm trong tầng mạng - Networks (tầng 3 trong mô hình tham chiếu OSI)"],[295," 2 phiên bản IP là : a"],[296,"IPv4 b"],[297,"IPv6 2.4 Địa chỉ IPv4  Biểu diễn dưới dạng nhị phân (bit 0 và 1)"],[298," VD : Địa chỉ IP 192.168.1.2 ở dạng nhị phân (32 bit) là 11000000.10101000.0000001.00000010  32 bit được chia làm 4 octet: 11000000 \u2013 Octet thứ 1"],[299,"10101000 \u2013 Octet thứ 2"],[300,"00000001 \u2013 Octet thứ 3"],[301,"00000010 \u2013 Octet thứ 4"],[302,""],[303,"17 Lưu hành nội bộ  Địa chỉ IP ở dạng Thập phân : 85.5.191.1 2.5 Bảng chuyển đổi từ hệ Nhị Phân sang hệ Thập Phân 1 1 0 0 1 1 0 0 27 26 25 24 23 22 21 20 128 64 32 16 8 4 2 1 Giá trị thập phân khi quy đổi = 20 x 0 + 21 x 0 + 22 x 1 + 23 x 1 + 24 x 0 + 25 x 0 + 26 x 1 + 27 x 1 = 204 Vậy giá trị thập phân khi quy đổi từ dãy số hệ nhị phân 11001100 = 204 1 1 0 0 0 0 0 1 27 26 25 24 23 22 21 20 128 64 32 16 8 4 2 1 Giá trị thập phân khi quy đổi = 20 x 1 + 21 x 0 + 22 x 0 + 23 x 0 + 24 x 0 + 25 x 0 + 26 x 1 + 27 x 1 = 193 Vậy giá trị thập phân khi quy đổi từ dãy số hệ nhị phân 11000001 = 193 2.6 Bảng chuyển đổi từ hệ Thập Phân sang hệ Nhị Phân"],[304,"18 Lưu hành nội bộ 2.7 Gán một địa chỉ IP tĩnh cho máy vi tính"],[305,"19 Lưu hành nội bộ 2.8 Gán địa chỉ IPv4 động cho 1 Host DHCP (Dynamic Host Configuration Protocol): là dịch vụ \u201cđược dùng\u201d cho phép gán IPv4 một cách tự động cho các host trong hệ thống, giảm thiểu khối lượng công việc của các quản trị viên hoặc nhân viên hỗ trợ mạng và theo đó loại bỏ các lỗi kết nối không đáng có"],[306,""],[307,"20 Lưu hành nội bộ 2.9 Phạm vi khả dụng của IPv4  Lấy VD cho octet đầu tiên : 8 bit đầu tiên, giá trị có thể là 0 và 1 ở mỗi bit, vì vậy ta có 256 giao hoán"],[308,"2.10 Các lớp địa chỉ IP (IP Address Classification)  Địa chỉ IP được chia thành 5 lớp sau: Lớp A : 0 → 127 Lớp B : 128 → 191 Dải địa chỉ IP của các lớp địa chỉ mạng"],[309,"Lớp C : 192 → 223 Lớp D : 224 → 239 Sử dụng cho các dịch vụ, giao thức Multicasting"],[310,"Lớp E : 240 → 255 Sử dụng cho nghiên cứu và phát triển"],[311,"2.11 Phần Mạng và Host  Địa chỉ IP được chia làm 2 phần là Network ID và Host ID"],[312," Lớp A : N.H.H.H  Lớp B : N.N.H.H  Lớp C : N.N.N.H  H : Host ID \u2013 địa chỉ của một thiết bị cụ thể trong hệ thống mạng"],[313," N : Network ID \u2013 là địa chỉ cấp cho từng mạng riêng"],[314,"2.12 Mạng và địa chỉ Broadcast  Network ID: a"],[315,"Định danh cho một mạng"],[316,"b"],[317,"Các bit trong phần Host ID đều là bit 0"],[318," Địa chỉ Broadcast : a"],[319,"Là địa chỉ đại diện cho toàn bộ thiết bị trong một mạng"],[320,"b"],[321,"Là địa chỉ IP lớn nhất trong một dải mạng"],[322,"c"],[323,"Các bit trong phần Host ID đều là bit 1"],[324," IP khả dụng trong một mạng: a"],[325,"Là những IP có thể sử dụng để gán cho các Host"],[326,""],[327,"21 Lưu hành nội bộ  VD \u2013 địa chỉ lớp C: 192.168.1.0 \u2013 địa chỉ mạng"],[328,"192.168.1.1 → 192.168.1.254 \u2013 địa chỉ khả dụng (có thể sử dụng cho Host/client)"],[329,"192.168.1.255 \u2013 địa chỉ Broadcast"],[330," VD \u2013 địa chỉ lớp B: 172.16.0.0 \u2013 địa chỉ mạng"],[331,"172.16.0.1 → 172.16.255.254 \u2013 địa chỉ khả dụng (có thể sử dụng cho Host/Client)"],[332,"172.16.255.255 \u2013 địa chỉ Broadcast"],[333," VD \u2013 địa chỉ lớp A: 10.0.0.0 \u2013 địa chỉ mạng"],[334,"10.0.0.1 → 10.255.255.254 \u2013 địa chỉ khả dụng (có thể sử dụng cho Host/Client)"],[335,"10.255.255.255 \u2013 địa chỉ Broadcast"],[336,"2.13 Subnet \u2013 mask  Subnet \u2013 mask là để phân biệt giữa phần Network và phần Host"],[337," 1 là đại diện cho phần Network"],[338," 0 là đại diện cho phần Host"],[339," Class A N.H.H.H 255.0.0.0  Class B N.N.H.H 255.255.0.0  Class C N.N.N.H 255.255.255.0 2.14 Địa chỉ riêng (Reserved Address)  Class D và Class E"],[340," Gồm Network ID và Broadcast ID"],[341," 0.x.x.x - không hợp lệ"],[342," 127.x.x.x - dành cho địa chỉ Loopback"],[343,"2.15 127.x.x.x \u2013 địa chỉ Loopback  Địa chỉ Loopback là địa chỉ được sử dụng để kiểm tra giao thức TCP/IP trên chính thiết bị đó"],[344,""],[345,"22 Lưu hành nội bộ 2.16 Địa chỉ IP Private/ IP Public Private IP Public IP 1"],[346,"Được sử dụng trong mạng LAN hoặc trong một tổ chức riêng"],[347,"2"],[348,"Không được nhận diện Internet"],[349,"3"],[350,"Cấp phát tự do bởi người quản trị hệ thống"],[351,"4"],[352,"Là địa chỉ duy nhất trong một mạng hoặc một tổ chức"],[353,"5"],[354,"Miễn phí"],[355,"6"],[356,"Không được đăng kí chủ sở hữu"],[357,"1"],[358,"Được sử dụng là địa chỉ công cộng trong Internet"],[359,"2"],[360,"Được nhận diện trên Internet"],[361,"3"],[362,"Được cung cấp bởi nhà cung cấp dịch vụ (từ IANA), việc cấp phát tuân thủ các quy trình quy định nghiêm ngặt"],[363,"4"],[364,"Là địa chỉ duy nhất trên toàn cầu 5"],[365,"Phải trả chi phí cho nhà cung cấp dịch vụ ( hay IANA)"],[366,"6"],[367,"Được đăng ký chủ sở hữu"],[368,"2.17 Địa chỉ cá nhân (Private IP Address)  Là địa chỉ nhất định trong mỗi lớp địa chỉ IP được các tổ chức sử dụng để cấp phát cho các thiết bị trong mạng nội bộ"],[369," Lớp A : 10.0.0.0 đến 10.255.255.255  Lớp B : 172.16.0.0 đến 172.31.255.255  Lớp C : 192.168.0.0 đến 192.168.255.255"],[370,"23 Lưu hành nội bộ 2.18 Phân bổ địa chỉ IP Đăng ký Internet theo khu vực (Regional Internet Registries - RIRs) Đăng ký chính thức tại IANA.org : http://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xhtml 2.19 Mạng con (subnetting)  Là quá trình chia từ một mạng lớn đơn thành những mạng con"],[371," Mạng con giúp cho giảm thiểu sự lãng phí địa chỉ IP"],[372,"2.20 FLSM và VLSM  Mạng con có thể được thực hiện theo 2 phương hướng sau : a"],[373,"FLSM (Fixed Length Subnet Mask \u2013 mạng có chiều dài cố định )"],[374,"b"],[375,"VLSM (Variable Length Subnet Mask \u2013 mạng có chiều dài thay đổi)"],[376," Mạng con có thể được thực hiện dựa trên các yêu cầu sau : a"],[377,"Yêu cầu về số Host(số host): theo công thức 2h \u2013 2 ≥ số hot"],[378,"b"],[379,"Yêu cầu về Network (số net): theo công thức 2n ≥ số net"],[380,""],[381,"24 Lưu hành nội bộ Trong đó h = Host bit và n = Network Bit 2.21 Ví dụ về VLSM VD về chia địa chỉ IP : cho dải mạng sau 10.0.0.0/16 A : 200 host B : 80 host C : 15 host Ban đầu dải mạng được cấp : 10.0.0.0/16 Được xác định là 10.0.0.0 với 10.0 (16 bit ) là NetID và 0.0 (16bit ) là HostID mang đi chia cho 200 host có công thức : 2h \u2013 2 ≥ x (với h là số bit phần HostID \u2013 x là số lượng IP yêu cầu) vậy 2h \u2013 2 ≥ 200 < = > h = 8 vì 28 \u2013 2 = 254 > 200 host (yêu cầu ban đầu) Vậy HostID = 8 Mà HostID + NetID = 32 bit, => NetID = 24 bit Dải ban đầu được cung cấp là 10.0.0.0/16 là 16 bit NetID và 16 bit HostID Dải sau khi chia cho 200 host có 24 bit NetID và 8bit HostID vậy ở đây NetID sẽ mượn 8 bit từ HostID để làm NetID (tức là NetID sẽ mượn thêm 1 octet thứ 3 từ HostID làm NetID ) Dải ban đầu viết lại dưới dạng nhị phân là là : 10|00000000|00000000|00000000 (10.0.0.0/16) Dải sau khi chia cho A : 10|00000000|00000000|00000000 (10.0.0.0/24) 8 bit của NetID sẽ chạy từ 8 bit thấp nhất là 0 : 00000000 đến cao nhất là 8 bit 1 : 11111111 Như vậy là dải 10.0.00000000.00000000/24 sẽ chạy từ 10.0.0.0 \u2013 10.0.0.255 tức là có 254 địa chỉ (phù hợp cho việc sử dụng để cho 200 host) 10.0.00000001.00000000 /24 10.0.00000010.00000000 /24 \u2026\u2026"],[382,"10.0.11111111.00000000 Vậy để chia cho 200 host ta dùng dải địa chỉ 10.0.0.0/24 \u2013 10.0.1.0/24 Tiếp theo để chia cho 80 host ta sẽ sử dụng tiếp dải thứ 2, từ 10.0.1.0/24 để chia B: 80 host, sử dụng các phép tính tương tự ta có : 2h \u2013 2 ≥ 80 Vậy h = 7 vì 27 \u2013 2 = 126 > 80 Vậy NetID ở đây = 32 \u2013 HostID = 32 \u2013 7 =25 Dải sử dụng để chia là 10.0.1.0/24 có NetID = 24 Dải sử dụng cho 80 host có NetID = 25 ở đây NetID cũ và NetID khi mang đi chia chênh nhau 1 bit, như vậy là NetID đã mượn thêm 1 bit của Host ID để làm NetID 10.0.1.00000000/24 10.0.1.00000000/25 1 bit NetID mượn của HostID sẽ có 2 giá trị là 0 và 1, vậy ở đây ta có 10.0.1.00000000 tương đương với địa chỉ IP dưới dạng thập phân 10.0.1.0/25 10.0.1.10000000 10.0.1.128/25 Vậy dải địa chỉ mang đi cho 80 host là từ 10.0.1.0/25 \u2013 10.0.1.128/25"],[383,"25 Lưu hành nội bộ Tiếp tục mang đi chia cho 15 host Ta lấy tiếp từ 10.0.1.128/25 ra đi chia"],[384,"Vẫn áp dụng công thức 2h \u2013 2 ≥ 15 vậy h = 5 , và từ đây ta có NetID = 32 \u2013 5 = 27 Dải địa chỉ ban đầu mang đi chia là 10.0.1.128/25 có NetID là 25 Dải địa chỉ sau khi đã chia cho 15 host có NetID là 27"],[385,"Vậy ở đây NetID đã mượn thêm 2 bit từ HostID để làm NetID"],[386,"Viết lại dải địa chỉ IP dưới dạng số nhị phân : 10.0.1.10000000 /25 10.0.1.10000000 /27 Số Bit NetID mượn từ HotsID làm NetID là 2 bit, sẽ có 22 = 4 giá trị từ 00 \u2013 11 10.0.1.1000000/27 viết lại dải địa chỉ IP dưới dạng thập phân : 10.0.1.128/27"],[387,""],[388,""],[389,"10.0.1.1110000/27 viết lại dải địa chỉ IP dưới dạng thập phân : 10.0.1.224/27 Vậy dải địa chỉ mang đi cho 15 host là 10.0.1.128/27 \u2013 10.0.1.224/27 2.22 Một vài ví dụ về VLSM  Dưới đây bạn có thể tìm thấy một vài sơ đồ mẫu cơ bản"],[390,"26 Lưu hành nội bộ  Bài tập về VLSM  Lớp C (C \u2013 Class): a"],[391,"Yêu cầu : 100, 50, 20, 10 (Host)"],[392,"b"],[393,"Yêu cầu : 120, 40, 12, 4 (Host)"],[394," Lớp B (B \u2013 Class): a"],[395,"Yêu cầu : 4000, 1000, 500, 200 (Host)"],[396,"b"],[397,"Yêu cầu : 16000, 2000, 200, 120, 100 (Host)"],[398," Lớp A (A \u2013 Class): a"],[399,"Yêu cầu : 32000, 8000, 1000, 500, 200 (Host)"],[400,"b"],[401,"Yêu cầu : 4000, 200, 120, 60, 30, 12, 10 (Host)"],[402,""],[403,"27 Lưu hành nội bộ 2.23 Những câu hỏi về Mạng con (Subnet)  Tìm subnet \u2013 mask, phạm vi của IP ( Địa chỉ dải mạng \u2013 Network ID và địa chỉ Broadcast), Host khả dụng, mạng con (Subnet)"],[404,"a"],[405,"28.10.145.10/18 b"],[406,"150.12.110.10/25 c"],[407,"150.50.50.50/23 d"],[408,"100.10.185.10/20 e"],[409,"50.1.112.10/21 f"],[410,"112.10.78.40/22 g"],[411,"172.16.221.10/19 2.24 Các phương thức kết nối  Trong hệ thống mạng IPv4, các Host có thể kết nối với nhau bằng một trong những phương thức truyền tải sau : a"],[412,"Unicast"],[413,"b"],[414,"Broadcast"],[415,"c"],[416,"Multicast"],[417,"2.25 Unicast  Là phương thức gửi gói tin từ một Host này đến một Host khác trong hệ thống mạng"],[418,""],[419,"28 Lưu hành nội bộ 2.26 Broadcast  Là phương thức gửi gói tin từ một Host đến toàn bộ các Host còn lại trong hệ thống mạng"],[420,"2.27 Multicast  Là phương thức gửi gói tin từ một Host đến một nhóm các Host khác được chỉ định hoặc xác định trước, có thể là ở một hệ thống khác"],[421," Giảm tải hệ thống"],[422," Gửi theo địa chỉ gán riêng cho nhóm multicast : từ 224.0.0.0 đến 239.255.255.255"],[423,"29 Lưu hành nội bộ 2.28 Giới thiệu về thiết bị định tuyến (Router) và thiết bị chuyển mạch (Switch) 2.29 Các phương tiện truyền thông  Cáp quang"],[424," Cáp đồng (cáp xoắn đôi - UTP và cáp đồng trục)"],[425," Kết nối không dây"],[426,"2.30 Cáp xoắn đôi \u2013 UTP (Unshielded Twisted Pair )"],[427,"30 Lưu hành nội bộ 2.31 Cáp thẳng và cáp chéo"],[428,"31 Lưu hành nội bộ 2.32 Cáp đồng trục (Co-axial cable) 2.33 Cáp quang (Fiber cables)  Có thể truyền với khoảng cách dài hơn và truyền với băng thông lớn hơn"],[429,""],[430,"32 Lưu hành nội bộ 2.34 Mạng LAN không dây (Wireless LAN) 2.35 Thiết lập một mạng LAN cơ bản sử dụng Cisco Packet Tracer  Kết nối 4 máy vi tính trong mạng LAN sử dụng thiết bị chuyển mạch Switch"],[431," Cấu hình địa chỉ IP cho toàn bộ PC sử dụng dải địa chỉ 192.168.1.0/24  Kiểm tra kết nối giữa các thiết bị sử dụng câu lệnh Ping"],[432,""],[433,"33 Lưu hành nội bộ 2.36 Router (thiết bị định tuyến)  Là thiết bị được sử dụng để kết nối hai hay nhiều mạng khác nhau (thiết bị liên mạng)"],[434,"2.37 Các hãng sản xuất thiết bị định tuyến ( Router )  Nhiều công ty sản xuất thiết bị Router như : a"],[435,"Cisco"],[436,"b"],[437,"Nortel"],[438,"c"],[439,"Multicom"],[440,"d"],[441,"Cyclades"],[442,"e"],[443,"Juniper"],[444,"f"],[445,"Dlink"],[446,"g"],[447,"Linksys"],[448,"h"],[449,"3Com"],[450,"2.38 Phân biệt thiết bị Cisco và phạm vi sử dụng  Access Layer Router"],[451," Distribution Layer Router"],[452," Core Layer Router"],[453,""],[454,"34 Lưu hành nội bộ 2.39 Access Layer Router  Là thiết bị được sử dụng trong các tổ chức \u2013 doanh nghiệp nhỏ (SMB)"],[455," Router Series : 800, 1000, 1600, 1700, 1800, 2500"],[456,""],[457,"35 Lưu hành nội bộ 2.40 Distribution Layer Router  Là router được sử dụng trong các nhà cung cấp dịch vụ mạng (ISPs \u2013 Internet Service Providers ) và được biết đến là Router lớp ISP"],[458," Router Series : 2600, 3200, 3600, 3700, 3800"],[459,"2.41 Core Layer Router  Là router được sử dụng để kết nối giữa các nhà cung cấp dịch vụ mạng trên toàn cầu, và được biết đến với tên gọi là Backbone Routers (Router trục chính)"],[460," Các Router Series: 6400, 7200, 7300, 7400, 7500, 7600, 10000, 12000"],[461,""],[462,"36 Lưu hành nội bộ 2.42 Phân loại Router Thiết bị định tuyến thiết kế cố định \u2013 Fixed Router Thiết bị định tuyến thiết kế theo Modular - Modular Router a"],[463,"Tất cả các cổng kết nối đều đã được tích hợp sẵn trên Motherboard (không có cổng phụ hoặc slot hỗ trợ kết nối phụ)"],[464,"b"],[465,"Không có khả năng nâng cấp (thêm )các cổng giao tiếp"],[466,"c"],[467,"Router series 800, 2500"],[468,"a"],[469,"Có những slot phụ hỗ trợ mở rộng kết nối tùy theo nhu cầu phát triển của doanh nghiệp"],[470,"b"],[471,"Những router thuộc tầng Distribution và Core đều là các Modular Router"],[472,"c"],[473,"Router series 1600, 1700, 1800, 2600, 2800, 3600, 3700"],[474,"2.43 Các cổng kết nối ra bên ngoài của Router : LAN, WAN, Admin ports 2.44 Cổng LAN \u2013 cổng WAN Cổng LAN (LAN port) \u2013 RJ45 Cổng WAN (WAN port) a"],[475,"Ethernet : tốc độ 10 Mbps"],[476,"b"],[477,"Fast Ethernet : 100 Mbps"],[478,"c"],[479,"Gigabit Ethernet : 1000 Mbps"],[480,"a"],[481,"Cổng Serial"],[482,"b"],[483,"60 chân (pin) hoặc 26 chân cắm"],[484,""],[485,"37 Lưu hành nội bộ 2.45 Cổng Console (Console port)  Thường được sử dụng cho việc thiết lập cấu hình ban đầu của thiết bị, hoặc khôi phục mật khẩu"],[486," Là cổng RJ45"],[487,"2.46 Cổng kết nối phụ (Auxiliary Port  Sử dụng cho việc kết nối từ xa để quản trị"],[488," Là cổng kết nối RJ45"],[489," Sử dụng cable Console hoặc cable Rollover"],[490,""],[491,"38 Lưu hành nội bộ  Router Cisco 2500 2.47 AUI (Attachment Unit Interface)  AUI có cấu tạo là 15 chân (pin) ở phía đầu cái, đầu đực là cổng RJ45"],[492," Được biết đến với tên gọi là cổng Ethernet, cổng LAN, hay cổng Gateway mặc định"],[493," Được sử dụng để kết nối từ mạng LAN đến Router"],[494," Bộ thu phát (Transceiver) được sử dụng để chuyển đổi từ 8 dây điện kết nối thành 15 dây"],[495,"Chuyển đổi từ RJ45 đến 15 pin"],[496,""],[497,"39 Lưu hành nội bộ 2.48 Các cổng kết nối ra ngoài của router (tiếp)  Giao diện kết nối LAN \u2013 Ethernet a"],[498,"AUI (Attachment Unit Interfaces) (E0) \u2013 15 chân (pin)"],[499,"b"],[500,"10baseT \u2013 RJ45"],[501," Giao diện kết nối WAN a"],[502,"Serial Interface (S0, S1, s0/0, s0/1, s0/0/0 v\u2026v\u2026 ) \u2013 60 chân/26 chân (kết nối thông minh)"],[503,"b"],[504,"Mạng tích hợp đa dịch vụ (ISDN \u2013 Intergrated Service Digital Network) (BR10 v\u2026v\u2026) \u2013 RJ45 (sử dụng cho việc kết nối WAN)"],[505," Cổng quản trị : a"],[506,"Cổng Console \u2013 RJ45 \u2013 cho phép quản trị nội bộ"],[507,"b"],[508,"Cổng Auxiliary \u2013 RJ45 \u2013 cho phép quản trị từ xa"],[509,"2.49 Các thành phần của Router  Post : Power On Self Test \u2013 kiểm tra phần cứng thiết bị"],[510," ROM : khởi chạy thư viện chương trình và cho phép tìm kiếm hệ điều hành mạng IOS - Internetwork Operating System (Flash / TFTP / ROM)"],[511," Flash : nơi lưu trữ IOS của Router"],[512," NVRAM : nơi lưu trữ cố định những câu lệnh \u2013 những cấu hình triển khai cho Router"],[513," RAM : nơi lưu trữ tạm thời những câu lệnh \u2013 những cấu hình đang chạy cho Router"],[514,""],[515,"40 Lưu hành nội bộ  Thực hiện POST và nạp thư việc các chương trình : a"],[516,"POST là một quá trình xảy ra khi router bắt đầu khởi động"],[517,"POST được sử dụng để kiểm tra các thành phần phần cứng của Router"],[518,"b"],[519,"Sau quá trình POST, các thư viện chương trình nằm trong hệ điều hành Cisco (Cisco IOS) được nạp vào RAM"],[520," Nạp phần mềm hệ điều mạng (IOS): a"],[521,"Tùy theo giá trị của thanh ghi có thể thiết lập tùy chọn nạp hệ điều hành từ các phân vùng khác nhau: bộ nhớ Flash (Flash Memory) / TFTP server"],[522,"b"],[523,"Để thiết lập nạp hệ điều hành IOS từ flash các thanh ghi cần được thiết lập giá trị 0x2102"],[524," Thực hiện các tập tin lưu cấu hình khởi động hoặc vào phần chế độ thiết lập a"],[525,"Sau khi file hệ điều hành (IOS) được nạp xong, thư viện chương trình sẽ tìm các file lưu cấu hình khởi động trong NVRAM"],[526,"b"],[527,"File này chứa toàn bộ những lệnh cấu hình và thông số đã lưu trước đó, bao gồm các địa chỉ IP, thông tin định tuyến, mật khẩu, và một vài các thông số đã cấu hình"],[528,"c"],[529,"Nếu không có file cấu hình trong router, nó sẽ hướng dẫn người dùng đăng nhập vào chế độ thiết lập để bắt đầu tiến trình cấu hình"],[530,"d"],[531,"Nếu tìm thấy file Startup Configuration, router nạp thành công hệ điều hành và các file cấu hình"],[532,""],[533,"41 Lưu hành nội bộ Chương III : Những câu lệnh cơ bản (Basic Commands) 3.1 Kết nối Console  Kết nối Console: a"],[534,"Kết nối trực tiếp bằng cable Rollover đến cổng console của Router (cổng kết nối RJ45)"],[535,"b"],[536,"Khởi chạy phần mềm giả lập trên PC"],[537," Trên hệ điều hành Windows 7: a"],[538,"Download và cài đặt chương trình Secure CRT hoặc Putty theo đường link sau: https://www.vandyke.com/download/securecrt/download.html http://www.putty.org/"],[539,"42 Lưu hành nội bộ 1"],[540,"Khởi chạy Secure CRT , hoặc PuTTY: 2"],[541,"Thiết lập các thông số đăng nhập bao gồm: Protocol, Port, Baud rate"],[542,"43 Lưu hành nội bộ 3"],[543,"Màn hình đăng nhập thành công  Các phần mềm hỗ trợ truy cập thiết bị qua giao diện CLI: a"],[544,"Hyper Terminal (tích hợp sẵn trên Windows XP hoặc cài đặt trên các phiên bản Windows mới hơn)"],[545,"b"],[546,"PuTTY"],[547,"c"],[548,"Tera Term"],[549,"d"],[550,"Secure CRT"],[551,"e"],[552,"OS X Terminal"],[553,"3.2 Các chế độ (Mode) trên Router Cisco  Chế độ Setup : khi NVRAM trống (không lưu giữ file cấu hình)"],[554,"Cisco CISCO2911/K9 (revision 1.0) with 491520K/32768K bytes of memory"],[555,"Processor board ID FTX152400KS 3 Gigabit Ethernet interfaces DRAM configuration is 64 bits wide with parity disabled"],[556,"255K bytes of non-volatile configuration memory"],[557,"249856K bytes of ATA System CompactFlash 0 (Read/Write) --- System Configuration Dialog --- Continue with configuration dialog"],[558,"[yes/no]:"],[559,"44 Lưu hành nội bộ  Chế độ Người dùng (User Mode): chỉ cho phép thực hiện các câu lệnh cơ bản kiểm tra thông tin hệ thống Router>show flash (hiển thị thông tin của Router) System flash directory: File Length Name/status 3 33591768 c2900-universalk9-mz.SPA.151-4.M4.bin 2 28282 sigdef-category.xml 1 227537 sigdef-default.xml [33847587 bytes used, 221896413 available, 255744000 total] 249856K bytes of processor board System flash (Read/Write) Router>show ip interface brief (hiển thị các cổng kết nối trên Router) Interface IP-Address OK"],[560,"Method Status Protocol GigabitEthernet0/0 unassigned YES unset administratively down down GigabitEthernet0/1 unassigned YES unset administratively down down GigabitEthernet0/2 unassigned YES unset administratively down down Vlan1 unassigned YES unset administratively down down Router>ping 10.10.10.10 (kiểm tra kết nối của Router đến địa chỉ 10.10.10.10) Type escape sequence to abort"],[561,"Sending 5, 100-byte ICMP Echos to 10.10.10.10, timeout is 2 seconds: ...."],[562,"Success rate is 0 percent (0/5) Router>traceroute 10.10.10.10 (kiểm tra tuyến đường từ Router đến địa chỉ 10.10.10.10) Type escape sequence to abort"],[563,"Tracing the route to 10.10.10.10 1 * * * 2 * * * Router>show version (Hiển thị Version của Router) Cisco IOS Software, C2900 Software (C2900-UNIVERSALK9-M), Version 15.1(4)M4, RELEASE SOFTWARE (fc2) Technical Support: http://www.cisco.com/techsupport Copyright (c) 1986-2012 by Cisco Systems, Inc"],[564,"Compiled Thurs 5-Jan-12 15:41 by pt_team ROM: System Bootstrap, Version 15.1(4)M4, RELEASE SOFTWARE (fc1) cisco2911 uptime is 15 minutes, 38 seconds System returned to ROM by power-on System image file is \"flash0:c2900-universalk9-mz.SPA.151-1.M4.bin\" Last reload type: Normal Reload This product contains cryptographic features and is subject to United States and local country laws governing import, export, transfer and use"],[565,"Delivery of Cisco cryptographic products does not imply third-party authority to import, export, distribute or use encryption"],[566,"Importers, exporters, distributors and users are responsible for compliance with U.S"],[567,"and local country"],[568,"45 Lưu hành nội bộ laws"],[569,"By using this product you agree to comply with applicable laws and regulations"],[570,"If you are unable to comply with U.S"],[571,"and local laws, return this product immediately"],[572,"A summary of U.S"],[573,"laws governing Cisco cryptographic products may be found at: http://www.cisco.com/wwl/export/crypto/tool/stqrg.html If you require further assistance please contact us by sending email to export@cisco.com"],[574,"Cisco CISCO2911/K9 (revision 1.0) with 491520K/32768K bytes of memory"],[575,"Processor board ID FTX152400KS 3 Gigabit Ethernet interfaces DRAM configuration is 64 bits wide with parity disabled"],[576,"255K bytes of non-volatile configuration memory"],[577,"249856K bytes of ATA System CompactFlash 0 (Read/Write) License Info: License UDI: ------------------------------------------------- Device# PID SN ------------------------------------------------- *0 CISCO2911/K9 FTX15240767 Technology Package License Information for Module:'c2900' ---------------------------------------------------------------- Technology Technology-package Technology-package Current Type Next reboot ----------------------------------------------------------------- ipbase ipbasek9 Permanent ipbasek9 security None None None uc None None None data None None None Configuration register is 0x2102  Chế độ đặc quyền (Privilege Mode): a"],[578,"Cho phép thực hiện toàn bộ các câu lệnh để kiểm tra, cấu hình hệ thống Router> enable Router # show flash (hiển thị thông tin router) Router # show version (hiển thị phiên bản của router) Router # show ip interface brief (hiển thị thông tin các cổng kết nối trên Router) Router # ping 10.10.10.10 (kiểm tra kết nối từ router đến địa chỉ 10.10.10.10) Router # traceroute 10.10.10.10 (kiểm tra tuyến đường đi từ router đến địa chỉ 10.10.10.10 đi theo đường nào ) Router # show running-config (hiển thị các câu lệnh đã sử dụng trên Router) Router # show startup-config Router # Copy Router # Erase"],[579,"46 Lưu hành nội bộ  Chế độ cấu hình chung cho Router: Router # configure terminal Router (config) # Router (config) # Hostname Bachkhoa-Aptech Bachkhoa-Aptech (config) 3.3 Đặt password cho các kết nối  Kết nối Console"],[580," Kết nối Auxiliary"],[581," Kết nối VTY (telnet)"],[582,"Password cho kết nối qua cổng Console Bachkhoa-Aptech(config)#line console 0 Bachkhoa-Aptech(config-line)#password bachkhoa-aptech123456a@ Bachkhoa-Aptech(config-line)#login Bachkhoa-Aptech(config-line)#exit Password cho kết nối qua cổng Auxiliary Bachkhoa-Aptech(config)#line aux 0 Bachkhoa-Aptech(config-line)#password Bachkhoa-aptech1234567a@ Bachkhoa-Aptech(config-line)#login Bachkhoa-Aptech(config-line)#exit Password cho kết nối Telnet Bachkhoa-Aptech(config)#line vty 0 4 Bachkhoa-Aptech(config-line)#password Bachkhoa-aptech12345678a@ Bachkhoa-Aptech(config-line)#login Bachkhoa-Aptech(config-line)#exit 3.4 Cấu hình password cho Router  Để bảo mật cho Router, chúng ta đặt password đăng nhập"],[583,"Với mỗi lần đăng nhập Router sẽ hỏi đến Password"],[584,"Router > enable Password :"],[585,""],[586,""],[587,""],[588,""],[589,""],[590,""],[591,"Password được lưu dưới dạng văn bản rõ ràng Bachkhoa-Aptech(config)# enable password Bachkhoa-Aptech123456a@ Password được lưu dưới dạng văn bản mã hóa Bachkhoa-Aptech(config)# enable secret Bachkhoa-Aptech12345a@ Kiểm tra thông tin Bachkhoa-Aptech#show run enable secret 5 $1$3DaE$C0FuV/sfz/8b8j0A3i6Zz0 enable password Bachkhoa-Aptech123456a@"],[592,"47 Lưu hành nội bộ 3.5 Mã hóa mật khẩu  Chuyển đổi mật khẩu từ dạng văn bản ký tự bình thường thành dạng văn bản mã hóa"],[593,"Bachkhoa-Aptech(config)# service password-encryption Kiểm tra thông tin Bachkhoa-Aptech#show run"],[594,"enable secret 5 $1$3DaE$C0FuV/sfz/8b8j0A3i6Zz0 enable password 7 1327161103070C252A6909232127100F475152020C0E5274"],[595,"line con 0 exec-timeout 0 0 privilege level 15 password 7 06575D721F1A5C4F0437 logging synchronous login stopbits 1 line aux 0 exec-timeout 0 0 privilege level 15 password 7 014254570F5E5058794D6E logging synchronous login stopbits 1 line vty 0 4 password 7 15300A0F0C21232B297E14320702150B50040A0C06020F23 login"],[596,"3.6 Lưu cấu hình đã thực hiện cho Router Bachkhoa-Aptech(config)# copy running-config startup-config or Bachkhoa-Aptech(config)# write memory or Bachkhoa-Aptech(config)# write 3.7 Xóa cấu hình đã thiết lập trên Router Bachkhoa-Aptech# erase startup-config Bachkhoa-Aptech# reload"],[597,"48 Lưu hành nội bộ 3.8 Banner Bachkhoa-Aptech(config)# banner motd #He Thong Dao Tao CNTT Quoc Te Bachkhoa- Aptech# Kiểm tra thông tin Bachkhoa-Aptech#show run"],[598,"banner motd ^CHe Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech^C"],[599,"3.9 Kết nối điểm \u2013 điểm sử dụng cable Serial DTE (Data Terminal Equipment) DCE (Data Communication Equipment) - Thiết bị cuối xử lý dữ liệu"],[600,"- Đồng ý nhận xung nhịp"],[601,"- VD cho thiết bị DTE trong một đường truyền thuê riêng : Router"],[602,"- VD cho thiết bị DTE trong một mạng Dial Up: Computer"],[603,"- Thiết bị kết cuối kênh số liệu"],[604,"- Tạo ra các xung nhịp"],[605,"- VD cho thiết bị DCE trong một đường truyền thuê riêng : modem V.35 hoặc G.703 - VD cho thiết bị DCE trong một mạng Dial Up: Modem Dial Up"],[606,""],[607,"49 Lưu hành nội bộ 3.10 Những luật lưu ý khi thiết lập địa chỉ IP cho Router  Các interface kết nối giữa 02 router với nhau cùng chung 01 mạng"],[608," Các interface trên 01 router phải thuộc các vùng mạng khác nhau"],[609," Các router trong cùng 01 mạng không nên đặt trùng dải mạng của nhau"],[610,"3.11 Gán địa chỉ IP cho Router R1#configure terminal Enter configuration commands, one per line"],[611,"End with CNTL/Z"],[612,"R1(config)#interface s4/0 R1(config-if)#ip address 10.10.10.10 255.255.255.0 R1(config-if)# clock rate 64000 R1(config-if)#no shut R1(config-if)#exit R1(config)#end R1# R2#configure terminal Enter configuration commands, one per line"],[613,"End with CNTL/Z"],[614,"R2(config)#interface s4/0 R2(config-if)#ip address 10.10.10.20 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface s4/1 R2(config-if)#ip address 20.20.20.20 255.255.255.0 R1(config-if)# clock rate 64000 R2(config-if)#no shut R2(config-if)#exit R2(config)#end R2# R3#configure terminal Enter configuration commands, one per line"],[615,"End with CNTL/Z"],[616,"R3(config)#interface s4/0 R3(config-if)#ip address 20.20.20.30 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#end R3# Warning: Attempting to overwrite an NVRAM configuration previously written by a different version of the system image"],[617,"Overwrite the previous NVRAM configuration?[confirm]"],[618,"50 Lưu hành nội bộ 3.12 Lab : câu lệnh cơ bản trên Router + cấu hình gán địa chỉ IP trên Router (phân biệt cấu hình đặt địa chỉ IP khi sử dụng dây Serial và dây cáp mạng RJ45)  Cấu hình cơ bản và đặt địa chỉ IP cho Router R1#configure terminal Enter configuration commands, one per line"],[619,"End with CNTL/Z"],[620,"R1(config)#hostname Router1 Router1(config)#Banner motd \"He Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech\" Router1(config)#enable password Bachkhoa-Aptech Router1(config)#enable secret 123456a@ Router1(config)#line console 0 Router1(config-line)#password Bachkhoa-Aptech Router1(config-line)#login Router1(config-line)#exit Router1(config)# Router1(config)#line vty 0 4 Router1(config-line)#password Bachkhoa-Aptech Router1(config-line)#login Router1(config-line)#exit Router1(config)#line aux 0 Router1(config-line)#password Bachkhoa-Aptech Router1(config-line)#login Router1(config-line)#exit Router1(config)# Router1(config)#service password-encryption Router1(config)#interface serial 4/0 Router1(config-if)#ip address 10.10.10.10 255.255.255.0 Router1(config-if)#clock rate 64000 Router1(config-if)#no shut Router1(config-if)#exit R2#configure terminal Enter configuration commands, one per line"],[621,"End with CNTL/Z"],[622,"R2(config)#hostname Router2 Router2(config)#banner motd \"He Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech\" Router2(config)#enable password Bachkhoa-Aptech Router2(config)#enable secret 123456a@ Router2(config)#line console 0 Router2(config-line)#password 1234567a@"],[623,"51 Lưu hành nội bộ Router2(config-line)#login Router2(config-line)#exit Router2(config)# Router2(config)#line vty 0 4 Router2(config-line)#password 12345678a@ Router2(config-line)#login Router2(config-line)#exit Router2(config)# Router2(config)#line aux 0 Router2(config-line)#password 123456789a@ Router2(config-line)#login Router2(config-line)#exit Router2(config)# Router2(config)#service password-encryption Router2(config)#interface Serial 4/0 Router2(config-if)#ip address 10.10.10.20 255.255.255.0 Router2(config-if)#no shut Router2(config-if)#exit Router2(config)# Router2(config)#interface fastEthernet 0/0 Router2(config-if)#ip address 20.20.20.20 255.255.0.0 Router2(config-if)#no shut Router2(config-if)#exit Router2(config)#end Router2#wr Router2# R3#configure terminal Enter configuration commands, one per line"],[624,"End with CNTL/Z"],[625,"R3(config)#hostname Router3 Router3(config)#banner motd \"He Thong Dao Tao CNTT Quoc Te Bachkhoa-Aptech\" Router3(config)#enable password 123456a@ Router3(config)#enable secret 1234567a@ Router3(config)#line console 0 Router3(config-line)#password 12345678a@ Router3(config-line)#login Router3(config-line)#exit Router3(config)# Router3(config)#line vty 0 4 Router3(config-line)#password 123456789a@ Router3(config-line)#login Router3(config-line)#exit Router3(config)# Router3(config)#line aux 0 Router3(config-line)#password 1234567890a@ Router3(config-line)#login Router3(config-line)#exit Router3(config)# Router3(config)#service password-encryption"],[626,"52 Lưu hành nội bộ Router3(config)#interface fastEthernet 0/0 Router3(config-if)#ip address 20.20.20.30 255.255.0.0 Router3(config-if)#no shut Router3(config-if)# Router3(config-if)#exit Router3(config)# Router3(config)#end Router3# Router3#wr  Hiển thị thông tin bảng định tuyến và các địa chỉ đã đặt cho cổng mạng trên Router \u2013 kiểm tra và sửa lỗi nếu có : Router1#show ip route 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, Serial4/0 Router1#show ip interface brief Interface IP-Address OK"],[627,"Method Status Protocol FastEthernet0/0 unassigned YES unset administratively down down FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down Serial4/0 10.10.10.10 YES manual up up Serial4/1 unassigned YES unset administratively down down Serial4/2 unassigned YES unset administratively down down Serial4/3 unassigned YES unset administratively down down Virtual-Access1 unassigned YES unset up up Router2#show ip route 20.0.0.0/16 is subnetted, 1 subnets C 20.20.0.0 is directly connected, FastEthernet0/0 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, Serial4/0 Router2#show ip interface brief Interface IP-Address OK"],[628,"Method Status Protocol FastEthernet0/0 20.20.20.20 YES manual up up FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down Serial4/0 10.10.10.20 YES manual up up Serial4/1 unassigned YES unset administratively down down Serial4/2 unassigned YES unset administratively down down Serial4/3 unassigned YES unset administratively down down Virtual-Access1 unassigned YES unset up up Router3#show ip route 20.0.0.0/16 is subnetted, 1 subnets"],[629,"53 Lưu hành nội bộ C 20.20.0.0 is directly connected, FastEthernet0/0 Router3#show ip interface brief Interface IP-Address OK"],[630,"Method Status Protocol FastEthernet0/0 20.20.20.30 YES manual up up FastEthernet1/0 unassigned YES unset administratively down down FastEthernet2/0 unassigned YES unset administratively down down FastEthernet3/0 unassigned YES unset administratively down down Serial4/0 unassigned YES unset administratively down down Serial4/1 unassigned YES unset administratively down down Serial4/2 unassigned YES unset administratively down down Serial4/3 unassigned YES unset administratively down down Virtual-Access1 unassigned YES unset up up 3.13 Cable kết nối RJ45  RJ45 là một chuẩn được quy định cho các loại cáp kết nối trong một hệ thống mạng"],[631,"Kết nối RJ45 thường được thấy nhiều nhất ở cáp Ethernet và trong hệ thống mạng"],[632," Cáp RJ45 có điểm đặc trưng gồm 8 chân kết nối cho phép truyền tải các tín hiệu"],[633,"Chuẩn RJ45 xác định vị trí cần thiết của các dây khi được kết nối"],[634," Có một vài chuẩn kết nối khác mà bạn có thể nhầm lẫn với chuẩn RJ45"],[635,"Ví dụ tiêu biểu là RJ11 (được sử dụng để kết nối đến các điện thoại analog): Có hình dạng giống với chuẩn RJ45 nhưng kích thước nhỏ hơn & sử dụng 4 chân (pin) kết nối"],[636,""],[637,"54 Lưu hành nội bộ Chương IV: Định tuyến (Routing) Định tuyến động (Dynamic), định tuyến tĩnh (Static), định tuyến (Default)"],[638,"4.1 Định tuyến  Là quá trình tìm kiếm và xác định đường đi tốt nhất tới một mạng đích"],[639,"4.2 Các phương pháp định tuyến  Phương pháp định tuyến động (Dynamic Routing)"],[640," Phương pháp định tuyến tĩnh (Static Routing)"],[641," Phương pháp Default Route"],[642,"4.3 Định tuyến tĩnh (Static Routing)  Là phương pháp người quản trị phải cấu hình thủ công"],[643," Bắt buộc phải khai báo điểm đến trong mạng"],[644," Bảo mật"],[645," Sử dụng phù hợp cho các hệ thống mạng có quy mô nhỏ"],[646," Administrative Distance là bằng 0 hoặc 1"],[647," Nhược điểm : a"],[648,"Chỉ phù hợp cho hệ thống mạng quy mô nhỏ"],[649,"b"],[650,"Toàn bộ những cấu hình cho hệ thống mạng đều là cấu hình thủ công"],[651,"c"],[652,"Khi hệ thống có sự thay đổi (có thêm tuyến đường mới hoặc một tuyến đường bị hỏng \u2013 ngắt) thì người quản trị sẽ phải thay đổi thông tin định tuyến trên tất cả router một cách thủ công"],[653,""],[654,"55 Lưu hành nội bộ 4.4 Cấu hình định tuyến tĩnh Cấu hình cơ bản R1#configure terminal Enter configuration commands, one per line"],[655,"End with CNTL/Z"],[656,"R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.10.10 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#end R1# R2#configure terminal Enter configuration commands, one per line"],[657,"End with CNTL/Z"],[658,"R2(config)#interface fastEthernet 0/0 R2(config-if)#ip address 10.10.10.20 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface fastEthernet 1/0 R2(config-if)#ip address 20.20.20.20 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#end R2# R3#configure terminal Enter configuration commands, one per line"],[659,"End with CNTL/Z"],[660,"R3(config)#interface fastEthernet 0/0 R3(config-if)#ip address 20.20.20.30 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#end R3# Kiểm tra thông tin bảng định tuyến trước khi cấu hình định tuyến tĩnh R1#show ip route 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R2#show ip route 20.0.0.0/24 is subnetted, 1 subnets C 20.20.20.0 is directly connected, FastEthernet1/0 10.0.0.0/24 is subnetted, 1 subnets"],[661,"56 Lưu hành nội bộ C 10.10.10.0 is directly connected, FastEthernet0/0 R3#show ip route 20.0.0.0/24 is subnetted, 1 subnets C 20.20.20.0 is directly connected, FastEthernet0/0 Định tuyến tĩnh trên các Router - Cấu trúc lệnh : Router(config)# ip route [mạng đích] [subnet mask] [exit interface | next hop] R1#configure terminal Enter configuration commands, one per line"],[662,"End with CNTL/Z"],[663,"R1(config)#ip route 20.20.20.0 255.255.255.0 10.10.10.20 R1(config)#end R3#configure terminal Enter configuration commands, one per line"],[664,"End with CNTL/Z"],[665,"R3(config)#ip route 10.10.10.0 255.255.255.0 20.20.20.20 R3(config)#end  Sau khi cấu hình định tuyến tĩnh, kiểm tra thông tin bảng định tuyến bằng câu lệnh : [Show ip route] và xem thông tin"],[666,"Kiểm tra thông tin bảng định tuyến sau khi đã cấu hình định tuyến tĩnh R1#show ip route 20.0.0.0/24 is subnetted, 1 subnets S 20.20.20.0 [1/0] via 10.10.10.20 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R3#show ip route 20.0.0.0/24 is subnetted, 1 subnets C 20.20.20.0 is directly connected, FastEthernet0/0 10.0.0.0/24 is subnetted, 1 subnets S 10.10.10.0 [1/0] via 20.20.20.20 4.5 Default Route  Default Route sử dụng trong trường hợp không biết được đích đến của gói tin, thường được sử dụng trong hệ thống Internet khi mà không biết đích đến"],[667," Được sử dụng tại các vị trí cuối trong hệ thống mạng"],[668," Là tuyến đường được ưu tiên cuối cùng trong việc định tuyến"],[669," Default routes có thể giúp cho việc làm giảm khối lượng thông tin mà bảng định tuyến cần phải có"],[670,""],[671,"57 Lưu hành nội bộ 4.6 Triển khai phương pháp Default Route Cấu hình cơ bản R1#configure terminal Enter configuration commands, one per line"],[672,"End with CNTL/Z"],[673,"R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.10.2 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#interface loopback 0 R1(config-if)#ip address 1.1.1.1 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)# R1(config)#interface loopback 1 R1(config-if)#ip address 3.3.3.3 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)# R1(config)#interface loopback 2 R1(config-if)#ip address 5.5.5.5 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#end R2#configure terminal Enter configuration commands, one per line"],[674,"End with CNTL/Z"],[675,"R2(config)#interface fastEthernet 0/0 R2(config-if)#ip address 10.10.10.20 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#interface loopback 0 R2(config-if)#ip address 2.2.2.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface loopback 1 R2(config-if)#ip address 4.4.4.4 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface loopback 2"],[676,"58 Lưu hành nội bộ R2(config-if)#ip address 6.6.6.6 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#end R2# Với phương pháp định tuyến tĩnh (thông tin đích đến được khai báo rõ ràng) R1(config)#ip route 2.2.2.0 255.255.255.0 10.10.10.20 R1(config)#ip route 4.4.4.0 255.255.255.0 10.10.10.20 R1(config)#ip route 6.6.6.0 255.255.255.0 10.10.10.20 R2(config)#ip route 1.1.1.0 255.255.255.0 10.10.10.10 R2(config)#ip route 3.3.3.0 255.255.255.0 10.10.10.10 R2(config)#ip route 5.5.5.0 255.255.255.0 10.10.10.10 Thông tin bảng định tuyến sau khi triển khai cấu hình định tuyến tĩnh R1#show ip route 1.0.0.0/24 is subnetted, 1 subnets C 1.1.1.0 is directly connected, Loopback0 2.0.0.0/24 is subnetted, 1 subnets S 2.2.2.0 [1/0] via 10.10.10.20 3.0.0.0/24 is subnetted, 1 subnets C 3.3.3.0 is directly connected, Loopback1 4.0.0.0/24 is subnetted, 1 subnets S 4.4.4.0 [1/0] via 10.10.10.20 5.0.0.0/24 is subnetted, 1 subnets C 5.5.5.0 is directly connected, Loopback2 6.0.0.0/24 is subnetted, 1 subnets S 6.6.6.0 [1/0] via 10.10.10.20 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R2#show ip route 1.0.0.0/24 is subnetted, 1 subnets S 1.1.1.0 [1/0] via 10.10.10.10 2.0.0.0/24 is subnetted, 1 subnets C 2.2.2.0 is directly connected, Loopback0 3.0.0.0/24 is subnetted, 1 subnets S 3.3.3.0 [1/0] via 10.10.10.10 4.0.0.0/24 is subnetted, 1 subnets C 4.4.4.0 is directly connected, Loopback1 5.0.0.0/24 is subnetted, 1 subnets S 5.5.5.0 [1/0] via 10.10.10.10 6.0.0.0/24 is subnetted, 1 subnets C 6.6.6.0 is directly connected, Loopback2 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0"],[677,"59 Lưu hành nội bộ Với phương pháp định tuyến mặc định (Default route) R1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 R2(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.10 Có thể hiểu đơn giản 2 câu lệnh này như sau : - Trên router 2 chúng ta có 3 đường loopback có địa chỉ là 2.2.2.2, 4.4.4.4 và 6.6.6.6"],[678,"Nếu theo phương pháp định tuyến tĩnh thông thường, muốn đi đến đường nào thì ta phải định tuyến tĩnh đến đường đó, tức là trỏ cho router biết là đích đến như thế nào"],[679,"Mục tiêu của Router 1 đi đến các đường loopback của Router 2 thì Router 1 phải trỏ static đến từng đường trên Router 2"],[680,"Nhưng nếu dùng phương pháp định tuyến mặc định thì ở đây thông tin đích đến là 0.0.0.0 0.0.0.0 tức là nó có thể bỏ qua thông tin đích đến, mà khi có gói tin đến Router 1, nó sẽ tự động đẩy toàn bộ gói tin đi đến cổng 10.10.10.20, là cổng mà Router 2 kết nối với nó"],[681,"Như vậy thì Router 2 sẽ nhận các gói tin Router 1 chuyển sang, và trong Router 2 đã có thông tin đích đến là những đường loopback"],[682,"Quá trình chuyển gói tin thành công - Triển khai tương tự trên Router 2, đẩy gói tin về router 1 thông qua cổng 10.10.10.10 Thông tin bảng định tuyến sau khi triển khai cấu hình định tuyến tĩnh mặc định R1#show ip route 1.0.0.0/24 is subnetted, 1 subnets C 1.1.1.0 is directly connected, Loopback0 3.0.0.0/24 is subnetted, 1 subnets C 3.3.3.0 is directly connected, Loopback1 5.0.0.0/24 is subnetted, 1 subnets C 5.5.5.0 is directly connected, Loopback2 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 S* 0.0.0.0/0 [1/0] via 10.10.10.20 R2#show ip route 2.0.0.0/24 is subnetted, 1 subnets C 2.2.2.0 is directly connected, Loopback0 4.0.0.0/24 is subnetted, 1 subnets C 4.4.4.0 is directly connected, Loopback1 6.0.0.0/24 is subnetted, 1 subnets C 6.6.6.0 is directly connected, Loopback2 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 S* 0.0.0.0/0 [1/0] via 10.10.10.10"],[683,"60 Lưu hành nội bộ Chương V: Định tuyến động (Dynamic Routing) 5.1 Định tuyến động (Dynamic Routing)  Ưu điểm của định tuyến động (Dynamic Routing) so với định tuyến tĩnh (Static Routing) : 1"],[684,"Hoạt động nhờ vào quá trình truyền nhận các thông tin định tuyến được quảng bá từ các Router"],[685,"2"],[686,"Các Router hàng xóm (Router kết nối trực tiếp) trao đổi và xây dựng thông tin bảng định tuyến một cách tự động"],[687,"3"],[688,"Tự động cập nhật thông tin bảng định tuyến khi có sự thay đổi trong mô hình hệ thống mạng"],[689,"4"],[690,"Giảm công việc quản trị"],[691,"5"],[692,"Phù hợp với các hệ thống mạng lớn"],[693,"5.2 Các giao thức định tuyến động  Distance-Vector Protocol"],[694," Link-State Protocol"],[695," Hybrid Protocol"],[696,"Distance-Vector Protocol Link-State Protocol Hybrid Protocol - Hoạt động dựa trên thuật toán Bellman Ford"],[697,"- Cập nhật theo một chu kỳ"],[698,"- Tự động trao đổi toàn bộ thông tin bảng định tuyến - Giao thức Classfull: RIPv1,IGRP"],[699,"- Giao thức Classless: RIPv2, EIGRP"],[700,"- Cập nhật thông qua bản tin Broadcast"],[701,"- Sử dụng ít tài nguyên hệ thống"],[702,"- Dễ dàng cấu hình"],[703,"- Hoạt động dựa trên thuật toán Dijktra"],[704,"- Cập nhật không theo định kỳ, thông qua trạng thái hoạt động của đường link kết nối"],[705,"- Cập nhật các thông tin còn thiếu nếu bảng định tuyến không có"],[706,"- Giao thức Classless: OSPF, IS-IS"],[707,"- Cập nhật thông qua bản tin Multicast"],[708,"- Sử dụng một phần tài nguyên hệ thống"],[709,"- Cấu hình hệ thống khó, cần có kiến thức sâu rộng"],[710,"- Hoạt động dựa trên thuật toán DUAL"],[711,"- Cập nhật không theo định kỳ"],[712,"- Cập nhật các thông tin còn thiếu trong bảng định tuyến"],[713,"- Là giao thức Classless"],[714,"- Cập nhật thông qua bản tin Multicast"],[715,"- VD: EIGRP"],[716,"- Sử dụng ít tài nguyên hệ thống"],[717,"- Dễ dàng cấu hình"],[718,"5.3 Giao thức Classfull  Giao thức định tuyến Classfull : khi cập nhật thông tin định tuyến thì các giao thức định tuyến Classfull sẽ không quảng bá Subnet mask đi kèm trong thông tin định tuyến"],[719,""],[720,"61 Lưu hành nội bộ  Cũng có nghĩa là toàn bộ tất cả các thiết bị trong hệ thống đều sử dụng chung một subnet mask như nhau"],[721," VD : RIPv1, IGRP"],[722,"5.4 Giao thức Classless  Giao thức Classless : khi cập nhật thông tin định tuyến thì các giao thức định tuyến Classfull sẽ quảng bá Subnet mask đi kèm trong thông tin định tuyến"],[723," Hỗ trợ VLSM"],[724," VD : RIPv2, EIGRP, OSPF, IS-IS"],[725,"5.5 RIP (Routing Information Protocol)  Là giao thức tiêu chuẩn mở rộng"],[726," Thuộc giao thức Distance \u2013 Vector"],[727," Cập nhật thông qua bản tin broadcast : 255.255.255.255  Metric : hop count, ≤ 15"],[728," Hỗ trợ cân bằng tải tối đa trên 4 đường có metric bằng nhau"],[729," Sử dụng cho mô hình mạng nhỏ"],[730," Trao đổi thông tin định tuyến định kỳ 30 giây"],[731," Administrative Distance = 120"],[732,"5.6 Rip Timers  Update timer (thời gian để gửi bản tin update thông tin) : 30s, là thời gian cho phép các router gửi bản tin update sang router hàng xóm để cập nhật thông tin"],[733," Invalid timer (thời gian không hợp lệ) : 180s , là thời gian cho phép router chờ đợi bản tin update"],[734,"Thông tin update nếu không được phản hồi trong thời gian này, toàn bộ các tuyến đường update sẽ không được xác định và loại bỏ"],[735," Flush timer : 240s, là thời gian mà trước khi các tuyến đường không hợp lệ sẽ bị xóa bỏ khỏi thông tin bảng định tuyến"],[736," Hold Down timer: 180s, là khoảng thời gian được tính từ khi router nhận được thông tin một route là unreachable"],[737,"Trong khoảng thời gian này, router vẫn tiếp tục dùng route để forward gói tin và bỏ qua tất cả các thông tin cập nhật về route đó với metric bằng hoặc lớn hơn metric router đang có"],[738,"5.7 So sánh Ripv1 và Ripv2 Ripv1 Ripv2 - Giao thức Classfull"],[739,"- Không có cơ chế xác thực"],[740,"- Sử dụng bản tin broadcast để cập nhật : 255.255.255.255 - Giao thức Classless"],[741,"- Hỗ trợ cơ chế xác thực"],[742,"- Sử dụng địa chỉ multicast : 224.0.0.9"],[743,"62 Lưu hành nội bộ 5.8 Ưu điểm của giao thức RIP  Dễ dàng triển khai"],[744," Không hạn chế khả năng thiết kế (không giống như OSPF)"],[745," Sử dụng ít tài nguyên hệ thống"],[746,"5.9 Nhược điểm của giao thức RIP  Tiêu tốn lớn băng thông trong quá trình gửi bản tin Broadcast mỗi 30s/ 1 lần"],[747," Hoạt động dựa trên giá trị hop count"],[748," Không có khả năng mở rộng vì giá trị cao nhất của Hop count = 15"],[749," Hội tụ mạng chậm"],[750,"5.10 Bài Lab : cấu hình giao thức định tuyến Ripv1 Cấu hình cơ bản trên các Router R1#configure terminal Enter configuration commands, one per line"],[751,"End with CNTL/Z"],[752,"R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.10.2 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#end R1# R2#configure terminal Enter configuration commands, one per line"],[753,"End with CNTL/Z"],[754,"R2(config)#interface fastEthernet 2/0 R2(config-if)#ip address 10.10.10.3 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface fastEthernet 1/0 R2(config-if)#ip address 172.16.1.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#end R2# R3#configure terminal Enter configuration commands, one per line"],[755,"End with CNTL/Z"],[756,"R3(config)#interface fastEthernet 0/0 R3(config-if)#ip address 172.16.1.3 255.255.255.0 R3(config-if)#no shut"],[757,"63 Lưu hành nội bộ R3(config-if)#exit R3(config)#interface fastEthernet 1/0 R3(config-if)#ip address 192.168.1.2 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#end R3#wr R4#configure terminal Enter configuration commands, one per line"],[758,"End with CNTL/Z"],[759,"R4(config)#interface fastEthernet 0/0 R4(config-if)#ip address 192.168.1.3 255.255.255.0 R4(config-if)#no shut R4(config-if)#exit R4(config)#end R4# R4#wr Cấu hình giao thức RIPv1 Câu lệnh tổng quát : Router(config)# router rip (khởi chạy giao thức Rip trên Router) Router(config-if)# network [dải địa chỉ Router kết nối trực tiếp] (khai báo dải địa chỉ của Router mang đi quảng bá và để các router khác cập nhật thông tin vào bảng định tuyến) R1(config)#router rip R1(config-router)#network 10.10.10.0 R1(config-router)#end R2(config)#router rip R2(config-router)#network 10.10.10.0 R2(config-router)#network 172.16.1.0 R2(config-router)#end R3(config)#router rip R3(config-router)#network 172.16.1.0 R3(config-router)#network 192.168.1.0 R3(config-router)#end R4(config)#router rip R4(config-router)#network 192.168.1.0 R4(config-router)#end Kiểm tra thông tin bảng định tuyến R1#show ip route R 172.16.0.0/16 [120/1] via 10.10.10.3, 00:00:13, FastEthernet0/0 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R 192.168.1.0/24 [120/2] via 10.10.10.3, 00:00:13, FastEthernet0/0 R2#show ip route 172.16.0.0/24 is subnetted, 1 subnets C 172.16.1.0 is directly connected, FastEthernet1/0"],[760,"64 Lưu hành nội bộ 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet2/0 R 192.168.1.0/24 [120/1] via 172.16.1.3, 00:00:09, FastEthernet1/0 R3#show ip route 172.16.0.0/24 is subnetted, 1 subnets C 172.16.1.0 is directly connected, FastEthernet0/0 R 10.0.0.0/8 [120/1] via 172.16.1.2, 00:00:08, FastEthernet0/0 C 192.168.1.0/24 is directly connected, FastEthernet1/0 R4#show ip route R 172.16.0.0/16 [120/1] via 192.168.1.2, 00:00:08, FastEthernet0/0 R 10.0.0.0/8 [120/2] via 192.168.1.2, 00:00:08, FastEthernet0/0 C 192.168.1.0/24 is directly connected, FastEthernet0/0 Nhận xét : thông tin bảng định tuyến trong này có phần không chính xác so với mô hình hiện tại đang triển khai"],[761,"Chúng ta có thể thấy mô hình hiện tại đang triển khai bao gồm 3 dải địa chỉ IP là : 10.10.10.0/24, 172.16.1.0/24, 192.168.1.0/24"],[762,"Nhưng thông tin được cập nhật trong các bảng định tuyến, tuyến đường 10.10.10.0/24 trở thành 10.0.0.0/8, tuyến đường 172.16.1.0/24 trở thành 172.16.0.0/16"],[763,"Đơn giản là vì chúng ta đang triển khai giao thức RipV1, mà Ripv1 lại là giao thức Classfull (không gửi kèm subnet mask trong bảng định tuyến)"],[764,"Vậy nên các Router hàng xóm khi được nhận thông tin update nó sẽ tự gán subnet mask cho tuyến đường nó cập nhật theo Class IP"],[765,"5.11 Cấu hình RIPv2 Cấu hình cơ bản trên các Router R1#configure terminal Enter configuration commands, one per line"],[766,"End with CNTL/Z"],[767,"R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.10.2 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#end R1# R2#configure terminal Enter configuration commands, one per line"],[768,"End with CNTL/Z"],[769,"R2(config)#interface fastEthernet 2/0 R2(config-if)#ip address 10.10.10.3 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#"],[770,"65 Lưu hành nội bộ R2(config)#interface fastEthernet 1/0 R2(config-if)#ip address 172.16.1.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#end R2# R3#configure terminal Enter configuration commands, one per line"],[771,"End with CNTL/Z"],[772,"R3(config)#interface fastEthernet 0/0 R3(config-if)#ip address 172.16.1.3 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#interface fastEthernet 1/0 R3(config-if)#ip address 192.168.1.2 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#end R4#configure terminal Enter configuration commands, one per line"],[773,"End with CNTL/Z"],[774,"R4(config)#interface fastEthernet 0/0 R4(config-if)#ip address 192.168.1.3 255.255.255.0 R4(config-if)#no shut R4(config-if)#exit R4(config)#end R4# Cấu hình giao thức Ripv2 Câu lệnh tổng quát : Router(config)# router rip (khởi chạy giao thức Rip trên Router) Router(config-router)# version 2 (khai báo version 2 của giao thức Rip, với giao thức Ripv1, không cần khai báo version) Router(config-router)# network [dải địa chỉ Router kết nối trực tiếp] (khai báo dải địa chỉ của Router mang đi quảng bá và để các router khác cập nhật thông tin vào bảng định tuyến) Router (config-router) no auto-summary (tắt chế độ gộp các dải địa chỉ khi gửi thông tin bảng định tuyến update) R1(config)#router rip R1(config-router)#version 2 R1(config-router)#network 10.10.10.0 R1(config-router)#no auto-summary R1(config-router)#end R1# R2(config)#router rip R2(config-if)#version 2 R2(config-router)#network 10.10.10.0 R2(config-router)#network 172.16.1.0 R2(config-router)#no auto-summary R2(config-router)#end"],[775,"66 Lưu hành nội bộ R3(config)#router rip R3(config-if)#version 2 R3(config-router)#network 172.16.1.0 R3(config-router)#network 192.168.1.0 R3(config-router)#no auto-summary R3(config-router)#end R4(config)#router rip R4(config-if)#version 2 R4(config-router)#network 192.168.1.0 R4(config-router)#no auto-summary R4(config-router)#end Kiểm tra thông tin bảng định tuyến và thông tin giao thức đã triển khai R1#show ip route 172.16.0.0/24 is subnetted, 1 subnets R 172.16.1.0 [120/1] via 10.10.10.3, 00:00:12, FastEthernet0/0 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R 192.168.1.0/24 [120/2] via 10.10.10.3, 00:00:10, FastEthernet0/0 R1#show ip protocol Routing Protocol is \"rip\" Sending updates every 30 seconds, next due in 17 seconds Invalid after 180 seconds, hold down 180, flushed after 240 Outgoing update filter list for all interfaces is not set Incoming update filter list for all interfaces is not set Redistributing: rip Default version control: send version 2, receive version 2 Interface Send Recv Triggered RIP Key-chain FastEthernet0/0 2 2 Automatic network summarization is not in effect Maximum path: 4 Routing for Networks: 10.0.0.0 Routing Information Sources: Gateway Distance Last Update 10.10.10.3 120 00:00:23 Distance: (default is 120) R2#show ip route 172.16.0.0/24 is subnetted, 1 subnets C 172.16.1.0 is directly connected, FastEthernet1/0 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet2/0 R 192.168.1.0/24 [120/1] via 172.16.1.3, 00:00:08, FastEthernet1/0 R2#show ip protocol Routing Protocol is \"rip\""],[776,"67 Lưu hành nội bộ Sending updates every 30 seconds, next due in 2 seconds Invalid after 180 seconds, hold down 180, flushed after 240 Outgoing update filter list for all interfaces is not set Incoming update filter list for all interfaces is not set Redistributing: rip Default version control: send version 2, receive version 2 Interface Send Recv Triggered RIP Key-chain FastEthernet1/0 2 2 FastEthernet2/0 2 2 Automatic network summarization is not in effect Maximum path: 4 Routing for Networks: 10.0.0.0 172.16.0.0 Routing Information Sources: Gateway Distance Last Update 172.16.1.3 120 00:00:24 Distance: (default is 120) R3#show ip route 172.16.0.0/24 is subnetted, 1 subnets C 172.16.1.0 is directly connected, FastEthernet0/0 10.0.0.0/24 is subnetted, 1 subnets R 10.10.10.0 [120/1] via 172.16.1.2, 00:00:01, FastEthernet0/0 C 192.168.1.0/24 is directly connected, FastEthernet1/0 R3#show ip protocol Routing Protocol is \"rip\" Sending updates every 30 seconds, next due in 18 seconds Invalid after 180 seconds, hold down 180, flushed after 240 Outgoing update filter list for all interfaces is not set Incoming update filter list for all interfaces is not set Redistributing: rip Default version control: send version 2, receive version 2 Interface Send Recv Triggered RIP Key-chain FastEthernet0/0 2 2 FastEthernet1/0 2 2 Automatic network summarization is not in effect Maximum path: 4 Routing for Networks: 172.16.0.0 192.168.1.0 Routing Information Sources: Gateway Distance Last Update 172.16.1.2 120 00:00:11 Distance: (default is 120) R4#show ip route 172.16.0.0/24 is subnetted, 1 subnets R 172.16.1.0 [120/1] via 192.168.1.2, 00:00:17, FastEthernet0/0"],[777,"68 Lưu hành nội bộ 10.0.0.0/24 is subnetted, 1 subnets R 10.10.10.0 [120/2] via 192.168.1.2, 00:00:17, FastEthernet0/0 C 192.168.1.0/24 is directly connected, FastEthernet0/0 R4#show ip protocol Routing Protocol is \"rip\" Sending updates every 30 seconds, next due in 21 seconds Invalid after 180 seconds, hold down 180, flushed after 240 Outgoing update filter list for all interfaces is not set Incoming update filter list for all interfaces is not set Redistributing: rip Default version control: send version 2, receive version 2 Interface Send Recv Triggered RIP Key-chain FastEthernet0/0 2 2 Automatic network summarization is not in effect Maximum path: 4 Routing for Networks: 192.168.1.0 Routing Information Sources: Gateway Distance Last Update 192.168.1.2 120 00:00:21 Distance: (default is 120) 5.12 Administrative Distance  Là chỉ số tin cậy của thông tin định tuyến khi các Router trao đổi với nhau"],[778," Giá trị của AD từ 0 đến 255"],[779," Giá trị càng nhỏ thì độ tin cậy càng lớn"],[780," Một vài giá trị AD mặc định"],[781,"1"],[782,"Đường kết nối trực tiếp (Directly Connected) = 0"],[783,"2"],[784,"Định tuyến tĩnh (Static Route) = 1"],[785,"3"],[786,"Giao thức IGRP = 100"],[787,"4"],[788,"Giao thức EIGRP = 90"],[789,"5"],[790,"Giao thức OSPF = 110"],[791,"6"],[792,"Giao thức Rip = 120"],[793,"5.13 Autonomous System - AS  Là tập hợp các router dưới quyền quản trị của 1 tổ chức, doanh nghiệp và có chung một chính sách định tuyến"],[794," Mỗi AS được định danh bằng một giá trị, gọi là Autonomous System Number (ASN)"],[795," ASN có giá trị từ 1 \u2013 65535 1"],[796,"Public AS : 1 \u2013 64512"],[797,"2"],[798,"Private AS : 64513 \u2013 65535"],[799,""],[800,"69 Lưu hành nội bộ 5.14 Phân loại giao thức định tuyến động IGP EGP - Interior Gateway Protocol"],[801,"- Được sử dụng trong một miền tự trị (AS)"],[802,"- Các giao thức : RIP, IGRP, EIGRP, OSPF, IS \u2013 IS"],[803,"- Exterior Gateway Protocol"],[804,"- Được sử dụng giữa các miền tự trị khác nhau"],[805,"- Giao thức : BGP (Border Gateway Protocol)"],[806,"5.15 Giao thức EIGRP (Enhanced Interior Gateway Routing Protocol)  Là giao thức nâng cao của Distance Vector"],[807," Là giao thức tiêu chuẩn chỉ sử dụng cho các thiết bị của Cisco"],[808," Thuộc giao thức Classless"],[809," Bao gồm tất cả các tính năng của IGRP"],[810," Hop count tối đa là 255 (bản tin có thể đi qua tối đa 255 Router )"],[811," Administrative Distance = 90"],[812," Khả năng thiết kế hệ thống mạng linh hoạt"],[813," Phương thức truyền dữ liệu là multicast và unicast, thay thế cho broadcast"],[814," Dễ dàng cấu hình cho hệ thống mạng LAN và WAN"],[815," Cập nhật thông tin qua địa chỉ Multicast 224.0.0.10"],[816,"70 Lưu hành nội bộ  Bản tin Hello gửi định kỳ 5 giây / 1 lần"],[817," Khả năng hội tụ nhanh"],[818," Hỗ trợ cho các giao thức IP (Internet Protocol), IPX (Internetwork Packet eXchange), Apple Talk"],[819," Sử dụng thuật toán DUAL (Diffusion Update ALgorithm) để tính toán đường đi tốt nhất"],[820," Hỗ trợ loadbalancing cho cả 2 cơ chế equal cost và unequal cost"],[821,"5.16 Bảng thông tin EIGRP :  Bảng thông tin láng giềng (Neighbor Table) : 1"],[822,"Liệt kê các Router kết nối trực tiếp"],[823,"2"],[824,"Câu lệnh kiểm tra : show ip eigrp neighbor"],[825," Bảng mô hình liên kết: 1"],[826,"Bao gồm danh sách các đường định tuyến tốt nhất học đường từ router khác"],[827,"2"],[828,"Câu lệnh kiểm tra : show ip eigrp topology  Bảng thông tin định tuyến: 1"],[829,"Chứa đường đi tốt nhất đến đích"],[830,"2"],[831,"Câu lệnh kiểm tra : show ip route 5.17 Chỉ số Metric của EIGRP  Metric của EIGRP bao gồm 5 chỉ số : 1"],[832,"Bandwidth (BW) \u2013 băng thông"],[833,"2"],[834,"Delay \u2013 độ trễ"],[835,"3"],[836,"Load \u2013 khả năng truyền tải"],[837,"4"],[838,"Max Tranfers Unit (MTU) \u2013 đơn vị lớn nhất gói tin có thể truyền đi là 1500 byte"],[839,"5"],[840,"Reliability \u2013 độ tin cậy"],[841," Mặc định sẽ sử dụng giá trị của Bandwidth và Delay để tính chỉ số Metric"],[842," Công thức tính chỉ số Metric khi giá trị K là mặc định : (K1 = 1, K2 = 0, K3 = 1, K4 = 0 và K5 = 0)"],[843,"Metric = 1 ∗ ∗ 3 ∗"],[844,"71 Lưu hành nội bộ 5.18 Bài lab : cấu hình giao thức EIGRP Câu lệnh giao thức EIGRP Router(config)# router EIGRP [AS number] (khởi chạy giao thức EIGRP có AS number"],[845,""],[846,""],[847,""],[848,") Router(config-router)# network [dải địa chỉ kết nối trực tiếp trong giao thức EIGRP] [wildcard mask] (khai báo dải địa chỉ trong EIGPR ) Chú thích: Wildcard Mask \u2013 là một dải 32 bit nhị phân và được dùng để chỉ ra phần HostID của một mạng"],[849,"Cách tìm Wildcard Mask : Quy đổi Subnet mask sang giá trị nhị phân"],[850,"VD: Subnet Mask = 255.255.0.0"],[851,"Ta quy đổi Subnet Mask từ giá trị Thập Phân về giá trị Nhị Phân"],[852,"11111111.11111111.00000000.00000000 Vì Subnet Mask và Wildcard Mask đối nghịch nhau, nên những bit nào ở Subnet Mask = 0 thì Wildcard Mask = 1 và ngược lại Vậy Wildcard Mask = 00000000.00000000.11111111.11111111 và kế tiếp chúng ta quy đổi về từ giá trị Nhị Phân thành giá trị Thập Phân = 0.0.255.255 Cấu hình cơ bản R1#configure terminal Enter configuration commands, one per line"],[853,"End with CNTL/Z"],[854,"R1(config)#interface loopback 1 R1(config-if)#ip address 8.8.8.8 255.0.0.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#interface loopback 2 R1(config-if)#ip address 9.9.9.9 255.255.0.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.10.2 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R2#configure terminal Enter configuration commands, one per line"],[855,"End with CNTL/Z"],[856,"R2(config)#interface fastEthernet 1/0 R2(config-if)#ip address 10.10.10.3 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#interface fastEthernet 0/0 R2(config-if)#ip address 20.20.20.2 255.255.255.0"],[857,"72 Lưu hành nội bộ R2(config-if)#no shut R2(config-if)#exit R3#configure terminal Enter configuration commands, one per line"],[858,"End with CNTL/Z"],[859,"R3(config)#interface loopback 1 R3(config-if)#ip address 18.18.18.18 255.0.0.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#interface loopback 2 R3(config-if)#ip address 19.19.19.19 255.255.0.0 R3(config-if)#no shut R3(config-if)#exit R3(config)#interface fastEthernet 1/0 R3(config-if)#ip address 20.20.20.3 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit Cấu hình giao thức EIGRP R1(config)#router eigrp 123 R1(config-router)#network 8.8.8.0 0.255.255.255 R1(config-router)#network 9.9.9.0 0.0.255.255 R1(config-router)#network 10.10.10.0 0.0.0.255 R1(config-router)#no auto-summary R1(config-router)#end R2(config)#router eigrp 123 R2(config-router)#network 10.10.10.0 0.0.0.255 R2(config-router)#no auto-summary R2(config-router)#exit R2(config)#router eigrp 456 R2(config-router)#network 20.20.20.0 0.0.0.255 R2(config-router)#no auto-summary R2(config-router)#end R3(config)#router eigrp 456 R3(config-router)#network 18.18.18.0 0.255.255.255 R3(config-router)#network 19.19.19.0 0.0.255.255 R3(config-router)#network 20.20.20.0 0.0.0.255 R3(config-router)#no auto-summary R3(config-router)#end Kiểm tra sau khi đã cấu hình R1#show ip eigrp neighbors IP-EIGRP neighbors for process 123 H Address Interface Hold Uptime SRTT RTO Q Seq Type (sec) (ms) Cnt Num 0 10.10.10.3 Fa0/0 12 00:02:47 656 3936 0 4 R1#show ip route"],[860,"73 Lưu hành nội bộ C 8.0.0.0/8 is directly connected, Loopback1 9.0.0.0/16 is subnetted, 1 subnets C 9.9.0.0 is directly connected, Loopback2 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R1#show ip eigrp topology IP-EIGRP Topology Table for AS(123)/ID(9.9.9.9) P 9.9.0.0/16, 1 successors, FD is 128256 via Connected, Loopback2 P 8.0.0.0/8, 1 successors, FD is 128256 via Connected, Loopback1 P 10.10.10.0/24, 1 successors, FD is 28160 via Connected, FastEthernet0/0 R2#show ip eigrp neighbors IP-EIGRP neighbors for process 123 H Address Interface Hold Uptime SRTT RTO Q Seq Type (sec) (ms) Cnt Num 0 10.10.10.2 Fa1/0 10 00:04:54 36 216 0 2 IP-EIGRP neighbors for process 456 H Address Interface Hold Uptime SRTT RTO Q Seq Type (sec) (ms) Cnt Num 0 20.20.20.3 Fa0/0 14 00:03:26 507 3042 0 2 R2#show ip route 19.0.0.0/16 is subnetted, 1 subnets D 19.19.0.0 [90/156160] via 20.20.20.3, 00:03:50, FastEthernet0/0 D 18.0.0.0/8 [90/156160] via 20.20.20.3, 00:03:50, FastEthernet0/0 20.0.0.0/24 is subnetted, 1 subnets C 20.20.20.0 is directly connected, FastEthernet0/0 D 8.0.0.0/8 [90/156160] via 10.10.10.2, 00:05:14, FastEthernet1/0 9.0.0.0/16 is subnetted, 1 subnets D 9.9.0.0 [90/156160] via 10.10.10.2, 00:05:14, FastEthernet1/0 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet1/0 R2#show ip eigrp topology IP-EIGRP Topology Table for AS(123)/ID(20.20.20.2) P 9.9.0.0/16, 1 successors, FD is 156160 via 10.10.10.2 (156160/128256), FastEthernet1/0 P 8.0.0.0/8, 1 successors, FD is 156160 via 10.10.10.2 (156160/128256), FastEthernet1/0 P 10.10.10.0/24, 1 successors, FD is 28160 via Connected, FastEthernet1/0 IP-EIGRP Topology Table for AS(456)/ID(20.20.20.2) P 19.19.0.0/16, 1 successors, FD is 156160 via 20.20.20.3 (156160/128256), FastEthernet0/0"],[861,"74 Lưu hành nội bộ P 18.0.0.0/8, 1 successors, FD is 156160 via 20.20.20.3 (156160/128256), FastEthernet0/0 P 20.20.20.0/24, 1 successors, FD is 28160 via Connected, FastEthernet0/0 R3#show ip eigrp neighbors IP-EIGRP neighbors for process 456 H Address Interface Hold Uptime SRTT RTO Q Seq Type (sec) (ms) Cnt Num 0 20.20.20.2 Fa1/0 10 00:07:15 1 4500 0 4 R3#show ip route 19.0.0.0/16 is subnetted, 1 subnets C 19.19.0.0 is directly connected, Loopback2 C 18.0.0.0/8 is directly connected, Loopback1 20.0.0.0/24 is subnetted, 1 subnets C 20.20.20.0 is directly connected, FastEthernet1/0 R3#show ip eigrp topology IP-EIGRP Topology Table for AS(456)/ID(19.19.19.19) P 19.19.0.0/16, 1 successors, FD is 128256 via Connected, Loopback2 P 18.0.0.0/8, 1 successors, FD is 128256 via Connected, Loopback1 P 20.20.20.0/24, 1 successors, FD is 28160 via Connected, FastEthernet1/0 Nhận xét : thông qua bảng định tuyến và topology chúng ta có thể thấy \u2013 các router triển khai EIGRP trong cùng một AS trao đổi thông tin với nhau, nhưng khác AS thì không thể trao đổi thông tin"],[862,"Cấu hình cho phép các Router thuộc các vùng AS khác nhau trong EIGRP giao tiếp và trao đổi thông tin R2(config)#router eigrp 123 R2(config-router)#redistribute eigrp 456 R2(config-router)#exit R2(config)#router eigrp 456 R2(config-router)#redistribute eigrp 123 R2(config-router)#end Kiểm tra lại thông tin sau khi đã cho phép kết nối EIGRP các vùng AS khác nhau R1#show ip route 19.0.0.0/16 is subnetted, 1 subnets D EX 19.19.0.0 [170/158720] via 10.10.10.3, 00:00:15, FastEthernet0/0 D EX 18.0.0.0/8 [170/158720] via 10.10.10.3, 00:00:15, FastEthernet0/0 20.0.0.0/24 is subnetted, 1 subnets D EX 20.20.20.0 [170/30720] via 10.10.10.3, 00:00:15, FastEthernet0/0 C 8.0.0.0/8 is directly connected, Loopback1 9.0.0.0/16 is subnetted, 1 subnets"],[863,"75 Lưu hành nội bộ C 9.9.0.0 is directly connected, Loopback2 10.0.0.0/24 is subnetted, 1 subnets C 10.10.10.0 is directly connected, FastEthernet0/0 R1#show ip eigrp neighbors IP-EIGRP neighbors for process 123 H Address Interface Hold Uptime SRTT RTO Q Seq Type (sec) (ms) Cnt Num 0 10.10.10.3 Fa0/0 11 00:13:32 530 3180 0 5 R1#show ip eigrp topology IP-EIGRP Topology Table for AS(123)/ID(9.9.9.9) P 19.19.0.0/16, 1 successors, FD is 158720 via 10.10.10.3 (158720/156160), FastEthernet0/0 P 9.9.0.0/16, 1 successors, FD is 128256 via Connected, Loopback2 P 8.0.0.0/8, 1 successors, FD is 128256 via Connected, Loopback1 P 10.10.10.0/24, 1 successors, FD is 28160 via Connected, FastEthernet0/0 P 18.0.0.0/8, 1 successors, FD is 158720 via 10.10.10.3 (158720/156160), FastEthernet0/0 P 20.20.20.0/24, 1 successors, FD is 30720 via 10.10.10.3 (30720/28160), FastEthernet0/0 R1#ping 18.18.18.18 Type escape sequence to abort"],[864,"Sending 5, 100-byte ICMP Echos to 18.18.18.18, timeout is 2 seconds: !!!!"],[865,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms R1#ping 19.19.19.19 Type escape sequence to abort"],[866,"Sending 5, 100-byte ICMP Echos to 19.19.19.19, timeout is 2 seconds: !!!!"],[867,"Success rate is 100 percent (5/5), round-trip min/avg/max = 36/36/36 ms R3#show ip route 19.0.0.0/16 is subnetted, 1 subnets C 19.19.0.0 is directly connected, Loopback2 C 18.0.0.0/8 is directly connected, Loopback1 20.0.0.0/24 is subnetted, 1 subnets C 20.20.20.0 is directly connected, FastEthernet1/0 D EX 8.0.0.0/8 [170/158720] via 20.20.20.2, 00:01:10, FastEthernet1/0 9.0.0.0/16 is subnetted, 1 subnets D EX 9.9.0.0 [170/158720] via 20.20.20.2, 00:01:10, FastEthernet1/0 10.0.0.0/24 is subnetted, 1 subnets D EX 10.10.10.0 [170/30720] via 20.20.20.2, 00:01:10, FastEthernet1/0"],[868,"76 Lưu hành nội bộ R3#show ip eigrp neighbors IP-EIGRP neighbors for process 456 H Address Interface Hold Uptime SRTT RTO Q Seq Type (sec) (ms) Cnt Num 0 20.20.20.2 Fa1/0 12 00:13:14 48 288 0 5 R3#show ip eigrp topology IP-EIGRP Topology Table for AS(456)/ID(19.19.19.19) P 9.9.0.0/16, 1 successors, FD is 158720 via 20.20.20.2 (158720/156160), FastEthernet1/0 P 19.19.0.0/16, 1 successors, FD is 128256 via Connected, Loopback2 P 8.0.0.0/8, 1 successors, FD is 158720 via 20.20.20.2 (158720/156160), FastEthernet1/0 P 10.10.10.0/24, 1 successors, FD is 30720 via 20.20.20.2 (30720/28160), FastEthernet1/0 P 18.0.0.0/8, 1 successors, FD is 128256 via Connected, Loopback1 P 20.20.20.0/24, 1 successors, FD is 28160 via Connected, FastEthernet1/0 R3#ping 8.8.8.8 Type escape sequence to abort"],[869,"Sending 5, 100-byte ICMP Echos to 8.8.8.8, timeout is 2 seconds: !!!!"],[870,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms R3#ping 9.9.9.9 Type escape sequence to abort"],[871,"Sending 5, 100-byte ICMP Echos to 9.9.9.9, timeout is 2 seconds: !!!!"],[872,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/39/56 ms 5.19 OSPF \u2013 Open Shortest Path First  OSPF được phát triển bởi Internet Engineerong Task Force (IETF) như một sự thay thế những nhược điểm và hạn chế của RIP"],[873," Là một giao thức chuẩn mở"],[874," Là một giao thức trạng thái đường link (Link state protocol)"],[875," Là giao thức định tuyến classless"],[876," Sử dụng thuật toán \u201cDijkstra\u201d Shortes Path First (SPF) để xây dựng bảng định tuyến"],[877," Không giới hạn số lượng hop \u2013 count trong mạng"],[878," Metric là Cost (cost = 108/Bandwidth)"],[879," Administrative Distance = 110"],[880," OSPF hỗ trợ VLSM và CIDR"],[881,""],[882,"77 Lưu hành nội bộ  Chỉ hỗ trợ Equal cost Loadbalacing"],[883," OSPF được chia thành các vùng (Area) để dễ dàng cho việc quản lý và kiểm soát lưu lượng"],[884," Sử dụng địa chỉ Multicast 224.0.0.5 và 224.0.0.6  Thời gian hộ tụ nhanh"],[885," Các gói tin Hello được gửi mỗi 10s (Hello Intervals), Dead Intervals = 40s"],[886,"5.20 Thiết lập truyền thông hai chiều trong OSPF"],[887,"78 Lưu hành nội bộ 5.21 Khám phá thông tin các dải địa chỉ trong mạng 5.22 Router-ID  Là giá trị định danh cho một router khi tham gia vào miền OSPF"],[888," Nếu các interface loopback được cấu hình trên router, thì địa chỉ IP cao nhất trong các IP này sẽ được sử dụng làm Router \u2013 ID"],[889," Nếu các interfacce loopback không được cấu hình, thì địa chỉ IP cao nhất của các interface vật lý đang active sẽ được sử dụng làm router \u2013 ID"],[890," Người ta sử dụng địa chỉ loopback vì những lý do sau: 1"],[891,"Loopback interface ổn định hơn các interface vật lý"],[892,"2"],[893,"Inteface loopback chỉ fail chỉ khi toàn bộ router fail"],[894,"5.23 Thêm một Entries trạng thái đường Link"],[895,"79 Lưu hành nội bộ 5.24 OSPF tables  Neighbor Tables : a"],[896,"Được biết như là cơ sở dữ liệu liền kề (adjacency database)"],[897,"b"],[898,"Lưu danh sách các router láng giềng (neighbor)"],[899,"c"],[900,"# show ip ospf neighbor"],[901," Database Table a"],[902,"Thường được gọi là LSDB (Link state database)"],[903,"b"],[904,"Lưu thông tin của tất cả tuyến đường khả thi tới các mạng trong area"],[905,"c"],[906,"# show ip ospf database  Routing Table a"],[907,"Lưu danh sách các đường đi tốt nhất tới các mạng đích"],[908,"b"],[909,"Show ip route"],[910,"5.25 Các vùng OSPF (OSPF Areas)  Bao gồm tất cả các router có cùng thông tin, dữ liệu"],[911," Có bất cứ thay đổi nào cũng sẽ tác động đến toàn bộ các router"],[912," Vùng (Area) được coi như là một nhóm nội vùng của Router"],[913,"5.26 Những vấn đề có thể xảy ra trong quá trình duy trì mạng lưới OSPF"],[914,"80 Lưu hành nội bộ 5.27 Giải pháp : phân cấp định tuyến trong OSPF  Làm giảm , tối ưu hóa thông tin"],[915," Hạn chế những sự thay đổi phát sinh trong vùng (không làm tràn thông tin ra bên ngoài vùng)"],[916," Các Router cùng được triển khai trong một vùng góp phần tính toán trong thuật toán"],[917,"5.28 Các vùng trong OSPF (OSPF Areas)  Vùng \u2013 là một nhóm các routers (Vùng hay khu vực cần thống nhất)"],[918," OSPF cung cấp cơ chế cho phép thiết kế mạng phân cấp với nhiều vùng khác nhau"],[919," Tất cả các Router giữ chung các thông tin giống nhau sẽ ở trong cùng một vùng"],[920," Bất cứ sự thay đổi nào trong một vùng sẽ tác động lên các Router trong vùng đó"],[921," Luật : a"],[922,"Phải có 1 area gọi là area 0 (gọi là Area chính - Backbone)"],[923,"b"],[924,"Tất cả các Area khác đều phải kết nối đến Area 0"],[925,"c"],[926,"Phải có ít nhất 1 Router làm Router biên (kết nối giữa các vùng)"],[927,"d"],[928,"Các Interfaces của một Router phải trong cùng một Area"],[929,""],[930,"81 Lưu hành nội bộ 5.29 Ưu điểm của giao thức OSPF  Tiêu chuẩn mở : có thể triển khai trên nhiều loại router của các hãng khác nhau"],[931," Không giới hạn số router triển khai"],[932," Không gây ra hiện tượng bị loop mạng"],[933," Hội tụ nhanh hơn"],[934,"5.30 Nhược điểm của giao thức OSPF  Tiêu thụ một lượng lớn tài nguyên CPU"],[935," Thiết kế khá phức tạp"],[936," Chỉ hỗ trợ cân bằng tải cho các đường có cost bằng nhau"],[937," Hỗ trợ cho giao thức IP, không hỗ trợ cho IXP và AppleTalk"],[938,"5.31 Bài Lab : OSPF đơn vùng (1 area ) Cấu hình cơ bản R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.12.1 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit"],[939,"82 Lưu hành nội bộ R2(config)#interface fastEthernet 1/0 R2(config-if)#ip address 10.10.12.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface fastEthernet 0/0 R2(config-if)#ip address 10.10.23.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R3(config)#interface fastEthernet 1/0 R3(config-if)#ip address 10.10.23.3 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)# Câu lệnh tổng quát của giao thức OSPF R1(config)#router ospf 1 (khởi chạy giao thức OSPF trên Router và gán cho 1 process-id như là một tên gọi) R1(config-router)#network [dải địa chỉ kết nối trực tiếp trong giao thức OSPF] [Widecard Mask của dải địa chỉ đó] [area đang triển khai] R1(config-router)#end Triển khai giao thức OSPF area 0 trên các Router R1(config)#router ospf 1 R1(config-router)#network 10.10.12.0 0.0.0.255 area 0 R1(config-router)#end R2(config)#router ospf 1 R2(config-router)#network 10.10.12.0 0.0.0.255 area 0 R2(config-router)#network 10.10.23.0 0.0.0.255 area 0 R2(config-router)#end R3(config)#router ospf 1 R3(config-router)#network 10.10.23.0 0.0.0.255 area 0 R3(config-router)#end Kiểm tra giao thức OSPF R1#show ip ospf neighbor Neighbor ID Pri State Dead Time Address Interface 10.10.23.2 1 FULL/DR 00:00:39 10.10.12.2 FastEthernet0/0 R1#show ip route 10.0.0.0/24 is subnetted, 2 subnets C 10.10.12.0 is directly connected, FastEthernet0/0 O 10.10.23.0 [110/2] via 10.10.12.2, 00:04:06, FastEthernet0/0 R1#show ip ospf interface"],[940,"83 Lưu hành nội bộ FastEthernet0/0 is up, line protocol is up Internet Address 10.10.12.1/24, Area 0 Process ID 1, Router ID 10.10.12.1, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State BDR, Priority 1 Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:06 Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.23.2 (Designated Router) Suppress hello for 0 neighbor(s) R1#ping 10.10.23.3 Type escape sequence to abort"],[941,"Sending 5, 100-byte ICMP Echos to 10.10.23.3, timeout is 2 seconds: !!!!"],[942,"Success rate is 100 percent (5/5), round-trip min/avg/max = 64/68/84 ms R2#show ip ospf neighbor Neighbor ID Pri State Dead Time Address Interface 10.10.23.3 1 FULL/DR 00:00:35 10.10.23.3 FastEthernet0/0 10.10.12.1 1 FULL/BDR 00:00:35 10.10.12.1 FastEthernet1/0 R2#show ip ospf interface FastEthernet0/0 is up, line protocol is up Internet Address 10.10.23.2/24, Area 0 Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State BDR, Priority 1 Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:05 Index 2/2, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.23.3 (Designated Router) Suppress hello for 0 neighbor(s) FastEthernet1/0 is up, line protocol is up Internet Address 10.10.12.2/24, Area 0 Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1"],[943,"84 Lưu hành nội bộ Transmit Delay is 1 sec, State DR, Priority 1 Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:04 Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.12.1 (Backup Designated Router) Suppress hello for 0 neighbor(s) R2#show ip route 10.0.0.0/24 is subnetted, 2 subnets C 10.10.12.0 is directly connected, FastEthernet1/0 C 10.10.23.0 is directly connected, FastEthernet0/0 R3#show ip ospf neighbor Neighbor ID Pri State Dead Time Address Interface 10.10.23.2 1 FULL/BDR 00:00:36 10.10.23.2 FastEthernet1/0 R3#show ip ospf interface FastEthernet1/0 is up, line protocol is up Internet Address 10.10.23.3/24, Area 0 Process ID 1, Router ID 10.10.23.3, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State DR, Priority 1 Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:01 Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.23.2 (Backup Designated Router) Suppress hello for 0 neighbor(s) R3#show ip route 10.0.0.0/24 is subnetted, 2 subnets O 10.10.12.0 [110/2] via 10.10.23.2, 00:08:47, FastEthernet1/0 C 10.10.23.0 is directly connected, FastEthernet1/0 R3#ping 10.10.12.1 Type escape sequence to abort"],[944,"Sending 5, 100-byte ICMP Echos to 10.10.12.1, timeout is 2 seconds:"],[945,"85 Lưu hành nội bộ !!!!"],[946,"Success rate is 100 percent (5/5), round-trip min/avg/max = 64/71/96 ms 5.32 Bài lab : OSPF đa vùng Cấu hình cơ bản R1#configure terminal Enter configuration commands, one per line"],[947,"End with CNTL/Z"],[948,"R1(config)#interface fastEthernet 0/0 R1(config-if)#ip address 10.10.12.1 255.255.255.0 R1(config-if)#no shut R1(config-if)#exit R1(config)# R2#configure terminal Enter configuration commands, one per line"],[949,"End with CNTL/Z"],[950,"R2(config)#interface fastEthernet 1/0 R2(config-if)#ip address 10.10.12.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R2(config)#interface fastEthernet 0/0 R2(config-if)#ip address 10.10.23.2 255.255.255.0 R2(config-if)#no shut R2(config-if)#exit R2(config)# R3#configure terminal Enter configuration commands, one per line"],[951,"End with CNTL/Z"],[952,"R3(config)#interface fastEthernet 1/0 R3(config-if)#ip address 10.10.23.3 255.255.255.0 R3(config-if)#no shut R3(config-if)#exit R3(config)# Triển khai giao thức OSPF area 0 trên các Router R1(config)#router ospf 1 R1(config-router)#network 10.10.12.0 0.0.0.255 area 0 R1(config-router)#end"],[953,"86 Lưu hành nội bộ R2(config)#router ospf 1 R2(config-router)#network 10.10.12.0 0.0.0.255 area 0 R2(config-router)#network 10.10.23.0 0.0.0.255 area 1 R2(config-router)#end R3(config)#router ospf 1 R3(config-router)#network 10.10.23.0 0.0.0.255 area 1 R3(config-router)#end Kiểm tra giao thức OSPF R1#show ip ospf neighbor Neighbor ID Pri State Dead Time Address Interface 10.10.23.2 1 FULL/DR 00:00:38 10.10.12.2 FastEthernet0/0 R1#show ip ospf interface FastEthernet0/0 is up, line protocol is up Internet Address 10.10.12.1/24, Area 0 Process ID 1, Router ID 10.10.12.1, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State BDR, Priority 1 Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:07 Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.23.2 (Designated Router) Suppress hello for 0 neighbor(s) R1#show ip route 10.0.0.0/24 is subnetted, 2 subnets C 10.10.12.0 is directly connected, FastEthernet0/0 O IA 10.10.23.0 [110/2] via 10.10.12.2, 00:00:10, FastEthernet0/0 R1#ping 10.10.23.3 Type escape sequence to abort"],[954,"Sending 5, 100-byte ICMP Echos to 10.10.23.3, timeout is 2 seconds: !!!!"],[955,"Success rate is 100 percent (5/5), round-trip min/avg/max = 60/64/68 ms R2#show ip ospf neighbor Neighbor ID Pri State Dead Time Address Interface 10.10.12.1 1 FULL/BDR 00:00:38 10.10.12.1 FastEthernet1/0 10.10.23.3 1 FULL/DR 00:00:34 10.10.23.3 FastEthernet0/0 R2#show ip ospf interface"],[956,"87 Lưu hành nội bộ FastEthernet1/0 is up, line protocol is up Internet Address 10.10.12.2/24, Area 0 Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State DR, Priority 1 Designated Router (ID) 10.10.23.2, Interface address 10.10.12.2 Backup Designated router (ID) 10.10.12.1, Interface address 10.10.12.1 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:09 Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.12.1 (Backup Designated Router) Suppress hello for 0 neighbor(s) FastEthernet0/0 is up, line protocol is up Internet Address 10.10.23.2/24, Area 1 Process ID 1, Router ID 10.10.23.2, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State BDR, Priority 1 Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:01 Index 1/2, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.23.3 (Designated Router) Suppress hello for 0 neighbor(s) R2#show ip route 10.0.0.0/24 is subnetted, 2 subnets C 10.10.12.0 is directly connected, FastEthernet1/0 C 10.10.23.0 is directly connected, FastEthernet0/0 R3#show ip ospf neighbor Neighbor ID Pri State Dead Time Address Interface 10.10.23.2 1 FULL/BDR 00:00:37 10.10.23.2 FastEthernet1/0 R3#show ip ospf interface FastEthernet1/0 is up, line protocol is up Internet Address 10.10.23.3/24, Area 1 Process ID 1, Router ID 10.10.23.3, Network Type BROADCAST, Cost: 1 Transmit Delay is 1 sec, State DR, Priority 1"],[957,"88 Lưu hành nội bộ Designated Router (ID) 10.10.23.3, Interface address 10.10.23.3 Backup Designated router (ID) 10.10.23.2, Interface address 10.10.23.2 Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:04 Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 10.10.23.2 (Backup Designated Router) Suppress hello for 0 neighbor(s) R3#show ip route 10.0.0.0/24 is subnetted, 2 subnets O IA 10.10.12.0 [110/2] via 10.10.23.2, 00:03:49, FastEthernet1/0 C 10.10.23.0 is directly connected, FastEthernet1/0 R3#ping 10.10.12.1 Type escape sequence to abort"],[958,"Sending 5, 100-byte ICMP Echos to 10.10.12.1, timeout is 2 seconds: !!!!"],[959,"Success rate is 100 percent (5/5), round-trip min/avg/max = 64/64/68 ms"],[960,"89 Lưu hành nội bộ Chương VI: Access Control List 6.1 Access Control List (ACL) \u2013 kiểm soát truy cập  ACL là việc triển khai những luật cho phép đồng ý hoặc không đồng ý những kết nối cụ thể giữa các thiết bị định tuyến"],[961," Đó là sự bảo mật cho các thiết bị ở tầng 3 (layer 3) mà nó kiểm soát khả năng kết nối từ thiết bị định tuyến đến các thiết bị khác"],[962," Còn được gọi là Packet Filtering Firewall"],[963,"6.2 Các dạng Access-list"],[964,"90 Lưu hành nội bộ STANDARD ACCESS LIST EXTENDED ACCESS LIST - Dải số cho Standard Access List từ 1 \u2013 99 - Có thể chặn được Network, Host và Subnet"],[965,"- Chặn toàn bộ các dịch vụ"],[966,"- Thực hiện tại điểm gần nhất với đích"],[967,"- Cơ chế lọc được thực hiện dựa trên địa chỉ IP nguồn"],[968,"- Dải số cho Extended Access List từ 100 \u2013 199 - Người quản trị có thể đồng ý hoặc chặn bất cứ một Network, Host, Subnet và cả dịch vụ"],[969,"- Được lựa chọn các dịch vụ muốn chặn - Cơ chế lọc được thực hiện dựa trên địa chỉ IP nguồn, địa chỉ IP đích, giao thức, cổng 6.3 Bài lab : cơ bản Access-list Kiểm tra kết nối trước khi triển khai Access-list R1#ping 34.34.34.4 Type escape sequence to abort"],[970,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: !!!!"],[971,"Success rate is 100 percent (5/5), round-trip min/avg/max = 48/52/56 ms R4#ping 12.12.12.1 Type escape sequence to abort"],[972,"Sending 5, 100-byte ICMP Echos to 12.12.12.1, timeout is 2 seconds: !!!!"],[973,"Success rate is 100 percent (5/5), round-trip min/avg/max = 48/51/52 ms Triển khai Access-list trên Router 3 chặn kết nối từ Router 1 đến Router 4 R3(config)#access-list 14 deny 12.12.12.1 0.0.0.0 R3(config)#access-list 14 permit any R3(config)#interface f0/0 R3(config-if)#ip access-group 14 out Chú thích : Trên Router 3 khởi tạo một Access-list cos ID 14 thực hiện chặn (deny) từ địa chỉ 12.12.12.1 có wildcast mask là 0.0.0.0"],[974,"Trên sơ đồ kết nối cổng FastEthernet 0/0 của Router 3 là cổng đưa thông tin ra khi chuyển thông tin từ Router 1 → Router 2 → Router 3 và đến đích là Router 4"],[975,"Nên trên Router 3 chúng ta cho phép áp dụng Access-list cho cổng F0/0 xác định là cổng OUT Kiểm tra kết nối sau khi triển khai Access-list R1#ping 34.34.34.4 Type escape sequence to abort"],[976,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds:"],[977,"91 Lưu hành nội bộ UUUUU Success rate is 0 percent (0/5) R2#ping 34.34.34.4 Type escape sequence to abort"],[978,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: !!!!"],[979,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/43/56 ms R3#ping 34.34.34.4 Type escape sequence to abort"],[980,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: !!!!"],[981,"Success rate is 100 percent (5/5), round-trip min/avg/max = 24/32/36 ms 6.4 Bài lab : Access-list nâng cao Triển khai kết nối các thiết bị trong hệ thống , kiểm tra kết nối và telnet từ Computer đến Router 3 Computer#ping 23.23.23.3 Type escape sequence to abort"],[982,"Sending 5, 100-byte ICMP Echos to 23.23.23.3, timeout is 2 seconds: !!!!"],[983,"Success rate is 100 percent (5/5), round-trip min/avg/max = 48/51/52 ms ____________________________________________________________________________ Computer#telnet 23.23.23.3 Trying 23.23.23.3 .."],[984,"Open User Access Verification Password: R3>enable R3#"],[985,"92 Lưu hành nội bộ Triển khai Access-list Extended cho phép chặn chế độ telnet từ Computer đến Router 3 (23.23.23.3) R1(config)# access-list 100 deny tcp 10.10.10.10 0.0.0.0 23.23.23.3 0.0.0.0 eq 23 R1(config)# access-list 100 permit any any R1(config)#interface FastEthernet 0/0 R1(config-if)#ip access-group 100 out R1(config-if)#end Kiểm tra lại kết nối sau khi đã khởi tạo Access-list Computer# telnet 23.23.23.3 Trying 23.23.23.3 .."],[986,"% Destination unreachable; gateway or host down R1#show access-list Extended IP access list 100 10 deny tcp 10.10.10.0 0.0.0.0 23.23.23.0 0.0.0.0 eq telnet (4 matches) 6.5 Named Access-list  Access-list cũng được xác định khi sử dụng tên thay cho chỉ số"],[987," Sử dụng tên của Access-list trong một vài trường hợp đặc biệt"],[988," Không giới hạn chỉ số cho những trường hợp sử dụng Named Access-list  Một trong những ưu điểm mới của ACL là cho phép kiểm soát băng thông và tuyến đường trên hệ thống"],[989," Những phiên bản hỗ trợ Name ACL : từ phiên bản IOS 11.2 trở lên"],[990,"6.6 Bài Lab : Named ACL Kiểm tra kết nối trước khi triển khai Access-list R1#ping 34.34.34.4 Type escape sequence to abort"],[991,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: !!!!"],[992,"Success rate is 100 percent (5/5), round-trip min/avg/max = 48/52/56 ms R4#ping 12.12.12.1 Type escape sequence to abort"],[993,"Sending 5, 100-byte ICMP Echos to 12.12.12.1, timeout is 2 seconds: !!!!"],[994,"Success rate is 100 percent (5/5), round-trip min/avg/max = 48/51/52 ms"],[995,"93 Lưu hành nội bộ Triển khai Access-list trên Router 3 chặn kết nối từ Router 1 đến Router 4 có tên là : \u201cDenyR1toR4\u201d R3(config)#ip access-list standard DenyR1toR4 R3(config-std-nacl)#deny 12.12.12.1 0.0.0.0 R3(config-std-nacl)#permit any R3(config-std-nacl)#exit R3(config)#interface f0/0 R3(config-if)#ip access-group DenyR1toR4 out R3(config-if)#exit R3(config)# Chú thích : Trên Router 3 khởi tạo một Access-list có tên là DenyR1toR4 chặn Router 1 kết nối và gửi gói tin đến Router 4 Kiểm tra kết nối trước sau khi triển khai Access-list R1#ping 34.34.34.4 Type escape sequence to abort"],[996,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: UUUUU Success rate is 0 percent (0/5) R2#ping 34.34.34.4 Type escape sequence to abort"],[997,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: !!!!"],[998,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/43/56 ms R3#ping 34.34.34.4 Type escape sequence to abort"],[999,"Sending 5, 100-byte ICMP Echos to 34.34.34.4, timeout is 2 seconds: !!!!"],[1000,"Success rate is 100 percent (5/5), round-trip min/avg/max = 24/32/36 ms"],[1001,"94 Lưu hành nội bộ Chương VII: NAT 7.1 NAT (Network address translation)  NAT là một phương pháp cho phép dịch chuyển từ địa chỉ IP này thành địa chỉ IP khác"],[1002," Để có thể giao tiếp \u2013 trao đổi thông tin với hệ thống Internet, chúng ta phải đăng ký địa chỉ IP Public"],[1003," Địa chỉ chuyển đổi để giải quyết các vấn đề như sau : a"],[1004,"Xử lý sự thiếu hụt trầm trọng của địa chỉ IPV4 hiện tại"],[1005,"b"],[1006,"Che dấu các hệ thống mạng triển khai trong doanh nghiệp"],[1007,"7.2 Dải địa chỉ IP Private  Class A : 10.0.0.0 đến 10.255.255.255  Class B : 172.16.0.0 đến 172.31.255.255  Class C : 192.168.0.0 đến 192.168.255.255 7.3 Các dạng cơ bản của NAT  Static Nat"],[1008," Dynamic Nat"],[1009," Port Address Translation (PAT)"],[1010,"7.4 Static NAT  Thực hiện việc ánh xạ địa chỉ theo cách thủ công (từ một \u2013 đến \u2013 một)"],[1011," Với mỗi địa chỉ IP private đều phải có một địa chỉ đã đăng ký trên hệ thống Internet"],[1012,"Tức là khi muốn ánh xạ địa chỉ IP Private sẽ cần có một địa chỉ đã đăng ký trên Internet"],[1013,""],[1014,"95 Lưu hành nội bộ 7.5 Dynamic NAT  Thực hiện việc ánh xạ địa chỉ bằng cách tự động (từ một \u2013 đến \u2013 một)"],[1015," Khi muốn ánh xạ địa chỉ IP Private sẽ cần có một địa chỉ đã đăng ký trên Internet"],[1016,"7.6 Port Address Translasion (Dynamic Nat Overload)  Toàn bộ các User muốn kết nối đến Internet đều chỉ cần sử dụng đúng một địa chỉ trên toàn cầu"],[1017," Ánh xạ theo việc từ nhiều \u2013 đến \u2013 một , bằng việc sử dụng các port khác nhau"],[1018," PAT là lí do khiến cho chúng ta không bị thiếu hụt địa chỉ IP Internet"],[1019,""],[1020,"96 Lưu hành nội bộ 7.7 Bài Lab : Static NAT Private IP Public IP 192.168.1.2 55.55.55.2 192.168.1.3 55.55.55.3 Cấu hình NAT Static R1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 R2(config)#ip route 55.55.55.0 255.255.255.0 10.10.10.10 R1(config)#ip nat inside source static 192.168.1.2 55.55.55.2 R1(config)#ip nat inside source static 192.168.1.3 55.55.55.3 R1(config)#interface fastEthernet 0/0 R1(config-if)#ip nat inside R1(config-if)#exit R1(config)# R1(config)#interface fastEthernet 1/0 R1(config-if)#ip nat outside R1(config-if)#exit R1(config) Kiểm tra NAT R1#show ip nat translations Pro Inside global Inside local Outside local Outside global --- 55.55.55.2 192.168.1.2 --- --- --- 55.55.55.3 192.168.1.3 --- --- C:\\Users\\Com1>ping 172.16.1.2 Pinging 172.16.1.2 with 32 bytes of data: Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 Reply from 172.16.1.2: bytes=32 time=45ms TTL=47"],[1021,"97 Lưu hành nội bộ C:\\Users\\Com1>ping 172.16.1.3 Pinging 172.16.1.3 with 32 bytes of data: Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 7.8 Bài Lab : Dynamic NAT Private IP Public IP 192.168.1.2 Pool : 55.55.55.1 → 55.55.55.200 192.168.1.3 Cấu hình Dynamic Static R1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 R2(config)#ip route 55.55.55.0 255.255.255.0 10.10.10.10 R1(config)#access-list 55 permit 192.168.1.0 0.0.0.255 R1(config)#ip nat pool Bachkhoa-Aptech 55.55.55.1 55.55.55.200 netmask 255.255.255.0 R1(config)#ip nat inside source list 55 pool Bachkhoa-Aptech R1(config)#interface fastEthernet 0/0 R1(config-if)#ip nat inside R1(config-if)#exit R1(config)# R1(config)#interface fastEthernet 1/0 R1(config-if)#ip nat outside R1(config-if)#exit Kiểm tra Dynamic NAT C:\\Users\\Com1>ping 172.16.1.2 Pinging 172.16.1.2 with 32 bytes of data: Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 Reply from 172.16.1.2: bytes=32 time=45ms TTL=47"],[1022,"98 Lưu hành nội bộ C:\\Users\\Com2>ping 172.16.1.3 Pinging 172.16.1.3 with 32 bytes of data: Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 R1#show ip nat translations Pro Inside global Inside local Outside local Outside global --- 55.55.55.2 192.168.1.2 --- --- --- 55.55.55.3 192.168.1.3 --- --- Clear Dynamic NAT ( cho phép nhận một địa chỉ NAT khác khi kết nối lại dịch vụ) R1#clear ip nat translation * C:\\Users\\Com1>ping 172.16.1.2 Pinging 172.16.1.2 with 32 bytes of data: Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 C:\\Users\\Com2>ping 172.16.1.3 Pinging 172.16.1.3 with 32 bytes of data: Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 R1#show ip nat translation Pro Inside global Inside local Outside local Outside global --- 55.55.55.6 192.168.1.3 --- --- --- 55.55.55.7 192.168.1.2 --- --- 7.9 Bài Lab : Port Address Translation Private IP Public IP 192.168.1.2 55.55.55.2 192.168.1.3"],[1023,"99 Lưu hành nội bộ Kiểm tra Port Address Translation C:\\Users\\Com1>ping 172.16.1.2 Pinging 172.16.1.2 with 32 bytes of data: Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 Reply from 172.16.1.2: bytes=32 time=48ms TTL=47 Reply from 172.16.1.2: bytes=32 time=46ms TTL=47 Reply from 172.16.1.2: bytes=32 time=45ms TTL=47 C:\\Users\\Com2>ping 172.16.1.3 Pinging 172.16.1.3 with 32 bytes of data: Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 Reply from 172.16.1.3: bytes=32 time=48ms TTL=47 Reply from 172.16.1.3: bytes=32 time=46ms TTL=47 Reply from 172.16.1.3: bytes=32 time=45ms TTL=47 R1#show ip nat translations Pro Inside global Inside local Outside local Outside global icmp 55.55.55.2:5701 192.168.1.2:5701 172.16.1.2:5701 172.16.1.2:5701 icmp 55.55.55.2:5702 192.168.1.2:5702 172.16.1.2:5702 172.16.1.2:5702 icmp 55.55.55.2:5703 192.168.1.2:5703 172.16.1.2:5703 172.16.1.2:5703 icmp 55.55.55.2:5704 192.168.1.2:5704 172.16.1.2:5704 172.16.1.2:5704 icmp 55.55.55.2:1440 192.168.1.3:1440 172.16.1.3:1440 172.16.1.3:1440 icmp 55.55.55.2:1441 192.168.1.3:1441 172.16.1.3:1441 172.16.1.3:1441 icmp 55.55.55.2:1442 192.168.1.3:1442 172.16.1.3:1442 172.16.1.3:1442 icmp 55.55.55.2:1443 192.168.1.3:1443 172.16.1.3:1443 172.16.1.3:1443 Cấu hình Port Address Translation R1(config)#ip route 0.0.0.0 0.0.0.0 10.10.10.20 R2(config)#ip route 55.55.55.0 255.255.255.0 10.10.10.10 R1(config)#access-list 55 permit 192.168.1.0 0.0.0.255 R1(config)#ip nat pool Bachkhoa-Aptech 55.55.55.2 55.55.55.2 netmask 255.255.255.0 R1(config)#ip nat inside source list 55 pool Bachkhoa-Aptech overload R1(config)#interface fastEthernet 0/0 R1(config-if)#ip nat inside R1(config-if)#exit R1(config)# R1(config)#interface fastEthernet 1/0 R1(config-if)#ip nat outside R1(config-if)#exit R1(config)"],[1024,"100 Lưu hành nội bộ Chương VIII: Chuyển mạch 8.1 Router & Switch 8.2 Phân biệt giữa Hub và Switch Hub Switch Hub không phải là thiết bị thông minh"],[1025,"Switch là thiết bị thông minh và duy trì bảng địa chỉ MAC"],[1026,"Hub luôn luôn thực thi hành động broadcasts"],[1027,"Switch thực thi cả broadcast và Unicast"],[1028,"Hub hoạt động với các bit trạng thái 0 & 1"],[1029,"Switch hoạt đọng với địa chỉ vật lý (địa chỉ MAC)"],[1030,"Hub làm việc với băng thông chia sẻ"],[1031,"Switch làm việc với băng thông cố định"],[1032,"Hub có 01 miền Broadcast và 01 miền Collision"],[1033,"Switch mặc định có 01 miền Broadcast số lượng miền Collision phụ thuộc vào số port của Switch"],[1034,""],[1035,"101 Lưu hành nội bộ 8.3 Cơ chế hoạt động của ARP 8.4 Switch học địa chỉ MAC như thế nào"],[1036,"102 Lưu hành nội bộ 8.5 Broadcast Domain  Miền broadcast được định nghĩa là nhóm các thiết bị nhận được bản tin broadcast khởi tạo từ bất kỳ thiết bị nào trong nhóm"],[1037,"8.6 CSMA/CD  Carrier Sense Multiple Access/ Collision Detection là giao thức quản lý việc truy cập đường truyền trong mạng Ethernet"],[1038," Sự xung đột được nhận biết bởi phương thức truy cập được gọi là CSMA/CD và CSMA/CA"],[1039," CSMA/CD được sử dụng cho mạng LAN có dây trong khi đó CSMA/CA được sử dụng cho mạng không dây"],[1040,""],[1041,"103 Lưu hành nội bộ 8.7 Collision Domain  Một miền đụng độ là 1 phân đoạn mạng với 2 hay nhiều thiết bị cùng chia sẻ băng thông (ở đó có khả năng xảy ra xung đột)"],[1042,"8.8 Phân loại Switch  Unmanageable switches (switch không có khả năng quản lý) a"],[1043,"Những switch này có đặc trưng dùng cho trường hợp cắm và chạy ngay"],[1044,"b"],[1045,"Không cần cấu hình và xác thực"],[1046,"c"],[1047,"Không có cổng console"],[1048," Manageable switches (switch có khả năng quản lý) a"],[1049,"Những switch này cũng có thể cắm và chạy ngay"],[1050,"b"],[1051,"Có cổng console và truy cập dòng lệnh"],[1052,"c"],[1053,"Có thể xác thực và thay đổi cấu hình, hỗ trợ các tính năng nâng cao như VLAN, trunking, STP"],[1054,"8.9 Kiến trúc phân tầng trong thiết kế của Cisco  Lớp Access : 2960X hoặc 3560 switch (L2 switch)"],[1055,""],[1056,"104 Lưu hành nội bộ  Lớp Distribution : Catalyst 3550, 3750X (L3 switch hoặc multi-layer switch)"],[1057," Lớp Core : Catalyst 4500, 6500 (L3 switch hoặc multi-layer switch)"],[1058,"8.10 Khởi tạo cấu hình switch  Kết nối thông qua Console"],[1059," Phần mềm truy cập bao gồm Hyperterminal, Putty, Xshell hoặc Secure CRT"],[1060,"8.11 Các lệnh căn bản Switch>enable Switch#show running-config Switch#show startup-config Switch#show version Switch#show flash Switch#show mac-address-table"],[1061,"105 Lưu hành nội bộ Switch#show interface status Switch#config terminal Switch(config)# 8.12 Password Tạo mật khẩu truy cập Telnet Switch(config)#line vty 0 4 Switch(config-line)#password <password> Switch(config-line)#login Tạo mật khẩu truy cập Console Switch(config)#line console 0 Switch(config-line)#password <password> Switch(config-line)#login Tạo mật khẩu enable Switch(config)#enable secret <password> hoặc Switch(config)#enable password <password> 8.13 Khởi tạo cấu hình switch cho truy cập Telnet Tạo IP quản trị Switch(config)#interface vlan 1 Switch(config-if)#ip address <ip> <mask> Switch(config-if)#no shutdown Tạo Default Gateway Switch(config)#ip default-gateway 192.168.1.100"],[1062,"106 Lưu hành nội bộ Chương IX: VLAN & Trunk 9.1 Virtual LAN  Chia 01 miền broadcast thành nhiều miền broadcast nhỏ hơn"],[1063," Nhằm tăng tính bảo mật lớp 2"],[1064," VLAN 1 là VLAN mặc định và không thể thay đổi"],[1065," Có thể tạo VLAN từ 2 tới 1001"],[1066," Chỉ có thể được cấu hình trên các switch có khả năng quản lý được"],[1067,"9.2 Lợi ích của việc sử dụng VLAN  Giới hạn miền broadcast"],[1068," Tăng tính bảo mật"],[1069," Hiệu suất tốt hơn"],[1070,""],[1071,"107 Lưu hành nội bộ Chương X: Phân loại VLAN 10.1 VLAN tĩnh  VLAN tĩnh được định nghĩa dựa trên port"],[1072," Cần được gán thủ công 01 port trên switch vào 01 VLAN"],[1073," Còn được gọi là Port-Based VLANs"],[1074," 01 port chỉ có thể duy nhất gán cho 01 VLAN, không thể gán 02 VLAN trên cùng 01 port"],[1075,"Tạo VLAN Switch(config)#vlan <no> Switch(config-vlan)#name <name> Switch(config-vlan)#exit Gán port vào Vlan Switch(config)#interface <interface type> <interface no> Switch(config-if)#switchport mode access Switch(config-if)#switchport access VLAN <no>"],[1076,"108 Lưu hành nội bộ TASK : Tạo 4 VAN (VLAN 10, 20, 30, 40) Switch(config)#vlan 10 Switch(config-vlan)#name sales Switch(config-vlan)#vlan 20 Switch(config-vlan)#name marketing Switch(config-vlan)#vlan 30 Switch(config-vlan)#vlan 40 TASK : Cấu hình port Fa0/8 VLAN 10, cấu hình các port từ (4-7) và port 10 VLAN 20 Switch(config)#int f0/8 Switch(config-if)#switchport mode access Switch(config-if)#switchport access vlan 10 Switch(config-if)#exit Switch(config)#interface range f0/4 \u2013 7, f0/10 Switch(config-if-range)#switchport mode access Switch(config-if-range)#switchport access vlan 20"],[1077,"109 Lưu hành nội bộ 10.2 LAB 1\u2013 Kiểm tra cấu hình VLAN TASK: 1"],[1078,"Ping giữa 192.168.1.2, 192.168.1.3 và 192.168.1.4 3 PC có thể liên lạc với nhau do cùng chung 01 mạng và có cùng VLAN 2"],[1079,"Tạo VLAN 20 Gán port f0/3, f0/4 vào VLAN 20 3"],[1080,"Ping giữa 192.168.1.2 và 192.168.1.3 2 PC không thể liên lạc với nhau do cùng chung mạng nhưng khác VLAN (VLAN 1 và VLAN 20) 4"],[1081,"Ping giữa 192.168.1.3 và 192.168.1.4 2 PC có thể trao đổi thông tin với nhau do cùng chung một mạng và chung VLAN 20 Kiểm tra kết nối ban đầu PC1>ping 192.168.1.3 Pinging 192.168.1.3 with 32 bytes of data: Reply from 192.168.1.3: bytes=32 time=1ms TTL=128 Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),"],[1082,"110 Lưu hành nội bộ PC1>ping 192.168.1.4 Pinging 192.168.1.4 with 32 bytes of data: Reply from 192.168.1.4: bytes=32 time=1ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Ping statistics for 192.168.1.4: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), PC2>ping 192.168.1.2 Pinging 192.168.1.2 with 32 bytes of data: Reply from 192.168.1.2: bytes=32 time=1ms TTL=128 Reply from 192.168.1.2: bytes=32 time=1ms TTL=128 Reply from 192.168.1.2: bytes=32 time=1ms TTL=128 Reply from 192.168.1.2: bytes=32 time=0ms TTL=128 Ping statistics for 192.168.1.2: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), PC2>ping 192.168.1.4 Pinging 192.168.1.4 with 32 bytes of data: Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=1ms TTL=128 Ping statistics for 192.168.1.4: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), PC3>ping 192.168.1.2 Pinging 192.168.1.2 with 32 bytes of data: Reply from 192.168.1.2: bytes=32 time=0ms TTL=128 Reply from 192.168.1.2: bytes=32 time=0ms TTL=128 Reply from 192.168.1.2: bytes=32 time=1ms TTL=128 Reply from 192.168.1.2: bytes=32 time=0ms TTL=128 Ping statistics for 192.168.1.2: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), PC3>ping 192.168.1.3 Pinging 192.168.1.3 with 32 bytes of data: Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Reply from 192.168.1.3: bytes=32 time=1ms TTL=128 Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Reply from 192.168.1.3: bytes=32 time=1ms TTL=128 Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), Khởi tạo VLAN 20 và gán port f0/3 và f0/3 cho VLAN 20 Switch(config)#vlan 20 (khởi tạo VLAN 20) Switch(config-vlan)#name TestBachkhoa-Aptech (đặt tên VLAN 20 là TestBachkhoa- Aptech)"],[1083,"111 Lưu hành nội bộ Switch(config-vlan)#exit Switch(config)#interface range f0/3-4 (gán cổng f0/3-4\u2026..) Switch(config-if-range)#switchport mode access Switch(config-if-range)#switchport access vlan 20 (\u2026 cho VLAN 20) Switch(config-if-range)#exit Switch(config)# Kiểm tra lại kết nối sau khi đã khởi tạo VLAN 20 và gán port f0/3 đến f0/4 cho VLAN 20 PC1>ping 192.168.1.3 Pinging 192.168.1.3 with 32 bytes of data: Request timed out"],[1084,"Request timed out"],[1085,"Request timed out"],[1086,"Request timed out"],[1087,"Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 0, Lost = 4 (100% loss) PC1>ping 192.168.1.4 Pinging 192.168.1.4 with 32 bytes of data: Request timed out"],[1088,"Request timed out"],[1089,"Request timed out"],[1090,"Request timed out"],[1091,"Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 0, Lost = 4 (100% loss) PC2>ping 192.168.1.2 Pinging 192.168.1.2 with 32 bytes of data: Request timed out"],[1092,"Request timed out"],[1093,"Request timed out"],[1094,"Request timed out"],[1095,"Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 0, Lost = 4 (100% loss) PC2>ping 192.168.1.4 Pinging 192.168.1.4 with 32 bytes of data: Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=0ms TTL=128 Reply from 192.168.1.4: bytes=32 time=1ms TTL=128 Ping statistics for 192.168.1.4: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), PC3>ping 192.168.1.2 Pinging 192.168.1.2 with 32 bytes of data: Request timed out"],[1096,"Request timed out"],[1097,"Request timed out"],[1098,""],[1099,"112 Lưu hành nội bộ Request timed out"],[1100,"Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 0, Lost = 4 (100% loss) PC3>ping 192.168.1.3 Pinging 192.168.1.3 with 32 bytes of data: Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Reply from 192.168.1.3: bytes=32 time=1ms TTL=128 Reply from 192.168.1.3: bytes=32 time=0ms TTL=128 Reply from 192.168.1.3: bytes=32 time=1ms TTL=128 Ping statistics for 192.168.1.3: Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), Nhận xét : khi chưa triển khai VLAN 20 trên Switch, mặc định các PC khi kết nối vào Switch đều thuộc chung VLAN 1 nên luôn trao đổi được thông tin"],[1101,"Khi triển khai VLAN 20 và gán cổng F0/3 (từ PC 2 kết nối đến Switch) và cổng F0/4 (từ PC3 kết nối đến Switch) thì PC1 ở VLAN 1, PC2 và PC3 ở VLAN 20 nên không thể trao đổi thông tin giữa PC1 đến PC2 và PC3"],[1102,"Ngược lại PC2 và PC3 cùng thuộc 1 VLAN 20 nên có thể trao đổi tin như bình thường"],[1103,"10.3 VLAN động  VLAN động dựa trên địa chỉ MAC của 1 PC"],[1104," Switch tự động gán cho port 01 VLAN"],[1105," Mỗi port có thể là thành viên của nhiều VLAN"],[1106," Để cấu hình VLAN động cần phần mềm quản lý được gọi là VMPS (VLAN Membership Policy Server)"],[1107,""],[1108,"113 Lưu hành nội bộ 10.4 Trunking  01 VLAN có thể tồn tại trên nhiều switch"],[1109,""],[1110,"114 Lưu hành nội bộ Chương XI: Phân loại links/ports 11.1 Access links  Kết nối tới thiết bị cuối (Hosts hoặc router)"],[1111," Là thành phần của 01 VLAN"],[1112,"11.2 Trunk links  Không thuộc bất kỳ VLAN nào"],[1113," Có thể vận chuyển 01 hay nhiều VLAN"],[1114," Kết nối giữa các thiết bị switch"],[1115,"11.3 Frame Tagging  Để vận chuyển được nhiều VLAN trên đường trunk giữa các switch đường trunk sử dụng phương pháp tagging VLAN"],[1116," Tag dùng để phân biệt các VLAN khác nhau"],[1117," Tag VLAN chỉ xảy ra trên đường trunk"],[1118,""],[1119,"115 Lưu hành nội bộ 11.4 Trunking Protocol ISL IEEE 802.1Q Giao thức độc quyền của Cisco"],[1120,"Giao thức chuẩn mở"],[1121,"Hoạt động với Ethernet, Token ring, FDDI"],[1122,"Chỉ hoạt động với Ethernet"],[1123,"Thêm 30 bytes tag"],[1124,"Chỉ thêm 4 byte"],[1125,"Tất cả lưu lượng VLAN được tag"],[1126,"11.5 Cấu hình trunking Swith(config)#interface <interface type> <interface no> Switch(config-if)#switchport mode trunk Switch(config-if)#switchport trunk encapsulation dot1q/ISL"],[1127,"116 Lưu hành nội bộ Chương XII: Giao thức Spanning-tree 12.1 Bridging loops (Vòng lặp)  Kết nối 02 hay nhiều link giữa các switch cung cấp khả năng dự phòng"],[1128," Tuy nhiên tiềm ẩn khả năng loops khi các switch thực hiện truyền broadcast"],[1129,"a"],[1130,"Bão broadcast"],[1131,"b"],[1132,"Bảng địa chỉ MAC không ổn định"],[1133,"c"],[1134,"Băng thông bị chiếm dụng do quá quá nhiều frame trao đổi"],[1135,"12.2 Giải pháp tránh Bridging loops  Chỉ kết nối 01 link giữa các switch (không kết nối dự phòng)"],[1136," Tạm thời ngắt các link mở rộng, link dự phòng"],[1137,"a"],[1138,"Thủ công (sử dụng lệnh shutdown)"],[1139,"b"],[1140,"Tự động khóa các link mở rộng (sử dụng giao thức STP)"],[1141,"12.3 Giao thức STP  STP cho phép chặn đứng khả năng loops xảy ra khi nhiều link được sử dụng để kết nối giữa các switch"],[1142," STP tránh các rủi ro tiềm ẩn như bão broadcast, quá nhiều bản tin sao chép hoặc dữ liệu bảng MAC không ổn định"],[1143," STP là chuẩn mở IEEE 802.1D"],[1144," STP được bật tự động trên các switch của Cisco"],[1145,""],[1146,"117 Lưu hành nội bộ 12.4 STP hoạt động như thế nào  STP hoạt động qua 3 bước bao gồm: a"],[1147,"Lựa chọn Root Bridge"],[1148,"b"],[1149,"Lựa chọn Root port"],[1150,"c"],[1151,"Lựa chọn Designated port & Non Designated port"],[1152,""],[1153,"118 Lưu hành nội bộ 12.5 Lựa chọn Root Bridge  Switch có giá trị BID nhỏ nhất được chọn làm Root Bridge"],[1154," BID hay còn gọi là Bridge ID có công thức tính như sau: BID = Priority + địa chỉ MAC của switch"],[1155," Mọi LAN đều chỉ có duy nhất Root Bridge, các switch còn lại được xem là Non-root Bridges"],[1156,"12.6 Lựa chọn Root Port  Port có khoảng cách được tính bằng cost nhỏ nhất tới Root Bridge"],[1157," Tất cả các Non-root Bridge nhìn Root Port là hướng tối ưu nhất để đến Root Bridge"],[1158,"a"],[1159,"Tất cả các Non-root Bridge chỉ có duy nhất 01 root port"],[1160,"b"],[1161,"Dựa trên Path cost nhỏ nhất"],[1162,"c"],[1163,"Tiếp theo dựa trên Switch ID nhỏ nhất"],[1164,"d"],[1165,"Nếu 2 giá trị bằng nhau sẽ dựa theo giá trị nhỏ nhất của Port Priority và Port-ID"],[1166,"12.7 STP Port Cost Link Bandwidth STP Cost 4 Mbps 250 10 Mbps 100 16 Mbps 62 45 Mbps 39 100 Mbps 19 155 Mbps 14 622 Mbps 6 1 Gbps 4 10 Gbps 2 12.8 Lựa chọn Designated port và Non Designated port  Lựa chọn Designated port và Non Designated port cũng gồm 3 bước a"],[1167,"Port Cost nhỏ nhất"],[1168,"b"],[1169,"Tiếp theo dựa trên Switch ID nhỏ nhất"],[1170,"c"],[1171,"Dựa trên giá trị nhỏ nhất của Port Priority và Port-ID"],[1172,"12.9 BPDU  Tất cả các switch trao đổi thông tên dựa trên BPDU (Bridge Protocol Data Unit)"],[1173," BPDU được gửi mỗi 2 giây và có thời gian dead interval là 20 giây"],[1174," 1 BPDU chứa đựng thông tin bao gồm port, switch, port priority và địa chỉ"],[1175,""],[1176,"119 Lưu hành nội bộ 12.10 Các trạng thái port của STP  Blocking 20 giây hoặc không giới hạn"],[1177," Listening 15 giây"],[1178," Learning 15 giây"],[1179," Forwarding không giới hạn thời gian"],[1180," Disable không giới hạn thời gian"],[1181,"12.11 LAB: Kiểm tra spanning-tree Port VLAN Network - F0/1 → F0/3 - 802.1q Trunk (Native VLAN 99) 172.16.99.0/24 - F0/5 → F0/7 - VLAN 10 - IT 172.16.1.0/24 - F0/8 → F0/10 - VLAN 20 - Sale 172.16.2.0/24 - F0/11 → F0/13 - VLAN 30 - Marketing 172.16.3.0/24 Switch Name VTP Mode VTP Domain VTP Password S1 Domain Bachkhoa-Aptech 123456a@ S2 Client Bachkhoa-Aptech 123456a@ S3 Client Bachkhoa-Aptech 123456a@ Cấu hình VTP trên các Switch Sw1(config)#vtp mode server Device mode already VTP SERVER"],[1182,"Sw1(config)#vtp domain Bachkhoa-Aptech Changing VTP domain name from NULL to Bachkhoa-Aptech"],[1183,"120 Lưu hành nội bộ Sw1(config)#vtp password 123456a@ Setting device VLAN database password to 123456a@ Sw1(config)# SW2(config)#vtp mode client Setting device to VTP CLIENT mode"],[1184,"SW2(config)#vtp domain Bachkhoa-Aptech Changing VTP domain name from NULL to Bachkhoa-Aptech SW2(config)#vtp password 123456a@ Setting device VLAN database password to 123456a@ Sw3(config)#vtp mode client Setting device to VTP CLIENT mode"],[1185,"Sw3(config)#vtp domain Bachkhoa-Aptech Changing VTP domain name from NULL to Bachkhoa-Aptech Sw3(config)#vtp password 123456a@ Setting device VLAN database password to 123456a@ Cấu hình Trunking và Native VLAN (chọn VLAN 99 là Native VLAN) Sw1(config)#interface range fastEthernet 0/1-3 Sw1(config-if-range)#switchport mode trunk Sw1(config-if-range)#switchport trunk native vlan 99 Sw1(config-if-range)#no shut Sw1(config-if-range)#end Sw1# SW2(config)#interface range FastEthernet 0/1-3 SW2(config-if-range)#switchport mode trunk SW2(config-if-range)#switchport trunk native vlan 99 SW2(config-if-range)#end SW2# Sw3(config)#interface range FastEthernet 0/1-3 Sw3(config-if-range)#switchport mode trunk Sw3(config-if-range)#switchport trunk native vlan 99 Sw3(config-if-range)#end Sw3# Cấu hình VTP với các VLAN Sw1(config)#vlan 99 Sw1(config-vlan)#name Administrator Sw1(config-vlan)#exit Sw1(config)#vlan 10 Sw1(config-vlan)#name IT Sw1(config-vlan)#exit Sw1(config)#vlan 20 Sw1(config-vlan)#name Sale Sw1(config-vlan)#exit Sw1(config)#vlan 30 Sw1(config-vlan)#name Marketing"],[1186,"121 Lưu hành nội bộ Sw1(config-vlan)#exit Sw1(config)# Kiểm tra thông tin các VLAN đã khởi tạo Sw1#show vlan brief VLAN Name Status Ports ---- -------------------------------- --------- ------------------------------- 1 default active Fa0/3, Fa0/4, Fa0/5, Fa0/6 Fa0/7, Fa0/8, Fa0/9, Fa0/10 Fa0/11, Fa0/12, Fa0/13, Fa0/14 Fa0/15, Fa0/16, Fa0/17, Fa0/18 Fa0/19, Fa0/20, Fa0/21, Fa0/22 Fa0/23, Fa0/24, Gig0/1, Gig0/2 10 IT active 20 Sale active 30 Marketing active 99 Administrator active 1002 fddi-default active 1003 token-ring-default active 1004 fddinet-default active 1005 trnet-default active Sw2#show vlan brief VLAN Name Status Ports ---- -------------------------------- --------- ------------------------------- 1 default active Fa0/3, Fa0/4, Fa0/5, Fa0/6 Fa0/7, Fa0/8, Fa0/9, Fa0/10 Fa0/11, Fa0/12, Fa0/13, Fa0/14 Fa0/15, Fa0/16, Fa0/17, Fa0/18 Fa0/19, Fa0/20, Fa0/21, Fa0/22 Fa0/23, Fa0/24, Gig0/1, Gig0/2 10 IT active 20 Sale active 30 Marketing active 99 Administrator active 1002 fddi-default active 1003 token-ring-default active 1004 fddinet-default active 1005 trnet-default active Sw3#show vlan brief VLAN Name Status Ports ---- -------------------------------- --------- ------------------------------- 1 default active Fa0/3, Fa0/4, Fa0/5, Fa0/6 Fa0/7, Fa0/8, Fa0/9, Fa0/10 Fa0/11, Fa0/12, Fa0/13, Fa0/14 Fa0/15, Fa0/16, Fa0/17, Fa0/18 Fa0/19, Fa0/20, Fa0/21, Fa0/22 Fa0/23, Fa0/24, Gig0/1, Gig0/2"],[1187,"122 Lưu hành nội bộ 10 IT active 20 Sale active 30 Marketing active 99 Administrator active 1002 fddi-default active 1003 token-ring-default active 1004 fddinet-default active 1005 trnet-default active Đặt địa chỉ cho các interface VLAN để quản lý Sw1(config)#interface vlan 99 Sw1(config-if)#ip address 172.16.99.11 255.255.255.0 Sw1(config-if)#no shut Sw1(config-if)#exit SW2(config)#interface vlan 99 SW2(config-if)#ip address 172.16.99.22 255.255.255.0 SW2(config-if)#no shut SW2(config-if)#exit Sw3(config)#int vlan 99 Sw3(config-if)#ip address 172.16.99.33 255.255.255.0 Sw3(config-if)#no shut Sw3(config-if)#exit Kiểm tra kết nối giữa các Switch Sw1#ping 172.16.99.22 Type escape sequence to abort"],[1188,"Sending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: !!!!"],[1189,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms Sw1#ping 172.16.99.33 Type escape sequence to abort"],[1190,"Sending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: !!!!"],[1191,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms SW2#ping 172.16.99.11 Type escape sequence to abort"],[1192,"Sending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: !!!!"],[1193,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms SW2#ping 172.16.99.33 Type escape sequence to abort"],[1194,"Sending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: !!!!"],[1195,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms"],[1196,"123 Lưu hành nội bộ Sw3#ping 172.16.99.11 Type escape sequence to abort"],[1197,"Sending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: !!!!"],[1198,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms Sw3#ping 172.16.99.22 Type escape sequence to abort"],[1199,"Sending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: !!!!"],[1200,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms Kiểm tra kết nối giữa các Switch Sw1#ping 172.16.99.22 Type escape sequence to abort"],[1201,"Sending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: !!!!"],[1202,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms Sw1#ping 172.16.99.33 Type escape sequence to abort"],[1203,"Sending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: !!!!"],[1204,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms SW2#ping 172.16.99.11 Type escape sequence to abort"],[1205,"Sending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: !!!!"],[1206,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms SW2#ping 172.16.99.33 Type escape sequence to abort"],[1207,"Sending 5, 100-byte ICMP Echos to 172.16.99.33, timeout is 2 seconds: !!!!"],[1208,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms Sw3#ping 172.16.99.11 Type escape sequence to abort"],[1209,"Sending 5, 100-byte ICMP Echos to 172.16.99.11, timeout is 2 seconds: !!!!"],[1210,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms Sw3#ping 172.16.99.22 Type escape sequence to abort"],[1211,"Sending 5, 100-byte ICMP Echos to 172.16.99.22, timeout is 2 seconds: !!!!"],[1212,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms"],[1213,"124 Lưu hành nội bộ Gán port cho các VLAN trên Sw3 Sw3(config)#interface range FastEthernet 0/5-7 Sw3(config-if-range)#switchport mode access Sw3(config-if-range)#switchport access vlan 10 Sw3(config-if-range)#exit Sw3(config)#interface range FastEthernet 0/8-10 Sw3(config-if-range)#switchport mode access Sw3(config-if-range)#switchport access vlan 20 Sw3(config-if-range)#exit Sw3(config)#interface range FastEthernet 0/11-13 Sw3(config-if-range)#switchport mode access Sw3(config-if-range)#switchport access vlan 30 Sw3(config-if-range)#exit Kiểm tra cấu hình mặc định của 802.1D STP Sw1#show spanning-tree VLAN0001 Spanning tree enabled protocol ieee Root ID Priority 32769 Address 0000.0C4E.CABE Cost 19 Port 1(FastEthernet0/1) Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Bridge ID Priority 32769 (priority 32768 sys-id-ext 1) Address 0001.C9BD.6746 Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Aging Time 20 Interface Role Sts Cost Prio.Nbr Type ---------------- ---- --- --------- -------- -------------------------------- Fa0/2 Desg FWD 19 128.2 P2p Fa0/1 Root FWD 19 128.1 P2p VLAN0010 Spanning tree enabled protocol ieee Root ID Priority 32778 Address 0000.0C4E.CABE Cost 19 Port 1(FastEthernet0/1) Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Bridge ID Priority 32778 (priority 32768 sys-id-ext 10) Address 0001.C9BD.6746 Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Aging Time 20 Interface Role Sts Cost Prio.Nbr Type ------------------------------------------------------------------------ Fa0/2 Desg FWD 19 128.2 P2p Fa0/1 Root FWD 19 128.1 P2p"],[1214,"125 Lưu hành nội bộ VLAN0020 Spanning tree enabled protocol ieee Root ID Priority 32788 Address 0000.0C4E.CABE Cost 19 Port 1(FastEthernet0/1) Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Bridge ID Priority 32788 (priority 32768 sys-id-ext 20) Address 0001.C9BD.6746 Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Aging Time 20 Interface Role Sts Cost Prio.Nbr Type ---------------- ---- --- --------- -------- -------------------------------- Fa0/2 Desg FWD 19 128.2 P2p Fa0/1 Root FWD 19 128.1 P2p VLAN0030 Spanning tree enabled protocol ieee Root ID Priority 32798 Address 0000.0C4E.CABE Cost 19 Port 1(FastEthernet0/1) Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Bridge ID Priority 32798 (priority 32768 sys-id-ext 30) Address 0001.C9BD.6746 Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Aging Time 20 Interface Role Sts Cost Prio.Nbr Type ---------------- ---- --- --------- -------- -------------------------------- Fa0/2 Desg FWD 19 128.2 P2p Fa0/1 Root FWD 19 128.1 P2p VLAN0099 Spanning tree enabled protocol ieee Root ID Priority 32867 Address 0000.0C4E.CABE Cost 19 Port 1(FastEthernet0/1) Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Bridge ID Priority 32867 (priority 32768 sys-id-ext 99) Address 0001.C9BD.6746 Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Aging Time 20 Interface Role Sts Cost Prio.Nbr Type ---------------- ---- --- --------- -------- --------------------------------"],[1215,"126 Lưu hành nội bộ Fa0/2 Desg FWD 19 128.2 P2p Fa0/1 Root FWD 19 128.1 P2p Kiểm tra VLAN 99 của Sw2 SW2#show spanning-tree vlan 99 VLAN0099 Spanning tree enabled protocol ieee Root ID Priority 32867 Address 0000.0C4E.CABE This bridge is the root Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Bridge ID Priority 32867 (priority 32768 sys-id-ext 99) Address 0000.0C4E.CABE Hello Time 2 sec Max Age 20 sec Forward Delay 15 sec Aging Time 20 Interface Role Sts Cost Prio.Nbr Type ---------------- ---- --- --------- -------- -------------------------------- Fa0/2 Desg FWD 19 128.2 P2p Fa0/1 Desg FWD 19 128.1 P2p"],[1216,"127 Lưu hành nội bộ Chương XIII: IPV6 13.1 IP Address  Là địa chỉ logical của các thiết bị lớp 3 như: thiết bị định tuyến, thiết bị tường lửa\u2026  Mỗi thiết bị sẽ được cấp một địa chỉ logical để sử dụng và nhằm định danh thiết bị đó trên một môi trường mạng"],[1217,"13.2 2 phiên bản của IP  IPv4 : sử dụng 32 bit địa chỉ"],[1218," IPv6 : sử dụng 128 bit địa chỉ"],[1219,"13.3 IPv6 là phiên bản được nâng cấp của IPv4, với nhiều tính năng phát triển như:  Có không gian địa chỉ lớn, cung cấp được nhiều địa chỉ hơn"],[1220,"IPv4 cần xử dụng nhiều phương pháp ( Subnetting, CIDR \u2013 Classless Inter Domain, NAT- Network Address Translation)"],[1221," Do không gian địa chỉ lớn, nên không cần thực hiên NAT"],[1222," Có header đơn giản hơn so mới phiên bản IPv4"],[1223," Không có bản tin broadcasts"],[1224," Hỗ trợ cho thiết bị Mobile IP"],[1225," Hỗ trợ IPsec security"],[1226," Dễ dàng cấp lại đia chỉ"],[1227," Có khả năng hỗ trợ nhiều địa chỉ trên cùng một cổng vật lý hay logical"],[1228,"13.4 IPV6 Types  Unicast"],[1229," Multicast"],[1230," Anycast"],[1231,"13.5 Kiến trúc địa chỉ IPv6  128 bit địa chỉ"],[1232," Định dạng thập lục phân"],[1233," Ví dụ 2001:0db8:0000:0000:1234:0000:0000:3c4d 2001:db8::1234::3c4d 13.6 Địa chỉ Unicast  Địa chỉ global : a"],[1234,"Là địa chỉ IP public b"],[1235,"Bắt đầu với 2000::/3 c"],[1236,"Bắt đầu với 2 hoặc 3"],[1237,"128 Lưu hành nội bộ 13.7 Địa chỉ local  Là địa chỉ private"],[1238," Bắt đầu với FC00::/7 ( có thể bắt đầu với FC hay FD)"],[1239," Chúng không có trong bảng routable"],[1240,"13.8 Địa chỉ default  Địa chỉ IPv6 được enable trên tất cả các cổng vật lý"],[1241,"Bắt đầu với FE80::/10  Router sẽ không qua địa chỉ này"],[1242,"13.9 Địa chỉ Multicast  Địa chỉ IPV6 multicast bắt đầu bằng FF ( FF00::/8)"],[1243,"13.10 Địa chỉ Any Cast  Giống địa chỉ Multicast , một địa chỉ được thiết lập trên nhiều cổng, thiết bị định tuyến chỉ chuyển gói tin đến duy nhất một cổng được tìm đầu tiên"],[1244," Địa chỉ Local và global cũng có thể được xử dụng như địa chỉ anycast"],[1245," Ví dụ"],[1246,"Device(config)# interface f0/0 Device(config)# IPv6 address ipv6-prefix/prefix-length anycast 13.11 Đặt địa chỉ IPv6 Cấu hình bằng tay Device(config)# interface f0/0 Device(config)# IPv6 address fc00:11:11::1/64 Cấu hình tự động  Statefull ( nhận IP qua DHCP )  Stateless ( Thiết bị sẽ lấy IPv6 cùng với địa chỉ MAC ) 13.12 Stateless  Thiết bị có thể lấy địa chỉ IPv6 cho chính nó thông qua địa chỉ MAC riêng của nó"],[1247," Không cần bất kỳ DHCP server cũng như không cần cấu hình bằng tay"],[1248,""],[1249,"129 Lưu hành nội bộ  Ví dụ Cấu hình địa chỉ Ipv6 cơ bản như topo trên: Router( config)# hostname R1 R1(config)# interface Serial1/0 R1(config-if)# ipv6 address 2001:12:12:12::1/64 R1(config-if)# no shut R1(config)# interface f0/0 R1(config-if)# ipv6 address fc00:11:11:11::1/64 R1(config-if)# no shut Router( config)# hostname R2 R2(config)# interface Serial1/0 R2(config-if)# ipv6 address 2001:12:12:12::2/64 R2(config-if)# no shut R2(config)# interface f0/0 R2(config-if)# ipv6 address fc00:22:22:22::2/64 R2(config-if)# no shut"],[1250,"130 Lưu hành nội bộ Kiểm tra thông tin bảng định tuyến sau khi cấu hình R2#show ipv6 interface brief FastEthernet0/0 [up/up] FE80::C603:16FF:FE68:0 FC00:22:22:22::2 FastEthernet0/1 [administratively down/down] Serial1/0 [up/up] FE80::C603:16FF:FE68:0 2001:12:12:12::2 Serial1/1 [administratively down/down] Serial1/2 [administratively down/down] Serial1/3 [administratively down/down] R2#ping 2001:12:12:12::1 Type escape sequence to abort"],[1251,"Sending 5, 100-byte ICMP Echos to 2001:12:12:12::1, timeout is 2 seconds: !!!!"],[1252,"Success rate is 100 percent (5/5), round-trip min/avg/max = 0/7/12 ms Chúng ta có thể thấy địa chỉ Local có thể được cấu hình bằng tay hoặc router sẽ tự cấu hình, xử dụng địa chỉ Stateless"],[1253,"R2#show int f0/0 FastEthernet0/0 is up, line protocol is up Hardware is Gt96k FE, address is c403.1668.0000 (bia c403.1668.0000) R2#show ipv6 int br FastEthernet0/0 [up/up] FE80::C603:16FF:FE68:0 FC00:22:22:22::2  Tất cả các địa chỉ local luôn bắt đầu với FE80:: và một phần của địa chỉ này được thêm địa chỉ MAC của cổng vật lý đó"],[1254," Địa chỉ MAC được xử dụng trong địa chỉ vật lý và stateless"],[1255,"13.13 IPV6 ROUTING  IPv6 sử dụng các giao thức định tuyến như IPv4 với thêm một vài yêu cầu đặc biệt của IPV6"],[1256,"13.14 Các loại định tuyến IPV6  Định tuyến tĩnh"],[1257," Định tuyến RIP ( RIPng) \u2013 RFC2080"],[1258," ĐỊnh tuyến IS-IS"],[1259,""],[1260,"131 Lưu hành nội bộ  OSPFv3 ( RFC 2740)"],[1261," MP-BGP ( RFC 2545/2858)"],[1262," EIGRP for IPv6"],[1263," Định tuyến IPv6 được tích hợp sẵn trên các thiết bị định tuyến, nhưng default định tuyến IPv6 được disable"],[1264," Enable IPv6 trên router, ta sử dụng câu lệnh sau : Rx( config) # ipv6 unicast-routing 13.15 Định tuyến tĩnh  Thực hiện kiến trúc câu lệnh giống với IPv4, chỉ đến địa chỉ muốn đến qua next-hop, hoặc out interface"],[1265,"Cấu hình Static cho mô hình mạng R1(config )# ipv6 route FC00:22:22:22::2/64 2001:12:12:12::2 R2(config )# ipv6 route FC00:11:11:11::1/64 S1/0 Kiểm tra kết nối \u2013 thông tin bảng định tuyến sau khi đã triển khai static R2#show ipv6 route IPv6 Routing Table - 7 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 C 2001:12:12:12::/64 [0/0] via ::, Serial1/0 L 2001:12:12:12::2/128 [0/0] via ::, Serial1/0 S FC00:11:11:11::/64 [1/0] via ::, Serial1/0 C FC00:22:22:22::/64 [0/0] via ::, FastEthernet0/0"],[1266,"132 Lưu hành nội bộ L FC00:22:22:22::2/128 [0/0] via ::, FastEthernet0/0 L FE80::/10 [0/0] via ::, Null0 L FF00::/8 [0/0] via ::, Null0 R2#ping FC00:11:11:11::1 Type escape sequence to abort"],[1267,"Sending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: !!!!"],[1268,"Success rate is 100 percent (5/5), round-trip min/avg/max = 4/8/12 ms R1#ping FC00:22:22:22::2 Type escape sequence to abort"],[1269,"Sending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: !!!!"],[1270,"Success rate is 100 percent (5/5), round-trip min/avg/max = 8/15/20 ms Cấu hình Default Route R1(config )# ipv6 route 0::/0 2001:12:12:12::2 R2(config )# ipv6 route 0::/0 2001:12:12:12::1 Kiểm tra kết nối \u2013 thông tin bảng định tuyến sau khi đã triển khai static R1#show ipv6 route IPv6 Routing Table - 9 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 S ::/0 [1/0] via 2001:12:12:12::2 C 2001:12:12::/64 [0/0] via ::, Serial1/0"],[1271,"133 Lưu hành nội bộ L 2001:12:12::1/128 [0/0] via ::, Serial1/0 C 2001:12:12:12::/64 [0/0] via ::, Serial1/0 L 2001:12:12:12::1/128 [0/0] via ::, Serial1/0 C FC00:11:11:11::/64 [0/0] via ::, FastEthernet0/0 L FC00:11:11:11::1/128 [0/0] via ::, FastEthernet0/0 L FE80::/10 [0/0] via ::, Null0 L FF00::/8 [0/0] via ::, Null0 R1#ping FC00:22:22:22::2 Type escape sequence to abort"],[1272,"Sending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: !!!!"],[1273,"Success rate is 100 percent (5/5), round-trip min/avg/max = 4/6/8 ms R2#show ipv6 route IPv6 Routing Table - 7 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 S ::/0 [1/0] via 2001:12:12:12::1 C 2001:12:12:12::/64 [0/0] via ::, Serial1/0 L 2001:12:12:12::2/128 [0/0] via ::, Serial1/0 C FC00:22:22:22::/64 [0/0] via ::, FastEthernet0/0 L FC00:22:22:22::2/128 [0/0] via ::, FastEthernet0/0 L FE80::/10 [0/0] via ::, Null0 L FF00::/8 [0/0] via ::, Null0 R2#ping fc00:11:11:11::1 Type escape sequence to abort"],[1274,"Sending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: !!!!"],[1275,"Success rate is 100 percent (5/5), round-trip min/avg/max = 4/7/12 ms"],[1276,"134 Lưu hành nội bộ Chương XIV : Giao thức định tuyến động trong IPV6 Giao thức định tuyến động trong IPv6 không đổi so với IPv4 14.1 IGP  RIPng"],[1277," Cisco EIGRP for IPv6"],[1278," OSPFv3"],[1279,"14.2 EGP  MP-BGP4"],[1280,"14.3 RIPng Cấu hình triển khai Ripng R1(config)# ipv6 unicast-routing R1(config)# ipv6 router rip CCNA R1(config)# exit R1(config)# interface s1/0 R1(config-if)# ipv6 rip CCNA enable R1(config)# interface f0/0 R1(config-if)# ipv6 rip CCNA enable R2(config)# ipv6 unicast-routing R2(config)# ipv6 router rip CCNA R2(config)# exit R2(config)# interface s1/0 R2(config-if)# ipv6 rip CCNA enable R2(config)# interface f0/0 R2(config-if)# ipv6 rip CCNA enable"],[1281,"135 Lưu hành nội bộ Kiểm tra cấu hình Ripng R1#show ipv6 protocols IPv6 Routing Protocol is \"connected\" IPv6 Routing Protocol is \"static\" IPv6 Routing Protocol is \"rip CCNA\" Interfaces: Serial1/0 FastEthernet0/0 Redistribution: None R1#show ipv6 route IPv6 Routing Table - 6 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 C 2001:12:12:12::/64 [0/0] via ::, Serial1/0 C FC00:11:11:11::/64 [0/0] via ::, FastEthernet0/0 L FC00:11:11:11::1/128 [0/0] via ::, FastEthernet0/0 R FC00:22:22:22::/64 [120/2] via FE80::C602:13FF:FE5C:0, Serial1/0 L FE80::/10 [0/0] via ::, Null0 L FF00::/8 [0/0] via ::, Null0 R1#ping fc00:22:22:22::2 Type escape sequence to abort"],[1282,"Sending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: !!!!"],[1283,"Success rate is 100 percent (5/5), round-trip min/avg/max = 8/8/12 ms R2#show ipv6 protocols IPv6 Routing Protocol is \"connected\" IPv6 Routing Protocol is \"static\" IPv6 Routing Protocol is \"rip CCNA\" Interfaces: FastEthernet0/0 Serial1/0 Redistribution: None"],[1284,"136 Lưu hành nội bộ R2#show ipv6 route IPv6 Routing Table - 7 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 C 2001:12:12:12::/64 [0/0] via ::, Serial1/0 L 2001:12:12:12::2/128 [0/0] via ::, Serial1/0 R FC00:11:11:11::/64 [120/2] via FE80::C601:1AFF:FE6C:0, Serial1/0 C FC00:22:22:22::/64 [0/0] via ::, FastEthernet0/0 L FC00:22:22:22::2/128 [0/0] via ::, FastEthernet0/0 L FE80::/10 [0/0] via ::, Null0 L FF00::/8 [0/0] via ::, Null0 R2#ping fc00:11:11:11::1 Type escape sequence to abort"],[1285,"Sending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: !!!!"],[1286,"Success rate is 100 percent (5/5), round-trip min/avg/max = 4/7/8 ms 14.4 OSPFv3"],[1287,"137 Lưu hành nội bộ Cấu hình triển khai OSPFv3 R1(config)# ipv6 unicast-routing R1(config)# ipv6 router ospf 1 R1(config-rtr)# router-id 11.1.1.1 R1(config)# int s1/0 R1(config-if)# ipv6 ospf 1 area 0 R1(config)# int f0/0 R1(config-if)# ipv6 ospf 1 area 0 R2(config)# ipv6 unicast-routing R2(config)# ipv6 router ospf 1 R2(config-rtr)# router-id 22.2.2.2 R2(config)# int s1/0 R2(config-if)# ipv6 ospf 1 area 0 R2(config)# int f0/0 R2(config-if)# ipv6 ospf 1 area 0 Kiểm tra cấu hình OSPFv3 đã triển khai R1#show ipv6 ospf neighbor Neighbor ID Pri State Dead Time Interface ID Interface 22.2.2.2 1 FULL/ - 00:00:33 6 Serial1/0 R1#show ipv6 route ospf IPv6 Routing Table - 6 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 O FC00:22:22:22::/64 [110/74] via FE80::C602:13FF:FE5C:0, Serial1/0 R1#ping FC00:22:22:22::2 Type escape sequence to abort"],[1288,"Sending 5, 100-byte ICMP Echos to FC00:22:22:22::2, timeout is 2 seconds: !!!!"],[1289,"Success rate is 100 percent (5/5), round-trip min/avg/max = 4/8/12 ms R2#show ipv6 ospf neighbor Neighbor ID Pri State Dead Time Interface ID Interface 11.1.1.1 1 FULL/ - 00:00:32 6 Serial1/0 R2#show ipv6 route ospf IPv6 Routing Table - 7 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2"],[1290,"138 Lưu hành nội bộ ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 OI FC00:11:11:11::/64 [110/74] via FE80::C601:1AFF:FE6C:0, Serial1/0 R2#ping FC00:11:11:11::1 Type escape sequence to abort"],[1291,"Sending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: !!!!"],[1292,"Success rate is 100 percent (5/5), round-trip min/avg/max = 8/8/12 ms 14.5 EIGRP FOR IPv6 Cấu hình triển khai EIGRP R1(config)# ipv6 unicast-routing R1(config)# ipv6 router eigrp 100 R1(config-rtr)# no shut R1(config-rtr)# router-id 11.1.1.1 R1(config)# int s1/0 R1(config-if)# ipv6 eigrp 100 R1(config)# int f0/0 R1(config-if)# ipv6 eigrp 100 R2(config)# ipv6 unicast-routing R2(config)# ipv6 router eigrp 100 R2(config-rtr)# no shut R2(config-rtr)# router-id 22.2.2.2 R2(config)# int s1/0 R2(config-if)# ipv6 eigrp 100 R2(config)# int f0/0 R2(config-if)# ipv6 eigrp 100 Kiểm tra cấu hình EIGRP R1#show ipv6 route IPv6 Routing Table - 6 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary"],[1293,"139 Lưu hành nội bộ O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 D FC00:22:22:22::/64 [110/74] via FE80::C602:13FF:FE5C:0, Serial1/0 R2#show ipv6 route IPv6 Routing Table - 7 entries Codes: C - Connected, L - Local, S - Static, R - RIP, B - BGP U - Per-user Static route I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea, IS - ISIS summary O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2 ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2 D FC00:11:11:11::/64 [110/74] via FE80::C601:1AFF:FE6C:0, Serial1/0 R2#ping FC00:11:11:11::1 Type escape sequence to abort"],[1294,"Sending 5, 100-byte ICMP Echos to FC00:11:11:11::1, timeout is 2 seconds: !!!!"],[1295,"Success rate is 100 percent (5/5), round-trip min/avg/max = 8/8/12 ms"],[1296,"140 Lưu hành nội bộ Chương XV: Các công nghệ mạng WAN 15.1 Các kiểu kết nối trong mạng WAN"],[1297,"141 Lưu hành nội bộ 15.2 Các kiểu kết nối mới của mạng WAN  MPLS (Multiprotocol Label Switching)"],[1298," Metro Ethernet \u2013 mạng thành phố"],[1299," VPN (Virtual Private Network) \u2013 mạng riêng ảo"],[1300," DSL (Digital Subcriber Line) \u2013 kênh thuê bao số, cung cấp dịch vụ kết nối mạng thông qua cáp kết nối điện thoại"],[1301," VSAT \u2013 mạng vệ tinh"],[1302,"15.3 Kênh riêng (Leased line) 15.4 Giao thức WAN HDLC PPP - High-level Data Link Control protocol (giao thức kiểm soát )"],[1303,"- Độc quyền của Cisco"],[1304,"- Không hỗ trợ quá trình xác thực, nén thông tin và sửa lỗi"],[1305,"- Mặc định trên các đường sử dụng dây Serial kết nối"],[1306,"- Point to point Protocol (giao thức điểm \u2013 điểm)"],[1307,"- Giao thức cơ bản trên các hệ thống mạng"],[1308,"- Hỗ trợ quá trình xác thực thông tin, nén thông tin và sửa lỗi"],[1309,"- Được xây dựng và phát triển dựa trên nền tảng HDLC"],[1310,""],[1311,"142 Lưu hành nội bộ HDLC trên đường kết nối sử dụng dây Serial"],[1312,"Và giao thức ARPA trên đường kết nối sử dụng dây mạng qua cổng Fast Ethernet"],[1313,"143 Lưu hành nội bộ Giao thức PPP sau khi đã được khởi động trên cổng mạng  Khởi động giao thức PPP : a"],[1314,"Trên Router : R2#configure terminal R2(config)#interface Serial 4/0 R2(config-if)#encapsulation ppp"],[1315,""],[1316,""],[1317,""],[1318,""],[1319,"15.5 Xác thực PPP (Point \u2013 to \u2013 Point Protocol) PAP CHAP - Password Authentication Protocol (giao thức xác thực bằng Password)"],[1320,"- PAP cung cấp một phương pháp kết nối từ xa đơn giản thông qua 2 bước bắt tay kết nối"],[1321,"- PAP được thực hiện trong quá trình hình thành liên kết ban đầu"],[1322,"- PAP cũng không hẳn là một giao thức xác thực mạnh"],[1323,"- PAP gửi thông tin một cách rõ ràng qua đường kết nối"],[1324,"- Challenge handshake Authentication Protocol"],[1325,"- Sau khi link PPP được hình thành, Router sẽ gửi một bản tin local chứa thông tin nó đã mã hóa cho kết nối từ xa mà Router đang kết nối"],[1326,"- Thiết bị kết nối từ xa đó sẽ gửi lại cho Router một giá trị (MD5)"],[1327,"- Router sẽ kiểm tra lại thông tin local nó đang mang và so sánh với giá trị nó vừa nhận lại được từ thiết bị kết nối từ xa đó"],[1328,"- Nếu hai giá trị là giống nhau, thì quá trình xác thực sẽ thành công, còn nếu không thì Router sẽ tự động chấm dứt kết nối ngay lập tức"],[1329,""],[1330,"144 Lưu hành nội bộ 15.6 Bài Lab : cấu hình PAP R1#configure terminal Enter configuration commands, one per line"],[1331,"End with CNTL/Z"],[1332,"R1(config)#username R2 password Bachkhoa-Aptech123a@ R1(config)#interface Serial 4/0 R1(config-if)#ip address 10.10.10.10 255.255.255.0 R1(config-if)#encapsulation ppp R1(config-if)#ppp authentication pap R1(config-if)#ppp pap sent-username R2 password Bachkhoa-Aptech123a@ R1(config-if)#no shut R1(config-if)#end R1#wr R2#configure terminal"],[1333,"145 Lưu hành nội bộ Enter configuration commands, one per line"],[1334,"End with CNTL/Z"],[1335,"R2(config)#username R1 password Bachkhoa-Aptech123a@ R2(config)#interface Serial 4/0 R2(config-if)#ip address 10.10.10.10 255.255.255.0 R2(config-if)#encapsulation ppp R2(config-if)#ppp authentication pap R2(config-if)#ppp pap sent-username R1 password Bachkhoa-Aptech123a@ R2(config-if)#no shut R2(config-if)#end R2#wr 15.7 Bài Lab : cấu hình CHAP R1#configure terminal Enter configuration commands, one per line"],[1336,"End with CNTL/Z"],[1337,"R1(config)#username R2 password Bachkhoa-Aptech123a@ R1(config)#interface Serial 4/0 R1(config-if)#ip address 10.10.10.10 255.255.255.0 R1(config-if)#encapsulation ppp R1(config-if)#ppp authentication chap R1(config-if)#no shut R1(config-if)#end R2#configure terminal Enter configuration commands, one per line"],[1338,"End with CNTL/Z"],[1339,"R2(config)#username R1 password Bachkhoa-Aptech123a@ R2(config)#interface Serial 4/0 R2(config-if)#ip address 10.10.10.10 255.255.255.0 R2(config-if)#encapsulation ppp R2(config-if)#ppp authentication chap R2(config-if)#no shut R2(config-if)#end R2#wr"],[1340,"146 Lưu hành nội bộ 15.8 Các loại kết nối WAN bao gồm  Leased Line ( Kênh riêng)"],[1341," Chuyển mạch kênh"],[1342," Chuyển mạch gói (Frame Relay, MPLS)"],[1343,"15.9 Leased Line  Kênh truyền cố định từ nguồn tới đích"],[1344," Băng thông cố định"],[1345," Khả năng sẵn sàng 24/7"],[1346," Giá thành cao"],[1347,"15.10 Kỹ thuật chuyển mạch kênh (Circuit Switching)  Một đặc trưng nổi bật của kĩ thuật này là hai trạm muốn trao đổi thông tin với nhau thì giữa chúng sẽ được thiết lập một \u201c kênh\u201d (circuit) cố định, kênh kết nối này được duy trì và dành riêng cho hai trạm cho tới khi cuộc truyền tin kết thúc"],[1348,"Thông tin cuộc gọi là trong suốt"],[1349,"Quá trình thiết lập cuộc gọi tiến hành gồm 3 giai đoạn:"],[1350,"147 Lưu hành nội bộ  Giai đoạn thiết lập kêt nối: Thực chất quá trình này là liên kết các tuyến giữa các trạm trên mạng thành một tuyến (kênh) duy nhất dành riêng cho cuộc gọi"],[1351,"Kênh này đối với PSTN là 64kb/s (do bộ mã hóa PCM có tốc độ lấy mẫu tiếng nói 8kb/s và được mã hóa 8 bit)"],[1352," Giai đoạn truyền tin: Thông tin cuộc gọi là trong suốt"],[1353,"Sự trong suốt thể hiện qua hai yếu tố: thông tin không bị thay đổi khi truyền qua mạng và độ trễ nhỏ"],[1354," Giai đoạn giải phóng (huỷ bỏ) kết nối: Sau khi cuộc gọi kết thúc, kênh sẽ được giải phóng để phục vụ cho các cuộc gọi khác"],[1355," Qua đó, ta nhận thấy mạng chuyển mạch kênh có những ưu điểm nổi bật như chất lượng đường truyền tốt, ổn định, có độ trễ nhỏ"],[1356,"Các thiết bị mạng của chuyển mạch kênh đơn giản, có tính ổn định cao, chống nhiễu tốt"],[1357,"Nhưng ta cũng không thể không nhắc tới những hạn chế của phương thức truyền dữ liệu này như: a"],[1358,"Sử dụng băng thông không hiệu quả: Tính không hiệu quả này thể hiện qua hai yếu tố"],[1359,"Thứ nhất, độ rộng băng thông cố định 64k/s"],[1360,"Thứ hai là kênh là dành riêng cho một cuộc gọi nhất định"],[1361,"Như vậy, ngay cả khi tín hiệu thoại là \u201clặng\u201d (không có dữ liệu) thì kênh vẫn không được chia sẻ cho cuộc gọi khác"],[1362,"b"],[1363,"Tính an toàn: Do tín hiệu thoại được gửi nguyên bản trên đường truyền nên rất dễ bị nghe trộm"],[1364,"Ngoài ra, đường dây thuê bao hoàn toàn có thể bị lợi dụng để an trộm cước viễn thông"],[1365,"c"],[1366,"Khả năng mở rộng của mạng kênh kém: Thứ nhất là do cơ sở hạ tầng khó nâng cấp và tương thích với các thiết bị cũ"],[1367,"Thứ hai, đó là hạn chế của hệ thống báo hiệu vốn đã được sử dụng từ trước đó không có khả năng tùy biến cao"],[1368,"15.11 Kỹ thuật chuyển mạch gói (Packet Switching)  Trong chuyển mạch gói mỗi bản tin được chia thành các gói tin (packet), có khuôn dạng được quy định trước"],[1369,"Trong mỗi gói cũng có chứa thông tin điều khiển: địa chỉ trạm nguồn, địa chỉ trạm đích và số thứ tự của gói tin,\u2026 Các thông tin điều khiển được tối thiểu, chứa các thông tin mà mạng yêu cầu để có thể định"],[1370,"148 Lưu hành nội bộ tuyến được cho các gói tin qua mạng và đưa nó tới đích"],[1371,"Tại mỗi node trên tuyến gói tin được nhận, nhớ và sau đó thì chuyển tiếp cho tới chạm đích"],[1372,"Vì kỹ thuật chuyển mạch gói trong quá trình truyền tin có thể được định tuyến động để truyền tin"],[1373,"Điều khó khăn nhất đối với chuyển mạch gói là việc tập hợp các gói tin để tạo bản tin bản đầu đặc biệt là khi mà các gói tin được truyền theo nhiều con đường khác nhau tới trạm đích"],[1374,"Chính vì lý do trên mà các gói tin cần phải được đánh dấu số thứ tự, điều này có tác dụng, chống lặp, sửa sai và có thể truyền lại khi hiên tượng mất gói xảy ra"],[1375,"15.12 Các ưu điểm của chuyển mạch gói:  Mềm dẻo và hiệu suất truyền tin cao: Hiệu suất sử dụng đường truyền rất cao vì trong chuyển mạch gói không có khái niệm kênh cố định và dành riêng, mỗi đường truyền giữa các node có thể được các trạm cùng chia sẻ cho để truyền tin, các gói tin sắp hàng và truyền theo tốc độ rất nhanh trên đường truyền"],[1376," Khả năng tryền ưu tiên: Chuyển mạch gói còn có thể sắp thứ tự cho các gói để có thể truyền đi theo mức độ ưu tiên"],[1377,"Trong chuyển mạch gói số cuộc gọi bị từ chối ít hơn nhưng phải chấp nhận một nhược điểm vi thời gian trễ sẽ tăng lên"],[1378," Khả năng cung cấp nhiều dịch vụ thoại và phi thoại"],[1379," Thích nghi tốt nếu như có lỗi xảy ra: Đặc tính này có được là nhờ khả năng định tuyến động của mạng"],[1380," Bên cạnh những ưu điểm thì mạng chuyển mạch gói cũng bộ lộ những nhược điểm như:  Trễ đường truyền lớn: Do đi qua mỗi trạm, dữ liệu được lưu trữ, xử lý trước khi được truyền đi"],[1381," Độ tin cậy của mạng gói không cao, dễ xảy ra tắc nghẽn, lỗi mất bản tin  Tính đa đường có thể gây ra lặp bản tin, làm tăng lưu lượng mạng không cần thiết"],[1382," Tính bảo mật trên đường truyền chung là không cao"],[1383,""],[1384,"149 Lưu hành nội bộ 15.13 Công nghệ Frame Relay  Sử dụng hạ tầng sẵn có của nhà cung cấp dịch vụ"],[1385," Giá thành rẻ hơn so với thuê kênh riêng"],[1386,""],[1387,"150 Lưu hành nội bộ 15.14 Các thuộc tính Frame relay  Virtual Circuit: a"],[1388,"Kết nối trong công nghệ frame realy được cung cấp bởi các kênh ảo (Virtual Circuit)"],[1389,"b"],[1390,"Nhiều kết nối ảo trong cùng 01 kết nối vật lý"],[1391," DLCI: a"],[1392,"Data link connection identifier là đường định danh một đường kết nối ảo trên 01 đường vật lý nào đó"],[1393,"b"],[1394,"Giá trị từ 16 -1007"],[1395,"c"],[1396,"DLCI chỉ có ý nghĩa nội bộ trên 01 đường truyền"],[1397,"15.15 Các loại mạng Frame Relay  Point to Point"],[1398," Point to MultiPoint"],[1399,""],[1400,"151 Lưu hành nội bộ 15.16 Cấu hình Frame realy Point to Point Cấu hình Frame-Relay trên các Router R1(config)#interface loopback 0 R1(config-if)#ip address 1.1.1.1 255.255.0.0 R1(config-if)#no shut R1(config-if)#exit R1(config)#interface serial 6/0 R1(config-if)#ip address 12.12.12.1 255.255.255.0 R1(config-if)#encapsulation frame-relay R1(config-if)#frame-relay lmi-type ansi R1(config-if)#no shut R1(config-if)#exit R1(config)#router eigrp 123 R1(config-router)#network 12.12.12.0 0.0.0.255 R1(config-router)#network 1.1.1.0 0.0.255.255 R1(config-router)#no auto-summary R1(config-router)#exit R1(config)# R2(config)#interface loopback 0 R2(config-if)#ip address 2.2.2.2 255.255.0.0 R2(config-if)#no shut R2(config-if)#exit R2(config)#interface serial 6/1 R2(config-if)#ip address 12.12.12.2 255.255.255.0 R2(config-if)#encapsulation frame-relay R2(config-if)#frame-relay lmi-type ansi R2(config-if)#no shut R2(config-if)#exit R2(config)#router eigrp 123 R2(config-router)#network 2.2.2.0 0.0.255.255 R2(config-router)#network 12.12.12.0 0.0.0.255 R2(config-router)#no auto-summary R2(config-router)#exit R2(config)#"],[1401,"152 Lưu hành nội bộ FRSW(config)#frame-relay switching FRSW(config)#interface serial 6/1 FRSW(config-if)#encapsulation frame-relay FRSW(config-if)#frame-relay lmi-type ansi FRSW(config-if)#frame-relay intf-type dce FRSW(config-if)#clock rate 64000 FRSW(config-if)#frame-relay route 123 int serial 6/0 456 FRSW(config-if)#no shut FRSW(config-if)#exit FRSW(config)#interface serial 6/0 FRSW(config-if)#encapsulation frame-relay FRSW(config-if)#frame-relay lmi-type ansi FRSW(config-if)#frame-relay intf-type dce FRSW(config-if)#clock rate 64000 FRSW(config-if)#frame-relay route 456 int serial 6/1 123 FRSW(config-if)#no shut FRSW(config-if)#exit FRSW(config)# Kiểm tra cấu hình Frame-relay và thông tin trên các Router FRSW#show frame-relay route Input Intf Input Dlci Output Intf Output Dlci Status Serial6/0 456 Serial6/1 123 active Serial6/1 123 Serial6/0 456 active FRSW#show frame lmi LMI Statistics for interface Serial6/0 (Frame Relay DCE) LMI TYPE = ANSI Invalid Unnumbered info 0 Invalid Prot Disc 0 Invalid dummy Call Ref 0 Invalid Msg Type 0 Invalid Status Message 0 Invalid Lock Shift 0 Invalid Information ID 0 Invalid Report IE Len 0 Invalid Report Request 0 Invalid Keep IE Len 0 Num Status Enq"],[1402,"Rcvd 55 Num Status msgs Sent 55 Num Update Status Sent 0 Num St Enq"],[1403,"Timeouts 0 LMI Statistics for interface Serial6/1 (Frame Relay DCE) LMI TYPE = ANSI Invalid Unnumbered info 0 Invalid Prot Disc 0 Invalid dummy Call Ref 0 Invalid Msg Type 0 Invalid Status Message 0 Invalid Lock Shift 0 Invalid Information ID 0 Invalid Report IE Len 0 Invalid Report Request 0 Invalid Keep IE Len 0 Num Status Enq"],[1404,"Rcvd 56 Num Status msgs Sent 56 R1#ping 2.2.2.2 Type escape sequence to abort"],[1405,"Sending 5, 100-byte ICMP Echos to 2.2.2.2, timeout is 2 seconds: !!!!"],[1406,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms"],[1407,"153 Lưu hành nội bộ R1#show ip route 1.0.0.0/16 is subnetted, 1 subnets C 1.1.0.0 is directly connected, Loopback0 2.0.0.0/16 is subnetted, 1 subnets D 2.2.0.0 [90/2297856] via 12.12.12.2, 00:08:50, Serial6/0 12.0.0.0/24 is subnetted, 1 subnets C 12.12.12.0 is directly connected, Serial6/0 R2#ping 1.1.1.1 Type escape sequence to abort"],[1408,"Sending 5, 100-byte ICMP Echos to 1.1.1.1, timeout is 2 seconds: !!!!"],[1409,"Success rate is 100 percent (5/5), round-trip min/avg/max = 32/36/40 ms R2#show ip route 1.0.0.0/16 is subnetted, 1 subnets D 1.1.0.0 [90/2297856] via 12.12.12.1, 00:09:39, Serial6/1 2.0.0.0/16 is subnetted, 1 subnets C 2.2.0.0 is directly connected, Loopback0 12.0.0.0/24 is subnetted, 1 subnets C 12.12.12.0 is directly connected, Serial6/1 15.17 Mô hình kết nối WAN hiện đại  MPLS (Metro Ethernet)"],[1410," VPN"],[1411," FTTH GPON"],[1412,"15.18 Metro Ethernet  Metro Wan là dịch vụ cung cấp mạng riêng (nội bộ) với mục đích truyền dữ liệu dành cho doanh nghiệp có nhiều chi nhánh, trụ sở trên toàn quốc dựa trên hạ tầng MPLS/VPN Layer 2"],[1413," Công nghệ MPLS layer 2 tận dụng ưu điểm của định tuyến IP cho phép nâng cao khả năng chuyển gói qua mạng, tăng cường hiệu quả hoạt động của mạng"],[1414,"Đồng thời hỗ trợ các tính năng QoS (Quality of Service), CoS (Class of Service) cho các dịch vụ yêu cầu chất lượng khác nhau như: voice, data, video\u2026"],[1415,"154 Lưu hành nội bộ 15.19 Lợi ích mô hình Metro Ethernet  Chất lượng dịch vụ ổn định, Metro Wan-MPLS Layer 2 còn đáp ứng được tất cả các mô hình kết nối: a"],[1416,"Kết nối điểm \u2013 điểm (Point to point)"],[1417,"b"],[1418,"Kết nối điểm \u2013 đa điểm (Point to Multipoint)"],[1419,"c"],[1420,"Kết nối full mesh"],[1421," Tiết kiệm chi phí: Dịch vụ Metro Wan-MPLS Layer 2 giúp khách hàng thiết lập mạng riêng với chi phí thấp do chỉ tạo kết nối ảo"],[1422,"Tất cả các điểm có thể liên hệ trực tiếp với nhau với chỉ một kết nối vật lý duy nhất tại mỗi địa điểm"],[1423," Tính linh hoạt: Sử dụng dịch vụ này khách hàng dễ dàng mở rộng mô hình, tăng thêm điểm kết nối, tăng băng thông, tốc độ trong thời gian sử dụng mà không cần phải thay đổi mô hình hay kiến trúc mạng"],[1424," Tính bảo mật cao: Kết nối giữa các điểm được mã hóa, gán nhãn và thiết lập đường hầm (tunnel) riêng trên hệ thống mạng lõi của nhà cung cấp dịch vụ"],[1425,"15.20 Phạm vi, đối tượng sử dụng dịch vụ  Đối tượng sử dụng là các Doanh nghiệp, tổ chức lớn đang hoạt động trên lãnh thổ Việt Nam cần một đường truyền riêng tốc độ cao, ổn định, chất lượng cùng sự hỗ trợ kỹ thuật tốt nhất từ Viettel, bao gồm như: a"],[1426,"Các khách sạn lớn, ngân hàng."],[1427,"b"],[1428,"Các khu công nghiệp"],[1429,""],[1430,"155 Lưu hành nội bộ c"],[1431,"Các trường cao đẳng, đại học"],[1432,"d"],[1433,"Các đại sứ quán, tổ chức quốc tế, văn phòng đại diện"],[1434,"e"],[1435,"Các công ty về lĩnh vực giải pháp CNTT"],[1436,"f"],[1437,"Các doanh nghiệp FDI"],[1438,"15.21 VPN  VPN là công nghệ xây dựng hệ thống mạng riêng ảo nhằm đáp ứng nhu cầu chia sẻ thông tin, truy cập từ xa và tiết kiệm chi phí"],[1439,"Trước đây, để truy cập từ xa vào hệ thống mạng, người ta thường sử dụng phương thức Remote Access quay số dựa trên mạng điện thoại"],[1440,"Phương thức này vừa tốn kém vừa không an"]],"downloaded":true,"m":[-1,-1],"n":"ccna_ca_n_ba_n_bach_khoa_aptech_5241.txt","o":"https://tailieu.vn/docview/tailieu/2018/20181012/tranhanh9196/ccna_ca_n_ba_n_bach_khoa_aptech_5241.pdf"},{"saved_path":"temp/ccna_giao_trinh_tieng_viet_0958.txt","r":0,"s":[],"t":"\n\n 1\n\nLỜI NÓI ĐẦU \n\nCuốn sách \u201cGiáo trình hệ tính CCNA 2\u201d được biện soạn dựa trên chương trình đào \ntạo chuyên viên mạng của Cisco. Lần xuất bản thứ nhất đã được bạn đọc nhiệt tình \nđón nhận. Đây là chương trình học có tính thực tế cao. Trong bối cảnh công nghệ \nphát triển liên tục nên giáo trình cần được cập nhật để bám sát thực tiễn. Đó chính \nlà lý do chúng tôi giới thiệuđến bạn cuốn giáo trình mới trong lần xuất bản này. \n\nGiáo trình này tương ứg với kỳ học thứ hai trong chương trình đào tạo CCNA của \nCisco. Sách gồm có 11 chương, các chủ đề được trình bày có hệ thống và cô đọng. \nNội dung chính của tập hai là khảo sát thành phần cấu trúc và hoạt động của router, \nđồng thời hướng dẫn người đọc cấu hình cơ bản cho router. So với phiên bản cũ, \nphiên bản mới có đề cập thêm hai phần mới là: Giao thức thông điệp điều khiển \nInternet (ICMP) và danh sách kiểm tra truy nhập (Access Control List). Bên cạnh \nđó, các phần về cấu trúc router, cấu hình router và xử lý sự cố cho router cũng \nđược bổ sung thêm nhiều chi tiết mới so với phiên bản cũ. \n\nCuốn sách không chỉ là một giáo trình hữu ích cho các học viên mạng CCNA mà \ncòn là tài liệu bổ ích cho các bạn đọc muốn trở thành những nhà networking \nchuyên nghiệp. \n\nMặc dù đã cố gắng sửa chữa, bổ sung cho cuốn sách được hoàn thiện hơn song \nchắc rằng không tránh khởi những thiếu sót, hạn chế. Nhóm biên soạn mong nhận \nđược cá ý kiến đóng góp quý báu của bạn đọc. \n\n                                                                                              MK.PUB \n\n                                                                       Mk.pub@minhkhai.com.vn\n\n                                                                           www.minhkhai.com.vn\n\n \n\n \n\n \n\n \n\n \n\nmailto:Mk.pub@minhkhai.com.vn\nhttp://www.minhkhai.com.vn/\n\n\n 2\n\nLỜI NGỎ \n\nKính thưa quý bạn đọc gần xa, Ban xuất bản MK.PUB trước hết xin bày tỏ lòng \nbiết ơn và niềm vinh hạnh trước nhiệt tình của đông đảo Bạn đọc đối với tủ sách \nMK.PUB trong thời gian qua. \n\nKhẩu hiệu chúng tôi là: \n\n* Lao động khoa học nghiêm túc. \n\n* Chất lượng và ngày càng chất lượng hơn. \n\n* Tất cả vì Bạn đọc. \n\nRất nhiều Bạn đọc đã gửi mail cho chúng tôi đóng góp nhiều ý kiến quý báu \ncho tủ sách. \n\nBan xuất bản MK.PUB xin được kính mời quý Bạn đọc tham gia cùng nâng cao \nchất lượng tủ sách của chúng ta. \n\nTrong quá trình đọc, xin các Bạn ghi chú lại các sai sót (dù nhỏ, lớn) của cuốn \nsách hoặc các nhận xét của riêng Bạn. Sau đó xin gửi về địa chỉ: \n\nE-mail: mk.book@minhkhai.com.vn \u2013 mk.pub@minhkhai.com.vn\n\nHoặc gửi về: Nhà sách Minh Khai \n\n                     249 Nguyễn Thị Minh Khai, Q.I, Tp. Hồ Chí Minh \n\nNếu Bạn ghi chú trực tiếp lên cuốn sách, rồi gửi cuốn sách đó cho chúng tôi thì \nchúng tôi sẽ xin hoàn lại cước phí bưu điện và gửi lại cho bạn cuốn sách khác. \n\nChúng tôi xin gửi tặng một cuốn sách của ủ sách MK.PUB ty chọn lựa của Bạn \ntheo một danh mục thích hợp sẽ được gửi tới Bạn. \n\n         Với mục đích ngày càng nâng cao chất lượng của tủ sách MK.PUB, chúng \ntôi rất mong nhận được sự hợp tác của quý Bạn đọc gần xa. \n\n\u201cMK.PUB và Bạn đọc cùng làm !\u201d \n\n                                                 \n\nmailto:mk.book@minhkhai.com.vn\nmailto:mk.pub@minhkhai.com.vn\n\n\n 3\n\n                                                                                     MK.PUB  \n\nMỤC LỤC \n\nLỜI NÓI ĐẦU ................................................................................................. 3 \n\nMỤC LỤC......................................................................................................... 3 \n\nCHƯƠNG 1: WAN VÀ ROUTER................................................................... 5 \n\nGIỚI THIỆU ................................................................................................... 13 \n\n1.1. WAN.................................................................................................... 13 \n\n1.1.1. Giới thiệu về WAN ................................................................... 13 \n\n1.1.2. Giới thiệu về router trong mạng WAN ..................................... 15 \n\n1.1.3. Router LAN và WAN ............................................................... 17 \n\n1.1.4. Vai trò của router trong mạng WAN ......................................... 19 \n\n1.1.5. Các bài thực hành mô phỏng ..................................................... 21 \n\n1.2. Router ................................................................................................. 21 \n\n1.2.1. Các thành phần bên trong router ............................................... 21 \n\n1.2.2. Đặc điểm vật lý của router ......................................................... 24 \n\n1.2.3. Các loại kết nối bên ngoài của router ........................................ 25 \n\n1.2.4. Kết nối vào cổng quản lý trên router ......................................... 25 \n\n1.2.5. Thiết lập kết nối vào cổng console ............................................ 26 \n\n1.2.6. Thực hiện kết nối với cổng LAN .............................................. 28 \n\n1.2.7. Thực hiện kết nối với cổng WAN ............................................. 29 \n\nTỔNG KẾT .................................................................................................... 31 \n\n\n\n 4\n\nCHƯƠNG 2: GIỚI THIỆU VỀ ROUTER .................................................... 33 \n\nGIỚI THIỆU .................................................................................................. 33 \n\n2.1. Phần mềm hệ điều hành Cisco IOS .................................................... 33 \n\n2.1.1. Mục đích của phần mềm Cisco IOS........................................... 33 \n\n2.1.2. Giao diện người dùng của router ............................................... 33 \n\n2.1.3. Các chế độ cấu hình router ........................................................ 34 \n\n2.1.4. Các đặc điểm của phần mềm Cisco IOS ................................... 35 \n\n2.1.5. Hoạt động của phần mềm Cisco IOS ........................................ 38 \n\n2.2. Bắt đầu với router ............................................................................... 40 \n\n2.2.1. Khởi động router ....................................................................... 40 \n\n2.2.2. Đèn LED báo hiệu trên router ................................................... 42 \n\n2.2.3. Khảo sát quá trình khởi động router .......................................... 43 \n\n2.2.4. Thiết lập phiên kết nối bằng HyperTerminal ............................ 45 \n\n2.2.5. Truy cập vào router ................................................................... 45 \n\n2.2.6. Phím trợ giúp trong router CLI ................................................. 46 \n\n2.2.7. Mở rộng thêm về cách viết câu lệnh ......................................... 48 \n\n2.2.8. Gọi lại các lệnh đã sử dụng ....................................................... 49 \n\n2.2.9. Xử lý lỗi câu lệnh ....................................................................... 50 \n\n2.2.10. Lệnh show version ................................................................... 51 \n\nTỔNG KẾT CHƯƠNG .................................................................................. 52 \n\n\n\n 5\n\nCHƯƠNG 3: CẤU HÌNH ROUTER.............................................................  53 \n\nGIỚI THIỆU .................................................................................................. 53 \n\n3.1. Cấu hình router ................................................................................... 54 \n\n3.1.1. Chế độ giao tiếp dòng lệnh CLI ................................................ 54 \n\n3.1.2. Đặt tên cho router ...................................................................... 55 \n\n3.1.3. Đặt mật mã cho router ............................................................... 55 \n\n3.1.4. Kiểm tra bằng các lệnh show .................................................... 56 \n\n3.1.5. Cấu hình cổng serial .................................................................. 58 \n\n3.1.6. Thêm bớt, dịch chuyển và thay đổi tập tin cấu hình ................. 59 \n\n3.1.7. Cấu hình cổng Ethernet ............................................................. 60 \n\n3.2. Hoàn chỉnh cấu hình router ................................................................ 61 \n\n3.2.1. Tầm quan trọng của việc chuẩn hoá tập tin cấu hình ................ 61 \n\n3.2.2. Câu chú thích cho các cổng giao tiếp ........................................ 61 \n\n3.2.3. Cấu hình câu chú thích cho cổng giao tiếp ............................... 62 \n\n3.2.4. Thông điệp đăng nhập ................................................................ 63 \n\n3.2.5. Cấu hình thông điệp đăng nhập (MOTD) ................................. 63 \n\n3.2.6. Phân giải tên máy ...................................................................... 64 \n\n3.2.7. Cấu hình bằng host .................................................................... 65 \n\n3.2.8. Lập hồ sơ và lưu dự phòng tập tin cấu hình .............................. 65 \n\n3.2.9. Cắt, dán và chỉnh sửa tập tin cấu hình ....................................... 66 \n\n\n\n 6\n\nTỔNG KẾT CHƯƠNG ................................................................................. 67 \n\nCHƯƠNG 4: CẬP NHẬT THÔNG TIN TỪ CÁC THIẾT BỊ KHÁC ......... 69 \n\nGIỞI THIỆU .................................................................................................. 69 \n\n4.1. Kết nối và khám phá các thiết bị lân cận ............................................ 70 \n\n4.1.1. Giới thiệu về CDP ..................................................................... 70 \n\n4.1.2. Thông tin thu nhân được từ CDP ............................................... 71 \n\n4.1.3. Chạy CDP, kiểm tra và ghi nhận các thông tin CDP ................ 72 \n\n4.1.4. Xây dựng bản đồ mạng ............................................................. 76 \n\n4.1.5. Tắt CDP ..................................................................................... 76 \n\n4.1.6. Xử lý sự cố của CDP ................................................................. 77 \n\n4.2. Thu thập thông tin về các thiết bị ở xa ............................................... 77 \n\n4.2.1. Telnet ......................................................................................... 77 \n\n4.2.2. Thiết lập và kiểm tra quá trình khởi động router ...................... 78 \n\n4.2.3. Ngắt, tạm ngưng phiên Telnet ................................................... 79 \n\n4.2.4. Mở rộng thêm về hoạt động Telnet ........................................... 80 \n\n4.2.5. Các lệnh kiểm tra kết nối khác .................................................. 81 \n\n4.2.6. Xử lý sự cố về địa chỉ IP ........................................................... 84 \n\nTỔNG KẾT .................................................................................................... 84 \n\nCHƯƠNG 5: QUẢN LÝ PHẦN MỀM CISCO IOS .................................... 85 \n\nGIỚI THIỆU .................................................................................................. 85 \n\n5.1. Khảo sát và kiểm tra hoạt động router ............................................... 86 \n\n\n\n 7\n\n5.1.1. Các giai đoạn khởi động router khi bắt đầu bật điện ..................... 86 \n\n5.1.2. Thiết bị Cisvo tìm và tải IOS như thế nào ..................................... 86 \n\n5.1.3. Sử dụng lệnh boot system .............................................................. 87 \n\n5.1.4. Thanh ghi cấu hình\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026............. 88 \n\n5.1.5. Xử lý sự cố khi khởi động IOS\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 .............. 89 \n\n5.2. Quản lý tập tin hệ thống Cisco\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ....................... 91 \n\n5.2.1. Khái quát về tập tin hệ thốn IOS\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ........................ 91 \n\n5.2.2. Quy ước tên IOS\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026......................................... 94 \n\n5.2.3. Quản lý tập tin cấu hình bằng TFTP\u2026\u2026\u2026 .................................. 95 \n\n5.2.4. Quản lý tập tin cấu hình bằng cách cắt-dán\u2026\u2026\u2026........................ 99 \n\n5.2.5. Quản lý Cisco IOS bằng TFTP\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 .................. 100 \n\n5.2.6. Quản lý IOS bằng Xmodem\u2026\u2026\u2026\u2026\u2026\u2026 ................................... 103 \n\n5.2.7. Biến môi trường\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026.............................. 105 \n\n5.2.8. Kiểm tra tập tin hệ thống\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026.... 106 \n\nTỔNG KẾT ............................................................................................. 106 \n\nCHƯƠNG 6: ĐỊNH TUYẾN VÀ CÁC GIAO THỨC ĐỊNH TUYẾN ............ 107 \n\nGIỚI THIỆU \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026.................................. 107 \n\n6.1. Giới thiệu về định tuyến tĩnh ................................................................. 108 \n\n6.1.1. Giới thiệu về định tuyến tĩnh.......................................................... 108 \n\n6.1.2. Hoạt động của định tuyến tĩnh........................................................ 108 \n\n\n\n 8\n\n6.1.3. Cấu hình đường cố định ................................................................. 110 \n\n6.1.4. Cấu hình đường mặc định cho router chuyển gói đi ...................... 112 \n\n6.1.5. Kiểm tra cấu hình ........................................................................... 114 \n\n6.1.6. Xử lý sự cố...................................................................................... 114 \n\n6.2. Tổng quát về định tuyến ......................................................................... 116 \n\n6.2.1. Giới thiệu về giao thức định tuyến ................................................. 116 \n\n6.2.2. Autonomous system (AS) (Hệ thống tự quản) ............................... 117 \n\n6.2.3. Mục đích của giao thức định tuyến và hệ thống tự quản ............... 117 \n\n6.2.4. Phân loại các giao thức định tuyến................................................. 118 \n\n6.2.5. Đặc điểm của giao thức định tuyến theo vector khoảng  cách ....... 118 \n\n6.2.6. Đặc điểm của giao thức định tuyến theo trạng thái đường liên kết 121 \n\n6.3. Tổng quát về giao thức định tuyến ......................................................... 121 \n\n6.3.1. Quyết định chọn đường đi .............................................................. 123 \n\n6.3.2. Cấu hình định tuyến........................................................................ 123 \n\n6.3.3. Các giao thức định tuyến ................................................................  126 \n\n6.3.4. Hệ tự quản, IGP và EGP................................................................. 128 \n\n6.3.5. Trạng thái đường liên kết ............................................................... 130 \n\nTỔNG KẾT......................................................................................................... 132 \n\nCHƯƠNG 7: GIAO THỨC ĐỊNH TUYẾN THEO VECTOR KHOẢNG CÁCH .... 133 \n\nGIỚI THIỆU ....................................................................................................... 133 \n\n\n\n 9\n\n7.1. Định tuyến theo vector khoảng cách ...................................................... 134 \n\n7.1.1. Cập nhật thông tin định tuyến ....................................................... 134 \n\n7.1.2. Lỗi định tuyến lặp........................................................................... 135 \n\n7.1.3. Định nghĩa giá trị tối đa.................................................................. 136 \n\n7.1.4. Tránh định tuyến lặp vòng bằng split horizon................................ 137 \n\n7.1.5. Router poisoning............................................................................. 138 \n\n7.1.6. Tránh định tuyến lặp vòng bằng cơ chế cập nhật tức thời ............. 140 \n\n7.1.7. Trành lặp vòng với thời gian holddown ......................................... 140 \n\n7.2. RIP .......................................................................................................... 142 \n\n7.2.1. Tiến trình của RIP........................................................................... 142 \n\n7.2.2. Cấu hình RIP................................................................................... 142 \n\n7.2.3. Sử dụng lênh ip classless ................................................................ 144 \n\n7.2.4. Những vấn đề thường gặp khi cấu hình RIP .................................. 146 \n\n7.2.5. Kiểm tra cấu hình RIP .................................................................... 149 \n\n7.2.6. Xử lý sự cố về hoạt động cập nhật của RIP ................................... 151 \n\n7.2.7. Ngăn không cho router gửi thông tin định tuyến ra một cổng giao tiếp\n\n.................................................................................................................. 153 \n\n7.2.8. Chia tải với RIP .............................................................................. 154 \n\n7.2.9. Chia tải cho nhiều đường ............................................................... 156 \n\n7.2.10. Tích hợp đường cố định với RIP .................................................. 158 \n\n\n\n 10\n\n7.3. IGRP ....................................................................................................... 160 \n\n7.3.1. Đặc điểm của IGRP ........................................................................ 160 \n\n7.3.7. Kiểm tra cấu hình IGPR ................................................................. 171 \n\n7.3.8. Xử lý sự cố của IGPR..................................................................... 171 \n\nTỔNG KẾT ........................................................................................................ 173 \n\nCHƯƠNG 8: THÔNG ĐIỆP ĐIỀU KHIỂN VÀ BÁO LỖI CỦA TCP/IP........ 175 \n\nGIỚI THIỆU ....................................................................................................... 175 \n\n8.1. Tổng quát về thông điệp báo lỗi của TCP/IP ...................................... 176 \n\n8.1.1. Giao thức  Thông Điệp Điều Khiển Internet (IMCP) .................... 176 \n\n8.1.3. Truyền thông điệp IMCP................................................................ 177 \n\n8.1.4. Mạng không đến được .................................................................... 177 \n\n8.1.5. Sử dụng lệnh ping để kiểm tra xem địa chỉ đích có đến được hay \n\nkhông ........................................................................................................ 178 \n\n8.1.6. Phát hiện đường dài quá giới hạn ................................................... 179 \n\n8.1.7. Thông điệp echo ............................................................................. 180 \n\n8.1.8. Thông điệp \u201cDestination Unreachable\u201d.......................................... 181 \n\n8.1.9. Thông báo các loại lỗi khác............................................................ 182 \n\n8.2. Thông điệp điều khiển của TCP/IP...................................................... 183 \n\n8.2.1. Giới thiệu về thông điệp điều khiển ............................................... 183 \n\n8.2.2. Thông điệ ICMP redirect/change request....................................... 184 \n\n\n\n 11\n\n8.2.3. Đồng bộ đồng hồ và ước tính thời gian truyền dữ liệu .................. 186 \n\n8.2.4. Thông điệp Information request và reply ....................................... 187 \n\n8.2.6. Thông điệp để tìm router ................................................................ 189 \n\n8.2.7. Thông điệp Router solicitation ....................................................... 189 \n\n8.2.8. Thông điệp báo nghẽn và điều khiển luồng dữ liệu ....................... 190 \n\nTỔNG KẾT......................................................................................................... 191 \n\nCHƯƠNG 9: CƠ BẢN VỀ XỬ LÝ SỰ CỐ ROUTER ..................................... 193 \n\nGIỚI THIỆU ....................................................................................................... 193 \n\n9.1. Kiểm tra bảng định tuyến .......................................................................... 194 \n\n9.1.1. Lệnh show ip route ......................................................................... 194 \n\n9.1.2. Xác định gateway ........................................................................... 196 \n\n9.1.3. Chọn đường để chuyển gói từ nguồn đến đích............................... 197 \n\n9.1.4. Xác định địa lớp 2 và lớp 3 ............................................................ 198 \n\n9.1.5. Xác định chỉ số tincậy của các con đường .................................... 198 \n\n9.1.6. Xác định thông số định tuyến.........................................................  199 \n\n9.1.7. Xác định trạm kế tiếp...................................................................... 201 \n\n9.1.8. Kiểm tra thông tin định tuyến được cập nhật mới nhất.................. 202 \n\n9.1.9. Sử dụng nhiều đường đến cùng một đích....................................... 203 \n\n9.2. Kiểm tra kết nối mạng ............................................................................... 205 \n\n9.2.1. Giới thiệu về việc kiểm tra kết nối mạng ....................................... 205 \n\n\n\n 12\n\n9.2.2. Các bước tiến hành xử lý sự cố ...................................................... 206 \n\n9.2.3. Xử lý sự cố theo lớp của mô hình OSI ........................................... 208 \n\n9.2.4. Sử dụng các đèn báo hiệu để tìm sự cố của Lớp 1 ......................... 209 \n\n9.2.5. Sử dụng lệnh ping để xử lý sự cố ở Lớp 3 ..................................... 209 \n\n9.2.6. Sử dụng Telnet để xư lý sự cố ở Lớp 7 .......................................... 211 \n\n9.3. Tổng quát về quá trình xử lý một số sự cố của router............................... 212 \n\n9.3.1. Sử dụng lệnh show interfaces để xử lý sự cố Lớp 1 ...................... 212 \n\n9.3.2. Sử dụng lênh show interfaces để xử lý sự cố Lớp 2  ..................... 216 \n\n9.3.3. Sử dụng lệnh show cdp để xử lý sự cố .......................................... 217 \n\n9.3.4. Sử dụng lệnh traceroute để xử lý sự cố .......................................... 218 \n\n9.3.5. Xử lý các sự cố về định tuyến ........................................................ 219 \n\n9.3.6. Sử dụng lênh show controllers serial để xử lý sự cố ...................... 222 \n\nTỔNG KẾT......................................................................................................... 225 \n\nCHƯƠNG 10: TCP/IP ........................................................................................ 227 \n\nGIỚI THIỆU ....................................................................................................... 227 \n\n10.1. Hoạt động của TCP............................................................................... 228 \n\n10.1.1 Hoạt động của TCP........................................................................ 228 \n\n10.1.2 Quá trình động bộ hay quá trình bắt tay 3 bước............................ 228 \n\n10.1.3 Kiểu tấn công từ chối dịch vụ DoS (Denial of Service)................ 230 \n\n10.1.4 Cửa sổ và kích thước cửa sổ .......................................................... 231 \n\n\n\n 13\n\n10.1.6 ACK xác nhận ............................................................................... 234 \n\n10.2. Tổng quan về port ở lớp vận chuyển . .................................................. 236 \n\n10.2.1. Nhiều cuộc kết nối giữa 2 host. .................................................... 236 \n\n10.2.2. Port dành cho các dịch vụ............................................................. 238 \n\n10.2.3. Port dành cho client ...................................................................... 240 \n\n10.2.4. Chỉ port và các chỉ số port nổi tiếng............................................. 240 \n\n10.2.5. Ví dụ về trường hợp mở nhiều phiên kết nối giữa 2 host............. 240 \n\n10.2.6. So sánh giữa địa chỉ IP, địa chỉ MAC và số port ......................... 241 \n\nTỔNG KẾT......................................................................................................... 241 \n\nCHƯƠNG 11: DANH SÁCH KIỂM TRA TRUY CẬP ACLs ......................... 243 \n\nGIỚI THIỆU ....................................................................................................... 243 \n\n11.1 Cơ bản về danh sách kiểm tra truy cập.................................................. 244 \n\n11.1.1 ACLs làm việc như thế nào? ......................................................... 246 \n\n11.1.2 Kiểm tra ACLs............................................................................... 254 \n\n11.2.1 Danh sách kiểm tra truy cập ACLs..................................................... 256 \n\n11.2.1 ACLs cơ bản ................................................................................. 256 \n\n11.2.2 ACLs mở rộng ............................................................................... 258 \n\n11.2.3 ACLs đặt tên .................................................................................. 259 \n\n11.2.4 Vị trí đặt ACLs .............................................................................. 261 \n\n11.2.5 Bức tường lửa ................................................................................ 262 \n\n\n\n 14\n\n11.2.6 Giới hạn truy cập vào đường vty trên router ................................. 263 \n\nTỔNG KẾT......................................................................................................... 265 \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n 15\n\nCHƯƠNG 1 \n\nWAN VÀ ROUTER \n\nGIỚI THIỆU  \n\nMạng diện rộng (WAN) là màng truyền dữ liệu qua những vùng địa lý rất lớn. \nWAN có nhiều đặc điểm quan trọng khác với LAN. Trong chương này, trước tiên \ncác bạn sẽ có một cái nhìn tổng thể về các kỹ thuật và các giao thức của mạng \nWAN. Đồng thời trong chương này cũng sẽ giải thích những đặc điểm giống nhau \nvà khác nhau giữa LAN và WAN. \n\nBên cạnh đó, kiến thức về các thành phần vật lý của router cũng rất quan trọng. \nKiến thức này sẽ là nền tảng cho các kỹ năng và kiến thức khác khi bạn cấu hình \nrouter và quản trị mạng định tuyến. Trong chương này, các bạn sẽ được khảo sát \nthành phần vật lý bên trong và bên ngoài của router và các kỹ thiật kết nối với \nnhiều cổng khác nhau trên router. \n\nSau khi hoàn tất chương này, các bạn có thể thực hiện các việc sau: \n\n\u2022 Xác định tổ chức quốc tế chịu trách nhiệm về các chuẩn của WAN. \n\n\u2022 Giải thích sự khác nhau giữa LAN và WAN, giữa các loại địa chỉ mà mỗi \nmạng sử dụng. \n\n\u2022 Mô tả vai trò của router trong WAN. \n\n\u2022 Xác định các thành phần vật lý bên trong của router và các chức năng tương \nứng. \n\n\u2022 Mô tả các đặc điểm vật lý của router. \n\n\u2022 Xác định các loại cổng trên router. \n\n\u2022 Thực hiện các kết nối đến cổng Ethernet, cổng nối tiếp WAN và cổng \nconsole trên router. \n\n1.1. WAN \n\n1.1.1  Giới thiệu về WAN \n\n\n\n 16\n\n WAN là mạngtruyền dữ liệu qua những vùng địa lý rất rộng lớn như các bang, \ntỉnh, quốc gia\u2026 Các phương tiện truyền dữ liệu trên WAN được cung cấp bởi các \nnhà cung cấp dịch vụ, ví dụ như các công ty điện thoại. \n\nMạng WAN có một số đặc điểm sau: \n\nWAN dùng để kết nối các thiệt bị ở cách xa nhau bởi những địa lý lớn. \n\nWAN sử dụng dịch vụ của các công ty cung cấp dịch vụ, ví dụ như: Regional Bell \nOperating Conpanies (RBOCs), Sprint, MCI, VPM internet servies, Inc., \nAltantes.net\u2026 \n\nWAN sử dụng nhiều loại liên kết nối tiếp khác nhau. \n\nWAN có một số điểm khác với LAN. Ví dụ như: LAN được sử dụng để kết nối các \nmáy tính đơn lẻ, các thiết bị ngoại vi, các thiết bị đầu cuối và nhiều loại thiết bị \nkhác trong cung một toà nhà hay một phạm vi địa lý nhỏ. Trong khi đó WAN được \nsử dụng để kết nối các chi nhánh của mình, nhờ đó mà thông tin được trao đổi dễ \ndàng giữa các trung tâm. \n\nMạng WAN hoạt động chủ yếu ở lớp Vật lý và lớp Liên kết dữ liệu mô hình OSI. \nWAN kết nối các mạng LAN lại với nhau. Do đó, WAN thực hiện chuyển đổi các \ngói dữ liệu giữa các router, switch và các mạng LAN mà nó kết nối. \n\nSau đây là các thiết bị được sử dụng trong WAN: \n\n\u2022 Router: cung cấp nhiều dịch vụ khác nhau, bao gồm Internet và các giao tiếp \nWAN. \n\n\u2022 Loại switch được sử dụng trong WAN cung cấp kết nối cho hoạt động thông \ntin liên lạc băng thoại video và dữ liệu. \n\n\u2022 Modem: bao gồm: giao tiếp với dịch vụ truyền thoại; CSU/DSU (Chanel \nservice units/ Digital service units) để giao tiếp với dịch vụ T1/E1; TA/NT1 \n(Terminal Adapters /Network Terminal 1) để giao tiếp với dịch vụ ISDN \n(Integrate Services Digital Network). \n\n\u2022 Server thông tin liên lạc: tập trung xử lý cuộc gọi của người dùng. \n\n\n\n 17\n\n \n\nHình 1.1.1: Các thiết bị WAN \n\nc vận chuyển giữa các hệ thống trên một đường truyền dữ liệu. các giao \nthứ\ntruy\n\nCác ti\nsau: \n\n\u2022 Liên hiệp viễn thông quốc tế - lĩnh vực tiêu chuẩn viễn thông \u2013 ITUT \n\nctor), trước đây là Uỷ ban cố điện thoại và điện tín quốc \n\n\u2022 Tổ chứ net Engineering Task \nForce). \n\n\u2022 Liên hiệp công nghiệp điện tử - EIA (Eletronic Industries Association). \n\n1.1.2 Giới thiệu về router trong mạng WAN \n\nCác giao thức ở lớp Liên kết dữ liệu của mạng WAN mô tả về cách thức mà gói dữ \nliệu đượ\n\nc này đươc thiết kế cho các dịch vụ chuyển mạch điểm-đến-điểm, đa điểm, đa \n nhập, ví dụ như: FrameRelay. \n\nêu chuẩn của mạng WAN được định nghĩa và quản lý bởi các tổ chức quốc tế \n\n(International Telecommunication Union-Telecommunication \nStandardization Se\ntế - CCITT (Consultative Committee for International Telegraph and \nTelephone). \n\n\u2022 Tổ chức quốc tế về tiêu chuẩn \u2013 ISO (International Organization for \nStandardization). \n\nc đặc trách về kỹ thuật Internet \u2013 IETF (Inter\n\n\n\n 18\n\n \n\nHình 1.1.2 \n\nRouter là một loại máy tính đặc biệt. Nó cũng có các thành phần cơ bản giống như \nmáy tính: CPU, bộ nhớ, system bus và các cổng giao tiếp. Tuy nhiên router được \n\na đường đi tốt nhất cho dữ liệu. \n\nh để chạy các tập tin cấu hình. Tập tin cấu hình \n\no các gói dữ liệu. Do đó, tập tin cấu hình cũng chứa các thông \ntin  o thức định tuyến trên router. \n\nGiá t hích rõ cách xây dựng tập tin cấu hình từ các câu lệnh IOS \nđể router có thể thực hiện được các chức năng cơ bản. Lúc ban đầu có thể bạn thấy \ntập ạn sẽ thấy nó dễ hiểu \nhơn h\n\nCá h gồm: bộ nhớ RAM, NVRAM, bộ nhớ \nflash, ROM và các c\n\nRA ,\nchức n  \n\nkết là để thực hiện một số chức năng đặc biệt. Ví dụ: router được thiết kế là để thực \nhiện một số chức năng đặc biệt. Ví dụ: router kết nối hai hệ thống mạng với nhau \nvà cho phép hai hệ thống này có thể liên lạc với nhau, ngoài ra router còn thực hiện \nviệc chọn lự\n\nCũng giống như máy tính cần phải có hệ điều hành để chạy các trình ứng dụng thì \nrouter cũng cần phải có hệ điều hàn\nchứa các câu lệnh và các thông số để điều khiển luồng dữ liệu ra vào trên router. \nĐặc biệt là router còn sử dụng giao thức định tuyến để truyền để quyết định chọn \nđường đi tốt nhất ch\n\nđể cài đặt và chạy các gia\n\no rình này sẽ giải t\n\n tin cấu hình rất phức tạp nhưng đến cuối giáo trình này b\n n iều. \n\nc t ành phần chính bên trong router bao \nổng giao tiếp. \n\nM  hay còn gọi là RAM động (DRAM- Dynamic RAM) có các đặc điểm và \năng như sau\n\n\u2022 Lưu bảng định tuyến. \n\n\n\n 19\n\n\u2022 Lưu bảng ARP. \n\n\u2022 Có vùng bộ nhớ chuyển mạch nhanh. \n\n\u2022 Cung cấp vùng nhớ đệm cho các gói dữ liệu \n\n\u2022 Duy trì hàng đợi cho các gói dữ liệu. \n\n\u2022 Cung cấp bộ nhớ tạm thời cho tập tin cấu hình của router khi router đang \n\nĐặc điểm và chức năng của NVRAM: \n\n\u2022 iữ tập tin cấu hình khởi động của router. \n\n tắt \nđiện. \n\nĐặc i\n\n Lưu hệ điều hành IOS. \n\n\u2022 Có thể cập nhật phần mềm lưu trong Flash mà không cần thay đổi chip trên \n\n\u2022 Nội du iữ khi router khởi động lại hoặc bị tắt \nđiện. \n\n\u2022 Ta có thể lư  trong Flash. \n\nhoạt động. \n\n\u2022 Thông tin trên RAM sẽ bị xoá mất khi router khởi động lại hoặc bị tắt điện. \n\nLưu g\n\n\u2022 Nội dung của NVRAM vẫn được lưu giữ khi router khởi động lại hoặc bị\n\nđ ểm và chức năng của bộ nhớ flash: \n\n\u2022\n\n \nbộ xử lý. \n\nng của Flash vẫn được lưu g\n\nu nhiều phiên bản khác nhau của phần mềm IOS\n\n\u2022 Flash là loại ROM xoá và lập trình được (EPROM). \n\nĐặc điểm và chức năng của các cổng giao tiếp: \n\n\u2022 Kết nối router vào hệ thống mạng để nhận và chuyển gói dữ liệu. \n\n\u2022 Các cổng có thể gắn trực tiếp trên mainboard hoặc là dưới dạng card rời. \n\n1.1.3 Router LAN và WAN \n\n\n\n 20\n\n \n\nHình 1.1.3a: Phân đoạn mạng LAN với router \n\nRouter vừa được sử dụng để phân đoạn mạng LAN vừa là thiết bị chính trong \nmạng WAN. Thực chất là \n\n là: chọn đường đi tốt \nnhất và chuyển mạch gói dữ liệu. Để thực hiện chức năng này, mỗi router phải xây \ndựng một bảng định tuyến và thực hi định tuyến với nhau. \n\nDo đó, tên router có cả cổng giao tiếp LAN và WAN. \ncác kỹ thuật WAN được sử dụng để kết nối các router, router này giao tiếp với \nrouter khác qua đường liên kết WAN. Router là thiết bị xương sống của mạng \nIntranet lớn và mạng Internet. Router hoạt động ở Lớp 3 và thực hiện chuyển gói \ndữ liệu dựa trên địa chỉ mạng. Router có hai chức năng chính\n\nện trao đổi thông tin \n\n \n\nHình 1.1.3b: Kết nối router bằng các công nghệ WAN \n\n\n\n 21\n\nNg  trì bảng định tuyến bằng cách cấu hình định tuyến \ntĩnh, nhưng thông th  động nhờ các giao thức \nđịnh tuyến thự r. \n\nười quản trị mạng có thể duy\nường thi bảng định tuyến được lưu giữ\n\nc hiện trao đổi thông tin mạng giữa các route\n\n \n\nHình 1.1.3c \n\nVí dụ: nếu máy tính X muốn thông tin liên lạc với máy tính Y ở một châu lục khác \nvà với máy tính Z ở một vị trí khác nữa trên thế giới, khi đó cần phải có định tuyến \n\nMạng WAN hoạt động chủ yếu ở lớp vật lý và lớp liên kết dữ liệu. Điều này không \ncó nghĩa là năm lớp còn lại của mô hình OSI không có trong mạng WAN. Điều \n\nđể có thể truyền dữ liệu và đồng thời cũng cần phải có các đường dự phòng, thay \nthế để đảm bảo độ tin cậy. Rất nhiều thiết kế mạng và công nghệ được đưa ra để \ncho các máy tính như X Y, Z có thể liên lạc với nhau. \n\nMột hệ thống mạng được cấu hình đúng phải có đầy đủ các đặc điểm sau: \n\n\u2022 Có hệ thống địa chỉ nhất quán từ đầu cuối đến đầu cuối \n\n\u2022 Cấu trúc địa chỉ phải thể hiện được cấu trúc mạng. \n\n\u2022 Chọn được đường đi tốt nhất. \n\n\u2022 Định tuyến động và tĩnh. \n\n\u2022 Thực hiện chuyển mạch. \n\n1.1.4 Vai trò của router trong mạng WAN \n\n\n\n 22\n\nnày đơn giản có nghĩa là mang WAN chỉ khác với mạng LAN ở lớp Vật lý và lớp \nLiên kết dữ liệu. Hay nói cách khác là các tiêu chuẩn và giao thức sử dụng trong \nmạng WAN ở lớp 1 và lớp 2 là khác với mạng LAN. \n\nLớp Vật lý trong mạng WAN mô tả các giao tiếp thiết bị dữ liệu đầu cuối DTE \n(Data Terminal Equipment) và thiết bị đầu cuối mạch dữ liệu DCE (Data Circuit-\nterminal Equipment). Thông thường, DCE là thiết bị ở phía nhà cung cấp dịch vụ  \nvà DTE là thiết bị kết nối vào DCE. Theo mô hình này thì DCE có thể là modem \nhoặc CSU/DSU. \n\nChức năng chủ yếu của router là định tuyến. Hoạt động định tuyến diễn ra ở lớp 3 - \nlớp Mạng trong khi WAN hoạt động ở lớp 1 và 2. Vậy router là thiết bị LAN hay \nWAN? Câu trả lời là cả hai. Router có thể là thiết bị LAN, hoặc WAN, hoặc thiết \nbị trung gian giữa LAN và WAN hoặc có thể là LAN và WAN cùng mộ\n\nMột trong những nhiệm vụ của router trong mạng WAN là định tuyến gói dữ liệu ở \nlớp 3, đây cúng là nhiệm vụ của router trong mạng LAN. Tuy nhiên, định tuyến \nkhông phải là nhiệm vụ ch uter sử \ndụng các chuẩn và giao thức của lớp Vật lý và lớp Liên kết dữ liệu để kết nối các \nmạng WAN thì lúc này nhiệm vụ chín mạng WAN không \n\nột giao tiếp \n\nSDN sang T1, đồng thời chuyển \nkiểu đóng gói eRelay. \n\nt lúc. \n\nính yếu của router trong mạng WAN.  Khi ro\n\nh yêú của router trong \nphải là định tuyến nữa mà là cung cấp kết nối giữa các mạng WAN với các chuẩn \nvật lý và liên kết dữ liệu khác nhau. Ví dụ: một router có thể có m\nISDN sử dụng kiểu đóng gói PPP và một giao tiếp nối tiếp T1 sử dụng kiểu đóng \ngói FrameRelay. Router phải có khả năng chuyển đổi luồng bit từ loại dịch vụ này \nsang dịch vụ khác. Ví dụ: chuyển đổi từ dịch vụ I\n\n lớp Liên kết dữ liệu từ PPP sang Fram\n\nChi tiết về các giao thức lớp 1 và 2 trong mạng WAN sẽ được đề cập ở tập sau của \ngiáo trình này. Sau đây chỉ liệt kê một số chuẩn và giao thức WAN chủ yếu để các \nbạn tham khảo: \n\n\n\n 23\n\n \n\nHình 1.1.4a: Các chuẩn WAN ở lớp Vật lý \n\n \n\nHình 1.1.4b: Các kiểu đóng gói dữ liệu WAN \n\nở Lớp liên kết dữ liệu \n\nCác chuẩn và giao thức WAN lớp vật lý: EIA/TIA-232,449, V24, V35, X21, EIA-\n530, ISDN, T1, T3, E1, E3, Xdsl, sonet (oc-3, oc-12, oc-48, oc-192). \n\nCác chuẩn và giao thức WAN lớp liên kết dữ liệu: HDLC, FrameRelay, PPP, \nSDLC, SLIP, X25, ATM, LAMB, LAPD, LAPF. \n\n\n\n 24\n\n1.1.5 Các bài thực hành mô phỏng \n\nTrong các bài thực hành mô phỏng trong phòng lab, các mạng được kết nối bằng \n\nc thành phần cơ bản của router. \n\n RAM. RAM thường được chia thành hai \nphần: phần bộ nhớ xử lý chính và phần bộ nhớ chia sẻ xuất/nhập. Phần bộ nhớ chia \nsẻ xuất/nhập được chia cho các cổng giao tiếp làm nơi lưu trữ tạm các gói dữ \nliệu.Toàn bộ nội dung trên RAM sẽ bị xoá khi tắt điện. Thông thường, RAM trên \nrouter là loại RAM động (DRAM \u2013 Dynamic RAM) và có thể nâng thêm RAM \nbằng cách gắn thêm DIMM (Dual In-Line Memory Module). \n\nFlash: Bộ nhớ Flash được sử dụng để lưu toàn bộ phần mềm hệ điều hành Cisco \nIOS. Mặc định là router tìm IOS của nó trong flash. Bạn có thể nâng cấp hệ điều \nhành bằng cách chép phiên bản mới hơn vào flash. Phần mềm IOS có thể ở dưới \ndạng nén hoặc không nén. Đối với hầu hết các router, IOS được chép lên RAM \ntrong quá trình khởi động router. Còn có một số router thì IOS có thể chạy trực tiếp \n\ncáp serial trong thực tế không kết nối trực tiếp như vậy được. Ví dụ: trên thực tế, \nmột router ở New York và một router ở Sydney, Australia. Người quản trị mạng ở \nAustralia phải kết nối vào router ở New York thông qua đám mây WAN để xử lý \nsự cố trên router ở New York. \n\nTrong các bài thực hành mô phỏng, các thiết bị trong dám mây WAN được giả lập \nbằng cáp DTE-DCE kết nối trực tiếp từ cổng S0/0 của router này đến cổng S0/1 \ncủa router kia (nối back-to-back). \n\n1.2 Router \n\n1.2.1 Các thành phần bên trong router \n\nCấu trúc chính xác của router rất khác nhau tuỳ theo từng phiên bản router. Trong \nphần này chỉ giới thiệu về cá\n\nCPU \u2013 Đơn vị xử lý trung tâm: thực thi các câu lệnh của hệ điều hành để thực hiện \ncác nhiệm vụ sau: khởi động hệ thống, định tuyến, điều khiển các cổng giao tiếp \nmạng. CPU là một bộ giao tiếp mạng. CPU là một bộ vi xử lý. Trong các router lớn \ncó thể có nhiều CPU. \n\nRAM: Được sử dụng để lưu bảng định tuyến, cung cấp bộ nhớ cho chuyển mạch \nnhanh, chạy tập tin cấu hình và cung cấp hàng đợi cho các gói dữ liệu. Trong đa số \nrouter, hệ điều hành Cisco IOS chạy trên\n\n\n\n 25\n\ntrên flash mà không cần chép lên RAM. ạn có thể gắn thêm hoặc thay thế các \nthanh SIMM hay card PCMCIA để ợng flash. \n\nVRAM (Non-volative Random-access Memory): Là bộ nhớ RAM không bị mất \nông tin, được sử dụng để lưu tập tin cấu hình. Trong một số thiết bị có NVRAM \n\nvà flash . Trong một số thiết bị, flash và \n\nus hệ thống được sử \n\nROM (Read Only Memory): Là nơi lưu đoạn mã của chương trình kiểm tra khi \nkhởi động. Nhiệm vụ chính của ROM là kiểm tra phần cứng của router khi khởi \nđộng, sau đó chép phần mềm Cisco IOS từ flash vào RAM. Một số router có thể có \nphiên bản IOS cũ dùng làm nguồn khởi động dự phòng. Nội dung trong ROM \nkhông thể xoá được. Ta chỉ có thể nâng cấp ROM bằng cách thay chip ROM mới. \n\nCác cổng giao tiếp: Là nơi router kết nối với bên ngoài. Router có 3 loại cổng: \nLAN, WAN và console/AUX. Cổng giao tiếp LAN có thể gắn cố định trên router \nhoặc dưới dạng card rời. \n\nCổng giao tiếp WAN có thể là cổng Serial, ISDN, cổng tích hợp đơn vị dịch vụ \nkênh CSU (Chanel Service Unit). Tương tự như cổng giao tiếp LAN, các cổng giao \ntiếp WAN cũng có chip điều khiển đặc biệt. Cổng giao tiếp WAN có thể định trên \nrouter hoặc ở dạ\n\nCổng console/AUX là cổng nối tiếp, chủ yếu được dử dụng để cấu hình router. Hai \ncổng này không phải là loại cổng để kết nối mạng mà là để kết nối vào máy tính \nthông qua mod ính thực \nhiện cấu uter\n\n B\n nâng dung lư\n\nN\nth\n\nriêng, NVRAM được thực thi nhờ flash\nNVRAM là cùng một bộ nhớ. Trong cả hai trường hợp, nội dung của NVRAM vẫn \nđược lưu giữ khi tắt điện. \n\nBus: Phần lớn các router đều có bus hệ thống và CPU bus. B\ndụng để thông tin liên lạc giữa CPU với các cổng giao tiếp và các khe mở rộng. \nLoại bus này vận chuyển dữ liệu và các câu lệnh đi và đến các địa chỉ của ô nhớ \ntương ứng. \n\nng card rời. \n\nem hoặc thông qua cổng COM trên máy tính để từ máy t\nhình ro . \n\nNguồn điện: Cung cấp điện cho các thành phần của router, một số router lớn có thể \nsử dụng nhiều bộ nguồn hoặc nhiều card nguồn. Còn ở một số router nhỏ, nguồn \nđiện có thể là bộ phận nằm ngoài router. \n\n\n\n 26\n\n \n\nHình 1.2.1a \n\n \n\nHình 1.2.1b \n\n \n\nị trí của chúng trong router rất khác nhau tuỳ theo từng \nloại phiên bản thiết bị. \n\n1.2.2 Đặc điểm vật lý của router \n\nKhông nhất thiết là bạn phải biết vị trí của các thành phần vật lý trong router mới \ncó thể sử dụng được router. Tuy nhiên trong một số trường hợp, ví dụ như nâng \ncấp bộ nhớ chẳng hạn, những kiến thức này lại rất hữu dụng. \n\nCác loại thành phần và v\n\n\n\n 27\n\n \n\nHình 1.2.2a: Cấu trúc bên trong của router 2600 \n\n \n\nHình 1.2.2b: Các loại kết nối bên ngoài của router 2600 \n\n1.2.3 Các loại kết nối ngoài của router \n\nRouter có ba loại kết nối cơ bản là: cổng LAN, WAN và cổng quản lý router. Cổng \ngiao tiếp LAN cho phép router kết nối vào môi trường mạng cục bộ LAN. Thông \n\ng có cổng Token Ring \nvà ATM (Asynchronous Tranfer Mode). \n\nKết nối mạng WAN cung cấp kết nối thông qua các nhà cung cấp dịch vụ đến các \nchi nhánh  xa hoặc i kết nối này có thể là nối tiếp hay bất \nkỳ loại gi  tiếp WA êm một thiết bị ngoại vi như CSU chẳng \n\nthường, cổng giao tiếp LAN là cổng Ethernet. Ngoài ra cũn\n\n ở  kết nối vào Internet. Loạ\nao N, bạn cần phải có th\n\n\n\n 28\n\nhạn để nố outer đế câp dịch vụ. Đối với một số loại giao tiếp WAN \nkhác thì bạn có thể kết nối trực tiếp router của mình đến nhà cung cấp dịch vụ. \n\nChức năng của port quản lý hoàn toàn khác với ai loại trên. kết nối LAN, WAN để \nkết nối router và mạ  nhận và phát các gói dữ liệu. Trong khi đó, port \nquản lý cung cấp ch ăn bản để bạn có thể cấu hình hoặc xử \nlý trên router. Cổng quản lý thường là cổng console hoặc cổng AUX (Auxilliary). \nĐây là loại cổng nối tiếp bất đồng bộ EIA-232. Các cổng này kết nối vào cổng \nCOM trên máy tính. Trên máy tính, chúng ta sử dụng chương trình mô phỏng thiết \nbị đầu cuối để thiết lập phiên kết nối dạng văn bản vào router. Thông qua kiểu kết \nnối này, người quản trị mạng có thể quản lý thiết bị của mình. \n\ni r n nhà cung \n\nng để router\no bạn một kết nối dạng v\n\n \n\nHình 1.2.3 \n\n1.2.4 Kết nối vào cổng quản lý trên router \n\nCổng console và cổng AUX là cổng quản lý trên router. Loại cổng nối tiếp bất \nđồ ộ này được th . Ta \nthường sử dụng cổng console để thiết lập cấu hình cho router vì không phải router \nnào cũng có cổng AUX. \n\nKhi router hoạt động lần đầu tiên thì chưa có thông số mạng nào được cấu hình cả. \nDo đó router ch a thể giao tiếp với bất kỳ mạng nào. Để chuẩn bị khởi động và cấu \nhình router, ta dùng thiết bị đầu cuối ASCII kết nối vào cổng console trên router. \nSau đó ta có thể ệnh để cấu hình, cài đặt cho router. \n\nKhi bạn nhập cấu hình cho router thông qua cổng console hay cổng AUX, router \ncó thể kết nối m\n\nng b iết kế không phải để kết nối mạng mà là để cấu hình router\n\nư\n\n dùng l\n\nạng để xử lý sự cố hoặc theo dõi hoạt động mạng. \n\n\n\n 29\n\nbạn có th a modem kết nối vào cổng ể cấu hình router từ xa bằng cách quay số qu\nconsole hay cổng AUX trên router. \n\n \n\nHình 1.2.4: Kết nối modem vào cổng console hay cổng AUX \n\ntrọng. \n\n1.2.5 Thiết lập kết nối và cổng console \n\nCổng console là loại cổng quản lý, cung cấp đường kết nối riêng vào router. Cổng \nnày được sử dụng để thiết lập cấu hình cho router, theo dõi hoạt động mạng và \nkhôi phục router khi gặp sự cố nghiêm trọng. \n\nĐể kết nối PC vào cổng console bạn cần có cáp rollover và bộ chuyển đổi RJ45-\nDB9. Cisco có cung cấp bộ chuyển đổi này để nối PC vào cổng console. \n\nPC hay thiết bị đầu cuối phải có chương trình mô phỏng thiết bị đầu cuối VT100. \nThông thường phần mềm này là HyperTerminal. \n\nSau đây là các bước thực hiện kết nối PC vào cổng console: \n\n1. Cấu hình phần mềm giả lập thiết bị đầu cuối như sau: \n\nKhi xử lý sự cố, bạn nên sử dụng cổng console thay vì cổng AUX. Vì mặc định là \ncổng console có thể hiển thị quá trình khởi động router, thông tinhoạt động và các \nthông điệp báo lỗi của router. Cổng console được sử dụng khi có một dịch vụ mạng \nkhông khởi động được hoặc bị lỗi, khi khôi phục lại mật mã hoặc khi router bị sự \ncố nghiêm \n\n\n\n 30\n\n\u2022 Chọn đúng cổn\n\nw control: None \n\ng COM. \n\n\u2022 Tốc độ band là 9600. \n\n\u2022 Data bits: 8 \n\n\u2022 Parity: None \n\n\u2022 Stop bits: 1 \n\n\u2022 Flo\n\n \n\nHình1.2.5a: Kết nối PC vào cổng console trên router \n\nCắm một đầu RJ45 của cáp rollover vào cổng console trên \nrouter. \n\n2. \n\n4. \n\n \n\n \n\n \n\n3. Cắm đầu cáp còn lại vào bộ chuyển đổi RJ45-DB9. \n\nGắn đầu DB9 của bộ chuyển đổi vào cổng COM trên PC. \n\n \n\n\n\n 31\n\n \n\nHÌnh 1.2.5b: Cấu hình hyper terminal để kết nối vào console \n\n1.2.6 Thực hiện kết nối với cổng LAN \n\nt các môi trường mạng LAN hiện nay, router được kết nối vào LAN \nbằng cổng Ethernet hoặc Fast Ethernet. Router giao tiếp với mạng LAN thông qua \n\nh. Chúng ta sử dụng cáp thẳng để nổi router và hub/switch. Đối với \nng cáp UTP \n\nCAT5 hoặc cao hơn. \n\nTrong một số trường hợp ta có thể kết nối trực tiếp cổng Ethernet trên router vào \nmáy tính hoặc vào r\n\nKhi thực hiện kết nố cắp đúng cổng vì nếu cắm sai có thể gây \như h ng cho router và thi ại cổng khác nhau \nnh  hình dạng c ernet, ISDN BRI, \nconsole, AUX, cổn ng cổng 8 \nchân là RJ45, RJ48 hoặc RJ49. \n\n1.2.7 Thực hiện kết nối với cổng WAN \n\nTrong hầu hế\n\nhub hoặc switc\ntất cả các loại router có cổng 10/100BaseTx chúng ta đều phải sử dụ\n\nouter khác bằng cáp chéo. \n\ni, chúng ta phải lưu ý \nỏ ết bị khác. Trên router có rất nhiều lo\n\nưng ổng lai giống nhau. Ví dụ như: cổng Eth\ng tích hợp CSU/DSU, cổng Token Ring đều sử dụ\n\n\n\n 32\n\nKế ối WAN có nh  ký thuật \nđể thực hiện truyền dữ liệu qua một vùng địa lý rộng lớn. Các dịch vụ \n\nAN thường được thuê từ nhà cung cấp dịch vụ. Chúng ta có 3 loại kết nối WAN \nnhư sau: kết nối thuê kênh riêng, kết nối chuyển mạch - mạch, kết nối chuyển \nmạch gói. \n\nt n iều dạng khác nhau. Một kết nối WAN sử dụng nhiều\nkhác nhau \nW\n\n \n\nHình 1.2.7a \n\nĐối với từng loại dịch vụ WAN, thiết bị thuộc sở hữu của khách hàng (CPE \u2013 \nCustomer Premises Equipment), thông thường là router, được gọi là thiết bị dữ liệu \nđầu cuối DTE (Data Terminal Equipment). Thiết bị DTE này được kết nối vào nhà \ncung cấp dịch vụ thông qua thiết bị kết cuối mạch dữ liệu DCE (Data Circuit-\nterminating Equipment), thông thường là modem hay CSU/DSU. Thiết bị DCE này \nđược sử dụng để chuyển đổi dữ liệu từ DTE sang dạng phù hợp với dịch vụ của \nnhà cung cấp dịch vụ. \n\nHầu hết các cổng WAN trên router đều là cổng Serial. Công việc chọn lựa cho \nđúng loại cáp sẽ rất dễ dàng khi bạn trả lời được 4 câu hỏi sau: \n\n\u2022 Loại kết nối trên thiết bị Cisco là loại nào? Cisco router sử \ndụng nhiều loài đầu nối khác nhau cho cổng Serial. Như trong hình 1.2.7b, \ncổng bên trái là cổng Smart Serial, cổng bên phải là cổng DB-60. Lựa chon \n\n\n\n 33\n\ncáp Serial để kết nối hệ thố ột phần then chốt trong qua trình ng mạng là m\nthiết lập WAN. \n\n \n\nHình 1.2.7b \n\n\u2022 Hệ thống mạng được kết nối và thiết bị DTE hay DCE? DTE \nác nhau. Điểm khác nhau quan trọng giữa \n\nệu xung đồng hồ cho quá trình thông \n khảo tài liệu của thiết bị để xác định DTE \n\nnào? mỗi loại thiết bị khác nhau \nsẽ sử dụng loại chuẩn Serial khác nhau. Mỗi chuẩn sẽ quy ước tín hiệu \n\nên tham khảo tài liệu của \nuẩn tín hiệu của thiết bị. \n\nvà DCE là hai loại cổng serial kh\nhai loại này là: thiết bị DCE cấp tín hi\ntin liên lạc trên bus. Bạn nên tham\nvà DCE. \n\n\u2022 Thiết bị đòi hỏi chuẩn tín hiệu \n\ntruyền trên cáp và loại đầu nối ở 2 đầu cáp. Bạn n\nthiết bị để xác định ch\n\n\n\n 34\n\n \n\nHình 1.2.7c \n\n\u2022 Cáp có loại đầu nối đực hay cái? Nếu đầu nối có chân cắm ra \nngoài thì đó là đầu đực. Nếu đầu nối chỉ có lỗ cắm cho các chân thì đó là đầu \ncái \n\n \n\nHình 1.2.7d \n\nTỔNG KẾT \n\n\n\n 35\n\nSau â\n\n\u2022 \n\n\u2022 trong WANs và LANs. \n\n\u2022 \n\n\u2022 \n\n\u2022 \n\n\u2022 \n\n\u2022 ách kết nối vào cổng console, cổng LAN và WAN. \n\n đ y là các điểm quan trọng bạn cần nắm được trong chương này: \n\nKhái niệm về WAN và LAN. \n\nVai trò của router \n\n\u2022 Các giao thức WAN. \n\nCấu hình kiểu đóng gói cho cổng giao tiếp. \n\nXác định và mô tả các thành phần bên trong router. \n\nĐặc điểm vật lý của router. \n\nCác loại cổng thường gặp trên router. \n\nC\n\n \n\n\n\n 36\n\nCHƯƠNG\n\n phải nắm vững về IOS. \n\niáo trình này. \n\n\u2022 ng lệnh với router. \n\n\u2022 Chuyể\n\n\u2022 \n\n\u2022 \n\nhập câu lệnh. \n\n Mục đích của phần mềm Cisco IOS \n\n switch không thể hoạt động được nếu không có \nủa mình là hệ điều hành mạng Cisco hay gọi \n\n 2 \n\nGIỚI THIỆU VỀ ROUTER \n\nGIỚI THIỆU \n\nCác kỹ thuật của Cisco đều được xây dựng dựa trên hệ điều hành mạng Cisco \n(ISO). Phần mềm  IOS điều khiển quá trình định tuyến và chuyển mạch trên các \nthiết bị kết nối liên mạng. Do đó người quản trị mạng\nTrong chương này, chúng tôi sẽ giới thiệu cơ bản và khảo sát các đặc điểm của \nIOS. Tất cả các công việc cấu hình mạng từ đơn giản nhất đến phức tạp nhất đều \ndựa trên một nền tảng cơ bản là cấu hình router. Do đó trong chương này cũng giới \nthiệu về các kỹ thuật và công cụ cơ bản để cấu hình router mà chúng ta sẽ sử dụng \ntrong suốt g\n\nSau khi hoàn tất chương này, các bạn có thể: \n\n\u2022 Nắm được mục đích của IOS. \n\n\u2022 Mô tả hoạt động cơ bản của IOS. \n\n\u2022 Nắm được các đặc điểm của IOS. \n\nNắm được phương thức thiết lập phiên giao tiếp bằng dò\n\nn đổi giữa các chế độ cấu hình router. \n\nThiết lập kết nối bằng HyperTerminal vào router. \n\nTruy cập vào router. \n\n\u2022 Sử dụng tính năng trợ giúp trong giao tiếp bằng dòng lệnh. \n\n\u2022 Xử lý lỗi khi n\n\n2.1 Phần hệ điều hành Cisco IOS \n\n2.1.1\n\nTương tự như máy tính, router và\nh isco gọi hệ điều hành chệ điều ành. C\n\n\n\n 37\n\ntắt là Cis . Hệ điều hành được cài trên các Cisco router và Catalysst Switch. \nh vụ mạng như sau: \n\nến và chuyển mạch. \n\nả ật cho việc truy cập vàp tài nguyên mạng. \n\n hệ thống mạng. \n\nouter \n\nụng giao diện dòng lệnh (CLI \u2013 Command \u2013 line interface) \n môi sole truyền thống. IOS là một kỹ thuật cơ bản, từ đó được phát \n\nho sản phẩm khác nhau của Cisco. Do đó hoạt động cụ thể của \ng IOS g loại thiết bị. \n\núng ta  router. Cách \nu tiên sole \n\ntrên router. Cách thứ hai là sử dụng đường quay số qua modem hoặc kết nối null \ndem ổng AUX trên router. Cả hai cách trên đều không cần phải cấu hình \nớc ch ba là telnet vào router. Để thiết lập phiên telnet vào \nter th , các \nng v\n\n.3 C router \n\no diệ sco sử dụng cấu trúc phân cấp. Cấu trúc này đòi hỏi bạn \nng ứng. Ví dụ: nếu bạn muốn cấu hình \n\ng gia nào của router thì bạn phải vào chế đọ cấu hình cổng giao tiếp đó. \nế đ tất cả các cấu hình được nhập vào chỉ có hiệu lực đối với cổng giao \nươn ôi. Tương ứng với mỗi chế độ cấu hình có một dấu nhắc đặc \n\np lệnh riêng. \n\nS có . Sau khi bạn nhập một câu lệnh thì \nEC sẽ ệnh đó. \n\nmật nên Cisco IOS chia phiên bản làm việc của EXEC thành hai chế \n\nco IOS\nCisco IOS cung cấp các dịc\n\n\u2022 Định tuy\n\n\u2022 B o đảm và bảo m\n\n\u2022 Mở rộng\n\n2.1.2 Giao diện người dùng của r\n\nPhần mềm Cisco sử d\ncho trường con\ntriển c  nhiều dòng \ntừn  sẽ rất khác nhau tuỳ theo từn\n\nCh  có nhiều cách khác nhau để truy cập vào giao diện CLI của\nđầ  là kết nối trực tiếp từ máy tính hoặc thiết bị đầu cuối vào cổng con\n\nmo vào c\ntrư o router. Cách thứ \nrou\nđườ\n\nì trên router ít nhất phải có một cổng đã được cấu hình địa chỉ IP\nty đã được cấu hình cho phép truy cập và đặt mật mã. \n\n2.1 ác chế độ cấu hình \n\nGia n dòng lệnh của Ci\nmuốn cấu hình cái gì thì phải vào chế độ tươ\ncổn\n\n ch\no tiếp \n\nTừ\np t\n\nộ này \ntiế g ứng mà th\ntrưng riêng và một tậ\n\nIO một trình thông dịch gọi là EXEC\nEX  thực thi ngay câu l\n\nVì lý do bảo \nđộ là: chế độ EXEC người dùng và chế độ EXEC đặc quyền. Sau đây là các đặc \nđiểm của chế độ EXEC người dùng và chế độ EXEC đặc quyền: \n\n\n\n 38\n\n\u2022 Chế độ EXEC người dùng chỉ cho phép thực thi một số câu lệnh hiển thị các \nthông tin cơ bản của router mà thôi. Chế độ này chỉ để xem chứ không cho \nphép thực hiện các câu lệnh làm thay đổi cấu hình router. Chế độ EXEC \nngười dùng có dấu nhắc là \u201c>\u201d. \n\n\u2022 Chế độ EXEC đặc quyền cho phép thực hiện tất cả các câu lệnh của router. \nBạn có thể cấu hình để người dùng phải nhập mật mã trước khi truy nhập \nvào chế độ này. Ngoài ra, để tăng thêm tính bảo mật bạn có thể cấu hình \n\nử dụng các câu lệnh để cấu hình hoặc quản lý router. Từ chế độ \n\nền hạn dùng \n nhắc \u201c>\u201d. Nếu mật mã đã được cài đặt thì router sẽ yêu cầu bạn \n do bảo mật nên các thiết bị mạng Cisco không hiển thị mật mã \n\nng. Sau khi mật mã được nhập vào chính xác thì dấu nhắc \n chế độ EXEC đặc quyền. Bạn gõ dấu \nter hiển thị ra nhiều câu lệnh hơn so với \n\nở chế độ EXEC người dùng. \n\nthêm userID. Điều này cho phép chỉ những người nào được phép mới có thể \ntruy cập vào router. Người quản trị mảng phải ở chế độ EXEC đặc quyền \nmới có thể s\nEXEC đặc quyền bạn có thể chuyển vào các chế độ đặc khác nhau như chế \nđộ cấu hình toàn cục chẳng hạn. Chế độ EXEC đặc quyền được xác định bởi \ndấu nhắc \u201c#\u201d. \n\nĐể chuyển từ chế độ EXEC người dùng sang chế độ EXEC đặc quy\nlệnh enable tại dấu\nnhập mật mã. Vì lý\ntrong lúc bạn nhập chú\n\u201c>\u201d chuyển thành \u201c#\u201d cho biết bạn đang ở\nchầm hỏi (?) ở dấu nhắc này thì sẽ thấy rou\n\n \n\n\n\n 39\n\nHình 2.1.3 \n\n2.1.4 Các đặc điểm của phần mè\n\nản phẩm mạng khác nhau. \n\niết bị, Cisco đã phát triển nhiều loại \nphầ ỗi loại phần mềm IOS phù hợp với từng loại thiết bị, với \nmứ ớ và với nhu cầu của khách hàng. \n\nMặ hần mềm IOS khác nhau cho nhiều loại thiết bị với nhiều đặc \ntính ng cấu trúc lệnh cấu hình cơ bản thì vẫn giống nhau. Do đó kỹ \nnăng cấu hình và xử lý sự cố của bạn có thể ứng dụng cho nhiều loại sản phẩm \n\n sau: \n\n biết phần \n\nệ thống mạng \n\nm Cisco IOS \n\nCisco cung cấp rất nhiều loại IOS cho các loại s\n\nĐể tối ưu hoá phần mềm IOS cho nhiều loại th\nn mềm Cisco IOS. M\nc dung lượng bộ nh\n\nc dù có nhiều p\n khác nhau như\n\nkhác nhau. \n\nTên của Cisco IOS được quy ước chia ra thành ba phần như\n\n\u2022 Phần thứ nhất thể hiện loại thiết bị mà phần mềm IOS này có thể sử dụng \nđược. \n\n\u2022 Phần thứ hai thể hiện các đặc tính của phần mềm IOS.  \n\n\u2022 Phần thứ ba thể hiện nơi chạy phần mêm IOS trên router và cho\nmềm này được cung cấp dưới dạng nén hay không nén. \n\nBạn có thể lựa chọn các đặc tính đặc biệt của IOS nhờ phần mềm \nCisco Software Advisor. Cisco Software Advisor là một công cụ cung cấp \ncác thông tin hiện tại và cho phép bạn chọn lựa các đặc tính cho phu hợp với \nyêu cầu của h\n\n \nThe name has three parts, separated by dashes: e.g. xxx-yyy-ww: \n\u2022 xxxx = Platform \n\u2022 yyyy = Feature \n\u2022 ww   = Format \u2013 where It execute from if compressed \n \n\nName Codes \nPlatform (Hardware) (Partial list) \nC1005 1005 \n\n\n\n 40\n\nC1600 1600 \nC1700 1700, 1720, 1750 \nC2500 25xx, 3xxx, 5100, AO (11.2 and later only) \nC2600 2600 \nC2800 Catalyst 2800 \nC2900 2910, 2950 \nC3620 3620 \nC3640 3640 \nC4000 4000 (11.2 and later only) \nC4500 4500, 4700 \nFeature (Partial list) \nB Appletalk \nBoot Boot image \nC Commserver file (CiscoPro) \nDrag IOS based diagnostic images \nG ISDN subnet (SNMP, IP, Bridging, ISDN, PPP, IPX, Atalk) \nI IP subnet (SNMP, IP, Bridging, W e Node, Terminal AN, Remot\n\nServices) \nN IPX \nQ Async \nT Telco return (12.0) \nY Reduced IP (SNMP, IP RIP/IGRP/EIGRP, Bridging, ISDN, PPP) \n\n(C1003/4) \nZ Managed moderns \n40 40 bit encryption \n56 56 bit encryption \nFormat (Where the image runs in the route) \nF Flash \nM Ram \nR Rom \nL Rebcatable \nCompression Type  \nZ Zip compressed (note lower case) \nX M zip compressed \nW \u201cSTAC\u201d compress \nHình \n\nKhi bạn chọn mua IOS mới thì một trong những điều quan trọng bạn cần phải chú \n là sự tương thích giữa IOS với bộ nhớ flash và RAM trong router. Thông thường \n\n2.1.4a \n\ný\n\n\n\n 41\n\nthì các phiên bản mới có thêm nhiều đặ  tính mới thì lại đòi hỏi thêm nhiều bộ \nnhớ. Bạn có thể dùng lệnh show version để kiểm tra phần IOS hiện tại và dung \nlượng flash còn trống. Trên trang web hỗ ợ của Cisco có một số công cụ giúp bạn \nxác định dung lượng flash và RAM cần th ết cho từng loại IOS. \n\nTrước khi cài đặt phần mềm Cisco IOS mới lên router, bạn phải kiểm tra xem \nrouter có đủ dung lượng bộ nhớ hay không. Để xem dung lượng RAM bạn dùng \nlệ h show version: \n\n\u2026<output omited>\u2026 cisco 1721 (68380) processor (revision c) with 3584k/512K \nbytes of memory. \n\nDòng trên cho biết dung lượng của bộ nh  chính và bộ nhớ chia sẻ trên router. Có \nmốt số thiết bị sử dụng một phần DRAM làm bộ nhớ chia sẻ. Tổng hai dung lượng \ntrên là dung lương thật sự của DRAM trên router. \n\nĐể xem dung lượng của bộ nhớ flash bạn dung lệnh show flash: \n\nGAD#show flash \n\n\u2026<output omitted>\u2026 \n\n1599897 bytes total (10889728 bytes free) \n\nc\n\n tr\ni\n\nn\n\nớ\n\n \n\n \n\n \n\n\n\n 42\n\n \n\n \n\n \n\n \n\nThiết bị Cisco IOS có 3 chế độ hoạt động sau: \n\n\u2022 ROM monitor \n\n\u2022 Boot ROM \n\n\u2022 Cisco IOS.  \n\nột trong các chế độ hoạt động \nuản trị hệ thống có thể cài đặt giá trị cho \n\nanh ghi để điều khiển chế độ khởi động mặc định router. \n\n \n\nHình 2.1.4b \n\n2.1.5 Hoạt động của phầm mềm Cisco IOS \n\nThông thường trong quá trình khởi động router, m\ntrên được tải lên RAM để chạy. Người q\nth\n\n\n\n 43\n\nChế độ ROM monitor thực hiện quá trình bootstrap và kiểm tra phần cứng. Chế độ \nnày được sử dụng để khôi phục lại hệ thống khi bị lỗi ngiêm trọng hoặc khi người \nquản trị mạng bị mất mật mã. Chúng ta chỉ có thể truy cập vào chế độ ROM \nmonitor bằng đường kết nối vật lý trực tiếp vào cổng console trên router. Ngoài ra \nchúng ta không thể truy cập vào chế độ này bằng bất ký cổng nào khác. \n\nKhi router ở chế độ boot ROM, chỉ có một phần chức năng của Cisco IOS là hoạt \nđộng được. Chế độ boot ROM cho phép bạn chép được lên bộ nhớ flash, nên chế \nđộ này thường được sử dụng để thay thế phần mềm Cisco IOS trong flash. Bạn \ndùng lệnh copy tftp flash  để chép phần mềm IOS trên TFTP server vào bộ nhớ \nflash trên router. \n\n \n\nHình 2\n\np từ flash. Tuy \nnhiên, hầu hết các Cisco router đều chép phần mềm IOS lên RAM rồi chạy từ \n\nốn xem hệ thống còn bao \nnhiêu dung lượng bộ nhớ để tải phần mềm Cisco IOS mới thì bạn dùng lệnh show \n\n.1.5a \n\nRouter muốn hoạt động bình thường thì phải chạt được toàn bộ phần mềm IOS \ntrong flash. Ở một số thiết bị, phần mềm IOS được chạy trực tiế\n\nRAM. Một số phần mềm IOS lưu trong flash dưới dạng nén và được giải nén khi \nchép lên RAM. \n\nBạn dùng lệnh show version  để xem các thông tin về phần mềm IOS, trong đó có \nhiển thị giá trị cấu hình của thanh ghi. Còn nếu bạn mu\n\nflash.  \n\n\n\n 44\n\n \n\nHình 2.1.5b \n\n2.2 Bắt đầu với router \n\n2.2.1 Khởi đ ng router   \n\nRouter khởi ếu \n\n\u2022 Kiểm tra phần cứng của router và bảo đảm là chúng hoạt động tốt. \n\n\u2022 Tìm và tải phần mềm Cisco IOS. \n\n\u2022 Tìm và thực thi tập tin cấu hình khởi động hoặc vào chế độ cài đặt nếu \n\n \n\n \n\nộ\n\nđộng bằng cách tải bootstrap, hệ điều hành và tập tin cấu hình. N\nrouter không tìm thấy tập tin cấu hình thí sẽ tự động vào chế độ cài đặt. Khi bạn \nhoàn tất việc cấu hình trong chế độ cài đặt thì tập tin cấu hình đó sẽ được lưu trong \nNVRAM. \n\nĐể cho router bắt đầu hoạt động, quá trình khởi động phần mềm Cisco IOS thực \nhiện 3 công đoạn sau: \n\nkhông tìm thấy tập tin này. \n\n \n\n \n\n \n\n\n\n 45\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nđầu thực hiện khởi động phần mềm. \n\nSau quá trình POST, router sẽ thực hiện các bước sau: \n\n \n\nHình 2.2.1a: Các bước khởi động router \n\nKhi router mới được bật điện lên thì nó thực hiện quá trình tự kiểm tra POST \n(Power on self test). Trong quá trình này, router chạy một trình từ ROM để kiểm \ntra tất cả các thành phần phần cứng trên router, ví dụ như kiểm tra hoạt động của \nCPU, bộ nhớ và các cổng giao tiếp mạng. Sau khi hoàn tất quá trình này, router bắt \n\n\n\n 46\n\n\u2022 Bước 1: Chạy chương trình nạp bootstrap từ ROM. Bootstrap chỉ đơn giản là \nmột tập lệnh để thực hiện kiểm tra phần cứng và khởi động IOS. \n\n\u2022 Bước 2: Tìm IOS. Giá trị khởi động trên thanh ghi cấu hình sẽ quyết định \n\nu hình sẽ cho biết chính xác vị \n\n\u2022 ác bạn \n màn hình console danh sách các thành phần phần cứng và \n\nổng giao tiếp mạng và thiết \nter. \n\nver nào \n\n[0] out saving this config. \n\n[1]  this config. \n\n[2] exit. \n\nviệc tim IOS ở đâu. Nếu giá trị này cho biết là tải IOS từ flash hay từ mạng \nthi các câu lệnh boot system trong tập tin cấ\ntrí và tên của IOS. \n\nBước 3: Tải hệ điều hành đã được tải xuống và bắt đầu hoạt động thì c\nsẽ thấy hiện trên\nphần mềm có trên router. \n\n\u2022 Bước 4: Tập tin cấu hình lưu trong VNRAM được chép lên bộ nhớ chính và \nđược thực thi từng dòng lệnh một. Các câu lệnh cấu hình thực hiện khởi \nđộng quá trình định tuyến, đặt địa chỉ cho các c\nlập nhiều đặc tính hoạt động khác cho rou\n\n\u2022 Bước 5: Nếu không tìm thấy tập tin cấu hình trong VNRAM thì hệ điều \nhành sẽ đi tìm TFTP server. Nếu cũng không tìm thấy một TFTP ser\nthì chế độ cài đặt sẽ được khởi động. \n\nTrong chế độ cài đặt, các bạn không thể cấu hình cho các giao thức phức tạp của \nrouter. Mục đích của chế độ cài đặt chỉ là cho phép người quản trị mạng cài đặt \nmột cấu hình tối thiểu cho router khi không thể tìm được tập tin cấu hình từ những \nnguồn khác. \n\nTrong chế độ cài đặt, câu trả lời mặc định được đặt trong dấu ngoặc vuông [] ở sau \nmỗi câu hỏi. Bạn có thể nhấn phím Ctrl-C bất kỳ lúc nào để kết thúc quá trình cài \nđặt. Khi đó tất cả các cổng giao tiếp mạng trên router sẽ đóng lại.  \n\nKhi bạn hoàn tất cấu hình trong chế độ cài đặt, bạn sẽ gặp các dòng thông báo như \nsau: \n\n Go to the IOS command promt with\n\n Return back to the setup without saving\n\n Save this configuration to nvram and \n\n\n\n 47\n\nEn  ter your selection [2]: \n\nHình 2.2.1b: Chế độ cài đặt của router \n\n \n\n \n\n2.2.1.  Đèn LED báo hiệu trên router \n\n \n\n \n\nHình 2.2.2 \n\nủ dụng đèn LED để báo hiệu các trạng thái hoạt động của router. Các \nloại đèn LED này sẽ khác nhau tuỳ theo các loại router khác nhau. \n\nsẽ cho biết trạng thái hoạt động của các \n\nCisco router s\n\nCác đèn LED của các cổng trên router \ncổng. Nếu đen LED của một cổng nào đó bị tắt trong khi cổng đó đang hoạt động \nvà được kết nối đúng thì chứng tỏ là đã có sự cố đối với cổng đó. Nếu một cổng \nhoạt động liên tuc thì đèn LED của cổng đó sáng liên tục. Còn đèn LED OK ở bên \nphải cổng AUX sẽ bật sáng sau khi router hoạt động tốt. \n\n\n\n 48\n\n   2.23. Khảo sát quá trình khởi động của router \n\n \n\n \n\n \n\nHình 2.2.3a: Thông tin hiển thị trong quá trình khởi động router \n\nVí dụ ở hình 2.2.3a cho thấy nội dung các thông điệp được hiển thị trên màn hình \nconsole trong suốt quá trình khởi động của router. Các thông tin này sẽ khác nhau \ntuỳ theo các loại cổng có trên router và tuỳ theo từng phiên bản Cisco IOS. Do đó \nhình 2.2.3a chỉ là một ví dụ để tham khảo chứ không pản ánh chính xác toàn bộ \nnhững gì được hiện thị. \n\n \n\n\n\n 49\n\n \n\n \n\nco IOS tải từ \nbộ nhớ flash và tập tin cấu hình tải từ NVRAM. \n\nTrong hình 2.2.3b, câu \u201cVNRAM invalid, possibly due to write erase\u201d cho biết \nrouter này chưa được cấu hình hoặc là NVRAM đã bị xoá. Thông thường khi \nrouter đã được cấu hình thì tập tin cấu hình được lưu trong NVRAM, sau đó ta \nphải cấu hình thanh ghi để router sử dụng tập tin cấu hình này. Giá trị mặc định \ncủa thanh ghi cấu hình là 0x2102, khi đó router sẽ khởi động với Cis\n\n\n\n 50\n\n \n\nHình 2.2.3c: Thông tin hiển thị trong quá trình khởi động router \n\nDự iên bản của \nph sử dụng trên router. Ngoài ra bạn cũng xác \nđịn ter, bộ xử lý là loại gì, cung lượng của bộ nhớ và một \nsố các thông tin khác của router như: \n\nó chạy chương trình mô phỏng HyperTerminal. \nộ chuyển đổi RJ45-\n\nDB9. \n\na vào thông tin như hình 2n2n3c, chúng ta có thể xác định được ph\nần mềm boottrap và IOS đang được \nh được phiên bản của rou\n\n\u2022 Số lượng các cổng giao tiếp. \n\n\u2022 Các loại cổng giao tiếp. \n\n\u2022 Dung lượng NVRAM. \n\n\u2022 Dung lượng bộ nhớ flash. \n\n2   Thiết lập phiên kết nối bằng HyperTerminal \n\nTất cả các Cisco router đều có cổng console nối tiếp bất đồng bộ TIA/EIA-232 \n(RJ45). Chúng ta cần phải có cáp và bộ chuyển đổi để kết nối từ thiết bị đầu cuối \nconsole vào cổng console trên router. Thiết bị đầu cuối console có thể là một thiết \nbị đầu cuối ASCII hoặc là một PC c\nĐể kết nối PC có cổng console chúng ta dùng cáp rollover và b\n\n\n\n 51\n\nThông số mặc định của cổng console là: 9000 baud, 8 data bits, 1 stop bit, no flow \ncontrol. Cổng console không có hỗ trợ điều khiển luồng băng phần cứng. Sau đây \nlà bước thực hiện để kết nối một thiết bị đầu cuối vào cổng console trên router: \n\n router bằng cáp rollover và \n5-DB9 hoặc RJ\n\nị đầu cuối hoặc c\ncác thông số sau: 96000 baud, 8 data bits, 1 stop bit, no flow control. \n\nter \n\ntruy cập ng \nđường truy \n\ni bạn mới có thể nhập các câu lệnh cho router. \n\n router có 2 mức truy cập: \n\nạn sẽ gặp dâu nhắc của chế độ EXEC \np lệnh bạn phải chuyển vào chế độ EXEC \nenable. Ở dấu nhắc password: bạn phải \n\n router đã được cấu hình bởi \n enable secret sẽ được áp dụng. Sau khi \n nhắc \u201c#\u201d cho biết là bạn đang ở chế độ \n\nừ chế độ này bạn mới có thể truy cập vào chế độ cấu hình toàn \n\n\u2022 Kết nối thiết bị đầu cuối vào cổng console trên\nbộ chuyển đổi RJ4 45-DB25. \n\n\u2022 Cấu hình thiết b ấu hình phần mềm mô phỏng trên PC với \n\n   Truy cập vào rou\n\nĐể cấu hình router bạn ph\nu cuối hoặc bằng \n\nải vào giao diện người dùng của router bằ\nruy cập được vào router thiết bị đầ cập từ xa. Sau khi t\n\nth\n\nVì lý do bảo mật nên\n\n\u2022 Mức EXEC người dùng: chỉ có một số câu lệnh dùng để xem trạng thái của \nrouter. Ở mức này, bạn không thể thay đổi được cấu hình của router. \n\n\u2022 Mức EXEC đặc quyền: bao gồm tất cả các câu lệnh để cấu hình router. \n\nNgay sau khi truy cập được vào router b\ntậngười dùng. Để sử dụng được toàn bộ \n\nđặc quyền. Ở dấu nhắc \u201c>\u201d bạn gõ lệnh \nnhập mật mã đúng với mật mã đã được cấu hình cho router trước đó bằng lệnh \nenable secret hoặc enable password. Nếu mật mã của\ncả 2 lệnh trên thì mật mã của câu lệnh\n\ntrên bạn sẽ gặp dấuhoàn tất các bước \nEXEC đặc quyền. T\ncục rồi sau đó là các chế độ cấu hình riêng biệt hơn như: \n\n\u2022 Chế độ cấu hình cổng giao tiếp. \n\n\u2022 Chế độ cấu hình cổng giao tiếp con. \n\n\u2022 Chế độ cấu hình đường truy cập.  \n\n\u2022 Chế độ cấu hình router. \n\n\n\n 52\n\n\u2022 Chế độ cấu hình route-map. \n\nn \n\n \n\n \n\n \n\n \n\n \n\nTừ chế độ EXEC đặc quyền, bạn gõ disable hoặc exit để trở về chế độ EXEC \nngười dùng. Để trở về chế độ EXEC đặc quyền từ chế độ cấu hình toàn cục, bạ\ndùng lệnh exit hoặc Ctrl-Z. Lệnh Ctrl-Z có thể sử dùng để trở về ngay chế độ \nEXEC đặc quyền từ bất kỳ chế độ cấu hình riêng biệt nào. \n\n \n\nHình 2.2.5a \n\nợ giúp trong router CLI \n\nệnh \nở cuối màn hình \n\ncho bi ẫn còn tiếp. Để xem trang tiếp theo, bạn nhấn nhanh \n\n \n\n2.2.6. Phím tr\n\nKhi bạn gõ dấu chấm hỏi (?) ở dấu nhắc thì router sẽ hiển thị danh sách các l\ntương ứng với chế độ cấu hình mà bạn đang ở. Chữ \u201c--More--\u201d \n\nết là phần hiển thị v\n\n\n\n 53\n\nSpa  thị tiếp từng dòng một thì bạn nhấn phím Enter \nhoặc Return. Bạn có thể nhấn từng dòng một thì bạn nhấn phím bất kỳ nào khác để \nqu t\n\ncebar. Còn nếu bạn muốn hiển\n\nay rở về dấu nhắc. \n\n \n\nHình 2.2.6a: Danh sách l ụng ở chế độ EXEC người dung ệnh sử d\n\n \n\nĐể chuyển vào chế độ EXEC đặc quyền bạn gõ enable hoặc gõ tắt là ena cũng \nđược. Nếu mật mã đã được cài đặt vào cho router thì router sẽ yêu cầu bạn nhập \nmật mã. Sau khi bạn đã vào được chế độ này rồi thì bạn gõ dấu chấm hỏi (?), bạn \n\n\n\n 54\n\nsẽ thấy là danh sách các câu lệnhd  EXEC đặc quyền nhiều hơn hẳn \ndanh sách các câu lệnh mà bạ ười dùng. Tuy nhiên các \ntập lệnh này sẽ khác nhau tuỳ r và tuỳ theo từng phiên bản \n\no IOS. \n\nó bạn nhập lại đầy đủ câu lệnh. \n\nệnh đã bị nhập sai. Vị trí của dấu (^) \n mà câu lệnh từ đầu cho tới vị trí mà dấu (^) chỉ sai rồi bạn \n\nỏi (?) để thêm cú pháp đúng tiếp theo của câu lệnh. \n\nâu lệnh theo đúng cú pháp rồi nhấn phím Enter hoặc \n\n viết câu lệnh \n\n độ hỗ trợ soạn thảo \như hình 2.2.7a để di chuyển con trỏ \n\ni bạn cần phải chỉnh sửa câu lệnh đó. Trong các \n\nđộ ếu chế độ này lèn ảnh hưởng khi bạn biết các script thị bạn có \nthể tắt bằng lệnh terminal no editing trong chế độ EXEC đặc quyền. \n\nung chó chế độ\nn thấy trong chế độ EXEC ng\n theo cấu hình của route\n\nphần mềm Cisc\n\nBây giờ giả sử bạn muốn cài đặt đồng hồ cho router nhưng bạn lai không biết phải \ndùng lệnh nào thi khi đó chức năng trợ giúp của router sẽ giúp bạn tìm được câu \nlênh đúng. Bạn thực hiện theo các bước sau: \n\n1. Dùng dấu chấm hỏi để tìm câu lệnh cài đặt đồng hồ. Trong danh sách các \ncâu lệnh được hiển thị bạn sẽ tìm được lệnh clock. \n\n2. Kiểm tra cú pháp câu lệnh để khai báo giờ. \n\n3. Bạn nhập giờ, phút, giây theo đúng cú pháp câu lệnh. Bạn sẽ gặp câu thông \nbáo là câu lệnh chưa hoàn tất như hình 2.2.6b. \n\n4.  Bạn nhấn Ctrl-P hoặc phím mũi tên (↑) để lại lệnh vừa mới nhập. Ở cuối \ncâu lệnh đó bạn thêm một khoảng trắng và dấu chấm hỏi (?) để xem phần kế \ntiếp của câu lệnh. Sau đ\n\n5. Nếu bạn gặp dấu (^) thì có nghĩa là câu l\nsữ cho biết vị trí\nsẽ nhập thêm dấu chấm h\n\n6. Bạn nhập lại đầy đủ c\nReturn để thực thi câu lệnh. \n\n2.2.7. Mở rộng thêm về cách\n\nTrong giao diện người dùng của router, router có thể có chế\ncâu lệnh. Bạn có thể sử dụng các tổ hợp phím n\ntrên dòng lệnh mà bạn đang viết kh\nphiên bản phần mêm hiện nay, chế độ hỗ trợ soạn thảo câu lệnh là hoàn toàn tự \n\nng. Tuy nhiên n\n\nCommand                                    Description \nCtrl-A Moves to the beginning of the command line \n\n\n\n 55\n\nEsc-B Moves back one word \nCtrl-B (or right arrow) Moves back one character \nCtrl-E Moves to the end of the command line \nCtrl-F (or left arrow) Moves forward one character \nEsc-F Moves forward one word \n  \n\nhi soạn thảo câu lệnh, màn hình sẽ cuộn ngang khi câu lệnh dài quá một hang. \nỏ đến hết lề phải thì dòng lệnh sẽ dịch sang trái 10 khoảng trắng. Khi đó \n\n0 ký tự đầu tiên của câu lệnh sẽ không nhìn thấy được trên màn hình nữa. Bạn có \nthể cuộn lại để xem bằng cách nhấn Ctrl-B hoặc nhấn phím mũi tên (←) cho tới \nkhi màn hình cuộn tới đầu câu lệnh. Hoặc bạn có thể nhấn Ctrl-A để chuyển ngay \nvề  đầu dòng lệnh. \n\nTrên hình 2.2.7b là ví dụ khi một câu lệnh dài quá một hành. Dấu ($) cho biết là \ncâu lệnh đã được dịch sang trái.  \n\nPhím Ctrl-Z được sử dụng để quay trở về chế độ EXEC đặc quyền từ bất kỳ chế \nđộ cấu hình riêng biệt nào. \n\nK\nKhi con tr\n1\n\n \n\n \n\n \n\nHình 2.2.7b \n\n2.2.8. Gọi lại các lệnh đã sử dụng \n\n\n\n 56\n\nKhi cấu hình router, router co lưu lại một số các lệnh bạn đã sử dụng. Điều này đặc \nại các câu lệnh dài và phức tạp. Với cơ chế này bạn \n\nhthước vùng bộ đệm để lưu các câu lệnh đã sử dụng. \n\nMặ đ ệnh trong bộ đệm. Bạn có thể thay đổi số \nlượ  lệnh terminal history size hoặc history \nsiz thể lưu lại được. \n\nNế a mới sử dụng gần nhất thì bạn nhấn Ctrl-P hoặc \nphí ấn thì mỗi lần nhấn như vậy bạn sẽ gọi lại \n\nàn tất câu lệnh cho bạn. Khi bạn dùng \nphím Tab mà router hiển thị được đủ câu lệnh thì có nghĩa là router đã nhận biết \n\nn nhập. \n\ny câu lệnh trước đó rồi dán hoặc chèn vào câu lệnh \n\nbiệt có ích khi bạn muốn lặp l\ncó thể thực hiện các việc sau: \n\n\u2022 Cài đặt kíc\n\u2022 Gọi lại các câu lệnh đã sử dụng. \n\u2022 Tắt chức năng này đi. \n\nc ịnh là router sẽ lưu lại 10 câu l\nng câu lệnh mà router lưu lại bằng\ne. Tối đa là 255 câu lệnh có \n\nu bạn muốn gọi lại câu lệnh vừ\nm mũi tên (↑). Nếu bạn tiếp tục nh\n\ntuần tự các câu lệnh trước đó nữa. Nếu bạn muốn gọi lui lạ một câu lệnh sau đó thì \nbạn nhấn Ctrl-N hoặc nhấn phím mũi tên (↓). Tương tự, nếu bạn tiếp tục nhấn như \nvậy thi mỗi lần nhấn bạn sẽ gọi lại một lệnh đó. \n\nKhi gõ lệnh, bạn chỉ cần gõ các ký tự đủ để router phân biệt với mọi câu kệnh khác \nrồi nhấn phím Tab thì router sẽ tự động ho\n\nđược câu lệnh mà bạn muố\n\nNgoài ra, hầu hết các router đều có them chức năng cho bạn đánh dấu khối và \ncopy. Nhờ đó bạn có thể cop\nhiện tại. \n\nLệnh                                                      Giải thích lệnh \nCtrl-P or up arrow key Gọi lại lệnh ngay trước đó \nCtrl-N or down arrow key Gọi lại lệnh ngay sau đó \nRouter>show history Xem các lệnh đã sử dụng còn lưu trong bộ \n\nđệm \nRouter>Terminal history size \nnumber-of-lines \n\nCài đặt dung lượng bộ đệm đã lưu các lệnh \nđã sử dụng \n\nRouter>terminal no editing Tắt chức năng soạn thảo lệnh nâng cao \nRouter>terminal editing  Mở chức năng soạn thảo lệnh nâng cao \n<Tab> Hoàn tất câu lệnh \n \n\n\n\n 57\n\n   Xử lý lỗi câu lệnh \n\nLỗi câu lệnh thường là do bạn gõ sai. Sau khi bạn gõ một câu lệnh bị sai thì bạn sẽ \n\n dụng chức năng trợ giúp của hệ thống bạn sẽ tìm ra và chỉnh sửa lại lỗi \n\ni cho biết câu lệnh bị sai ở số 93. Bạn gõ lại câu lệnh từ \n\nruary 1993  \n\nh rồi nhấn phím Enter mà câu lệnh đó bị sai thì bạn có \n vừa mới nhập. Sau đó bạn dùng các \n\nphím mũi tên sang phải, sang trái di chuyển con trỏ tới vị trí bị sai để sửa lại. Nếu \n thể dùng phím <backspace>. \n\n tin về giá trị thanh ghi cấu hình. \n\ng tin được hiển thị do lệnh show \nversion bao gồm: \n\n\u2022 Phiên bản IOS và một ít thông tin đặc trưng. \n\nhương thức khởi động router lần gần đây nhất. \n \n\n\u2022 Phiên bản phần cứng của router. \n\ngặp dấu báo lỗi (^). Dấu báo lỗi (^) đặt ở vị trí mà câu lệnh bắt đầu bị sai. Dựa vào \nđó và vận\ncú pháp của câu lệnh. \n\nRouter#clock set 13:32:00 February 93 \n% Invalid input detected at \u201c^\u201d marker \n\nTrong ví dụ trên, dấu báo lỗ\nđầu tới vị trí bị lỗi rồi thêm dấu chấm hỏi (?) như sau: \n\nRouter # clock set 13:32:00 February ? \n<1993-2035>Year \n\nSau đó bạn nhập lại câu lệnh với số năm đúng như cú pháp ở trên: \n\nRouter#clock set 13:32:00 Feb\n\nSau khi bạn gõ xong câu lện\nthể dùng phím mũi tên (↑) để gọi câu lệnh\n\ncần xoá các ký tự thì bạn có\n\nLệnh show version  \n\nLệnh show version dùng để hiển thị các thông tin về phiên bản phần mềm Cisco \nIOS đang chạy trên router, trong đó có cả thông\n\nTrong hình dưới các bạn sẽ thấy nhung thôn\n\n\u2022 Phiên bản phần mềm Bootstrap ROM. \n\u2022 Phiên bản phần mềm Boot ROM. \n\u2022 Thời gian hoạt động của router. \n\u2022 P\n\u2022 Tên và vị trí lưu phần mềm hệ điều hành.\n\n\n\n 58\n\n\u2022 Giá trị cài đặt của thanh ghi cấu hình. \n\n \n\nChúng ta thường sử dụng lệnh show version để xác định phiên bản của phần mềm \nIOS và xem giá trị thanh ghi cài đặt cho qua trình khởi động của router. \n\nTỔNG KẾT \n\nSau khi kết thúc chương này, chúng ta nắm được các ý như sau: \n\n\u2022 Mục đích của IOS. \n\n\u2022 Hoạt động cơ bản của IOS. \n\n\u2022 Xác định các đặc tính khác nhau của các phiên bản IOS khác nhau. \n\n\n\n 59\n\n\u2022 Các phương pháp thiết lập phiên kết nối CLI vào router. \n\n\u2022 Sự khác nhau giữa 2 chế độ EXEC người dùng và EXEC đặc quyền \n\n\u2022 Thiết lập phiên kết nối vào router bằng HyperTerminal. \n\n\u2022 Truy cập vào router. \n\n\u2022 Sử dụng chế độ trợ giúp của router trong giao diện dòng lệnh. \n\n\u2022 Sử dụng cơ chế hỗ trợ soạn thảo câu lệnh. \n\n\u2022 Gọi lại các câu lệnh đã sử dụng. \n\n\u2022 Xử lý lỗi câu lệnh. \n\n\u2022 Sử dụng lệnh show version. \n\n\n\n 60\n\nCHƯƠNG 3 \n\nCẤU HÌNH ROUTER \n\nGIỚI THIỆU \n\nr thực hiện nhiều chức năng mạng phức tạp là một \n\nành nhiều để làm quen và nắm vững \nđượ ế độ cấu hình của router thì công việc cấu \nhìn n hơn rất nhiều. Trong chương này sẽ giới \nthi router và một số lệnh cấu hình đơn giản. \n\nKỹ\ntrọng có cung cấp một số công cụ cho người \nquả ột số thông tin cần thiết vào tập tin cấu hình. Cũng giống \n\n\u2022 Thực hiện một số thay đổi trên router. \n\nCấu hình router để cho route\ncông việc đầy thử thách. Tuy nhiên bước bắt đầu cấu hình router thì không khó \nlắm. Nếu ngay từ bước này bạn cố gắng thực h\n\nc các bước di chuyển giữa các ch\nh phức tạp về sau sẽ trở nên đơn giả\nệu về các chế độ cấu hình cơ bản của \n\n năng đọc và hiểu một cách rõ ràng các tập tin cấu hình là một ký năng rất quan \ncủa người quản trị mạng. Cisco IOS \n\nn trị mạng để thêm m\nnhư những người lập trình phải có tài liệu của từng bước lập trình thì người quản \ntrị mạng cũng cần được cung cấp thông tin càng nhiều càng tốt khi mà hệ thống \nmạng do người khác quản trị. \n\nKhi hoàn tất chương này các bạn có thể: \n\n\u2022 Đặt tên cho router. \n\u2022 Cài đặt mật mã cho router. \n\u2022 Khảo sát các lệnh show. \n\u2022 Cấu hình cổng Ethernet trên router. \n\n\u2022 Lưu các thay đổi đó lại. \n\u2022 Cấu hình câu chú thích cho các cổng giao tiếp trên router. \n\u2022 Cấu hình thông điệp hàng ngày cho router. \n\u2022 Cấu hình bảng host cho router. \n\u2022 Hiểu được tầm quan trọng của việc ghi nhận lại và lưu dự phòng cấu hình của \n\nrouter.\n\n\n\n 61\n\n \n \n3.1. Cấu hình router \n\n3.1.1. Chế độ giao tiếp dòng lệnh CLI \n\n \n\n \n\n \n\n \n\nHình 3.1.1 \n\n \n\nTất cả các câu lệnh làm thay đổi cấu hình router đều xuất phát từ chế cầu hình toàn \nc ỳ theo ý bạn muốn thay đổi thay đổi phần cấu hình đặc biệt nào của router \nthì bạn chuyển vào chế độ chuyên biệt tương ứng. Các chế độ cấu hình chuyên biệt \n\nế độ con của chế độ cấu hình toàn cục. \n\n chế độ cấu hình toàn cục là những câu lệnh có tác \nđộ\n\nục. Tu\n\nnày đều là ch\n\nCác câu lệnh được sử dụng trong\nđộng lên toàn bộ hệ thống. Bạn sử dụng câu lệnh sau để di chuyển vào chế  cấu \nhình toàn cục: \n\n\n\n 62\n\nChú ý: Sự thay đổi của dấu nhắc cho biết bạn đang ở chế độ cấu hình toàn cục \n\nRouter # configure terminal \n\nRouter(config)# \n\nChế ừ chế độ này bạn có thể \nchu\n\ntiếp. \n\nKhi bạn chuyển vào chế độ cấu hình chuyên biệt nào thì dấu nhắc sẽ thay đổi \ntương ứng. Các câu lệnh trong đó chỉ có tác động đối với các cổng hay các tiến \ntrình nào liên quan đến chế độ cấu hình đó thôi. \n\nBạn dùng lệnh exit để trở về chế độ cấu hình toàn cục hoặc bạn dùng phím Ctrl-Z \nđể quay về thẳng chế độ EXEC đặc quyền. \n\n3.1.2. Đặt tên cho router \n\nCông việc đầu tiên khi cấu hình router là đặt tên cho router. Trong chế độ cấu hình \ntoàn cục, bạn dùng lệnh sau: \n\nRouter(config)#hostname Tokyo \n\nTokyo (config)# \n\nNgay sau khi bạn nhấn phím Enter để thực thi câu lệnh bạn sẽ thấy dấu nhắc đổi từ \nn mặc định (Router) sang tên mà bạn vừa mới đặt (Tokyo). \n\nật mã cho router \n\nệc truy cập vào router. Thông thường ta luôn \nđặt mậ n được sử \ndụng để kiểm soát sự truy cập vào chế độ EXEC đặc quyền trên router. Khi đó, chỉ \n\n độ cấu hình toàn cục là chế độ cấu hình chính. T\nyển vào các chế độ chuyên biệt như: \n\n\u2022 Chế độ cấu hình cổng giao \n\u2022 Chế độ cấu hình đường truy cập. \n\u2022 Chế độ cấu hình router. \n\u2022 Chế độ cấu hình cổng con. \n\u2022 Chế độ cấu hình bộ điều khiển. \n\ntê\n\n3.1.3. Đặt m\n\nMật mã được sử dụng để hạn chế vi\nt mã cho đường vty và console trên router. Ngoài ra mật mã cò\n\n\n\n 63\n\nnhững người nào được phép mới có thể thực hiện việc thay đổi tập tin cấu hình \ntrên router. \n\nSau đây là các lệnh mà bạn cền sử dụng để thực hiện việc đặt mật mã cho đường \n\nrd <password> \n\nho một đường để dự \n\nMật mã enable và enable secret  được sử ụng để hạn chế việc truy cập vào chế \nđộ EXEC đặc quyền. Mật mã enabl  dụng khi chúng ta cài đặt mật mã \nenable secret vì mật mã này được mã hoá còn mật mã enable thì không. Sau đây \n\n <password> \n\nị rõ ràng khi sử \ndụng lệnh show running-config hoặc show startup-config. Để tránh điều này bạn \n\nấu hình của \n\nconsole:  \n\nRouter(config)#line console 0 \n\nRouter(config-line)#passwo\n\nRouter(config-line)#login \n\nChúng ta cũng cần đặt mật mã cho một hoặc nhièu đương vty để kiểm soát các user \ntruy nhập từ xa vào router và Telnet. Thông thường Cisco router có 5 đường vty \nvới thứ tự từ 0 đến 4. Chúng ta thường sử dụng một mật mã cho tất cả các đường \nvty, nhưng đôi khi chúng ta nên đặt thêm mật mã riêng c\nphòng khi cả 4 đường kia đều đang được sủ dụng. Sau đây là các lệnh cần sử dụng \nđể đặt mật mã cho đường vty: \n\nRouter(config)#line vty 0 4 \n\nRouter(config-line)#password <password> \n\nRouter(config-line)#login \n\n d\ne chỉ được sử\n\nlà các lệnh dùng để đặt mật mã enable secret: \n\nRouter(config)#enable password <password> \n\nRouter(config)#enable secret\n\nĐôi khi bạn sẽ thấy là rất không an toàn khi mật mã được hiển th\n\nnên dùng lệnh sau để mã hoá tất cả các mật mã hiển thị trên tập tin c\nrouter: \n\nRouter(config)#service password-encryption \n\n\n\n 64\n\nLệnh service password-encryption sẽ áp dụng một cơ chế mã hoá đơn giản lên tất \ncác mật mã chưa được mcả ã hoá. Riêng mật má enable secret thì sử dụng một \n\nthuật toán mã hoá rất mạnh là MD5. \n\n \n\nHình 3.1.3 \n\n3.1.4. Kiểm tra băng các lệnh show \n\now được dùng để kiểm tra nội dung các tập tin trên \n\ng \n\nChúng ta có rất nhiều lệnh sh\nrouter và để tìm ra sự cố. Trong cả hai chế độ EXEC đặc quyền và EXEC người \ndùng, khi bạn gõ show? Thì bạn sẽ xem được danh sách các lệnh show. Đương \nnhiên là số lệnh show dùng được trong chế độ EXEC đặc quyền sẽ nhiều hơn tron\nchế độ EXEC người dùng. \n\n   \n\n \n\n\n\n 65\n\n   \n\n \n\nHình 3.1.4 \n\n\u2022 Show interface - hiển thị trạng thái của tất cả các cổng giao tiếp trên router. \nĐể xem trạng thái của một cổng nào đó thì bạn thêm tên và số thứ tự của \ncổng đó sau lệnh show interface. Ví dụ như: \nRouter#show interface serial 0/1 \n\n\n\n 66\n\n\u2022 Show controllers serial - hiển thị các thông tin chuyên biệt về phần cứng của \n\nt trên router. \nhỉ tương ứng. \n\nang kết nối vảo router. \n\u2022 Show history - hiển thị danh sách các câu lệnh vừa mới được sử dụng. \n\nn bộ nhớ flash và tập tin IOS chứa trong đó. \n\u2022 Show version - hiển thị thông tin về router và IOS đang chạy trên RAM. \n\nờng console hoặc vty. Sau đây là các \n\nask. \nc độ clock nếu đầu cáp cắm vào cổng serial là DCE. Nếu đầu cáp là \n\nRo\nRouter(config)#ip address <ip address> <netmask> \n\nCổ  thời gian thực hiện thông tin \nliên lạc. Trong hầu hết các trường hợp, thiết bị DCE, ví dụ như CSU, sẽ là thiết bị \n\ncác cổng serial. \n đặ\u2022 Show clock - hiển thị đồng hồ được cài\n\n\u2022 Show hosts - hiển thị danh sách tên và địa c\n\u2022 Show users - hiển thị tất cả các user đ\n\n\u2022 Show flash \u2013 hiển thị thông ti\n\n\u2022 Show ARP - hiển thị bảng ARP trên router. \n\u2022 Show protocol - hiển thị trạng thái toàn cục và trạng thái của các cổng giao \n\ntiếp đã được cấu hình giao thức lớp 3. \n\u2022 Show startup-configuration - hiển thị tập tin cấu hình đăng chạy trên RAM.  \n\n \n3.1.5. Cấu hình cổng serial \n\nChúng ta có thẻ cấuhình cổng serial bẳng đư\nbước cần thực  hiện khi câu hình cỏng serial: \n\n1. Vào chế độ cấu hình toàn cục. \n2. Vào chế độ cấu hình cổng serial. \n3. Khai báo địa chỉ và subnet m\n4. Đặt tố\n\nDTE thì chúng ta có thể bỏ qua này. \n5. Khởi động serial. \n\nMỗi một cổng serial đều phải có một địa chỉ IP và subnet mask để chúng có thể \nđịnh tuyến các gói IP. Để cấu hình địa chỉ IP chúng ta dùng lệnh sau: \n\nuter(config)#interface serial 0/0 \n\nng serial cần phải có tín hiệu clock để điều khiển\n\ncung cấp tín hiệu clock. Mặc định thì Cisco router lad thiết bị DTE nhưng chúng ta \ncó thể cấu hình chúng thành thiết bị DCE. \n\n\n\n 67\n\nTrong môi trường làm lab thì các đường liên kết serial được kết nối trực tiếp với \n\n00, 38400, \n000, 800000, 1000000, 1300000, \n\nc tuỳ \n\no tiếp trên router đều đóng. Nếu bạn muốn mở hay khởi \nn. Nếu bạn muốn đóng cổng \n\nlại để bảo trì hoặc xử lý sự cố thì bạn dùng lệnh shutdown. \n\nTrong môi trường làm lab, tốc độ clock thường được sử dụng là 56000. Sau đây là \ncác lệnh được sử dụng để cài đặt tốc độ clock và khởi động cổng serial: \n\nRouter(config)#interface serial 0/0 \n\nRouter(config-if)#clock rate 56000 \n\nRouter(config-if)#no shutdown \n\n3.1.6. Thực hiện việc thêm bớt, dịch chuyển và thay đổi tập tin cấu hình \n\nNếu bạn cần chỉnh sửa tập tin cấu hình thì bạn phải di chuyển vào đùng chế độ cấu \nhình và thực hiện cần thiết. Ví dụ:nếu bạn cần mở một cổng nào đó trên router thì \ntrước hết bạn phải vào chế độ cấu hình toàn cục, sau đó vào chế độ cấ  của cổng \nđó rồi dùng lệnh no shutdown. \n\n có những có những chi tiết không đúng thì bạn có thể chỉnh sửa lại bằng \n\n\u2022 \n\u2022 \n\nnhau. Do đó phải có một đầu là DCE để cấp tín hiệu clock. Bạn dùng lệnh \nclockrate để cài đặt tốc độ clock. Sau đây là các tốc độ clock mà bạn có thể đặt \ncho router (đơn vị của tốc độ clock là bit/s): 1200, 2400, 9600, 192\n56000, 64000, 72000, 125000, 148000, 500\n2000000, 4000000. Tuy nhiên sẽ có một số tốc độ bạn không sử dụng đượ\ntheo khả năng vật lý của từng cổng serial. \n\nMặc định thì các cổng gia\nđộng các cổng này thì bạn phải dùng lệnh no shutdow\n\nu\n\nĐể kiểm tra những gì mà bạn vừa mới thay đổi, bạn dùng lệnh show running-\nconfig. Lệnh này sẽ hiển thị nội dung của tập tin cấu hình hiện tại. Nếu kết quả \nhiển thị\ncách thực hiện một hoặc nhiều cách sau: \n\n\u2022 Dùng dạng no của các lệnh cấu hình. \n\u2022 Khởi động lại router với tập tin cấu hình nguyên thuỷ trong NVRAM. \n\nChép tập tin cấu hình dự phòng từ TFTP server. \nXoá tập tin cấu hình khởi động bằng lệnh erase startup-config,sau đó khởi \nđộng lại router và vào chế độ cài đặt. \n\n\n\n 68\n\nĐể lư\nNVRA\n\nRou\n\nu tập tin, cấu hình hiện tại thành tập tin cấu hình khởi động lưu trong \nM, bạn dùng lệnh như sau: \n\nter#copy running-config startup-config \n\n \n\nHình 3.1.6. \n\n3.1.7. Cấu hình cổng Ethernet \n\nTương tự như cổng serial, chúng ta có thể cấu hình cổng Ethernet bằng đường \n\nMỗ có một địa chỉ IP và subnet mask để có thể thực \nhiệ ng đó. \n\nSau â  hình Ethernet: \n\nh cổng Ethernet. \n\u2022 Khai báo địa chỉ và subnet mask. \n\nernet. \n\nMă . Do đó, bạn phải dùng lệnh no \nshu ng. Nếu bạn cần đóng cổng lại để bảo trì hay xử \nlý sự n. \n\nconsole hoặc vty. \n\ni cổng Ethernet cũng cần phải \nn định tuyến các gói IP qua cổ\n\n đ y là các bước thực hiện cấu\n\n\u2022 Vào chế độ cấu hình toàn cục. \n\u2022 Vào chế độ cấu hìn\n\n\u2022 Khởi động cổng Eth\n\nc định là các cổng trên router đều đóng\ntdown để mở hay khởi động cổ\n cố thì bạn dùng lệnh shutdow\n\n\n\n 69\n\n \n\n \n\n \n\nHình 3.1.7 \n\n3.2. oàn chỉnh cấu hình router \n.2.1. Tầm quan trọng của việc chuẩn hoá tập tin cấu hình \n\nTrong một tổ chức việc phát các quy định dành cho các tập tin cấu hình là rất cần \nthiết. Từ đó ta có thể kiểm soát được các tập tin nào càn bảo trì, lưu các tập tin ở \nđâu và như thế nào. \n\nCác quy định này có thể là những quy định được ứng dụng rộng rái hoặc cũng có \nthể ch có giá trị trong một phạm vi nào đó. Nếu không có một quy định chung cho \ntổ chức của mình thì hệ thống mạng của bạn sẽ trở nên lộn xộn và không đảm bảo \nđược hoạt động thông suốt. \n\n3.2.2. Câu chú thích cho các cổng giao tiếp \n\nTrên các cổng giao tiếp bạn nên ghi chú lại một số thông tin quan trọng, ví dụ như \nchỉ số mạch mà cổng này kết nối vào, hay thông tin vào router khác, về phân đoạn \nmạng mà cổng này kết nối đến. Dựa vào các câu chú thích này, người quản trị \nmạng có thể biết được là cổng giao tiếp này kết nối vào đâu. \n\nH\n3\n\nỉ \n\n\n\n 70\n\nCâu chú thích chỉ đơn giản là ghi ch c cổng giao tiếp, ngoài ra nó \nhoàn toàn khôn  câu chú \n\nđịnh dạng chung và mỗi cổng giao tiếp có một câu chú thích riêng. \núc mạng và quy ước chung, bạn có thể quyết định là ghi chú những \n\nú thêm cho cá\ng có tác động gì đối với hoạt động của router. Bẹn nên viết\n\nthích theo một \nTuỳ theo cấu tr\nthông tin nào liên quan đến cổng giao tiếp để giúp cho tập tin cấu hình được rõ \nràng hơn, giúp cho việc xác định sự cố được nhanh hơn. \n\n \n\nHình 3.2.2 \n\n3.2.3. Cấu hình chú thích cho các cổng giao tiếp \n\nTrư  c ục. Rồi từ chế độ cấu hình toàn cục \nbạn ại đây bạn gõ lệnh description và \ncâu\n\nSau đâ c để cấu hình câu chú thích cho cổng giao tiếp: \n\n1. c bằng lệnh configure terminal. \n2.  giao tiếp (ví dụ là cổng Ethernet 0): interface \n\n3.  là câu chú thích. \n4.  trở về chế độ EXEC đăc quyền bằng \n\n L g lệnh copy running-config startup-\n\n dụ về cách viết câu chú thích: \n\nớc tiên bạn phải vào hế độ cấu hình toàn c\n chuyển vào chế độ cấu hình cổng giao tiếp. T\n chú thích mà bạn muốn. \n\ny là các bướ\n\nVào chế độ cấu hình toàn cụ\nVào chế độ cấu hình cổng\nEthernet 0. \nNhập lệnh description và theo sau\nThoát khỏi chế độ cấu hình giao tiếp để\ncách nhấn phím Ctrl-Z. \n\n5. ưu lại cấu hình vừa rồi vào NVRAM bằn\nconfig.  \n\nSau đây là 2 ví\n\n\n\n 71\n\nInterface Ethernet 0 \nDescription LA\n\nInterface serial\n\nDescription AB\n\nN Engineering, Bldg.2 \n\n 0 \n\nC network 1, circuit 1 \n\n \n\nHình 3.2.3 \n\n3.2.4. Thông điệp đăng nhập \n\nThông điệp đăng nhập được hiển thị khi bạn đăng nhập vào hệ thống. Loại thông \nđiệp này rất hữu dụng khi bạn cần cảnh báo trước khi đến giờ tắt hệ thống mạng. \n\nTất cả mọi người đều có thể nhìn thấy thông điệp đăng nhập. Cho nên bạn nên \ndùng các thông điệp mạng tính cảnh báo, thu hút sự chú ý. Còn những thông điệp \nđể \u201cchào đón\u201d mọi người đăng nhập vào router là không thích hợp lắm. \n\nVí dụ một thông điệp như sau: \u201cThis is a secure system, authorized access only!\u201d \n(Đây là hệ thống được bảo mật, chỉ dành cho những người có thẩm quyền!) được \nsử dụng để cảnh báo những vị khách viếng thăm bất hợp pháp. \n\nLAB_A# conf\nEnter configuration commands, one per line. End with \nCNTL_Z \nLAB_A (config)# interface Ethernet 0 \nLAB_A (config-if)#description LAN Engineerinng, Bldg. 2 \n\nig terminal \n\n\n\n 72\n\n \n\nHình 3.2.4 \n\n3.2.5. Cấu hình thông điệp đăng nhập (MOTD) \n\n \n\nHình 3.2.5 \n\nTh t nối vào \nrouter. \n\nu thông báo, kết thúc bằng cách nhập ký tự phân cách một lần \nnữa. \n\nSau đây là các bước thực hiện để cấu hình thông điệp MOTD: \n\n1. Vào chế độ cấu hình toàn cục bằng lệnh configure terminal \n2. Nhập lệnh như sau: banner motd # The message of the day goes here #. \n3. Lưu cấu hình vừa rồi bằng lệnh copy running-config startup-config. \n\n3.2.6. Phân giải tên máy \n\nông điệp MOTD có thể hiển thị trên tất vả các thiết bị đầu cuối kế\n\nĐể cấu hình thông điệp MOTD bạn vào chế độ cấu hình toàn cục. Tại đây bạn \ndùng lệnh banner motd, cách một khoảng trắng, nhập ký tự phân cách ví dụ như \nký tự #, rồi viết câ\n\n\n\n 73\n\nPhân giải tên máy là quá trình máy tính phân giải từ tên mày thành địa chỉ IP tương \nứng. \n\nĐể có thể liên hệ với các thiết bị IP khác bằng tên thì các thiết bị mạng như router \ncũng cần phải có khả năng phân giải tên máy thành địa chỉ IP. Danh sách giữa tên \nmáy và điạ chỉ IP tương ứng được gọi là bảng host. \n\nBảng host có thể bao gồm tất cả các thiết bị mạng trong tổ chức của mình. Mỗi một \nđịa chỉ IP có một tên máy tương ứng. Phần mềm Cisco IOS có một vùng đệm để \nlưu tên máy và địa chỉ tương ứng. Vùng bộ đệm này giúp cho quá trình phân giải \ntên thành địa chỉ được nhanh hơn. \n\nTuy nhiên tên máy ở đây không giống như tên DNS, nó chỉ có ý nghĩa đối với \nrouter mà nó được cấu hình mà thôi. Người quản trị mạng có thể c u hình bảng \nhost trên router với bất kỳ tên nào với IP nào và các thông tin này chỉ có ý nghĩa \nđối với router đó mà thôi. \n\nhe following is an exemple of the configuration of a host table on a router: \n\nấ\n\nT\n\nRouter(config)#ip host Auckland 172.16.32.1 \nRouter(config)#ip host Beirut 192.168.53.1 \nRouter(config)#ip host Capetown 192.168.89.1 \nRouter(config)#ip host Denver 10.202.8.1 \n\nHình 3.2.6 \n\n3.2.7. Cấu hình bảng host \n\n tên cho các địa ế\nđây dùng lệnh ip host, theo sau là tên của thiết bị và tất ư vậy \n\nxạ với từ  t\ncó thể dùng lệnh ping hay telnet tới thiết bị đó bằng tên  địa chỉ IP \n\nc hiện cấu bảng host: \n\n1. Vào chế độ cấu hình toàn cục của router. \n2. Nhập lệnh ip host theo sau là tên của router và tất c địa chỉ IP của các \n\nn router đó. \n3. Tiếp tục nhập tên và địa chỉ IP tương ứng của các rou\n\nĐể khai báo  chỉ IP, đầu tiên bạn vào ch  độ cấu hình toàn cục. Tại \ncả các IP của nó. Nh\n\ntên máy này sẽ ánh ng địa chỉ IP của các cổng rên thiết bị đó. Khi đó bạn \n của thiết bị hay\n\ntương ứng đều được. \n\nSau đay là các bước thự\n\ncả cá\ncổng trê\n\nter khác trong mạng \n\n\n\n 74\n\n4. Lưu cấu hình vào NVRAM. \n\n \n\nự hoạt động của hệ thống. \nm các công việc sau: \n\nHình 3.2.7 \n3.2.8. Lập hồ sơ và lưu dự phòng tập tin cấu hình \n\nTập tin cấu hình của các thiết bị mạng sẽ quyết định s\nCông việc quản lý tập tin cấu hình của các thiết bị bao gồ\n\n\u2022 L p danh sách và so sánh với tập tin cấu hình trên các thiết bị đang hoạt \nđộng. \n\n\u2022 Lưu dự phòng các tập tin cấu hình lênh server mạng. \n\u2022 Thực hiện cài đặt và nâng cấp các phần mềm. \n\nChúng ta cần lưu dự phòng các tập tin cấu hình để sử dụng trong trường hợp có sự \ncố. Tập tin cấu hình có thể được lưu trên server mạng, ví dụ như TFTP server, hoặc \nlà lưu trên đĩa và cất ở nơi an toàn. Ngoài ra chúng ta cũng nên lập hồ sơ đi kèm \nvới các tập tin này. \n\n3.2.9. Cắt, dán và chỉnh sửa tập tin cấu hình \n\nChúng ta có thể dùng lệnh copy running-config tftp  để sao chép tập tin cấu hình \nđang chạy trên router vào TFTP server. Sau đây là các bước thực hiện: \n\nBước 1: nhập lệnh copy running-config tftp. \n\nBước 2: nhập địa chỉ IP của máy mà chúng ta sẽ lưu tập tin cấu hình lên đó. \n\nBước 3: nhập tên tập tin. \n\nậ\n\n\n\n 75\n\nBước 4: xác nhận lại câu lệnh bằng cách trả lời \u201cyes\u201d \n\n \n\nHình 3.2.9a \n\nChúng ta có thể sử dụng tập tin cấu hình lưu trên server mạng để cấu hình cho \nrouter. \n\nĐể thực hiện điều này bạn làm theo các bước sau: \n\ning-config. \n2.  dấu nhắc tiếp theo bạn chọn loại tập tin cấu hình máy hay tập tin cấu hình \n\nmạng. Tập tin cấu hình mạng có chứa các lệnh có thể thực thi cho tất cả các \n\no mà bạn đang lưu tập tin cấu hình trên đó. Ví dụ như trên hình \n\nnh cho loại tập tin cấu hình máy là \nhostname-config, còn tên mặc định cho loại tập tin cấu hình mạng là \n\nnfig. Trong môi trường DOS thì tên tập tin bị giới hạn với 8 ký tự \n\n1. Nhập lênh copy tftp runn\nỞ\n\nrouter và server trong mạng. Còn loại tập tin cấu hình máy thì cỉh s các lệnh \nthực thi cho một router mà thôi. Ở dấu nhắc kế tiếp, bạn nhập địa chỉ IP của \nmáy nà\n3.2.9b: router được cấu hình từ TFTP server có địa chỉ IP là 131.108.2.155. \n\n3. Sau đó nhập tên của tập tin hoặc là chấp nhận lấy tên mặc định. Tên của tập \ntin theo quy tắc của UNIX. Tên mặc đị\n\nnetword-co\nvà 3 ký tự mở rộng (ví dụ như: router.cfg). Cuối cùng bạn xác nhận lại tất cả \ncác thông tin vừa rồi. Bạn lưu ý trên hình thì sẽ thấy là dấu nhắc chuyển \n\n\n\n 76\n\nngay sang tên Tokyo. Điều này chứng tỏ là router được cấu hình lại ngay sau \nkhi tập tin cấu hình vừa được tải xuống. \n\nTập tin cấu hình trên router cũng có thể được lưu vào đĩa bằng cách sao chép dưới \ndạng văn bản rồi lưu vào đĩa mềm hoặc đĩa cứng. Khi nào cần chép trở lại rouer thì \nbạn dùng chức năng soạn thảo cơ bản của chương trình mô phỏng thiết bị đầu cuối \nđể cắt dán các dòng lệnh vào router. \n\n \n\nH\n\ny là phần tổng kế hính mà bạn cần nắm khi cấu hình router. \n\nế độ sa\n\nEC ng\n\u2022 Chế độ EXEC đặ\n\n t\nì\n\nng giao d  thực hiện một số thay đổi cho \nnhư\n\nho route\n\nình 3.2.9b \n\nTỔNG KẾT CHƯƠNG \n\nSau đâ t các ý c\n\nRouter có các ch u: \n\n\u2022 Chế độ EX ười dùng. \nc quyền. \n\n\u2022 Chế độ cấu hình\nấu h\n\noàn cục. \n\u2022 Các chế độ c nh khác. \n\nBạn có thể dù iện dòng lệnh của router để\ncấu hình của router : \n\n\u2022 Đặt tên c r. \n\n\n\n 77\n\n\u2022 Đặt mật mã cho r\nhình các cổn\n\n\u2022 Chỉnh sửa tập tin \n\u2022 Hiển thị tập tin cấu hình. \n\ntrọng giúp cho người quản trị mạng nắm được cấu trúc hệ thống mạng và xử \n\nười dùng khi họ \n\n \n \n \n \n \n\nouter. \n\u2022 Cấu g giao tiếp trên router. \n\ncấu hình. \n\nNgoài ra, bạn cần nhớ một số điểm quan trọng sau: \n\n\u2022 Xây dựng một cấu hình chuẩn là yếu tố quan trọng để thành công trong việc \nbảo trì bất kỳ hệ thống mạng của một tổ chức nào. \n\n\u2022 Câu chú thích cho các cổng giao tiếp có thể mang một số thông tin quan \n\nlý sự cố nhanh hơn. \n\u2022 Thông điệp đăng nhập sẽ cung cấp các thông báo cho ng\n\nđăng nhập vào router. \n\u2022 Phân giải tên máy thành địa chỉ IP cho phép router có thể chuyển đổi nhanh \n\ntừ máy ra địa chỉ. \n\u2022 Công việc lập hồ sơ và lưu dự phòng tập tin cấu hình là hết sức quan trọng \n\nđể bảo đảm cho hệ thống mạng luôn hoạt động thông suốt. \n\n \n \n \n \n \n \n\n\n\n 78\n\nCHƯƠNG 4 \nCẬP NHẬT THÔNG TIN TỪ CÁC THIẾT BỊ KHÁC \n\nGIỚI THIỆU \n\nĐôi khi người quản trị mạng sẽ phải xử lý những hệ thống mạng mà không có hồ \nsơ đầy đủ và chính xác. Trong những tình huống như vậy thì giao thức CDP-Cisco \nDiscovery Protocol sẽ là một công cụ rất hữu ích giúp bạn xây dựng được cấu trúc \ncơ bản về hệ thống mạng. CDP là một giao thức hoạt động không phụ thuộc vào \nmôi trường truyền của mạng, giao thức này là độc quyền của Cisco được sử dụng \nđể phát hiện các thiết bị xung quanh. CDP sẽ hiển thị thông tin về các thiết bị kết \nnối trực tiếp mà bạn đang xử lý. Tuy nhiên đây không phải là một công cụ thực sự \nmạng. \n\nTrong nhiều trường hợp, sau khi router đã được cấu hình và đi vào hoạt đông thị \nnhà quản trị mạng sẽ khó có thể kế  vào router để cấu hình hay làm gì \n\nu \n\n mạng của các thiết bị lân cận bằng cách sử \ndụng CDP. \n\n\u2022 Thiết lập kết nối Telnet. \n\u2022 Kiểm tra kết nối Telnet. \n\n4.1  cận \n \n\n                       \n\nt nối trực tiếp\nkhác. Khi đó, Telnet, là một ứng dụng của TCP/IP, sẽ giúp người quản trị mạng \nthiết lập kết nối từ xa vào chế độ giao tiếp dòng lệnh (CLI) của router để xem, cấ\nhình và xử lý sự cố. Đây là một công cụ chủ yếu của các chuyên gia mạng. \n\nSau khi hoàn tất chương này, các bạn sẽ nắm được các kiến thức sau: \n\n\u2022 Bật và tắt CDP. \n\u2022 Cách sử dụng lệnh show cdp neighbors. \n\u2022 Cách xác định các thiết bị lân cận kết nối vào cổng giao tiếp. \n\u2022 Ghi nhận thông tin về địa chỉ\n\n\u2022 Kết thúc phiên Telnet. \n\u2022 Tạm ngưng một phiên Telnet. \n\u2022 Thực hiện các kiểm tra kết nối khác. \n\u2022 Xử lý sự cố với các kết nối từ xa. \n\n. Kết nối và khám phá các thiết bị lân\n4.1.1. Giới thiệu về CDP \n\n\n\n 79\n\nTCP/IP        Novell IPX         AppleTalk   Others \n\n \nCDP discovers and shows information about \ndirecttl connected Cisco devices \n \n\nLANS           Frame Relay     ATM          Others \n\n \n\nHình 4.1.1 \n\nCDP là giao thức lớp 2 kết nối với lớp vật lý ở dưới và lớp mạng ở trên như hình \nvẽ. CDP được sử dụng để thu thập thông tin từ các thiết bị lân cận, ví dụ như thiết \n\nmạng và có thể \nập mạng con SNAP \n\nPhi  \ntừ i\nbản 10 hiên bản 1). \n\nvà cho phép thiết bị dò tìm \ncác ệu và \ncho nhau cho dù 2 thiết bị này có thể chạy \ngiao thức lớp mạng khác nhau. \n\nMỗi thiết bị được cấu hình CDP sẽ gửi một thông điệp quảng cáo theo định kỳ cho \ncác router khác. Mỗi thông điệp như vậy phải có ít nhất một địa chỉ mà thiết bị đó \ncó thể nhận được thông điệp của giao thức quản lý mạng cơ bản SNMP (Simple \nNetwork Management Protocol) thông qua địa chỉ đó. Ngoài ra, mỗi thông điệp \nquảng cáo còn có \u201cthời hạn sống\u201d hoặc là thời hạn lưu giữ thông tin. Đây là \nkhoảng thời gian cho các thiết bị lưu giữ thông tin nhận được trước khi xoá bỏ \nthông tin đó đi. Bên cạnh việc phát thông điệp, mỗi thiết bị cũng lắng nghe theo \n\nbị đó là loại thiết bị nào, trên thiết bị đó cổng nào là cổng kết nối và kết nối vào \ncổng nào trên thiết bị của chúng ta, phiên bản phần cứng của thiết bị đó là \ngì\u2026CDP là giao thức hoạt động độc lập với môi trường truyền \nchạy trên tất cả các thiết bị của Cisco trên nền giao thức truy c\n(Subnet Access Protocol). \n\nê ) là phiên bản mới nhất của giao thức này. Cisco IOS \nph ên bản 12.0(3)T trở đi có hỗ trợ CDPv2. Mặc định thì Cisco IOS (từ phiên \n\n.3 đến 12.0(3) chạy CDP p\n\nn bản 2 của CDP (CDPv2\n\nKhi thiết bị Cisco được bật lên, CDP tự động hoạt động \n thiết bị lân cận khác cùng chạy CDP. CDP hoạt động ở lớp liên kết dữ li\n phép 2 thiết bị thu thập thông tin lẫn \n\n\n\n 80\n\nđịnh kỳ để nhận thông điệp từ các thiết bị lân cận khac để thu thập thông tin về \nchúng. \n\n4.1.2. Thông tin thu nhận được từ CDP \n\nCDP được sử dụng chủ yếu để phát hiện tất cả các thiết bị Cisco khác kết nối trực \ntiếp vào thiết bị của chúng ta. Bạn sử dụng lênh show cdp neighbors để hiển thị \nthông tin về các mạng kết nối trực tiếp vào router. CDP cung cấp thông tin về từng \nthiết bị CDP láng giềng bằng cách truyền thông báo CDP mang theo cac giá trị \n\u201ctype length\u201d (TLVs). \n\nTLVs được hiển thị bởi lệnh show cdp neighbors sẽ bao gồm các thông tin về: \n\n\u2022 Device ID: Chỉ số danh định (ID) của thiết bị láng giềng. \nal rface: Cổng trên thiết bị của chúng ta kết nối đến thiết bị l ng \n\ngiềng, \n\u2022 Hold time: thời hạn lưu giữ th hật.  \n\nn quản lý của VTP (chỉ có ở \n\nrên router (chỉ có ở CDPv2). \n\nng kết nối trực tiếp vàp router mà \n\ntiếp với router đó. \n\n\u2022 Loc inte á\n\nông tin cập n\n\u2022 Capability: loại thiết bị. \n\u2022 Platform: phiên bản phần cứng của thiết bị. \n\u2022 Port ID: chỉ số danh định (ID) của cổng trên thiết bị láng giềng kết nối vào \n\nthiết bị của chúng ta. \n\u2022 VTP management domain name: tên miề\n\nCDPv2). \n\u2022 Native VLAN: VLAN mặc định t\n\u2022 Half/Full duplex: chế độ hoạt động song công hay bán song công. \n\nTrong hình 4.1.2, router ở vị trí thấp nhất khô\nngười quản trị mạng đang thực hiện kết nối console. Do đó để xem được các thông \ntin CDP của router này, người quản trị mạng phải Telnet vào router kết nối trực \n\n\n\n 81\n\n \n\nHình 4.1.2 \n\n \n\n4.1.3. Chạy CDP, kiểm tra và ghi nhận các thông tin CDP \n \n\nLệnh \nChế độ cấu hình của \nrouter để thực hiện câu \nlệnh \n\nChức năng của câu lệnh \n\nCdp run Chế độ cấu hình toàn cục Khởi động cdp trên \nrouter. \n\nCdp enable Chệ đ cổng \ngiao tiếp. \n\nKhởi động CDP trên cổng \ngiao tiếp tương ứng \n\nộ cấu hình \n\nClear cdp counters Chế độ EXEC người dùng Xoá đòng hồ đếm lưu \nlượng trở về 0 \n\nShow cdp entry \n(&/device-name \n[*][protocol/version]) \n\nChế độ EXEC đặc quyền Hiển thị thông tin về một \nthiết bị láng giềng mà ta \ncân. Thông tin hiển thị\nthể được giới hạn thoe \n\n có \n\ngiao thức hay theo phiên \nbản. \n\nShow cdp Chế độ EXEC đặc quyền Hiển thị khoảng thời gian \ngiữa các lần phát thông \n\n\n\n 82\n\nđiệp quảng cáo CDP, số \nphiên bản và thời gian còn \nhiệu lực của các thông \nđiệp này trên từng cổng \ncủa router. \n\nShow cdp interface [type \nnumber] \n\nChế độ EXEC đặc quyền Hiển thị thông tin về \nnhững cổng có chạy CDP \n\nShow cdp neighbors [type \nnumber] [detial] \n\nChế độ EXEC đặc quyền Hiển thị các thông tin về \nnhững thiết bị mà CDP \nphát hiện được: loại thiết \nbị, tên thiết bị, thiết bị đó \nkết nối vào cổng nào trên \nthiết bị của chúng ta. Nếu \nbạn có sử dụng từ khoá \n\ncông, tên miền VTP. \n\ndetail thị ban sẽ có thêm \nthông tin về VLAN ID, \nchế độ hoạt động song \n\n \n\n\n\n 83\n\nHình 4.1.3a \n\n \nHình 4.1.3b \n\n \nHình 4.1.3c \n\n\n\n 84\n\n \nHình 4.1.3d \n\n \nHình 4.1.3e \n\n4.1.4. Xây dựng bản đồ mạng \n \n\n\n\n 85\n\nCDP là một giao thức được thiết kế và hoạt động khá nhẹ, đơn giản. Các gói CDP \ncó kích thước nhỏ nhưng lại mang nhiều thông tin hữu ích về các thiết bị láng \ngiề\n\nBạ ó ựng sơ đồ mạng của các thiết bị. Bạn \ncó \ntiếp cá\n\n4.1.5. Tắt CDP \n\nĐể ắt toàn bộ CDP trên router, bạn dùng lệnh no cdp run chế độ cấu hình toàn \ncục. Khi bạn đã tắt toàn bộ CDP thì không có cổng nào trên router còn chạy được. \n\nĐối với Cisco IOS phiên bản 10.3 trở đi, CDP chạy mặc định trên tất cả các cổng \ncó thể gửi và nhận thông tin CDP. Tuy nhiên cũng có một số cổng như cổng \nAsynchronous chẳng hạn thì mặc định là CDP tắt trên các cổng này. Nếu CDP \nđang bị tắt trên một cổng nào đó thì bạn có thể khởi động lại CDP bằng lệnh cdp \nenable trong chế độ cấu hình cổng giao tiếp tương ứng. Còn nếu bạn muốn tắt \nCD  trên một cổng nào đó thì bạn dùng lệnh no cdp enable trong chế độ cấu hình \ncổng đó. \n\nng Cisco. \n\nn c  thể sử dụng các thông tin này để xây d\nthể Telnet vào các thiết bị láng giềng rồi dùng lệnh show cdp neighbors  để tìm \n\nc thiết bị khác kết nối vào thiết bị này. \n\n t\n\nP\n\n \n\nHình 4.1.5 \n\n4.1. X6. ử lý sự cố của CDP \n\n\n\n 86\n\nLệnh Mô tả \nClear c g giềng dp table  Xoá bảng thông tin của CDP về các thiết bị lán\nClear cdp counters Xoá bộ đếm lưu lượng trở về 0. \nShow c dp traffic Hiển thị bộ đếm của CDP, bao gồm số lượng gói CDP gửi \n\nvà nhận, số lượng lỗi checksum \nShow d c loại debug đang chạy trên router ebugging Hiển thị thông tin về cá\nDebug cdp adjacency Kiểm tra thông tin CDP về các thiết bị láng giềng \nDebug cdp events Kiểm tra các hoạt động của CDP \nDeb g cdp ip Kiểm tra thông tin CDP IP u\nDebug dp packets Kiểm tra thông tin về các gói CDP  c\nCdp timer Cài đặt thời gian định kỳ gửi gói CDP cập nhật \nCdp holdtime Cài đặt thời gian lưu giữ thông tin cho các gói CDP cập \n\nnhật được phát đi \nShow dp Hiển thị thông tin toàn cục của CDP, bao gồm thời gian \n\nđiịnh cập nhật và thời gian lưu giữ thông tin \nc\n\n \n\n4.2. Th  thập thông tin về các thiết bị ở xa \n4.2.1. elnet \n\nTelnet là giao thức giả lập đầu cuối ảo nằm trong bộ giao thức TCP/IP. Nó cho \nphép thiết lập kết nối từ xa vào thiết bị. Lệnh Telnet được sử dụng để kiểm tra hoạt \nđộng p ần mềm ở lớp ứng dụng giữa 2 máy. \n\nTelnet hoạt động ở lớp ứng dụng của mô hình OSI. Telnet hoạt động dựa trên cơ \nchế CP để đảm bảo việc truyền dữ liệu giữa client và các server. \n\nột router có thể cho phép thực hiện đồng thời nhiều phiên kết nối Telnet. Đường \nvty 0-4 trên router là đường dành cho Telnet. 5 đường Telnet này có thể thực hiện \nùng lúc. Chúng ta cần lưu ý rằng việc sử dụng Telnet để kiểm tra kết nối lớp ứng \nụng chỉ là việc phụ. Telnet được sử dụng chủ yếu để thiết lập kết nối từ xa vào \n\nthiết bị. Telnet là một chương trình ứng dụng đơn giản và thông dụng nhất. \n\nu\nT\n\nh\n\n T\n\nM\n\nc\nd\n\n\n\n 87\n\n \n\n \n\nHình 4.21. \n\n4.2.2. Thiết lập và kiểm tra kết nối Telnet \n\nLện T\nthiết b\nkết nố\nmuốn \n\nĐể thi ng các lệnh sau: \n\nDenve\nDenve\nDenve\nDenve\n\nh elnet cho phép người dùng thực hiện Telnet từ một thiết bị Cisco này sang \nị khác. Chúng ta không cần phải nhập lệnh connect hay telnet để thiết lập \ni Telnet mà chúng ta có thể nhập tên hoặc địa chỉ IP của router mà chúng ta \nTelnet vào. Khi kết thúc phiên Telnet, bạn dùng lệnh exit hoặc logout. \n\nết lập kết nối Telnet, bạn dùng một tro\n\nr>connect paris \nr>paris \nr>131.108.100.152 \nr>telnet paris \n\n\n\n 88\n\n \n\nHình 4.2.2a \n\ngiải \nt buộc bạn phải dùng địa chỉ IP. \n\ni từ xa vào một router hay \nđộ EXEC người dùng và \n\nạn có thể truy cập từ xa vào router thi có nghĩa là đã có ít nhất một ứng dụng \nMột kết nối Telnet thành công chứng tỏ rằng \n\nRouter cần phải có bảng host hoặc là trong mạng phải có dịch vụ DNS phân \ntên máy mà chúng ta nhập vào. Nếu không thì bắ\n\nTelnet được sử dụng để kiểm tra xem bạn có thể kết nố\nhông. Ví dụ như hình 4.2.2b: nếu bạn Telnet ở chế k\n\nEXEC đặc quyền đều được. \n\nếu bN\nTCP/IP kết nối vào được router đó. \ncác ứng dụng lớp trên hoạt động tốt. \n\n\n\n 89\n\n \n\nHình 4.2.2b \n\nNếu bạn có thể Telnet vào một router này mà không Telnet \nhì có thể sự cố là do sai tên, địa chỉ hoặc do cấp quyền truy c\n\nvào được router khác \nập. Sai sót có thể nằm \n\nằm ở router mà bạn Telnet tới. Trong trường hợp \này, bước tiếp theo bạn nên cố gắng ping thử. Lệnh ping cho phép chúng ta kiểm \n\ntra kết nối ở lớp Mạng từ đầu đến cuối. \n\n ngưng một phiên Telnet. Tuy \n\n một router khác. Điều \nnày router. Do đó bạn cần chú ý \ncẩn th ng phiên Telnet trên router đó. \n\nMỗ gưng trong một khoảng thời gian giới hạn. Để \nqua t n phím Enter. Bạn \n\nt\nở router mà bạn đang xủ lý hoặc n\nn\n\nKhi bạn đã Telnet xong, bạn có thể ngắt kết nối. Mặc định thì sau 10 phút mà \nkhông có bất kỳ hoạt động nào kết nối Telnet sẽ tự động ngắt. Hoặc là bạn có thể \nngắt kết nối Telnet bằng lệnh exit. \n\n4.2.3. Ngắt, tạm ngưng phiên Telnet \n\nTelnet có một đặc tính quan trọng là bạn có thể tạm\nnhiên có một rắc rối là khi bạn sử dụng phím enter sau khi tạm ngưng phiên Telnet \nthì phần mềm Cisco IOS sẽ tự động quay trở lại kết nối Telnet vừa mới tạm ngưng \ntrước đó. Mà phím enter là phím rất hay được sử dụng. Do đó khi bạn tạm ngưng \nmột phiên Telnet thì rất có thể sau đó bạn sẽ kết nối lại vào\n\n rất nguy hiểm khi bạn thực hiện thay đổi cấu hình \nận cấu hình của router trước khi tạm ngư\n\ni một phiên Telnet chỉ được tạm n\ny rở lại kết nối Telnet mà bạn đã tạm ngưng bạn chỉ cần nhấ\n\ndùng lệnh show session để xem các kết nối Telnet đang được mở. \n\n\n\n 90\n\nSau đây là trình tự các bước để bạn ngắt kết nối Telnet: \n\n\u2022 Nhập lệnh disconnect. \n\u2022 Tiếp theo sau lệnh này là tên hoặc địa chỉ IP của router. Ví dụ: \n\nDenver>disconnect paris \n\ng phiên Telnet: \n\nng lúc, buông ra rồi nhấn tiếp chữ x. \n\nSau đây là các bước thực hiện tạm ngưn\n\n\u2022 Nhấn tổ hợp phím Ctrl-Shift-6 cù\n\u2022 Nhập tên hoặc địa chỉ IP của router. \n\n    \n\nHình 4.2.3 \n\nể mở nhiều phiên Telnet cùng lúc. Chúng ta có thể chuyển đổi qua \n\n4.2.4. Mở rộng thêm về hoạt động Telnet \n\nTrên router có th\nlại giữa các phiên Telnet này. Bạn có thể ấn định số lượng phiên Telnet được phép \nmở đồng thời trên router bằng lệnh session limit. \n\nĐể chuyển đổi qua lại giữa các phiên Telnet, bạn tạm ngưng phiên Telnet hiện tại \nvà quay trở lại phiên mới mở trước đó. \n\nNhấn tổ hợp phím Ctrl-Shift-6 cùng lúc, buông ra rồi nhấn tiếp chữ x: tạm thoát \nkhỏi kết nối hiện tại, quay lại dấu nhắc EXEC. \n\n\n\n 91\n\nTại dấu nhắc EXEC, bạn có thể thiết lập phiên kết nối mới. Router 2500 chỉ cho \nphép mở 5 phiên Telnet cùng lúc. \n\nBạn có thể mở nhiều phiên Telnet cùng lúc và tạm ngưng bẳng tổ hợp phím Ctrl-\nShift-6, x. Nếu bạn dùng phím Enter thì Cisco IOS sẽ tự động quay lại kết nối vừa \nmới tạm ngưng trước đó. Còn nếu bạn dùng lệnh resume thì bạn phải nhập thêm \nchỉ số ID bằng lệnh show session. \n\n \n\nHình 4.2.4 \n\n4.2.5. Các lệnh kiểm tra kết nối khác \n\nĐể hỗ trợ việc kiểm tra  nối mạng cơ bản, nhiều giao thức mạng có hỗ trợ giao \ndụng để kiểm tra việc định tuyến \n\nệu. n gửi đi một gói dữ liệu tới máy đích và chờ \ni trả lời\n\nđộ tin cậy của \nđích có đến đượ\n\ntra kết nối ng hày EXEC \nuyền đều đ\n\nthức phản hồi (echo). Giao thức phản hồi được sử \ncác gói dữ li  Lệnh ping thực hiệ\nnhận gó  vè từ máy đích. Kết quả của giao thức phản hồi giúp bạn xác định \n\nđường truyền tới máy đích, thời gian trễ trên đường truyền, máy \nc hay không, có hoạt động hay không. Lệnh ping là lệnh cơ bản để \n\n ở chế độ EXEC người dùkiểm . Bạn có thể dùng lệnh này\nđặc q ược. \n\n\n\n 92\n\n   \n\nHình 4.2.5a \n\nHình 4.2.5a là ví dụ cho biết phản hồi hà  gói gửi đi của lệnh ping \n p hận được \n\nm đã \n \n\net Control Message Protocol \u2013 giao t). \n\n ệu trên \ning thì chỉ \n\nra kết nối từ đầu cuối đến đầu cuối, còn lệnh traceroute thì kiểm tra từng \nường truyền. Bạn có thể thực hiện lệnh traceroute ở chế độ \n\nEXEC người dùng hay EXEC đặc q c. \n\nay vì tên của router đó. Trong \n traceroute vẫn sẽ tiếp tục cố gắng gửi đến trạm kế tiếp \nợp phím Ctrl-shift-6. \n\nnh công cho 5\n172.16.1.5. Dấu chấm than (!) cho biết là\n\nchấ\nhản hồi thành công. Nếu bạn n\n\nnghĩa là router một hay nhiều dấu chấm thay vì dấu  than (!) thì điều đó có \nhết thời gian chờ gói phản hồi từ máy đí\n(Intern\n\nch. Lệnh ping sử dụng giao thức ICMP\nthức thông điệp điều khiển interne\n\nLệnh traceroute là một công cụ lý tưởng để bạn tìm đường đi của gói dữ li\nmạng. Lệnh traceroute cũng tương tự như\nkiểm t\n\n lệnh ping, chỉ khác là lệnh p\n\nchặng một dọc theo đ\nuyền đều đựơ\n\nTrong ví dụ ở hình 4.2.5b, bạn thực hiện lệnh traceroute từ router York đến router \nRome. Đường truyền này phải đi qua router London và Paris. Nếu có router nào \nkhông đến được thì kết quả phản hồi là dấu sao (*) th\ntrường hợp như vậy, lệnh\ncho đến khi bạn nhấn tổ h\n\n \n\n\n\n 93\n\n   \n\nHình 4.2.5b \n\niểm tra cơ bản cũng tập trung chủ yếu vào lớp Mạng. Bạn dùng lệnh show \nte để kiểm tra bảng định tuyến của router cho hệ thống mạng. Lệnh này sẽ \nề cập chi tiết h\n\nViệc k\nip rou\nđượ đ\n\nSau ping: \n\nhấn phím Enter. \n\nề địa chỉ IP \n\nự cố về địa chỉ là sự cố xảy ra phổ biến nhất trong mạng IP. Sau đây là 3 lệnh \nthường được sử dụng để xử lý các sự cố liên quan đến địa chỉ: \n\n\u2022 Ping: sử dụng giao thức ICMP để kiểm tra kết nối vật lý và địa chỉ IP của \nlớp Mạng. Đây là lệnh kiểm tra cơ bản. \n\nc ơn trong chưong sau. \n\n đây là các bước thực hiện \n\n\u2022 Nhập lệnh ping, theo sau là địa chỉ IP hoặc tên của máy đích. \n\u2022 Nhấn phím Enter.  \n\nSau đây là các bước thực hiện lệnh traceroute: \n\n\u2022 Nhập lệnh traceroute, theo sau là địa chỉ IP hoặc tên của máy đích. \n\u2022 N\n\n \n4.2.6. Xử lý sự cố v\n\nS\n\n\n\n 94\n\n\u2022 Telnet: kiểm tra kết nối phần mềm lớp Ứng dụng giữa nguồn và máy đích. \n lệnh kiểm tra kết nối hoàn chỉnh. \n\n cho phép xác định vị trí lỗi trên đường truyền từ máy nguồn \nrị Time to Live để tạo thông điệp từ \n\nbằng cách sử dụng CDP. \n\n\u2022 Kết thúc kết nối Telnet. \n\n xa. \n\nĐây là\n\u2022 Traceroute: \n\nđến máy đích. Lệnh trace sử dụng giá t\nmỗi router trên đường truyền. \n\nTỔNG KẾT \n\nKết thúc chương này bạn cần nắm được những ý chính như sau: \n\n\u2022 Mở và tắt CDP \n\u2022 Sử dụng lệnh show cdp neighbors. \n\u2022 Xác định được các thiết bị láng giềng kết nối vào các cổng trên thiết bị của \n\nmình. \n\u2022 Thu nhập thông tin về các thiết bị láng giềng \n\u2022 Thiết lập kết nối Telnet. \n\n\u2022 Tạm ngưng kết nối Telnet. \n\u2022 Thực hiện kiểm tra kết nối. \n\u2022 Xử lý sự cố của kết nối đầu cuối từ\n\n \n\n \n\n\n\n 95\n\nCHƯƠNG 5 \n\nQUẢN LÝ PHẦN MỀM CISCO IOS \n\nGIỚI THIỆU \n\nCisco router không thể hoạt động được nếu không có hệ điều hành mạng Cisco \n(IOS). Mỗi router trong quá trình khởi động đều có bước tìm và tải IOS. Chương \nnày sẽ mô tả chi tiết các bước khởi động của router và cho bạn thấy tầm quan trọng \ncủa quá trình này. \n\nCác thiết bị mạng Cisco hoạt động với nhiều loại tập tin khác nhau, trong đó có hệ \nđiều hành và tập tin cấu hình. Người quản trị mạng hay bất kỳ ai muốn quản trị cho \nhệ thống mạng hoạt động trôi chảy và tin cậy thì để phải bảo trì các tập tin này cẩn \nthận, bảo đảm rằng thiết bị đang chạy đúng phiên bản phần mềm và các tập tin hệ \nthống của Cisco và các công cụ hữu n lý các tập tin này. \n\nKhi hoàn tất chương này , các bạn có thể t c hiện được những việc sau: \n\n\u2022 Xác định được router đang ở  của quá trình khởi động. \n IOS như thế nào. \n\n\u2022 Sử dụng các lệnh boot system. \n\nodem. \nống bằng các lệnh show. \n\nhi bắt đầu bật điện \n\nủa \n\n dụng để quả\n\nhự\n\n giai đoạn nào\n\u2022 Xác định được các thiết bị Cisco tìm và tải Cisco\n\n\u2022 Xác định giá trị của thanh ghi cấu hình. \n\u2022 Mô tả khái quát các tập tin mà Cisco IOS sử dụng và chức năng tương ứng \n\ncủa chúng. \n\u2022 Nắm được nơi mà router lưu các loại tập tin khác nhau. \n\u2022 Mô tả khái quát cấu trúc tên của IOS. \n\u2022 Lưu và khôi phục tập tin cấu hình bằng cách sử dụng TFTP và cắt \u2013 dán. \n\u2022 Tải IOS bằng TFTP. \n\u2022 Tải IOS bằng Xm\n\u2022 Kiểm tra tập tin hệ th\n\n5.1. Khảo sát và kiểm tra quá trình khởi động router \n5.1.1.  Các giai đoạn khởi động router k\n\nMục tiêu chính của quá trình khởi động router là khởi động các hoạt động c\nrouter. Router phải hoạt động với độ tin cậy cao để thực hiện kết nối cho bất kỳ \n\n\n\n 96\n\nloại mạng nào. Do đó, quá trình khởi động router phải thực hiện các công việc như \n\n\u2022 Kiểm tra phần cứng của router \n\n \n\n \n\ni phần mềm Cisco IOS thì khác nhau tuỳ theo phiên bản phần \n\n ta có thể cấu hình hoặc router sẽ sử dụng quá trình tìm và tải \nphầ\n\nGiá trị OS như sau: \n\nS. Router sẽ sử dụng các câu lệnh này theo thứ tự khi khởi động. \n\nsau: \n\n\u2022 Tìm và tải phần mềm Cisco IOS. \n\u2022 Tìm và thực hiện các câu lệnh cấu hình, trong đó bao gồm các cấu hình giao \n\nthức và địa chỉ cho các cổng giao tiếp. \n\n \n\n \n\n \n\n \n\nROM Bootstrap Load bootstrap \n\n \n\nHệ điều hành \n\n  \nmạng Cisco \n\n \n\n \n\n \n\n \n\n \n\n \n\n5.1.2.  Thiết bị Cisco tìm và tải như thế nào \n\nNguồn mặc định tả\ncứng của thiết bị, nhưng hầu hết các router đều tìm lệnh boot system  lưu trong \nNVRAM. Phần mềm Cisco IOS có thế được tải từ nhiều nguồn khác nhau. Những \nnguồn này chúng\n\nn mềm mặc định của nó.  \n\n cài đặt cho thanh ghi cấu hình sẽ cho phép router tìm I\n\n\u2022 Lệnh boot system cấu hình cho router nơi mà router tìm để \ntỉa IO\n\nFlash \n\nTFTP \nServer \n\nROM \n\nTìm và tải hệ điều \nhành \n\n \n\nTập tin cấu \nhình \n\n \n\nTìm và tải tập tin \ncấu hình hoặc vào \n\nNVRAM \n\nTFTP \nServer \n\nchế độ cài đặt Console \n\n\n\n 97\n\n\u2022 Nếu trong NVRAM không có các câu lệnh boot system thì \n\n\u2022 bộ nhớ flash cũng không có IOS thì router sẽ cố \n\nn lưu trên server mạng. \n \n\n \n \n\n \n \n\n \n \n\n \n\nhệ thống sẽ mặc định là sử dụng Cisco IOS trong bộ nhớ flash. \nNếu trong \n\ngắng sử dụng TFTP để tải IOS về. Router sẽ sử dụng giá trị cài đặt cấu hình \nđể biết tên tập ti\n\n \n \n \n \n \n \n \n \n \n \n \n\nRouter# configure terminal \nRouter(config)# boot system flash IOS_filename \nRouter(config)# boot system tftp IOS_filename \ntftp_address \nRouter(config)# boot system ROM \n[Ctrl-Z] \nRouter# copy running-config startup-config \n\nKhông tìm thấy lệnh boot system trong NVRAM. \n\nTải Cisco IOS mặcđịnh trong bộ nhớ Flash.\n\nBộ nhớ Flash không có IOS. \n\nTải Cisco IOS mặc định từ TFTP server. \n\nCài đặt thanh ghi cấu hình, lưu trong NVRAM, giá trị cài đặt cho thanh ghi \ncấu hình khác nhau sẽ cho phép router xác định vị trí tải IOS khác nhau \n\n \n\n \n\n \n\n \n\n \n\n\n\n 98\n\n \n \n\n5.1.3 Sử dụng lệnh boot system \n5.1.4 Hình 5.1.3Sử dụng lệnh boot system \n\nThứ tự các vị trí mà router tìm hệ điều hành được cài đặt trong phần khởi động của \nthanh ghi cấu hình. Giá trị mặc định của thanh ghi cấu hình có thể thay đổi bằng \nlệnh config-register trong chế độ cấu hình toàn cục. Thông số của lệnh này sủ \n\ni \ncấu hình thể hiện cho phần khởi động router. Đầu tiên, ta dùng lệnh show version \nđể xem giá trị hiện tại của thanh ghi cấu hình và cúng để đảm bảo là giá trị của 12 \ntrên không có gì thay đổi. Sau đó ta dùng lệnh cònig-register để thay đổi giá trị \ncho thanh ghi, ta chỉ cần đổi giá trị của số hex cuối cùng mà thôi. \n\nTa thay đổi giá trị phần khởi động của thanh ghi cấu hình theo hướng dẫn sau: \n\n\u2022 Để router khởi động vào chế độ ROM monitor, ta đặt giá trị cho thanh ghi \ncấu hình là 0xnnn0, trong đó nnn là giá trị của 12 bit trên, không thuộc phần \nkhởi động. Còn 0 là gia trj của phần khởi động trên thanh ghi cấu hình, do \nđó 4 bit phần này có giá trị nhị phân là 0000. Từ chế độ ROM monitor, ta có \nthể khởi động hệ thống bằng lệnh b. \n\n\u2022 Để cấu hình cho hệ thống tự động khởi động từ ROM, ta đặt giá trị cho \nthanh ghi cấu hình là 0xnnn1, trong đó nnn là giá trị của 12 bit trên, không \nthuộc phần khởi động. Còn 1 a 4 bit phần khởi động trên thanh \nghi cấu hình, như vậy 4 bit nà hị phân là 0001. \n\n\u2022 Để cấu hình cho hệ thống sử dụng cac câu lệnh boot system trong NVRAM, \nấu hìnn bất kỳ giá trị nào nằm trong khỏng \nt trong phần khởi động của thanh ghi cấu hình \n\nđụng số hex. \n\nThanh ghi cấu hình là thanh ghi 16 bi lưu trong NVRAM. 4 bit thấp của thanh gh\n\n là giá trị củ\ny có giá trị n\n\nta đặt giá trị cho thanh ghi c\n0xnnn2 \u2013 0xnnnF. Khi đó, 4 bi\nsẽ có giá trị nhị phân là 0010-1111. Mặc định gia trị thanh ghi là 0x2102 và \nrouter sử dụng lệnh boot system trong NVRAM.   \n5.1.5 Sử dụng lệnh boot system \n\nKhi router không khởi động được thì có thể là do một trong những nguyên nhân \nsau: \n\n\n\n 99\n\n\u2022 Mất tập tin cấu hình hoặc câu lệnh boot system bị sai. \n\u2022 Giá trị thanh ghi cấu hình bị sai. \n\u2022 Bộ nhớ flash bị trục trặc. \n\nSử dụng lệnh show running-config và tìm câu lệnh boot  system  nằm ở ngay \n\nRouter#show version \n\n \n\nSystem image file is \u201cflash:c2600-jk8o3s-mz.122-17a.bin\u201d \n \nThis product contains cryptographi  subject to United States and local \n\ny laus. By using this product, \n, return this product immediately. \n\n\u2022 Hư hỏng phần cứng. \n\nKhi router khởi động, router sẽ tìm câu lệnh boot system trong tập tin cấu hình. \nLệnh boot system có thể cài đặt cho router khởi động từ IOS khác thay vì từ IOS \ntrong flash. Để xác định xem router khởi động từ IOS nào, bạn dùng lệnh show \nversion và tìm dòng nói về phần mềm khởi động hệ thống. \n\nphần đầu của tập tin cấu hình. Nếu câu lệnh boot system chỉ sai IOS thì chúng ta \nxoá lệnh đó đi bằng lệnh \u201cno\u201d của câu lệnh đó. \n\nCisco Interface Operating System Software \nIOS (tm) C2600 Software (C2600-JK803S-M), Version 12.2 (17a), RELEASE \nSOFTWARE (fc1) \nCopyright (c) 1986-2006 by Cisco  System, Inc \nComplie Thu 19-Jun-03 16:35 by pwade \nImage text-base: 0x8000808C, data-base: 0x815F7B34 \n\nROM: System Bootstrap, Version 12.2 (7r) [cmong 7r], RELEASE SOFTWARE \nfc1) \n \nDanang uptime is 1 hour, 2 minutes \nSystem returned to ROM by power-on  \n\nc features and\ncountry laws goverining import, export, transfer and use. Delivery of Cisco \ncryptographic product does not imply third-party authority to import, export, \ndistribute or use encryption. Importers, exporters, distributors and users are \nresponsible for compliance with US and local coutr\nyou compliance with US and local laws\n \nA summary of US laws governing Cisco cryptographic products may be found at: \nhttp://www.cisco.com/wwl/export/crypto/tool/stqrg.html\n \n\n\n\n 100\n\nIf you require further assistance please contact us by sending email to \nexport@cisco.com\n \nCisco 2620XM (MOC860P) professor (revision 0x100) with 59392K/6144K bytes \nof memory \nProcessor board ID JAE0718065A (41148118384) \nM860 processor: part number 5, mask 2 \nBridging software \nX25 software, Version 3.0.0 \nSuper LAT software (copyright 1990 by Meridian Technology Corp) \nTN3270 Emulation software \nBasic Rae ISDN software, Version 1.1. \n1 FastEthernet/IEEE 802.3 interface(s) \n2 Low-speed serial (sync/async) network interface(s) \n1 ISDN Basic Rate interface(s) \n32K bytes of non-voltatile configuration memory. \n16384K bytes of processor board System flash (Read/Write) \n \nConfiguration register is 0x2102 \n \n\nGiá trị thanh ghi cấu hình không đúng cũng dẫn đến việc router không tải được \nIOS vì gia trị thanh ghi nà từ đâu. Chúng ta kiểm tra \n\niá trị thanh ghi bằng lệnh show version và đọc dòng cuối cùng trong kết quả hiển \nị của lệnh này. Giá trị thanh ghi cấu hình sẽ khác nhau đối với các biên bản phần \n\nường hợp như vậy bạn sẽ gặp các thông báo lỗi trong qua trình \n\n\u201cflash:\u201d \n\u2022 Boot: cannot determine first file name on device \u201cflash:\u201d \n\nNếu dùng là tập tin trong flash bị lỗi thì bạn cần chép lại IOS mới lên router. \n\ny sẽ cho router biết là tải IOS \ng\nth\ncứng khác nhau. Bạn có thể tham khảo giá trị thanh ghi cấu hình trên đĩa CD tài \nliệu của Cisco hợc trên website của Cisco. Sau đó bạn chỉnh sửa lại giá trị thanh \nghi cấu hình rồi lưu vào tập tin cấu hình khởi động. \n\nNếu sự cố vẫn tiếp tục xảy ra thì có thể là tập tin trong bộ nhớ flash bị lỗi. Thông \nthường, trong tr\nkhởi động router. Ví dụ như một số câu thông báo như sau: \n\n\u2022 Open: read error\u2026requested 0x4 bytes, got 0x0 \n\u2022 Trouble reading  device magic number \n\u2022 Boot: cannot open \n\n\n\n 101\n\nNếu tất cả các nguyên nhân trên vẫn không đúng thì có thể là router bị lỗi phần \ncứng. Trong trường hợp như vậy thì bạn nên liên hệ với trung tâm hỗ trợ kỹ thuật \n\nnal Assistance Centre). Mặc dù lỗi hư phần cứng rất hiếm \n năng xảy ra. \n\ncấu \nt bị. \n\nNg i h để các thiết bị Cisco thực hiện \ncác ch g số mà bạn có thể cấu \nhìn yến và các mạng \nmà a \u2026 Thông thường, một tập tin \ncấu\n\nng bộ nhớ khác \nnhau. \n\nIOS được lưu trong loại bộ nhớ được gọi là flash. Flash lưu giữ ổn định tập tin IOS \nvà tập tin IOS này được lash cho phép chúng ta \n\nập tin cấu hình được lưu trong NVRAM được gọi là tập \ntin cấu hình khởi động. Khi thiết bị khởi động, tập tin cấu hình khởi động được \n\ncủa Cisco (TAC \u2013 Termi\ngặp nhưng nó vẫn có khả\n\nLưu ý: Bạn không thể xem giá trị thanh ghi cấu hình bằng lệnh show running-\nconfig hay show start-up config được, \n\n5.2. Quản lý tập tin hệ thống Cisco \n5.2.1. Khái quát về tập tin hệ thống Cisco \n\nHoạt động của router và switch phụ thuộc vào phần mềm cài trên nó. Có 2 loại \nphần mềm cần phải có để thiết bị hoạt động là: hệ điều hành và tập tin cấu hình. \n\nHệ điều hành được sử dụng cho hầu hết các thiết bị Cisco là hệ điều hành liên \nmạng Cisco, gọi tắt là Cisco IOS (Internetwork Operating System). Phần mềm \nCisco IOS cho phép thiết bị thực hiện các chức năng của router hay switch. Một \ntập tin IOS khoảng vài megabyte. \n\nPhần mềm thứ 2 được sử dụng cho router và switch là tập tin cấu hình. Tập tin \nhình chứa các hướng dẫn về hoạt động định tuyến hay chuyển mạch của thiế\n\nườ  quản trị mạng là người tạo tập tin cấu hìn\nức năng theo đúng thiết kế của mình. Một số thôn\n\nh được là địa chỉ IP của các cổng trên router, giao thức định tu\n gi o thức định tuyến đó được thực hiện quảng bá\n hình từ vài trăm đến vài ngàn byte. \n\nMỗi loại phần mềm được lưu thành từng tập tin riêng biệt trong từ\n\nsử dụng để khởi động router. F\nnâng cấp IOS và lưu được nhiều IOS khác nhau. Trong cấu trúc của một số loại \nrouter, IOS được copy lên RAM và chạy trên RAM. \n\nTập tin cấu hình được lưu trong bộ nhớ NVRAM và tập tin này được sử dụng khi \nkhởi động router. Do đó t\n\n\n\n 102\n\nchép lên RAM. Khi đó tập tin này được chạy trên RAM và luôn được cập nhật khi \nđang chạy. Do đó tập tin đang chạy trên RAM được gọi là tập tin cấu hình hoạt \nđộng. \n\n \n\nHình 5.2.1a \n\nBắt đầu từ phiên bản 12 của IOS, hệ thống tập tin Cisco IOS, gọi tắt là IFS (IOS \nFile System), cung cấp một giao tiếp chung cho tất cả các hệ thống tập tin mà \n\n cấu hình hoạt động, ROM). IFS sử dụng các tiền tố như trong \nđịnh hệ thống tập tin trên thiết bị. \n\n                         Descripton \n\nrouter đang sử dụng. IFS cung cấp một phương pháp chung để thực hiện quản lý \ntoàn bộ hệ thống tập tin đang sử dụng cho router. Công việc này bao gồm tập tin \ntrong bộ nhớ flash, hệ thống tập tin mạng (TFTP, rcp và FTP), đọc/viết dữ liệu \n(NVRAM, tập tin\nhình 5.2.1b để xác \n\nPrefix                           \nBootflash: Bootflash memory \nFlash: Flash memory. This prefix is available on all platform. For \n\nform that do not have a device named flash, the prefix flash: is \nrefix flash: can be used to refer to \n\norage area on all platform \n\nplat\nallased to slot0:. Therefore, the p\nthe main flash memory st\n\nFlh: Flash load helper log files \nftp: File Transfer protocol (FTP) network sever \nNvram: NVRAM \nRcp: Remote copy protocol (rcp) network server \nSlot0: First Personal Computer Memory Card International Assiciontion \n\n\n\n 103\n\n(PCMCIA) flash memory card  \nSlot1: Second PCMCIA flash memory card \nSystem: Contains the system memory, including the running configuration \nTftp: TFTP nework server \n\nHình 5.2.1b \n\nds Pre IOS Version 12.0 Commands                IOS Version 12.x Comman\nConfigure network (pre-Cisco IOs Copy ftp: system: runnig-config \n\nCopy crp: system: runnig-config \nCopy tftp: system: runnig-config \n\nRelease 10.3) \nCopy rcp running \u2013config \nCopy tftp running-config \nConfigure overwrite-network \n{pre-Cisco IOS Release 10.3} Copy crp\nCopy rcp stratup-config Copy tftp: system: \nCopy tftp satrup-config \n\nCopy ftp: system: runnig-config \n: system: runnig-config \n\nrunnig-config \n\nShow configuration (pre-Cisco IOS \nrelease 10.3) \n\nMore nvram:startup-config \n\nWrite erase (pre-Cisco IOS release 10.3)\nErase starup-config \n\nErase nvram: \n\nWrite erase (pre-Cisco IOS release 10.3)\nCopy running-config startup-config \n\nCopy system: running-config \nNvram: startup-config \n\nWrite network pre-Cisco IOS release \n10.3) \nCopy running-config startup-config rcp \nCopy running-config startup-config tftp \n\nCopy system: runnig-config ftp: \nCopy system: runnig-config crp: \nCopy system: runnig-config tftp: \n\nWrite terminal pre-Cisco IOS release \n10.3) \nShow runnig -config \n\nMore system: running-config \n\nHình 5.2.1c \n\nIFS sử dụng quy ước URL để xác định tập tin trên thiết bị và trên mạng. Quy ước \nURl xác định vị trí của tập tin đứng sau dâu hai chấm như sau [[[//vị trí]/thư \n\nn]. IFS cũng hỗ truyền tải tập tin FTP. \n\nCisco phát tri  bản này hỗ trợ cho \ncác h ẫn đang \ntiếp\n\nmục]/tên tập ti\n\n5.2.2. Quy ước tên IOS \n\nển rất nhiều phiên bản IOS khác nhau. Các phiên\np iên bản phần cứng với nhiều đặc tính  khác nhau. Hiện nay Cisco v\n tục phát triển nhiều phiên bản IOS mới. \n\n\n\n 104\n\nĐể , Cisco có một quy luật đặt tên cho IOS. \nMộ o gồm nhiều phần, mỗi phần thể hiện phiên bản phần cứng, các \nđặc n\n\nPhầ hiên bản phần \ncứn n\n\nPhầ  này có hỗ trợ các đặc tính nào. Có \nrất nhi  chọn lựa. Các đặc tính này được đóng gói trong \nCis  ột số đặc tính chứ không có toàn bộ tất cả các \nđặc n n loại như sau: \n\n\u2022 ơ bản: các đặc tính dành cho từng phiên bản phần cứng, ví dụ: IP, IP/FW. \n\u2022 ở rộng (Plus): là các đặc tính mở rộng hơn mức cơ bản, ví dụ IP Plus, \n\nIP/FW Plus, Enterprise Plus. \n\u2022 Mã hoá: vẫn là các đặc tính cơ bản hay mở rộng như trên nhưng có thêm 56 \n\nbit để mã hoá. Ví dụ: IP/ATM PLUS IPSEC 56, Plus 56, Enterprise Plus 56. \nTừ Cisco IOS phiên bản 12.2 trở đi, đặc tính mã hoá được thiết kế thành 2 \nloại là k8/k9: \n\no K8: 64 bit mã hoa trở xuống. \no K9: hơn 64 bit mã hoá. \n\nPhần thứ 3 của tên tập tin cho biết định dạng của tập tin đó. Phần này cho biết IOS \nđược lưu trong flash dưới dạng nén hay không, rồi IOS sẽ được giải nén để chạy ở \nđâu. Nếu IOS lưu trong flash dưới dạng nén thì nó sẽ được giải nén, chép lên RAM \ntrong quá trình khởi động router. Dạng tập tin như vậy gọi là tập tin không cố định. \nCòn loại tập tin có định thì chạy trực tiếp trên flash luôn mà không cần chép lên \nRAM. \n\nPhần thứ 4 của tập tin cho biết phiên bản của IOS. Phiên bản càng mới thì số trong \nphần này càng lớn. \n\n \n\n \n\n \n\n \n\n phân biệt giữa các phiên bản khác nhau\nt tên của IOS ba\n tí h hỗ trợ và sỗ phát hành. \n\nn đầu tiên của tập tin IOS cho biết IOS này được thiết kế cho p\ng ào. \n\nn thứ hai của tên tập tin IOS cho biết tập tin\nều đặc tính khác nhau để\n\nco IOS. Mỗi Cisco IOS chỉ có m\n tí h. Bên cạnh đó, các đặc tính này còn được phâ\n\nC\nM\n\n\n\n 105\n\n \n\nHình 5.2.2 \n\n5.2.3. Quản lý tập tin cấu hình băng TFTP \n\nTrên Cisco router và switch, tập tin cấu hình hoạt động được để trên RAM và nơi \nhải có tập tin \n\ncấu ì ơi mà chúng ta có thể lưu dụ \nphò opy running-config \ntftp\n\n\u2022 nh copy running-config tftp. \nFTP server mà bạn định lưu tập tin \n\nSa à r bằng cách chép tập tin cấu hình đã \nlưu\n\n\u2022 nning-config. \nchỉ IP của TFTP sever. \nấu hình mà mình muốn chép. \n\n rồi. \n\ncấu hình khởi động là NVRAM. Khi bị mất tập tin cấu hình thì ta p\n h nh khởi động dự phòng. Một trong những n\nng tập tin cấu hình là TFTP server. Chúng ta dùng lệnh c\n để chép tập tin cấu hình lên TFTP server. Sau đây là các bước thực hiện: \n\nNhập lệ\n\u2022 Ở dấu nhắc kế tiếp, nhập địa chỉ IP của T\n\ncấu hình. \n\u2022 Đặt tên cho tập tin hoặc là lấy tên mặc định. \n\u2022 Xác nhận lại các chọn lựa vừa rồi bằng cách gõ yes. \n\nu n y bạn có thể khôi phục lại cấu hình route\ndự phòng trên TFTP server về router. Sau đ ây là các bước thực hiện: \n\nNhập lệnh copy ru\n\u2022 Ở dấu nhắc kế tiếp, nhập địa \n\u2022 Kế tiếp, nhập tên của tập tin c\n\u2022 Xác nhận lại các chọn lựa\n\n\n\n 106\n\n \n\nHình 5.2.3a \n\n \n\nHình 5.2.3b \n\n5.2.4. Quản lý tập tin cấu hình bằ  dán \n\nM\nl\nl\n\nng cách cắt \u2013\n\nột cách khác để tạo tập tin cấu hình dự phòng là chép lại kết quả hiển thị của \nệnh show running-config. Từ thiết bị đầu cuối kết nối vào router, chúng ta chép \nại kết quả hiển thị của lệnh show running-config rồi dán vào một tập tin văn bản, \n\n\n\n 107\n\nsau đó lưu lại. Tuy nhiên tập tin văn bản này phải chỉnh sửa lại một chút trước khi \nchúng ta có thể sử dụng nó để khôi phục lại cấu hình router. \n\nSau đây là các bước thực hiện để bạn chép lại tập tin cấu hình khi bạn sử dụng \ninal: Hyper Term\n\n1. Chọn Transfer. \n2. Chọn Capture Text. \n3. Đặt tên cho tập tin văn bản mà chúng ta sẽ chép tập tin cấu hình ra. \n4. Chọn Start để bắt đầu quá trình chép. \n5. Chọn hiển thị nội dung của tập tin cấu hình bằng lệnh show running-config. \n6. Nhấn phím space bar mỗi khi có dấu nhắc \u201c--More--\u201d xuất hiện. \n7. Sau khi tập tin cấu hình đã hiển thị đầy đủ, bạn kết thúc quá trình chép bằng \n\ncách: \n8. Chọn Transfer. \n9. Chọn Capture. \n10. Chọn Stop. \n\nSau khi quá trình chép hoàn tất, bạn cần xoá bớt một số hang trong tập tin cấu hình \nđể sau này chúng ta có thể sử dụng tập tin văn bản này \u201cdán\u201d lại vào router. Ngoài \nra, bạn có thể them một số hang chú thích vào tập tin cấu hình. Các hàng chú thích \nnày được bắt đầu bằng dấu chấm th ng. \n\n \n\nBạn có thể sử dụng Notepad để ch n cấu hình. Bạn ở Notepad, chọn \nFile>Open\n\n\u2022 Bất kỳ hàng nào ở sau dòng \u201cEnd\u201d \n\nBạn them lệnh no shutdown vào cuối mỗi phần cấu hình của các cổng giao tiếp. \nSau đó chọn File>Save để lưu lại tập tin cấu hình. \n\nan (!) ở đầu hà\n\nỉnh sửa tập ti\n. Chọn tên của tập tin cấu hình mà bạn vừa chép được. Nhấn phím \n\nOpen. \n\nSau đây là những hàng trong tập tin cấu hình mà bạn cần xoá: \n\n\u2022 Show running-config \n\u2022 Building configuration\u2026 \n\u2022 Current configuration: \n\u2022 -More- \n\n\n\n 108\n\nSau này, từ kết nối bằng HyperTerminal bạn có thể khôi phục lại tập tin cấu hình \ncho router. Trước tiên, bạn phải xoá hết tập tin cấu hình đang có trong router bằng \nlệnh erase startup-config ở chế độ EXEC đặc quyền. Sau đó khởi động lại router \nb\n\n. \nép lên router. \n\n\u2022 Từng dòng trong tập tin cấu hình sẽ được nhập vào y như lúc bạn gõ lệnh đó \n\n\u2022 T\n\u2022 ạn nhân Ctrl-Z để thoát khỏi \n\n\u2022 L\ns\n\nằng lệnh reload. \n\nSau đây là câc bước thực hiện để chép lại tập tin cấu hình cho router từ kết nối \nHyperTerminal: \n\n\u2022 Chuyển vào chế độ cấu hình toàn cục. \n\u2022 Trên HyperTerminal chọn Transfer>Send Text File\n\u2022 Chọn tên của tập tin cấu hình mà bạn cần ch\n\nvậy. \nheo dõi quá trình chép để xem có xảy ra lỗi gì hay không. \n\n Sau khi tập tin cấu hình đã được chép xong, b\nchế độ cấu hình toàn cục. \nưu lại thành tập tin cấu hình khởi động bằng lệnh copy running-config \ntartup-config. \n\n \n \n\nHình 5.2.4a: Quá Trình chép tập tin cấu hình từ router  \nthành tập tin văn bản bằng kết nối HyperTerminal \n\n\n\n 109\n\n \n\nHình 5.2.4b: Quá trình chép tập tin cấu hình vào router bằng \n\n kết nối HyperTerminal \n\n5\n\nT\n\nấp cho các router, switch trong hệ thống mạng. \n\nr thường yêu cầu bạn \n IOS mới. Router sẽ \n\nc\n\n \n.2.5. Quản lý Cisco IOS bằng TFTP \n\nhỉnh thoảng router cũng cần lưu dự phòng hoặc nâng cấp IOS. Đầu tiên sau khi \nmua router, chúng ta cần lưu lại IOS để dự phòng. Bạn có thể đặt IOS này trên một \nserver trung tâm chung với các IOS khác. Các IOS này được sử dụng để thay thế \nhay nâng c\n\nServer phải có chạy dịch vụ TFTP và chúng ta chép IOS từ server lên router bằng \nlệnh copy tftp flash ở chế độ EXEC đặc quyền. \n\nSau khi nhập lệnh trên, router sẽ hiển thị dấu nhắc yêu cầu bạn nhập địa chỉ IP của \nTFTP server. Sau đó router sẽ yêu cầu bạn xoá flash. Route\nxoá flash khi bộ nhớ flash không còn đủ chỗ trống để lưu them\nhiển thị một chuỗi các chứ \u201ce\u201d trong suốt quá trình xoá flash. \n\nSau khi xoá xong flash, router bắt đầu tải IOS mới về. Router sẽ hiển thị một chuỗi \nác dấu chấm than (!) trong suốt quá trình chép. Một IOS có thể lớn khoảng vài \n\nMegabyte nên quá trình này cũng sẽ tốn một khoảng thời gian. \n\n\n\n 110\n\nSau khi chép xong, router sẽ kiểm tra lại IOS mới trong flash. Sau khi kiểm tra \nhoàn tất thì lúc này router đã sẵn sang cho bạn khởi động lại để sử dụng IOS mới. \n\n \n\nHình 5.2.5 \n\n \n\n5.2.6. Quản lý IOS băng Xmodem \n\nhi khởi động router mà IOS lưu trong flash bị xoá mất hoK ặc bị lỗi thì bạn phải \n\nNếu trong flash vẫn có một IOS bình thường thì bạn thử khởi động router bằng \nIOS này bằng lệnh boot flash:. Ví dụ: nếu trong flash có rommon 1>boot \nflash:c2600-is-mz.121-5 \n\nNếu router khởi động bình thường thì có 2 vấn đề bạn cần kiểm tra xem tại sao \nrouter lại khởi động vào chế độ ROMmon mà không khởi động từ IOS trong flash. \nĐầu tiên, bạn dung lệnh show version để kiểm tra giá trị của thanh ghi cấu hình \nxem có đúng giá trị mặc định hay không. Nếu giá trị thanh ghi cấu hình đúng thì \n\nkhôi phục lại IOS từ chế độ ROM monitor (ROMmon). Ở nhiều thiết bị Cisco, chế \nđộ ROMmon được hiển thị bởi dấu nhắc rommon 1> \n\nBước đầu tiên bạn cần phải xác định xem tại sao router không tải được IOS từ \nflash. Nguyên nhân là do mất IOS hay IOS bị lỗi. Bạn kiểm tra flash bằng lệnh dir \nflash: \n\n\n\n 111\n\nbạn dung lệnh show startup-config để xem có lệnh boot system nào cấu hình cho \nrouter khởi động vào chế độ ROM monitor hay không. \n\nNếu router vẫn không khởi động được hoặc là bạn không thấy có IOS nào trong \nflash thì bạn cần phải chép một IOS mới. Từ chế độ ROMmon, bạn có thể chép tập \ntin IOS bằng Xmodem qua đường console hoặc bằng TFTP. \n\nChép IOS bằng Xmodem từ chế độ ROMmon. \n\nTrước tiên, bạn cần phải có tập tin IOS trên máy tính như HyperTerminal chẳng \nhạn. Bạn có thể chép IOS với tốc độ mặc định của đường console là 9600, hoặc là \nbạn có thể nâng tốc độ lên 115200. Trong chế độ ROMmon, bạn dùng lệnh \nconfreg, router sẽ hiển thị các giá trị mà bạn có thể thay đổi được. \n\nSau đó bạn sẽ gặp câu hỏi \u201cchange console baud rate? y/n [n];\u201d, nhập chữ y để xác \nnhận tốc độ mới. Sau khi thay đổi nsole và khởi động lại router vào \nchế độ ROMmon, bạn nên kết thúc phiên k i cũ (tốc độ 9600) và thiết lập lại \nphiên kết nối HyperTerminal mới với tốc độ mới là 115200 bit/s. \n\ntốc đường co\nết nố\n\n \n\nHình 5.2.6a \n\nờ bạn dùng lệnh xmodeBây gi m để chép phần mềm IOS từ PC. Cấu trúc câu lệnh \nnày h e_file_name. Ví dụ: bạn chép IOS có tên là \n\u201cc2 0\n\n n ư sau: xmodem \u2013c imag\n60 -is-mz.122-10a.bin\u201d thì bạn gõ lệnh như sau: \n\n\n\n 112\n\nXmodem \u2013c c2600-í-mz.122-10a.bin \n\nk\n\nS\n\nTham số -c là để cho quá trình Xmodem sử dụng CRC (Cyclic Rađunancy Check) \niểm tra lỗi trong suốt quá trình chép. \n\nau đó router sẽ hiển thị một dòng thông báo chưa bắt đầu quá trình chép và một \nthông điệp cảnh báo. Thông điệp này cảnh báo là nội dung bộ nhớ flash sẽ bị mất \nnếu chúng ta tiếp tục quá trình này và yêu cầu chúng ta xác nhận có tiếp tục hay \nkhông. Nếu chúng ta xác nhận cho tiếp tục thì router sẽ bắt đầu thực hiện chép \nIOS. \n\n \n\nHình 5.2.6b: Lệnh Xmodem \n\n \n\núc này bạn cần cho bắt đầu quá trình Xmodem từ chương trình giả lập đầu cuối. \nTrong HyperTerminal bạn chọn Transfer>Send File. Trong cửa sổ của Send File: \nbạn chọn tên và vị trí lưu tập tin IOS, chọn giao thức là Xmodem, rồi bắt đầu quá \ntrinh truyền. Trong suốt quá trình truyền, ửa sổ Send File sẽ hiển thị trạng thái \ntruyền. \n\nKhi quá trình truyền hoàn tất, bạn sẽ gặp một thông điệp cho biết là bộ nhớ flash \nđang bị xoá, sau đó IOS được chép vào flash. Cuối cùng bạn gặp thông điệp \n\u201cDowbload Complete!\u201d. Trước khi khởi động lại router, bạn cần phải cài đặt lại tốc \n\nL\n\n c\n\n\n\n 113\n\nđộ đường cốnle là 9600 và đặt lại giá trị thanh ghi cấu hình là 0x2102 bằng lệnh \nconfig-register 0x2102. \n\nTrong lúc router đang khởi động lại thì bạn nên kết thúc phiên kết nối 115200 và \nthiết lập lại phiên kết nối mới với tộc độ 9600. \n\n5.2.7. Biến môi trường \n\nBạn có thể khôi phục IOS bằng TFTP. Chép IOS bằng TFTP trong chế độ \nROMmon là cách nhanh nhất để khôi phục IOS cho router. Để thực hiện cách này, \nbạn cài đặt biến môi trường rồi dùng lệnh tftpdnld. \n\nChế độ ROMmon có chức năng rất giới hạn vì chưa tải được tập tin cấu hình khi \nkhởi động router. Do đó router không hề có IP hay cấu hình cho cổng giao tiếp \nnào. Các biến môi trường sẽ cung cấp cho router một cấu hình tối thiể  cho phép \nchạy TFTP để chép IOS. TFTP tr OMmon chỉ hoạt động được với \nc  bạn cần cài đặt các đặc tính IP cho cổng \nLAN này. ến môi trường, đầu tiên bạn nhập tên biến, \nti biến đó (TÊN BIẾN = giá trị cài \nđ\nR\n\nS ld: \n\nT_GATEWAY: đường mặc định cho cổng LAN. \n\u2022 TFTP_SERVER: địa chỉ IP của TFTP server. \n\n server. \n\nĐể ng, bạn dùng lệnh set. \n\nu\nong chế độ R\n\nổng LAN đầu tiên trên router, do đó\nĐể cài đặt giá trị cho các bi\n\nếp theo là dấu bằng (=) rồi đến giá trị cài đặt cho \nặt). Vi dụ: bạn muốn đặt địa chỉ IP là 10.0.0.1 thì ở dấu nhắc của chế độ \nOMmon bạn nhập câu lệnh là: IP_ADDRESS=10.0.0.1 \n\nau đây là các biến tối thiểu mà bạn cần phải đặt để sử dụng cho lệnh tfpđn\n\n\u2022 IP_ADDRESS: địa chỉ IP cho cổng LAN. \n\u2022 IP_SUBNET_MASK:subnet mask cho cổng LAN. \n\u2022 DEFAUL\n\n\u2022 TFTP_FILE: tên tập tin IOS lưu trên\n\nkiểm tra lại giá trị của các biến môi trườ\n\n\n\n 114\n\n \n\nHình 5.2.6c: Cửa sổ Send File \n\nSau khi cài đặt xong các biến m ệnh tftpdnld, không có tham \nsố nào tiếp theo hết. Router sẽ hiển thị lại giá trị các biến, theo sau là thông điệp \n\nnh báo quá trình này sẽ xoá flash và yêu cầu chúng ta xác nhận có cho tiếp tục \n\ni động lại với IOS mới trong flash. \n\nrsion. Lệnh show version có thể kiểm tra được tập tin hiện tại \ntrong flash và tổng dung lượng của bộ nhớ flash. Ngoài ra lệnh này còn cung cấp \n\nôi trường, bạn nhập l\n\ncả\nquá trình này hay không. \n\nTrong quá trình chép, router hiển thị dấu chấm than (!) cho biết đã nhận được các \ngói dữ liệu. Sau khi nhận xong tập tin IOS, router bắt đầu xoá flash rồi chép tập tin \nIOS mới vào flash. Bạn sẽ gặp một thông báo khi quá trình này hoàn tất. \n\nSau đó, từ dấu nhắc của chế độ ROMmon, bạn có thể khởi động lài router bằng \ncách nhập chữ i. Router sẽ khở\n\n5.2.8. Kiểm tra tập tin hệ thống \n\nCó rất nhiều lệnh để kiểm tra tập tin hệ thống của router. Trong đó bạn có thể sử \ndụng lệnh show ve\n\nthêm một số thông tin về lần tải IOS gần nhất như: trong lần khởi động gần nhất, \nrouter tải IOS nào, từ đâu; giá trị thanh ghi cấu hình hiện tại là bao nhiêu. Nếu vị \ntrí mà router tải IOS trong flash đã bị mất hoặc bị lỗi, hoặc là có lệnh boot system \ntrong tập tin cấu hình khởi động. \n\n\n\n 115\n\nBên cạnh đó, bạn có thể dùng lênh show flash để kiểm tra tập tin hệ thống. Lệnh \nnày kiểm tra được trong flash hiện đang có tập tin IOS nào, tổng dung lượng flash \ncòn trống là bao nhiêu. Chúng ta thường dùng lệnh này để xem bộ nhớ flash có đủ \n\nc lệnh boot system. Lệnh \nng. Chúng ta có thể cấu \n\nhình  và router sẽ thực thi theo thứ tự các câu lệnh này trong \ntập \n\nR\nRouter#show version \nC\nI\nSOFTWARE (fc1) \nC\nComplie Thu 19-Jun-03 16:35 by pwade \nI\n \nROM: System\nf\nS\nS\nS\nC  memory \nProcessor board ID 23101339, w\nB\nX\nSuper LAT software (copyright 1990 by Meridian Technology Corp) \nTN3270 Em\nBasic Rae ISDN software, Version 1.1. \n1 FastEthernet/IEEE 802.3 interface(s) \n2 Low-speed serial (sync/async) network interface(s) \n1 ISDN Basic Rate interface(s) \n32K bytes of non-voltatile configuration memory. \n16384K bytes of processor board System flash (Read/Write) \n \nConfiguration register is 0x2102 \n\ndung lượng cho IOS mới hay không. \n\nNhư các phần trên đã đề cập, tập tin cấu hình có thể có cá\nboot system xác định cho router vị trí tải IOS khi khởi độ\n\n nhiều lệnh boot system\ntin cấu hình. \n\nouter# show version \n\nisco Interface Operating System Software \nOS (tm) C2600 Software (C2600-JK803S-M), Version 12.2 (17a), RELEASE \n\nopyright (c) 1986-2006 by Cisco  System, Inc \n\nmage text-base: 0x8000808C, data-base: 0x815F7B34 \n\n Bootstrap, Version 12.2 (7r) [cmong 7r], RELEASE SOFTWARE \nc1) \nGCTT-HCM uptime 1 week, 1 day, 1 hour, 9 minutes \nystem restarted by power-on \nystem image file is \u201cflash:c2500-d-l.120-10\u201d \nisco 2500 (68030) processor (revision N) with 2048K/2048 K bytes of\n\nith hardware revise 00000000 \nridging software \n25 software, Version 3.0.0 \n\nulation software \n\nHình 5.2.8a \n\n\n\n 116\n\n \n\nTỔNG KẾT \n\nSau \n\n. \n\nđây là các ý chính các bạn cần nắm được trong chương này: \n\n\u2022 Xác định quá trình khởi động router. \n\u2022 Nắm được các thiết bị Cisco tìm và tải IOS như thế nào. \n\u2022 Sử dụng lệnh boot system. \n\u2022 Xác định giá trị thanh ghi cấu hình\n\u2022 Xử lý sự cố. \n\u2022 Xác định tập tin Cisco IOS và chức năng của nó. \n\u2022 Nắm được các vị trí mà router lưu các loại tập tin khác nhau. \n\u2022 Nắm được cấu trúc tên của IOS. \n\u2022 Quản lý tập tin cấu hình bằng TFTP. \n\u2022 Quản lý tập tin cấu hình bằng cắt \u2013 dán. \n\u2022 Quản lý IOS bằng TFTP. \n\u2022 Quản lý IOS bằng Xmodem. \n\u2022 Kiểm tra tập tin hệ thồng bằng các lệnh show. \n\n \n \n\n\n\n 117\n\nCHƯƠ G 6 \n\nĐỊNH TUYẾN VÀ CÁ ỨC ĐỊNH TUYẾN \n\nGIỚI THIỆU \n\nĐịnh tuyến đơn giản chỉ là tìm đường đi từ mạng này đến mạng khác. Thông tin về \nnhững con đường này có thể là được cập nhật tự động từ các router khác hoặc là do \nngười quản trị mạng chỉ định cho router. \n\nChương này sẽ giới thiệu các khái niệm về định tuyến động, các loại giao thức \nđịnh tuyến động và phân tích mỗi loại một giao thức tiêu biểu. \n\nNgười quản trị mạng khi chọn lựa một giao thức định tuyến động cần cân nhắc một \nsố yếu tố như: độ lớn của hệ thống mạng, băng thông các đường truyền, khả năng \ncủa router. loại router và phiên bản router, các giao thức đang chạy trong hệ thống \nmạng. Chương này mô tả chi tiết về sự khác nhau giữa các giao thức định tuyến để \ngiúp cho nhà quản trị mạng trong việc chọn lựa một giao thức định tuyến. \n\nKhi hoàn tất chương này, các bạn sẽ thực hiện được những việc sau: \n\n\u2022 Giải thích được ý nghĩa của định tuyến tĩnh. \n\n\u2022 Nhận biết giao thức định tuyến theo vectơ khoảng cách. \n\ng tin định \ntuy\n\n6.1 Giớ\n\n6.11\n\nN\n\nC GIAO TH\n\n\u2022 Cấu hình đường cố định và đường mặc định cho router. \n\u2022 Kiểm tra và xử lý sự cố liên quan đến đường cố định và đường mặc định của \n\nrouter. \n\u2022 Phân biệt các loại giao thức định tuyến. \n\n\u2022 Nhận biết giao thức định tuyến theo trạng thái đường liên kết.  \n\u2022 Mô tả đặc điểm cơ bản của các giao thức định tuyến thông dụng. \n\u2022 Phân biệt giao thức định tuyến nội bộ. \n\u2022 Phân biệt giao thức định tuyến ngoại vi. \n\u2022 Cấu hình RIP (Routing Information Protocol \u2013 Giao thức thôn\n\nến) cho router. \n\ni thiệu về định tuyến tĩnh \n\n .Giới thiệu về định tuyến  \n\n\n\n 118\n\nĐịnh u\n.Tất cả a vào địa chỉ IP đích của gói dữ liệu để \nchuy điều này \n,\nt  thì router tự động học những thông tin này từ các router khác .Còn nếu \nr\nc\n\nĐ\nn\nm\nđ\nm\nm\nt\nr\nt h \ntuyến động cho một số mục đích đặc biệt. \n\n6.1.2. Hoạt động của định tuyến tĩnh. \n\nHoạt động của định tuyến tĩnh có thể chia ra làm 3 bước như sau: \n\nấu hình các đường cố định cho router \n\u2022 Router cài đặt các đường đi này vào bảng định tuyến . \n\u2022 Gói dữ liệu được định tuyến theo các đường cố định này . \n\nNgười quản trị mạng cấu hình đường cố định cho router bằng lệnh iproute.Cú \npháp của lệnh iproute như hình 6.1.2a: \n\n t yến là quá trình mà router thực hiện để chuyển gói dữ liệu tới mạng đích \ncác router dọc theo đường đi đều dự\n\nển gói theo đúng hướng đến đích cuối cùng .Để thực hiện được \nrouter phải học thông tin về đường đi tới các mạng khác .Nếu router chạy định \nuyến động\nouter chạy định tuyến tĩnh thì người quản trị mạng phải cấu hình các thông tin đến \nác mạng khác cho router . \n\nối với định tuyến tĩnh ,các thông tin về đường đi phải do người quản trị mạng \nhập cho router .Khi cấu trúc mạng có bất kỳ thay đổi nào thì chính người quản trị \nạng phải xoá hoặc thêm các thông tin về đường đi cho router .Những loại đường \n\ni như vậy gọi là đường đi cố định .Đối với hệ thống mạng lớn thì công việc bảo trì \nạng định tuyến cho router như trên tốn rất nhiều thời gian .Còn đối với hệ thống \nạng nhỏ ,ít có thay đổi thì công việc này đỡ mất công hơn .Chính vì định tuyến \nĩnh đòi hỏi người quản trị mạng phải cấu hình mọi thông tin về đường đi cho \nouter nên nó không có được tính linh hoạt như định tuyến động .Trong những hệ \nhống mạng lớn ,định tuyến tĩnh thường được sử dụng kết hợp với giao thức địn\n\n\u2022 Đầu tiên ,người quản trị mạng c\n\n \n\n \n\nHình 6.1.2a \n\n\n\n 119\n\nTrong 2 hình 6.1.2.c và 6.1.2.c là 2 câu lệch mà người quản trị của router Hoboken \ncấu hình đường cố định cho router đến mạng 172.16.1.0/24 và 172.16.5.0/24 .Ở \nhình 6.1.2.b,câu lệnh này chỉ cho router biết đường đến mạng đích đi ra bằng cổng \ngiao tiếp nào .Còn ở hình 6.1.2.c ,câu lệnh này chỉ cho router biết địa chỉ IP của \nrouter kế tiếp là gì để đến được mạng đích .Cả 2 câu lệnh đều cài đặt đường cố \nđịnh vào bảng định tuyến của router  Hoboken.Điểm khác nhau duy nhất giữa 2 \ncâu lệnh này là chỉ số tin cậy của 2 đường cố định tương ứng trên bảng định tuyến \ncủa router sẽ khác nhau. \n\n \n\nHình 6.1.2.b \n\n \n\nHình 6.1.2.c \n\nChỉ số tin cậy là một thông số đo lường độ tin cậy của một đường đi .Chỉ số này \nàng thấp thì độ tin cậy càng cao .Do đó ,nếu đến cùng một đích thì con đường \n\nỉ số tin cậy thấp hơn thì đườ\nc\nnào có ch ng đó được vào bảng định tuyến của router \n\nụng địa chỉ IP của trạm kế tiếp sẽ có chỉ \nsố tin cậy mặc định là 1,còn đường cố định sử dụng cổng ra thì có chỉ số tin cậy \ntrước .Trong ví dụ trên,đường cố định sử d\n\n\n\n 120\n\nmặc định là 0 .Nếu bạn muốn chỉ định chỉ số tin cậy thay vì sử dụng giá trị mặc \nđị ố về cổng ra/địa chỉ IP trạm kế của \n\n trong khoảng từ 0 đến 255. \n\nWa 6.3.0 255.255.255.0 172.16.4.1.130 \n\nĐ\nt\nđ ố tin cậy của đường cố định \n\n6\n\nSau đây là các bước để cấu hình đường cố ịnh : \n\n1. Xác định tất cả các mạng đ hình ,subnet mask tương ứng và \ngateway tương ứng .Gateway có thể là cổng giao tiếp trên router hoặc là địa \nchỉ của trạm kế tiếp để đến được mạng đích . \n\n2. Bạn vào chế độ cấu hình toàn cục của router . \n3. Nhập lệnh ip route với địa chỉ mạng đích ,subnet mask tương ứng và \n\ngateway tương ứng mà bạn đã xác định ở bước 1.Nếu cần thì bạn thêm \nthông số về chỉ số tin cậy . \n\n4. Lặp lại bước 3 cho những mạng đích khác  \n5. Thoát khỏi chế độ cấu hình toàn cục , \n6. Lưu tập tin cấu hình đang hoạt động thành tập tin cấu hình khởi động bằng \n\nlệnh copy running \u2013config statup-config. \nHình 6.1.3 là ví dụ về cấu hình đường cố định với cấu trúc mạng chỉ có 3 router \nkết nối đơn giản .Trên router Hoboken chúng ta phải cấu hình đường đi tới mạng \n172.16.1.0  và 172.16.5.0.Cả 2 mạn subnet mask là 255.255.255.0  \n\nKhi router Hoboken định tuyến cho các g đến mạng đích là 172.16.1.0 thì nó sử \ndụng các đường đi cố định mà ta đã cấu hình cho router để định tuyến tới router \nSterling ,còn gói nào đến mạng đích là 172.16.5.0 thì định tuyến tới router \nWaycross. \n\nnh thì bạn thêm thông số này vào sau  thông s\ncâu lệnh .Giá trị của chỉ số này nằm\n\nycross (config)# ip router 172.1\n\nNếu router không chuyển được gói ra cổng giao tiếp đã được cấu hình thì có nghĩa \nlà cổng giao tiếp đang bị đóng,đường đi tương ứng cũng sẽ không được đặt vào \nbảng định tuyến . \n\nôi khi chúng ta sử dụng đường cố định làm đường dự phòng cho đường định \nuyến động .Router sẽ chỉ sử dụng đường cố định khi đường định tuyến động bị \nứt .Để thực hiện điều này ,bạn chỉ cần đặt giá trị chỉ s\n\ncao hơn chỉ số tin cậy của giao thức định tuyến động đang sử dụng là được . \n\n.1.3. Cấu hình đường cố định \n\n đ\n\ních cần cấu \n\ng này đều có \n\nói \n\n\n\n 121\n\n \n\n \n\nHình 6.1.3 \n\nỞ\n\nng cố định cho router thông \n8.1.0 có địa chỉ của router \n\nkế tiếp là 172.16.2.1,đường tới mạng 172.16.5.0 có địa chỉ của router kế tiếp là  \n\nchuyển gói đi  \n\n mà router sẽ sử dụng trong trường hợp router không tìm \nịnh tuyến để tới đích của gói dữ liệu \n\n khung phía trên của hình 6.1.3,cả 2 câu lệnh đều chỉ đường cố định cho router \nthông qua cổng ra trên router .Trong câu lệnh này lại không chỉ định giá trị cho chỉ \nsố tin cậy nên trên bảng định tuyến 2 đường cố định nay có chỉ số tin cậy mặc định \nlà 0.Đường có chí số tin cậy bằng 0 là tương đương với mạng kết nối trực tiếp vào \nrouter . \n\nỞ khung bên dưới của hình 6.1.3, 2 câu lênh chỉ đườ\nqua địa chỉ của router kế tiếp .Đường tới mạng 172.16\n\n172.16.4.2 .Trong 2 câu này cũng không chỉ định giá trị cho chỉ số tin cậy nên 2 \nđường cố định tương ứng sẽ có chỉ số tin cậy mặc định là 1. \n\n6.1.4 Cấu hình đường mặc định cho router \n\nĐường mặc định là đường\nthấy đường đi nào phù hợp trong bảng đ\n\n\n\n 122\n\n.Chúng ta thường  cấu hình đường mặc định cho đường ra Internet của router vì \nrouter không cần phải lưu thông tin định tuyến tới từng mạng trên Internet .Lệnh \n\nu hình đường mặc định thực chất cũng là lệnh cấu hình đường cố định ,cụ thể là \nệnh như sau: \n\nddress/outgoing interface ] \n\nrou  ẽ được định tuyến \ntới n\n\nSau\n\n là 0.0.0.0. \nổng giao tiếp trên router kế tiếp .Thông \n\nthường thì chúng ta nên sử dụng địa chỉ IP của router kế tiếp làm gateway . \n\nlệnh copy \n\nvà tới mạng 1720160.5.0  \ntrên router Waỷcoss để chỉ đường tới từng mạng một .Nhưng cách này thì không \nphả\n\nSterlin c mạng khác thông qua một cổng Serial 0 mà thôi \n.Tư ột kết nối đến tất cả các mạng \n\n sử dụng đường mặc định để định \ntuyế c tiếp vào nó . \n\ncấ\ncâu l\n\nIp route 0.0.0.0.0.0.0.0[next \u2013hop-a\n\nSubnet 0.0.0.0 khi được thực hiện phép toán AND logic với bất kỳ địa chỉ IP đích \nnào cũng có kết quả là mạng  0.0.0.0 .Do đó ,nếu gói dữ liệu có địa chỉ đích mà \n\nter không tìm được đường nào phù hợp thì gói dữ liệu  đó s\nmạ g 0.0.0.0. \n\n đây là các bước cấu hình đường mặc định : \n\n\u2022 Vào chế độ cấu hình toàn cục , \nNhập lệnh ip route với mạng đích là 0.0.0.0 và subnet mask tương ứng\nGateway của đường mặc định có thể là c\n\n\u2022 Thoát khỏi chế độ cấu hình toàn cục , \n\u2022 Lưu lại thành tập tin cấu hình khởi động trong NVPAM bằng  \n\nrunning \u2013config. \nTiếp tục  xét ví dụ trong phần 6.1.3 :router Hoboken đã được cấu hình để định \ntuyến dữ liệu tới mạng  172.16.1.0 trên router Sterling \n\ni là một giải pháp hay cho những hệ thống mạng lớn. \n\ng kết nối đến tất cả cá\nơng tự waycrooss cũng vậy .Waycross chỉ có m\n\nkhác thông qua cổng Serial 1 mà thôi .Do đó chúng ta cấu hình đường mặc định \ncho Sterling và và Waycrooss thì 2 router này sẽ\n\nn cho gói dữ liệu đến tất cả các mạng nào không kết nối trự\n\n\n\n 123\n\n \n\nHình 6.1.4a \n\n \n\nHình 6.1.4b \n\n6.1.5.Kiểm tra cấu hình đường  cố định  \n\nSau khi cấu hình đường cố định ,chúng ta phải kiểm tra xem bảng định tuyến đã \ncó đường ,cố định mà chúng ta đã cấu hình hay chưa ,hoạt động định tuyến có \nđúng hay không .Bạn dùng lệnh show running \u2013config để kiểm tra nội dung tập tin \n\n\n\n 124\n\ncấu hình đang chạy trên RAM xem  hình đường cố định đã được nhập \nvào ệnh show ip route để xem có đường cố định \n\nông . \n\n\u2022 Kiểm tra xem câu lệnh \u2013cấu hình đường cố định có đúng không .Nếu không \n\neroute cho thấy router Sterling \n\nwaycross.Chúng ta telnet vào router Hoboken .Từ router Hoboken chúng ta thử \nping ạng 172.16.5.0 .Lệnh ping này sẽ thành công vì Hoboken \nkết nối trực tiếp với waycross. \n\ncâu lệnh cấu\nđúng chưa .Sau đó bạn dùng l\n\ntrong bảng định tuyến hay kh\n\nSau đây là các bước kiểm tra cấu hình đường cố định : \n\n\u2022 Ở chế độ đặc quyền ,bạn nhập lệnh show running-config để xem tập tin \ncấu hình đang hoạt động . \n\nđúng thì bạn phải vào lại chế độ cấu hình toàn cục ,xoá câu lệnh sai đi và \nnhập lại câu lệnh mới . \n\n\u2022 Nhập lệnh show ip roule. \n\u2022 Kiểm tra xem đường cố định mà bạn đã cấu hình có trong bảng định tuyến \n\nhay không  \n6.1.6. Xử lý sự cố  \n\nXét ví dụ trong phần 6.1.3:router Hoboken đã được cấu hình đường cố định tới \nmạng 172.16.1.0 trên Sterling và tới mạng 172.16.5.0 trên waycross .Với cấu hình \nnhư vậy thì node trong mạng 172.16.1.0 ở Sterling không thể truyền dữ liệu cho \nnode  trong mạng 172.16.5.0 được .Bây giờ trên router Sterling ,bạn thực hiện \nlệnh ping  tới một node trong mạng 172.16.5.0.Lệnh ping  không thành công .Sau \nđó bạn dùng lệnh traceroute đến  node mà bạn vừa mới ping để xem lệnh \ntraceroute  bị rớt ở đâu .Kết quả của câu lệnh trac\nnhận được gói ICMP  trả lời từ router Hoboken mà không nhận được từ router \n\nđến node trong m\n\n\n\n 125\n\n \n\n \n\nHình 6.1.6a \n\n \n\nHình 6.1.6b \n\n\n\n 126\n\n \n\nHình 6.1.6c \n\n6.2 Tổng  quan về định tuyến động  \n\n6.2.1 Giới thiệu về giao thức định tuyến động  \n\nGiao thức định tuyến khác với giao thức được định tuyến cả về chức năng và \nnhiệm vụ . \n\nGiao thức định tuyến được sử dụng để giao tiếp giữa các router với nhau. \n\nGiao thức định tuyến cho phép router này chia sẻ các thông tin định tuyến mà nó \nbiết cho các router khác .Từ đó ,các router có thể xây dựng và bảo trì bảng định \ntuyến của nó. \n\nSau đây là một số giao thức định tu\n\ning information Protocol(RIP) \n\u2022 Interior Gateway Routing Protocol(IGRP) \n\nCòn ệu của \nngư\nchỉ lớp\ntrúc đị  \n\nyến : \n\n\u2022 Rout\n\n\u2022 Enhanced Inteior Gateway Routing Protocol(EIGRP) \n\u2022 Open Shortest Path First(OSPF) \n\n dữ li giao thức được định tuyến thì được sử dụng để định hướng cho\nời dùng .Một giao thức được định tuyến sẽ cung cấp đầy đủ thông tin về địa \n\n mạng để gói dữ liệu có thể truyền đi từ host này đến host khác dựa trên cấu \na chỉ đó .\n\n\n\n 127\n\nSau\n\n6.2.2.Autonmous sytem(AS) (H  thống tự quản ) \n\nHệ ới cùng một cơ chế quản \ntrị v ột đơn vị . \n\nTổ chứ  Internet \nNum e số cho mỗi AS .Chỉ số này dài 16 bit .Một số \ngiao th hư giao thức IRGP của Cisco,đòi hỏi phải có số AS \nxác n\n\n đây là các giao thức được định tuyến: \n\n\u2022 Internet Protocol (IP) \n\u2022 Internetwork Packet Exchange(IPX) \n\nệ\n\ntự quản (AS) là một tập hợp các mạng hoạt động dư\nề định tuyến .Từ bên ngoài nhìn vào ,một AS  được xem như m\n\nc Đăng ký số Internet của Mỹ (ARIN-American Regitry of \nb rs)là nơi quản lý việc cấp \nức định tuyến ,ví dụ n\n\nđị h khi hoạt động . \n\n \n\nHình 6.2.2:Một AS là bao gồm các router hoạt động dưới cùng \n\n một cơ chế quản trị \n\n \n\n6.2.3. Muc đích của giao thức định tuyến và hệ thống tự quản  \n\nMúc đích của giao thức định tuyến là xây dựng và bảo trì bảng định tuyến .Bảng \nđịnh tuyến này mang thông tin về các mạng khác và các cổng giao tiếp trên router \nđến các mạng này .Router sử dụng giao thức định tuyến để quản lý thông tin nhận \nđược từ các router khác ,thông tin từ cấu hình của các cổng giao tiếp và thông tin \ncấu hình các đường cố định . \n\n\n\n 128\n\nGiao thức định tuyến cấp nhật về ng ,chọn đường tốt nhất đặt vào \nbảng định tuy\nsử dụng  thức \nđ . \n\nịnh tuyến động hoạt động trên cơ sở các thuật toán định tuyến .Khi cấu trúc mạng \n\nhức định tuyến  \n\nản sao của bảng định tuyến \n\nhông tin từ router A .Sau \n\n tăng số \n\nho l\n\nđịnh ảng định tuyến này cho router láng giềng khác là router \n\nC.\n\nChuy ter lán giềng theo định kỳ  \n\ntất cả các đườ\nến và xoá đi khi đường đó không sử dụng được nữa .Còn router thì \n\n thông tin trêng bảng định tuyến để chuyển gói dữ liệu của các giao\nược định tuyến \n\nĐ\ncó bất kỳ thay đổi nào như mở rộng thêm ,cấu hình lại ,hay bị trục trặc thì khi đó ta \nnói hệ thống mạng đã được hội tụ .Thời gian để các  router đồng bộ với nhau càng \nngắn càng tốt vì khi các router chưa đồng bộ với nhau về các thông tin trên mạng \nthì sẽ định tuyến sai. \n\nVới hệ thống tự quản (AS) ,toàn bộ hệ thống mạng toàn cầu được chia ra thành \nnhiều mạng nhỏ, dể quản lý hơn.Mỗi AS có một số AS riêng ,không trùng lặp với \nbất kỳ AS khác ,và mỗi AS có cơ chế quản trị riêng của mình . \n\n6.2.5 Phân loại các giao t\n\nĐa số các thuật toán định tuyến được xếp vào 2 loại sau : \n\n\u2022 Vectơ khoảng cách  \n\n\u2022 Trạng thái đường liên kết . \n\nĐịnh tuyến theo vectơ khoảng cách thực hiện truyền b\n\ntừ router này sang router khác theo định kỳ .Việc cập nhật định kỳ giữa các router \n\ngiúp trao đổi thông tin khi cấu trúc mạng thay đổi .Thuật toán định tuyến theo \n\nvéctơ khoảng cách còn được gọi  là thuật toán Bellman-Ford. \n\nMỗi router nhận được bảng định tuyến của những router láng giềng kết nối trực \n\ntiếp với nó .Ví dụ như hình 6.2.5a :router B nhận được t\n\nđó router B sẽ cộng thêm khoảng cách từ router B đến router (ví dụ như\n\np ên )vào các thông tin định tuyến nhận được từ A.Khi đó router B sẽ có bảng \n\ntuyến mới và truyền b\n\nQuá trình này xảy ra tương tự cho tất cả các router láng giềng khác. \n\nển bảng định tyến cho rou\n\n\n\n 129\n\nvà n h   tí h lại vectơ khoảng các\n\n \n\nHình 6.2.5.a \n\nRouter thu thập thông tin về khoảng cách đến các mạng khác ,từ đó nó xây dựng \nvà bảo trì một cơ sở dữ liệu về thông tin định tuyến trong mạng. Tuy nhiên , hoạt \nđộng theo thuật toán vectơ khoảng cách như vậy thì router sẽ không biết được \nchính xác cấu trúc của toàn bộ hệ thống mạng mà chỉ biết được các router láng \ngiềng kết nối trực tiếp với nó mà thôi . \n\nKhi sử dụng định tuyến theo vectơ khoảng cách ,bước đầu tiên là router phải xác \nđịnh các router láng giềng với nó .Các mạng kết nối trực tiếp vào cổng giao tiếp \ncủa router sẽ có khoảng cách là 0.Còn đường đi tới các mạng không kết nối trực \ntiếp vào router thì router sẽ chọn đường tốt nhất dựa trên thông tin mà nó nhận \nđượctừ các router láng giềng .Ví dụ như hình vẽ 6.2.5b :router A nhận được thông \ntin về các mạng khác từ router B .Các thông tin này được đặt trong bảng định \ntuyến với vectơ khoảng cách đã được tính toán lại cho biết từ router A đến mạng \nđích thì đi theo hướng nào ,khoảng cách bao nhiêu. \n\nBảng định tuyến được cập nhật khi c ạng có sự thay đổi .Quá trình cập \nnhật này cũng diễn ra từng bước m  này đến router khác.Khi cập nhật \n\nộ bảng định tuyến của nó cho các router láng giềng \n\nấu trúc m\nột từ router\n\n,mỗi router gửi đi toàn b\n\n\n\n 130\n\n.Trong bảng định tuyến có thông tin về đường đi tới từng mạng đích :tổng chi phí \ncho đường đi ,địa chỉ của router kế tiếp . \n\n \n\nHình 6.2.5b \n\n \n\nHình 6.2.5c \n\n\n\n 131\n\nMột ví dụ tương tự vectơ khoảng cách mà bạn thường thấy là bảng thông tin chỉ \nđường ở các giao lộ đường cao tốc .Trên bảng này có các ký hiệu cho biết hướng \nđi tới đích và khoảng cánh tới đó là bao xa. \n\n6.2.6. Đặc điểm của giao thức định tuyến theo trạng thái đường liên kết  \n\nThuật toán định tuyến theo trạng thái đường liên kết là thuật toán Dijkstras hay \n\nđường liên kết sử dụng những công cụ sau: \n\n\u2022 Thông điệp thông báo trạng thái đường liên kết (LSA-Link-state \n\n\u2022 Bảng định tuyến :chứa danh sách các đường đi đã được chọn lựa . \nQuá trình thu thập thông tin mạng để thực hiện định tuyến theo trạng thái đường \nliên kết: \n\nMỗi router bắt đầu trao đổi LSA với tất cả các router khác, trong đó LSA mang  \ncơ sở dữ liệu dựa trên thông tin của các LSA. \n\nMỗi router tiến hành xây dựng lại cấu trúc mạng theo dạng hình cây với bản than \nnó là gốc ,từ đó router vẽ ra tất cả các đường đi tới tất cả các mạng trong hệ thống \n.Sau đó thuật toán SPF chọn đường ngắn nhất để đưa vào bảng định tuyến. Trên \nbảng định tuyến sẽ chứa thông tin về các đường đi đã được chọn với cổng ra \ntương ứng.Bên cạnh đó, router vẫn tiếp tục duy trì cơ sở dữ liệu về cấu trúc hệ \nthống mạng và trạng thái của các đường liên kết. Router nào phát hiện cấu trúc \nmạng thay đổi đầu tiên sẽ phát thông tin cập nhật cho tất cả các router \nkhác.Router phát gói LSA, trong đó có thông tin về router mới, các thay đổi về \ntrạng thái đường liên kết. Gói LSA hát đi cho tất cả các router khác. \n\ncòn gọi là thuật toán SPF (Shortest Path First tìm đường ngắn nhất).Thuật toán \nđịnh tuyến theo trạng thái đường liên kết thực hiện việc xây dựng và bảo trì một \ncơ sở dữ liệu đầy đủ về cấu trúc của toàn bộ hệ thống mạng . \n\nĐịnh tuyến theo trạng thái \n\nAdvertisement): LSA là một gói dữ liệu nhỏ mang thông tin định tuyến \nđược truyền đi giữa  các router . \n\n\u2022 Cơ sở dữ liệu về cấu trúc mạng :được xây dựng từ thông tin thu thập được \ntừ các LSA . \n\n\u2022 Thuật toán SPF :dựa trên cơ sở dữ liệu về cấu trúc mạng ,thuật toán SPF  sẽ \ntính toán để tìm đường ngắn nhất . \n\n  này được p\n\n\n\n 132\n\n \n\nHình 6.2.6a \n\nouter có cơ sở dư liệu riêng về cấu trúc mạng và thuật toán SPF thực hiện \nán dựa trên cơ sở dữ liệu này . \n\nMỗi r\ntính to\n\n \n\nHinh 6.2.6b \n\n\n\n 133\n\nKhi router nhận được gói LSA thì nó sẽ cập nhật lại cơ sở dữ liệu của nó với \nthông tin mới vừa nhận được. Sau đó SPF sẽ tính lại để chọn đường lại và cập \nnhật lại cho bảng định tuyến . \n\nĐịnh tuyến theo trạng thái đường liên kết có một số nhược điểm sau: \n\n\u2022 Bộ sử lý trung tâm của router phải tính toán nhiều  \n\u2022 Đòi hỏi dung lương bộ nhớ phải lớn  \n\u2022 Chiếm dụng băng thông đường truyền  \n\nRouter sử dụng định tuyến theo trạng thái đường liên kết sẽ phải cần nhiều bộ nhớ \nhơn và hoạt động xử lý nhiều hơn là sử dụng định tuyến theo vectơ khoảng cách \n.Router phải có đủ bộ nhớ để lưu cơ sở dữ liệu về cấu trúc mạng ,bảng định tuyến \n.Khi khởi động việc định tuyến ,tất cả các router phải gửi gói LSA cho tất cả các \n\ng. Nhưng sau khi các \nrouter đã thu thập đủ thông tin  để xây dựng cơ sở dữ liệu về cấu trúc mạng thì \nbăng thông đường truyền không bị chiếm dụng nữa .Chỉ khi nào cấu trúc mạng \nthay đổi thì router mới phát gói LSA để cập nhật và những gói LSA  này chiếm \nmột phần băng thông rộng rất nhỏ . \n\n6.3 Tổng quát về giao thức định tuyến  \n\n6.3.1. Quyết định chọn đường đi \n\nRouter có 2  chức năng chính là : \n\n\u2022 Quyết định chọn đường đi \n\u2022 Chuyển mạch \n\nQuá trình chọn đường đi được thự ạng.Router dựa vào bảng định \ntuyến để chọn đường cho gói dữ liệu ,sau khi quyết định đường ra thì router thực \n\nrouter khác,khi đó băng thông đường truyền sẽ bị chiếm dụng làm cho băng thông \ndành cho đường truyền dữ liệu của người dùng bị giảm xuốn\n\nc hiện ở lớp M\n\nhiện việc chuyển mạch để phát gói dữ liệu . \n\nChuyển mạch là quá trình mà router thực hiện để chuyển gói từ cổng nhận vào ra \ncổng phát đi .Điểm quan trọng của quá trình này là router phải đóng gói dữ liệu \ncho phù hợp với đường truyền mà gói chuẩn bị đi ra  \n\nTrong các hình 6.3.1a-6.3.1e cho thấy cách mà router sử dụng địa chỉ mạng để \nquyết định chọn đường cho gói dữ liệu . \n\n\n\n 134\n\n \n\nHình 6.3.1a \n\n \n\nHình 6.3.1b \n\n \n\n\n\n 135\n\n \n\nHình 6.3.1c \n\n \n\nHình 6.3.1d \n\n \n\nHình 6.3.1e \n\nu hình toàn \nnh toàn cục \n\n RIP \nđịnh tuyến ,công việc \nử dụng broadcst và \n\nc router .Router sẽ dựa vào thông số định \ntuyến để chọn đường tốt nhất tới từng mạng đích. \n\n6.3.2 Cấu hình định tuyến  \n\nĐể cấu hình giao thức định tuyến ,bạn cần cấu hình trong chế độ cấ\ncục và cài đặt các đặc điểm định tuyến .Bước đầu tiên ,ở chế độ cấu hì\n,bạn cần khởi động giao thức định tuyến mà bạn muốn ,ví dụ như\n,IRGP,EIGRP  hay OSPF. Sau đó ,trong chế độ cấu hình \nchính là bạn khái báo địa chỉ IP .Định tuyến động thường s\nmulticast để trao đổi thông tin giữa cá\n\n\n\n 136\n\nLệ  \n\nLệ\nth  \n\nức TCP/IP , router sử dụng một giao thức định tuyến \nIP  thức định tuyến IP: \n\n \n \n ạng thái đường liên kết \n   \n\u2022 BGP- giao thức định tuyến ngoại theo vectơ khoảng cách  \n\ntion Protocol)được định nghĩa trong RPC 1058. \n\na đường truyền làm thông \n\nnh router dùng để khởi động giao thức định tuyến .\n\nnh network dùng để khai báo các cổng giao tiếp trên router mà ta muốn giao \nức định tuyến gửi và nhận các thông tin cập nhật về định tuyến . \n\nSau đây là các ví dụ về cấu hình định tuyến: \n\nGAD(config)#router rip \n\nGAD(config-router)#network 172.16..0.0 \n\nĐịa chỉ mạng khai báo trong câu lệnh network là địa chỉ mạng theo lớp A,B,hoặc \nC chứ không phải là địa chỉ mạng con (subnet)hay địa chỉ host riêng lẻ . \n\n \n\n6.3.3 Các giao thức định tuyến  \n\nở lớp Internet của bộ giao th\n để thực hiện việc định tuyến .Sau đây là một số giao\n\n\u2022 RIP \u2013 giao thức định tuyến nội theo vectơ khoảng cách  \n\u2022 IGRP- giao thức định tuyến nội theo vectơ khoảng cách Cisco. \n\nOSPF \u2013 giao thức đị\u2022 nh tuyến nội theo tr\n\u2022 EIGRP- giao thức mở rộng của IGRP\n\nRIP (Routing informa\n\nSau đây là các đặc điểm chính của RIP : \n\n\u2022 Là giao thức định tuyến theo vectơ khoảng cách  \n\u2022 Sử dụng số lượng hop để làm thông số chọn đường đi  \n\u2022 Nếu số lượng hop để tới đích lớn hơn 15 thì gói dữ liệu sẽ bị huỷ bỏ  \n\u2022 Cập nhật theo định kỳ mặc định là 30 giây  \nIGRP (Internet gateway routing Protocol)là giao thức được phát triển độc quyền \nbởi Cisco .Sau đây là một số đặc điểm mạnh của IGRP: \n\n\u2022 Là giao thức định tuyến theo vectơ khoảng cách  \n\u2022 Sử dụng băng thông ,tải ,độ trễ và độ tin cậy củ\n\nsố lựa chọn đường đi  \n\u2022 Cập nhật theo định kỳ mặc định là 90 giây  \n\n\n\n 137\n\nOSPF (Open Shortest Path First)là giao thức đình tuyến theo trạng thái đường liên \nkết .Sau đây là các đặc điểm chinhs của OSPF : \n\n\u2022 Là giao thức định tuyến theo trạng thái đường liên kết  \n\u2022 Được định nghĩa trong RFC 2328 , \n\u2022 Sử dụng thuật toán SPF  để tính toán chọn đường đi tốt nhất , \n\u2022 Chỉ cập nhật khi cấu trúc mạng có  thay đổi , \n\nEIGRP Là giao thức định tuyến nâng cao theo vectơ khoảng cách ,và là giao thức \nđộc quyền của Ciso.Sau đây là các ính của EIGRP: \n\n\u2022 iểm của định tuyến theo vectơ khoảng cách và định tuyến theo \n\nuyến giữa các ISP hoặc giữa ISP và khách hàng , \n\u2022 ữa các hệ tự quản (AS). \n\n6.3.4 \n\nGiao một \nđơn v\nđịnh tuyế i là chọn thông số nào và sử dụng những thông số đó ra sao để chọn \nđường i\n\nGiao 2 \ncơ ch oại này thường được sử dụng để định \ntuyến ữ n IP ngoại thường yêu cầu phải có 3 thông \n\n\u2022 Danh sách các router láng giềng để trao đổi thông tin định tuyến , \n á thông tin \n\n\u2022 uter . \n\nsự\n\nđặc điểm ch\n\n\u2022 Là giao thức định tuyến nâng cao theo vectơ khoảng cách , \n\u2022 Có chia tải. \n\nCó các ưu đ\ntrạng thái đường liên kết. \nSử dụng thuật toá\u2022 n DUAL  (Diffused Update Algorithm)để tính toán chọn \nđường tốt nhất. Cập nhật theo định kỳ mặc định là 90 gây hoặc cập nhật khi \ncó thay đổi về cấu trúc mạng. \n\nBGP (Border Gateway Protocol) là giao thức định tuyến ngoại. Sau đây là các đặc \nđiểm chính của BGP. Là giao thức định tưyến ngoại theo vectơ khoảng cách, \n\n\u2022 Được sử dụng để định t\nĐược sử dụng để định tuyến lưu lượng Internet gi\n\nHệ tự quản, IGP  và EGP  \n\nthức định tuyến nội được thiết kế để sử dụng cho hệ thống mạng của \nị tổ chức mà thôi .Điều quan trọng nhất đối với việc xây dựng một giao thức \n\nn nộ\n đ  trong hệ thống mạng . \n\nthức định tuyến ngoại được thiết kế để sử dụng giữa 2 hệ thống mạng có \nế quản lý khác nhau .Các giao thức l\n gi a các ISP .Giao thức định tuyế\n\ntin trước khi hoạt động ,đó là : \n\n\u2022 Danh sách các mạng kết nối trực tiếp mà giao thức cần quảng b\nđịnh tuyến . \nChỉ số của hệ tự quản trên ro\n\n\n\n 138\n\nGiao thức định tuyến ngoại vi cần phải phân biệt các hệ tự quản .Các bạn nên nhớ \nrằng mỗi hệ tự quản có một cơ chế quản tri riêng biệt .Giữa các hệ thống này phải \ncó một giao thức để giao tiếp được với nhau . \n\nMỗi một hệ tự quản có một con số xác định được cấp bởi tổ chức đăng ký số \nInternet của Mỹ (ARIN \u2013 America Registry of Internet Number) hoặc được cấp \nbởi nhà cung cấp dịch vụ. Con số này là số 16 bit. Các giao thức định tuyến như \nIGRP và EIGRP của Cisco đòi hỏi phải khai báo số AS khi cấu hình  \n\n \n\nHình 6.3.4 \n\n6.3.5. Vectơ khoảng cách  \n\nThuật toán vectơ khoảng cách (hay còn gọi là thuật toán Bellman-Ford)yêu cầu \nmỗi router gửi một phần hoặc toàn bộ bảng định tuyến cho các router láng giềng \nkết nối trực tiếp với nó .Dựa vào thông tin cung cấp bởi các router láng giềng \n,thuật toán vectơ khoảng cách sẽ lựa chọn đường đi tốt nhất . \n\nSử dụng các giao thức định tuyến theo vectơ khoảng cách thường tốn ít n \nrouter lại chậm và thông số được sử \n\nnày ,các router sẽ trao đổi bảng định tuyến với nhau theo định kỳ .Do vậy ,loại \n\n tài nguyê\ncủa hệ thống nhưng tốc độ đồng bộ giữa các \ndụng để chọn đường đi có thể không phù hợp với những hệ thống mạng lớn .Chủ \nyếu các giao thức định tyến theo vectơ khoảng cách chỉ xác định đường đi bằng \nkhoảng cách (số lượng hop) và hướng đi (vectơ) đến mạng đích.Theo thuật toán \n\n\n\n 139\n\nđịnh tuyến này chỉ đơn giản là mỗi router chỉ trao đổi bảng định tuyến với các \nrouter láng giềng của mình .Khi nhận được bảng định tuyến từ router láng giềng \n,router sẽ lấy con đường nào đến mạng đích có chi phí thấp nhất rồi cộng thêm \nkhoảng cách của mình vào đó thành một thông tin hoàn chỉnh về con đường đến \nmạng đích với hướng đi ,thông số đường đi từ chính nó đến đích rồi đưa vào bảng \nđịnh tuyến đó gửi đi cập nhật tiếp cho các router kế cận khác .RIP và  IGRP là 2 \ngiao thức định tuyến theo vectơ khoảng cách . \n\nChuyển bảng định tuyến cho router láng giềng theo định kỳ và tính lại vectơ \nkhoảng cách \n\n \n\nHình 6.3.5a \n\n\n\n 140\n\n \n\nHình 6.3.5b \n\n6.3.6. Trạng thái đường liên kết  \n\nThuật toán chọn đường theo trạng thái đường liên kết (hay còn gọi là thuật toán \nchọn đường ngắn nhất )thực hiện trao đổi thông tin định tuyến cho tất cả các \nrouter khi bắt đầu chạy để xây dựng một bản đồ đầy đủ về cấu trúc hệ thống mạng \n\ner còn lại .Các gói này mang \ny từ \nạng \n\n.Từ đó router tự tính toán và chọn đường đi tốt nhất đến mạng đích để đưa lên \nbảng định tuyến .Sau khi toàn bộ các router đã được hội tụ thì giao thức định \ntuyến theo trạng thái đường liên kết chỉ sử dụng gói thông tin nhỏ để cập nhật ,về \nsự thay đổi cấu trúc mạng chứ không gửi đi toàn bộ bảng định tuyến .Các gói \nthông tin cập nhật này được truyền đi cho tất cả router khi có sự thay đổi xảy ra \n,do đó tốc độ hội tụ nhanh. \n\nDo tốc độ hội tụ nhanh hơn so với giao thức định tuyến theo vectơ khoảng cách \n,nên giao thức định tuyến theo trạng thái đường liên kết ít bị lặp vòng hơn .Mặc \ndù các giao thức loại này ít bị lỗi về định tuyến hơn nhưng lại tiêu tốn nhiều tài \nnguyên hệ thong hơn .Do đó chúng mắc tiền hơn nhưng bù lại chúng co khả năng \nmở rộng hơn so với giao thức định tuyến theo vectơ khoảng cách . \n\n.Mỗi router sẽ gửi gói thông tin tới tất cả các rout\nthông tin về các mạng kết nối vào router .Mỗi router thu thập các thông tin nà\ntất cả các router khác để xây dựng một bản đồ cấu trúc đầy đủ của hệ thống m\n\n\n\n 141\n\nKhi trạng thái của một đường liên kết nào đó thay đổi thì gói quảng bá trạng thái \nđường liên kết LSA được truyền đi trên khắp hệ thống mạng .Tất cả các router \nđều nhận được gói thông tin này và dựa vào đó để điều chỉnh lại việc định tuyến \ncủa mình .Phương pháp cập nhật như vậy tin cậy hơn ,dễ kiểm tra hơn và tốn  ít \nbăng thông đường truyền hơn so với kiểu cập nhật của vectơ khoảng cách .OSPF  \nvà IS \u2013IS  là 2 giao thức định tuyến theo trạng thái đường liên kết. \n\n \n\nHình 6.3.6a \n\n \n\nHình 6.3.6b \n\n\n\n 142\n\nTổng kết \n\nSau đây là các điểm quan trọng mà các bạn cần nắm được trong chương này: \n\n\u2022 Router sẽ không chuyển gói tin nếu không tìm được đường tới đích  \nn trị mạng cấu hình cho router  \nặc biệt của đường cố định .Đường mặc định \n\ner sử dụng khi không tìm được đường nào \ntới đích \n\n kiểm tra cấu hình của đường cố định và \nđường mặc định :show ip router ,ping ,traceroute. \n\nến đường cố định và đường mặc định . \n\nvà hệ tự quản  \n\u2022\n\neo vectơ khoảng cách  \nđịnh tuyến theo trạng thái đường liên kết  \nđi \n\nự quản, IGP và EGP \n\u2022 Định tuyến theo vectơ khoảng cách  \n\n\u2022 Đường cố định là do người quả\n\u2022 Đường mặc định là một loại đ\n\nlà con đường cuối cùng cho rout\n\n\u2022 Ta có thể sử dụng các lệnh sau để\n\n\u2022 Kiểm tra và xử lý sự cố liên quan đ\n\u2022 Các giao thức định tuyến  \n\u2022 Hệ tự quản  \n\u2022 Mục đích của giao thức định tuyến \n Các loại giao thức định tuyến  \n\u2022 Đặc điểm của giao thức định tuyến th\n\u2022 Đặc điểm của giao thức \n\u2022 Quyết định chọn đường \n\u2022 Cấu hình định tuyến  \n\u2022 Các giao thức định tuyến: RIP, IGRP, OSPF, EIGRP, BGP \n\u2022 Hệ t\n\n\u2022 Định tuyến theo trạng thái đường liên kết \n\n\n\n 143\n\nCHƯƠNG 7 \n\nGIAO THỨC ĐỊNH TUYẾN THEO VECTƠ KHOẢNG CÁCH \n\nGIỚI THIỆU \n\n \n\nGia t o \u201ccuộc sống\u201c của người quản trị mạng trở nên \nđơn gi định tuyến động mà người quản trị mạng không còn \ntốn thời gian để cấu hình đường cố định và chỉnh sửa lại chúng khi có sự cố. Với \nđịnh tuyến động, router có thể tự động cập nhật và thay đổi việc định tuyến theo sự \nthay đổi của hệ thống mạng. Tuy nhiên định tuyến động cũng có những vấn đề của \nnó .Trong chương này sẽ đề cập đến các vấn đề của giao thức định tuyến theo \nvectơ khoảng cách và các phương pháp mà những nhà thiết kế sử dụng để giải \nquyết những vấn đề này. \n\nRIP (Routing Information Protocol) là một giao thức định tuyến theo vectơ khoảng \ncách được sử dụng rộng rãi trên thế giới .Mặc dù RIP không có những khả năng và \nđặc điểm như những giao thức định tuyến khác nhưng RIP  dựa trên những chuẩn \nmở và sử dụng đơn giản nên  vẫn được các nhà quản trị mạng ưa dùng .Do đó RIP \nlà một giao thức tốt để người học về mạng bước đầu làm quen .Trong chương này \nsẽ giới thiệu cấu hình RIP và xư lý sự cố đối với RIP . \n\nGiống như RIP, IGRP (Interior G g Protocol)cũng là một giao thức \ni RIP, IGRP là giao thức độc \n\ndựa trên các chuẩn mở. IGRP \n\nvới IGRP. \n\nSử dụng lệnh ip classless \n\no hức định tuyến động giúp ch\nản hơn nhiều. Nhờ có \n\nateway Routin\nđịnh tuyến theo vectơ khoảng cách. Nhưng khác vớ\nquyền của Cisco chứ không phải là một giao thức \nphức tạp hơn so với RIP, sử dụng nhiều thông số để chọn đường đi tốt nhất đến \nđích nhưng IGRP  vẫn là một giao thức sử dụng đơn giản .Trong chương này cũng  \nsẽ giới thiệu cấu hình IGRP và xử lý sự cố đối \n\nSau khi hoàn tất chương trình ,các bạn sẽ thực hiện được những việc sau : \n\n\u2022 Mô tả được tai sao định tuyến lặp vòng lại xảy ra đối với định tuyến theo \nvectơ khoảng cách . \n\n\u2022 Mô tả được các phương pháp được sử dụng để đảm bảo cho các giao thức \nđịnh tuyến theo vectơ khoảng cách định tuyến đúng. \n\n\u2022 Cấu hình RIP  \n\u2022 \n\n\n\n 144\n\n\u2022 Xử lý sự cố của RIP  \n\u2022 Cấu hình RIPđể chia tải  \n\u2022 Cấu hình đường cố định cho \n\n7.1.1. Cập nhật thông tin định tuyến  \n\nBảng định tuyến được cập nhật theo chu kỳ hoặc khi cấu trúc mạng có sự thay đổi \n.Điểm quan trọng đối với một giao thức định tuyến là làm sao cập nhật bảng định \ntuyến một cách hiệu quả .Khi cấu trúc mạng thay đổi ,thông tin cập nhật phải được \nxử lý trong toàn bộ hệ thống .Đối với định tuyến theo vectơ khoảng cách thì mỗi \nrouter gửi toàn bộ bảng định tuyên của mình cho các router kết nối trực tiếp với \nnó.Bảng định tuyến bao gồm các thông tin về đường đi tới mạng đích như:tổng chi \nphí (ví dụ như khoảng cách chẳng hạn )tính từ bản thân router đến mạng đích ,địa \nchỉ của trạm kế tiếp trên đường đi. \n\nRIP  \n\u2022 Kiểm tra cấu hình RIP  \n\u2022 Cấu hình IGRP  \n\u2022 Kiểm tra hoạt động của IGRP \n\u2022 Xử lý sự cố IGRP \n\n7.1. Định tuyến theo vectơ khoảng cách  \n\n \n\nHình 7.1.1 \n\n7.1.1. Lỗi định tuyến lặp \n\n\n\n 145\n\n \n\nHình 7.1.2 \n\nĐịnh tuyến lặp có thể xảy ra khi bảng định tuyến trên các router chưa được cập \nnhật hội tụ do quá trình hội tụ chậm. \n\n1. Trước khi mạng 1 bị lỗi ,tất cả các router trong hệ thống mạng đều có thông \ntin đúng về cấu trúc mạng và bảng định tuyến là chính xác .Khi đó chúng ta \nnói các router đã hội tụ .Giả sử rằng :router C chọn đường đến Mạng 1 bằng \ncon đường qua router Bvà khoảng cách của con đường này từ router C đến \nMạng 1 và 3 (hops)(Nghĩa là nếu đi từ router C đến Mạng 1 theo con đường \nnày thì còn cách 3 router nữa). \n\n2. Ngay khi mạng 1 bị lỗi, router E liền gửi thông tin cập nhật cho router A. \nRouter A lập tức ngưng việc định tuyến về Mạng 1. Nhưng router B, C và D \nvẫn tiếp tục việc này vì chúng vẫn chưa hay biết về việc Mạng 1 bị lỗi. Sau \nđó router A cập nhật thông tin về Mạng 1 cho router B và D. Router B,D lập \ntức ngưng định tuyến các gói dữ liệu về Mạng 1 nên nó vẫn định tuyến các \ngói dữ liệu đến Mạng 1 qua router B. \n\n3. Đến thời điểm cập nhật định er C, trong thông tin cập nhật của \nrouter C gửi cho router D vẫ n về đường đến Mạng 1 qua router \n\n D thấy rằng thông tin này tốt hơn thông tin báo Mạng 1 bị \nlỗi mà nó vừa nhận được từ router A lúc này. Do đó router D cập nhật lại \n\ni cập nhật xong gửi cho router \nA. Tương tự, router A cũng cập nhật lại đường đến Mạng 1 lúc này là qua  \n\n kỳ của rout\nn có thông ti\n\nB. Lúc này router\n\nthông tin này vào bảng định tuyến mà không biết rằng như vậy là sai .Lúc \nnày, trên bảng định tuyến, router D có đường tới Mạng 1 là đi qua router C. \nSau đó router D lấy bảng định tuyến vừa mớ\n\n\n\n 146\n\nrouter D rồi gửi cho router Bvà E. Quá trình tương tự tiếp tục xảy ra ở \nrouter B,E. Khi đó, bất kỳ gói dữ liệu nào gửi tới Mạng 1 đều bị gửi lặp \nvòng từ router C tới r\n\n7.1.3. Định nghĩa giá trị tố\nouter B tới router A tới router D rồi tới router C. \ni đa  \n\n \n\nVới vectơ khoảng cách sử dụng số lượng hop thì mỗi khi router \nchuyển thông tin cập nhật cho router khác ,chỉ số hop sẽ tăng lên 1.Nếu không có \n\nBản thân thuật toán định tuyến theo vectơ khoảng cách có thể tự sữa lỗi được \nnhưng quá trình lặp vòng này có thể kéo dài đến khi nào đếm đến vô hạn. Do đó \nđể tránh tình trạng lỗi này kéo dài, giao thức định tuyến theo vectơ khoảng cách đã \nđịnh nghĩa giá trị tối đa. \n\n \n\nBằng cách này ,giao thức định tuyến cho phép vòng lặp kéo dài đến khi thông số \nđịnh tuyến vượt qua giá trị tối đa. Ví dụ như hình vẽ dưới, khi thông số định tuyến \nlà 16 hop lớn hơn giá trị tối đa là 15 thì thông tin cập nhật đó sẽ bị router huỷ bỏ. \nTrong bất kỳ trường hợp nào, khi giá trị của thông số định tuyến vượt qua giá trị \ntối đa thì xem như mạng đó là không đến được. \n\nViệc cập nhật sai về Mạng 1 như trên sẽ bị lặp vòng như vậy hoài cho đến khi nào \ncó một tiến trình khác cắt đứt được quá trình này. Tình trạng như vậy gọi là đếm \nvô hạn, gói dữ liệu sẽ bị lặp vòng trên mạng trong khi thực tế là Mạng 1 đã bị \nngắt. \n\nthông số là \n\nbiện pháp khắc phục tình trạng đếm vô hạn ,thì cứ như vậy chỉ số hop sẽ tăng lên \nđến vô hạn. \n\n \n\n\n\n 147\n\n \n\nHình 7.1.3 \n\n7.1.4. Tránh định tuyến lặp vòng bằng split horizone \n\nMột nguyên nhân khác gây ra lặp vòng là router gửi lại những thông tin định tuyến \nmà nó vừa nhận được cho chính router đã gửi những thông tin đó. Phần sau đây sẽ \nphân tích cho các bạn thấy sự cố xảy ra nh  thế nào: \n\n1. Router A gửi một thông tin outer B và D thông báo là Mạng 1 \n\n vẫn có đường đến Mạng 1 mặc dù \nng tốt bằng con đường cũ của \n\nrouter B lúc truớc. Sau đó router B cũng cập nhật cho router A về đường \n\nng \nqua router B. Router B thì định tuyến đến Mạng 1 thông qua router C. \n\n qua router D. Kết quả là bất kỳ \ngói dữ liệu nào đến Mạng 1 sẽ rơi vào vòng lặp này. \n\n  này bằng cách: Nếu router B \nừ router A thì chúng sẽ \n\no router A nữa. Nhờ đó, split-\n\nthông tin cập nhật. \n\nư\n\ncập nhật cho r\nđã bị ngắt. Tuy nhiên router C vẫn gửi cập nhật cho router B là router C có \nđường đến Mạng 1 thông tin qua router D, khoảng cách của đường này là 4. \n\n2. Khi đó router B tưởng lầm là router C\ncon đường này có thông số định tuyến khô\n\nmới đến Mạng 1 mà router B vừa mới nhận được. \n3. Khi đó router A sẽ cập nhật lại là nó có thể gửi dữ liệu đến Mạng 1 thô\n\nRouter C lại định tuyến đến Mạng 1 thông\n\n4. Cơ chế split-horizon sẽ trách được tình huống\nhoặc D nhận được thông tin cập nhật về Mạng 1 t\nkhông gửi lại thông tin cập nhật về Mạng 1 ch\nhorizon làm giảm được việc cập nhật thông tin sai và giảm bớt việc xử lý \n\n\n\n 148\n\n \n\nHình 7.1.4 \n\n7.1.5. Route poisoning  \n\nRoute poisoning được sử dụng để ác vòng lặp lớn và giúp cho router \nthông báo thẳng là mạng đã không truy cập được nữa bằng cách đặt giá trị cho \n\nt cho router C bảng định tuyến này ,trong đó \nđường đến Mạng 5 có thông số hop là 16 được gọi là route poisoning .Sau khi \n\như vậy \n\nrouter sẽ thông báo về con đường đó với thông số định tuyến lớn hơn giá trị tối đa \n\ntránh xảy ra c\n\nthông số định tuyến (số lượng hop chẳng hạn )lớn hơn giá trị tối đa. \n\nVí dụ như hình 7.1.5 : khi Mạng 5 bị ngắt thì trên bảng định tuyến của router E giá \ntrị hop cho đường đến Mạng 5 là 16,giá trị này có nghĩa là Mạng 5 không truy cập \nđược nữa .Sau đó router E cập nhậ\n\nrouter C nhận được cập nhật về route poisoning từ router E ,router C sẽ gửi ngược \ntrở lại thông tin này cho router E .Lúc này ta gọi thông tin cập nhật về Mạng 5 từ \nrouter C gửi ngược lại cho router E là route poison reverse.Router C làm n\nđể đảm bảo là nó đã gửi thông tin route poisoning ra tất cả các đường mà nó có . \n\nKhi route poisoning được sử dụng kết hợp với cập nhật tức thời sẽ giúp rút ngắn \nthời gian hội tụ giữa các router vì khi đó router không cần phải chờ hết 30 giây của \nchu kỳ  cập nhật mới về route poisoning. \n\nTóm lại ,route poisoning có nghĩa là khi có một con đường nào đó bị ngắt thì \n\n\n\n 149\n\n.Cơ chế route poisoning không hề gây mâu thuẫn với cơ chế split horizon .Split \nhorizon có nghĩa là khi router gửi thông tin cập nhật ra một đường liên kết thì \nrouter không được gửi lại những thông tin nào mà nó vừa nhận vào từ đường liên \nkết đó.Bây giờ ,router vẫn gửi lại những thông tin đó nhưng với thông số định \ntuyến lớn hơn giá trị tối đa thì kết quả vẫn như vậy .Cơ chế này gọi là split horizon \nkết hợp với poison reverse. \n\nKhi mạng 5 bị ngắt ,Router E sử dụng route poisoning bằng cách đặt giá trị 16 trên \nbảng định tuyến để cho biết mạng này không đến được nữa . \n\n \n\nHình 7.1.5 \n\n7.1.6 Trách định tuyến lặp vòng bằng cơ chế cập nhật tức thời  \n\nHoạt động cập nhật bảng định tuyến giữa các router láng giềng được thực hiện \ntheo chu kỳ .Ví dụ :cứ sau 30 giây RIP thực hiện cập nhật một lần .Ngoài ra còn \ncó cơ chế cập nhật tức thời để thông báo về một thay đổi nào đó trong bảng định \ntuyến .Khi router phát hiện ra có một thay đổi nào đó trong cấu trúc thì nó lập tức \ngửi thông điệp cập nhật cho các router láng riềng để thông báo về sự thay đổi đó. \nNhất là khi có một đường nào đó bị lỗi không truy cập được nữa thì router phải \ncập nhật tức thời thay vì đợi đến hết chu kỳ. Cơ chế cập nhật tức thời kết hợp với \nroute poisoning sẽ đảm bảo cho tất cả các router nhận được thông tin khi có một \nđường nào đó bị ngắt trước khi thời gian holddown kết thúc.  \n\nCơ chế cập nhật tức thời cho toàn bộ mạ i  có sự thay đổi trong cấu trúc mạng \ngiúp cho các router được cập nhật kịp thờ ởi động thời gian holddown nhanh \nhơn.  \n\nng kh\ni và kh\n\n\n\n 150\n\nVí dụ như hình 7.1.6: router C c i ngay khi mạng 10.4.0.0 không \ntruy cập được nữa. Khi nhận được thông tin này, router B cũng phát thông báo về \nmạng 10.4.0.0 ra cổng S0/1. Đến lướt router A  cũng sẽ phát thông báo ra cổng  \nFa0/0.  \n\nNetWordk 10.4.0.0 is unreachable \n\nVới cập nhật tức thời, router sẽ gửi thông điệp ngay để thông báo sự thay đổi trong \nbảng định tuyến của mình   \n\nập nhật tức thờ\n\n \n\nHình 7.1.6 \n\n7.1.7. Tránh lặp vòng với thời gian holddown \n\nhạn như đã đề cập ở phần 7.1.2 có thể tránh được bằng \ncách sử dụng thời gian holddown như sau: \n\nuter nhận được thông tin cập nhật từ chính \nrouter láng riềng lúc nãy thông báo là mạng X đã truy cập lại được thì router mới \ncậ  thời gian holddown. \n\n với thông \n\nTình trạng lặp vòng đến vô \n\nKhi router nhận được từ router láng giềng một thông tin cho biết là một mạng X \nnào đó bây giờ không truy cập được nữa thì router sẽ đánh dấu vào con đường tới \nmạng X đó là không truy cập được nữa và khởi động thời gian holddown. Trong \nkhoảng thời gian holddown này, nếu ro\n\np nhật thông tin đó và kết thúc\n\nTrong suốt thời gian holddown nết router nhận được thông tin cập nhật từ một \nrouter láng riêng khác (không phải là router láng giềng đã phát thông tin cập nhật \nvề mạng X lúc nãy) nhưng thông tin này cho biết có đường đến mạng X\n\n\n\n 151\n\nsố n  cập \nnh t nhầm \nnh ết gì về việc mạng X đã \n\nhống đều đã được cập nhật \nlà ruy cập được nữa, khi đó các router đều có thể nhận biết chính \nxác v ng. Do đó, sau khi thời gian holddown kết thúc thì các router lại \ncậ  tin như bình thường. \n\n đị h tuyến tốt hơn con đường mà router trước đó thì nó sẽ bỏ qua, không\nật thông tin này. Cơ chế naỳ giúp cho router tránh được việc cập nhậ\nững thông tin cũ do các router láng giềng chưa hay bi\n\nkhông truy cập được nữa. Khỏng thời gian holddown bảo đảm cho tất  cả  các \nrouter trong hệ thống mạng đã được cập nhật xong về thông tin mới. Sau khi thời \ngian holddown hết thời hạn, tất cả các router trong hệ t\n\nmạng X không t\nc mạề cấu trú\n\np nhật thông\n\n \n\nHình 7.1.7 \n\n \n\n7.2\n\nđược mô tả chi tiết trong 2 văn bản. Văn bản đầu tiên là RFC1058 và văn \nản thứ 2 là Tiêu chuẩn Internet(STD)56.  \n\nRIP được  phát triển trong nhiều năm bắt đầu từ phiên bản 1 (RIPv1)  \n\nRIP chỉ là giao thức định tuyến theo lớp địa chỉ cho đến phiên bản 2(RIPv2) \n\n.RIP \n\nến trình của RIP 7.2.1. Ti\n\nIP RIP \nb\n\n\n\n 152\n\nRIP tr\n\nn vô hạn bằng cách giới hạn số lượng hop tối \nđa cho phép từ máy gửi đến máy nhận, số lương hop tối đa cho mỗi con đường là \n\nr nhân được từ thông tin cập nhật của router \nuter xem bản thân nó  cũng là 1 \n\nhop trên đường đi. Nếu sau khi tăng chỉ số hop lên 1 mà chỉ số này lớn hơn 15 thì \nrou ạng đích không tương ứng với con đương này không đến \nđư ng có những đặc tính tương tự như  các giao thức định \n\nở thành giao thức định tuyến không theo lớp địa chỉ. \n\nRIPv2 có những ưu điểm hơn như sau: \n\n\u2022 Cung cấp thêm nhiều thông tin định tuyến hơn. \n\u2022 Có cơ chế xác minh giữa các router khi cập nhật để bảo mật cho bảng định \n\ntuyến. \n\u2022 Có hỗ trợ VLSM(variable Length Subnet Masking-Subnet mask có chiều dài \n\nkhác nhau). \nRIP tránh định tuyến lặp vòng đếm đế\n\n15. Đối với các con đường mà route\nláng giềng, router sẽ tăng chỉ số hop lên 1  vì ro\n\nter sẽ xem như m\nợc. Ngoài ra, RIP cũ\n\ntuy : RIP cũng có horizon và thời gian holddown để tránh cập \nnhật thông tin định tuyến không chính xác. \n\nCác đặc điểm chính của RIP \n\nến khác. Ví dụ như \n\n\u2022 Là giao thức định tuyến theo vectơ khoảng cách. \n\u2022 Thông số định tuyến là số lương hop. \n\u2022 Nếu gói dữ liệu đến mạng đích có số lượng hop lớn hơn 15 thì gói dữ \n\nliệu đó sẽ bị huỷ bỏ. \n\u2022 Chu kỳ cập nhật mặc định là 30 giây. \n\n \n\n7.2.2. Cấu hình RIP \n\n \n\n chỉ trạm kế tiếp RIP \n\nLênh router rip dùng để khởi động RIP. Lênh network dùng để khai báo những \ncổng giao tiếp nào của router được phép chạy RIP trên đó. Từ đó RIP sẽ bắt đầu \ngửi và nhận thông tin cập nhật trên các cổng tương ứng RIP cập nhật thông tin \nđịnh tuyến theo chu kỳ. Khi router nhận được thông tin cập nhật có sự thay đổi \nnào đó thì nó sẽ cập nhật thông tin mới vào bảng định tuyến. Đối với những con \nđường tới mạng đích mà router học được từ router láng giềng thì nó sẽ tăng chỉ số \nhop lên 1 địa chi nguần của thông tin cập nhật này sẽ là địa\n\n\n\n 153\n\nchỉ chon một con đường tốt nhất đến mạng đích, tuy nhiên nó cũng có thể sử dụng \nnhiều con đường có chỉ số bằng nhau đến cùng 1 đích.  \n\nCh ho RIP thực hiên cập nhật tức thời khi cấu trúc mạng \ntha ip rip triggered. Lệnh này chỉ áp dụng cho cổng  serial của \nro r ạng thay đổi, router nào nhận biết được sự thay đổi đầu tiên \n\no bảng định tuyến của nó trước, sau đó nó lập tức gửi thông tin cập \n\nề cấu hình của RIP \n\núng ta có thể cấu hình c\ny đổi bằng lệnh \n\nute . Khi cấu trúc m\nsẽ cập nhật và\nnhật cho các router khác để thông báo về sự thay đổi đó. Hoạt động này là cập \nnhật tức thời va nó xảy ra hoàn toàn độc lập với cập nhật đinh kỳ. hình 7.2.2 là \nmột ví dụ v\n\n \n\nHình 7.2.2 \n\nhai báo mạng kết nối trực tuyến \nvào router. \n\nc phải làm, chúng ta chỉ cấu \nhình thêm nếu thấy cần thiết: \n\n\u2022 BHM(config)#router rip- chọn RIP làm giao thức định tuyến cho router. \n\u2022 BHM(config- router)#network10.0.0.0- k\n\n\u2022 BHM (config- router) #network 192.168.13.0-khai báo mạng kết nối trực \ntuyến vào router. \n\nCác cổng trên router kết nối vào mạng 10.0.0.0 và 192.168.13.0 sẽ thực hiện gửi \nvà nhận thông tin cập nhật về định tuyến. \n\nSau khi đã khởi động RIP trên các mạng rồi chúng ta  có thể thực hiện thêm một \nsố cấu hình khác. Những cấu hình này không bắt buộ\n\n\n\n 154\n\n\u2022 Điều chỉnh các thông số định tuyến. \n\u2022 Điều chỉnh các thông số về thời gian hoạt động của RIP. \n\u2022 Khai báo phiên bản của RIP mà ta đang sử dụng(RIPv1 hay RIPv2). \n\u2022 Cấu hình cho RIP chỉ gửi thông tin định tuyến rút gọn cho một cổng nào \n\nđó. \n\u2022 Kiểm tra thông tin định tuyến IP rut gọn. \n\u2022 Cấu hình cho IGRP và RIP chạy đồng thời . \n\u2022 Không cho phép RIP nhận thông tin cập nhật từ một địa chỉ IP nào đó. \n\u2022 Mở hoặc tắt chế độ split horizon. \n\u2022 Kết nối RIP vào mạng WAN. \n\nTóm lại, để cấu hình RIP, chúng ta có thể bắt đầu từ chế độ cấu hình toàn cục như \nsau: \n\n\u2022 Router(config)# router rip \u2013 khởi động giao thức định tuyến RIP. \n\u2022 Router(config- router)#network network- number- khai báo các mạng mà \n\nRIP được phép chạy trên đó. \n7.2.3. Sử dụng lệnh ip classless. \n\nKhi router nhận được gói dữ liệu có địa chỉ đích là một subnet không có trên bảng \nđịnh tuyến của router. Trên bảng định tuyến của router không có chính xác subnet \nvới subnet đích của gói dữ liệu. Ví dụ: một tổ chức  sử dụng địa chỉ mạng \n10.10.0.0/16, khi đó subnet 10.10.10.0/24 có supernet là 10.10.0.0/16. Trong \n\nậy, ta dung lệnh ip classless để router không hủy bỏ dữ liệu mà sẽ \nờng  đến địa chỉ supernet, nếu có. Đối với phần mền Cisco IOS \n\nhiên bản 11.3 trở về sau, mặc định là lệnh ip classlet đã được chạy  trong cấu hình \ncủa router. Nếu bạn tắt lệnh này đi thì dùng lệnh NO của câu lệnh này. \n\nTuy nhiên, nếu không có chức năng này thì tất cả các gói có địa chỉ đích là một \nsubnet có cùng supernet với các điạ chỉ mạng khác của router nhưng lại không có \ntrong bảng định tuyến. Đây chính là đặc điểm quan trọng của giao thức định tuyến \ntheo lớp. Nếu một địa chỉ mạng lớn được chia thành các subnet con chứ không có \ntoàn bộ các subnet. Khi đó gói dữ liệu nào có địa chỉ đích là một subnet nằm trong \nđịa chỉ mạng lớn nhưng lại không có trên bảng định tuyến của router thì router sẽ \nhủy bỏ. \n\ntrường hợp như v\nchuyển gói ra đư\np\n\n\n\n 155\n\n \n\nHình 72.2.3a.khi không có lệnh ip classless. \n\n đích là một subnet không có trên bảng định tuyến nhưng lại có cùng \nsupernet với các mạng kết nối trực tiếp vào router thì router xem như mạng đích đó \n\nịnh tuyến của router có cấu \nhìn  này băng cách cho phép \nrouter không c a ch a. khi đó router không tìm \nthấy được cụ thể mạng đích trên bảng định tuyến thì nó sẽ sử dụng đương mặc định \nđể chuyển gói đi. \n\nCơ chế này bị nhầm lẫn nhất khi router có cấu hình đường mặc định. Từ một địa \nchỉ mạng lớn chia thành nhiêu subnet con. Kết nối trực tiếp vào router chỉ có một \nsố subnet. Khi router xây dựng bảng định tuyến, trên bảng định tuyến đương nhiên \ncó các subnet của mạng kết nối trực tiếp vào router. Còn những subnet nào không \ncó thì router coi như subnet đó không tồn tại. Do đó, khi router nhận được gói dữ \nliệu có địa chỉ\n\nkhông tồn tại và hủy bỏ gói dữ liệu cho dù trên bảng đ\nh đường mặc đinh. Lệnh ip classless sẽ giải quết vấn đề\n\nần quan tâm đến lớp của đị ỉ đích nữ\n\n\n\n 156\n\n \n\nHình 7.2.3b: Khi có l nh ip classless. \n\n7.2.4. những vấn đề thường gặp kh P. \n\nRo g giềng để học thông tin \nđến các mạng mà không kết nối trực tiêp vào router. RIP sử dụng thuật toán đinh \ntuyến theo vectơ khoảng  cách đề có nhược điểm chính tốc độ hội tụ chậm. Trạng \nthái hội tụ là khi tất  cả các router trong hệ thống mạng đều có thông tin đinh tuyến \nvề hệ thống mạng giống nhau và chính xác. \n\nCác giao thức định tuyến theo vectơ khoảng cách thường gặp vấn đề về định tuyến \nlặp vòng và đếm đến vô hạn. Đây là hậu quả khi các router chưa được hội tụ nên \ntruyền cho nhu những thông tin cũ chưa được cập nhật đúng. \n\nĐể giải  những vấn đề này RIP sử dụng những kỹ thật sau \n\n\u2022 Định nghĩa giá trị tối đa \n\u2022 Split horizon. \n\u2022 Poison reverse. \n\u2022 Thời gian holddown. \n\u2022 Cập nhật tức thời. \n\nCó một số kỹ thuật đòi hỏi bạn phải cấu hình còn một số khác thì không cần cấu \nhình gì  cả hoặc chỉ cần cấu hình một chút thôi.  \n\nệ\n\ni cấu hình RI\n\nuter định tuyến theo RIP phải dựa vào các router lán\n\n\n\n 157\n\nRIP giới hạn số hop tối đa là 15. Bất kỳ mạng đích nào có số hop lớn hơn 15 thì \nxem như mạng đó không đếm được. Điều này làm cho RIP bị hạn chế không sử \ndụng được cho những hệ thống mạng lớn nhưng nó giúp cho RIP tránh được lỗi \nđếm đến vô hạn. \n\nLuật split horizon la: khi gửi thông tin cập nhật ra một hướng nào đó thì không gửi \nlại những thông tin mà router đã nhận được từ hường đó. Trong một số cấu hình \nmạng thì bạn cần phải tắt cơ  chế split horizon: \n\nGAD (config-if)#no ip split- horizon \n\nTh ột thông số mà bạn có thể thay đổi nếu cần. Khoảng thời \ngian holddown giúp cho router tránh bị lặp vòng đếm đến vô hạn nhưng đồng thời \nnó cũng làm tăng thời gian hội tụ giữa các router. Trong khoảng thời gian này, \nrouter không cập nhật những đường nào có thông số định tuyến không tốt bằng con \nđường mà router có trước đó, như vậy thì có khi có đường khác thay thế cho đường \ncũ thật nhưng router cũng không cập nhật. Thời gian holddown mặc định của RIP \nlà 180 giây. Bạn có thể điều chỉnh thời gian holddown ngắn lại đêt tăng tốc độ hội \ntụ nhưng bạn nên cân nhắc kỹ. Thời gian holddown lý tưởng là phải dài hơn \nkhoảng thời gian dài nhất có thể để cho toàn bộ hệ thống mạng được cập nhật song. \nVí dụ như hình dưới, chúng ta có 4 router. Nếu mối router có thời gian cập nhật là \n30 giây thì thời gian tối đa để cho cả 4 router cập nhật xong là 120 giây như vậy \nthời gian holddown phải dài hơn 120 giây. \n\nĐêt thay đổi thời gian holddown bạn dùng lệnh sau  \n\nRouter(config- router)#timers basic u  holddown flush[sleeptime] \n\nời gian holddown là m\n\npdate invalid\n\n\n\n 158\n\n \n\nHình 7.2.4 \n\nMột lý do khác làm ảnh hưởng đến tốc độ hội tụ là chu kỳ cập nhật. chu kỳ cập \nnh ạn có thể điều chỉnh cho chu kỳ cập nhật dài \nhơ\ntăn\n\nĐể ay đổi chu kỳ cập nhật, bạn dụng lệnh sau GAD(config- router)#update-timer \nsec\n\nCòn m   gặp đối với giao thức định tuyến là ta không \nmuốn o ập nhật về định tuyến ra một cổng \nnào đó  địa chỉ mạng là lập tức RIP bắt \nđầu gử a chỉ mạng nằm trong \nmạng ạng có thể không cho phép gửi thông \ntin cập h  một cổng nào đó bằng lệnh  passive \u2013 interface.  \n\nGA sive- interface Fa0/0. \n\nRI\nnhư lay thì ta cần phải khai báo các router RIP láng giềng bằng lệnh sau:  \n\nGA ip address \n\nật mặc định của RIP là 30 giây . B\nn để tiếp kiệm băng thông đường truyền hoặc rút ngắn chu kỳ cập nhật lại để \ng tốc độ hội tụ.  \n\n th\nonds. \n\nột vấn đề nữa mà ta thường\ni  các thông tin cch  các giao thức này gử\n\n. Sau khi bạn nhập lệnh network để khai báo\ni các thông tin định tuyến ra tất cả các cổng có đị\n\nmà  bạn vừa khai báo. Nhà quản trị m\n n ật  về định tuyến ra\n\nD(config- router)#pas\n\nP là giao thức broadcast. Do đó, khi muốn chạy RIP trong mạng non-broadcast \n Frame Re\n\nD(config- router) # neighbor \n\n\n\n 159\n\nPhầ\nnh iên bản 1. Nhà quản trị mạng có thể cấu \nhình cho router chỉ gửi và nhận gói phiên bản 1 hoặc là chỉ gửi gói phiên bản \n2\u2026bằng các lệnh sau: \n\nGAD(config- router) # version {1/2} \n\nGAD(config- if) # ip rip send version 1 \n\nGAD(config- if) # ip rip send version 2 \n\nGAD(config- if) # ip rip send version 1 2 \n\nGAD(config- if) # ip rip receive version 1 \n\nGAD(config- if) # ip rip receive version 2 \n\nGAD(config- if) # ip rip receive vers\n\n7.2\n\nCó nh  để kiểm tra cấu hình RIP có đúng hay không. Trong \nđó ha ệ c sử dụng nhiều nhẩt là  Show ip route và show ip \nproto s\n\nLệnh protocols sẽ hiển thị các giao thức định tuyến IP đang được chạy \ntrên ro e iển thị của lệnh này có thể giúp bạn kiểm tra được phần lớn \ncấu hình của RIP nhưng chưa phải là đầy đủ, toàn bộ. sau đây là một số điểm bạn  \ncần chú ý kiểm tra:  \n\n\u2022 Có đúng là giao thức định tuyến RIP đã được cấu hình hay không. \n\u2022 RIP được cấu hình để gửi và nhận thông tin  cập nhật trên các cổng vào, có \n\nchính xác hay không. \n\u2022 Các địa chỉ mạng được khai báo trên router để chạy RIP có đúng hay không. \n\nn mền Cisco IOS mặc nhiên nhận gói thông tin của cả RIP phiên bản 1 và 2 \nưng chỉ gửi đi gói thông tin bằng RIP ph\n\nion 1 2 \n\n.5.kiểm tra cấu hình RIP \n\niều lệnh có thể sử dụng\ni l nh thường đướ\ncol . \n\nshow ip \nut r. Kết quả h\n\n\n\n 160\n\n \n\nHình 7.2.5a. \n\nLện router được sử dụng để kiểm tra xem những đường đi mà router học \nđượ rên. \nTrê dấu bằng \nchữ \u201cR\u201d \ngiềng. Bạ  router luôn có một khoảng thời gian để hội tụ \nvới nh ,\ntuyến đượ  số lệnh khác mà bạn có thể  sử dụng để kiểm tra \ncấu hì\n\n\u2022 ce. \n\u2022 \n\u2022 \n\nh show ip \nc từ các router RIP láng giềng có được cài đặt vào bảng định tuyến không t\nn kết quả hiển thị bảng định tuyến, bạn kiểm tra các đường có đánh \n\nở đầu dòng là những đường mà router học đựơc từ các router RIP láng \nn cũng nên nhớ rằng các\n\nau  do đó các thông tin mới có thể chưa được hiển thị ngay trên bảng định \nc. Ngoài ra còn có một\n\nnh RIP : \n\nShow interface interfa\nShow ip interface interface. \nShow running \u2013config \n\n\n\n 161\n\n \n\nHình 7.2.5b. \n\n7.2.6. Xử lý sự cố về hoạt động cập nhật của RIP \n\nHầu hết các lỗi cấu hình RIP đều do khai báo câu lệnh network sai, subnet không \nliên tục hoặc là do split horizon. Lệnh có tác dụng nhẩt trong việc tìm lỗi của RIP  \ntrong họat động cập nhật là lệnh debug ip rip  \n\nLệnh debug ip rip sẽ hiển thị  tất cả các thông tin định tuyến mà RIP gửi và nhận. \nVí dụ trong hình 7.2.6a cho thấy kết quả hiển thị của lệnh debug ip rip. Sau khi \nnhận được thông tin cập nhật , router sẽ xử lý thông tin đó rồi sau đó gửi thông tin \nmới vừa cập nhật ra các cổng. Trong hình 7.2.6a cho thấy router chạy RIP phiên \nbản 1  và RTP gửi cập nhật theo kiểu broadcast(địa chỉ broadcast \n255.255.255.255). Số trong ngoặc đơn là địa chỉ nguần của gói thông tin cập nhâth \nRIP.  \n\n\n\n 162\n\n \n\nHình 7.2.6a \n\nất nhiều điểm quan trọng mà bạn cần chú ý trong kết quả hiển thị củCó r a lênh \ndebug ip rip. Một số vấn đề phải ví dụ như subnet không liên tục hay trùng subnet, \ncó th\nlà c\nsố \n\nể phát hiện được nhờ lệnh này. Trong những trường hợp như vậy bạn sẽ thấy \nùng một mạng đích nhưng router gửi thông tin đi thì mạng đích đó lại có thông \nđinh tuyến thấp hơn so với khi router nhận vào trước đó. \n\n \n\nHình 7.2.6b. Subnet không liên tục \n\n\n\n 163\n\n \n\nHình 7.2.6c: Trùng Subnet \n\nNg\n\n7.2.7. Ngăn không cho router gửi thông tin định tuyến ra một cổng giao tiếp \n\nRouter có thể thực hiện chọn lọc thông t ến khi cập nhật hoặc khi gửi \nthông tin cập nhật. Đối với router sử ức định tuyến theo vectơ khoảng \ncác\nnhậ\nthứ\ncác\ntrạn . \nChính vì vậy mà cách thực hiện để ngăn không cho router gửi thông tin định tuyến \nra ưới đây chỉ sử dụng cho  các giao thức định \ntuy\n\nBạ\ncập  về định tuyến  ra một cổng nào đó. Làm như vậy thì bạn sẽ ngăn được hệ \nthố g mạng khác học được các thông tin định tuyến trong hệ  thống của mình. \n\noài ra còn một số lệnh có thể sử dụng để xử lý sự cố của RIP: \n\n\u2022 Show ip database. \n\u2022 Show ip protocols( summary). \n\u2022 Show ip route. \n\u2022 Debug  ip rip{ events}. \n\u2022 Show ip interface brief. \n\nin định tuy\ndụng giao th\n\nh, cơ chế này có tác dụng vì router định tuyến dựa trên các thông tin định tuyến \nn được từ các router láng giềng. Tuy nhiên, đối với các router sử dụng giao \nc định tuyến theo trạng thái đường liên kết thì cơ chể trên không  hiệu quả  vì \n giao thức định tuyến này quyết định chọn đường đi dựa trên cơ sở dữ liệu về \ng thái các đường liên kết chứ không dựa  vào thông tin định tuyến nhận được\n\nmột cổng giao tiếp được đề cập d\nến theo vectơ khoảng cách như RIP, IGRP thôi. \n\nn có thể sử dụng lệnh passive interface để ngăn không cho router gửi thông tin \n nhật\nn\n\n\n\n 164\n\nĐố\nthô\nvẫn\n\ni với RIP và IGRP, lênh passive interface sẽ làm cho router ngưng việc gửi \nng tin cập nhật về định tuyến cho một router láng giềng nào đó, nhưng router \n tiếp tục lắng nghe và nhận thông tin cập nhật từ router láng giềng đó. \n\n \n\nHình 7.2.7 \n\n.8. Chia tải với RIP \n\nuter có thể chia tải ra nhiều đường khi có nhiều đường tốt đến cùng một đích. \nn có thể cấu hình bằng tay cho router chia taỉ ra  các đường hoặc là các giao \nc định tuyến động có thể tự tính toán để chia tải. \n\n có khả năng chia\n\n7.2\n\nRo\nBạ\nthứ\n\nRIP  tải ra tối đa là  sáu đường có chi phí bằng nhau, còn mặc định \nthì RIP chỉ chia ra làm 4 đường. RIP thực hiện chia tải bằng cách sử dụng lần lượt \nvà luân phiên từng đường.  \n\nTro\nĐầ\n3-4\nhop\ncủa\n\nng hình7.2.8a là ví dụ cho ta thấy RIP chia tải ra 4 đường có chi phí bằng nhau. \nu tiên router bẳt đầu với đường số 1 rồi sau đó lần lượt các đường 2-3-4 rồi1-2-\n-1 và cứ tiếp tục luân phiên như vậy. vì thông số định tuyến của RIP là số lượng \n lên các đường này được xem là như nhau, RIP không cần quan tâm đến tốc độ \n mỗi đường. Do đó đường 56kbps cũng giống như đường 155Mbps. \n\n\n\n 165\n\n \n\nHình 7.2.8a \n\nng hình 7.2.8b là ví dụ về kết quả hiển thị của lệnh show ip route. Trong đó, \n thấy có hai phần, mỗi phần mô tả về một đường. Trong phần mô tả về đường \n hai có dấ\n\nTro\nbạn\nthứ u(*) ở đầu dòng. Dấu (*) này cho biết con đường này là con đường kế \ntiếp sẽ được sử dụng. \n\n \n\nH\n\n7.2\n\nình 7.2.8b \n\n.9. Chia tải cho nhiều đường \n\n\n\n 166\n\nRo\nmụ\ncác\ntoá\n\nKhi router nhận được thông tin cập nhật về nhiều đường khác nhau đến cùng một \nđích thì router s\nnhấ\ntin \nthô tuyến sẽ có cách tính chi phí \nkhác nhau và bạn  cần phải cấu hình các chi phí này để router thực hiện chia tải. \n\nKh\nđíc\ntải \nbản\ncó \n\nMặ\nđịn\ncho tuyến 1 đường đến 1 đích. \n\nuter có khả năng chia tải ra nhiều đường để chuyển các gói dữ liệu đến cùng \nc đích. Chúng ta có thể cấu hình bằng tay cho router thực hiện chia tải hoặc là \n giao thức định tuyến động như RIP ,IGRP,EIGRP và OSPF sẽ tự động tính \nn. \n\nẽ chọn đường nào  có chỉ số tin cậy(Admintrative distance) nhỏ \nt để đặt vào bảng định tuyến. Trong trường hợp các đường này có cùng chỉ số \ncậy thì router sẽ chon đường nào có chi phí thấp nhất hoặc là đường nào có \nng số định tuyến nhỏ nhất. Mỗi giao thức định \n\ni router có nhiều đường  có cùng chỉ số tin cậy  và cùng chi phí đến cùng một \nh thì router sẽ thực hiện việc chia tải. Thông thường thì router có khả năng chia \nđến 6 đừơng có cùng chi phí( giới hạn tối đa số đường chia tải là phụ thuộc vào \ng định tuyến của Cisco IOS), tuy nhiên một số giao thức định tuyến nội (IGP) \n\nthể có giới hạn riêng. Ví dụ như EIGRP chỉ cho phép tối đa là 4 đường. \n\nc định thì hầu hết các giao thức định tuyến IP đều chia tải ra 4 đường. Đường cố \nh thì chia tải ra 6 đường. Chỉ riêng BGP là ngoại lệ, mặc định của BGP là chỉ \n phép định \n\n \n\nHình 7.2.9a \n\n\n\n 167\n\nSố \nđườ\n\nRo\n\nIGR\nđườ a vào băng thông để chọn đường chia tải.  \n\nVí dụ như hình 7.2.9a, có ba đường đến mạng X : \n\n\u2022 Từ E qua B qua A, thông số định tuyến là 30. \n\u2022 Từ E qua C qua A , thông số định tuyến là 20. \n\u2022 Từ E qua D qua A, thông số định tuyến là 45. \n\nRouter E sẽ chọn đường thứ 2 vì đư ó thông số định tuyến 20 là nhỏ \nnhất. \n\nKhi định tuyến IP, Cisco IOS có hai c ải là: chia tải theo gói dữ liệu và \nchia tải theo địa chỉ đích. Nếu router  theo tiến trình thì router sẽ chia \ngó eo gói dữ liệu. Còn nếu  router \nchuyển mạch nhanh thì router sẽ chuyển tất cả gói dữ liệu đến cùng mục đích ra \nmộ\ntải \n\nđường tối đa mà router  có thể chia tải là từ 1 đến 6 đường. Để thay đổi số \nng tối đa cho phép bạn sử dụng lệnh sau: \n\nuter(config- router) #maximum-paths[number]. \n\nP có thể chia tải lên tối đa là 6 đường. RIP dựa vào  số lượng hop để chọn \nng chia tải, trong khi IGRP thì dự\n\nờng E \u2013C-A c\n\nơ chế chia t\n chuyển mạch\n\ni dữ liệu ra các đường. cách này gọi là chia tải th\n\nt đường. Các gói dữ liệu đến host khác nhưng trong cùng một mạng đich thì sẽ \nra đường kế tiếp. Cách này gọi là chia tải theo địa chỉ đích. \n\n \n\nHình 7.2.9b \n\nĐường cố định là đường do người quản trị cấu hình cho router chuyển gói tới \nmạng đích theo đường mà mình muốn. Mặt khác, lệnh để cấu hình ường cố định \ncũng được sử dụng để khai báo cho đường mặc định. Trong trường hợp router \n\nđ\n\n\n\n 168\n\nkhông tìm thấy đường nào trên bảng  chuyển gói đến mạng đích thì \nrouter sẽ sử dụng đường mặc định.  \n\nRouter chạy RIP có thể nhận được th ng mặc định từ những thông tin \ncập nhật của các router RIP láng giền  là bản thân router được cấu hình \nđư\n\nBạ\ncấu\nđộn\nđịn\nchỉ\nđộng có ch ọn lựa trước. Khi đường \nđịn ng được nữa thì router sẽ sử dụng tới đường \nđịnh tuy\n\nNế\nthì \nVì \nkhô  cố định nữa. Nếu bạn cấu hình đường cố định chỉ \nra một cổng mà RIP không chạy trên cổng đó thì RIP sẽ không gửi thông tin cập \nnhậ ề đường cố định đó, trừ khi bạn phải cấu hình thêm lênh redistribute static \ncho\n\nKh\nxóa ịnh tuyến. Tương tự như vậy khi router không còn xác định được \ntrạm kế tiếp trên đường cố định cho gói dữ liệu tới mạng đích thì đường  cố định \nđó cũng sẽ bị xóa khỏi bảng định tuyến. \n\nTrong hình 7.2.10a  và 7.2.10b chúng ta thấy khi đường định tuyến ng của RIP \nbị sự cố thì đường cố định mà ta đã cấu hình cho router GAD được sử dụng thay \nthê. Đường cố định như vậy được gọi  định dự phòng. Như trong ví dụ \nnày hình với chỉ số AD là 130 lớn hơn chỉ \nsố  nhớ là trên router BHM cũng cần cấu \nhìn\n\n định tuyến để\n\nông tin về đườ\ng khác. Hoặc\n\nờng mặc định sẽ cập nhật thông tin định tuyến này cho  các router khác.  \n\nn có thể xóa đường cố định bằng lệnh no ip route. Người quản trị mạng có thể \n hình đường cố định bên cạnh định tuyến động. Mỗi một giao thức định tuyến \ng có 1 chỉ số tin cậy(AD).Người quản trị mạng có thể cấu hình một đường cố \nh tới cùng mạng đích với đường định tuyến động  nhưng với chỉ số AD lớn hơn \n số AD của giao thức định tuyến động tương ứng. Khi đó đường định tuyến \n\nỉ sốAD nhỏ hơn lên luôn luôn được router ch\nh tuyến động bị sự cố không sử dụ\n\nến cố định để chuyển gói đến mạng đích. \n\nu bạn cẩu hình đường cố định chỉ ra một cổng mà RIP cũng chạy trên cổng đó \nRIP sẽ gửi thông tin cập nhật về đường cố định này cho toàn bộ hệ thống mạng. \nkhi đó, đường cố định đó được xem như là kết nối trực tiếp vào router lên nó \nng còn bản chất là một đừơng\n\nt v\n RIP. \n\ni một cổng giao tiếp bị ngắt thì tất cả các đường cố định chỉ ra cổng đó đều bị \n bởi bảng đ\n\nđộ\n\n là đừơng cố\n chúng ta thấy là đường cố định được cấu \n\nAD  của RIP (120). Bên cạch đó, bạn nên\nh đường mặc định tương ứng. \n\n\n\n 169\n\n \n\n \n\n \n\n \n\n \n\n \n\nHình 7.2.10a \n\n\n\n 170\n\n \n\n \n\nH\n\n7.3\n\n7.3 a IGRP \n\nIGRP l\nthức định ảng  cách chọn lựa đường đi bằng cách so sách \nvectơ kho\nhiện bả ông tin cập \nnhật, ro e\n\n\u2022 Xác\n\u2022 Cập ự cố về đường đi trên mạng \n\nình 7.2.10b \n\n.IGRP \n\n.1. Đặc điểm củ\n\nà một giao thức định tuyến nội và định tuyến theo vectơ khoảng cách. Giao \n tuyến theo vectơ kho\nảng cách. Router chạy giao thức định tuyến theo vectơ khoảng cách thực \n\nng đinh tuyến theo định kỳ cho các router láng giềng. Dựa vào th\nut r thực hiện 2 nhiệm vụ sau : \n\n định mạng đích mới. \n nhật s\n\n\n\n 171\n\nIGRP \nIGRP thự\ntrong phạm GRP: \n\nác định. \n\u2022 Khả năng linh hoạt với các đặc tính băng thông và độ trễ khác nhau. \n\nKhả năng mở rộng cho hệ thống mạng lớn. \nMặ\nIGR\nlà c\n\nng thông. \n\u2022 Độ trễ. \n\u2022 Độ tải. \n\u2022 Độ tin cậy \n\n7.3.2 Thông số định tuyến của IGRP \n\nBạn dùng lệnh show ip protocols để xem các thông số, các thông tin về mạng và \ncác chính sách chọn lọc của các giao yến đang hoạt động trên router. \nTrong đó bạn sẽ thấy được cách tính toán thông số định tuyến của IGRP như trong \nhình 7.3.2. Mỗi một thông số có hệ số từ K1 \u2013 K5. K1 là hệ số của băng thông, K3 \nlà hệ số của độ trễ. Mặc định thì K1 và K3 có giá trị là 1, còn K2 , K4 và K5 có giá \ntrị l\n\nViệ\nkết\nNg\n\nSau\ntuyế\n\n\u2022 Băng thông :Giá trị băng thông thấp nhất của đường truyền . \n\u2022 Độ trễ :Tổng độ trễ dọc theo đường truyền . \n\u2022\n\n \n \n \n\nlà giao thức định tuyến theo vectơ khoảng cách do Cisco phát triển nên. \nc hiện cập nhật theo chu kỳ 90 giây / lần và chỉ gửi thông tin cập nhật \n\n vi một hê tự quản. Sau đây là các đặc điểm chính của I\n\n\u2022 Khả năng thích ứng với các cấu trúc mạng phức tạp và không x\n\n\u2022 \nc định thì IGRP sử dụng băng thông và độ trễ làm thông số định tuyến. Ngoài ra \nP còn có thể cấu hình để sử dụng nhiều thông số khác để định tuyến. Sau đây \n\nác thông số mà IGRP có thể sử dụng để định tuyến: \n\n\u2022 Bă\n\n thức định tu\n\nà 0. \n\nc tính toàn thông số định tuyến từ nhiều thông số của đường đi như vậy sẽ cho \n quả chính xác hơn so với RIP chỉ dựa vào một thông số là số lượng hop. \nuyên tắc thì đường nào có thông số định tuyến nhở nhất là đường tốt nhất.: \n\n đây là các thông số của đường đi mà IGRP sử dụng để tính toán thông số định \nn : \n\n \n Độ tin cậy :Độ tin cậy trên một đường liên kết đến đích được xác định dựa \n\ntrên hoạt động trao đổi các thông điệp keepalive. \n\n\n\n 172\n\n \n\u2022 Độ tải :Độ tải của đường truyền tính bằng bit/ giây . \n\u2022 MTU :Đơn vị truyền tối đa trên n . \n\nThô\nđịnh\nthì \ncho\nthôn\nlớn\nsẽ c\n\n7.3. RP \n\nIGRP thực hiện quảng bá những loại đường sau : \n\n\u2022\n\u2022\n\nĐư ột cổng \ncủa router .Nếu một cổng giao tiếp của router kết nối vào một mạng không có chia \nthà ội bộ trong mạng đó . \n\n đường truyề\nng số định tuyến được tính dựa vào một công thức tính từ 5 thông số trên.Mặc \n thì trong công thức này chỉ có băng thông và độ trễ .Còn những thông số khác \n\nchỉ được sử dụng khi được cấu hình .Bạn có thể cấu hình băng thông và độ trễ \n cổng giao tiếp của router.Bạn dùng lệnh show ip route sẽ xem được giá trị của \ng số định tuyến của IGRP đặt trong ngoặc vuông .Đường nào có băng thông \n\n hơn sẽ có thông số định tuyến nhỏ hơn , tượng tự đường nào có độ trễ ít hơn thì \nó thông số định tuyến nhỏ hơn. \n\n3. Các loại đường trong IG\n\n\u2022 Đường nội bộ. \n Đường hệ thống. \n Đuờng ngoại vi. \nờng nội bộ là những đường chỉ đi giữa các subnet kết nối vào cùng m\n\nnh nhiều subnet thỉ router không còn có đường n\n\n\n\n 173\n\nĐường hệ thống là những đường đi giữ ạng trong cùng một hệ tự \nquản.Router hoc về đường hệ thống b n biết các mạng kết nối trực tiếp \nvào nó và học từ các thông tin cập nh hác .Trong IGRP ,các \nthôn\n\na các m\nằng cách nhậ\nật từ các router IGRP k\n\ng tin về đường hệ thống không có thông tin về subnet tương ứng. \n\n \n\nHình 7.3.3 \n\nng ngoại vi là những đường đi ra ngoài hệ tự quản (autonomous Đuờ\nsystem).Thông thường thì đây là gateway của router để đi ra ngoài .Phần mềm \nCisco IOS s hững đường ngoại vi của IGRP để làm \ngate Ro i mạng đích là một mạng không \nkết n ực ti c một đường nào khác để đến  \nmạn ản có nhiều đường ngoại vi để kết nối ra ngoài \nthì mỗ\n\n7.3.4. Tính ổ\n\nIGRP c ật để tăng tính ổn định trong hoạt động định \ntuyế\n\n\u2022\nHolddowns : \n\nẽ chọn một đường trong số n\nway . uter sẽ sử dụng đến đường gateway kh\nối tr ếp vào router và router không tìm đượ\n\ng đích .Nếu trong một hệ tự qu\ni router có thể chọn cho mình một gateway khác nhau. \n\nn định của IGRP \n\nũng có sử dụng một số kỹ thu\nn của nó như: \n\n\u2022 Thời gian holddown  \n\u2022 Split horizon. \n Poison reverse \n\n\n\n 174\n\nThờ ho router cập nhật những thông tin \nđượ ưng lại là những thông tin cũ , chưa được cập \nnhậ  \n\nSplit horizo\n\nSplit horizons là nguyên tắc giúp cho router tránh bị lặp vòng bằng cách ngăn \nkhô  r g tin cập nhật ra một hướng mà nó vừa nhận \nđượ\n\nPoi\n\nSpl\npois\nnào\nrou\nđườ  thì khi một con đường có thông \nsố định tuyến tăng lên theo hệ số 1.1 hoặc lớn hơn nữa thì nó sẽ phát đi thông tin \ncập nhật poison resverse cho con đường đó . \n\nNgoài ra, IGRP còn có nhiều thông số về thời gian khác như: chu kỳ cập nhật ,thời \ngian invalid, thời gian holddown ,thời gian xóa. \n\nThông số của chu kỳ cập nhật cho b  bao lâu thì router thực hiện gửi \nthông tin cập nhật một lần .Đối với IGRP chu kỳ  mặc định là 90 gây. \n\nGiá t trong khoảng thời gian bao lâu thì router vẫn \nthực hi\nnhậ\ngian\n\nNếu\nhold\nnhậ\ntrướ\nthê\ntrướ ến .Trong IGRP ,thời gian \nxóa bằng 7 lần chu kỳ cập nhật. \n\ni gian holddown được sử dụng để trách c\nc phát ra do chu kỳ cập nhật nh\nt mới.\n\nns: \n\nng cho outer gửi lại những thôn\nc tù chính hướng đó . \n\nson resverse: \n\nit horizons chỉ tránh được lặp vòng giữa 2 router kết nối trực tiếp với nhau ,còn \non resverse có thể tránh được vòng lặp lớn hơn .Thông thường ,khi một đường \n đó có thông số định tuyến cứ tăng dần lên là đường đó đã bị lặp vòng .Khi đó \nter phải phát ra thông tin poison resverse để xóa con đường đó và đặt con \nng đó vào trạng thái holddown .Đối với IGRP\n\niết thời gian\n\n trị của thời gian invalid cho biế\nện gửi thông tin cập nhật bình thường về một đường nào đó trước khi xác \n\nn chắc chắn là con đường đó không còn sử dụng được nữa .trong IGRP , thời \n invalid mặc định là bằng 3 lần chu kỳ cập nhật . \n\n có một mạng đích bắt đầu được đặt vào trạng thái holddown thì thời gian \ndown là khoảng thời gian mà router sẽ không cập nhật bất kỳ thông tin cập \n\nt nào về mạng đích đó nếu thông số định tuyến xấu hơn con đường router có \nc đó . Trong IGRP ,thời gian holddown mặc định bằng 3 chu kỳ cập nhật cộng \n\nm 10giây. Cuối cùng ,thời gian xóa là khoảng thời gian mà router phải chờ \nc khi thật sự xóa một con đường trong bảng định tuy\n\n\n\n 175\n\n \n\n \n\nTh\n \n\n \n\nieu vbản \n\n.  \n\nHình 7.3.5 \n\n6 Sự chuyển đổi từ RIP sang IGRP  7.3.\n\n\n\n 176\n\nVới\nđầu\nnội chọn đường dựa vào bằng thông và độ trễ của các đường \nliên kết mạng .IGRP hội tụ nhanh hơn RIP nên cũng trách được lặp vòng tốt hơn \n.Hơn nữa ,IGRP không còn bị giới hạn bởi s  lượng hop như RIP nữa .Nhờ những \nưu điểm trên, IGRP có thể phát triển c hệ thống mạng có cấu trúc lớn \nvà phức tạp . \n\nước để chuyển đổi từ RIP sang IGRP : \n\n sự ra đời của IGRP vào đầu thập niên 80 ,Cisco Sytems đã trở thành công ty \n tiên khắc phục được các nhược điểm của RIP khi định tuyến giữa các router \nbộ .IGRP quyết định \n\nố\nđược cho cá\n\nSau đây là các b\n\n1. Kểm tra xem trên router có chạy RIP hay không . \n\n \n\nHình 7.3.6a \n\n \n\nHình 7.3.6b \n\n\n\n 177\n\n2. Cấu hình IGRP cho router A và B . \n\n \n\nHình 7.3.6c \n\n3. Nhập  lệnh show ip protocols trên router A và B . \n\n \n\n\n\n 178\n\n \n\n \n\n \n\nHình 7.3.6d \n\n \n\n\n\n 179\n\n \n\n \n\n4. Nhập\n\nHình 7.3.6e \n\n lệnh show ip route trên router A và B. \n\n\n\n 180\n\n \n\nHình 7.3.6f \n\n \n\nHình 7.3.6g \n\n7.3.7 Ki\n\nĐể ki\ng \n\n. \n\nNgoài ra còn các l\n\nểm tra cấu hình IGRP  \n\nểm tra xem IGRP đã được cấu hình đúng chưa bạn dùng lệnh show ip \nroute và kiểm tra các đường của IGRP được đánh dấu bằng chữ \u201cI\u201d ở đầu dòn\n\nệnh sau bạn có thể sử dụng để kiểm tra cấu hình IGRP : \n\n\u2022 Show interface interface \n\u2022 Show running-config \n\n\n\n 181\n\n\u2022 Show running-config interface interface \n\u2022 Show running-config | begin interface interface  \n\u2022 Show running-config | begin igrp  \n\u2022 Show ip protocols \n kiểm tra xem cổng Ethernet đã được cấu hình đúng chưa thì bạn dùng lệnh Để\n\nsho\n\nĐể p \n\ng \n\nw interface fa0/0. \n\n kiểm tra IGRP đã được chạy trên router chưa thì bạn dùng lệnh show i\nprotocols. \n\n7.3.8 Xử lý sự cố của IGRP \n\nPhần lớn các sự cố của IGRP là do bạn khai báo sai lệnh network ,địa chỉ mạn\nIP không liên tục ,khai báo số AS sai . \n\n \n\nHình 7.3.8a \n\nSau\n\n\u2022 Show ip protocols \n\u2022 Show ip route  \n\u2022 Debug ip igrp events \n\u2022 Debug ip igrp transactions \n\u2022 Ping \n\u2022 Traceroute \n\n đây là các lệnh được sử dụng để tìm sự cố của IGRP : \n\n\n\n 182\n\n \n\nHình 7.3.8b \n\n \n\nHình 7.3.8c \n\ntrì thông tin \nđịnh tuyến như thế nào . \n\nng lặp có thể \nxuất hiện như thê nào . \n\nNếu chỉ số AS sai thì bạn có thể sửa lại chỉ số này như hình trên . \n\nTổng kết  \n\nSau đây là các điểm quan trong bạn cần nắm được  trong chương này: \n\n\u2022 Giao thức định tuyến theo vectơ khoảng cách thực hiện bảo \n\n\u2022 Trong các giao thức định tuyến theo vectơ khoảng cách ,vò\n\n\n\n 183\n\n\u2022 Cơ chế định nghĩa giá trị tối đa để tránh đếm vô hạn . \n\u2022 Tránh vòng lặp bằng split horizon . \n\nho router gửi thông tin cập nhật về định tuyến ra một cổng . \n\nu hình RIP  \n\nủa IGRP \n\u2022 Thông số định tuyến của IGRP \n\n \n\n\u2022 Route poisoning. \n\u2022 Tránh lặp vòng bằng cơ chế cập nhật tức thời . \n\u2022 Tránh lặp vòng bằng thời gian holddown . \n\u2022 Ngăn không c\n\u2022 Chia tải ra nhiều đường . \n\u2022 Tiến trình RIP \n\u2022 Cấ\n\u2022 Sử dụng lệnh ip classless. \n\u2022 Những vấn đề thường gặp khi cấu hình RIP  \n\u2022 Chia tải với RIP  \n\u2022 Tích hợp đường cố định vơi RIP \n\u2022 Kiểm tra cấu hình RIP \n\u2022 Đặc điểm c\n\n\u2022 Các loại đường trong IGRP \n\u2022 Tính ổn định của IGRP \n\u2022 Cấu hình của IGRP \n\u2022 Sự chuyển đổi từ RIP sang IGRP \n\u2022 Kiểm tra cấu hình IGRP \n\u2022 Xử lý sự cố của IGRP \n\n \n\n \n\n \n\n \n\n\n\n 184\n\nCHƯƠNG 8 \n\nTHÔNG ĐIỆP ĐIỀU KHIỂN VÀ BÁO LỖI CỦA TCP/IP \n\n \n\nGIỚI THIỆU  \n\nIP là một giao thức tự nỗ lực tối đa (Best - effort)để chuyển gói tới đích. Nó \nkhông hề có cơ chế nào để xác nhận dữ liệu đã được chưyển tới đích .Dữ liệu \ncó thể gặp sự cố trên đường đi tới đích vì rất nhiều lý do như phần cứng bị hư \nhỏng, cấu hình sai hoặc thông tin định tuyến không đúng. Để giúp xác định các \nsự cố xảy ra ,IP sử dụng giao thức thông điệp điều khiển Internet (ICMP -\nInternet Control Message Protocol) để thông báo cho máy nguồn biết là sự cố \nxảy ra trong quá trì ại thông điệp \nbáo lỗi khác nh sử dụng. \n\nận các thông điệp điều khiển và báo lỗi cho \nhost trên mạng. Chương này sẽ tập trung nhiều vào các thông điệp điều khiển \n.Đây là những thông điệp cung cấp thông tin về cấu hình ,định tính cho host \n.Am hiểu về thông điệp điều khiển của ICMP là một phần rất quan trọng giúp \nbạn xử lý sự cố mạng và hiểu được một cách đầy đủ về mạng IP. \n\n \n\nSau đây hoàn tất chương này ,bạn có thể thực hiện đựơc những việc sau: \n\n\u2022 Mô tả ICMP. \n\u2022 Mô tả cấu trúc của thông điệp ICMP. \n\u2022 Xác định loại thông điệp b . \n\u2022 Xác định nguyên nhân liên quan ng loại thông điệp báo lỗi ICMP. \n\nnh truyền dữ liệu. Chương này sẽ mô tả các lo\nau của ICMP và trường hợp nào thì chúng được \n\n \n\nBản thân IP không có cơ chế gửi thông điệp điều khiển và báo lỗi nên nó sử \ndụng ICMP để thực hiện việc gửi nh\n\náo lỗi ICMP\nđến từ\n\n\u2022 Mô tả thông điệp điều khiển ICMP. \n\u2022 Xác định được cácloại thông điệp điều khiển ICMP được sử dụng trong \n\nmạng ngày nay. \n\u2022 Xác định nguyên nhân liên quan đến thông điệp điều khiển ICMP. \n\n8.1.Tổng quát về thông điệp báo lỗi của TCP/IP \n\n\n\n 185\n\n8.1.1. Giao thức thông điệp điều khiển Interne (ICMP)  \n\nIP là một phương thức truyền dữ liệu không tin cậy trên mạng. Nó là một giao \nthức tự nỗ lực tối đa để truyền dữ liệu tới đích. Trong đó, IP không hề có một \ncơ chế nào để xác nhận là dữ liệu đã đến đích. Nếu một thiết bị trung gian trên \nđường đi như router chẳng hạn bị sự cố, hay là thiết bị đích không kết nối vào \nmạng nên dữ liệu không truyền tới đích thì IP không hề có cơ chế nào để thông \nbáo cho người gửi biết là quá trình truyền dữ liệu đã bị sự cố. Giao thức thông \nđiệp điều khiển Internet (ICMP) là một giao thức của bộ TCP/IP đã bổ sung cho \n\n đề về \nyết ở các lớp trên nếu cần thiết. \n\n như hình \n\nề sự cố đã xảy ra. \n\nkhiếm khuyết này của IP. ICMP không khắc phục được sự không tin cậy của IP. \nICMP chỉ đơn giản là phát đi các thông điệp để thông báo về sự cố. Vấn\nđộ tin cậy thì sẽ được giải qu\n\n8.1.2 . Thông báo lỗi và khắc phục lỗi. \n\nICMP là một giao thức thông báo lỗi của IP. Khi quá trình truyền dữ liệu xảy ra \nlỗi thì ICMP được sử dụng để thông báo lỗi cho nơi gửi dữ liệu. Ví dụ\n8.2.1. Máy 1 chuyển dữ liệu cho máy 6 nhưng cổng  Fa0/0 trên Router C bị \nngắt, khi đó Router C sử dụng ICMP để gửi thông báo lỗi cho Máy 1 biết là dữ \nliệu không truyền được tới đích. ICMP không khắc phục được sự cố mà nó chỉ \nđơn giản là thông báo v\n\n \n\nHình 8.2.1 \n\n\n\n 186\n\nRouter C nhận được gói dữ liệu nó chỉ biết được địa chỉ IP nguồn \n\nThông điệp ICMP cũng được truyền ư các gói dữ liệu khác cho nên nó \ncũng có thể gặp sự cố. Điều này dẫn tới một vấn đề là nếu một thông điệp báo \nlỗi gặp sự cố thì sẽ làm phát sinh thêm các thông điệp báo lỗi nữa và điều này \nlàm cho mạng càng bị nghẽn hơn khi sự cố vốn đã xảy ra và còn đang tồn tại \ntrên mạng. Chính vì vậy, các thông điệp báo lỗi của ICMP sẽ không tạo thêm \ncác thông điệp báo lỗi cho chính nó .Như vậy thì các thông điệp báo lỗi cũng có \nkhả năng là không bao giờ đến đến được máy nguồn của gói dữ liệu. \n\n từ Máy 1, \nđích của gói dữ liệu thôi. Router C không thể biết chính xác con đường mà gói \ndữ liệu đã đi đến được Router C. Do đó khi gửi thông báo lỗi thì Router C chỉ \ncó thể gửi cho Máy 1 chứ không gửi cho Router A và B. Như vậy là thông báo \nICMP chỉ gửi cho thiết bị nguồn của gói dữ liệu chứ không gửi cho các router. \n\n8.1.3.Truyền thông điệp ICMP \n\nThông điệp ICMP đựơc đóng gói giống như các dữ liệu khác khi truyền đi bằng \nIP. Hình 8.1.3 cho thấy dữ liệu của ICMP được đóng gói trong gói IP như thế \nnào. \n\n \n\nđi nh\n\n \n\nHình 8.1.3 \n\n8.1.4. Mạng không đến được  \n\nĐể thực hiện được việc thông ti mạng thì các điều kiện cơ bản cần n liên lạc trên \nphải có đủ .Trước tiên là thiết bị gửi và nhận dữ liệu phải được cấu hình đúng \nbộ giao thức TCP/IP.Việc này bao gồm cài đặt  bộ giao thức TPC/IP và cấu \nhình địa chỉ IP.,subnet mask cho thiết bị .Ngoài ra bạn cần phải khai báo \nDefoult gateway nếu thiết bị cần truyền dữ liệu ra ngoài phạm vi cục bộ .Thư \nhai là các thiết bị trung gian phải thực hiện việc định tuyến đúng để chuyển gói \ntừ nguồn đến đích .Router là thiết bị thực hiện nhiệm vụ này .Do đó router phải \n\n\n\n 187\n\nđược cấu hình bộ TCP/IP cho các cổng giao tiếp và sử dụng giao thức định \ntuyến thích hợp . \n\n \n\nNếu 2 điều kiện trên không được đáp ứng thì hệ thống mạng không thể thực \nhiện thông tin liên lạc được .Ví ột thiết bị gửi dữ liệu đến một địa \n\nHình 8.1.4 minh họa cho trường hợp router không thể gửi gói dữ liệu đến đích \ndo router không biết đường đến mạng đích , router gửi thông điệp ICMP về cho \nmáy nguồn để thông báo là mạng đích không đến được . \n\n dụ như khi m\nchỉ IP không tồn tại hoặc là thiết bị đích đã bị ngắt kết nối ra khỏi mạng . \nRouter cũng là nguyên nhân của sự cố nếu cổng giao tiếp trên router bị ngắt \nhoặc router không có thông tin cần thiết để tìm ra đường tới mạng đích .Những \ntrường hợp như vậy đều được xem là mạng đích không đến được . \n\n \n\nHình 8.1.4 \n\n8.1.5 Sử dụng lệnh ping để kiểm tra xem địa chỉ đích có đến được không  \n\nGiao thức ICMP có thể được sử dụng để kiểm xem có đến được một địa chỉ nào \nđó hay không .ICMP sẽ gửi thông điệp echo request đến máy đích .Nếu máy \nđích nhận được echo request thì sẽ trả lời lại thông điệp echo reply cho máy \nnguồn .Nếu máy nguồn nhận được echo reply thì điều đó khặng định là máy \nđích có thể đến được bằng giao thức IP. \n\n\n\n 188\n\nLệnh ping khởi tạo các thông điệp echo request .Ví dụ như hình 8.1.5a và \n.5b ,chúng ta sử dụng lệnh ping với địa chỉ IP đích .Lệnh ping gửi đi 4 gói \no request và nhận về 4 gói echo reply xác nhận kết nối IP giữa 2 thiết bị hoạt \ng tốt. \n\n8.1\nech\nđộn\n\n \n\nHình 8.1.5a \n\n \n\nHình 8.1.5b \n\n8 6. Phát h  đường dài quá\n\nGói dữ liệu khi truyền đi trên mạng có thể bị truyền lòng vòng và không bao \ng đế ề  định  dụ \nnh  2 rout ộ ằng \nrouter kia mới là trạm kế tiếp đến đích . \n\n.1. iện  giới hạn  \n\niờ \nư\n\nn được đích .Đi\ner cú gửi m\n\nu này có thể xảy ra khi thông tin\nt gói dữ liệu qua lại cho nhau vì router này ngh\n\n tuyến bị sai ,ví\nĩ r\n\n\n\n 189\n\n \n\nGiao thức định tuyến có quy trình có quy định giới hạn để xác định mạng đích \nkhông đến được .Ví dụ như RIP có số hop giới hạn là 15 .Điều này có nghĩa là \ngói dữ liệu chỉ được phép đi qua tối đa 15 router. \n\nà gói dữ liệu đi qua bị lặp vòng hoặc có quá nhiều hop thì khi \n\nm giá trị TTL đi 1 .Khi giá trị TTL \nb g 0 thì router sẽ hủy bỏ gói  ICMP dù e \ne ee  bá của bị hết \nthời gian . \n\n8.1.7.Thông điệp echo  \n\nNhư bất kỳ các loại gói dữ liệu khác ,thông điệp ICMP cũng có định dạng riêng \n\n\u2022 Type  \n\nPhầ  \nbiế  \ntro phần này được sử dụng để kiểm tra lỗi cho dư \nliệu. \n\n \n\nTrong hình 8.1.7a là cấu trúc của thông điệp ICMP echo request và echo reply \n.Trong đó chỉ số Type và Code tương ứng với mỗi loại thông điệp .Phần \n\nntifier equence Numb ối với từng gói echo request và \no ro c tương \n\nứng với echo request nào.Còn phần Data chứa các thông tin bổ sung của thông \nđiệp echo request và echo reply. \n\n \n\nKhi con đường m\ngói dữ liệu vượt qua giá trị hop tối đa ,giá trị Time-to-live (TTl)của gói dữliệu \ncũng hết thời gian vì giá trị TTL được cài đặt khớp với số hop tối đa đã được \nđịnh nghĩa của giao thức định tuyến.Mỗi một gói dữ liệu đều có một giá trị TTL \n.Mỗi router sau khi xử lý gói dữ liệu sẽ giả\nằn dữ liệu đó .Khi đó ng thông điệp \u201cTim\nxc ded\u201d để thông o cho máy nguồn biết là TTL  gói dữ liệu đã \n\n.Mỗi một loại thông điệp ICMP có một đặc điểm riêng nhưng tất cả các gói \nICMP đều bắt đầu bằng 3 phần : \n\n\u2022 Code \n\u2022 Checksum \nn type cho biết loại thông điệp nào của ICMP được gửi đi. Phần Code cho\n\nt chi tiết hơn về loại thông điệp ICMP .Phần checksum cũng tương tự như\nng các loại gói dữ liệu khác ,\n\nIde và S er sẽ khác nhau đ\nech  reply .Chỉ số t ng 2 phần này được sử dụng để xá  định echo reply \n\n\n\n 190\n\n \n\nHình 8.1.7a \n\n \n\nHình 8.1.7b \n\n8.1.\n\nô g  hỏng \nần c\nh h không \n\n . \n\n\u201d. \n\nGiá trị 3 trong phần Type cho biết đây là thông điệp \u201cDestination Unreachable\u201d \n\n.Giá trị trong phần Code sẽ ch nhân tại sao không chuyển được \n\n8.Thông điệp \u201cDestination Unreachable\u201d \n\nKh\nph\n\nng  phải lúc nào \nứng ,cấu hình giao t\n\nói dữ liệu cũng chuyển được đến đ\nhức không đúng ,cổng giao ti\n\ních .Ví dụ như hư\nếp bị ngắt ,thông tin \n\nđịn  tuyên sai\u2026 là n ững nguyên nhân có thể gây ra làm cho gói dữ liệu \nthể chuyển được tới đích .Trong những trường hợp như vậy thì ICMP gửi thông \nđiệp \u201cDestination Unreachable\u201d cho máy gửi để thông báo là gói dữ liệu không \nchuyển được tới đích\n\nTrong hình 8.1.8a là cấu trúc của thông điệp \u201cDestination Unreachable\n\no biết nguyên \ngói dữ liệu đến đích .Ví dụ như phần Code có giá trị 0 có nghĩa là mạng đích \nkhông đến được . \n\n\n\n 191\n\n \n\nHình 8.1.8a \n\n \n\nHình 8.1.8b \n\nKhi gói dữ liệu đựơc chuyển từ -ring ra mạng Ethernet thì thường \n\nác loại lỗi khác \n\nmạng Token\nphải phân mảnh ra thành các gói nhỏ hơn .Nếu gói dữ liệu không cho phép phân \nmảnh thì gói dữ liệu không thể chuyển ra được ,khi đó thông điệp \u201cDestination \nUnreachable\u201d sẽ được gửi đi.Thông điệp ICMP này cũng được gửi đi khi các \ndịch vụ liên quan đến IP như FTP ,Web không tim thấy .Điều quan trong khi xử \nlý sự cố mạng IP là bạn cần phải hiểu được các nguyên nhân khác nhau tạo nên \nthông điệp ICMP \u201cDestination Unreachable\u201d. \n\n8.1.9.Thông báo c\n\nKhi thiết bị xử lý gói dữ liệu không chuyển gói dữ liệu đi được do một số lỗi ở \nphần Header của gói dữ liệu .Loại dữ liệu này không liên quan gì đến host đích \nhay mạng đích nhưng nó vẫn làm cho gói dữ liệu không thể chuyền được đến \nđích .Trong trường hợp này ,thông điệp ICMP \u201cParameter Problem\u201d,Type 12 sẽ \nđược gửi về cho máy nguồn. \n\n \n\n\n\n 192\n\nTrong hình 8.1.9 là cấu trúc của thông điệp \u201cParameter Problem\u201d.Trong đó có \nn Pointer .Kphầ hi giá trị Code là 0 ,phần Pointer cho biết octet nào trong gói dữ \n\nliệu bị lỗi . \n\n \n\nHình 8.1.9 \n\n8.2.Thông điệp điều khiển của TCP/IP \n\n8.2.1.Giới thiệu về thông điệp điều khiển  \n\nICMP là một phần của bộ giao thức TCP/IP .Thực tế là tất cả các hệ thống IP \nđều phải bao gồm ICMP .Lý do của vi c này hết sức đơn giản .Trước hết là IP \nkhông có cơ chế nào để đảm bảo ã được chuyển tới đích ,hoàn toàn \n\nì cho host biết khi sự cố xảy ra .IP không có cơ chế cung cấp \n hoặc điều khiển cho host .Và ICMP đã thực hiện việc này \n\ncho IP . \n\nệ\n là dữ liệu đ\n\nkhông thông báo g\nthông điệp thông báo\n\n \n\nHình 8.2.1 \n\nKhông giống như thông điệp báo lỗi ,thông điệp điều khiển không phải được \ntạo ra là do mất gói dữ liệu hay do lỗi của quá trình truyền dữ liệu .Mà các \nthông điệp điều khiển được dùng để thông báo cho host biết về tình trạng nghẽn \n\n\n\n 193\n\nmạch trên mạng hay thông báo cho host biết là có một gateway tốt hơn dẫn đến \nmạng đích \u2026Cũng giống như tất cả các gói ICMP khác ,thông điệp điều khiển \n\nói IP để truyền thông điệp trên \n\nnhau .Một số loại thường \n\np nhất là redirect/change request.Loại \nà thông thường đó chính là router .Tất \n\n i được cấu hình \n kết nối vào \n\n ,một host được nối vào router \n.Host B được cấu hình default gateway là địa \n\nụng địa chỉ IP này để đến các \nmạng khác .Bình thường host B chỉ  kết nối đến một gateway.Tuy nhiên cũng \ncó trường hợp một host kết nối vào mạng 2 hay nhiều router.Trong trường hợp \nđó , default gateway của host sẽ cần dùng redirect/change request để thông báo \ncho host biết về một gateway khác tốt hơn để đến một mạng đích nào đó. \n\nđược đóng gói trong gói IP .ICMD sử dụng g\nmạng . \n\n \n\nICMP có rất nhiều loại thông điệp điều khiển khác \ngặp nhất được thể hiện ở hình 8.2.1. \n\n8.2.2.Thông điệp ICMP redirect/change request  \n\nThông điệp điều khiển ICMP thường gặ\nthông điệp này được tạo ra bởi gateway m\ncả các host khi muốn thông tin liên lạc với các mạng IP đều phả\ndefault gateway. Default gateway là địa chỉ của một cổng trên router\ncùng một mạng với host .Như trong hình 8.2.2a\nvà router này có kết nối ra Internet\nchỉ IP của cổng Fa0/0trên router.Host B sẽ  sử d\n\n \n\nHình 8.2.2a \n\n\n\n 194\n\nTrong hình 8.2.2b là một ví dụ cho trường hợp cần sử dụng ICMP redirect.Host \nH gửi dữ liệu cho Host C trong mạng 10.0.0.0/8 .Vì mạng đích không kết nối \ntrực tiếp vào Host H nên Host H gửi gói đến default gateway của nó là Router \n\nạng 10.0.0.0/8 thì \nc trở ra cổng mà \n\nvào .Khi đó router R1 sẽ chuyển gói dữ liệu đi và \n\nR1 .Router R1 tìm trên bảng định tuyến để tìm đường đến m\nthấy rằng để chuyển gói tới đích router phải gửi gói này ngượ\nnó vừa mới nhận gói dữ liệu \nđồng thời gửi thông điệp ICMP redirect/change request tới Host H để thông báo \nlà Host H nên sử dụng Router R2 làm gateway cho tất cả các gói dữliệu đến \nmạng 10.0.0.0/8 . \n\n \n\nHình 8.2.2b \n\nDefault gateway chỉ gửi thông điệp ICMD redirect/change request khi gặp các \nđiều kiện sau : \n\ndữ liệu đi. \n\u2022 Địa chỉ IP của máy nguồn là cùng một mạng /subnet với địa chỉ IP của \n\nược lại máy nguồn . \n báo cho host không phải là đường \n\nh của router và cũng không phải là của một ICMP redirect nào \n\nBạn có thể dùng lệnh no ip redirect \nđể tắt chức năng này trên một cổng nào đó của router ). \n\n\u2022 Cổng mà router nhận gói dữ liệu vào cũng chính là cổng mà router sẽ \nchuyển gói \n\ntrạm kế tiếp . \n\u2022 Gói dữ liệu nhận được không phải gửi ng\n\u2022 Con đường mà router thực hiện thông\n\nmặc địn\nkhác. \n\n\u2022 Router phải được cấu hình để thực hiện redirect.(Mặc định là Cisco \nrouter thực hiện gửi ICMP redirect.\n\n\n\n 195\n\nThông điệp ICMP redirect /change request có cấu trúc như hình 8.2.2c.Trong \nđó phần Type có giá trị là 5 ,phần Code có giá trị là 0,1,2 hoặc 3. \n\n \n\nPhần Router Internet Address chứa địa chỉ IP của gateway mới .Ví dụ như trên \na Router R1 gửi cho Host H ,phần Router Internet : trong thông điệp redirect củ\n\nAddress sẽ có giá trị là 172.16.1.200,đây là địa chỉ IP của  cổng E0 trên Router \nR2 . \n\n \n\nHình 8.2.2c \n\n \n\nHình 8.2.2d \n\n8.2.3.Đồng bộ đồng hồ và ước tính thời gian truyền dữ liệu  \n\nBộ giao thức TCP/IP cho phép hệ thống mạng này kết nối với hệ thống mạng \n\niệp  ICMP Timestamp được thiết kế để giải quyết vấn đề \n\nThông điệp ICMP timestamp request cho phép một host hỏi giờ hiện tại trên \nmột máy khác .Máy được hỏi sẽ dùng thông điệp ICMP timestamp reply để trả \nlời . \n\n \n\nkhác ở cách nhau rất xa thông qua nhiều hệ thống mạng trung gian .Mỗi một hệ \nthống mạng có một cơ chế đồng bộ đồng hồ riêng .Do đó khi một host ở mạng \nkhác sử dụng phần mềm cần đồng bộ thời gian để thực hiện liên lạc thì có thể \nsẽ gặp rắc rối .Thông đ\nnày . \n\n \n\n\n\n 196\n\nPhần Type trong thông điệp ICMP timestamp có gi 13 (timestamp \np reply ) .Ph ị là 0 vì loại thông \n\n có gì khác hơn. Phần Originate timestamp là thông tin về giờ \ny trước khi th được \n\ngửi đi .Phần Recive timestamp là thời điểm mà máy đích nhận được yêu cầu \n\nICMP timestam\n\ná trị là \nrequest )hoặc 14(timestam\nđiệp này không\n\nần Code luôn có giá tr\n\nhiện tại trên máy gửi nga ông điệp ICMP timestamp request \n\nrequest .Phần Transmit timestamp là th\nmáy này gửi thông điệp \n\nời điểm trên máy trả lời ngay trước khi \np reply. \n\nTất cả 3 thống số về thời gian trên đều\nđiểm nửa đêm theo giờ Quốc tế (Unive\n\n được tính bằng số mili giây tính từ thời \nsal Time -UT). \n\n \n\nHình 8.2.3 \n\nTất cả các thông tin ICMP timestamp reply đều có đầy đủ 3 thông số :thời điểm \n điểm nhận được request và thời điểm gửi gói reply .Dựa \n\nn \n\nmp.Kết quả này cũng chỉ \n\nại trên máy đích . \n\niệp ICMP information request và reply cho phép host xác định địa chỉ \nmạng của nó .Hình 8.2.4 là cấu trúc của loại thông điệp này. \n\ngửi gói request ,thời\nvào 3 thông số này host có thể ước lượng được khoảng thời gian dữ liệu truyề\ntrên mạng từ máy nguồn đến máy đích bằng cách lấy giá trị của phần Originate \nTimestamp trừ cho giá trị của phần Transmit timesta\nmang tính chất ước lượng thôi vì thời gian truyền thật sự còn phụ thuộc vào lưu \nlượng truyền thực tế trên mạng lúc đó .Ngoài ra ,host còn có thể ước tính được \ngiờ hiện t\n\n \n\nThông điệp ICMP timestamp là một cách đơn giản để uớc đoán giờ trên máy \nđích và ước tính tổng thời gian truyền trên mạng nhưng đây chưa phải là cách \ntốt nhất .Giao thức Network Time Protocol (NTP) ở lớp trên của giao thức \nTCP/IP thực hiện đồng bộ đồng hồ theo cách tin cậy và chính xác hơn. \n\n8.2.4.Thông điệp Information request và reply \n\nThông đ\n\n\n\n 197\n\n \n\nHình 8.2.4 \n\nPhần Type có 2 giá trị :giá tr\n.Loại thông điệp này của\n\nị 15 tương ứng với thông điệp Information reply \n ICMP được xem là đã quá lỗi thời .Hiện nay ,các giao \n\nho host \n. \n\n \n\nKhi người quản trị mạng dùng một địa chỉ IP lớn chia ra thành nhiều subnet \n,các subnet sẽ có subnet mask tương ứng .Subnet mask được sử dụng để xác \nnhận các bit của phần Network .Subnet  và các bit của thành phần Host trong \nđịa chỉ IP .Nếu một host  biết địa chỉ IP của router thì nó gửi yêu cầu tới trực \ntiếp của router ,còn nếu không thì nó sẽ quảng bá yêu cầu của nó .Khi router \nnhận được yêu cầu này ,router sẽ dùng thông điệp Address mask reply để trả \nlời .Trong thông điệp Address mask reply sẽ có subnet mask chính xác cho \nhost.Ví dụ : môt host trong mạng lớp B có địa chỉ IP là 172.16.5.2 .Host này \nkhông biết subnet mask của mình nên nó broadcast thông đ p Address mask \nrequest như sau : \n\nress:172.16.5.2 \n\nời bằng thông điệp \nAddress mask reply như sau : \n\nthức BOOTP và DHCP được sử dụng nhiều để cung cấp địa chỉ mạng c\n\n8.2.5 Thông điệp Address Mask  \n\niệ\n\n  Source add\n\n  Destination address:255.255.255.255 \n\n  Protocol :ICMP =1 \n\n  Type :Address Mask Request =AM1 \n\n  Code :0 \n\n  Mask:255.255.255.0 \n\nRouter 172.16.5.2 nhận được thông điệp trên và trả l\n\n\n\n 198\n\n  Source address:172.16\n\npe :Address Mask Request =AM2 \n\nCấu trúc của thông điệp Address Mask Request và reply được thể hiện ở hình \n8.2.5.Thông điệp Address Mask Request và reply có cấu trúc hoàn toàn như \nnhau ,chỉ khác nhau giá trị phần Type .Phần Type có giá trị 17 là tương ứng với \nrequest ,còn giá trị 18 là tương ứng với reply .Phần Identifier và Sequênc \nNumber giúp phân biệt reply nào tương ứng với request nào ,giá trị hai phần \nnày thường là 0.Phần Checksum được dùng để kiểm tra lỗi cho thông điệp \nICMP được tính bắt đầu từ phần Type trở đi. \n\n.5.1 \n\n  Destination address:172.16.5.2 \n\n  Protocol :ICMP =-1 \n\n  Ty\n\n  Code :0 \n\n  Mask:255.255.255.0 \n\n \n\nHình 8.2.5 \n\n \n\nưa được cấu hình Default \n\ng địa chỉ multicast là 224.0.0.2 .Thông điệp này cũng có thể được gửi \nbroadcast để gửi đến được những router không có cấu hình multicast .Khi nhận \n\n,nếu router không có cấu hình hỗ trợ quá trình này thì \nrouter sẽ không trả lời gì hết .Còn nếu router có hỗ trợ quá trình này thì router \nsẽ trả lời lại bằng thông điệp Router advertisement .Cấu trúc của thông tin điệp \nRouter advertisement được mô tả ở hình 8.2.6. \n\n8.2.6 . Thông điệp của router  \n\nKhi có host trong mạng bắt đầu khởi động và host ch\ngateway thì nó có thể tìm gateway bằng thông điệp Router discovery.Trước \ntiên ,host gửi thông điệp Router solicitation cho tất cả các router bằng cách \ndùn\n\nđược thông điệp trên \n\n\n\n 199\n\n \n\nHình 8.2.6 \n\n8.2.7 . Thông điệp Router solicitation  \n\nHost gửi thông điệp Router solicitation trong trường hợp bị mất Default \ngateway.Thông điệp này được gửi multicast và đây chính là bứơc đầu tiên của \nquá trình tìm router đã đề cập ở phần 8.2.6 .Router sẽ trả lời lại bằng thông \n\nsement,trong đó có cung cấp Default gateway cho host điệp Router Adverti\n.Hình 8.2.7 là cấu trúc của thông điệp Router solicitation: \n\n \n\nHình 8.2.7 \n\n8.2.8.Thông điệp báo nghẽn và điều khiển luồng dữ liệu  \n\n điệp ICMP source-quence giúp \n\n tốc độ phát gói dữ liệu .Sau khoảng thời gian ngăn \n,nghẽn mạch được giải tỏa và máy gửi có thể tăng dần tốc độ truyền lên sau khi \nkhông còn nhận được thông điệp source-quence nào nữa .Mặc định là đa số các \nCisco router không thực hiện gử  source-quence vì có thể các thông \nđiệp này còn làm cho tình trạng tắc nghẽn bị tăng thêm . \n\nNếu có nhiều máy tính cùng lúc truy xuất   vào cùng một máy đích thì máy \nđích có thể bị quá tải .Nghẽn mạch có thể xảy ra khi lưu lượng từ mạng LAN \ntốc độ cao được truyền ra kết nối WAN có tốc độ thấp hơn .Nếu mạng bị nghẽn \nquá mức thì các gói dữ liệu sẽ bị hủy bỏ .Thông\nlàm giảm lượng dữ liệu bị hủy bỏ .Thông điệp này sẽ được gửi cho máy gửi để \nyêu cầu máy gửi giảm\n\ni thông điệp\n\n \n\n\n\n 200\n\nMô hình văn phòng nhỏ -văn phòng tại nhà (SOHO \u2013Small Office Home \nOffice)là một trường hợp áp dụng tốt ICMP source-quence .Ví dụ một SOHO \n\n cáp Cat5 và 4 máy này \núng ta thấy rằng đường \n\nng truy cập Internet này cho các máy tính còn lại có thể dùng thông điệp \n\ncó một mạng gồm 4 máy tính được nối với nhau bằng\nchia sẻ nhau một kêt nối Internet 56K bằng moden .Ch\nkết nối WAN với băng thông 56K sẽ nhanh chóng bị quá tải với mạng LAN \nbăng thông 100Mbps của SOHO ,kết quả là dữ liệu sẽ bị mất và phải truyền lại \nnhiều lần .Máy tính có kêt nối ra Internet và giữ vai trò gateway để chia sẻ \nđườ\nICMP yêu cầu các máy tính khác giảm tốc độ truyền để trách việc mất mát dữ \nliệu do nghẽn mạch. \n\n \n\nHình 8.2.8 \n\n \n\nTỔNG KẾT  \n\nSau đây là các điểm quan trọng bạn cần nắm trong chương này : \n\nói dữ liệu .IP sử dụng thông điệp \nữ liệu đã không chuyển tới được \n\nười quản trị mạng  \n\ntruyền thông điệp ICMP không tin cậy . \n\u2022 Gói ICMP có phần Header riêng đặc biệt bắt đầu bằng phần Type và Code. \n\u2022 Xác định được nguyên nhận tạo ra các thông điệp báo lỗi của ICMP . \n\n\u2022 IP là cơ chế tự nỗ lực tối đa để truyền g\náy nguồn biết là dICMP để thông báo cho m\n\nđến đích . \n\u2022 Thông điệp ICMP echo request và echo reply cho phép ng\n\nkiểm tra kết nối IP trong quá trình xử lý sự cố mạng . \n\u2022 Thông điệp ICMP cũng được vận chuyển bằng giao thức IP nên quá trình \n\n\n\n 201\n\n\u2022 Chức năng của các thông điệp điều khiển ICMP. \n\u2022 iệp ICMP redirect/change rquest . \n\niệp ICMP để đồng bộ đồng hồ và ước lượng thời gian truyền dữ liệu \n\n dữ liệu. \n\n Thông đ\n\u2022 Thông đ\n\n. \n\u2022 Thông điệp ICMP information request và reply. \n\u2022 Thông điệp ICMP để tìm router . \n\u2022 Thông điệp ICMP router solicitation. \n\u2022 Thông điệp ICMP để báo nghẽn và điều khiển luồng\n\n \n\n\n\n 202\n\nLời nói đầu \n\nNhằn đảm bảo kiến thức cần thiết cho một CCNA giáo trình hệ thống mạng máy \n\n giáo trình hệ thống mạng máy tính CCNA 2 giúp bạn tìm hiểu \nhoạt dộng của router và hướng dẫn cấu hình cơ bản cho router với các giao thức \n\n cách thức cấu hình cho hai giao thức OSPF và EIGRP được trình bày rất \n\nh và so sánh chi tiêt hoạt động của các loại thiết bị mạng như \nn VLAN \n\nvề cơ chế hoạt động của switch trong VLAN và cách thức cấu hình switch, router \nđể \n\nNó\nnắm vữ ột LAN. Chúc cácbạn đạt \nđượ\nquan tr còn lại cho một CCNA. Là cáccông nghệ WAN dùng để kết nối giữa \ncác mạ\ntính C\n\nMặc d g chắc không thể tránh khỏi \nnhữ ọc ủng hộ và đóng góp ý kiến. Xin chân thành \ncảm n\n\ntính  \n\nCCNA 1 đã giới thiệu khái quát hệ thống mạng số liệu theo mô hình phân lớp. \nTrong giáo trình này toàn bộ kiến thức cơ bản về hệ thống mạng số liệu đã được \ngiới thiệu. Kế tiếp \n\nđịnh tuyến đơn giản như RIP, IGRP. Như các bạn đã biết router là thiết bị quan \ntrọng của mạng số liệu với nhiệm vụ then chốt là định tuyến . Nhiệm vụ định tuyến \ncủa router không dừng lại ở đó mà được phát triển tốt hơn. Từ đó . giáo trình hệ \nthống mạng máy tính CCNA 3 tiếp tục phân tích sâu sắc về các đặc điểm hoạt \nđộng của từng loại giao thức định tuyến phức tạp khác trong router. Đặc biệt hoạt \nđộng và\nchi tiết trong giáo trình này. \n\nNgoài ra giáo trình hệ thống mạng máy tính CCNA 3 còn giúp các bạn hiểu rõ hoạt \nđộng của switch và hướng dẫn cấu hình để đưa switch vào hoạt động. Giáo trình \nnày cũng phân tíc\nreapeater, hub, switch và router. Đặc biệt một số chương giúp bạn tiếp cậ\n\ntạo các VLAN \n\ni tóm lại mục tiêu của giáo trình hệ thống máy tính CCNA 3 là giúp các bạn \nng toàn bộ các khía cạnh nối mạng cơ bản cho m\n\nc mục tiêu này và thực sự làm chủ được một LAN. Khối kiến thức và kỹ năng  \nọng \nng LAN. Chủ đề này sẽ được trình bày trong giáo tình hệ thống mạng máy \n\n C NA 4 \n\nù rất cố gắng trong quá trình biên soạn nhưn\nng thiếu sót rất mong được bạn đ\n ơ  \n\n\n\n 203\n\nLờ\nKín t n MKPUB trước hết xin bày tỏ long \nbiế n o Bạn đọc đối với tủ sách \nMK\n\nKh\nao động khoa học nghiêm túc \n\ni ngỏ \nh hưa quý bạn đọc gần xa. Ban xuất bả\n\nt ơ  và niêm vinh hạnh trước nhiệt tình của đông đả\n MUB trong thời gian qua \n\nẩu hiệu của chúng tôi là: \nL\n\nChất lượng va ngày càng chất lượng hơn \n\nTất cả vì Bạn đọc \n\nRất nhiều bạn đọc đã gửi mail cho chúng tôi đóng góp nhiều ý kiến quý báo cho tủ \nsách \n\nBan xuất bản MK MUB xin được kính mời quý bạn đọc tham gia cùng nâng cao \nchất lượng tủ sách  của chúng ta \n\nTrong quá trình đọc, xin các bạn ghi chú lại các sai sót của cuốn sách hoặc các \nnhận xét của riêng bạn. Sau đó xin gửi về địa chỉ \n\nEmal: mkbook@minhkhai.com.vn \u2013 mk.pub@minhkhai.com.vn\n\nHoặc gửi về : Nhà sách Minh khai \n\n249 Nguyễn Thị Minh Khai, Q1, tp Hồ chí Minh \n\nếp lên cuốn sá ốn sách đó cho chúng tôi thì \n tôi sẽ xin hoàn lại cước phí bưu điện và gửi lại cho Bạn cuốn sách khác \n\nủ  bạn \n\n n g ôi rất \nmong nhận đượ ủa quý bạn đọc g\n\nMK.PUB và bạn đọc cùng làm! \n\n Nếu bạn ghi c\nchúng\n\nhú trực ti ch, rồi gửi cu\n\nChúng tôi xin \ntheo một danh \n\nVới mục đích\n\ngửi tặng một cuốn sách củ\nmục thích hợp sẽ được gửi tới \n\ngày càng nâng cao chất lư\nc sự hợp tác c\n\na t  sách MK PUB tùy chọn lựa của\nbạn. \n\nợn  của tủ sách MK. PUB chúng t\nần xa \n\n\n\n 204\n\nMục lụ\nLỜI NÓI ĐẦU .................................................................................................... 3 \n\nLỜI NGỎ ............................................................................................................ 3 \n\nMỤC LỤC........................................................................................................... 5 \n\n13 \n\n. 13 \n\n1.1. VLSM ..................... 14 \n\n1.1.1. VLSM là gì và tại sao phải 14 \n\n1.1.2. Sự phí phạm không gian địa ch ........................... 15 \n\n1.1.3. Khi nào sử dụng VLSM............................................................... 16 \n\n1,1.4. Tính toán chi subnet với SLSM 18 \n\n1.1.5. Tổng hợp địa chỉ với VLSM........................................................ 23 \n\n1.1.6. Cấu hình VLSM............ .. 24 \n\n1.2. RIP phiên bản2........................................................................................ 25 \n\n1.2.1 Lịch sử của RIP............................................................................. 25 \n\n26 \n\nTỔNG KẾT......................................................................................................... 34 \n\nc \n\nCHƯƠNG 1: G\n\nGIỚI THIỆU .\n\niới thiệu về định tuyến khô g \n\n........................................... ...\n\n............................\n\nn theo lớp địa chỉ .........................\n\n.... ...................................................\n\n....................................................\n\nsử dụng nó........................................\n\nỉ .......................\n\n...................................................\n\n.... ....................................................\n\n1.2.2. Đặc điểm của RIP phiên bản 2.....................................................\n\n1.2.3 So sánh RIv1 và RIv2 ................................................................... 27 \n\n1.2.4 Cấu hình RIPv2............................................................................. 28 \n\n1.2.5. Kiểm tra RIPv2 ............................................................................ 30 \n\n1.2.6 Xử lý sự cố RIPv2......................................................................... 31 \n\n1.2.7 Đường mặc định....................................................................... 32 \n\n\n\n 205\n\nCHƯƠNG 2: OSPF Đơn vùng............................................................................ 35 \n\nGIỚI THIỆU ....................................................................................................... 35 \n\n............................. 37 \n\nết.. 37 \n\nc điểm của giao thức định tuyến theo trạng thái đường liên kết. 38 \n\n Ưu và nhược điểm của giao thức định tuyến theo trạng thái đường liên \nkết.............................................................................................................. 43 \n\n2.1.6 So sánh và phân biệt giữa định tuyến theo vectơ khoảng cách và định \ntuyến theo trạng thái đường liện kết ......................................................... 44 \n\n2.2 Các khái niệm về OSPF đơn vùng........................................................... 46 \n\n2.2.1 Tổng quát về OSPF.......................................................................... 46  \n\n2.2.2 Thuật ngữ của OSPF........................................................................ 47 \n\n2.2.3 So sánh OSPF với giao thức định tuyến theo vectơ khoảng cách... 51 \n\n2.2.4 Thuật toán chon đường ngắn nhất ................................................... 53 \n\n2.2.5 Các loại mạng OSPF........................................................................ 54 \n\n2.2.6 Giao thức OSPF Hello ..................................................................... 56 \n\n2.2.7 Các bước hoat động của OSPF........................................................ 58 \n\n.3 Cấu hìn OSPF đơn vùng .......................................................................... 62 \n\n2.3.1 Cấu hình tiến trình định tuyến OSPF .............................................. 62 \n\n2.3.2 Cấu hình địa chỉ loopback cho OSPF và quyền ưu tiên cho router 63 \n\n2..3.3 Thay đ 68 \n\n2.1 Giao thức định tuyến theo trạng thái đường liên kết ..\n\n2.1.1 Tổng quát về giao thức định tuyến theo trạng thái đường liên k\n\n2.1.2 Đặ\n\n2.1.3 Thông tin định tuyến được duy trì .................................................. 40 \n\n2.1.4 Thuật toán định tuyến theo trạng thái của đường liên kết ............... 41 \n\n2.1.5\n\n2\n\nổi giá trị chi phí của OSPF ..................................................\n\n\n\n 206\n\n2.3.4 Cấu hình quá trình xác minh cho OSPF .......................................... 69 \n\n2.3.5 Cấu hình các thông số thời gian của OSPF ..................................... 70 \n\n2.3.8 Kiểm tra cấu hình OSPF.................................................................. 72 \n\n................................. 74 \n\nGIÓI THIỆU ....................................................................................................... 75 \n\n............................................... 77 \n\nGRP và IGRP ................................................................. 77 \n\n2.3.6 OSPF thực hiện quảng bá đường mặc định..................................... 71 \n\n2.3.7 Những lỗi thường gặp trong cấu hình OSPF................................... 72 \n\nTỔNG KẾT........................................................................\n\nCHƯƠNG 3: EIGRP........................................................................................... 75 \n\n3.1. Các khái niệm của EIGRP .......................\n\n3.1.1 So sánh EI\n\n3..1.2 Các khái niệm và thuật ngữ của EIGRP......................................... 79 \n\n3.1.3 Các đặc điểm của EIGRP ................................................................ 85 \n\n3.1.4. Các kỹ thuật của EIGRP................................................................. 86 \n\n3.1.5 Cấu trúc dữ liệu của EIGRP ............................................................ 89 \n\n3.1.6 Thuật toán EIGRP ........................................................................... 91 \n\n3.2 Cấu hình EIGRP ...................................................................................... 97 \n\n3.2.1 Cấu hình EIGRP .............................................................................. 97 \n\n3.2.2. Cấu hình  đường tổng hợp cho EIGRP........................................... 99 \n\n \n\n \n\n \n\n \n\n\n\n 207\n\nChương 1:  \n\nGIỚI THIỆU VỀ ĐỊNH TUYẾN KHÔNG THEO LỚP ĐỊA CHỈ \n\nGIỚI THIỆU \n\nNgười quản trị mạng phải có dự kiến và quản lý sự phát triển về mặt vật lý của hệ \nthống mạng, ví dụ như mua hoặc thuê thêm một tầng lầu trong toà nhà, trang bị \nthêm các thiết bị mới như switch, router, bộ tập trung cáp kệ để các thiết bị\u2026 Khi \nthiết kế hệ thống mạng người thiết kế thường phải chọn một sơ đồ phân phối địa \nchỉa cho phép mở rộng mạng về sau. Phân phối địa chỉ IP không cố định chiều dài \nsubnet mask là một kỹ thuật phân phối địa chỉ IP hiệu quả, có khả năng mở rộng \nnhiều hơn \n\na Internet và TCP/IP mỗi công ty tập đoàn đều phải \n lựa TCP/IP là giao \n\nưng thật không \n\nản 6 được xem là môt không gian địa chỉ trong \nthế IPv4 một \n\ngia th sự thay đổi đó hơn \nhai th\nlin h\nIn n uật tận dụng không gian địa chỉ Ip hiệu \n\nuả \n\nó khả năng \nmở rộng. Để khắc phục những giới hạn này RIP phiên bản 2 đã được phát triển \n\nVới sụ phát triển phi thường củ\ntriển khai sơ đồ địa chỉ IP của mình. Rất nhiều tổ chức chọn\nthức được định tuyến duy nhất trong hệ thống mạng của mìn. Nh\nmay, TCP/IP đã không thể lường trước được rằng giao thức của họ được ứng dụng \ntrong mạng toàn cầu cho thông tin thương mại giải trí \n\nHai mươi năm trước đây,IP phiên bản 4 đưa ra một mô hình địa chỉ và cũng đáp \nứng đủ. Trong khi đó , IP phiên b\ngiới hạn thì được triển khai thử nghiệm chậm chạm và có thể sẽ thay \n\no ức thống trị Internet hiện nay. Trong thời gian chờ đợi \nập kỷ qua các kỹ sư mạng đã thành công trong việc vận dụng IPv4 một cách \n\nh oạt để hệ thống mạng của mình có thể tồn tại với sự phát triển rộng lớn của \nter et. VLSM là một trong những kỹ th\n\nq\n\nCùng với sự phát triển của hệ thống mạng để đáp ứng nhu cầu của người sử dụng \ngiao thức định tuyến cũng phải mở rộng theo. RIP vẫn được xem là một giao thức \nphù hợp cho hệ thống mạng nhỏ vì một số giới hạn khiến nó không c\n\nSauk hi hoàn tất chương này các bạn có thể thực hiện những việc sau: \n\n\u2022 Định nghĩa VLSM và mô tả khái quát các lý do để sử dụng nó \n\n\n\n 208\n\n\u2022 Chia một mạng lớn thành các mạng con có kích thước khác nhau bằng cách \nsử dụng VLSM \n\n\u2022 Cấu hình router sử dụng VLSM \n\n\u2022 Kiểm tra và xử lý sự cố hoạt động RIPv2 \n\u2022 Cấu hình đường mặc định bằng lệnh ip route và ip default- network \n\n1.1  VLSM \n1.1.1 VLSM là gì và tại sao phải sử dụng nó \nKhi mạng IP phát triển lớn hơn, người quản trị mạng phải có cách sử dụng không \ngian địa chỉ của mình một cách hiệu quả hơn. Một trong những kỹ thuật thường \nđược sử dụn là VLSM. Với VLSM người quản trị mạng có thể chia địa chỉ mạng \ncó subnet mask dài cho mạng có ít host và địa chỉ mạng có subnet mask ngắn cho \nmạng nhiều host \n\nKhi sử dụng VLSM thì hệ thống mạng phải chạy giao thức định tuyến có hỗ trợ \nVLSM như OSPF, Intergrated IS \u2013 IS, EIGRP, RIPv2 và định tuyến cố định \n\nVLSM cho phép một tổ chức sử dụng chiều dài subnet mask khác nhau trong một \nđịa chỉ mạng lớn. VLSM còn được gọi là chia subnet trong mộ subnet lớn hơn \ngiúp tận dụng tối đa không gian địa chỉ \n\nGiao thức định tuyến theo lớp địa c  hơn thành nhiều địa chỉ mạng con \nước khác nhau như địa chỉ mạng có 30 bit subnet mask , \n\n55.255.255.532 để dành cho các kết nối mạng địa chỉ mạng có 24 bit subnet \n\n\u2022 Xác định các đặc tính chủ yếu của RIPv1 hoặc RIPv2 \n\u2022 Xác địn những điểm khác nhau quan trọng giữa RIPv1 và RIPv2 \n\u2022 Cấu hình RIPv2 \n\nt \n\nhỉ mạng lớn\ncó kích th\n2\nmask, 255.255.255.0 để dành cho các mạng có dưới 254 user, các địa chỉ mạng có \n22 bit subnet mask, 255.255.22. để dành cho các mạng có tới 100 user. \n\n\n\n 209\n\n \n\nHình 1.1.1. Một ví dụ về địa chỉ IP theo VLSM \n\n1.1.2 \nTrước chia subnet cho địa chỉ mạng IP subnet đầu tiên và subnet cuối cùng \nược khuyến cáo là không sử dụng . Hiện nay với VLSM chúng ta có thể tận dụng \n\nSự phí phạm không gian địa chỉ \nđây khi \n\nđ\nsubnet đầu tiên và subnet cuối cùng \n\n \n\n\n\n 210\n\n \n\nHình 1.1.2 \n\nxét ví dụ như hình 1..1.2. người quản trị mạng quyết định mượn 3 bit để chia \nnet cho địa chỉ lớp C 192.168.\n\nTa \nsub 187.0. Nếu sử dụng luôn subnet đầu tiên bằng \ncác\n7 s\nbản\nđượ\nMe\nser\nrộn ểm - đến - \nđiể\nmỗ\ncác\nphạ\n\nCá\nđịa\n\n1.1\n\nThi\nphạ ần này sẽ trình bày cách sử \ndụng VLSM \n\nCù\nVL\nkhá\n\nh thêm lệnh no ip subnet \u2013 zezo vào cấu hình router người quản trị mạng sẽ có \nubnet sử dụng được mỗi subnet có 30 địa chỉ host Bắt đầu từ Cissco IOS phiên \n 12.0, Cissco router đã mặc định là sử dụng subnet zezo. Bây giờ mối subnet \nc phân phối  cho một mạng LAN trên routerSydney, Brisbane, Perth và \nlbourne như hình vẽ 1.1.2.3 subnet còn lại được phân phối cho 3 đường kết nối \nial giữa các router. Như vậy là không còn subnet nào để dự phòng cho sự mở \ng mạng về sau. Trong khi đó kết nối serial giữa 2 router là kết nối đi\nm nên chỉ có cần 2 địa chi host là đủ. Như vậy là phí mất 28 địa cỉ host trong \ni subnet được phân phối cho kết nối WAN của router. Với cách chia đều , tất cả \n subnet có chiều dài subnet bằng nhau như vạy 1/3 không gian địa chỉ đã bị phí \nm. \n\nch phân phối địa chỉ như trên chỉ phù hợp với mạng nhỏ. Nhưng dù sao thì sơ đồ \n chỉ này cũng thực sự phí phạm địa chỉ cho các kết nối điểm - đến - điểm \n\n.3 Khi nào sử dụng VLSM \n\nết kế sơ đồ địa chỉ IP sao cho đáp ứng được sự mở rộng sau này và không phí \nm địa chỉ là một việc hết sức quan trọng. Trong ph\n\nđể không láng phí địa chỉ trên các kết nối điểm - nối - điểm \n\nng với hệ thống mạng ví dụ ở phần trước. Lần này người quản trị mạng sử dụng \nSM để chia địa chỉ mạng lớp C 192.168.187.0 thành nhiều subnet có kích thước \nc nhau \n\n\n\n 211\n\n \n\n \n\nHình 1.1.3 \n\nTrước tiên ta xét mạng có nhiều user nhất trong hệ thống mạng. Mỗi mạng LAN ở \nSydney, Brisbane, Pert và Melbourpe có khoảng 30 host. Do đó để đáp ứng cho \ncác mạng LAN này người quản trị mạng mượn 3 bit để chia subnet cho địa chỉ \nmạng 192.168.187.0. Tương tự như ví dụ ở phần trước, người quản trị mạng có 7 \nsubnet /27 sử dụng được. Lấy 4 subnet đầu tiên/ 27 để phân phối cho các mạng \n\nAN trên router. Sau đó người quản trị mạng lấy subnet thứ 6 mượn tiếp 3 bit nữa L\n\n\n\n 212\n\nđể chia thành 8 subnet/30 mỗi subnet /30 này chỉ có 2 địa chỉ host. Lấy 3 subnet/30 \nối cho 3 kết nối serial giữa các router. Các subnet /27 và /30 còn lại được \n\nể dành sử dụng về sau \n\n.1.3 Tính toán chia subnet với VLSM \n\nphân ph\nđ\n\n1\n\n \n\n \n\nHình 1.1.4.a \n\nXét ví dụ như hình 1.1.4.a. Hai mạng LAN ở Kuala Lumpur và Bankok yêu cầu tối \nthiểu 250 host trong mỗi tháng. Nếu hai router này sử dụng các giao thức tuyến \ntheo lớp địa chỉ không hỗ trợ VLSM như RIPv1 IGRP và EGP thì phải chia subnet \nđều cho toàn bộ hệ thống mạng. Điều này có nghĩa là chúng ta mượn 8 bit để chia \nại chỉ lớp B 172.160.0 thành các subnet /24 rồi phân phối cho tất cả các mạng \n\nmạng trong hệ thống đều có địa chỉ mạng với 24 bit \nđ\ntrong hệ thống. Như vậy mỗi \n\n\n\n 213\n\nmask giống nhau. Mặc dù hai subnet 172.16.3.0/24 và 172.16.4.0/24 đáp ứng được \ncho 2 mạng LAN 250 host nhưng subnet 172.16.2.0/24 phân phối cho kết nối \nWAN giữa hai router là quá phí. Một kết nối WAN chỉ cần 2 địa chỉ host còn lại \n252 địa chỉ host bị bỏ phí. \n\n \n\nHình 1.1.4.b \n\nếu chúng ta sử dụng kỹ thuật VLSM chúng ta có thể lấy subnet 172.16.2.0/24\nthành các subnet/30. Sau đó lấy một subnet 172.16.2/20 để đặt cho\n\nN  \nchia tiếp  kết nối \n\nAN thì số lượng địa chỉ bị mất cho kết nối này giảm đi rất nhiều. W\n\n \n\nHình 1.1.4.c \n\nây giờ ta xét ví dụ như hình 1.1.4.c giả sử ta có địa chỉ mạng lớp C \n12.168.10.0/24 để phân phối cho hệ thống mạng này. \nB\n\n\n\n 214\n\nĐầu tiên chúng ta xét mạng LAN có nhiều user nhất trong hệ thống. Hệ thống trên \nhình 1.1.4.c có mạng LAN lớn nhất là 60 host. Nếu chúng ta chia subnet như cách \ncũ chúng tá se chỉ mượn được 2 bit để chia subnet còn lại 6 bit dành cho host mới \nđủ đáp ứng cho mạng LAN 60 host. Như g như vậy chúng ta chỉ toa được 22= 4 \nubnet, trong đó sử dụng được tối đa 3 subnet không đủ đáp ứng cho toàn bộ hệ \nống mạng. Rõ rang cách chia subnet đều không thể đáp ứng được \n\nC\n\n \nit \n\n \n\n \n\nn\ns\nth\n\nhúng ta phải sử dụng VLSM như sau: \n\n1. Bước đầu tiên chúng ta cũng xét mạng LAN lớn nhất trong hệ thống là mạng\nLAN 60 host ở Perth. Để đáp ứng cho mạng LAN này chúgn ta mượn 2 b\nđầu tiên đẻ chia subnet cho địa chỉ 192.168.10/24. Chúng ta sẽ được 4\nsubnet /26 như sau: \n\n# ID Dải địa chỉ host Địa chỉ quảng bá\n\n0 192.168.10.0 192.168.10.1 \u2013 192.168.10.62 192.168.10.63 \n\n1 192.168.10.64 192.168.10.65 \u2013 192.168.10.126 192.168.10.127 \n\n2 192.168.10.128 192.168.10.129 \u2013 192.168.10.190 192.168.10.191 \n\n3 192.168.10.192 192.168.10.193\u2013 192.168.10.254 192.168.10.255 \n\n \n\nChúng ta lấy subnet đầu tiên 192.168.10.0/26 phân phối cho mạng LAN 60 host ở \nPerth. \n\n2. Bước thứ 2 chúng ta xét tới mạng LAN lớn thứ 2 là mạng LAN 28 host ở \n\nsau: \n \n\nKL. Để đáp ứng co mạng LAN này chúng ta lấy subnet tiếp theo  là \n192.168.10.64/26 mượn tiếp 1 bit nữa để tách thành 2 subnet nhỏ hơn như \n\n\n\n 215\n\n \n\n# ID Dải địa chỉ host Địa chỉ quảng bá \n\n0 192.168.10 192.168.10.95 .64 192.168.10.65 \u2013 192.168.10.94 \n\n1 192.168.10.96 192.168.10.97 \u2013 192.168.10.126 192.168.10.127 \n\n \n\nMỗi subnet /27 có 5 bit dành cho phần host nên đáp ứng được tối đa 2+-2=30 host. \nDo đó ta lấy subnet 192.168.10.64/27 để phân phối cho mạng LAN 28 host ở \nKuala Lumpur. \n\n2 . Bước thứ 3 chúng ta xét tiếp đến các mạng LAN nhở hơn tiếp theo. Chúng ta \ncòn lại hai mạng LAN ở Sydney và Singapore, mỗi mạng 12 host. Để đáp ứng \ncho hai mạng LAN này chúng ta lấy subnet 12.168.10.96/27 ở trên mượn tiếp 1 \nbit nữa để tách thành 2 subnet/28 như sau: \n# ID Dải địa chỉ host Địa chỉ quảng bá \n\n0 192.168.10.0 192.168.10.1 \u2013 192.168.10.62 192.168.10.63 \n\n1 192.168.10.64 192.168.10.65 \u2013 192.168.10.126 192.168.10.127 \n\n \n\nMỗi subnet /28 còn 4 bit dành cho host nên đáp ứng được tối đa 24+ - 2 =14 host. \nChúng ta lấy hai subnet /28 trong bảng trên phân phối cho hai mạng LAN ở \nSydney và Singapore \n\n3. Bước cuối cùng bây giờ chúng ta chỉ còn lại ba đường liên kết WAN giữa \n\nđã sử  chúng ta \nlấy tiếp subnet 192.168.10.128/26 đã tạo ra ở bước 1, mượn tiếp 4 bit để tạo \nthành 16 subnet/30 như sau: \n\ncác router, mỗi đường liên kết cần 2 địa chỉ host. Từ đầu đến giờ, chúng ta \n dụng hết dải địa chỉ từ 192.168.10.0 192.168.10.27. Bây giờ\n\n \n\n\n\n 216\n\n \n\n \n\n# ID Dải địa chỉ host Địa chỉ quảng bá \n\n0 192.168.10.28 192.168.10.129 \u2013 192.168.10.130 192.168.10.131 \n\n1 192.168.10.132 192.168.10.133 \u2013 192.168.10.134 192.168.10.135 \n\n2 192.168.10.136 192.168.10.137\u2013 192.168.10.138 192.168.10.139 \n\n3 192.168.10.14 2.168.10.143 0 192.168.10.141 \u2013 192.168.10.142 19\n\n4 192.168.10.144 192.168.10.145 \u2013 192.168.10.146 192.168.10.147 \n\n5 192.168.10.148 192.168.10.149 \u2013 192.168.10.150 192.168.10.151 \n\n6 192.168.10.152 192.168.10.153\u2013 192.168.10.154 192.168.10.155 \n\n7 192.168.10.156 192.168.10.157\u2013 192.168.10.158 192.168.10.159 \n\n8 192.168.10.160 192.168.10.161 \u2013 192.168.10.162 192.168.10.163 \n\n9 192.168.10.164 192.168.10.165 \u2013 192.168.10.166 192.168.10.167 \n\n10 192.168.10.168 192.168.10.169 \u2013 192.168.10.170 192.168.10.171 \n\n11 192.168.10.172 192.168.10.173 \u2013 192.168.10.174 192.168.10.175 \n\n12 192.168.10.176 192.168.10.177\u2013 192.168.10.178 192.168.10.179 \n\n13 192.168.10.180 192.168.10.181\u2013 192.168.10.182 192.168.10.183 \n\n14 192.168.10.184 192.168.10.185\u2013 192.168.10.186 192.168.10.187 \n\n15 192.168.10.188 192.168.10.189\u2013 192.168.10.190 192.168.10.191 \n\nChúng ta lấy 3 subnet /30 đầu tiên trong bảng trên để phân phối cho các đường \nWAN giữa các router: \n\nKết quả sơ đồ phân phối địa chỉ theo VLSM được thể hiện ở hình 1.1.4.d \n\n\n\n 217\n\n \n\nHình 1.1.4.d \n\nQuá trình địa chỉ IP theo VLSM ở trên được tóm tắt lại theo sơ đồ sau: \n1.1.5 Tổng hợp địa chỉ với VLSM. \n\nKhi sử dụng VLSM các bạn nên cố gắng phân bố các subnet liền nhau ở gần nhau \nể có thể tổng hợp địa chỉ. Trước 1997 không có tổng hợp địa chỉ hệ thống định \n\ntuy  ần như bị sụp đổ mấy lần. \nđ\n\nến xương sống của Internet g\n\n \n\nHình 1.1.5 \n\n\n\n 218\n\nHình 1.1.5 là một ví dụ cho thấy sự tổng hợp địa chỉ lên các router tầng trên. Thực \nchất tổng hợp địa chỉ là bài toán đi ngược lại bài toán chia địa chỉ theo VLSM. Nếu \nnhư ví dụ ở phần 1.1.4 là một bài toán đi từ một địa chỉ mạng lớn 192.168.1.0/24 \nchi thành nhiều tầng subnet nhỏ hơn thì bây giờ bài toán ở hình 1.1.5 đi ngược lại, \ntừ các subnet con tổng hợp lại  thành subnet lớn hơn. Tổng hợp dẫn cho đến khi \nthành một địa chỉ mạng lớn 200.199.48.0/22 đại diện chung cho toàn bộ các subnet \nbên trong hệ thống. \n\nTương tự như VLSM các bạn muốn thực hiện được tổng hợp địa chỉ thì phải chạy \ngiao thức định tuyến không theo lớp địa chỉ như OSPF EIGRP vì các giao thức này \ncó truyền thông t in về subnet mask đi kèm với địa chỉ IP subnet trong các thông \ntin định tuyến. Mặt khác bạn muốn tổng hợp địa chỉ đúng thì khi chia địa chỉ  theo \nVLSM để phân phối  cho hệ thống mạng bạn phải chi a theo cấu trúc phân cấp như \n\ní dụ ở phần 1.1.4 và phân phối các subnet liền nhau ở cạnh tranh nhau trong cấu \ntrúc mạng. \n\nSau đây là một số nguyên tắc bạn\n\n1. Mỗi router phải biết địa chỉ subnet cụ thể của tất cả các mạng kết nối trực \ntiếp vào nó \n\ngiao \ntiếp của router vẫn như vậy. không có gì đặc biệt. \n\nv\n\n cần nhớ: \n\n2. Mỗi router không cần phải gửi thông tin chi tiết về mỗi subne t của nó  cho \ncác router khác nếu như nó có thể tổng hợp các subnet thành một địa chỉ đại \ndiện được \n\n3. Khi tổng hợp địa chỉ như vậy bảng định tuyến của các router tầng trên sẽ \nđược rút gọn lại \n\n3.1.6 Cấu hình VLSM \nSauk hi chia địa chỉ IP theo VLSM xong thì bước tiếp theo là bạn cung cấp địa chỉ \nIP cho từng thiết bị trong hệ thống. Việc cấu hình địa chỉ IP choa các cổng \n\nVí dụ như hình 1.1.6 sau khi đã phân phối địa chỉ theo VLSM xong bạn cấu hình \nđịa chỉ IP cho các cổng giao tiếp của router như sau: \n\n\n\n 219\n\n \n\nHình 1.1.6 \n\n3.2  Rip phiên bản 2 \n1.2.1 Lịch sử của RIP \n\nInternet là một tập hợp các hệ tự quản. Mỗi Á có một cơ chế quản trị, một công \nnghệ định tuyến riêng, khác với các AS khác. Các giao théc định tuyến được sử \n\nhận được. \n\ndụng bên trong một AS được gọi là giao thức định tuyến nội vi IGP. Để thực hiện \nđịnh tuyến  giữa các AS với nhau chúng ta phải sử dụng mọt giao thức riêng gọi la \ngiao thức định tuyến ngoại vi EGP. RIP được thiết kế như là một giao thức IGP \ndùng cho các AS có kích thước nhỏ không sử dụng cho các hệ thống mạng lớn và \nphức tạp. \n\nRIPv1 là một giao thức định tuyến theo vectơ khoảng cách nên quảng bá toàn bộ \nbảng định tuyến của nó cho các router láng giềng theo định kỳ. Chu kỳ cập nhật \ncủa RIP là 30 giây. Thông số định tuyến của RIP là số lượng hop, giá trị tối đa là \n15 hop. \n\nRIPv1 là giao thức định tuyến theo lớp địa chỉ, Khi RIP router nhận thông tin về \nmột mạng nào đó từ một cổng, trong thông tin định tuyến này không có thông tin \nvề subnet mask đi kèm. Do đó router sẽ lấy subnet mask của cổng để áp dụng cho \nđịa chỉ mạng mà nó nhận được từ cổng này. Nếu subnet mask này không phù hợp \nthì nó sẽ lấy subnet mask mặc định theo lớp địa chỉ để áp dụng cho địa chỉ mạng \nmà nó n\n\n\n\n 220\n\nĐịa chỉ lớp A có subnetmask mặc định là 255.0.0 \n\nRIPv1 l à giao th ức đ ịnh tuyến được sử d ng phổ biến vì mọi router IP đều có hỗ \ntrợ giao thức này. RIPv1 được phổ đơn giản và tính tương thích toàn \ncầu của nó. RIPv1 có thể chia tải ra tối đa là 6 đường có chi phí bằng nhau. \n\nSau đây là những điểm giới hạn của RIPv1: \n\n\u2022 Không gửi thông tin subnet mask trong thông tin định tuyến \n\u2022 Gửi quảng bá thông tin định tuyến theo địa chỉ 255.255.255.255 \n\u2022 Không hỗ trợ xác minh thông tin định tuyến \n\u2022 Không hỗ trợ VLSM và CIDR \n\nRIPv1 được cấu hình đơn giản như trong hình 1.2.1 \n\nĐịa chỉ lớp B có subnet mask mặc định là 255.255.0.0 \n\nĐịa chỉ lớp c có subnet mask mặc định là 255.255.255.0 \n\nụ\n biến vì tính \n\n \n\nHình 1.2.1 \n\n1.2.2 Đặc điểm của RIP phiên bản 2 \n\n1 nên nó vẫn có các đặc điểm như RIPv1 RIPv2 được phát triển từ RIPv\n\n\u2022 Là một giao thức định tuyến theo vectơ khoảng cách sử dụng số lượng hop \nlàm thông số định tuyến \n\n\u2022 Sử dụng thời gian holddown để chống lặp vòng, thời gian này mặc định là \n180 giây \n\n\u2022 Sử dụng cơ cế split horizon để chống lặp vòng \n\u2022 Giá trị hop tối đa là 15 \n\nRIPv2 có gửi subnet mask đi kèm với các địa chỉ mạng trong thông tin  định tuyến. \nNhờ đó RIPv2 có thể hỗ trợ VLSM và CIDR \n\n\n\n 221\n\nRIPv2 có hỗ trợ việc xác minh thông tin định tuyến. Bạn có thể cấu hình cho RIP \ngử ằng mã hoá MD hay \nkh g\n\nRI 2\n\nyến theo vectơ khoảng cách. Nếu có nhiều đường \nđến cùng một đích thì RIP sẽ chọn đường có số hop ít nhất. Chính vì dựa vào số \nlượng hop để chọn đườ ọn không phải là \nđường nhanh nhất đến\n\nIPv1 cho phép các router cập nhật bảng định tuyến của chúng  theo chu kỳ mặc \n\nđa để chuyển gói là 15hop . Nếu tới được và gói dữ liệu đến đó sẽ bị huỷ \nbỏ. Điều này làm giới hạn khả năng mở rộng của RIP. RIPv1 sử dụng cơ chế split \n\nời gian holddown router sẽ không \n\n tuyến  \n\ni và nhận thông tin xác minh trên cổng giao tiếp của router b\nôn  mã hoá \n\nPv  gửi thông tin định tuyến theo địa chỉ multicast 224.0.0.9 \n\n1.2.3 So sánh RIPv1 và RIPv2 \n\nRIP sử dụng thuật toán định tu\n\nng nên đôi khi con đường mà RIP ch\n đích \n\nR\nđịnh là 30 giây. Việc gửi thông tin định tuyến cập nhật liên tục như vậy giúp cho \ntopo mạng được xây dụng nhanh chóng. Để tránh bí lặp vòng vô tận. RIP giới hạn \nsố hop tối \n\nhorizon để chống lặp vòng. Với cơ chế này khi gửi thông tin định tuyến ra một \ncổng giao tiếp RIPv1 router không gửi ngược trở lại các thông tin định tuyến mà \nnó học được từ chính cổng đó. RIPv1 còn sử dụng thời gian holddown để chống \nlặp vòng. Khi nhận được một thông báo về một mạng đích bị sự cố router sẽ khởi \nđộng thời gian holddown . Trong suốt khoảng th\ncập nhật tất cả các thong tin có thông số định tuyến xấu hơn về mạng đích đó \n\nRIPv2 được phát triển từ RIPv1 nên nó cũng có các đặc tính như trên. RIPv2 cũng \nlà giao thức  \n\nLà một giao thức định tuyến theo vetơ khoảng cách sử dụng số lượng hop làm \nthông số định\n\nSử dụng thời gian holddown để chống lặp vòng thời gian này mặc định là 180 giây \n\nSử dụng cơ chế spit horizon để chống lặp vòng \n\nGiá trị hop tối đa \n\nRIPv2 có gửi subnet mask đi kèm với cácđịa chỉ mạng trong thông tin định tuyến. \nNhờ đó, RIPv2 có thể hỗ trợ VLSM và CIDR \n\n\n\n 222\n\nRipv2 có hỗ trợ việc xác minh thông tin định tuyến. Bạn có thể cấu hình cho RIP \ngửi và nhận thông tin xác minh trên cổng giao tiếp của router bằng mã hoá MD5 \nhay không mã hoá \n\nRIPv2 gửi thông tin định tuyến theo địa chỉ multicaskt 224.0.0.9 \n\n1.2.3 So sánh RIPv1 và RIPv2 \n\nRIP sử dụng thuật toán định tuyến theo vectơ khoảng cách. Nếu có nhiều đường \nđến cùng một đích thì RIP sẽ chọn đường có số hop ít nhất. Chình vì chỉ dựa vào \nsố lượng hop để chọn đường nên đôi khi con đường mà RIP chọn không phải là \nđường nhanh nhất đến đích \n\nRIPv1 cho phép c theo chu kỳ mặc \nđịnh là 30 giây. Việc gửi thông tin định tuyến cập nhật liên tục như vậy giúp cho \n\n \nxem như mạng đích đó không thể tới đượ  và gói dữ liệu. đó sẽ bị huỷ bỏ . Điều \nnày làm giới hạn khả năng mở rộng của RIP , RIPv1 sử dụng cơ chế split horizon \nđể chống lặp vòng. Với cơ chế này g tin định tuyến ra một cổng giao \n\nngược trở lại các thông tin định tuyến mà nó học \ncòn sử dụng thời gian holddown để chống lặp vòng. \n\nác router cập nhật bảng định tuyến của chúng \n\ntopo mạng được xây dựng nhanh chóng. Để tránh bị lăp vòng vô tận, RIP giới hạn \nsố hop tối đa để chuyển gói là 15 hop. Nếu một mạng đích xa hơn 15 router thì\n\nc\n\n khi gửi thôn\ntiếp , RIPv1 router khônggửi \nđước từ chính cổng dó, RIPv1 \nKhi nhận được một thông báo về một mạng đích bị sự cố, router sẽ khởi động thời \ngian holddown. Trong suốt khoảng thời gian holddown router sẽ không cập nhật tất \ncả  các thông tin có thông số định tuyến xấu hơn về mạng đích đó \n\nRIPv2 được phát triển từ RIPv1 nên nó cũng có các đặc tính như trên RIPv2 cũng \nlà giao thức định tuyến theo vectơ khoảng cách sử dụng số lượng hop làm thông số \nđịnh tuyến duy nhất . RIPv2 cũng sử dụng thời gian holddown và cơ chế split \nhorizon để tránh lặp vòng \n\nSau đây là các điểm khác nhau giữa RIPv1 và RIPv2 \n\n \n\n \n\n \n\n\n\n 223\n\nRIPv1 RIPv2 \n\nCấu hình đơn giản Cấu hình đơn giản \n\nĐịnh tuyến theo lớp địa chỉ Định tuyến không theo lớp địa chỉ \n\nKhông gửi thông tin về subnet mask \ntrong thông tin định tuyến. \n\nCó gửi thông tin về subnet mask trong \nthông tin định tuyến. \n\nKhông hỗ trợ VLSM. Do đó tất cả các \nmạng trong hệ thống RIPv1 phải có \nùng subnet mask. \n\nHỗ trợ VLSM. Các mạng trong hệ thống \nIPv2 có thể có chiều dài subnet mask \nkhác nhau. c\n\nKhông có cơ chế xác minh thông tin \nịnh tuyến. \n\nCó cơ chế xác minh thông tin định \ntuyến. đ\n\nGửi quảng bá\n255.255.255.255. \n\nỉ 224.0.0.9 nên \nhiệu quả hơn. \n\n theo địa chỉ Gửi multicast theo địa ch\n\n \n\n1.2.4. Cấu hình RIPv2 \n\nĐể cấu hình một giao thức định tuyến động, chúng ta đều thực hiện các bước sau \n\nChọn giao thức định tuyến, ví dụ như RIPv2  chẳng hạn \n\nK  \nsu\n\nhai báo địa chỉ IP và subnet mask cho các cổng router \n\nP tham gia và tiến trình định tuyến. Cổng \nrong địa chỉ mạng được khai báo ở lệnh \n\network thì cổng đó sẽ tham gia vào quá trình gửi và nhận thông tin định tuyến cập \n\nhai báo các địa chỉ mạng IP cho giao thức định tuyến không cần khai báo giá trị\nbnet mask \n\nK\n\nLệnh network khai báo địa chỉ mạng I\nnào của router có địa chỉ IP rơi vào t\nn\nnhật. Mặt khác lệnh network cũng khai báo những địa chỉ mạng mà router sẽ thực \nhiện quảng cáo về mạng đó \n\nLệnh router rip version 2 xác định RIPv2 được chọn làm giao thức định tuyến chạy \ntrên router \n\n\n\n 224\n\n \n\nHình 1.2.4.a \n\nTrong ví dụ ở hình 1.2.4.a router A được cấu hình như sau \nrouter rip - chọn rip làm giao thức định tuyến \n\nVersion 2 \u2013 Xác định ripv2 \n\nNetwork 172.16.0.0 \u2013 khai báo địa chỉ mạ g kết nối trực tiếp vào router A \n\nN\n\nKhi \nvà 10.0.0.0 sẽ gửi và nhận thông tin v2 \n\nn\n\network 10.0.0.0 \u2013 Khai báo địa chỉ mạng kết nối trực tiếp vào router A \n\nđó tất cả các cổng trên router A kết nối vào mạng hoặc subnet trong 172.16.0.0 \n cập nhật RIP\n\n \n\nHình 1.2.4.b \n\n1.2.5 Kiểm tra RIPv2 \n\n\n\n 225\n\nLênh show ip protocol sẽ hiển thị các giá trị của giao thức định tuyến và các thời \ngian hoạt động của giao thức đó. Trong ví dụ ở hình 1.2.5.a lệnh này cho thấy \nrouter được cấu hình với RIP không nhận được bất kỳ thông tincập nhật nào từ một \nrouter láng giềng trong 180 giây hoặc hơn thì những con đường học được từ router \n\nng giềng đó sẽ được xem là không còn giá trị. Nếu vẫn không nhận thông tin cập \nhật gì cả thì sau 240 giây, các con đường này sẽ bị xoá khỏi bảng định tuyến . \n\nlá\nn\nTrong hình router A nhận được cập nhật mới nhấttừ router B cách đây 12 giây. thời \ngian holddown 180 giây. Khi có một con đường được thông báo là đã b ị ngắt con \nđường đó sẽđược đặt vào trạng thái holddown trong 180 giây \n\n \n\nHình 1.2.5.a \n\nệnh show ip interface brief được sử dụng để tổng hợp thông tin trạng thái của các \ncổng trên router \n\nRouter sẽ gửi thông tin về các đường đi trong các mạng được liệt kê sau dòng \nrouting for networks. Router nhận được các thông tin cập nhật từ các router láng \ngiềng được liệt kê sau dòng routing information sources chỉ số độ tin cậy mặc định \ncủa rip là 120 \n\nL\n\n\n\n 226\n\n \n\nHình 1.2..5.b \n\n mà router học được đồng thời cho \nbiết các thông tin này được học như thế nào \n\nNếu thông tin trong bảng định tuyến bị thiếu một đường đi nào thì bạn nên dùng \nlệnh show running \u2013 config hoặc show ip protocols để kiểm tra lại cấu hình định \n\nyến \n\n1.2.6 Xử lý sự cố RIPv2 \n\nSử dụng lện debug ip rip để hiển thị các thông tin định tuyến RIP khi chúng được \ngửi đi và nhận vào. Bạn dùng lệnh no debug all hoặc undebug all để tắt mọi debug \nđang bật \n\nTa xét ví dụ như hnhf 1.2..6 router A nhận được thông tin về hai mạng đích trên \ncổng serial 2 từ router láng giềng có địa chỉ IP là 10.11.2 . Router A cũng gửi \nthông tin cập nhật của nó ra hai cổng ethernel và serial 2 với địa chỉ là địa chỉ \nquảng bá còng địa chỉ ngoặc là địa chỉ IP nguồn \n\nĐôi khi bạn còn gặp một số câu thông báo trong lệnh debug ip rip như sau \n\nLệnh show ip route sẽ hiển thị nội dụng bảng định tuyến Ip . Trong bảng định \ntuyến cho biết về đường đi đến các mạng đích\n\ntu\n\n\n\n 227\n\nNhững câu này xuất hiện khi router mới khởi động lên hoặc khi có một sự cố mới \nảy ra như một cổng bị thay đổi trạng thái hay router bị xoá mất bảng định tuyến \n\nM\n\nĐường cố định \u2013 là đườ ằng tay cho router \nong đó chỉ định rõ router kế tiếp để tới mạng đích. Đường cố định có khả năng \n\nbảo mật cao vì khong có hoạt động gửi thông tin cập nhật như đường định tuyến \nđộng. Đường cố định rất hữu dụng khi chỉ có một đường duy nhất đến đích không \ncòn đường nào khác phải chọn lựa  \n\nĐường mặc định cũng do người quản trị mạng cấu hình bằng tay cho router. Trong \nđó khai báo đường mặc định để sử dụng khi router không biết đường đến đích. Với \nđường mặc định định tuyến router sẽ dược ngắn gọn hơn. Khi gói dữ liệu có địa chỉ \nmạng đích mà router sẽ gửi nó ra đường mặc định \n\nĐường định tuyến động là những đường do router học được từ các router khác nhờ \ngiao thức định tuyến động \n\nx\n\n1.2.7 Đường mặc định \n\nặc định router học thông tin về đường đến mạng đích bằng 3 cách sau\u2019 \n\nng do người quản trị mạng cấu hình b\ntr\n\n \n\nHình 1.2.7 \n\ng\nnối ra internet,kết nối n bộ hệ thống mạng bên \n\niả sử hệ thống mạng này sử dụng giao thức định tuyến động .Router HK1 có kết \này là đuờng mặc định của toàn \n\n\n\n 228\n\ntrong.Những gói nào khôn gửi đến các mạng bên trong nội bộ mà gửi ra ngoài thì \nng mặc định ra internet. Để khai báo đường mặc \ng lện sau :I b \n\n2.168.20.2 \n\nệnh trên là lệnh cấu hình đường cố định đặc biệt đại diện cho bất kì mạng đích \n\nter: \n\nouter(config)#ip default-network 192.168.20.0 \n\nuter HK1 , với khai \náo mặc định la iproute 0.0.0.0 0.0.0.0 192.168.20.2, các gói dữ liệu sẽ được \n\nTỔNG KẾT \n\nhia địa chỉ mạng IP thành các subnet có kích thước khác nhau bằng VLSM  \n\nCấu hình đường mặc định bằng lệnh ip route và ip default-network . \n\nmặc nhiên sẽ được gửi lên đườ\nđịnh cho router HK1chúng ta dùn\n\nHongKong1(config)#ip route 0.0.0.0 0.0.0.0 19\n\nL\nnào với bất kì subnetmask nào .Xin nhấn mạnh một lần nữa , lệnh trên được sử \ndụng để khai báo đường măc định cho router nào có kết nối đường mặc định vào \nnó  \n\nCác router còn lại trong hệ thống, ta dùng lệnh ip default-network để khai báo \nmạng mặc định này cho các rou\n\nR\n\nCác router HK2,HK3,HK4 sẽ sử dụng mang 192.168.20.0 làm mạng đích mặc  \nđịnh .Những gói dữ liệu nào có địa chỉ đích mà  các router nào không tìm thấy trên \nbảng   định tuyến của chúng thì chúng sẽ gửi về mạng mặc định  192.168.20.0.Kết \nquả là các gói dữ lieu này được chuyển tớ i router HK1. Trên ro\nb\ntruyền ra đường kết nối với Internet \n\nSau đây là các điểm quan trọng trong chương này  \nVLSM và lí do sử dụng nó  \nC\ncấu hình router sử dụng VLSM \nDặc điểm chính của RIPv1 và RIPv2 \nĐiểm khác nhau quan trọng giữa RIP1và RIPv2 \nCấu hình RTPv2 \nKiểm tra và xử lí sự cố hoạt động RTPv2 \n\n\n\n 229\n\nChương 2: OSPF ĐƠN VÙNG \n\n thức định tuyến \nnày đều thực hiện định tuyến trong phạm vi một hệ tự quản. Chúng sử dụng 2 \nphương pháp khác nhau để thực hiện cùng một nhiệm vụ. \n\nThuật toán định tuyến trạng thái theo đường liên kết, hay còn gọi là thuật toán chọn \nđường ngắn nhất (SPF \u2013 Shortest Path First), lưu giữ một cơ sở dữ liệu phức tạp \ncác thông tin về cấu trúc hệ thống mạng. Thuật toán này có đầy đủ thông tin về các \nrouter trên đường đi và cấu trúc kết nối của chúng. Ngược lại, thuật toán định \ntuyến theo vectơ khoảng các không cung cấp thông tin cụ thể về cấu trúc đường đi \ntrong mạng và hoàn toàn không có nhận biết về các router trên đường đi. \n\nĐể có thể cấu hình, kiểm tra và xử lý sự cố của các giao thức định tuyến theo trạng \nthái đường liên kết thì việc hiểu các hoạt động của chúng là điều rất quan trọng. \nChương này sẽ giải thích cách làm việc của giao thức định tuyến theo trạng thái \nđường liên kết, liệt kê các đặc điểm của chúng, mô tả thuật toán mà chúng sử dụng \nvà đồng thời chỉ ra các  \n\nan đầu, các giao thức định tuyến như RIPv1 đều là các giao thức định tuyến theo \nhoảng \n\ncách đang được sử dụng như RIPv2. IRGP và giao thức định tuyến lai EIGRP. Khi \nệ thống mạng ngày càng phát triển lớn hơn và phức tạp hơn thì những điểm yếu \n\n thức định tuyến theo trạng thái đường liên kết thì khác với giao thức định \nyến theo vectơ khoảng cách. Giao thức này phát các thông tin về đường đi cho \nọi router để các router trong mạng đều có cái nhìn đầy đủ về cấu trúc hệ thống \n\nGIỚI THIỆU \n\nGiao thức định tuyến nội vi (IGP) có 2 loại chính là định tuyến theo vector khoảng \ncách và định tuyến theo trạng thái đường liên kết. Cả 2 loại giao\n\nưu nhược điểm của loại giao thức này.\n\nB\nvectơ khoảng cách. Ngày nay, có rất nhiều giao thức định tuyến theo vectơ k\n\nh\ncủa giao thức định tuyến theo vectơ khoảng cách lại càng bộc lộ rõ hơn. Router sử \ndụng giao thức định tuyến theo vectơ khoảng cách học thông tin định tuyến bằng \ncách cập nhật bảng định tuyến từ các router láng giềng kết nối trực tiếp. Hoạt động \ncập nhật theo định kỳ này chiếm băng thông cao và cách học thông tin định tuyến \nnhư vậy làm cho mạng hội tụ chậm. \n\nGiao\ntu\nm\nmạng. Hoạt động cập nhật chỉ được thực hiện khi có sự kiện thay đổi, do đó băng \nthông được sử dụng hiệu quả hơn và mạng hội tụ nhanh hơn. Ngay khi có sự thay \n\n\n\n 230\n\nđổi trạng thái của một đường liên kết, thông tin được phát ra cho tất cả các router \ntrong mạng. \n\nOSPF là một trong những giao thức quan trọng nhất của loại giao thức định tuyến \neo trạng thái đường liên kết. OSPF dựa trên một chuẩn mở nên nó có thể được sử \n\nấu hình Cisco router cũng tương tự như cấu hình các giao thức định tuyến khác. \ncác mạng \n\nđược phép hoạt động trên đó. Ngoài ra, OSPF cũng có một số đặc tính \nêng và cấu hình riêng. Các đặc tính riêng này đã làm cho OSPF trở thành một \n\no nên những thách thức khi cấu hình \nOSPF. \n\nTrong hệ thống mạng lớn, OSPF có thể được cấu hình mở rộng trên nhiều vùng \nng OSPF lớn thì bạn \n\nhải nắm được cấu hình OSPF trên một vùng. Do đó chương này sẽ mô tả cấu hình \nOSPF đơn vùng. \n\nhái đường liên kết xây \ndựng và duy trì thông tin định tuyến như thế nào. \n\n\u2022 Phân tich về thuật toán định tuyến theo trạng thái theo trạng thái đường liên \nkết. \n\n\u2022 Xác định ưu và nhược điểm cua loại giao thức định tuyến theo trạng thái \nđường liên kết. \n\n\u2022 Khởi động O\n\u2022 Cấu hình địa chỉ loopback để định quyền ưu tiên cho router. \n\u2022 Thay đổi thông số chi phí để thay đổi quyết định chọn đường của OSPF. \n\nth\ndụng và phát triển bởi các nhà sản xuất khác nhau. Đây là một giao thức phức tạp \nđược triển khai cho các mạng lớn. Các vấn đề cơ bản về OSPF sẽ được đề cập đến \ntrong chương này. \n\nC\nĐầu tiên OSPF cũng phải được khởi động trên router, sau đó khai báo \nmà OSPF \nri\ngiao thức định tuyến mạnh nhưng đồng thời tạ\n\nkhác nhau. Nhưng trước khi có thể thiết kế và triển khai mạ\np\n\nSau khi hoàn tất chương này, các bạn có thể thực hiện các nhiệm vụ sau: \n\n\u2022 Xác định các đặc tính quan trọng của giao thức định tuyến theo trạng thái \nđường liên kết. \n\n\u2022 Giải thích được giao thức định tuyến theo trạng t\n\n\u2022 So sánh và phân biệt giao thức định tuyến theo trạng thái đường liên kết với \ngiao thức định tuyến theo vectơ khoảng cách. \n\nSPF trên router. \n\n\u2022 Cấu hình cho OSPF thực hiện quá trình xác minh. \n\u2022 Thay đổi các thông số thời gian của OSPF. \n\n\n\n 231\n\n\u2022 Mô tả các bước tạo và quảng bá đường mặc định vào OSPF. \n\u2022 Sử dụng các lệnh show để kiểm tra hoạt động của OSPF. \n\u2022 Cấu hình tiến trình định tuyến OSPF. \n\u2022 Định nghĩa các thuật ngữ quan trọng của OSPF. \n\u2022 Mô tả các loại mạng OSPF. \n\nức định tuyến theo trạng thái đường liên kết \n\nần này sẽ giải thích những điểm khác \nĐây là những kiến thức cực kỳ quan trọng đối với 1 nhà quản trị mạng. \n\nột điểm khác nhau quan trọng mà bạn cần nhớ là giao thức định tuyến theo vectơ \n\nhì thuật toán định \nyến theo trạng thái đường liên kết có đầy đủ thông tin về các router trên đường đi \n\nvà cấu trúc kết nối của chúng. \n\n\u2022 Mô tả giao thức OSPF Hello. \n\u2022 Xác định các bước cơ bản trong hoạt động của OSPF. \n\n \n\n2.1. Giao th\n\n2.1.1. Tổng quan về giao thức định tuyến theo trạng thái đường liên kết \n\nGiao thức định tuyến theo trạng thái đường liên kết hoạt động khác với giao thức \nđịnh tuyến theo vectơ khoảng cách. Trong ph\nnhau này. \nM\nkhoảng cách sử dụng phương pháp trao đổi thông tin định tuyến đơn giản hơn. \n\nThuật toán định tuyến theo trạng thai đường liên kết xây dựng và duy trì một cơ sở \ndữ liệu phức tạp của thông tin về cấu trúc mạng. Trong khi thuật toán định tuyến \ntheo vectơ khoảng cách không cung cấp thông tin cụ thể về đường đi trong mạng \nvà cũng không có nhận biết về các router khác trên đường đi, t\ntu\n\nLoại giao \nthức \n\nVí dụ Đặc điểm \n\nĐịnh tuyến RIPv1 và RIPv2 \no Gateway\n\n(IGRP). \n\n\u2022 1.Copy bảng định tuyến cho \nrouter láng giềng. \n\nập nhật định kì. \n\u2022 3.RIPv1 và RIPv2 sử dụng số \n\nlượng hop làm thông số định \nyến. \n\n\u2022 4.Mỗi router nhìn hệ thống \nmạng theo sự chi phối của các \nrouter láng giềng. \n\n\u2022 5.Hội tụ chậm. \n\ntheo vectơ \nkhoảng cách \n\nIntẻỉ  \nRouting Protocol \u2022 2.C\n\ntu\n\n\n\n 232\n\n\u2022 6.Dễ bị lặp vòng. \n\u2022 7.Dễ cấu hình và dễ quản trị. \n\u2022 8.Tốn nhiều băng thông. \n\n \n\n \n\nĐịnh tuyến \ntheo trạng \nthai đương \nliên kết \n\nOpen Shortest Path \nFirst (OSPF) \nIntermediate \u2013 \nSystem to Intermedia \n\u2013 Sýtem (IS-IS) \n\n\u2022 Sử dụng đường ngắn nhất. \n\u2022 Chỉ cập nhật khi có sự kiện \n\nxảy ra. \n\u2022 Gửi gói thông tin về trạng thái \n\ncác đường liên kết cho tất cả \ncác router trong mạng. \n\n hệ thống mạng. \n\u2022 Hội tụ nhanh. \n Không bị lặp vòng. \n\u2022 Cấu hình phức tạp hơn. \n\u2022 Đòi hỏi nhiều bộ nhớ và năng \n\nlượng xử lý hơn so với định \ntuyến theo vectơ khoảng cách. \nTốn ít băng thông hơn so với \n\nơ khoảng \n\n\u2022 Mỗi router có cái nhìn đầy đủ \nvề cấu trúc\n\n\u2022\n\n\u2022 \nđịnh tuyến theo vect\ncách. \n\n \n\n \n\n2.1.2. Đặc điểm của giao thức định tuyến theo trạng thái đường liên kết . \n\nGiao thức định tuyến theo trạng thái đường liên kết thu thập thông tin về đường đi \ntừ tất cả các router khác trong cùng hệ thống mạng hay trong cùng một vùng đã \nđược xác định. Khi tất cả các thông tin đã được thu thập đầy đủ thì sau đó mỗi \nrouter sẽ tự tính toán để chọn ra đường đi tốt nhất cho nó đến các mạng đích trong \nhệ thống. Như vậy mỗi router có một cái nhìn riêng và đầy đủ về hệ thông \nmạng,khi đó chúng sẽ không còn truyền đi các thông tin sai lệch mà chúng nhận \nđược từ các router láng giềng. \n\n\n\n 233\n\nSau đây là một số hoạt động của giao thức định tuyến theo trạng thái đường liên \nkết: \n\n\u2022 Đáp ứng nhanh theo sự thay đổi của hệ thống mạng. \n\u2022 Gửi cập nhật khi hệ thống mạng có sự thay đổi. \n\u2022 Gửi cập nhật định kỳ để kiểm tra trạng thái đường liên kết. \n\u2022 Sử dụng cơ chế hello để xác định router láng giềng có còn kết nối được hay \n\nkhông. \nMỗi router gửi multicast gói hello để giữ liên lạc với các router láng giềng.Gói \nhello mang thông tin về các mạng kkết nối trực tiếp vào router.Ví dụ như hình \n2.1.2, P4 nhận biết các láng giềng của nó trong mạng Perth3 là P1và P3. LSAs \ncung cấp thông tin cập nhật về trạng thái đường liên kết của các router trong \nmạng. \n\n \n\n \n\n \n\n \n\n \n\nHình 2.1.2. Sử dụng hello để xác định router láng giềng \n\ntrên từng mạng. \n\n\n\n 234\n\nSau đây là các đặc điểm hoạt đông của router sử dụng giao thức định tuyến theo \ntrạng thái đường liên kết: \n\n1. Sử dụng thông tin từ gói hello và LSAs nhận được từ các router láng giềng \nđể xây dựng cơ sở dữ liệu về cấu trúc hệ thống mạng. \n\n2. Sử dụng thuật toán SPF để xác tính toán ra đường ngắn nhất đến từng mạng. \n3. Lưu kết quả chon đường trong bảng định tuyến. \n\n \n\n2.1.3. Thông tin định tuyến được duy trì như thế nào \n\nhần này sẽ giải thích giao thức định tuyến theo trạng thái đường liên kết sử dụng \ncác thành phần sau đây như thế nào\n\n\u2022 LSAs. \n\u2022 Cơ sở dữ liệu về cấu trúc hệ thống mạng. \n\nhi có một sự cố xảy ra trong mạng, ví dụ như có một router láng giềng bị mất kết \n liên kết lập tức phát các gói LSAs ra \n\nằng 1 địa chỉ multicast đặc biệt. Tiến trình này thực hiện gửi thông \nn ra tất cả các cổng, trừ cổng nhận được thông tin. Mỗi router nhận được một \n\nP\n: \n\n\u2022 Thuật toán SPF \n\u2022 Cây SPF \n\u2022 Bảng định tuyến với đường đi và cổng ra tương ứng để định tuyến cho gói \n\ndữ liệu. \n       Giao thức định tuyến theo trạng thái đường liên kết được thiết kế để khắc phục \ncác nhược điểm của giao thức định tuyến theovectơ khoảng cách. Ví dụ như:giao \nthức định  tuyến theo vectơ khoảng cách chỉ trao đổi thông tin định tuyến với các \nrouter kết nối trực tiếp với mình mà thôi, trong khi đó giao thức định tuyến theo \ntrạng thái đường liên kết thực hiện trao đổi thông tin định tuyến trên một vùng \nrộng lớn. \n\nK\nnối , giao thức định tuyến theo trạng đường\ntrên toàn vùng b\nti\nLSA, cập nhật thông tin mới này vào cơ sở dữ liệu về cấu trúc hệ thống mạng. Sau \nđó router chuyển tiếp gói LSA này cho tất cả các thiết bị làng giềng khác. LSAs \nlàm cho mọi router trong vùng thực hiện tính toán lại đường đi. Chính vì vậy số \nlượng router trong một vùng nên có giới hạn. \n\n \n\n\n\n 235\n\nMột kết nối tương ứng với một cổng trên router. Thông tin về trạng thái của một \nliên kết bao gồm thông tin về một cổng của router và mối quan hệ với các router \n\nng giềng trên cổng đó. Ví dụ như: thông tin về một cổng trên router bao gồm địa \nhỉ IP, subnet mask, loại mạng kết nối vào cổng đó\u2026Tập hợp tất cả các thông tin \n\nệu về trạng thái các đường liên kết, hay còn \nọi là cơ sở dữ liệu về cấu trúc hệ thống mạng. Cơ sở dữ liệu này được sử dụng để \nnh toán chọn đường tốt nhất. Router áp dụng thuật toán chọn đường ngắn nhất \n\ntrúc mạng, từ đó xây dựng nên cây SPF với bản \nthân router là gốc. Từ cây SPF này, router sẽ chọn ra đường ngắn nhất đến từng \nạng đích. Kết quả chọn đường được đặt trên bảng định tuyến của router. \n\nlá\nc\ntrên được lưu lại thành một cơ sở dữ li\ng\ntí\nDijkstra vào cơ sở dữ liệu về cấu \n\nm\n\n \n\n   Hình 2.1.3 \n\núng được xem như là một tập hợp các giao thức SPF. \n\n2.1.4 Thuật toán định tuyến theo trạng thái đường liên kết \n\n    Thuật toán định tuyến theo trạng thái đường liên kết xây dựng và duy trì một cơ \nsở dữ liệu phức tạp về cấu trúc hệ thống mạng bằng cách trao đổi các gói quảng \ncáo trạng thái đường liên kết LSAs(Link \u2013 State Advertisements) với tất cả các \nrouter khác trong mạng. \n\nThuật toán định tuyến theo trạng thái đường liên kết có đặc điểm sau: \n\n\u2022 Ch\n\n\n\n 236\n\n\u2022 Chúng xây dựng và duy trì một cơ sở dữ liệu phức tạp về cấu trúc hệ thống \n\niao thức định tuyến theo trạng thái đường liên kết phát triển và duy trì đầy đủ các \ntrúc kết nối của chúng. Điều này được \n\nạng. \n\nMỗi router xây dựng cơ sở dữ liệu về cấu trúc hệ thống mạng của mình nhờ các \nthông tin n SP để \n\nnh toán chọn đường ngắn nhất đến từng mạng đích. Kết quả chọn đường được \na lên bảng định tuyến của router. Trong suốt tiến trình hoạt động, mọi sự thay \n\nh phần mạng bị đứt hay mạng phát \n\nc thực hiện theo định kìy. Nhờ vậy tốc độ hội tụ nhanh hơn ví không cần chờ \nết thời gian định kỳ các router mới được hội tụ. \n\nmạng. \n\u2022 Chúng dựa trên thuật toán Dijkstra. \n\n \n\nG\nthông tin về mọi router trong mạng và cấu \nthực hiện nhờ quá trình trao đổi LSAs với các router khác trong m\n\n từ các LSA mà nó nhận được. Sau đó router sử dụng thuật toá\ntí\nđư\nđổi trong cấu trúc hệ thống mạng như một thàn\ntriển thêm thành phần mới đều được phat hiện và đáp ứng theo. \n\nViệc trao đổi LSA được thực hiện khi có một sự kiện xảy ra trong mạng chứ không \nđượ\nh\n\n \n\n\n\n 237\n\n \n\nHình 2.1.4 \n\n \n\nVí dụ hình 2.1.4: Tùy theo từng giao thức và thông số định tuyến tương ứng, giao \nthức định tuyến có thể phân biệt được hai đường đến cùng một đích và sử dụng \n\n tuyến ghi \nhận cả hai. Có một số giao thức định tuyến theo trạng thái đường liên kết  có cách \nđánh giá khả năng hoạt động của hai đường và chon đường tốt nhất. Ví dụ, nếu \n\nSau đây là các ưu điểm của giao thức định tuyến theo trạng thái đường liên kết: \n\n\u2022 Sử dụng chi phí làm thông số định tuyến để chọn đường đi trong mạng. \n\ni tụ nhanh hơn. \n\u2022 Mỗi router có một sơ đồ đầy đủ và đồng bộ về toàn bộ cấu trúc hệ thống \n\nmạng. Do đó chúng rất khó bị lặp vòng. \n\nđường tốt nhất. Trong hình 2.1.4, trên bảng định tuyến có hai đường đi từ Router A \nđến Router D. Hai đường này có chi phí bằng nhau nên giao thức định\nn\n\nđường đi qua Router C gặp trở ngại như bị nghẽn mạch hoặc bị hư hỏng thì giao \nthức định tuyến theo trạng thái đường liên kết có thể nhận biết được các thay đổi \nnày và chuyển gói di theo đường qua Router B. \n\n \n\n2.1.5 Ưu và nhược điểm của giao thức định tuyến theo trạng thái đường liên \nkết \n\nThông số chi phí này có thể phản ánh được dung lượng của đường truyền. \n\u2022 Thực hiện cập nhật khi có sự kiện xảy ra, phát LSAs ra cho mọi router trong \n\nhệ thống mạng. Điều này giúp cho thời gian hộ\n\n\n\n 238\n\n\u2022 Router sử dụng thông tin mới nhất để quyết định chọn đường đi. \n\u2022 Cần thiết kế hệ thống mạng một cách cẩn thận để cơ sở dữ liệu về trạng thái \n\ncác đường liên kết có thể được thu nhỏ lại. Nhờ đó chúng ta có thể tiết kiệm \nđược các tính toán Dijkstra và hội tụ nhanh hơn. \n\n\u2022 Mọi router sử dụng sơ đồ cấu trúc mạng của riêng nó để chọn đường. Đặc \n\nng liên kết: \n\n\u2022 Chúng đòi hỏi nhiều dung lượng b ớ và năng lực xử lý cao hơn so với \ngiao thức định tuyến theo vectơ kho ng cách. Do đó chúng khá mắc tiền đối \nvới cá\n\n\u2022 Chúng đòi hỏi hệ thống mạng phải được thiết kề theo mô hình phân cấp, hệ \nthống mạng được chia ra thành nhiều cùng nhỏ để làm giảm bớt độ lớn và độ \n\nuter gửi đi là những thông tin gì và gửi cho ai ? Các router định \ntuyến theo vectơ khoảng cách thực hiện gửi toàn bộ bảng định tuyến của mình \nvà chỉ gửi cho các router kết nối trực tiếp với mình. Như chúng ta đã biết ,thông \n\nương ứng với một mạng đích \nlà cổng nào của router , router kế tiếp có địa chỉ IP là gì, thông số định tuyến \ncủa con đường này là bao nhiêu. Do đó, các router định tuyến theo vectơ \n\nDo đó, khi \n\ntính này sẽ giúp chúng ta khi cần xử lý sự cố. \n\u2022 Giao thức định tuyến theo trạng thái đường liên kết có hỗ trợ CIDR và \n\nVLSM. \n \n\nSau đây là các nhược điểm của giao thức định tuyến theo trạng thái đườ\n\nộ nh\nả\n\nc tổ chức nhỏ, chi phi hạn hẹp và thiết bị cũ. \n\nphức tạp của cơ sở dữ liệu về cấu trúc hệ thống mạng. \n\u2022 Chúng đòi hỏi nhà quản trị mạng phải nắm vững giao thức. \n\u2022 Trong suốt quá trình khởi động, các router thu thập thông tin về cấu trúc hệ \n\nthống mạng để xây dựng cơ sở dữ liệu, chúng phát các gói LSA ra trên toàn \nbộ mạng. Do đó tiến trình này có thể làm giảm dung lượng đường truyền \ndành cho dữ liệu khác. \n\n \n\n1.1.4. So sánh và phân biệt giữa định tuyến theo vectơ khoảng cách và \nđịnh tuyến theo trạng thái đường liên kết \nTrước tiên ta xét giao thức định tuyến theo vectơ khoảng cách. Thông tin định \ntuyến mà các ro\n\ntin trên bảng định tuyến rất ngắn gọn,chỉ cho biết t\n\nkhoảng cách không biết được đường đi một cách cụ thể, không biết về các \nrouter trung gian trên đường đi và cấu trúc kết nối giữa chúng. Các bạn có thể \nxem nội dung bảng định tuyến trên router bằng lệnh show ip route. Hơn nữa, \nbảng định tuyến là kết quả chọn đường tốt nhất của mỗi router. \n\n\n\n 239\n\nchúng trao đổi bảng định tuyến với nhau, các router chọn đường dựa trên kết \n\nự thay đổi đầu tiên sẽ cập nhật bảng định tuyến \ncủa mình trước rồi chuyển bảng định tuyến bảng định tuyến cập nhật cho router \nláng giềng. Router láng giềng nhận được thông tin mới, cập nhật vào bảng định \n\nđi là gì và gửi cho ai? Khi bắt đầu hoạt động, \nmỗi router sẽ gửi thông tin cho biết nó có bao nhiếu kết nối và trạng thái của \n\n Kết quả là mỗi router sẽ có đầy đủ thông tin \nđể xây dựng một cơ sở dữ liệu về trạng thái các đường liên kết, hay còn gọi là \ncơ sở dữ liệu về cấu trúc mạng. Như vậy, mỗi router đều có một cái nhìn đầy đủ \n\nmỗi router tự tính toán để chọn \nđường đi tốt nhất đến từng mạng đích. \n\n liên kết đã hội tụ xong, không \nthực hiện cập nhật định kỳ. Chỉ khi nào có sự thay đổi thì thông tin về sự thay \nđổi đó được truyền đi cho tất cả các router trong mạng. Do đó thời gian hội tụ \nnhanh và ít tốn băng thông. \n\nTa thấy ưu điểm nổi trội của định tuyến theo trạng thái đường liên kết so với \nđịnh tuyến theo vectơ khoảng cách là thời gian hội tụ nhanh hơn và tiết kiệm \nbăng thông đường truyền hơn. Giao thức định tuyến theo trạng thái đường liên \nkết có hỗ trợ CIDR và VLSM. Do đó, chúng là một lựa chọn tốt cho mạng lớn \nvà phức tạp. Thực chất giao thức định tuyến theo trạng thái đường liên kết thực \nhiện định tuyến tốt hơn so với giao thức định tuyến theo vectơ khoảng cách ở \nmọi kích cỡ mạng. Tuy nhiên, giao thức định tuyến theo trạng thái đường liên \nkết không được triển khai ở mọi ng vì chúng đòi hỏi dung lượng bộ \n\nquả đã chọn của router láng giềng. Mỗi router nhìn hệ thống mạng theo sự chi \nphối của các router láng giềng. \n\nCác router định tuyến theo vectơ khoảng cách thực hiện cập nhật thông tin định \ntuyến theo định kỳ nên tốn nhiều băng thông đường truyền. Khi có sự thay đổi \nxảy ra, router nào nhận biết s\n\ntuyến đã được cập nhật cho các router láng giềng kế tiếp. Quá trình cập nhật cứ \nlần lượt như vậy ra toàn bộ hệ thống. Do đó thời gian bị hội tụ chậm. \n\nBây giờ ta xét đến giao thức định tuyến theo trạng thái đường liên kết. Thông \ntin định tuyến mà các router gửi \n\nmỗi đường kết nối như thế nào, và nó gửi cho mọi router khác trong mạng bằng \nđịa chỉ multicast. Do đó mỗi router đều nhận được từ tất cả các router khác \nthông tin về các kết nối của chúng.\n\nvà cụ thể về cấu trúc của hệ thống mạng. Từ đó, \n\nKhi các router định tuyến theo trạng thái đường\n\nhệ thống mạ\n\n\n\n 240\n\nnhớ lớn và năng lực xử lý mạnh hơn, do đó có thể gây quá tải cho các thiết bị \nđược triển khai rộng \n\n, đòi hỏi người quản trị mạng \nphải được đào tạo tốt mới có thề cấu hình đúng và vận hành được. \n\n độc quyền \n\n tốt \nơn vì khả năng mở rộng của nó. RIP chỉ giới hạn trong 15 hop, hội tụ chậm và đôi \n\nkhi chọn đường  có tốc độ chậm vì khi quyết định chọn đường nó không quan tâm \nđược \n\nác nhược điểm của RIP và nó là một giao thức định tuyến mạnh, có khả năng mở \nrộng, phù hợp với các hệ thống mạng hiện đại. OSPF có thể được cấu hình đơn \n\nxử lý chậm. Một nguyên nhân nữa làm cho chúng không \nrãi là do chúng là một giao thức thực sự phức tạp\n\n \n\n1.2. Các khái niệm về OSPF đơn vùng \n \n\n2.2.1. Tổng quát về OSPF \n\n \n\nOSPF là một giao thức định tuyến theo trạng thái đường liên kết được triển khai \ndựa trên các chuẩn mở. OSPF  đựơc mô tả trong nhiều chuẩn của IETF (Internet \nEngineering Task Force). Chuẩn mở ở đây có nghĩa là OSPF hoàn toàn mở đối với \ncông cộng, không có tính\n\n \n\nNếu so sánh với RIPv1 và v2 thí OSPF là một giao thức định tuyến nội vi IGP\nh\n\nđến các yếu tố quan trọng khác như băng thông chẳng hạn. OSPF khắc phục \nc\n\nvùng để sử dụng cho các mạng nhỏ. \n\n \n\n \n\n \n\n \n\n \n\n\n\n 241\n\n \n\n \n\ngọi là vùng xương sống (backbone). Kiểu thiết kế này cho phép kiểm soát hoạt \nđộ oạt động \nđịn t ng mạng vào từng \nvù  v\n\n \n\n mối quan hệ với các láng giềng này. \n\nHình 2.2.1. Mạng OSPF lớn được thiết kế phân cấp và chia  \n\nthành nhiều vùng \n\n \n\nVí dụ như hình 2.2.1, mạng OSPF lớn cần sử dụng thiết kế phân cấp và chia thành \nnhiều vùng. Các vùng này đều được kết nối vào cùng phân phối la vùng 0 hay còn \n\nng cập nhật định tuyến. Việc phân vùng như vậy làm giảm tải của h\nh uyến, tăng tốc độ hội tụ, giới hạn sự thay đổi của hệ thố\n\nng à tăng hiệu suất hoạt động. \n\n \n\n2.2.2. Thuật ngữ của OSPF \n\nRouter định tuyến theo trạng thái đường liên kết xác định các router láng giềng và \nthiết lập\n\n \n\n\n\n 242\n\nOSPF thực hiện thu thập thông tin về trạng thái các đường liên kết từ các router \nềng. Mỗi router OSPF quảng cáo trạng thái  các đường liên kết của nó và \n\nhuyển tiếp các thông tin mà nó nhận được cho tất cả các láng giềng khác. \nláng gi\nc\n\n \n\n \n\nHình 2.2.2.a ột \nđường liên kế r và \n\nmối q\n\n \n\ná  thái \nn sẽ có \n\ncùng một cơ sở  trạng \nthái của các đườ ết và láng giềng của các router khác. \n\n. Link \u2013 là một cổng trên router. Link-state: trạng thái của m\nt giữa hai router, bao gồm trạng thái của một cổng trên route\nuan hệ giữa nó với router láng giềng kết nối vào cổng đó. \n\nRouter xử lý c\ncác đường liê\n\nc thông tin nhận được để xây dựng một cơ sở dữ liệu về trạng\n kết trong một vùng. Mọi router trong cùng một vùng OSPF \n dữ liệu này. Do đó mọi router sẽ có thông tin giống nhau về\nng liên k\n\n \n\n\n\n 243\n\n \n\n   Hình 2.2.2.b.. Link-state database (Topolo se) \u2013 danh sách các thông \ntin về mọi đường liên kết trong vùng. \n\ngical databa\n\n \n\n \n\n \n\nH h ỉ số danh định \nv g\nđườ rong vùng đó. Do đó, các router trong cùng một vùng sẽ có \n\nn outer nằm trong một \n\nMỗi ro huật toán SPF và cơ sở dữ liệu của nó để tính toán chọn đường \ntốt nhấ  Thuật toán SPF tính toàn chi phí dựa trên băng thông \ncủ ư o có chi phí nhỏ nhất sẽ được chọn để đưa vào bảng \nđịn tu\n\n \n\nìn  2.2.2.c.Area - Tập hợp các mạng và các router có cùng ch\nùn . Mỗi router trong một vùng chỉ xây dựng cơ sở dữ liệu về trạng thái các \n\nng liên  kết t\nthô g tin giống nhau về trạng thái các đường liên kết. R\n\nvùng được gọi la router nội vùng. \n\nuter áp dụng t\nt đến từng mạng đích.\n\na đ ờng truyền. Đường nà\nh yến. \n\n\n\n 244\n\n \n\n \n\nHình 2.2.2.d. Cost \u2013 giá trị chi phí đặt cho một đường liên kết. Giao thức định \ntuyến theo trạng thái đường liên kết tính chi phí cho một liên kết dựa trên băng \n\nthông hoặc tốc độ của đường liên kết đó. \n\n \n\n \n\n \n\nHình 2.2.2.e. Routing table \u2013 hay còn gọi là cơ sở dữ liệu để chuyển gói. Bảng \nđịnh tuyến là kết quả chọn đường của thuật toán chọn đường địa dựa trên cơ sở \n\ndữ liệu về trạng thái các đường liên kết. \n\n \n\n\n\n 245\n\nMỗi router giữ một danh sách các láng giềng thân mật, danh sách này gọi là cơ sở \ndữ liệu các láng giềng thân mật. Các lán ọi là thân mật là những láng \ngiềng mà router có thiết lập mố ột router có thể có nhiều láng \n\nông phải láng giềng nào cũng có mối quan hệ thân mật. Do đó bạn \n\ng giềng được g\ni quan hệ hai chiều. M\n\ngiềng nhưng kh\ncần lưu ý mối quan hệ láng giềng khác với mối quan hệ láng giềng thân mật, hay \ngọi tắt là mối quan hệ thân mật. Đối với mỗi router danh sách láng giềng thân mật \nsẽ khác nhau. \n\n \n\n \n\n \n\nHình 2.2.2.f. Adjacency database \u2013 danh sách các router láng giềng có mối quan \nhệ hai chiều. Mỗi router sẽ có một danh sách khác nhau. \n\n \n\no đổi thông tin định tuyến với nhiều roưter láng giềng \ntrong cùng một mạng, các router OSPF  bầu ra một router đại diện gọi là \nĐể giảm bớt số lượng tra\n\nDesignated router (DR) và một router đại diện dự phòng gọi là Backup Designated \n(BDR) làm điểm tập trung các thông tin định tuyến. \n\n \n\n\n\n 246\n\n \n\n \n\nHình 2.2.2.g. Design Router (DR) và Backup Designated Router (BDR) là router \nđư đại diện. Mỗi \n\n \n\n2.2  ến theo vectơ khoảng cách \n\n \n\nTro i một giao thức định tuyến theo vectơ \nkho ng liên kết có một sơ đồ \nđầy\nthá á\nkhông phát qu\nvec  \ndụng í g hơn cho hoạt động duy trì bảng định tuyến. \n\n \n\nRI  đường tốt nhất đối với RIP là đường có số \nlư với mạng lớn, có khả năng mở rộng, đường đi \n\nợc tất cả các router khác trong cùng một mạng LAN bầu ra làm \nmột mạng sẽ có một DR va BDR riêng. \n\n.3. So sánh OSPF với giao thức định tuy\n\nng phần này chúng ta sẽ so sánh OSPF vớ\nảng cách la RIP. Router định tuyến theo trạng thái đườ\n đủ về cấu trúc hệ thống mạng. Chúng chỉ thực hiển trao đổi thông tin về trạng \ni c c đường liên kết lúc khởi động và khi hệ thống mạng có sự thay đổi. Chúng \n\nảng bá bảng định tuyến theo định kỳ như các router định tuyến theo \ntơ khoảng cách. Do đó, các router định tuyến theo trạng thái đường liên kết sử \n\nt băng thôn\n\nP phù hợp cho các mạng nhỏ và\nợng hop ít nhất. OSPF thì phù hợp \n\ntốt nhất của OSPF được xác định dựa trên tốc độ của đường truyền. RIP cũng như \ncác giao thức định tuyến theo vectơ khoảng cách đều sử dụng thuật toán chọn \nđường đơn giản. Còn thuật toán SPF thì rất phức tap. Do đó, nếu router chạy giao \n\n\n\n 247\n\nthức định tuyến theo vectơ khoảng cách sẽ cần ít bộ nhớ và năng lực xử lý thấp \nhơn so với khi chạy OSPF. \n\n \n\nOSPF chọn đường dựa trên chi phí được tính từ tốc độ của đường truyền. Đường \ntru o thì chi phí OSPF tương ứng càng thấp. \n\n \n\nOS t nhất từ cây SPF. \n\n \n\nOSPF b nh tuyến lặp vòng. Còn giao thức định tuyến theo vectơ \n\nệc phát liên tục các thông tin về trang \nnh trạng các thông tin quảng cáo không \n\n\u2022 Hỗ trợ VLSM (Variable Length Subnet Mask). \n\n \n\nyền có tốc độ càng ca\n\nPF chọn đường tố\n\nảo đảm không bị đị\nkhoảng cách vẫn có thể bị định tuyến lặp vòng. \n\n \n\nNếu một kết nối không ổn định, chập chờn, vi\nthái của đường liên kết này sẽ dẫn đến tì\nđồng bộ làm cho kết quả chọn đường của các router bị đảo lộn. \n\n \n\nOSPF giải quyết được các vấn đề sau: \n\n \n\n\u2022 Tốc độ hội tụ. \n \n\u2022 Kích cỡ mạng \n\u2022 Chọn đường \n\u2022 Nhóm các thành viên. \n\n \n\n\n\n 248\n\n \n\n \n\nHình 2.2.3. Sự cố xảy ra khi một kết nối không ổn định làm cho việc cập nhật \n\n hội tụ được vì \n\nnhư không đến được vì \nRIP có số lượng hop giới hạn là 15. Điều này làm kích thước mạng của RIP bị giới \nhạn trong phạm vi nhỏ. OSPF thì không hề có giới hạn về kích thước mạng, OSPF \nhoàn toàn phù hợp cho các mạng vừa và lớn. \n\nKhi nhận được từ láng giềng các router bao cáo về số lượng hop đến mạng đích, \nRIP sẽ cộng thêm 1 vào thống số hop này và dựa vào số lượng hop đó để chọn \nđường đến mạng đích. Đường nào có khoảng cách ngắn nhất hay nói cách khác là \ncó số lượng hop ít nhất sẽ là đường tốt nhất đối với RIP. Chúng ta thấy thuật toán \n\nkhông đồng bộ. \n\n \n\nTrong một hệ thống mạng lớn, RIP phải mất vài phút mới có thể\nmỗi router chỉ trao đổi bảng định tuyến với các router láng giềng kết nối trực tiếp \nvới mình mà thôi. Còn đối với OSPF sau khi đã hội tụ vào lúc khởi động, khi có \nthay đổi thì việc hội tụ sẽ rất nhanh vì chỉ có thông tin về sự thay đổi được phát ra \ncho mọi router trong vùng. \n\nOSPF có hõ trợ VLSM nên nó được xem là một giao thức định tuyến không theo \nlớp địa chỉ. RIPv1 không có hỗ trợ VLSM, tuy nhiên RIPv2 có hỗ trợ VLSM. \n\nĐối với RIP, một mạng đích cách xa hơn 15 router xem \n\n\n\n 249\n\nchọn đường như vậy rất đơn giản và không đòi hỏi nhiều bộ nhớ và năng lượng xử \nlý của router. RIP không hề quan tâm đến băng thông đường truyền khi quyết định \nchọn đường. \n\nOSPF thì chọn đường dựa vào chi phí được tính từ băng thông của đường truyền. \nMọi OSPF router đều có thông tin đầy đủ về cấu trúc của hệ thống mạng dựa vào \nđó để tự tính toán chọn đường tốt nhất. Do đó thuật toán chọn đường này rất phức \ntạp, đòi hỏi nhiều bộ nhớ và năng lực xử lý của router cao hơn so với RIP. \n\nRIP sử dụng cấu trúc mạng dạng ngang hàng. Thông tin định tuyến được truyền \nlần lượt cho mọi router trong cùng một hệ thống RIP. OSPF sử dụng khái niệm về \n\nhân vùng. Một mạng OSPF có thể chia các router thành nhiều nhóm ằng cách \này, OSPF có thể giới hạn lưu thông trong từng vùng. Thay đổi trong vùng này \nhông ảnh hưởng đến hoạt động của các vùng khác. Cấu trúc phân cấp như vậy \n\nt cách hiệu quả. \n\nắn nhất \n\nhuật toán này, đường tốt nhất là đường có chi phí thấp nhất. Edsger Wybe \nmáy tính người Hà Lan, đã phát minh thuật toán này \n\nnên ó Thuật toán này xem hệ thống mạng là một \ntập g kết nối điểm-đến-điểm. Mỗi kết nối \nnày ó i tên. Mỗi node có đầy đủ cơ sở dữ liệu về \n\np . B\nn\nk\ncho phép hệ thống mạng có khả năng mở rộng mộ\n\n2.2.4. Thuật toán chọn đường ngắn nhất. \n\nTrong phần này sẽ giải thích cách OSPF sử dụng thuật toán chọn đường ng\nnhư thế nào. \n\nTheo t\nDijkstra, một nhà khoa học \n\n n  còn có tên là thuật toán Dijkstra. \n hợp các nodes được kết nối với nhau bằn\n c  một chi phí. Mỗi node có một cá\n\ntrạng thái của các đường liên kết, do đó chúng có đầy đủ thông tin về cấu trúc vật \nlý của hệ thống mạng. Tất cả các cơ sở dữ liệu này đều giống nhau cho mọi router \ntrong cùng một vùng. Ví dụ như trên hình 2.2.4.a, D có các thông tin là nó kết nối \ntới node C bằng đường liên kết có chi phí là 4 và nó kết nối đến node E bằng \nđường liên kết có chi phí là 1. \n\nThuật toán chọn đường ngắn nhất sẽ sữ dụng bản thân node làm điểm xuất phát và \nkiểm tra các thông tin mà nó có về các node kế cận. Trong hình 2.2.4.b, node B \nchọn đường đến D. Đường tốt nhất đến D là đi bằng đường của node E có chi phí \nlà 4. Như vậy là gói dữ liệu đi từ B đến D sẽ đi theo đường từ B qua C qua E rồi \nđến D. \n\n\n\n 250\n\n \n\nNode B chọn đường đến node F là đường thông qua node C có chi phí là 5. Mọi \nđường khác đều có thể bị lặp vòng hoặc có chi phí cao hơn. \n\n \n\nHình 2.2.4.a \n\n \n\nHình 2.2.4.b \n\n \n\n\n\n 251\n\n2.2.5. Các loại mạng OSPF \n\nCác OSPF router phải thiết lập mối quan hệ láng giềng để trao đổi thông tin định \ntuyến. Trong mỗi một mạng IP kết nối vao router, nó đều cố gắng ít nhất là trở \nthành một láng giềng hoặc là láng giềng thân mật với một router khác. Router \nOS g \nkết nối của nó. C ng thân mật với \nmọi router láng giềng khác. Có một số router khác lại có thể chỉ cố gắng trở thành \nláng giềng thân mật với một hoặc hai router láng giềng thôi. Một khi mối quan hệ \nláng giềng thân mật đã được thiết lập giữa hai láng giềng với nhau thì thông tin về \ntrạng thái đường liên kết mới được trao đổi. \n\nGiao tiếp OSPF nhận biết ba loại mạng sau: \n\n\u2022 Mạng quảng bá đa truy cập, ví dụ như mạng Ethernet. \n\u2022 Mạng điểm-nối-điểm. \n\u2022 Mạng không quảng bá đa truy cập (NBMA \u2013 Nonbroadcast multi-access), ví \n\ndụ như Frame Relay. \nLoại mạng thứ 4 là mạng điểm-đ hể được nhà quản tr ạng cấu \n\nPF quyết định  thuộc vào mạn chọn router nào làm láng giềng thân mật là tuỳ\nó một số router có thể cố gắng trở thành láng giề\n\nến-nhiều điểm có t ị m\nhình cho một cổng của router. \n\n \n\nHình 2.2.5.a. Ba loại mạng của OSPF. \n\n \n\n\n\n 252\n\nTrong mạng đa truy cập không thể biết được là có bao nhiêu router sẽ có thể kết \nnối được kết nối vào mạng. Trong mạng điểm-đến-điểm chỉ có hai router kết nối \nvới nhau. \n\nTrong mạng quảng bá đa truy cập có rất nhiều router kết nối vào. Nếu mỗi router \nđều thiết lập mối quan hệ thân mật với mọi router khác và thực hiện trao đổi thông \ntin về trạng thái đường liên kết với mọi router láng giềng thì sẽ quá tải. Nếu có 10 \nrouter thì sẽ cần 45 mối liên hệ thân mật, nếu có n router thì sẽ có n*(n-1)/2 mối \nquan hệ láng giềng thân mật cần được thiết lập. \n\nGiải pháp cho vấn đề quá tải trên là bầu ra một router làm đại diện (DR \u2013 \nDesignated Router). Router này sẽ thiết lập mối quan hệ thân mật với mọi router \nkhác trong mạng quảng bá. Mọi router còn lại sẽ chỉ gửi thông tin về trạng thái \n\nR sẽ gửi các thông tin này cho mọi router khác \n\nup Designated Router), router này sẽ \nđảm trách vai trò của DR nếu DR bị sự cố. Để đảm bảo cả DR và BDR đều nhận \nđượ hái đường liên kết từ mọi router khác trong cùng một \nmạn  ast 224.0.0.6 cho các router đại diện. \n\nđường liên kết cho DR. Sau đó D\ntrong mạng bằng địa chỉ mutlticast 224.0.0.5. DR đóng vai trò như một người phát \nngôn chung. \n\nViệc bầu DR rất có hiệu quả nhưng cũng có một số nhược điểm. DR trở thành một \ntâm điểm nhạy cảm đối với sự cố. Do đó, cần có một router thứ hai được bầu ra để \nlàm router đại diện dự phòng (BDR \u2013 Back\n\nc các thông tin về trạng t\ng, chúng ta sử dụng địa chỉ multic\n\n \n\nHình 2.2.5.b. DR và BDR nhận các gói LSAs. \n\n\n\n 253\n\nTrong mạng điểm-nối-điểm chỉ có 2 router kết nối với nhau nên không cần bầu ra \nDR và BDR. Hai router này sẽ thiết lập mối quan hệ láng giềng thân mật với nhau. \n\n \n\nHình 2.2.5.c \n\n2.2.6. Giao thức OSPF Hello \n\nKhi router bắt đầu khởi động tiến trình định tuyến OSPF trên một cổng nào đó thì \nnó sẽ gửi một gói hello ra cổng đó và tiếp tục gửi hello theo định kỳ. Giao thức \nHello đưa ra các nguyên tắc quản lý việc trao đổi các gói OSPF Hello. \n\nỞ Lớp 3 của mô hình OSI, gói hello mang  địa chỉ multicast 224.0.0.5. Địa chỉ này \nchỉ đến tất cả các OSPF router. OSPF router sử dụng gói hello để thiết lập một \nquan hệ láng giềng thân mật mới để xác định là router láng giềng có còn hoạt động \nhay không. Mặc định, hello được gửi đi 10 giây 1 lần trong mạng quảng bá đa truy \ncập và mạng điểm-nối-điểm. Trên cổng nối vào mạng NBMA, ví dụ như Frame \nRelay, chu kỳ mặc định của hello là 30 giây. \n\nTrong mạng đa truy cập, giao thức hello tiến hành bầu DR và BDR. \n\nMặc dù gói hello rất nhỏ nhưng nó cũng bao gồm cả phần header của gói OSPF. \nCấu trúc của phần header trong gói OSPF được thể hiện trên hình 2.2.6.a. Nếu là \ngói hello thì trường Type sẽ có giá trị là 1. \n\n \n\n\n\n 254\n\n \n\n \n\nể thống nhất giữa mọi láng giềng với nhau trước \nkhi có thể thiết lập mối quan hệ láng giềng thân mật và trao đổi thông tin về trạng \nthái các đường liên kết. \n\n \n\n \n\n \n\nHình 2.2.6.a. Phần header của gói OSPF. \n\nGói hello mang những thông tin đ\n\n \n\nHình 2.2.6.b. Phần header của gói OSPF Hello. Các thông tin trong phần Hello \nInterval, Đea Interval và Router ID phải đồng nhất thì các router mới có thể \n\nthiết lập mối quan hệ láng giềng thân mật. \n\n \n\n2.2.7. Các bước hoạt động của OSPF \n\n\n\n 255\n\n \n\nKhi  bắt đầu khởi động tiến trình định tuyến OSPF trên một cổng nào đó, nó sẽ gửi \n\nột DR và BDR. DR và BDR duy trì mối quan hệ \nthân mật với mọi router OSPF còn lại trong cùng một mạng. \n\n \n\n \n\n \n\ngói Hello ra cổng đó và tiếp tục gửi hello theo định kỳ. Giao thức Hello là một tập \nhợp các nguyên tắc quản lý việc trao đổi gói Hello. Gói Hello mang các thông tin \ncần thống nhất giữa mọi router láng giềng trước khi có thể thiết lập mối quan hệ \nthân mật và trao đổi thông tin về trạng thái các đường liên kết. Trong mạng đa truy \ncập, giao thức Hello sẽ bầu ra m\n\n \n\n \n\nHình 2.2.7.a. Bước 1: phát hiện các router láng giềng. Trong từng mạng IP kết \nnối vào router, router cố gắng thiết lập mối quan hệ thân mật với ít nhất một \n\nláng giềng. \n\n \n\n\n\n 256\n\n \n\n \n\nHình 2.2.7.b. Bước 2: bầu ra DR và BDR. Quá trình này chỉ được thực hiện \ntrong mạng đa truy cập. \n\n \n\nCác router đã có mối quan hệ thân mật lần lượt thực hiên các bước trao đổi thông \n\nọi router trong mạng OSPF. \n\nter áp dụng \nthuậ ựa trên cơ sở dữ liệu mà nó có. \nĐường ngắn nhất là đường có chi phí thấp nhất đến mạng đích. \n\n \n\ntin về trạng thái các đường liên kết. Sau khi hoàn tất quá trình này các ở trạng thái \ngọi la full state. Mỗi router gửi thông tin quảng cáo về trạng thái các đường liên kết \ntrong gói LSAs (Link-State Advertisements) và gửi thông tin cập nhật các trạng \nthái này trong gói LSUs (Link-State Updates). Mỗi router nhận các gói LSAs này \ntừ láng giềng rồi ghi nhận thông tin vào cơ sở dữl iệu của nó. Tiến trình này được \nlặp lại trên m\n\n \n\nKhi cơ sở dữ liệu về trạng thái các đường liên kết đã đáy đủ, mỗi rou\nt toán SPF để tự tính toán chọn đường tốt nhất d\n\n\n\n 257\n\n \n\nHình 2.2.7.c. Bước 3: áp dụng thuật toán SPF vào cơ sở dữ liệu về trạng thái \n liên kết để chọn đường tốt nhất đưa lên bảng định tuyến. \n\nập tức phát thông báo cho mọi router khác \ntrong mạng. Thời gian Dead interval trong giao thức  Hello là một thông số đơn \n\ncác đường\n\n \n\nSau đó các thông tin định tuyến cần phải được bảo trì. Khi có một sự thay đổi nào \nvề trạng thái của đường liên kết, router l\n\ngiản để xác định một router láng giềng thân mật còn hoạt động hay không. \n\n \n\n \n\n\n\n 258\n\n \n\n \n\n \n\n \n\n\n\n 259\n\n     Hình 2.2.7.d. R1 phát hiện một liên kết bị đứt và gửi LSU cho DR bằng địa chỉ \nmulticast 224.0.0.6. DR gửi báo nhận cho R1. \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nHình 2  DR gửi LSU mới nhận cho tất cả các router còn lại trong \ncùng một mạng bằng địa chỉ multicast 224.0.0.5. Sau khi nhận được LSU, các \n\n.2.7.e. Tiếp theo\n\nrouter gửi báo nhận lại cho DR. \n\n\n\n 260\n\n \n\n \n\n \n\n \n\nHình 2.2.7.f. Nếu router OSPF nào còn có kết nối đến mạng khác thì nó sẽ \nchuyển tiếp LSU ra mạng đó. \n\n \n\n \n\n \n\n \n\n \n\n\n\n 261\n\nH h n mới, router OSPF sẽ cập \nnh ới này \n\n \n\n2.3.1. Cấu hình tiến trình định tuyến OSPF \n\n \n\nệm về vùng. Mỗi router xây dựng một cơ sở dữ \nng liên kết trong một vùng. Một vùng trong mạng \n\nOSPF ó là vùng 0. Trong \nmạng OSPF đa vùng, tất cả các vùng đều phải kết nối vào vùng 0. Do đó vùng 0 \nđượ\n\n \n\nn khởi động tiến trình định tuyến OSPF trên router, khai báo địa \nchỉ mạng và chỉ số vùng. Địa chỉ mạng được khai báo kèm theo wilđcard mask chứ \nkhô  D) của vùng được viết dưới dạng \nsố ho c d u chấm tượng tự như IP. \n\n \n\nể khởi động định tuyến OSPF bạn dùng lệnh sau trong chế độ cấu hình toàn cục: \n\n \n\nRouter (config)#router   ospf   process-id \n\n \n\nProcess-id là chỉ số xác định tiến trình địng tuyến OSPF trên router. Bạn có thể \nkhởi động nhiều tiến trình OSPF trên cùng một router. Chỉ số này có thể là bất kỳ \ngiá trị nào trong khoảng từ 1 đến 65.535. Đa số các nhà quản trị mạng thường giữ \nchỉ số process-id này giống nhau trong cùng một hệ tự quản, nhưng điều này là \nkhông bắt buộc. Rất hiếm khi nào bạn cần chạy nhiều hơn một tiến trình OSPF trên \nmột router. Bạn khai báo địa chỉ mạng cho OSPF như sau: \n\nìn  2.2.7.g. Sau khi nhận được LSU với thông ti\nật vào cơ sở dữ liệu của nó rồi áp dụng thuật toán SPF với thông tin m\n\nđể tính toán lại bảng định tuyến. \n\n2.3. Cấu hình OSPF đơn vùng \n\nĐịnh tuyến OSPF sử dụng khái ni\nliệu đầy đủ về trạng thái các đườ\n\nđược cấp số từ 0 đến 65.535. Nếu OSPF đơn vùng thì đ\n\nc gọi là vùng xương sống. \n\nTrước tiên, bạn cầ\n\nng phải là  subnet mask. Chỉ số danh định (I\nặ ưới dạng số thập phân có dấ\n\nĐ\n\n\n\n 262\n\n \n\nRouter(config-router)#network address wildcard-mask  area area-id \n\n \n\nMỗi mạng được quy ước thuộc về một vùng. Adress có thể là địa chỉ của toàn \nmạng, hoặc là một subnet hoặc là địa chỉ của một cổng giao tiếp. Wildcard-mask sẽ \nxác định chuỗi địa chỉ host nằm trong mạng mà bạn cần khai báo. \n\n \n\n \n\nHình 2.3.1. Cấu hình OSPF cơ bản. \n\n \n\n2.3. C yền ưu tiên cho router \n\n \n\nF bắt đầu hoạt động, Cisco IOS sử dụng địa chỉ IP lớn nhất đang \nhoạt động trên router làm router ID. Nều không có cổng nào đang hoạt động thì \ntiến ì ã chọn địa chỉ IP của một \ncổn à tiến trình sẽ bị mất router ID. \nKhi đó tiến trình OSPF sẽ bịi ngưng hoạt động cho đến khi cổng đó hoạt động trở \nlại. \n\n \n\n2. ấu hình địa chỉ loopback cho OSPF và qu\n\nKhi tiến trình OSP\n\n tr nh OSPF không thể bắt đầu được. Khi router đ\ng l m router ID và sau đó cổng này bị sự cố thì \n\n\n\n 263\n\nĐể \ntồn tại ậy cần cấu hình một cổng loopback là một \nổng luận lý chứ không phải cổng vật lý. Nếu có một cổng loopback được cấu hình \n\nẽ sử dụng địa chỉ của cổng loopback làm router ID mà không quan tâm \nến giá trị của địa chỉ này. \n\n \n\nNếu trên router có nhiều hơn một  thì OSPF sẽ chọn địa chỉ IP lớn \nnhất trong các địa chỉ IP của các cổng loopback làm router ID. \n\n \n\nĐể tạ ổng loopback và đặt địa chỉ IP cho nó bạn sử dụng các lệnh sau: \n\n \n\nRouter (config)#interface loopback number \n\n \n\nRouter (config-if)#ip   address   ip-address    subnet-mask \n\n \n\nBạn nê ack cho mọi router chạy OSPF. Cổng loopback này \nnên 5.255.255.255. Địa chỉ 32-bit \n\nậy gọi là host mask vì subnet mask này xác định một địa chỉ \nảng cáo về mạng loopback, OSPF sẽ luôn \n\nluôn u\n\n \n\nđảm bảo cho OSPF hoạt động ổn định chúng ta cần phải có một cổng luôn luôn \n cho tiến trình OSPF. Chính vì v\n\nc\nthì OSPF s\nđ\n\ncổng loopback\n\no c\n\nn sử dụng cổng loopb\n được cấu hình với địa chỉ có subnet mask là 25\n\nsubnet mask như v\nmạng chỉ có một host. Khi OSPF phát qu\n\n q ảng cáo loopback như là một host với 32-bit mask. \n\n\n\n 264\n\n \n\n \n\nHình 2.3.2.a. Cổng loopback chỉ là một cổng phần mềm. Để xoá cổng loopback \nbạn dùng dạng no của câu lệnh tạo cổng. \n\n \n\nể có nhiều hơn hai router. Do đó, OSPF bầu \nra m t router đại diện (DR \u2013 Designated Router)  làm điểm tập trung tất cả các \nthôn t ì vai trò của \nDR t\nRouter ay thế khi DR bị sự cố.  \n\n \n\nĐối vớ\ncổng đ\nbầu DR trên router ID. Router ID nào lớn nhất sẽ được chọn. \n\n \n\nBạn có thể quyết định kết quả bầu chọn DR bằng cách đặt giá trị ưu tiên cho cổng \ncua router kết nối vào mạng đó. Cổ  nào có giá trị ưu tiên cao nhất thì \nrouter đó chắc chắn là DR. \n\n \n\nGiá tr  thể đặt bất kỳ giá trị nào nằm trong khoảng từ 0 đến 255. Giá trị 0 \nsẽ làm cho router đó không bao giờ được bầu chọn. Router nào có giá trị ưu tiên \n\nTrong mạng quảng bá đa truy cập có th\nộ\ng in quảng cáo và cập nhật về trạng thái của các đường liên kết. V\n\n rấ  quan trọng nên một router đại diện dự phòng (BDR \u2013 Backup Designated \n) cũng được bầu ra để th\n\ni cổng kết nối vào mạng quảng bá, giá trị ưu tiên mặc định của OSPF trên \nó là 1. Khi giá trị OSPF ưu tiên của các router đều bằng nhau thì OSPF sẽ \n dựa \n\nng của router\n\nị ưu tiên có\n\n\n\n 265\n\nOSPF cao nhất sẽ được chọn làm DR. Router nào có vị trí ưu tiên thứ 2 sẽ là BDR. \nSau khi bầu chọn xong, DR và BDR sẽ giữ luôn vai trò của nó cho dù chúng ta có \nđặt ê\n\n \n\nĐể a ip  ospf  priority \ncần thay \ncủa cổ\n\nRouter(config-if)#ip  ospf  priority  number \n\n \n\nRouter#show ip  ospf  interfacetype  number \n\n th m router mới vào mạng với giá trị ưu tiên OSPF cao hơn. \n\n th y đổi giá trị ưu tiên OSPF, bạn dùng lệnh  trên cổng nào \nđổi. Bạn dùng lệnh  showip ospf interface có thể xem được giá trị ưu tiên \n\nng và nhiều thông tin quan trọng khác. \n\n \n\n \n\n \n\nHình 2.3.2.b. Trong gói hello phát ra cổng Fast Ethernet 0/0, trường Router \nPriority sẽ có giá trị là 50. \n\n \n\n \n\n \n\n\n\n 266\n\n \n\nHình 2.3.2.c. Gói OSPF Hello. \n\n \n\nHình 2.3.2.d \n\n \n\n\n\n 267\n\n \n\n \n\n \n\nTa xét ví dụ trong hình 2.3.2.d. RTA va RTB sẽ thực hiện bầu DR và BDR trong \nhai m C là \nmạng điểm-nối-điểm nên không thực hiện bầu DR và BDR. Trong mạng Ethernet \n\nTA là \nậy RTB làm DR và RTA làm BDR. \n\n \n\nKhong tim thay hinh \n\n \n\n \n\n \n\n Hình 2.3\n\nTa xét ví dụ hình 2.3.2.f. Hai mạng 10.2.0.0/30 va 10.2.0.4/30 giữa hai kết nối \ns\nđiể ữa \nchúng. Tương tự cho mạng 10.5.0.0/16 giữa router A và router Remote. Giả sử giá \n\n \n\n Hình 2.3.2.e. Bầu DR và BDR trong mạng quảng bá đa truy cập. \n\nạng Ethernet quảng bá đa truy cập. Còn mạng PPP giữa RTB và RT\n\n10.4.0.0/16 kết nối giữa RTA và RTB giả sử giá trị ưu tiên trên 2 cổng Ethernet \ncủa RTA và RTB đều bằng nhau và bằng giá trị mặc định là 1. Khi đó router nào \ncó router ID lớn nhất trong mạng này sẽ được bầu làm DR. Router ID của R\n10.5.0.1, router ID của RTB là 10.6.0.1. V\n\n.2.f \n\nerial của router HQ \u2013 router B, router B \u2013 router Remote là hai mạng điểm-nối-\nm nên không bầu DR và BDR trong mạng Ethernet 10.4.0.0/16 kết nối gi\n\n\n\n 268\n\ntrị ưu tiên trên cổng fa0 của router HQ và trên cổng fa1 của router A đều bằng giá \ntrị mặc định là 1. Router HQ có router ID là 10.4.0.2, router A có router ID là \n10.5.0.1, router Remote có router ID là 10.5.0.2. Vậy router A sẽ là DR trong mạng \nnày vì router A có router ID lớn hơn router ID của router HQ. Tương tự, router \nRemote sẽ là DR trong mạng 10.5.0.0/16 và router A làm BDR trong mạng này. \n\n \n\n \n\nHình 2.3.2.g \n\n \n\nện bầu DR và BDR cho \n hai cổng serial của chúng. R1, R2 và R3 sẽ tiến \n\nhành bầu DR và BDR cho mạng Ethernet kết nối giữa chúng. Giả sử giá trị ưu tiên \n1 có cổng Loopback0 nên nó sẽ lấy địa cỉ \n\ner ID. R2 không có cấu hình cổng Loopback nên nó lấy \nđịa chỉ IP lớn nhất mà nó có để làm router ID. Do đó, router ID của R2 là \n\n Như vậy R3 có router ID lớn \nnhất nên nó được bầu làm DR trong mạng Ethernet 192.1.1.0/24, R2 có router ID \n\nTa xét ví dụ trong hình 2.3.2.g. R2 và R3 không thực hi\nmạng điểm-nối-điểm kết nối giữa\n\ncủa cổng e0 trên các router đều bằng 1. R\nIP của cổng này làm rout\n\n192.1.1.2. Tương tự, router ID của R3 là 201.1.1.1.\n\nlớn thứ 2 nên nó được bầu làm BDR trong mạng này. \n\n \n\n\n\n 269\n\n2.3.3. Thay đổi giá trị chi phí của OSPF. \n\n \n\nOSPF sử dụng chi phí làm thông số chọn đường tốt nhất. Giá trị chi phí này liên \nquan đến đường truyền và dữ liệu nhận vào của một cổng trên router. Nói tóm lại, \nchi phí của một kết nối được tính theo công thức 108/băng thông, trong đó băng \nthông được tính theo đơn vị bit/s. Người quản trị mạng có thể cấu hình giá trị chi \nphí bằng nhiều cách. Cổng nào có chi phí thấp thì cổng đó sẽ được chọn để chuyển \n\n \n\nnfig-if)#bandwidth  64 \n\nGiá trị băng thông mặc định của cổng Serial Cisco là 1,544Mbps hay 1544kbs \n\n \n\ndữ liệu. Cisco IOS tự động tính chi phí dựa trên băng thông của cổng tương ứng. \nDo đó, để OSPF hoạt động đúng bạn cần cấu hình băng thông đúng cho cổng của \nrouter.\n\n \n\nRouter (config)#interface  serial   0/0 \n\n \n\nRouter(co\n\n \n\n \n\n \n\n Hình 2.3.3.a. Giá trị chi phí OSPF mặc định của Cisco IOS. \n\n \n\n\n\n 270\n\nGiá  trị chi phí thay \ntrường định tuyến có\n\nn\na i sử dụng Gigabit Ethernet. Giá trị chi \nất, giá trị 1, là tương ứng với kết nối 100Mbs. Do đó, khi \n\ntrong mạng vừa co 100Mbs va Gigabit Ethernet thì giá trị chi phí mặc định sẽ làm \nuyến c\n\nBạn sử dụng câu lệnh sau trong chế độ cấu hình cổng tương ứng để cài đặt giá trị \ng đó: \n\nfig-if)#ip  ospf   cost   number \n\nđổi sẽ ảnh hưởng đến kết quả tính toán của OSPF. Trong môi \n nhiều hãng khác nhau, bạn sẽ phải thay đổi giá trị chi phí để \ng này tương thích với giá trị chi phí của hãng kia. Một trường \ny đổi giá trị chi phí kh\n\ngiá trị chi phí của hã\nhợp khác bạn cần th\nphí mặc định thấp nh\n\ncho việc định t ó thể không tối ưu. Giá trị chi phi nằm trong khoảng từ 1 đến \n65.535. \n\n \n\nchi phí cho cổn\n\n \n\nRouter (con\n\n \n\nHình 2.3.3.b. Cấu hình giá trị chi ph ng của router. \n\n \n\n2.3.4. Cấu hình quá tr\n\nCác router mặc nhiên uyến mà nó nhận được là do \nđúng router tin cậy phát ra và những thông tin này không bị can thiệp dọc đường \nđi. \n\ní cho một cổ\n\nình xác minh cho OSPF. \n\n tin rằng những thông tin định t\n\n\n\n 271\n\n \n\nĐể đảm bảo điều này\nxác minh với nhau. \n\n \n\nMỗi một cổng OSPF tr nh để sử dụng khi gửi \ncác thông tin OSPF cho các router khác cùng kết nối với cổng đó. Chìa khóa xác \n\nchia sẻ giữa hai router. Chìa khoá này sử dụng \nđể tạo ra dữ liệu xác minh (trường Authentication data) đặt  trong phần header của \n\nconfig-if)#ip  ospf    authentication-keypassword \n\n, các router trong một vùng cần được cấu hình để thực hiện \n\nên router cần có một chìa khoá xác mi\n\nminh, hay còn gọi là mật mã, được \n\ngói OSPF. Mật mã này có thể dài đến 8 ký tự. Bạn sử dụng câu lệnh sau để cấu \nhình mật mã xác minh cho một cổng OSPF: \n\n \n\nRouter (\n\n \n\nSau khi cấu hình mật mã xong, bạn cần bật chế độ xác minh cho OSPF: \n\n \n\nRouter(config-router)#areaarea-number  authentication \n\n \n\n \n\nHình 2.3.4.a. Phần header của gói OSPF. \n\n \n\n \n\n\n\n 272\n\nVới cơ chế xác minh đơn giản trên, mật mà được gửi đi dưới dạn văn bản. Do đó \nnó dễ dàng được giải mã nếu gói OSPF bị những kẻ tấn công bắt được. \n\n \n\nChính vì vậy các thông tin xác minh nên được mật mã lại. Để đảm bảo an toàn hơn \nn cấu hình mật mã message-digest \n\nbằn  của router: \n\n \n\nRouter   \nkey \n\n \n\nMD5 l\nencryption-type giá trị 0 có nghĩa là không thự hiện mật mã, còn giá trị 7 có nghĩa \nlà th\n\n \n\nTham s  số key là \nphầ\nbuộc p\n\n \n\nSau khi c\ntrong  OSPF: \n\n \n\nRouter\n\nvà thực hiện mật mã thông tin xác minh, bạn nê\ng câu lệnh sau trên cổng tương ứng\n\n( config-ì)#ip   ospf   message-digest-key    key-id   encryption-type md5  \n\nà một thuật toán mật mã thông điệp message-digist. Nếu bạn đặt tham số \n\nực hiện mật mã theo cách độc quyền của Cisco. \n\nố key-id là một con số danh định có giá trị từ 1 đến 255. Tham\nn cho bạn khai báo mật mã, có thể dài đến 16 ký tự. Các router láng giềng bắt \n\nhải có cùng số  key-id cà cùng giá trị key. \n\nấu hình  mật mã MD5 xong bạn cần bật chế độ xác minh message-digest \n\n (config-router)#areaarea-id   authentication   message-digest \n\n\n\n 273\n\n \n\nHình 2.3.4.b. Cấu hình cơ chế xác minh MD5 cho OSPF. \n\n \n\nTừ mật mã và nội dung của gói dữ liệu, thuật toán mẫt mã MD5 sẽ tạo ra một \nthông điệp gắn thêm vào gói d ói dữ liệu sẽ dùng mật mã mà \n\nới gói dữ liệu nhận được để tạo ra một thông điệp. Nếu \nkết quả hai thông điệp này giống nhau thì có nghĩa là là router đã nhận được gói dữ \n\n nào. Nếu cơ chế xác minh là message-digest thì trường \nauthentication data sẽ có chứa key-id và thông số cho biết chiều dài của phần thông \n\nhời gian của OSPF \n\nnh, khoảng \nthời gian bất động bằng bốn lần khoảng thời gian hello. Điều này có nghĩa là một \n\ni để gửi gói hello trước khi nó xác định là đã chết. \n\n \n\nữ liệu. Router nhận g\nbản thân router có kết hợp v\n\nliệu từ đúng nguồn và nội dung gói dữ liệu đã không bị can thiệp. Cấu trúc phần \nheader của gói OSPF như trên hình 2.3.4.a. Trường authentication type cho biết cơ \nchế xác minh là cơ chế\n\nđiệp gắn thêm vào gói dữ liệu. Phần thông điệp này giống như một con dấu không \nthể làm giả được. \n\n \n\n2.3.5. Cấu hình các thông số t\n\n \n\nCác  router OSPF bắt buộc phải có khoảng thời gian hello và khoảng thời gian bất \nđộng với nhau mới có thể thực hiện trao đổi thông tin với nhau. Mặc đị\n\nrouter có đến 4 cơ hộ\n\n\n\n 274\n\nTrong mạng OSPF quảng bá, khoảng thời gian hello mặc định là 10 giây, khoảng \nthời gian bất động mặc định là 40 giây. Trong mạng không quảng bá, khoảng thời \ngian hello mặc định là 30 giây và khoảng thời gian bất động mặc định là 120 giây. \nCác giá trị mặc định  này có ảnh hưởng đến hiệu quả hoạt động của OSPF và đôi \nkhi bạn cần phải thay đổi chúng. \n\n \n\nNgười quản trị mạng được phép lựa chọn giá trị cho hai khoảng thời gian này. Để \ntăng hiệu quả hoạt động của mạng bạn cần ưu tiên thay đổi giá trị của hai khoảng \nthời gian này. Tuy nhiên, các giá trị này phải được cấu hình giống nhau cho mọi \nrouter láng giềng kết nối với nhau. \n\n \n\nĐể cấu hình khoảng thời gian hello và khoảng thời gian bất động trên một cổng \n\nouter (config-if)#ip  ospf  hello-interval seconds \n\n \n\nRouter (config-if)#ip  ospf dead-interval  seconds \n\n \n\ncủa router, bạn sử dụng câu lệnh sau: \n\n \n\nR\n\n \n\nHình 2.3.5 \n\n \n\n\n\n 275\n\n2.\n\n \n\non đường đến tất cả các mạng đích trong hệ thống \n\nđường đi cho mọi mạng đích trên thế giới thì sẽ \nồ. \n\n, chúng ta khai báo đường mặc định cho router OSPF nào kết nối ra \nngoài. Sau đó thông tin về đường mặc định này được phân phối vào cho các router \n\n \n\n \n\n \n\nMọi router trong hệ thống OSPF sẽ nhận biết được là có đường mặc định trên \n\n3.6. OSPF thực hiện quảng bá đường mặc định \n\nĐịnh tuyến OSPF đảm bảo các c\nkhông bị lặp vòng. Để đến được các mạng nằm ngoài hệ thống thì OSPF cần phải \nbiết về mạng đó hoặc là phải có đường mặc định. Tốt nhất là sử dụng đường mặc \nđịnh vì nều router phải lưu lại từng \ntốn một lượng tài nguyên khổng l\n\n \n\nTrên thực tế\n\nkhác trong hệ tự quản (AS \u2013 autonomous system)  thông qua hoạt động cập nhật \nbình thường của OSPF. \n\nTrên router có cổng kết nối ra ngoài, bạn cấu hình mặc định bằng câu lệnh sau: \n\n \n\nRouter (config)#ip route  0.0.0.0  0.0.0.0  [interface  |  next-hop  address  ] \n\nMạng tám số 0 như vậy tương ứng với bất kỳ địa chỉ mạng nào. Sau khi cấu hình \nđường mặc định xong, bạn cấu hình cho OSPF chuyển thông tin về đường mặc \nđịnh cho mọi router khác trong vùng OSPF: \n\nRouter (config-router) #default \u2013 information  originate \n\n \n\nrouter biên giới kết nối ra ngoài. \n\n\n\n 276\n\n \n\n \n\n \n\nHìn 2\ntrong bảng định tuyến. \n\n \n\n2.3.7. N\n\n \n\nOSPF  giềng hoặc thân mật với OSPF  router \nkhác để trao đổi thông tin định tuyến. Mối quan hệ này không thiết lập được có thể \ndo\n\n\u2022 C\n\u2022 \n\n\u2022 L\n\u2022 M\n\n \n\nTrong c\ncũng vô cùng quan t\n\n\u2022 Tất cả các cổng giao tiếp phải có địa chỉ và subnet mask chính xác. \n\nh .3.6. Đường mặc định chỉ được sử dụng khi không tìm thấy đường nào khác \n\những lỗi thường gặp trong cấu hình OSPF \n\nrouter phải thiết lập mối quan hệ láng\n\n những nguyên nhân sau: \n\n ả hai bên láng giềng với nhau đều không gửi Hello. \nKhoảng thời gian Hello và khoảng thời gian bất động không giống nhau giữa \ncác router láng giềng. \n\n oại cổng giao tiếp khác nhau giữa các router láng giềng. \nật mã xác minh và chìa khoá khác nhau giữa các router láng giềng. \n\nấu hình định tuyến OSPF việc đảm bảo tính chính xác của các thông tin sau \nrọng: \n\n\n\n 277\n\n\u2022 C\n\u2022 C\n\n \n \n2.3. K\n\n \n\nĐể kiểm tra cấu hình OSPF bạn có thể dùng các lệnh show được liệt kê trong bảng \n2.3.\nOSPF. \n\n \n\nBảng 2\n\n \n\nLệ Giải thích \n\n âu lệnh network  area phải có wildcard mask chính xác. \nâu lệnh network  area phải khai báo đúng area mà network đó thuộc về. \n\n8. iểm tra cấu hình OSPF \n\n8.a. Bảng 2.3.8.b liệt kê các lệnh show hữu dụng cho bạn khi tìm sự cố của \n\n.3.8.a. Các lệnh show dùng để kiểm tra cấu hình OSPF \n\nnh \n\n \n\nShow \npro\n\nthông số định ip Hiển thị các thông tin về thông số thời gian, \ntocol tuyến, mạng định tuyến và nhiều thông tin khác của tất cả \n\ncác giao thức định tuyến đang hoạt động trên router. \n\nSh\nroute \n\nc được các đường đi này bằng cách nào. \n\now ip Hiển thị bảng định tuyến của router, trong đó là danh sách \ncác đường tốt nhất đến các mạng đích của bản thân router và \ncho biết router họ\n\nSh\ninte\n\nợc cấu hình thì ghi địa chỉ IP của cổng vật lý nào có \ngiá trị lớn nhất sẽ được chọn làm router ID. Lệnh này cũng \n\nng thời cho biết các router \n\now ip ospf  Lệnh này cho biết cổng của router đã được cấu hình đúng \nrface với vùng mà nó thuộc về hay không. Nếu cổng loopback \n\nkhông đư\n\nhiển thị các thông số của khoảng thời gian hello và khoảng \nthời gian bất động trên cổng đó, đồ\nláng giềng thân mật kết nối vào cổng. \n\nShow i ày cho biết số lần đã sử dụng thuật toán SPF, đồng \nthời cho biết khoảng thời gian cập nhật khi mạng không có gì \n\np ospf Lệnh n\n\n\n\n 278\n\nthay đổi. \n\nShow ip ospf \nneig\ndetail \n\nLiệt kê chi tiết các láng giềng, giá trị ưu tiên của chúng và \nhbor trạng thái của chúng. \n\nSho\ndataba mạng trên router, đồng thời cho biết router ID, ID của tiến \n\nw ip ospf \nse \n\nHiển thị nội dung của cơ sở dữ liệu về cấu trúc hệ thống \n\ntrình OSPF. \n\n \n\nBảng 2.3.8.b. Các lệnh clear và debug dùng để kiểm tra hoạt động OSPF. \n\n \n\nLệnh Giải thích \n\n \n\nClear ip route * Xoá toàn bộ bảng định tuyến. \n\nClear ip route a.b.c.d Xoá đường a.b.c.d trong bảng định tuyến. \n\nDebug ip ospf events Báo cáo mọi sự kiện của OSPF. \n\nDebug ip ospf adj Báo cáo mọi sự kiện về hoạt động quan hệ thân mật \ncủa OSPF. \n\n \n\nTỔ ẾT \n\n \n\nSau  được trong chương này: \n\n\u2022 C  \n\u2022 Thông tin định tuyến theo trạng thái đường liên kết được xây dựng và bảo trì \n\nnhư thế nào. \nạng thái đường liên kết. \n\nnh tuyến theo trạng thái đường liên kết. \n\nNG K\n\n đây là các điểm quan trọng bạn cầm nắm\n\n ác đặc điểm của định tuyến theo trạng thái đường liên kết.\n\n\u2022 Thuật toán định tuyến theo tr\n\u2022 Ưu và nhược điểm của đị\n\n\n\n 279\n\n\u2022 S n theo vectơ \nkhoảng cách. \n\n\u2022 C\n\u2022 C\n\u2022 H ủa thuật toán chọn đường ngắn nhất SPF. \n\u2022 Giao thức OSPF Hello. \n\u2022 C\n\u2022 K outer. \n\u2022 Cấu  hình cổng loopback để đặt quyền ưu tiên cho router. \n\nng của OSPF bằng cách thay đổi thông số chi \nphí. \n\n để kiểm tra hoạt động của OSPF. \n \n\n \n\n \n\n \n\n \n\n \n\n o sánh định tuyến theo trạng thái đường liên kết với định tuyế\n\n ác thuật ngữ OSPF. \n ác loại mạng OSPF. \n\noạt động c\n\n ác bước cơ bản trong hoạt động của OSPF. \nhởi động OSPF trên r\n\n\u2022 Thay đổi quyết định chọn đườ\n\n\u2022 Cấu hình quá trình xác minh cho OSPF. \n\u2022 Thay đổi các thông số thời gian của OSPF. \n\u2022 Tạo và quảng bá đường mặc định. \n\u2022 Sử dụng các lệnh show \n\n \n\n\n\n 280\n\n \n\nChương 3:  EIGRP \n\nGIỚI THIỆU \n\nEnhanced Interior Gateway Routing Protocol (EIGRP) là một giao thức định tuyến \nđộc quyền của Cisco được phát triển từ Interior Gateway Routing Protocol (IGRP). \n\nKhông giống như IGRP là một giao thức định tuyến theo lớp địa chỉ, EIGRP có hỗ \ntrợ định tuyến liên miền không theo lớp địa chỉ (CIDR \u2013 Classless Interdomain \nRouting) và cho phép người thiết kế mạng tối ưu không gian sử dụng địa chỉ bằng \nVLSM. So với IGRP, EIGRP có thời gian hội tụ nhanh hơn, khả năng mở rộng tốt \nhơn và khả năng chống lặp vòng cao hơn. \n\nHơn nữa, EIGRP còn thay thế được cho giao thức Novell Routing Information \nProtocol (Novell RIP)  và Apple Talk Routing Table Maintenance Protocol \n(RTMP)  để phục vụ hiệu quả cho cả hai mạng IPX và Apple Talk. \n\nEIGRP th ả giao \nthức định tuyến theo vectơ khoảng cách và giao thức định tuyến theo trạng thái \nđường liên kết. \n\nEIGRP là một g c điểm cả giao \n\nụ cấu hình EIGRP, đặc biết tập trung vào \n\nng dự phòng khi cần thiết, cácg đáp ứng với sự cố của một đường đi \nnào đó. \n\nMột hệ thống mạng được xây dựng bởi nhiều thiết bị, nhiều giao thức và nhiều loại \nđó của mạng không hoạt động đúng thì sẽ \n\ncó một vài người dùng không truy cập được hoặc có thể cả hệ thống mạng cũng \nkhông họat động được. Cho dù trong trường hợp nào thì khi sự cố xảy ra người \n\nường được xem là giao thức lai vì nó kết hợp các ưu điểm của c\n\niao thức định tuyến nâng cao hơn dựa trên các đặ\nthức định tuyến theo trạng thái đường liên kết. Những ưu điểm tốt nhất của OSPF \nnhư thông tin cập nhật một phần, phát hiện router láng giềng\u2026được đưa vào \nEIGRP. Tuy nhiên, cấu hình EIGRP dễ hơn cấu hình OSPF. \n\nEIGRP là một lựa chọn lý tưởng cho các mạng lớn, đa giao thức được xây dựng \ndựa trên các Cisco router. \n\nChương này sẽ đề cập đến các nhiệm v\ncách EIGRP thiết lập mối quan hệ với các router thân mật, cách tính toán đường \nchính và đườ\n\nmôi trường truyền. Khi một bộ phận nào \n\n\n\n 281\n\nquản trị mạng phải nhanh chóng xác định được sự cố và xử lí chúng. Sự cố mạng \nthường do những nguyên nhân sau: \n\n\u2022 Gõ sai câu lệnh \n\u2022 Cấu hình danh sách kiểm tra truy cập ACL không đúng hoặc đặt ACL không \n\nđúng chỗ \nấu hình cho router, switch và các thiết bị mạng khác \n\n\u2022 Kết nối vật lý không tốt \nN\nđ\nd  các lớp trên. Mặ ý sự cố các họat động \ncủa giao thức định tuyến ở Lớp 3 nhưng cũng rất quan trong cho các bạn khi cần \nl\nSau khi hoàn tất chương\n\n\u2022 Mô tả sự khác nh\n\u2022 Mô tả các khái ni\n\u2022 Hiểu được quá trình h\n\nthuật toán DUAL\n\u2022 Thực hiện cấu hìn\n\u2022 Cấu hình đường t\n\u2022 Mô tả quá trình EIGRP xây dựng và bảo trì bảng định tuyến \n\nô tả 8 bước để x\n\u2022 Áp dụng tiến trình\n\u2022 Xử lý sự cố của h\n\ndebug. \n\u2022 Xử lý sự cố của họ\n\ndebug \n\u2022 Xử lý sự cố của họat động định tuyến EIGRP  bằng cách sử dụng lệnh show \n\nvà debug \n\u2022 Xử lý sự cố của họat động định tuyến OSPF bằng cách sử dụng lệnh show \n\n EIGRP  \n\nGRP  \n\nCisco đưa ra giao thức EIGRP vào năm 1994 như là một phiên bản mới mở rộng \n\noảng cách trong IGRP vẫn \n\nđược sử dụng cho EIGRP \n\n\u2022 Các c\n\người quản trị mạng cầ\nồ xử lý sự cố tổng quát\nần lên\n\nn tiếp cận với sự cố một cách có phương pháp, sử dụng sơ \n. Trước tiên là kiểm tra sự cố ở lớp vật lý trước rồi mới đi \n dù chương này chỉ tập trung vào xử l\n\noại trừ sự cố ở các lớp dưới. \n này, các bạn sẽ thực hiện được những việc sau: \nau giữa EIGRP và IGRP  \nệm, kĩ thuật và cấu trúc dữ liệu của EIGRP \n\nội tụ của EIGRP và các bước họat động cơ bản của \n (Diffusing Update Algorithm) \nh EIGRP cơ bản \nổng hợp cho EIGRP \n\n\u2022 Kiểm tra hoạt độn\n\u2022 M\n\ng của EIGRP \nử lý sự cố tổng quát \n logic để xử lý sự cố định tuyến. \nọat động định tuyến RIP bằng cách sử dụng lệnh show và \n\nat động định tuyến IGRP bằng cách sử dụng lệnh show và \n\nvà debug \n3.1. Các khái niệm của\n\n3.1.1. So sánh EIGRP và I\n\nvà nâng cao hơn của giao thức IGRP. Kĩ thuật vectơ kh\n\n\n\n 282\n\nEIGRP cải tiến các đặc tính của quá trình hội tụ, họat động hiệu quả hơn IGRP. \n\nẫn giữ nguyên \n\nnhững gì đã xây dựng trong IGRP  \n\nChúng ta sẽ tập trung so sánh EIGRP và IGRP trong các lĩnh vực sau: \n\ních \n\n\u2022 Cách tính thông số định tuyến  \n\n\u2022 Số lượng hop \n\n\u2022 Họat động phân phối thộng tin tự động \n\n\u2022 Đánh dấu đường đi \n\nIGRP và EIGRP hoàn toàn tương thích với nhau. EIGRP router không có ranh giới \n\nkhi họat động chung với IGRP router. Đặc điểm này rất quan trọng khi người sử \n\ndụng muốn tận dụng ưu điểm của cả hai giao thức. EIGRP có thể hỗ trợ nhiều lọai \n\ngiao thức khác nhau còn IGRP thì không. \n\nEIGRP và IGRP có cách tính thông số định tuyến khác nhau. EIGRP tăng thông số \n\nđịnh tuyến của IGRP sử dụng thông số 24 bit. Bằng cách nhân lên hoặc chia đi 256 \n\nlần, EIGRP có thể dễ dàng chuyển đổi thông số định tuyến của IGRP  \n\nEIGRP và IGRP đều sử dụng công th ố định tuyến như sau: \n\nThông số định tuyến = [K1 * băng thông + (K2 * băng thông/(256 \u2013 độ tải) \n\nđộ trễ)] * [K5/(độ tin cậy + K4)] \n\nặc định: K1=1, K2=0, K3=1, K4=0, K5=0. \n\nKhi K4=K5=0 thì phần [K5/ (độ tin cậy + K4)]trong công thức không còn là \n\nmột nhân tố khi tính thông số định  đó, công thức tính còn lại \n\nnhư sau: \n\nđộ trễ \n\nĐiều này cho phép chúng ta mở rộng, cải tiến cấu trúc trong khi v\n\n\u2022 Tính tương th\n\nức tính thông s\n\n+ (K3 * \n\nM\n\n tuyến nữa. Do\n\nThông số định tuyến = băng thông + \n\nIGRP và EIGRP sử dụng các biến đổi sau để tính toán thông sô định tuyến: \n\nBăng thông trong công thức trên áp dụng cho IGRP = 10 000 000 / băng \n\n\n\n 283\n\nthông thực sự \n\nBăng thông trong công thức trên áp dụng cho EIGRP = (10 000 000 / băng \n\nthông thực sự) * 256 \n\nĐộ trễ trong công thức trên áp dụng cho IGRP = độ trễ thực sự/10 \n\nĐộ trễ trong công thức trên áp dụng cho EIGRP = (độ trễ thực sự/10) * 256 \n\nIGRP có số lượng hop tối đa là 255. EIGRP có số lượng hop tối đa là 224. Con số \n\nnày dư sức đáp ứng cho một mạng được thiết kế hợp lí lớn nhất. \n\nn với nhau thì cần phải cấu hình nâng cao hơn. Trong khi đó \n\na hệ tự quản sẽ tự động phân phối và chia sẻ \n\nhau. Trong ví dụ ở hình 3.1.1, RTB tự động phân phối \n\nà EIGRP học được cho IGRP AS và ngược lại. \n\nđược từ IGRP hay từ bất kì nguồn bên \n\nngoài nào khác là đường ngoại vi vì những con đường này không xuất phát từ \n\n như hình 3.1.1, trong kết quả hiển thị của lệnh show ip route, đường EIGRP \n\n \n\nt này. RTC chỉ nhận biêt tất cả các đường đều là đường IGRP mặc dù 2 \n\nĐể các giao thức định tuyến khác nhau như OSPF và RIP chẳng hạn thực hiện chia \n\nsẻ thông tin định tuyế\n\nIGRP và EIGRP có cùng số AS củ\n\nthông tin về đường đi với n\n\ncác thông tin về đường đi m\n\nEIGRP đánh dấu những đường mà nó học \n\nEIGRP router. IGRP thì không phân biệt đường ngoại vi và nội vi. \n\nVí dụ\n\nđược đánh dấu bằng chữ D, đường ngoại vi được đánh dấu bằng chữ EX. RTA \n\nphân biệt giữa mạng học được từ EIGRP (172.16.0.0) và mạng được phân phối từ\n\nIGRP (192.168.1.0). Trong bảng định tuyến của RTC, giao thức IGRP không có sự \n\nphân biệ\n\nmạng 10.1.1.0 và 172.16.0.0 là được phân phối từ EIGRP. \n\n\n\n 284\n\n \n \n \n \n \n3.1 ữ của EIGRP  \nEIGRP router lưu giữ các thông tin về đường đi và cấu trúc mạng trên RAM, nhờ \nđó  đổi. Giống như OSPF, EIGRP cũng \nlưu nh ệu khác nhau. \nEIG ặc biệt. Mỗi con đường \ncó dấu để cung cấp thêm nhiều thông tin hữu dụng \nkhác. \nEIG\n\n\u2022 Bảng láng giềng (Neighbor table) \n\nBả RP lưu giữ \nmộ Bảng này \ntươ ức mà \nEIG\nKhi phát hiện một láng giềng mới, router sẽ ghi lại địa chỉ và cổng kết nối của láng \ngiề ông số về \nkhoảng thời gian lưu giữ. Nếu router không nhận được gói hello khi đến định kì thì \nkho ng thời gian lưu giữ là khoảng thời gian mà router chờ và vẫn xem là router \nláng giềng còn kết nối được và còn họat động. Khi khoảng thời gian lưu giữ đã hết \nmà vẫn không còn kết nối được và còn hoạt động. Khi khoảng thời gian lưu giữ đã \nhết mà vẫn không nhận được hello từ router láng giềng đó, thì xem như router láng \ngiềng đã không còn kết nối được hoặc không còn hoạt động, thuật toán DUAL \n\n.2. Các khái niệm và thuật ng\n\nchúng đáp ứng nhanh chóng theo sự thay\nững thông tin này thành từng bảng và từng cơ sở dữ li\n\nRP lưu các con đường mà nó học được theo một cách đ\ntrạng thái riêng và có đánh \n\nRP có ba lọai bảng sau: \n\n\u2022 Bảng cấu trúc mạng (Topology table) \n\u2022 Bảng định tuyến (Routing table) \nng láng giềng là bảng quan trọng nhất trong EIGRP. Mỗi router EIG\nt bảng láng giềng, trong đó là danh sách các router thân mật với nó. \nng tự như cơ sở dữ liệu về các láng giềng của OSPF. Đối với mỗi giao th\nRP hỗ trợ, EIGRP có một bảng láng giềng riêng tương ứng. \n\nng đó vào bảng láng giềng. Khi láng giềng gửi gói hello trong đó có th\n\nả\n\n\n\n 285\n\n(Difusing Up  tính toán \nlại theo mạng mới. \nBả  cấu trúc mạng là bảng cung cấp dũ liệu để xây dưngj lên mạng định tuyến \ncủa EIGRP. DUAL lấy thông tin từ bảng láng giềng và bảng cấu trúc mạng để tính \ntoá ó chi phí thấp nhất đến từng mạng đích. \nMỗ\nthứ\nmà\nkhá\nnhấ\nSau là những thông tin chứa trong bảng cấu trúc mạng: \n\n\u2022 Thông tin về cổng giao tiếp mà router sử dụng để đi đến mạng đích. \n\nBả\nNh\nRo\nCo\ntin \nvà ạng đích có thể có đến 4 successor. Những \nđườ\ncũn\nĐư\nnày với đường successor nhưng chúng chỉ được lưu trong \nbảng c\nRo\nnó.\nvới\ncố \nbắt\nđư iện tại. Nếu trong bảng cấu trúc mạng không có sẵn đường \nFeasible successor thì con đường đến mạng đích tương ứng được đưa vào trạng \n\ndate Algorithm) sẽ thông báo sự thay đổi này và thực hiện\n\nng\n\nn chọn đường c\ni EIGRP router lưu một bảng cấu trúc mạng riêng tương ứng với từng loại giao \nc mạng khác nhau. Bảng cấu trúc mạng chứa thông tin về tất cả các con đường \n router học được. Nhờ những thông tin này mà router có thể xác định đường đi \nc để thay thế nhanh chóng khi cần thiết. Thuật tóan DUAL chọn ra đường tốt \nt đến mạng đích gọi là đường kính (successor router).  \n đây \n\u2022 Feasible distance (FD): là thông tin định tuyến nhỏ nhất mà EIGRP tính \n\nđược cho từng mạng đích. \n\u2022 Route source: là nguồn khởi phát thông tin về một con đường nào đó. Phần \n\nthông tin này chỉ có với những đường được học từ ngoài mạng EIGRP. \n\u2022 Reported disdiance (RD): là thông số định tuyến đến một router láng giềng \n\nthân mật thông báo qua. \n\n\u2022 Trạng thái đường đi: Trạng thái không tác động (P \u2013 passive) là trạng thái ổn \nđịnh, sẵn sàng sử dụng được, trạng thái tác động (A \u2013 active) là trạng thái \nđang trong tiến trình tính toán lại của DUAL. \n\nng định tuyến EIGRP lưu giữ danh sách các đường tốt nhất đến các mạng đích. \nững thông tin trong bảng định tuyến được rút ra từ bảng từ cấu trúc mạng. \nuter EIGRP có bảng định tuyến riêng cho từng giao thức mạng khác nhau. \nn đường được chọn làm đường chính đến mạng đích gọi là successor. Từ thông \ntrong bảng láng giềng và bảng cấu trúc mạng, DUAL chọn ra một đường chính \nđưa lên mạng định tuyến. Đến một m\nng này có chi phí bằng nhau hoặc không bằng nhau. Thông tin về successor \ng được đạt trong bảng cấu trúc mạng. \nờng Feasible successor (FS) là đường dự phòng cho đường successor. Đường \n cũng được chọn ra cùng \n\nấu trúc mạng nhưng điều này không bắt buộc. \nuter xem hop kế tiếp của đường Feasible successor dưới nó gần mạng đích hơn \n Do đó, chi phí của Feasible successor được tính bằng chi phí của chính nó cộng \n chi phí vào router láng giềng thông báo qua. Trong trường hợp successor bị sự \nthì router sẽ tìm Feasible successor để thay thế. Một đường Feasible successor \n buộc phải có chi phí mà router láng giềng thông báo qua thấp hơn chi phí của \nờng successor h\n\n\n\n 286\n\nthái Active và router bắt đầu gửi các gói yêu cầu đến tất cả các láng giềng để tính \ntoán lại cấu trúc mạng. Sau đó với các thông tin mới nhận được, router có thể sẽ \nchọ i được chọn \nxon\n\nn ra được successor mới hoặc Feasible successor mới. Đường mớ\ng sẽ có trạng thái là Passive. \n\n \nHình 3.1.2.a. RTA có thể có nhiều successor đến mạng Z nếu RTB và RTC  \n\no về chi phí đến mạng Z như nhau gửi thông bá\n\n \nHình vẽ 3.1.2.b. \n\nBả u thông tin khác về các đường đi. EIGRP phân \nloạ ại vi. Đường nội vi là đường xuất phát từ bên \ntro hãn \n(Administrator tag) với giá trị từ 0 đến 255 để phân biệt đường thuộc loại nào. \nĐư EIGRP. Các đường ngoại vi \nlà nh ức định tuyến khác như RIP, OSPF và \nIGR đường ngoại vi. \n\nng cấu trúc mạng còn lưu nhiè\ni ra đường nôi vi và đường ngo\nng hệ tự quản (Á \u2013Autonomous system) của EIGRP. EIGRP có dán n\n\nờng ngoại vi là đường xuất phát từ bên ngoài Á của \nững đường được học từ các giao th\n\nP. Đường cố định cũng được xem là \n\n\n\n 287\n\n \n\n \n\n3.1\n\nEIG\n\nthe\nvµ c gièng nh− mét giao thøc ®Þnh tuyÕn theo \n\ntr¹ng th¸i ®−êng liªn kÕt. Sau ®©y lµ c¸c −u ®iÓm cña EIGRP so víi giao thøc ®Þnh \ntuyÕn theo vect¬ kho¶ng c¸ch th«ng th−êng: \n\n\u2022 Tèc ®é héi tô nhanh. \n\n\u2022 Sö dông b¨ng th«ng hiÖu qu¶. \n\n.3. C¸c ®Æc ®iÓm cña EIGRP \n\nRP ho¹t ®éng kh¸c víi IGRP. VÒ b¶n chÊt EIGRP lµ mét giao thøc ®Þnh tuyÕn \n\no vect¬ kho¶ng c¸ch n©ng cao nh−ng khi cËp nhËt vµ b¶o tr× th«ng tin l¸ng giÒng \nth«ng tin ®Þnh tuyÕn th× nã lµm viÖ\n\n\n\n 288\n\n\u2022 Cã hç trî VLSM (Variable \u2013 Length Subnet Mask) vµ CIDR (Classless \nInterdomain Routing). Kh«ng gièng nh− IGRP, EIGRP cã trao ®æi th«ng tin \nvÒ subnet mask nªn nã hç trî ®−îc cho hÖ thèng IP kh«ng theo líp. \n\n\u2022 Hç trî nhiÒu giao thøc m¹ng kh¸c nhau. \n\n\u2022 Kh«ng phô thuéc vµo giao thøc ®Þnh tuyÕn. Nhê cÊu tróc tõng phÇn riªng \nbiÖt t−¬ng øng víi tõng giao thøc mµ EIGRP kh«ng cÇn ph¶i chØnh söa l©u. \n\nVÝ dô nh− khi ph¸t triÓn ®Ó hç trî mét giao thøc míi nh− IP ch¼ng h¹n, \nEIGRP cÇn ph¶i cã thªm phÇn míi t−¬ng øng cho IP nh−ng hoµn toµn \n\nkh«ng cÇn ph¶i viÕt l¹i EIGRP. \n\nEIG\n\nkh«\n\nthùc h\n\nEIGRP sö dông b¨ng th«ng hiÖu qu¶ v× nã chØ göi th«ng tin cËp nhËt mét phÇn vµ \ngií\n\nb¨n\n\n®én\ngö\n\ngö\ncña\n\nrouter EIGRP gi÷ liªn l¹c víi nhau b»ng c¸c gãi hello rÊt nhá. ViÖc trao ®æi c¸c gãi \nhel\n\nEIGRP cã thÓ hç trî cho IP, IPX vµ Apple Talk nhê cã cÊu tróc tõng phÇn theo giao \nthøc (PDMs \u2013 Protocol-dependent modules). EIGRP cã thÓ ph©n phèi th«ng tin \n\ncña\n®iÒ\n\nchØ\n\ntha\n\nEIG\nPro\n\n®−ê l¾m. Do ®ã, EIGRP sö dông th«ng sè ®Þnh tuyÕn tæng hîp \n\nRP router héi tô nhanh v× chóng sö dông DUAL. DUAL b¶o ®¶m ho¹t ®éng \n\nng bÞ lÆp vßng khi tÝnh to¸n ®−êng ®i, cho phÐp mäi router trong hÖ thèng m¹ng \n\niÖn ®ång bé cïng lóc khi cã sù thay ®æi x¶y ra. \n\ni h¹n chø kh«ng göi toµn bé b¶ng ®Þnh tuyÕn. Nhê vËy nã chØ tèn mét l−îng \n\ng th«ng tèi thiÓu khi hÖ thèng m¹ng ®· æn ®Þnh. §iÒu nµy t−¬ng tù nh− ho¹t \n\ng cËp nhËt cña OSPF, nh−ng kh«ng gièng nh− router OSPF, router EIGRP chØ \ni th«ng tin cËp nhËt mét phÇn cho router nµo cÇn th«ng tin ®ã mµ th«i, chø kh«ng \n\ni cho mäi router kh¸c trong vïng nh− OSPF. ChÝnh v× vËy mµ ho¹t ®éng cËp nhËt \n EIGRP gäi lµ cËp nhËt giíi h¹n. Thay v× ho¹t ®éng cËp nhËt theo chu kú, c¸c \n\nlo theo ®Þnh kú kh«ng chiÕm nhiÒu b¨ng th«ng ®−êng truyÒn.  \n\n IPX RIP vµ SAP ®Ó c¶i tiÕn ho¹t ®éng toµn diÖn. Trªn thùc tÕ, EIGRP cã thÓ \nu khiÓn hai giao thøc nµy. Router EIGRP nhËn th«ng tin ®Þnh tuyÕn vµ dÞch vô, \n\n cËp nhËt cho c¸c router kh¸c khi th«ng tin trong b¶ng ®Þnh tuyÕn hay b¶ng SAP \n\ny ®æi. \n\nRP cßn cã thÓ ®iÒu khiÓn  giao thøc Apple Talk Routing Table Maintenance \ntocol (RTMP). RTMP sö dông sè l−îng hop ®Ó chän ®−êng nªn kh¶ n¨ng chän \n\nng kh«ng ®−îc tèt \n\n\n\n 289\n\ncÊu\n\ntuy\ntuy\n\ntin ®Þnh tuyÕn Apple Talk khi cã sù kiÖn thay ®æi mµ th«i. Tuy nhiªn, Apple Talk \ncli\n\ncho\nWA\n\n3.1\n\nEIG\n\nc¸c chøc n¨ng so víi IGRP vµ c¸c giao thøc ®Þnh tuyÕn kh¸c. C¸c kü thuËt nµy \n\n®−îc tËp trung thµnh 4 lo¹i nh− sau: \n\n\u2022 T\n\n\u2022 CÊu tróc tõng phÇn theo giao thøc (PDMs \u2013 Protocol-dependent modules). \n\nRo\nhÖ \n\nmulticast c¸c th«ng tin cËp nhË −îc cÊu h×nh. Ng−îc l¹i, \nEIG\n\ntù n\n\n h×nh ®−îc ®Ó chän ®−êng tèt nhÊt cho m¹ng Apple Talk. Lµ mét giao thøc ®Þnh \n\nÕn theo vect¬ kho¶ng c¸ch, RTMP thùc hiÖn trao ®æi toµn bé th«ng tin ®Þnh \nÕn theo chu kú. §Ó gi¶m bít sù qu¸ t¶i nµy, EIGRP thùc hiÖn ph©n phèi th«ng \n\nent còng muèn nhËn th«ng tin RTMP tõ c¸c router néi bé, do ®ã EIGRP dïng \n\n Apple Talk chØ nªn ch¹y trong m¹ng kh«ng cã client, vÝ dô nh− c¸c liªn kÕt \nN ch¼ng h¹n. \n\n.4. C¸c kü thuËt cña EIGRP \n\nRP cã rÊt nhiÒu kü thuËt míi ®Ó c¶i tiÕn hiÖu qu¶ ho¹t ®éng, tèc ®é héi tô vµ \n\n\u2022 Sù ph¸t hiÖn vµ t¸i ph¸t hiÖn c¸c router l¸ng giÒng. \n\n\u2022 Giao thøc truyÒn t¶i tin cËy (RTD \u2013 Reliable Transport Protocol). \n\nhuËt to¸n DUAL finite \u2013 state machine. \n\nuter ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch d¹ng ®¬n gi¶n kh«ng thiÕt lËp mèi quan \nvíi c¸c l¸ng giÒng cña nã. RIP vµ IGRP router chØ ®¬n gi¶n lµ ph¸t qu¶ng b¸ hay \n\nt cña nã ra mäi cæng ®· ®\nRP router chñ ®éng thiÕt lËp mèi quan hÖ víi c¸c l¸ng giÒng cña chóng, t−¬ng \n\nh− c¸ch lµm cña OSPF router. \n\n\n\n 290\n\n \n\n\n\n 291\n\n \n\nH×nh 3.1.4 \n\nQu¸ tr×nh EIGRP router thiÕt lËp mèi quan hÖ th©n mËt ®−îc m« t¶ trong h×nh \n\n3.1\n\nSö \n\nc¸c router l¸ng giÒng. MÆc ®Þnh, hello ®−îc göi ®i theo chu kú lµ 5 gi©y. NÕu router \nvÉn\n\n®i \nthùc hiÖn ®−îc nh÷ng viÖc sau: \n\n.4. EIGRP router \n\ndông c¸c gãi hello rÊt nhá ®Ó thùc hiÖn viÖc thiÕt lËp mèi quan hÖ th©n mËt víi \n\n nhËn ®−îc hello tõ l¸ng giÒng th× nã sÏ xem nh− l¸ng giÒng nµy vµ c¸c ®−êng \n\ncña nã vÉn ho¹t ®éng. B»ng c¸ch thiÕt lËp mèi quan hÖ nµy, EIGRP router cã thÓ \n\n\n\n 292\n\n\u2022 Tù ®éng häc ®−îc ®−êng míi khi chóng kÕt nèi vµo hÖ thèng m¹ng. \n\n\u2022 X¸c ®Þnh mét router kh«ng cßn kÕt nèi hoÆc kh«ng cßn ho¹t ®éng n÷a. \n\n\u2022 Ph¸t hiÖn sù ho¹t ®éng trë l¹i cña c¸c router. \n\nGiao thøc vËn chuyÓn tin cËy RTP (Reliable Transport Protocol) lµ giao thøc ë líp \n\nvËn chuyÓn, thùc hiÖn viÖc chuyÓn gãi EIGRP mét c¸ch tin cËy vµ cã thø tù ®Õn tÊt \nc¶ c¸c l¸ng giÒng. Trong m¹ng IP, host sö dông TCP ®Ó vËn chuyÓn c¸c gãi mét \n\nc¸ch tuÇn tù vµ tin cËy. Tuy nhiªn, EIGRP lµ mét giao thøc ®éc lËp víi giao thøc \nm¹ng, do ®ã nã kh«ng dùa vµo TCP/IP ®Ó thùc hiÖn trao ®æi th«ng tin ®Þnh tuyÕn \n\ngièng nh− RIP, IGRP vµ OSPF ®· lµm. §Ó kh«ng bÞ phô thuéc vµo IP, EIGRP sö \ndông RTP lµm giao thøc vËn chuyÓn riªng ®éc quyÒn cña nã ®Ó ®¶m b¶o viÖc \n\ntruyÒn tin ®Þnh tuyÕn. \n\nEIGRP cã thÓ yªu cÇu RTP cung cÊp dÞch vô truyÒn tin cËy hoÆc kh«ng tin cËy tuú \n\ntheo yªu cÇu cña tõng tr−êng hîp. VÝ dô, c¸c gãi hello ®−îc truyÒn theo ®Þnh kú vµ \ncÇn ph¶i cµng nhá cµng tèt nªn chón h¶i dïng chÕ ®é truyÒn tin cËy. \n\nNg îc l¹i, viÖc truyÒn tin cËy c¸c th«ng tin ®Þnh tuyÕn sÏ cã thÓ lµm t¨ng tèc ®é \n\nhéi tô v× EIGRP router kh«ng cÇn chê hÕt thêi h¹n míi truyÒn l¹i. \n\nVí\nmé\n\nTh\n(DU\n\nDU\nph¶ Ý cã c¸c thµnh phÇn di chuyÓn ®−îc. FSM ®Þnh nghÜa mét \n\ntËp hîp c¸c tr¹ng th¸i cã thÕ tr¶i qua, sù kiÖn nµo g©y ra tr¹ng th¸i nµo vµ sÏ cã kÕt \nqu¶ g×. Ng−êi thiÕt kÕ sö dông FSM ®Ó lËp tr×nh c¸ch mµ mét thiÕt bÞ, mét ch−¬ng \n\ntr×nh m¸y tÝnh hay mét thuËt to¸n ®Þnh tuyÕn sÏ xö lý nh− thÕ nµo víi mét tËp hîp \n\nc¸c d÷ liÖu ®Çu vµo. DUAL FSM chøa tÊt c¶ c¸c logic ®−îc sö dông ®Ó tÝnh to¸n vµ \nso GRP. \n\nDU\n\n®Þn\n\nthÊ\n\ng kh«ng cÇn p\n\n−\n\ni RTP, EIGRP cã thÓ gñi multicast vµ trùc tiÕp cho c¸c ®èi t¸c kh¸c nhau cïng \nt lóc, gióp tèi −u hiÖu qu¶ ho¹t ®éng. \n\nµnh phÇn trung t©m cña EIGRP lµ thuËt to¸n Diffusing Update Algorithm \nAL), lµ bé m¸y tÝnh to¸n ®−êng ®i cña EIGRP. Tªn ®Çy ®ñ cña kü thuËt nµy lµ \n\nAL finite-state machine (FSM). FSM lµ mét bé m¸y thuËt to¸n nh−ng kh«ng \ni lµ mét thiÕt bÞ c¬ kh\n\ns¸nh ®−êng ®i trong m¹ng EI\n\nAL l−u tÊt c¶ c¸c ®−êng ®i mµ l¸ng giÒng th«ng b¸o qua. Dùa trªn th«ng sè \n\nh tuyÕn tæng hîp cña mçi ®−êng, DUAL so s¸nh vµ chän ra ®−êng cã chi phÝ \n\np nhÊt ®Õn ®Ých. DUAL ®¶m b¶o mçi mét ®−êng nµy lµ kh«ng cã lÆp vßng. \n\n\n\n 293\n\n§−\n\nb¨n\n\nEIG\ngiÒ\n\n®−ê\n\nthÕ\n\nMé\nriªn µy, nã cã kh¶ n¨ng më réng vµ t−¬ng thÝch \n\ntèt \nEIG\n\ntuy  c¸ch thªm \n\nPDM vµo. \n\nMçi PDM chÞu tr¸ch nhiÖm thùc hiÖn mäi chøc n¨ng liªn quan ®Õn mét giao thøc \n®−îc ®Þnh tuyÕn. VÝ dô phÇn IP- EIGRP chÞu tr¸ch nhiÖm c¸c viÖc sau: \n\n\u2022 Göi vµ nhËn c¸c gãi EIGRP chøa d÷ liÖu IP. \n\n\u2022 Th«ng b¸o cho DUAL khi nhËn ®−îc th«ng tin ®Þnh tuyÕn IP míi. \n\n\u2022 Duy tr× kÕt qu¶ chän ®−êng cña DUAL trong b¶ng ®Þnh tuyÕn IP. \n\n\u2022 Ph©n phèi th«ng tin ®Þnh tuyÕn mµ nã häc ®−îc tõ c¸c giao thøc ®Þnh tuyÕn \nIP kh¸c. \n\n3.1.5. CÊu tróc d÷ liÖu cña EIGRP \n\nGiè\nlo¹\n\nCã\n\n\u2022 Yªu cÇu. \n\nêng chÝnh ®−îc chän ra gäi lµ ®−êng successor. §−êng successor ®−îc l−u trªn \n\ng ®Þnh tuyÕn vµ ®ång thêi còng ®−îc l−u trong b¶ng cÊu tróc m¹ng. \n\nRP gi÷ c¸c th«ng tin quan träng vÒ ®−êng ®i vµ cÊu tróc m¹ng trong b¶ng l¸ng \nng vµ b¶ng cÊu tróc m¹ng. Hai b¶ng nµy cung cÊp cho DUAL c¸c th«ng tin vÒ \n\nng ®i khi cÇn thiÕt. NÕu cã mét ®−êng liªn kÕt bÞ ®øt, DUAL sÏ t×m ®−êng thay \n\n hoÆc mét feasible successor trong b¶ng cÊu tróc mang. \n\nt trong nh÷ng −u ®iÓm næi bËt cña EIGRP lµ nã ®−îc thiÕt kÕ thµnh tõng phÇn \ng biÖt theo giao thøc. Nhê cÊu tróc n\n\nnhÊt. C¸c giao thøc ®−îc ®Þnh tuyÕn nh− IP, IPX vµ Apple Talk ®−îc ®−a vµo \nRP th«ng qua c¸c PDM. EIGRP cã thÓ dÔ dµng t−¬ng thÝch víi giao thøc dÞnh \n\nÕn míi hoÆc c¸c phiªn b¶n míi cña chóng nh− IPv6 ch¼ng h¹n b»ng\n\nng nh− OSPF, EIGRP dùa vµo nhiÒu lo¹i gãi d÷ liÖu kh¸c nhau ®Ó duy tr× c¸c \ni b¶ng cña nã vµ thiÕt lËp mèi quan hÖ phøc t¹p víi router l¸ng giÒng. \n\n 5 lo¹i gãi EIGRP: \n\n\u2022 Hello. \n\n\u2022 B¸o nhËn. \n\n\u2022 CËp nhËt. \n\n\n\n 294\n\n\u2022 §¸p øng. \n\nEIG\ngiÒ\n\nl¸n\nl¹i \n\nCh hêi gian hello \nmÆ b¨ng th«ng trªn tõng cæng cña router. Trong m¹ng IP, \n\nEIGRP router göi hello theo ®Þa multicast 224.0.0.10. \n\nEIGRP router l−u th«ng tin vÒ c¸c l¸ng giÒng trong b¶ng l¸ng giÒng. B¶ng l¸ng \n\ngiÒ  tù (Seq No) vµ thêi gian l−u gi÷ cña gãi EIGRP cuèi cïng \nnhË giÒng. Theo ®Þnh kú vµ trong giíi h¹n cña kho¶ng \n\nthêi gian l−u gi÷, router ph¶i nhËn ®−îc gãi EIGRP th× nh÷ng ®−êng t−¬ng øng míi \ncã \n\nNÕ\ngia\n\nto¸\nhel\n\nhîp\n\nRP dùa vµo c¸c gãi hello ®Ó ph¸t hiÖn, kiÓm tra vµ t¸i ph¸t hiÖn c¸c router l¸ng \nng. T¸i ph¸t hiÖn cã nghÜa lµ router EIGRP kh«ng nhËn ®−îc hello tõ mét router \n\ng giÒng trong suèt kho¶ng thêi gian l−u gi÷ nh−ng sau ®ã router l¸ng giÒng nµy \nt¸i lËp l¹i th«ng tin liªn l¹c. \n\nu kú göi hello cña EIGRP router cã thÓ cÊu h×nh ®−îc. Kho¶ng t\nc ®Þnh phô thuéc vµo \n\nng nµy cã l−u sè thø\nn ®−îc tõ mçi router l¸ng \n\ntr¹ng th¸i Passive. Tr¹ng th¸i Passive cã nghÜa lµ tr¹ng th¸i ho¹t ®éng æn ®Þnh. \n\nu router kh«ng nghe ngãng ®−îc g× vÒ router l¸ng giÒng trong suèt kho¶ng thêi \nn l−u gi÷ th× EIGRP sÏ xem nh− l¸ng giÒng ®ã ®· bÞ sù cè vµ DUAL ph¶i tÝnh \n\nn l¹i b¶ng ®Þnh tuyÕn. MÆc ®Þnh, kho¶ng thêi gian l−u gi÷ gÊp 3 lÇn chu kú \nlo. Ng−êi qu¶n trÞ m¹ng cã thÓ cÊu h×nh gi¸ trÞ cho 2 kho¶ng thêi gian nµy phï \n\n h¬n víi hÖ thèng cña m×nh. \n\n \n\nH×nh 3.1.5 \n\nOSPF b¾t buéc c¸c router l¸ng giÒng víi nhau ph¶i cã cïng kho¶ng thêi gian hello \n\nvµ kho¶ng thêi gian bÊt ®éng th× míi cã thÓ th«ng tin liªn l¹c víi nhau ®−îc. \n\nEIGRP th× kh«ng yªu cÇu nh− vËy. Router sÏ häc c¸c kho¶ng thêi gian cña router \nl¸ng giÒng th«ng qua viÖc trao ®æi gãi hello. Chóng sÏ dïng th«ng tin trong ®ã ®Ó \n\n\n\n 295\n\nthiÕt lËp mèi quan hÖ æn ®Þnh mµ kh«ng cÇn c¸c kho¶ng thêi gian nµy ph¶i gièng \n\nnhau gi÷a chóng. \n\nGãi hello th−êng ®−îc göi theo chÕ ®é kh«ng b¶o ®¶m tin cËy. §iÒu nµy cã nghÜa \nlµ kh«ng cã b¸o nhËn cho c¸c gãi hello. \n\nEIGRP router sö dông gãi b¸o nhËn ®Ó x¸c nhËn lµ ®· nhËn ®−îc gãi EIGRP trong \nqu¸ tr×nh trao ®æi tin cËy. Giao thøc vËn chuyÓn tin cËy (RTP \u2013 Reliable Transport \n\nProtocol) cung cÊp dÞch vô liªn l¹c tin cËy gi÷a hai host EIGRP. Gãi b¸o nhËn \nchÝnh lµ gãi hello mµ kh«ng cã d÷ liÖu. Kh«ng gièng nh− hello ®−îc göi multicast, \n\nc¸c gãi b¸o nhËn chØ göi trùc tiÕp cho mét m¸y nhËn. B¸o nhËn cã thÓ ®−îc kÕt hîp \nvµo lo¹i gãi EIGRP kh¸c nh− gãi tr¶ lêi ch¼ng h¹n. \n\nGãi cËp nhËt ®−îc sö dông khi router ph¸t hiÖn mét l¸ng giÒng míi. Router EIGRP \nsÏ göi gãi g cÊu \n\ntróc m¹ng. Cã thÓ sÏ cÇn nhiÒu gãi cËp nhËt míi cã thÓ truyÒn t¶i hÕt c¸c th«ng tin \ncÊu tróc m¹ng cho router l¸ng giÒng míi nµy. \n\nGã hi router ph¸t hiÖn sù thay ®æi trong cÊu tróc \nm¹\n\nrou\ngöi\n\nEIGRP router sö dông gãi yªu cÇu khi nã cÇn\nhay nhiÒu l¸ng giÒng cña nã. Gãi ®¸p øng ®−îc sö dông ®Ó tr¶ lêi cho c¸c gãi yªu \n\ncÇu\n\nNÕ\n\ntha\n®ã ng t×m \n\nsuc\n®Ó \n\nGã hØ göi cho mét m¸y, cßn gãi ®¸p øng \nth× chØ göi\n\n®¶m\n\n3.1.6. ThuËt to¸n EIGRP \n\n cËp nhËt cho router l¸ng giÒng míi nµy ®Ó nã cã thÓ x©y dùng b¶n\n\ni cËp nhËt cßn ®−îc sö dông k\nng. Trong tr−êng hîp nµy, EIGRP router sÏ göi multicast gãi cËp nhËt cho mäi \n\nter l¸ng giÒng cña nã ®Ó th«ng b¸o vÒ sù thay ®æi. Mäi gãi cËp nhËt ®Òu ®−îc \n b¶o ®¶m. \n\n mét th«ng tin ®Æc biÖt nµo ®ã tõ mét \n\n. \n\nu mét EIGRP router mÊt successor vµ nã kh«ng t×m ®−îc feasible successor ®Ó \n\ny thÕ th× DUAL sÏ ®Æt con ®−êng ®Õn m¹ng ®Ých ®ã vµo tr¹ng th¸i Active. Sau \nrouter göi multicast gãi yªu cÇu ®Õn tÊt c¶ c¸c l¸ng giÒng ®Ó cè g¾\n\ncessor míi cho m¹ng ®Ých nµy. Router l¸ng giÒng ph¶i tr¶ lêi b»ng gãi ®¸p øng \ncung cÊp th«ng tin hoÆc cho biÕt lµ kh«ng cã th«ng tin nµo kh¸c cã thÓ kh¶ thi. \n\ni yªu cÇu cã thÓ ®−îc göi multicast hoÆc c\n cho m¸y nµo göi yªu cÇu mµ th«i. C¶ hai lo¹i gãi nµy ®Òu ®−îc göi b¶o \n\n. \n\n\n\n 296\n\nTh\n\ntr×n\ncÊu\n\nMç  th«ng tin sau: \n\nNguyªn t¾c chän ®−êng Feasible successor: \n\na mét ®−êng ®Õn mét ®Ých nµo ®ã lµ chi phÝ \n\nn thiÕt. \n\n−êng lín h¬n hoÆc b»ng FD cña successor hiÖn t¹i th× \nîc chän lµm feasible successor. \n\ng c¸ch thu nh©p th«ng tin tõ tÊt c¶ \n\nl¸ng giÒng ®Ó t×m th«ng tin vÒ ®−êng \n\n®i vµ chi phÝ cña ®−êng ®ã ®Õn m¹ng ®Ých mµ router ®ang cÇn . \n\nuËt to¸n DUAL phøc t¹p gióp cho EIGRP héi tô nhanh. §Ó hiÓu râ h¬n vÒ qu¸ \n\nh héi tô víi DUAL, ta xÐt vÝ dô ë h×nh 3.1.6a. Mçi router x©y dùng mét b¶ng \n tróc m¹ng chøa c¸c th«ng tin vÒ ®−êng ®i ®Õn m¹ng A. \n\ni b¶ng cÊu tróc m¹ng trong vÝ dô ë c¸c h×nh 3.1.6.a-f cã c¸c\n\n\u2022 Giao thøc ®Þnh tuyÕn lµ giao thøc EIGRP. \n\n\u2022 Chi phÝ thÊp nhÊt cña ®−êng ®Õn mét m¹ng ®Ých gäi lµ Feasible Distance \n(FD). \n\n\u2022 Chi phÝ cña mét ®−êng ®Õn mét m¹ng ®Ých do router l¸ng giÒng th«ng b¸o \nqua gäi lµ Reported Distance (RD). \n\n1. §−êng feasible successor lµ ®−êng dù phßng, thay thÕ cho ®−êng successor \nkhi ®−êng nµy bÞ sù cè. \n\n2. Reported Distance (RD) cñ\n®−îc th«ng b¸o tõ mét router l¸ng giÒng. Chi phÝ nµy ph¶i nhá h¬n Feasible \nDistance (FD) cña ®−êng successor hiÖn t¹i. \n\n3. NÕu tho¶ m·n ®iÒu kiÖn trªn th× cã nghÜa lµ kh«ng cã vßng lÆp, ®−êng ®ã sÏ \n®−îc chän lµm feasible successor \n\n4. §−êng feasible succesor cã thÓ thay thÕ cho ®−êng successor khi cÇ\n\n5. NÕu RD cña mét ®\n®−êng ®ã kh«ng ®−\n\n6. Router ph¶i tÝnh to¸n cÊu tróc m¹ng b»n\nc¸c l¸ng giÒng. \n\n7. Router göi gãi yªu cÇu ®Õn tÊt c¶ c¸c \n\n8. TÊt c¶ c¸c l¸ng giÒng ph¶i göi gãi ®¸p øng ®Ó tr¶ lêi cho gãi yªu cÇu. \n\n9. Router ghi nhËn gi÷ liÖu míi nhËn ®−îc vµo b¶ng cÊu tróc m¹ng cña m×nh. \n\n10.  B©y giê DUAL ®· cã thÓ x¸c ®Þnh ®−êng successor míi vµ feasible \n\n\n\n 297\n\nsuccessor míi nÕu cã dùa vµo th«ng tin míi. \n\n \n\n \n\nH×nh 3.1.6.a \n\nCé y trong h×nh cho biÕt ®−êng nµo lµ ®−êng chÝnh hay cßn gäi lµ \n\nsuccessor, ®\nTu îc feasible \n\nsuc\n\nM¹ng E i÷a \n\nc¸c router. HiÖn t¹i c¸c router cã c¸c th«ng tin vÒ ®−êng ®Õn m¹ng A nh− sau: \n\n cã ®−êng feasible successor. \n\nt Topolog\n\n−êng nµo lµ ®−êng dù phßng hay cßn gäi lµ feasible successor (FS). \ny nhiªn, b¹n cÇn l−u ý lµ kh«ng nhÊt thiÕt lóc nµo còng ph¶i t×m ®−\n\ncessor. \n\nIGRP sÏ ho¹t ®éng theo c¸c b−íc m« t¶ bªn d−íi ®Ó tiÕn hµnh héi tô g\n\n\u2022 Router C cã mét ®−êng successor lµ ®−êng qua Router B. \n\n\u2022 Router C cã mét ®−êng feasible successor lµ ®−êng qua Router D. \n\n\u2022 Router D cã mét ®−êng successor lµ ®−êng qua Router B. \n\n\u2022 Router D kh«ng cã ®−êng feasible successor. \n\n\u2022 Router E cã mét ®−êng successor lµ ®−êng qua Router D. \n\n\u2022 Router E kh«ng\n\n\n\n 298\n\nSau\n\nnµo\n\n ®©y sÏ m« t¶ mçi router thùc hiÖn nguyªn t¾c chän feasible successor nh− thÕ \n\n khi ®−êng liªn kÕt gi÷a Router D vµ Router B bÞ ®øt: \n\n \n\nH×nh 3.1.6b \n\nTrong Router D (h×nh 3.1.6b): \n\n\u2022 §−êng ®i qua Router B bÞ xo¸ khái b¶ng cÊu tróc m¹ng. \n\n\u2022 §−êng nµy lµ ®−êng successor. Router kh«ng x¸c ®Þnh ®−îc feasible \nsuccessor tr−íc ®ã. \n\n\u2022 Router D ph¶i tÝnh to¸n l¹i ®−êng míi. \n\nTrong Router C: \n\n\u2022 §−êng ®Õn M¹ng A qua Router D bÞ ®øt. \n\n\u2022 §−êng nµy bÞ xo¸ khái b¶ng. \n\n\u2022 §−êng nµy lµ successor cña Router C. \n\n \n\n\n\n 299\n\n \n\nH×nh 3.1.6.c \n\nsible successor. Do ®ã, nã kh«ng thÓ chuyÓn qua \n\nªu cÇu cho tÊt c¶ c¸c l¸ng giÒng kÕt nèi víi nã lµ Router \n\nTrong Router E: \n\n\u2022 §−êng ®Õn M¹ng A th«ng qua Router D bÞ ®øt. \n\n\u2022 §−êng nµy lµ ®−êng successor cña Router E. \n\n\u2022 Router E kh«ng cã feasible successor. \n\nTrong router D (h×nh 3.1.6.c): \n\n\u2022 Router D kh«ng cã fea\n®−êng dù phßng ®−îc. \n\n\u2022 Router D ph¶i tÝnh to¸n l¹i cÊu tróc m¹ng. Con ®−êng ®Õn M¹ng A ®−îc ®Æt \nvoµ tr¹ng th¸i Active. \n\n\u2022 Router D göi gãi y\nC vµ Router E ®Ó yªu cÇu göi th«ng tin vÒ m¹ng. \n\n\u2022 Tr−íc ®ã, Router C cã ®−êng qua Router D. \n\n\u2022 Tr−íc ®ã, Router D kh«ng cã ®−êng qua Router E. \n\n\n\n 300\n\n\u2022 L−u ý r»ng RD cña ®−êng th«ng qua Router C lµ 3, b»ng víi chi phÝ cña \n®−êng successor qua Router D. \n\n \n\n \n\n \n\nH×nh 3.1.6.d \n\nTrong Router C (h×nh 3.1.6.d): \n\n\u2022 Router E göi gãi yªu cÇu cho Router C. \n\n\u2022\n\nr¶ lêi cho Router D ®Ó x¸c nhËn lµ ®−êng ®Õn M¹ng A ®ang ho¹t \n\n®éng víi chi phÝ lµ 5. \n\n\u2022 Router D vÉn ®ang chê ®¸p øng tõ Router E. \n\n Router C xo¸ ®−êng qua Router E khái b¶ng. \n\n\u2022 Router C tr¶ lêi cho Router D víi th«ng tin vÒ ®−êng míi ®Õn M¹ng A. \n\nTrong Router D: \n\n\u2022 Tr¹ng th¸i cña ®−êng ®Õn M¹ng A vÉn lµ Active v× c«ng viÖc tÝnh to¸n ch−a \nhoµn tÊt. \n\n\u2022 Router C t\n\n\n\n 301\n\nTrong Router E: \n\n\u2022 Router E kh«ng cã feasible successor ®Õn m¹ng A. \n\n\u2022 Do ®ã, Router E ®¸nh dÊu tr¹ng th¸i con ®−êng ®Õn M¹ng A lµ Active. \n\n\u2022 Router E ph¶i tÝnh to¸n l¹i cÊu tróc m¹ng. \n\n\u2022 Router E xo¸ ®−êng ®i qua Router D ra khái b¶ng. \n\n\u2022 Router E göi gãi yªu cÇu cho Router C ®Ó yªu cÇu th«ng tin vÒ m¹ng. \n\n\u2022 Tr−íc ®ã, Router E ®· cã th«ng tin vÒ ®−êng ®i qua Router C. §−êng nµy cã \nchi phÝ lµ 3, b»ng víi chi phÝ cña ®−êng successor. \n\n \n\nH×nh 3.1.6.e \n\nTrong Router E (h×nh 3.1.6.e): \n\n\u2022 Router C tr¶ lêi l¹i th«ng tin vÒ ®−êng ®Õn M¹ng A cã RD lµ 3. \n\n\u2022 B©y giê Router E cã thÓ chän ®−êng th«ng qua Router C lµm successor míi \n\nng th¸i cña ®−êng ®Õn M¹ng A ®−îc ®æi tõ Active sang Passive. L−u ý: \nllo \n\nvíi FD lµ 4 vµ RD lµ 3. \n\n\u2022 Tr¹\ntr¹ng th¸i Passive lµ tr¹ng th¸i mÆc ®Þnh khi router vÉn nhËn ®−îc gãi he\n\n\n\n 302\n\ntõ tr¹ng th¸i ®ã. Do ®ã trong vÝ dô nµy chØ cÇn ®¸nh dÊu tr¹ng th¸i Active \n\nth«i. \n\n \n\n \n\nH×nh 3.1.6.f \n\nTrong Router E (h×nh 3.1.6.f): \n\ncña \n\n\u2022 Router D nhËn ®−îc gãi håi ®¸p tõ Router E víi nh÷ng th«ng tin vÒ m¹ng \ncña Router E. \n\n\u2022 Router D ghi nhËn con ®−êng ®Õn M¹ng A th«ng qua Router E. \n\n\u2022 Con ®−êng nµy trë thµnh mét ®−êng successor n÷a v× nã cã chi phÝ b»ng víi \n®−êng th«ng qua Router C vµ nã cã RD nhá h¬n FD cña ®−êng th«ng qua \n\nRouter C. \n\nQu¸ tr×nh héi tô x¶y ra gi÷a mäi router EIGRP sö dông thuËt to¸n DUAL. \n\n\u2022 Router E göi ®¸p øng cho Router D ®Ó cung cÊp th«ng tin vÒ m¹ng \nRouter E. \n\nTrong Router D: \n\n\n\n 303\n\n3.2. CÊu h×nh EIGRP \n\n3.2.1. CÊu h×nh EIGRP \n\nTrõ thuËt to¸n DUAL lµ phøc t¹p, cßn cÊu h×nh EIGRP th× kh¸ ®¬n gi¶n. Tuú theo \ngiao thøc ®−îc ®Þnh tuyÕn lµ IP, IPX hay Apple Talk mµ c©u lÖnh cÊu h×nh EIGRP \n\nsÏ kh¸c nhau. PhÇn sau ®©y chØ ®Ò cËp ®Õn cÊu h×nh EIGRP cho giao thøc IP. \n\n \n\n \n\n \n\nH×nh 3.2.1 \n\n \n\nSau ®©y lµ c¸c b−íc cÊu h×nh EIGRP cho IP: \n\n1. Sö dông lÖnh sau ®Ó khëi ®éng EIGRP vµ x¸c ®Þnh con sè cña hÖ tù qu¶n: \n\nrouter(config)#router eigrp autonomous-system-number \n\nTh«ng sè autonomous-system-number x¸c ®Þnh c¸c router trong mét hÖ tù qu¶n. \nNh÷ng router nµo trong cïng mét hÖ thèng m¹ng th× ph¶i cã con sè nµy gièng \n\nnhau. \n\n\n\n 304\n\n2. Khai b¸o nh÷ng m¹ng nµo cña router mµ b¹n ®ang cÊu h×nh thuéc vÒ hÖ tù qu¶n \n\nEIGRP: \n\nrouter(config-router)#network network-number \n\nTh«ng sè network-number lµ ®Þa chØ m¹ng cña c¸c cæng giao tiÕp trªn router thuéc \nvÒ hÖ thèng m¹ng EIGRP. Router sÏ thùc hiÖn qu¶ng c¸o th«ng tin vÒ nh÷ng m¹ng \n\n®−îc khai b¸o trong c©u lÖnh network nµy. \n\nB¹n chØ khai b¸o nh÷ng m¹ng nµo kÕt nèi trùc tiÕp vµo router mµ th«i. VÝ dô trªn \n\nh×nh 3.2.1, m¹ng 3.1.0.0 kh«ng kÕt nèi vµo Router A nªn khi cÊu h×nh EIGRP cho \nRouter A chóng ta kh«ng khai b¸o m¹ng 3.1.0.0. \n\n3. Khi cÊu h×nh cæng serial ®Ó sö dông trong EIGRP, viÖc quan träng lµ cÇn ®Æt \nb¨ng th«ng cho cæng nµy. NÕu chóng ta kh«ng thay ®æi b»ng th«ng cña cæng, \n\nEIGRP sÏ sö dông b¨ng th«ng mÆc ®Þnh cña cæng thay v× b¨ng th«ng thùc sù. NÕu \n®−êng kÕt nèi thùc sù chËm h¬n, router cã thÓ kh«ng héi tô ®−îc, th«ng tin ®Þnh \n\ntuyÕn cËp nhËt cã thÓ bÞ mÊt hoÆc lµ kÕt qu¶ chän ®−êng kh«ng tèi −u. §Ó ®Æt b¨ng \nth«ng cho mét cæng serial trªn router, b¹n dïng c©u lÖnh sau trong chÕ ®é cÊu h×nh \n\nn \n\nóng víi tèc ®é cña cæng. \n\nã sù thay ®æi \n\ncña c¸c router l¸ng giÒng th©n mËt gióp chóng ta theo dâi sù æn ®Þnh cña hÖ thèng \nsù cè nÕu cã. \n\n3.2.2. CÊu h×nh ®−êng tæng hîp cho EIGRP \n\nEIGRP tù ®éng tæng hîp c¸c ®−êng l¹i theo líp ®Þa chØ. VÝ dô nh− h×nh 3.2.2a, \n\nRTC chØ kÕt nèi vµo m¹ng con 2.1.1.0 nh−ng nã sÏ ph¸t qu¶ng c¸o lµ nã kÕt nèi \n\ncña cæng ®ã: \n\nrouter(config-if)#bandwidth kilobits \n\nGi¸ trÞ b¨ng th«ng khai trong lÖnh bandwidth chØ ®−îc sö dông tÝnh to¸n cho tiÕ\ntr×nh ®Þnh tuyÕn, gi¸ trÞ nµy nªn khai ®\n\n4. Cisco cßn khuyÕn c¸o nªn thªm c©u lÖnh sau trong cÊu h×nh EIGRP: \n\nrouter(config-if)#eigrp log-neighbor-changes \n\nC©u lÖnh nµy sÏ lµm cho router xuÊt ra c¸c c©u th«ng b¸o mçi khi c\n\n®Þnh tuyÕn vµ ph¸t hiÖn ®−îc \n\n\n\n 305\n\nvµo m¹ng líp A 2.0.0.0. Trong hÇu hÕt c¸c tr−êng hîp, viÖc tù ®éng tæng hîp nµy \n\ncã −u ®iÓm lµ gióp cho b¶ng ®Þnh tuyÕn ng¾n gän. \n\n \n\nH×nh 3.2.2.a. EIGRP tù ®éng tæng hîp ®−êng ®i theo líp cña ®Þa chØ IP \n\nuy nhiªn, trong mét sè tr−êng hîp b¹n kh«ng nªn sö dông chÕ ®é tù ®éng tæng \n\nÝ dô trong m¹ng cã s¬ ®å ®Þa chØ kh«ng liªn tôc th× chÕ ®é nµy \nph¶i t¾t ®i. §Ó t¾t chÕ ®é tù ®éng tæng hîp ®−êng ®i, b¹n dïng c©u lÖnh sau: \n\nouter(config-router)#no auto-summary \n\nT\n\nhîp ®−êng ®i nµy. V\n\nr\n\n \n\nH×n iªn tôc (hai subnet/24 bÞ ng¾t chÝnh h 3.2.2.b. M¹ng cã s¬ ®å ®Þa chØ kh«ng l\ngi÷a bëi mét subnet/30) víi chÕ ®é tæng hîp ®−êng ®i \n\n \n\nH×nh 3.2.2.c. M¹ng cã s¬ ®å ®Þa chØ kh«ng liªn tôc cã c©u lÖnh no auto-summary. \nKhi chÕ ®é tù ®éng tæng hîp ®−êng ®i bÞ t¾t, router sÏ qu¶ng c¸o tõng subnet \n\n\n\n 306\n\n \n\nH×nh 3.2.2.d. ViÖc tæng hîp ®−êng ®i cña EIGRP cã thÓ ®−îc cÊu h×nh trªn tõng \ncæng cña router \n\ncña router víi giíi h¹n tæ  ®éng tæng hîp theo líp \n\ncña ®Þa chØ IP. Sau khi khai b¸o ®Þa chØ tæng hîp cho mét cæng cña router, router sÏ \nh¸t qu¶ng c¸o ra cæng ®ã c¸c ®Þa chØ ®−îc tæng hîp nh− mét c©u lÖnh ®· cµi ®Æt. \n\nÞa chØ tæng hîp ®−îc khai b¸o b»ng lÖnh ip summary-address eigrp nh− sau:  \n\nRouter(config-if)#ip summary-address eigrp autonomous-system-number ip-\naddress mask administrative-distance \n\n§−êng tæng hîp cña EIGRP cã chØ sè mÆc ®Þnh cña ®é tin cËy (administrative-\ndistance) lµ 5. Tuy nhiªn, b¹n cã thÓ khai b¸o gi¸ trÞ cho chØ sè nµy trong kho¶ng tõ \n\n1 ®Õn 255. \n\nXÐt vÝ dô nh− h×nh 3.2.2.d, RTC ®−îc cÊu h×nh nh− sau: \n\nRTC(config)#router eigrp 2446 \n\nRTC(config-route\n\nTC(config)#interface serial 0/0 \n\nRTC(config-if)#ip simmary-address Îigp 2446 2.1.0.0 \n\n255.255.0.0 \n\nVíi EIGRP, viÖc tæng hîp ®−êng ®i cã thÓ ®−îc cÊu h×nh b»ng tay trªn tõng cæng \nng hîp mµ b¹n muèn chø kh«ng tù\n\np\n\n§\n\nRTC(config-router)#no auto-summary \n\nr)#exit \n\nR\n\n\n\n 307\n\nKhi ®ã, RTC sÏ thªm vµo b¶ng ®Þnh tuyÕn cña nã mét ®−êng tæng hîp nh− sau: \n\nD 2.1.0.0/16 is a summary, 00:00:22, Null0 \n\nL−u ý r»ng ®−êng tæng hîp cã nguån lµ Null0 chø kh«ng ph¶i lµ tõ mét cæng cô thÓ \n\nv× ®−êng nµy chØ cã môc ®Ých ®Ó qu¶ng c¸o chø kh«ng ph¶i lµ ®¹i diÖn cho mét \n\n®−êng cô thÓ ®Õn m¹ng ®Ých. Trªn RTC, ®−êng tæng hîp nµy cã chØ sè ®é tin cËy \n(administrative distance) lµ 5. \n\nRTD kh«ng hÒ biÕt ®©y lµ ®−êng tæng hîp nªn nã ghi nhËn th«ng tin vÒ ®−êng nµy \n\ntõ RTC nh− mét ®−êng EIGRP b×nh th−êng víi chØ sè tin cËy mÆc ®Þnh cña EIGRP \n\n 90. \n\nrong cÊu h×nh cña RTC, chÕ ®é tù ®éng tæng hîp ®−êng ®i ®−îc t¾t ®i b»ng lÖnh \n\no auto-summary. NÕu b¹n kh«ng t¾t chÕ ®é tù ®éng tæng hîp nµy th× RTD sÏ \nhËn ®−îc ®ång thêi 2 th«ng tin, mét lµ ®Þa chØ m¹ng tæng hîp theo lÖnh cµi ®Æt ë \n\ntrª P \n\n2\n\nTrong ®a g tay th× \n\n¹n nªn t¾t chÕ ®é tù ®éng tæng hîp b»ng lÖnh no auto-summary. \n\n3.2.3. KiÓm tra ho¹t ®éng cña EIGRP \n\nB¹n sö dông c¸c lÖnh show nh− trong b¶ng 3.2.3.a ®Ó kiÓm tra c¸c ho¹t ®éng cña \nEIGRP. \n\nNgoµi ra, c¸c lÖnh debug lµ nh÷ng lÖnh gióp b¹n theo dâi ho¹t ®éng EIGRP khi \ncÇn thiÕt. \n\nLÖnh Gi¶i thÝch \n\nlµ\n\nT\n\nn\nn\n\nn 2.1.0.0/16 vµ mét lµ ®Þa chØ m¹ng tæng hîp tù ®éng theo líp cña ®Þa chØ I\n\n.0.0.0/8. \n\nsè c¸c tr−êng hîp, khi b¹n muèn cÊu h×nh tæng hîp ®Þa chØ b»n\n\nb\n\nShow ip eigrp \n\nneighbors [type \n] [details] \n\nHiÓn thÞ b¶ng l¸ng giÒng cña EIGRP. Sö dông tham sè type \n\nphÐp hiÓn thÞ t h¬n. \nnumber\n\nnumber ®Ó x¸c ®Þnh cô thÓ cæng cÇn xem. Tõ kho¸ details cho \n th«ng tin chi tiÕ\n\n\n\n 308\n\nShow ip eigrp \n\ninterfaces [type \nnumber] [as-\nnumber] [details] \n\nHiÓn thÞ th«ng tin EIGRP cña c¸c cæng. Sö dông c¸c tham sè \nin nghiªng cho phÐp giíi h¹n phÇn th«ng tin hiÓn thÞ cho tõng \ncæng hoÆc trong tõng AS. Tõ kho¸ details cho phÐp hiÓn thÞ \nth«ng tin chi tiÕt h¬n. \n\nShow ip eigrp \n\ntopology [as- \nnumber] [[ip-\naddress] mask] \n\nHiÓn thÞ tÊt c¶ c¸c feasible successor trong b¶ng cÊu tróc \nm¹ng cña EIGRP. Sö dông c¸c tham sè in nghiªng ®Ó giíi h¹n \nth«ng tin hiÓn thÞ theo sè AS hay theo ®Þa chØ m¹ng cô thÓ. \n\nShow ip eigrp \n\ntopology [active | \npending | zero-\nsuccessors] \n\nTuú theo b¹n sö dông tõ kho¸ nµo, router sÏ hiÓn thÞ th«ng tin \nvÒ c¸c ®−êng ®i ®ang ho¹t ®éng, ®ang chê xö lý hay kh«ng cã \nsuccessor. \n\nShow ip eigrp HiÓn thÞ th«ng tin vÒ m\n\ntopology all-links \n\näi ®−êng ®i chø kh«ng chØ cã feasible \nsuccessor trong b¶ng cÊu tróc EIGRP. \n\nShow ip eigrp HiÓn thÞ sè gãi EIGRP ®· göi ®\n\ntraffic [as-number] B¹n sö dông tham sè as-number ®Ó giíi h¹n th«ng tin hiÓn thÞ \ntrong mét AS cô thÓ. \n\ni vµ nhËn ®−îc. \n\nB¶ng 3.2.3a. C¸c lÖnh show dïng cho EIGRP \n\n \n\nLÖnh Gi¶i thÝch \n\nDebug eigrp fsm HiÓn thÞ ho¹t ®éng cña c¸c EIGRP feasible successor gióp \nchóng ta x¸c ®Þnh khi nµo tiÕn tr×nh ®Þnh tuyÕn cµi ®Æt vµ xo¸ \n\nth«ng tin cËp nhËt vÒ ®−êng ®i. \n\n\n\n 309\n\nDebug eigrp packet HiÓn thÞ c¸c gãi EIGRP göi ®i vµ nhËn ®−îc. \n\nC¸c gãi nµy cã thÓ lµ gãi hello, cËp nhËt, b¸o nhËn, yªu cÇu \n\nhoÆc håi ®¸p. Sè thø tù cña gãi vµ chØ sè b¸o nhËn ®−îc sö \ndông ®Ó göi b¶o ®¶m c¸c gãi EIGRP còng ®−îc hiÓn thÞ. \n\nB¶ng 3.2.3.b. C¸c lÖnh EIGRP debug \n\nèi quan \nÖ víi c¸c l¸ng giÒng cña nã. RIP vµ IGRP chØ ®¬n gi¶n lµ ph¸t qu¶ng b¸ hoÆc \n\nmulticast th«ng tin cËp nhËt ra c¸c cæng ®· ®−îc cÊu h×nh. Ng−îc l¹i, EIGRP router \n\nchñ ®éng thiÕt lËp mèi quan hÖ víi c¸c l¸ng giÒng cña nã gièng nh− router OSPF \n®· lµm. \n\nB¶ng l¸ng giÒng lµ b¶ng quan träng nhÊt trong EIGRP. Mçi EIGRP l−u mét b¶ng \n\nl¸ng giÒng, trong ®ã lµ danh s¸ch c¸c router l¸ng giÒng th©n mËt. B¶ng nµy t−¬ng \ntù nh− c¬ së d÷ liÖu vÒ l¸ng giÒng cña OSPF. EIGRP cã riªng tõng b¶ng l¸ng giÒng \n\ncho mçi giao thøc mµ EIGRP hç trî. \n\nEIGRP router sö dông c¸c gãi hello rÊt nhá ®Ó thiÕt lËp mèi quan hÖ th©n mËt víi \n\nc¸c router l¸ng giÒng. MÆc ®Þnh, hello ®−îc göi ®i theo chu kú 5 gi©y/lÇn. NÕu \nrouter vÉn nhËn ®−îc ®Òu ®Æn c¸c gãi hello tõ mét router l¸ng giÒng th× nã vÉn sÏ \n\nhiÓu r»ng router l¸ng giÒng ®ã cïng víi c¸c ®−êng ®i cña nã vÉn cßn ho¹t ®éng. \n\nB»ng c¸ch thiÕt lËp mèi quan hÖ th©n mËt nh− vËy, EIGRP router thùc hiÖn ®−îc \nnh÷ng viÖc sau: \n\n\u2022 Tù ®éng häc ®−îc ®−êng míi khi ®−êng nµy kÕt nèi vµo m¹ng. \n\n\u2022 X¸c ®Þnh router l¸ng giÒng bÞ ®øt kÕt nèi hay kh«ng cßn ho¹t ®éng n÷a. \n\n\u2022 T¸i ph¸t hiÖn c¸c router vèn tr−íc ®ã bÞ xem lµ ®øt kÕt nèi. \n\n \n\n \n\n \n\n3.2.4. X©y dùng b¶ng l¸ng giÒng. \n\nRouter ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch d¹ng ®¬n gi¶n kh«ng thiÕt lËp m\nh\n\n\n\n 310\n\n \n\n \n\nH×nh 3.2.4.a. B¶ng l¸ng giÒng cña EIGRP \n\nSau ®©y lµ c¸c th«ng tin trong b¶ng l¸ng giÒng: \n\n\u2022 §Þa chØ cña router l¸ng giÒng. \n\n\u2022 Hold time: Lµ kho¶ng thêi gian l−u gi÷. NÕu kh«ng nhËn ®−îc bÊt kú c¸i g× \n−u gi÷ th× khi kho¶ng thêi \n\nnèi ®Õn l¸ng giÒng ®ã kh«ng cßn \n\n l¹i (RTO). \n\n\u2022 \n−îc chuyÓn ®i. NÕu phÇn nµy lu«n cã gi¸ trÞ kh«ng ®æi lín h¬n 0 th× cã \n\nIGRP nµo trong hµng ®îi. \n\ntõ router l¸ng giÒng trong suèt kho¶ng thêi gian l\ngian nµy hÕt thêi h¹n, router míi xem kÕt \n\nho¹t ®éng. Ban ®Çu, kho¶ng thêi gian nµy chØ ¸p dông cho c¸c gãi hello, \nnh−ng ë c¸c phiªn b¶n Cisco IOS hiÖn nay, bÊt kú gãi EIGRP nµo nhËn \n\n®−îc sau gãi hello ®Çu tiªn ®Òu khëi ®éng l¹i ®ång hå ®o kho¶ng thêi gian \n\nnµy. \n\n\u2022 Smooth Round � Trip Timer (SRTT): Lµ kho¶ng thêi gian trung b×nh mµ \nrouter göi ®i mét gãi vµ nhËn vÒ mét gãi tõ mét router l¸ng giÒng. Kho¶ng \n\nthêi gian nµy ®−îc dïng ®Ó x¸c ®Þnh thêi gian  truyÒn\n\nQueue count (QCnt): Lµ sè l−îng gãi d÷ liÖu ®ang xÕp trong hµng ®îi ®Ó \nchê ®\nthÓ lµ router ®ang bÞ nghÏn m¹ch. NÕu phÇn nµy cã gi¸ trÞ 0 cã nghÜa lµ \n\nkh«ng cã gãi E\n\n\n\n 311\n\n\u2022 Sequence number (Seq No): Lµ sè thø tù cña gãi nhËn ®−îc míi nhÊt tõ \nrouter l¸ng giÒng. EIGRP sö dông chØ sè nµy ®Ó x¸c ®Þnh gãi cÇn truyÒn l¹i \n\nvíi router l¸ng giÒng. B¶ng l¸ng giÒng nµy ®−îc sö dông ®Ó hç trî cho viÖc \ngöi ®¶m b¶o tin cËy vµ tuÇn tù cho c¸c gãi d÷ liÖu EIGRP, t−¬ng tù nh− TCP \n\nthùc hiÖn göi b¶o ®¶m cho c¸c gãi IP vËy.  \n\n \n\n \n\n \n\nH×nh 3.2.4.b. Qu¸ tr×nh trao ®æi th«ng tin ®Þnh tuyÕn gi÷a hai router \n\nl¸ng giÒng víi nhau \n\n3.2.5. Ph¸t hiÖn ®−êng ®i \n\nC¸c router ch¹y EIGRP gi÷ c¸c th«ng tin vÒ ®−êng ®i trªn RAM, do ®ã cã thÓ ®¸p \n\nøng nhanh chãng. Gièng nh− OSPF, EIGRP l−u c¸c th«ng tin nµy thµnh tõng b¶ng \n\nhay tõng c¬ së d÷ liÖu. \n\nDUAL lµ thuËt to¸n vect¬ kho¶ng c¸ch cña EIGRP, nã sö dông th«ng tin trong \nb¶ng l¸ng giÒng vµ b¶ng cÊu tróc m¹ng ®Ó tÝnh to¸n ®−êng cã chi phÝ thÊp nhÊt ®Õn \n\nm¹ng ®Ých. §−êng chÝnh ®−îc chän ra ®−îc gäi lµ ®−êng successor. Sau khi tÝnh \n\n\n\n 312\n\nto¸n, DUAL ®Æt ®−êng successor lªn b¶ng ®Þnh tuyÕn vµ ®ång thêi còng l−u ®−êng \n\ng feasible successor. DUAL chØ l−u ®−êng \n\n−îc feasible successor th× \n\non ®−\n\nn, ®−êng successor ®−îc ®−a lªn b¶ng ®Þnh \n\nnµy trong b¶ng cÊu tróc m¹ng. \n\nDUAL cßn cè g¾ng tÝnh ®−êng dù phßng cho tr−êng hîp ®−êng successor bÞ ®øt. \n§−êng dù phßng nµy ®−îc gäi lµ ®−ên\n\nfeasible successor trong b¶ng cÊu tróc m¹ng. §−êng nµy sÏ ®−îc sö dông thay thÕ \n\nkhi ®−êng successor ®Õn m¹ng ®Ých bÞ ®øt hoÆc kh«ng b¶o ®¶m tin cËy. \n\n3.2.6. Chän ®−êng \n\nNÕu cã mét ®−êng ®i ®Õn mét m¹ng ®Ých bÞ ®øt, DUAL sÏ t×m feasible succesor \ntrong b¶ng cÊu tróc m¹ng ®Ó thay thÕ. NÕu kh«ng t×m ®\n\nc êng ®Õn m¹ng ®Ých ®ã ®−îc ®¸nh dÊu tr¹ng th¸i Active. Sau ®ã, router göi \ngãi yªu cÇu ®Õn tÊt c¶ c¸c router l¸ng giÒng ®Ó yªu cÇu cung cÊp th«ng tin vÒ m¹ng \n\n®Ých ®ang cÇn xö lý. DUAL sö dông c¸c th«ng tin míi nhËn ®−îc ®Ó tÝnh to¸n l¹i \nsuccessor vµ feasible successor míi. \n\nSau khi DUAL hoµn tÊt viÖc tÝnh to¸\ntuyÕn. §−êng successor vµ feasible successor ®−îc l−u trong b¶ng cÊu tróc m¹ng. \n\nCon ®−êng ®Õn m¹ng ®Ých trªn ®−îc chuyÓn tõ tr¹ng th¸i Active sang tr¹ng th¸i \nPasive. Tr¹ng th¸i nµy cã nghÜa lµ con ®−êng ®Õn m¹ng ®Ých ®ã ®· ho¹t ®éng vµ \n\nb¶o ®¶m tin cËy. \n\n \n\nH×nh 3.2.6a. §−êng successor lµ ®−êng cã chi phÝ thÊp nhÊt ®Õn mét m¹ng ®Ých. \nSuccessor lµ router kÕ tiÕp trªn ®−êng ®i nµy \n\n \n\n\n\n 313\n\n \n\nH×nh 3.2.6.b. RTA cã thÓ cµi ®Æt nhiÒu ®−êng successor nÕu chóng cã cïng chi phÝ \n\n \n\n \n\nH×nh 3.2.6.c. B»ng c¸ch x¸c ®Þnh ®−êng feasible succesor, EIGRP router cã thÓ \nt×m ®−îc ®−êng thay thÕ ngay khi ®−êng successor bÞ ®øt. \n\nÕn \n\nUAL còng ®¶m b¶o mçi \n\n®−êng ®i nµy kh«ng bÞ lÆp vßng. \n\n3.2.7. B¶o tr× b¶ng ®Þnh tuy\n\nDUAL ghi nhËn tÊt c¶ c¸c ®−êng do l¸ng giÒng qu¶ng c¸o vµ sö dông th«ng sè \n\n®Þnh tuyÕn tæng hîp ®Ó so s¸nh gi÷a chóng. §ång thêi D\n\n\n\n 314\n\n§  ®Õn mét ®Ých cã chi phÝ thÊp nhÊt sÏ ®−îc DUAL ®−a lªn  b¶ng ®Þnh tuyÕn. \n\n§−êng nµy gäi lµ ®−êng successor. §−êng successor còng ®−îc l−u trong b¶ng cÊu \ntróc m¹ng. \n\nEIGRP l−u c¸c th«ng tin quan träng vÒ ®−êng ®i trong b¶ng l¸ng giÒng vµ b¶ng cÊu \n\ntróc m¹ng. Hai b¶ng nµy cung cÊp th«ng tin ®Çy ®ñ cho DUAL. Dùa vµo ®ã DUAL \n\ncã thÓ chän ®−êng thay thÕ nhanh chãng khi cÇn thiÕt. \n\nKhi mét ®−êng liªn kÕt bÞ ®øt, DUAL t×m feasible successor trong b¶ng cÊu tróc \nm¹ng. NÕu kh«ng t×m thÊy feasible successor th× ®−êng ®i ®Õn m¹ng ®Ých nµy ®−îc \n\n®¸nh dÊu tr¹ng th¸i Active. Sau ®ã router göi gãi yªu cÇu ®Õn tÊt c¶ c¸c router l¸ng \ngiÒng cña nã ®Ó yªu cÇu cung cÊp th«ng tin m¹ng. Víi th«ng tin míi nhËn ®−îc, \n\nDUAL sÏ tÝnh to¸n l¹i ®−êng successor vµ feasible successor míi. \n\n−êng\n\nong b¶ng cÊu tróc m¹ng. Tr¹ng \n\nrouter vÉn nhËn ®−îc ®Òu ®Æn c¸c gãi hello theo ®Þnh kú th× cã nghÜa lµ \n\nTh«ng tin nµy ®−îc l−u trong b¶ng l¸ng giÒng. Khi router l¸ng giÒng \n\n«ng nhËn ®−îc gãi hello trong suèt kho¶ng \n\nuter l¸ng giÒng xem nh− \n\nkh«ng kÕt nèi ®−îc n÷a hoÆc kh«ng cßn ho¹t ®éng n÷a. DUAL sÏ th«ng b¸o sù \n\nao thøc ®Þnh tuyÕn \n\nSau khi DUAL ®· tÝnh to¸n xong, ®−êng successor ®−îc ®−a vµo b¶ng ®Þnh tuyÕn. \n\n§−êng successor vµ feasible successor ®−îc ®Æt tr\nth¸i cña con ®−êng ®Õn m¹ng ®Ých nµy ®−îc chuyÓn tõ Active sang Passive. Tr¹ng \n\nth¸i nµy cã nghÜa lµ con ®−êng ®· ho¹t ®éng tin cËy. \n\nEIGRP router sö dông c¸c gãi hello rÊt nhá ®Ó thiÕt lËp mèi quan hÖ th©n mËt víi \n\nc¸c router l¸ng giÒng. MÆc ®Þnh, gãi hello ®−îc göi theo chu kú 5 gi©y/lÇn. NÕu \nEIGRP \n\nl¸ng giÒng ®ã cïng víi c¸c con ®−êng cña nã vÉn cßn ho¹t ®éng b×nh th−êng. \n\nKhi ph¸t hiÖn mét l¸ng giÒng míi, router sÏ ghi nhËn l¹i ®Þa chØ vµ cæng kÕt nèi cña \n\nl¸ng giÒng ®ã. \ngöi gãi hello, trong ®ã cã th«ng sè vÒ kho¶ng thêi gian l−u gi÷. §©y lµ kho¶ng thêi \n\ngian mµ router vÉn chê vµ xem lµ router l¸ng giÒng vÉn cßn ho¹t ®éng vµ kÕt nèi l¹i \n®−îc. Hay nãi c¸ch kh¸c, nÕu router kh\n\nthêi gian l−u gi÷ th× khi kho¶ng thêi gian nµy kÕt thóc, ro\n\nthay ®æ nµy vµ thùc hiÖn tÝnh to¸n l¹i víi cÊu tróc m¹ng míi. \n\n3.3. Xö lý sù cè gi\n\n3.3.1. Qu¸ tr×nh xö lý sù cè giao thøc ®Þnh tuyÕn \n\n\n\n 315\n\nTÊt c¶ c¸c qu¸ tr×nh xö lý sù cè giao thøc ®Þnh tuyÕn ®Òu nªn tu©n theo mét s¬ ®å \n\nlogic tuÇn tù. S¬ ®å nµy kh«ng ph¶i lµ mét tiÕn tr×nh b¾t buéc cøng nh¾c khi xö lý \n\n\u2022 \n\n gióp cho b¹n x¸c ®Þnh nguyªn nh©n cã thÓ \n\nng bÞ ¶nh h−ëng bëi sù cè, hái ng−êi qu¶n \n\n3. \n\n\u2022 \n\n l¹i. \n\n\u2022 \n\nsù cè m¹ng. Tuy nhiªn, nã lµ mét s¬ ®å c¬ b¶n ®Ó tõ ®ã ng−êi qu¶n trÞ m¹ng cã thÓ \n\nx©y dùng mét s¬ ®å xö lý sù cè phï hîp cho m«i tr−êng m¹ng cña m×nh. \n\n1. Khi kh¶o s¸t sù cè m¹ng, cè g»ng lµm râ nh÷ng m« t¶ vÒ sù cè. \n\nX¸c ®Þnh sù cè dùa trªn mét lo¹t c¸c hiÖn t−îng vµ c¸c nguyªn nh©n cã thÓ \ng©y ra. \n\n\u2022 §Ó ph©n tÝch ®óng sù cè, b¹n x¸c ®Þnh c¸c dÊu hiÖn chung vµ sau ®ã x¸c \n®Þnh xem nguyªn nh©n nµo cã thÓ g©y ra c¸c hiÖn t−îng nh− vËy. VÝ dô: \n\nhost kh«ng tr¶ lêi dÞch vô khi ®−îc yªu cÇu tõ client, ®ã lµ mét hiÖn t−îng. \n\n\u2022 Nh÷ng nguyªn nh©n cã thÓ lµ cÊu h×nh host bÞ thiÕu, giao tiÕp card bÞ háng \nhoÆc thiÕu lÖnh cÊu h×nh trªn router. \n\n2. X¸c ®Þnh nguyªn nh©n g©y ra sù cè \n\n\u2022 Thu nhËp c¸c sù kiÖn cÇn thiÕt ®Ó\ng©y ra sù cè. Hái nh÷ng ng−êi dï\n\nlý, ng−êi qu¶n trÞ m¹ng vµ mét sè ng−êi quan träng kh¸c. \n\n\u2022 Thu nhËp th«ng tin tõ nhiÒu nguån, vÝ dô nh− hÖ thèng qu¶n lý m¹ng giao \nthøc ph©n tÝch m¹ng, kÕt qu¶ hiÓn thÞ cña mét sè lÖnh kh¶o s¸t router hoÆc \n\ntõ c¸c ghi chó cña phiªn b¶n phÇn mÒm ®ang sö dông. \n\nDùa trªn nh÷ng th«ng tin ®· thu thËp ®−îc, chóng ta tËp trung chó ý vµo c¸c \n\nnguyªn nh©n cã thÓ. \n\n\u2022 Víi c¸c th«ng tin thu thËp ®−îc b¹n cã thÓ lo¹i trõ mét sè nguyªn nh©n. VÝ \ndô: dùa trªn c¸c th«ng tin nµy, b¹n cã thÓ lo¹i trõ sù cè phÇn cøng ®Ó tËp \ntrung vµo sù cè phÇn mÒm. \n\nTrong mäi tr−êng hîp, cè g¾ng thu nhá sè l−îng nguyªn nh©n cã kh¶ n¨ng \n\ng©y ra sù cè ®Ó chóng ta cã thÓ lªn mét ph−¬ng ¸n xö lý hiÖu qu¶. \n\n4. Lªn ph−¬ng ¸n hµnh ®éng theo c¸c nguyªn nh©n cã kh¶ n¨ng cßn\n\nB¾t ®Çu víi nguyªn nh©n cã kh¶ n¨ng nhiÒu nhÊt, b¹n ®Æt ra mét ph−¬ng ¸n \n\ntrong ®ã chØ thay ®æi mét th«ng sè m¹ng. \n\n\n\n 316\n\n\u2022 ChØ thay ®æi mét th«ng sè t¹i mét thêi ®iÓm. §iÒu nµy gióp cho b¹n x¸c \n®Þnh ®−îc gi¶i ph¸p cho tõng sù cè cô thÓ. Kh«ng nªn cè thay ®æi nhiÒu h¬n \nmét th«ng sè t¹i mét thêi ®iÓm. Lµm nh− vËy cã thÓ sÏ gi¶i quyÕt ®−îc sù cè \n\ni kh«ng thÓ biÕt ®−îc c¸i nµo b¹n thay ®æi ®· gi¶i quyÕt ®−îc \nhiÖn t−îng nµo vµ nh− vËy b¹n sÏ kh«ng rót ®−îc kinh nghiÖm cho nh÷ng \n\nlÇn x¶y ra sù cè t−¬ng tù vÒ sau. \n\n5. Thùc hiÖn ph−¬ng ¸n ®· ®−a ra, thùc hiÖn tõng b−íc mét c¸ch cÈn thËn ®ång \nthêi kiÓm tra xem c¸c hiÖn t−îng cña sù cè ®· hÕt ch−a. \n\n6. Kh¶o s¸t kÕt qu¶ ®Ó x¸c nhËn lµ sù cè ®· ®−îc gi¶i quyÕt hay ch−a. NÕu sù \ncè ®· ®−îc gi¶i quyÕt xong th× qu¸ tr×nh cña chóng ta chÊm døt. \n\n7. NÕu sù cè vÉn cßn, b¹n lªn ph−¬ng ¸n cho nguyªn nh©n cã kh¶ n¨ng cao thø \nhai. Quay l¹i  b−íc 4, thay ®æi mét th«ng sè kh¸c vµ lÆp l¹i qu¸ tr×nh cho ®Õn \n\nkhi gi¶i quyÕt ®−îc sù cè. \n\n8. Mét khi nguyªn nh©n thËt sù cña sù cè ®· ®−îc x¸c ®Þnh, cè g¾ng xö lý nã. \n\n\u2022 §iÒu quan träng ë b−íc nµy lµ ghi l¹i sù cè vµ gi¶i ph¸p t−¬ng øng ®Ó cã thÓ \nsö dông sau nµy. \n\n\u2022 NÕu ®Õn b−íc nµy mµ mäi cè g¾ng vÉn kh«ng thµnh c«ng th× b¹n nªn yªu \ncÇu hç trî kü thuËt tõ nhµ s¶n xuÊt thiÕt bÞ. \n\n\u2022 Mét sè nguån hç trî kh¸c cã thÓ gióp cho b¹n lµ c¸c chuyªn gia hoÆc c¸c kü \n\n\u2022 Cisco router cã mét sè tËp lÖnh hç trî cho b¹n theo dâi vµ x¸c ®Þnh sù cè \n\nn khoanh vïng khu vùc x¶y ra sù cè. \n\n\u2022 \n\nnh−ng b¹n l¹\n\ns− vÒ kü thuËt. \n\nm¹ng: \n\n\u2022 TËp lÖnh show cho phÐp b¹n theo dâi c¸c ho¹t ®éng b×nh th−êng cña m¹ng, \ngióp b¹\n\nTËp lÖnh debug hç trî cho b¹n x¸c ®Þnh sù cè cña giao thøc vµ cña cÊu h×nh \nrouter. \n\n\u2022 C¸c c«ng cô TCP/IP nh− ping, traceroute vµ telnet. \n\n\n\n 317\n\nTËp lÖnh show lµ c«ng cô quan träng nhÊt gióp b¹n hiÓu  ®−îc tr¹ng th¸i ho¹t ®éng \ncña router, x¸c ®Þnh c¸c router l¸ng giÒng, theo dâi ho¹t ®éng tæng qu¸t vµ khoanh \n\nvïng sù cè m¹ng. \n\nTËp lÖnh debug cung cÊp c¸c th«ng tin sèng vÒ giao th«ng trªn mét cæng, c¸c \nth«ng  giao thøc nµo ®ã vµ \n\nnhiÒu th«ng tin kh¸c cã Ých. Chóng ta chØ dïng lÖnh debug ®Ó x¸c ®Þnh sù cè chø \n\nkh«ng\n\n mét sù cè nµo ®ã. B¹n nªn thu hÑp c¸c \n\nnguyªn nh©n g©y ra sù cè tr\n\ndebugging ®Ó xem nh÷ng debug nµo ®ang ®−îc bËt lªn trong router. \n\nOS cho c¸c c«ng viÖc sau: \n\n\u2022 \n\n\u2022 \n\n\u2022 X¸c ®Þnh sù cè trªn cæng giao tiÕp, trªn m¸y tinh hay trªn mét øng dông \n\n\u2022 \n\n®iÖp b¸o lçi bªn trong, ph©n tÝch c¸c gãi d÷ liÖu cña mét\n\n dïng nã ®Ó xem c¸c ho¹t ®éngb×nh th−êng cña m¹ng. ChØ sö dông debug ®Ó \nt×m mét giao th«ng ®Æc biÖt nµo ®ã hay\n\n−íc khi sö dông lÖnh debug. B¹n dïng lÖnh show \n\nSö dông tËp lÖnh show cña Cisco I\n\nXem c¸c ®¸p øng cña router trong qu¸ tr×nh cµi ®Æt. \n\nXem ho¹t ®éng b×nh th−êng cña m¹ng. \n\nnµo. \n\nX¸c ®Þnh khi nµo m¹ng nghÏn m¹ch. \n\n\u2022 X¸c ®Þnh tr¹ng th¸i cña server, client hoÆc c¸c l¸ng giÒng. \n\n \n\nC¸c c«ng cô m¹ng TCP/IP: \n\n\u2022 \ncuèi - ®Õn - ®Çu cuèi. \n\n\u2022 LÖnh ping më réng cã thÓ ®iÒu khiÓn tèt h¬n lÖnh ping c¬ b¶n. \n\n\u2022 Ping kiÓm tra nhanh tÝnh kÕt nèi tõ ®Çu cuèi - ®Õn \u2013 ®Çu cuèi. \n\n\u2022 Traceroute cã thÓ ®−îc sö dông ®Ó x¸c ®Þnh kÕt nèi nµo bÞ nghÏn m¹ch hay \nbÞ ®øt. \n\nTelnet ®−îc sö dông ®Ó kiÓm tra mét kÕt nèi ho¹t ®éng hoµn chØnh tõ ®Çu \n\n3.3.2. Xö lý sù cè cÊu h×nh RIP \n\n\n\n 318\n\nSù cè th−êng gÆp nhÊt cña RIP lµm cho RIP kh«ng thùc hiÖn qu¶ng c¸o vÒ mét \n\n®−êng nµo ®ã lµ do VLSM (Variable \u2013 length subnet mask). RIP phiªn b¶n 1 \nkh«ng hç trî VLSM. Do ®ã khi RIP kh«ng qu¶ng c¸o vÒ mét ®−êng nµo ®ã, b¹n \n\nnªn ki\n\n\u2022 \n\nng. VLSM kh«ng thÓ sö \ndông ®−îc víi RIPv1. \n\nLÖ  protocols cung cÊp c¸c th«ng tin vÒ ®Æc ®iÓm vµ tr¹ng th¸i hiÖn t¹i \ncña c¸\n\ntherrnet 0/1 \n\nnh−ng b¹n kh«ng khai b¸o ®Þa chØ m¹ng cña cæng nµy cho RIP b»ng lÖnh network \nth× RI\n\n thÓ dïng lÖnh debug ip rip ®Ó xem c¸c th«ng tin tøc thêi vÒ ho¹t ®éng cña \n\nRIP. Sau ®ã b¹n dïng lÖnh no debug ip rip, no debug all hoÆc undebug all ®Ó t¾t \ndebug. \n\n \n\n \n\nÓm tra nh÷ng ®iÒu sau: \n\nCã sù cè vÒ kÕt nèi ë Líp 1 hoÆc Líp 2 hay kh«ng. \n\n\u2022 Cã cÊu h×nh ®Þa chØ IP theo s¬ ®å VLSM hay kh«\n\n\u2022 CÊu h×nh RIPv1 vµ RIPv2 cã phï hîp víi nhau hay kh«ng. \n\n\u2022 C©u lÖnh network cã bÞ thiÕu hay bÞ sai kh«ng. \n\n\u2022 Cæng giao tiÕp trªn router cã ho¹t ®éng tèt kh«ng. \n\nnh show ip\nc giao thøc ®Þnh tuyÕn ®ang ho¹t ®éng trªn router. RIP göi th«ng tin ®Þnh \n\ntuyÕn ra c¸c cæng giao tiÕp cã ®Þa chØ IP n»m trong ®Þa chØ m¹ng ®−îc khai b¸o \n\ntrong c©u lÖnh network. VÝ dô: nÕu b¹n ®· cÊu h×nh xong cæng FastE\n\nP sÏ kh«ng göi th«ng tin ®Þnh tuyÕn ra cæng ®ã vµ ®ång thêi còng kh«ng nhËn \n\nth«ng b¸o nµy tõ cæng nµy. \n\nB¹n cã\n\n\n\n 319\n\n \n\nH×nh 3.3.2.a. VÝ dô kÕt qu¶ hiÓn thÞ cña lÖnh show ip protocols \n\n \n\nH×nh 3.3.2.b. VÝ dô hiÓn thÞ cña lÖnh debug ip rip \n\n th«ng tin vÒ hai m¹ng ®Ých lµ 172.30.0.0 \n\nvµ 172.16.0.0. Router R1 còng göi th«ng tin cËp nhËt cña nã ra cæng FastEthernet \n\n0/0. C\n\nVÝ dô trong h×nh 3.3.2.b, router R1 ®ang nhËn th«ng tin cËp nhËt tõ mét router kh¸c \ncã ®Þa chØ lµ 192.168.3.1. Router nµy göi\n\n¶ hai router ®Òu sö dông ®Þa chØ qu¶ng b¸ 255.255.255.255 lµm ®Þa chØ ®Ých \n\n\n\n 320\n\ncho c¸c gãi th«ng tin ®Þnh tuyÕn cña m×nh. ChØ sè trong ngoÆc () lµ ®Þa chØ nguån \n\n®−îc ®ãng gãi trong phÇn IP header. \n\nB¹n cã thÓ sÏ gÆp c©u th«ng b¸o nh− sau khi router nhËn ®−îc mét gãi kh«ng ®óng \nd¹ng chuÈn: \n\nRIP: bad version 128 from 160.89.80.43 \n\n3.3.3. Xö lý sù cè cÊu h×nh IGRP \n\nIGRP lµ mét giao thøc ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch ®−îc ph¸t triÓn bëi Cisco \ntõ gi÷\n\n§Æc ®iÓm Gi¶i thÝch \n\na thËp niªn 80. IGRP cã nhiÒu ®Æc ®iÓm kh¸c víi c¸c giao thøc ®Þnh tuyÕn \n\ntheo vect¬ kho¶ng c¸ch nh− RIP ch¼ng h¹n. C¸c ®Æc ®iÓm nµy ®−îc liÖt kª trong \nb¶ng 3.3.3. \n\nKh¶ n¨ng më réng \nt¨ng \n\nIGRP cã kh¶ n¨ng ®Þnh tuyÕn cho m¹ng cã kÝch th−íc lín \nh¬n nhiÒu s¬ víi m¹ng sö dông RIP. \n\nTh«ng sè ®Þnh tuyÕn \nphøc t¹p \n\nIGRP sö dông th«ng sè ®Þnh tuyÕn tæng hîp ®Ó chän \n®−êng linh ho¹t h¬n. C¸c yÕu tè t¸c ®éng vµo viÖc chän \n\n®−êng lµ b¨ng th«ng, ®é trÔ, ®é t¶i vµ ®é tin cËy. MÆc \n\ntrÔ. IGRP kh¾c p\n®Þnh, th«ng sè ®Þnh tuyÕn chØ bao gåm b¨ng th«ng vµ ®é \n\nhôc ®−îc giíi h¹n 15 hop cña RIP. IGRP \n\ncã gi¸ trÞ hop tèi ®a mÆc ®Þnh lµ 100 nh−ng b¹n cã thÓ cÊu \nh×nh cho gi¸ trÞ nµy lªn tíi 255. \n\nChia t¶i ra nhiÒu \n®−êng \n\nIGRP cã thÓ duy tr× tíi 6 ®−êng kh¸c nhau gi÷a mét cÆp \nnguån vµ ®Ých. Nh÷ng ®−êng nµy gi÷a mét cÆp nguån vµ \n\n®Ých. Nh÷ng ®−êng nµy kh«ng b¾t buéc ph¶i cã chi phÝ \nb»ng nhau nh− ®èi víi RIP. ViÖc sö dông nhiÒu ®−êng cho \n\ncïng mét ®Ých nh− vËy sÏ t¨ng ®−îc b¨ng th«ng ®−êng \n\ntruyÒn hoÆc cã thÓ ®Ó dù phßng \n\nB¶ng 3.3.3 \n\n\n\n 321\n\nB¹n dïng lÖnh router igrp autonomous-system ®Ó khëi ®éng tiÕn tr×nh ®Þnh tuyÕn \nIGRP trªn router nh− sau: \n\nR1 (config)#router igrp 100 \n\nSau ®ã, b¹n dïng lÖnh network network-number ®Ó khai b¸o c¸c ®Þa chØ cña c¸c \ncæng trªn router tham gia vµo qu¸ tr×nh cËp nhËt IGRP. \n\nR1 (config-router)#network 172.30.0.0 \n\nR1 (config-router)#network 192.168.3.0 \n\nB¹n dïng c¸c lÖnh sau ®Ó kiÓm tra cÊu h×nh vµ ho¹t ®éng cña IGRP: \n\nR1#show ip protocols \n\nR1#show ip route \n\n \n\n \n\nH×nh 3.3.3.a \n\n \n\n \n\n\n\n 322\n\n \n\nH×nh 3.3.3.b \n\n3.3.5.Xử lý sự cố cấu hình OSPF \n\nOSPF là 1 giao thức định tuyến theo trạng thái  đường liên kết.Một liên kết tương \nứng với một cổng giao tiếp trên một router.Trạng thái của một đường liên kết bao \ngồm thông tin về cổng giao tiếp và mối  quan hệ  với các router láng giềng kết nối \nvào cổng đó.Ví dụ : thông tin về một cổng giao tiếp bao gồm địa chỉ IP ,subnet \nmask và loại mạng kết nối vào cổng đó cũng như các router kết nối vào cổng \nnày.Tập hợp các thông tin như vậy tạo thành cơ sở dữ liệu về trạng thái các đường \nliên kết. \n\n-Sự cố thường xảy ra với OSPF có liên quan tới quan hệ với các láng giềng thân \nmật và việc đồng bộ cơ sở dữ liệu về trạng thái các đường liên kết.Lệnh show ip \nospf neighbors sẽ cung cấp nhiều thông tin hữu ích cho việc xử lý sự cố liên quan \nđến việc quan hệ với các router láng giềng thân mật. \n\n-Bạn sử dụng lệnh debug ip ospf events để hiển thị thông tin về các sự kiện liên \nquan đến OSPF như: \n\n+Mối quan hệ láng giềng thân mật. \n\n+Gửi thông tin định tuyến  \n\n+Bầu router đại diện(DR) \n\n\n\n 323\n\n+Tính toán chọn đường ngắn nhất(OSPF) \n\n-Nếu router đã được cấu hình định tuyến OSPF mà không thấy được các láng giềng \nOSPF trên những mạng kết nối trực tuyến của nó thì bạn nên thực hiện các việc \nsau: \n\n+Kiểm tra xem cả hai router láng giềng với nhau đã được cấu hình IP có cùng \nsubnet mask ,cùng khoảng thời gian hello và khoảng thời gian bất động hay chưa. \n\n+Kiểm tra xem cả hai router láng giềng của nhau có nằm trong cùng một vùng hay \nkhông. \n\nĐể hiển thị thông tin về mỗi gói OSPF nhận được ,bạn dùng lệnh debug ip ospf \npacket.Dùng dạng no của câu lệnh này để tắt debug. \n\nLệnh debug ip ospf packet sẽ hiển thị các thông tin của từng gói OSPF mà router \nnhận được.Thông tin hiển thị thay đổi một chút tuỳ theo loại cơ chế xác minh đang \nđược sử dụng. \n\n \n\nTỔNG KẾT  \n\nSau khi đọc xong chương này ,bạn phải trả lời được các câu hỏi sau: \n\n1. EIGRP là một giao thức lai,kết hợp các ưu điểm của giao thức định tuyến \ntheo vectơ khoảng cách và giao thức định tuyến theo trạng thái đường liên \nkết.Vậy EIGRP giống giao thức định tuyến theo vectơ khoảng cách ở những \nđiểm nào? Và giống giao thức định tuyến theo trạng thái đường liên kết ở \nnhững điểm nào? \n\n2. Bảng cấu trúc mạng của EIGRP và cơ sở dữ liệu về cấu trúc mạng của OSPF \nkhác nhau như thế nào? \n\nSau đây là những điểm quan trọng trong chương này: \n\n+Điểm khác nhau giữa EIGRP và IGRP \n\n+Các khái niệm chính,kỹ thuật chính và cấu trúc dữ liệu của EIGRP \n\n+Hoạt động hội tụ của EIGRP và hoạt động cơ bản của DUAL \n\n+Cấu hình IEGRP cơ bản  \n\n\n\n 324\n\n+Cấu hình tổng hợp đường đi cho IEGRP \n\n+Quá trình EIGRP xây dựng và bảo trì bảng định tuyến \n\n+Kiểm tra hoạt động EIGRP \n\n+Tám bước cho quá trình xử lý sự cố nói chung \n\n+Áp dụng sơ đồ logic trên vào quá trình xử lý sự cố định tuyến \n\n+Xử lý sự cố tiến trình định tuyến RIP sử dụng lệnh show và debug. \n\n+Xử lý sự cố tiến trình định tuyến IGRP sử dụng lệnh show và debug \n\n+Xử lý sự cố tiến trình định tuyến EIGRP sử dụng lệnh show và debug \n\n+Xử lý sự cố tiến trình định tuyến OSPF sử dụng lệnh show và debug \n\n \n\n\n\n 325\n\nCHƯƠNG 4: CÁC KHÁI NIỆM VỀ CHUYỂN MẠCH \n\n \n\nGIỚI THIỆU \n\nViệc thiết kế LAN đuợc phát triển và thay đổi nhiều theo thời gian.Cho đến gần \nđây các nhà thiết kế mạng vẫn còn sử dụng hub,bridge để xây dựng hệ thống \nmạng.Còn hiện nay ,switch và router là hai thiết bị quan trọng nhất trong \nLAN,khả năng và hoạt động của hai loại thiết bị này không ngừng được năng \ncao. \n\nChương này sẽ quay lại một số nguồn gốc của các phiên bản Ethernet \nLA\n\nểu rõ hơn tại sao các thiết bị mạng đã được phát triển như vậy. \n\nCho đến gần đây hầu hết các mạng Ethernet vẫn còn được sử dụng Repeater. \nKh\n\ng dựa trên Switch và router, thậm chí có thiết bị bao gồm cả hai chức \nnăng định tuyến và chuyển mạch. \n\nSwitch hiện đại có khả năng thực hiện nhiều nhiệm vụ phức tạp khác nhau \ntrong mạng. Chương này sẽ giới thiệu về cách phân đoạn mạng và mô tả hoạt \nđộng cơ bản của Switch. \n\nSwitch là thiết bị Lớp 2 đuợc sử dụng để tăng băng thông và giảm nghẽn mạch. \nMột Switch có thể phân mạng LAN thành các đoạn siêu nhỏ, là những đoạn \nmạng chỉ có Host. Nhờ vậy một miền lớn được chia thành nhiều miền nhỏ ko \ncó đụng độ.Là một thiết bị ở lớp 2 nên LAN Switch có thể tạo đuợc nhiều miền \nđụng độ nhưng tất cả các Host kết nối vào Switch vẫn nằm trong cùng một \nmiề ảng bá. \n\nN,thảo luận về sự phát triển của Ethernet/802.3 và cấu trúc phát triển nhất \ncủa LAN.Một cái nhìn về hoàn cảnh lịch sử của sự phát triển LAN và các thiết \nbị mạng khác nhau làm việc ở lớp 1, lớp 2, lớp 3 của mô hình OSI sẽ giúp \nchúng ta hi\n\ni hiệu quả hoạt động của các mạng này trở nên xấu đi vì có quá nhiều thiết bị \ncùng chia sẻ một môi trường truyền thì các kỹ sư mạng mới lắp thêm Bridge để \nchia mạng thành nhiều miền đụng độ mạng nhỏ hơn. Khi hệ thống mạng càng \nphát triển lớn hơn và phức tạp hơn, Bridge được phát triển thành Switch như \nbây giờ, cho phép phân đoạn cực nhỏ hệ thống mạng. Các mạng ngày nay được \nxây dựn\n\nn qu\n\n\n\n 326\n\n \n\nSau\n\n+ Định nghĩa phân đoạn cực nhỏ (microsegment) \n\n+ Định nghĩa CSMA/CD \n\n+ Mô tả một số thành phần quan trọng ảnh hưởng đến hiệu quả hoạt động của \n\n+ Mô tả chức năng của Repeater \n\nnh nghĩa độ trễ mạng \n\n+ Định nghĩa thời gian truyền \n\n+ M\n\n+ Định nghĩa chuyển mạch đối xứng và bất đối xứng \n\n hàng đợi \n\n+ So sánh và phân biệt giữa chuyển mạch store-and-forward và cut-through \n\n+ Hiểu được sự khác nhau giữa Hub,Bridge,Switch \n\n+ Mô tả chức năng chính của Switch \n\n+ Xác định đoạn mạng LAN \n\n khi hoàn tất chương này các bạn có thể thực hiện các việc sau: \n\n+ Mô tả lịch sử và chức năng của Ethernet chia sẻ,bán song công \n\n+ Định nghĩa đụng độ trong mạng Ethernet \n\nmạng \n\n+ Đị\n\n+ Mô tả chức năng cơ bản của Fast Ethernet \n\n+ Xác định đoạn mạng sử dụng Router,Switch và Bridge \n\nô tả hoạt động cơ bản của Switch \n\n+ Định nghĩa độ trễ của Ethernet Switch \n\n+ Giải thích sự khác nhau giữa chuyển mạch lớp 2 và lớp 3 \n\n+ Định nghĩa bộ nhớ\n\n+ Liệt kê các chế độ chuyển gói chính của Switch \n\n\n\n 327\n\n+ Xác định đoạn mạng cực nhỏ sử dụng Switch \n\n+ Mô tả tiến trình lọc tải \n\n+ So sánh và phân biệt miền đụng độ và miền quảng bá \n\n+ X\n\n4.1.1. Sự phát triển của Ethernet/802.3 LAN \n\n- Kỹ thuật LAN đầu tiên sử dụng cấu trúc \u201cthick Ethernet\u201d và \u201cThin Ethernet\u201d. \nNắ  được các giới hạn của 2 loại cấu trúc này là rất quan trọng để thấy được vị \ntrí của chuyển mạch LAN ngày nay. \n\n- Thêm HUB hay còn gọi là bộ tập trung vào mạng là một cải tiến dựa trên kỹ \nthuật \u201cthick\u201d và \u201cthin\u201d Ethernet. Hub là thiết bị lớp 1 và đôi khi đuợc coi là một \nbộ tập trung Ethernet hay Repeater đa port. Sử dụng Hub trong mạng cho phép \nkết nối được  nhiều user hơn. Loại Hub chủ động còn cho phép mở rộng khoảng \ncách của mạng vì nó thực hiện tái tạo lại tín hiệu dữ liệu.Hub ko hề có quyết \nđịnh gì đối với tín hiệu dữ liệu mà nó nhận đuợc. Nó chỉ đơn giản là khuếch đại \nvà tái tạo lại tín hiệu mà nó nhận được và chuyển  ra cho tất cả các thiết bị nối \nvào nó. \n\n - Ethernet cơ bản là kỹ thuật chia sẻ cùng 1 băng thông cho mọi người dùng \ntrong 1 phân đoạn LAN. Điều này giống như một xe hơi cùng chạy vào một làn \nđường vậy. Con đường này chỉ có một làn đường nên tại một thời điểm chỉ có 1 \nxe hơi chạy trên đó mà thôi. Các user kết nối và cùng một Hub chia sẻ băng \nthông trên cùng một đường truyền. \n\nác định loại cáp cần thiết để kết nối máy trạm vào Switch \n\n+ Xác định loại cáp cần thiết để kết nối Switch vào Switch \n\n4.1. Giới thiệu Ethernet/802.3 LAN \n\nm\n\n\n\n 328\n\n \n\nHình 4.1.1.a.Kết nối user dùng Hub.Các user trên cùng một Hub truy suất cùng \nmột băng thông đường truyền cũng giống như nhiều xe hơi cùng rẽ vào một làn \nđường vậy.Con đường này chỉ có một làn đường nên tại một thời điểm chỉ  \n\n \n\n- Đụng độ là một hậu quả tất yếu của mạng Ethernet. Nếu có hai hay nhiều thiết \nbị cùng truyền cùng một lúc thì đụng độ sẽ xảy ra. Điều này cũng giống như 2 \nxe cùng tranh giành một làn đường và xảy ra đụng độ. Khi đụng độ xảy ra mọi \ngiao thông trên đường truyền đó sẽ bị ngưng lại cho đến khi sự đụng độ đã được \nvãn hồi. Khi số lượng đụng độ quá lớn, thời gian đáp ứng của hệ thống mạng sẽ \nrất chậm. Tình trạng này cho thấy mạng bị nghẽn mạch hoặc có quá nhiều user \ntruy cập cùng lúc vào mạng. \n\n- Thiết bị lớp 2 thông minh hơn thiết bị lớp 1. Thiết bị lớp 2 có quyết định \nchuyển gói dựa trên địa chỉ MAC (Media access Control) được ghi trong phần \nđầu của gói. \n\n- Bridge là 1 thiết bị lớp 2 được sử dụng để phân đoạn mạng. Bridge thu thập và \nchon lựa dữ liệu để chuyển mạch giữa hai đoạn mạng bằng cách h c địa chỉ \nMAC của tất cả các thiết bị nằm trong từng đoạn mạng kết nối vào nó. Dựa vào \n\n dựng thành bảng chuyển mạch và theo đó để \nchuyển hoặc chặn gói lại. Nhờ vậy Bridge tách 1 mạng thành nhiều miền đụng \nđộ \n\ncũng điều khiển lưu lượng \nmạng tốt hơn Hub. \n\nđược một xe rẽ mà thôi. \n\nọ\n\ncác địa chỉ MAC, Bridge xây\n\nnhỏ hơn,làm tăng hiệu quả hoạt động của mạng. Tuy nhiên Bridge ko chặn \ncác lưu lượng quảng bá nhưng dù sao thì Bridge \n\n\n\n 329\n\n- S\nó. Switch \n\nhọc địa chỉ MAC của các thiết bị kết nối trên từng port của nó và xây dựng \nthà\n\nitch \ncó khả năng phân đoạn mạng cực nhỏ, nghĩa là tạo ra môi trường ko đụng độ \ngiữ\n\nều làn đường và mỗi xe có \nriêng một làn đường cho mình. \n\nwitch cũng là 1 thiết bị lớp 2 và được xem là Bridge đa port. Switch có thể \nquyết định chuyển 1 gói dựa trên địa chỉ MAC được ghi trong gói đ\n\nnh bảng chuyển mạch \n\n-Khi hai thiết bị kết nối vào Switch thực hiện trao đổi với nhau, Switch sẽ thiết \nlập một mạch ảo cung cấp một đường liên lạc riêng giữa hai thiết bị này. Sw\n\na nguồn và đích,nhờ đó tối đa hoá lượng băng thông khả dụng. Switch có thể \ntạo nhiều mạch ảo đồng thời giữa các cặp thiết bị khác nhau. Hình ảnh này \ntương tự như đường cao tốc có thể chia thành nhi\n\n \n\nHình 4.1.1.b Kết nối user bằng Switch.Có bao nhiêu thiết bị kết nối vào Switch \nthf Switch có thể tạo ra bấy nhiêu mạch ảo cho từng thiết bị. Điều này giống \n\nnhư hình minh hoạ về đường cao tốc ở bên trái. Đường cao tốc này có đủ 3 làn \nđường dành cho 3 nhánh đổ vào nó,mỗi nhánh một làn đường riêng. \n\n \n\nbị trong mạng kết nối vào nó.Khi số lượng quảng bá quá nhiều sẽ làm cho thời \n của mạng rất chậm. \n\n- R\n\n- Khuyết điểm của thiết bị lớp 2 là nó chuyển gói quảng bá cho tất cả các thiết \n\ngian đáp ứng\n\nouter là một thiết bị ở lớp 3.Router quyết định chuyển gói dựa trên địa chỉ \nmạng của gói dữ liệu.Router sử dụng bảng định tuyến để ghi lại địa chỉ lớp 3 \n\n\n\n 330\n\ncủa các mạng kết nối trực tiếp vào router và các mạng mà router học được từ \ncác router láng riềng. \n\n- M\n\n ra cổng tương ứng \n\n- R\nuter là thiết bị \n\nphân luồng lưu lượng quan trọng nhất trong hệ thống mạng lớn. Chúng giúp \ncho bất kỳ máy tính nào cũng có thể thông tin liên lạc với bất kỳ máy tính nào \nkhác ở bất cứ đâu trên thế giới. \n\n- LAN kết hợp hoạt động của cả hai thiết bị lớp 1 và lớp 2 và lớp 3. Việc triển \nkhai các thiết bị này như thế nào phụ thuộc vào điều kiện và hoàn cảnh đặc biệt \ncủa từng đơn vị tổ chức. \n\nục tiêu của router là thực hiện các việc sau: \n\n+ Kiểm tra dữ liệu lớp 3 của gói nhận được \n\n+ Chọn đường tốt nhất cho gói dữ liệu \n\n+ Chuyển mạch gói\n\nouter ko bị bắt buộc phải chuyển các gói quảng bá. Do đó router có thể làm \ngiảm kích thước miền đụng độ và miền quảng bá trong mạng. Ro\n\n \n\nHinh 4.1.1.c \n\n4.1.2. Các yếu tố ảnh hưởng đến hiệu quả hoạt động của mạng \n\n- Mạng LAN ngày nay ngày càng trở nên quá tải và tình trạng nghẽn mạch gia \ntăng. Thêm vào đó số lượng người dùng mạng tăng lên nhanh chóng cùng với \n\n\n\n 331\n\nnhiều yếu tố khác kết hợp lại tạo thành nhiều thử tháchđối với mạng LAN \ntruyền thống. \n\n+Môi trường đa nhiệm hiện nay của các hệ điều hành máy tính như Window, \nUnix/Linux và MAC cho phép thực hiện đồng thời nhiều phiên giao dịch \nmạng.Khả năng này càng tăng lên thì yêu cầu về tài nguyên mạng càng tăng. \n\n+Việc sử dụng các ứng dụng chuyên sâu như World Wide Web chẳng hạn gia \ntăng.Các ứng dụng dạng client/server này cho phép người quản trị mạng có thể \ntập trung thông tin,dữ liệu lại để dễ bảo trì và bảo vệ dữ liệu. \n\n+Các ứng dụng dạng client/server giải phóng cho các máy trạm gánh nặng của \nviệc lưu trữ dữ liệu và chi phí trang bị đĩa cứng để lưu trữ. Chính vì những ưu \nđiểm này mà việc sử dụng các ứng dụng dạng client/server sẽ càng được sử \ndụng rộng rãi trong tương lai. \n\n \n\nHình vẽ 4.1.2 \n\n \n\n+Quá nhiều người trong 1 phân đoạn mạng 10Mbps \n\ndữ liệu. \n\n+Hầu hết mọi người dùng đều truy cập vào 1 hoặc 2 server \n\n+Các ứng dụng chuyên ngành như tạo màu, CAD/CAM,xử lý ảnh ,và cơ sở \n\n \n\n\n\n 332\n\n4.1.3. Các thành phần của mạng Ethernet/802.3 \n\n- Các c để \ntru g thiết bị này có \nthể là máy tính máy in, file server\u2026Tất cả các máy trong cùng một môi trường \nEth theo phương pháp quảng bá. Một số yếu tố \nsau có thể tác động đến hiệu quả hoạt động của mạng Ethernet/802.3 chia sẻ: \n\n+Việc truyền gói trong mạng Ethernet/802.3 là quảng bá \n\n+P a truy cập cảm nhận sóng mạng phát hiện đụng độ CSMA/CD \n(ca ỉ cho phép một máy trạm được \ntruyền tại một thời điểm. \n\n+N thông có yêu cầu băng thông cao như video và \nint  chất quảng bá của Ethernet sẽ làm cho mạng nghẽn \nmạch. \n\n+T ển trên môi trường mạng lớp 1 và đi \nqua\n\n+Sử dụng Repeater để mở rộng khoảng cách và đồng thời cũng làm tăng thời \ngia AN \n\nấu trúc thông dụng nhất của LAN là Ethernet. Ethernet được dùng \nyền dữ liệu giữa 2 thiết bị trong cùng một mạng nội bộ.Nhữn\n\nernet sẽ truyền và nhận dữ liệu \n\nhương pháp đ\nrrier sense multiple access/collision detect) ch\n\nhiều ứng dụng đa truyền \nernet, cộng với tính\n\nhời gian trễ mặc nhiên khi gói di chuy\n các thiết bị mạng lớp 1 lớp 2 lớp 3. \n\nn trễ của mạng Ethernet/802.3 L\n\n \n\nHình 4.1.3.a \n\n\n\n 333\n\n \n\n-Et /CD và môi trường truyền chia sẻ có thể truyền dữ \nliệu với tốc độ lên đến 100 Mb/s.CSMA/CD là một phương pháp truy cập cho \nphé ữ liệu tại một thời điểm.Thành công của \nEthernet là cung cấp một dịch vụ truyền tổng lực(best-effort) để truyền dữ liệu \nvà cho phép mọi thiết bị trong cùng một môi trường chia sẻ có cơ hội truyền dữ \nliệu ngang nhau.Tuy nhiên đụng độ là một điều tất yếu trong mạng \nEthernet,CSMA/CD \n\nhernet sử dụng CSMA\n\np chỉ một máy trạm được truyền d\n\n \n\nHình 4.1.3.b \n\n \n\n4.1.4.Mạng bán song công \n\n-Ethernet khởi đầu là một kỹ thuật bán song công.Với chế độ truyền bán song \ncông ,host chỉ có thể truyền hoặc nhận tại một thời điểm chứ không thể thực \nhiện cả hai đồng thời.Mỗi một Ethernet host phải kiểm tra xem có dữ liệu đang \ntruyền trên mạng hay không trước khi thực hiện phát dữ liệu của mình.Nếu \nmạng đang có người sử dụng thì host phải hoãn lại thì cả hai hay nhiều Ethernet \nhost sẽ có thể truyền dữ liệu cùng một lúc và kết quả là xảy ra đụng độ.Khi \nđụng độ xảy ra,host nào phát hiện ra đụng độ đầu tiên sẽ phát ra tín hiệu báo \n\n\n\n 334\n\nnghẽn cho các host khác.Khi nhận được tín hiệu báo nghẽn ,mỗi host sẽ ngừng \nại và chờ một thời gian ngẫu nhiên trước khi bắt đầu thực \n\nền lại.Khoảng thời gian chờ ngẫu nhiên này do thuật toán back-off(vãn \nhồi đụng độ)tính toán.Càng có nhiều host kết nối vào mạng và bắt đầu truyền \ndữ liệu thì đụng độ càng nhiều hơn. \n\n-Et\n\nviệc truyền dữ liệu l\nhiện truy\n\nhernet LAN ngày càng trở nên bão hoà vì ngwoif dùng sử dụng nhiều phần \nmềm chuyên sâu,các ứng dụng client/server\u2026 là những loại phần mềm yêu cầu \nhost phải thực hiện truyền thường xuyên hơn với thời gian lâu hơn. \n\n \n\nHình 4.1.4:Cấu trúc mạch của card mạng \n\nTa\n\no môi trường truyền chia sẻ.Do đó chân Rx của card bên trái cũng đồng \nthời nhận được tín hiệu của chính nó từ đường truyền lên.Khi đó nó sẽ so sánh \ngiữ và một tín hiệu đi từ \nchân Tx theo mạch hồi tiếp vòng về Rx.Nếu hai tín hiệu giống nhau nghĩa là \nbìn\n\nvới tín hiệu hồi tiếp từ Tx.Nhờ đó nó phát hiện được đụng độ xảy ra \n\n4.1.5.Sự nghẽn mạch trong mạng \n\n-Kỹ thuật phát triển tạo ra các máy tính ngày càng nhanh hơn và thông minh \n\n xét card bên trái ,tín hiệu được phát ra chân Tx(transmit) xuống đường \ntruyền, đồng thời theo mạch hồi tiếp(loopback) đi vào chân Rx(Receive).Tín \nhiệu xuống đường truyền và được truyền quảng bá đến mọi máy trạm cùng kết \nnối và\n\na hai tín hiệu,một tín hiệu nhận được từ đường truyền \n\nh thường.Nếu có đụng độ xảy ra,tín hiệu nhận được từ đường truyền lên sẽ \nbị khác \n\nhơn.Khả năng của máy trạm và các ứng dụng mạng chuyên sâu ngày càng phát \n\n\n\n 335\n\ntriển thì yêu cầu về băng thông của mạng ngày càng tăng.Nhu cầu đã vượt mức \n10Mb/s trên mạng chia sẻ  Ethernet/802.3 \n\n-N\n\nin hình ảnh lớn \n\n+H\n\n+H\n\n+Ứ\n\n-Ngoài ra số lượng người dùng trong mạng cũng tăng lên nhanh chóng.Tất cả \nb/s.Khi có quá \n\nnhi ập tin,truy cập file server và kết nối Internet \nthì tình tr ng của mạng \nchậ ủa người sử \ndụ\n\nơn hoặc là phải sử dụng lượng băng thông đang có một cách hiệu quả \n\ngày nay ,mạng thực hiện truyền rất nhiều các loại dữ liệu như: \n\n+Tập t\n\nình ảnh \n\nình động(video) \n\nng dụng đa phương tiện \n\ncác yếu tố trên đã đặt một sức ép rất lớn đối với băng thông 10M\nều người cùng thực hiện chia sẻ t\n\nạng nghẽn mạch sẽ xảy ra.Hậu quả là thời gian đáp ứ\nm,thời gian tải tập tin lâu hơn và làm giảm năng suất làm việc c\n\nng. Để giải quyết tình trạng nghẽn mạch này,bạn cần phải có nhiều băng \nthông h\nhơn. \n\n \n\nHình 4.1.5.a.Cán cân phải cân bằng giữa băng thông mạng và nhu cầu của \nngười dùng cùng với các ứng dụng chạy trên mạng \n\n\n\n 336\n\n \n\nHình 4.1.5.b.Băng thông và các nhu cầu của các ứng dụng khác \n\n \n\n4.1.6.Th\n\n-Thời gian trễ là khoảng thời gian gói dữ liệu di chuyển từ máy nguồn tới máy \nđín đường đi giữa nguồn và đính trong LAN và \nWAN là rất quan trọng.Trong mạng Ethernet LAN ,nắm được thời gian trễ và \ncác  trọng để quyết định thời gian CSMA/CD phát \nhiệ ận truyền lại. \n\n-Có ít nhất 3 nguồn gây ra trễ: \n\nời gian trễ trên mạng \n\nh.Việc xác định thời gian trễ của \n\n tác đọng của nó là rất quan\nn đụng độ và thoả thu\n\n\n\n 337\n\n-Đầ\n\n556 us trên 100m cáp UTP CAT5.Cáp càng dài và vận tốc truyền \nậm thì thời gian trễ này càng lớn. \n\n-Th\n\ndữ liệu ở lớp 3 chứ không phải dữ liệu ở lớp 2 như Switch \n\n4.1.7.Thời gian truyền của Ethernet 10Base-T \n\n-Tất cả các mạng đều có một thời bit hay còn gọi là một khe thời gian.Nhiều kỹ \n\nng.Hay nói cách khác,thời gian truyền là \nkhoảng thời gian truyền hết một gói dữ liệu.Do đó gói dữ liệu càng dài thì \nkh ng thời gian này càng dài. \n\n-M i một bít trong mạng Ethernet 10Mb/s có thời gian truyền là 100ns. Đây \nchính là thời bit.Một byte bằng 8 bit .Do đó,một byte cần tối thiểu 800ns để \ntruyền hết.Một frame có 64 byte là frame nhỏ nhất hợp lệ của 10Base-T càn \n51.200 ns(51,2us) Như vậy ,nếu truyền một frame có 1000 byte thì máy nguồn \ncần 800us mới phát xong frame này.Tổng thời gian thực sự để frame đi được tới \nmáy đích còn phụ thuộc vào nhiều nguồn gây trễ khác trên mạng như: \n\n+thơi gian trễ của NIC \n\nu tiên là thời gian mà NIC ở máy nguồn phát tín hiệu điện xuống đường dây \nvà thời gian để NIC ở máy thu nhận biết được các xung điện.Khoảng thời gian \nnày gọi là khoảng thời gian của NIC,khoảng us đối với 10BASE-T NIC. \n\n-Thứ hai là khoảng thời gian tín hiệu lan truyền trên đường dây.Thời gian này \nkhoảng 0,\ncàng ch\n\nứ ba là thời gian trễ do các thiết bị mạng lớp 1 lớp 2 lớp 3 dọc trên đường đi \ngiữa hai máy nguồn và đích. \n\n-Thời gian trễ không phụ thuộc hoàn toàn vào khoảng cách và số lượng thiết bị \nmạng.Ví dụ :Nếu 3 Switch giữa 3 máy trạm được cấu hình đúng thì thời gian trễ \ngiữa hai máy trạm sẽ ít hơn là nếu giữa chúng đặt một Router vì router thực \nhiện chức năng phức tạp hơn,cần nhiều thơi gian xử lý hơn.Router phải xử lý \n\nthuật LAN như Ethernet chẳng hạn, định nghĩa thời bit là một đơn vị thời gian \nđể truyền đi một bit. Để cho một thiết bị điện hay quang nhận ra được tín hiệu \nlà bit 0 hay bit 1 thì phải có một khoảng thời gian tối thiểu là khoảng thời gian \ncủa một bit. \n\n-Thời gian truyền được tính bằng số lượng bit gửi đi nhân với thời bit tương \nứng của kỹ thuật mà bạn đang sử dụ\n\noả\n\nỗ\n\n\n\n 338\n\n+Thời gian trễ do lan truyền trên đường cáp \n\n+Thời gian trễ do các thiết bị lớp 1,lớp 2 và lớp 3 dọc trên đường đi \n\n4.1.8. Ích lợi của việc sử dụng Repeater \n\n-Khoảng cách mà một mạng LAN có thể bao phủ bị giới hạn và sự suy hao của \ntín hiệu.Khi tín hiệu di chuyển trên mạng nó sẽ bị suy hao do trở kháng của cáp \nhay của môi trường truyền làm tiêu hao năng lượng tín hiệu . Ethernet Repeater \nlà một thiết bị hoạt động ở lớp vật lý,nó khuếch đại  và tái tạo lại tín hiệu trong \nEthernet LAN.Khi bạn sử dụng repeater để mở rộng khoảng cách của một \nLAN,mạng LAN này có thể bao phủ lênmột phạm vi lớn hơn và có nhiều người \ndùng hơn cùng chia sẻ mạng này.Tuy nhiên,việc sử dụng repeater và hub lại tạo \nra một vấn đề về quảng bá và đụng độ làm giảm hiệu quả hoạt động của mạng \nLAN có môi trường truyền chia sẻ. \n\n \n\n\n\n 339\n\n+Repeater là một thiết bị lớp 1 thực hiện khuếch đại,tái tạo lại tín hiệu và \ntruyền đi \n\n+Repeater cho phép kéo dài khoảng cách từ đầu cuối -đến -đầu cuối \n\n+Repeater làm tăng kích thước của miền đụng độ và miền quảng bá \n\nHình:4.1.8.b.Mở rộng môi trường chia sẻ mạng LAN bằng repeater \n\n4.1.9.Truyền song công \n\n-Ethernet song công cho phép truyền một gói dữ liệu đồng thời nhận một gói dữ \nliệu khác tại cùng một thời điểm.Việc truyền và nhận song song đồng thời này \nyêu cầu sử dụng hai cặp dây khác nhau trong cáp và chuyển mạch kết nối giữa \nhai máy.Kết nối này phải được xem như kết nối điểm -nối -điểm và hoàn toàn \nkhô\n\nEthernet tối thiểu. \n\n truyền và nhận đồng thời, mỗi node phải kết nối vào một port riêng trên \nswitch. Kết nối song công có thể sử dụng chuẩn môi trường truyền của \n10B\n\nây riêng rẽ trong cáp \nđể tạo kết nối trực tiếp giữa chân truyền (Tx) ở một đầu với chân thu (Rx0 ở \nđầu kia. Khi hai máy được kết nối như vậy sẽ tạo ra môi trường truyền không \ncó đụng độ, việc  truyền và nhận dữ kiệu được thực hiện trên hai mạc điện của \nhai cặp dây riêng biệt trong sơi cáp. \n\nTrong mạng băng thông 10Mb/s trước đây, Ethernet chỉ sử dụng khoảng 50% - \n60%  lượng băng thông do đụng độ và thời gian trễ. Ethernet song công có thể \nsử dụng 100% băng thông trên cả hai chiều, mỗi chiều Tx và Rx bạn có \n10Mb/s, tổng cộng là bạn có thông lượng 20Mb/s. \n\nng có đụng độ.Vì cả hai node có thể truyền và nhận đồng thời nên không \ncòn việc thỏa thuận sủ dụng băng thông. Ethernet song công có thể sử dụng cấu \ntrúc cáp đax có nếu như môi trường truyền thỏa mãn được những tiêu chuẩn \n\nĐể\n\nASE-T, 100BASE-T hoặc 100BASE-FX  để tạo kết nối điiểm-nối-điểm. \nNIC trên tất cả thiết kế nối vào mạng phải có khả năng song công. \n\nEthernet switch song công vận dụng ưu điểm của hai cặp d\n\n\n\n 340\n\n \n\n \n\n4.2. G\n\n4.2.1. Ph©n ®o¹n m¹ng LAN \n\n \n\nmét miÒn ®ông ®é riªng. \n\n ViÖc ph©n ®o¹n m¹ng cho phÐp ph¹m vi nghÏn m¹ch ®−îc thu nhá trong \nph¹m ong mét segment, c¸c thiÕt bÞ \n\niíi thiÖu vÒ chuyÓn m¹ch LAN \n\nMét hÖ thèng m¹ng cã  thÓ chia thµnh nhiÒu ®¬n vÞ nhá h¬n gäi lµ segmnet. \nH×nh 4.2.1. lµ mét vÝ dô vÒ ph©n ®o¹n M¹ng Ethernet. Toµn bé hÖ thèng m¹ng cã \n15 m¸y tÝnh, trong ®ã cã 6 server vµ 9 m¸y tr¹m. Mçi segment sö dông ph−¬ng \nph¸p truy cËp CSMA/CD vµ duy tr× l−u l−îng trong  segment ®ã. Mçi segment lµ \n\nvi tõng segment. Khi d÷ liÖu ®−îc truyÒn ®i tr\n\n\u2022 Gấp đôi băng thông giữa hai node. \n\nđụng độ. \n\n\u2022 Hai đường 10Mb/s hay 100Mb/s. \n\n\u2022 Truyền không có \n\n\n\n 341\n\ntrong cïng segment ®ã chia sÎ toµn bé b¨ng th«ng cña segment ®ã. D÷ liÖu ®−îc \ntruyÒn gi÷a c¸c segment sÏ ®−îc truyÒn lªn ®−êng trôc chÝnh cña m¹ng. \n\n \n\n \n\n4.2.2. \n\n \n\nng cÇn chuyÓn ra segment th× bridge sÏ chÆn c¸c gãi ®ã l¹i. \n\n MÆc dï ho¹t ®éng cña bridge lµ trong suèt ®èi víi c¸c thiÕt bÞ m¹ng kh¸c \nnh−ng\n\nuyÓn gãi. Bridge lµ mét \nthiÕt bÞ chuyÓn m¹ch d¹ng store \u2013and-forward. \n\n Víi kiÓu chuyÓn m¹ch nµy, bridge ph¶i kiÓm tra ®Þa chØ ®Ých vµ tÝnh to¸n \nCRC (Cyclic Redundancy Check) ®Ó kiÓm tra lçi frame råi míi chuyÓn frame ®i. \nNÕu port ®Ých ®ang bËn th× bridge cã thÓ t¹m thêi l©u frame cho ®Õn khi port ®Ých \n®−îc g\n\nPh©n ®o¹n cña m¹ng bridge \n\nBridge lµ mét thiÕt bÞ Líp 2 thùc hiÖn chuyÓn gãi dùa trªn ®Þa chØ MAC. Khi \nbridge nhËn frame vµo tõ mét port, bridge sÏ ®äc ®Þa chØ MAC, cña m¸y göi ®Ó \nnhËn biÕt ®−îc thiÕt bÞ nµop kÕt nèi víi port ®ã. Tõ ®ã bridge x©y dùng ®−îc b¶ng \nchuyÓn m¹ch, trÓn ®ã ¸nh x¹ tõ ®Þa chØ MAC ra port t−¬ng øng. Nh÷ng gãi d÷ liÖu \nnµo kh«\n\n thêi gian trÔ v©n t¨ng lªn kho¶ng 10% ®Õn 30% khi sö dông bridge. Thêi \ngian trÔ nµy lµ thêi gian ®Ó bridge xö lý vµ quyÕt ®Þnh ch\n\ni¶i phãng. \n\n\n\n 342\n\n \n\n \n\n \n\n Ph©n ®o¹n m¹ng b»ng bridge gióp gi¶m sè l−îng ng−êi dïng trªn mét \nsegment. \n\n bridge nhËn frame, gi÷ frame råi chuyÓn frame ®i dùa theo ®Þa chØ Líp 2. \n\n\n\n 343\n\n Kh«ng phô thuéc vµo  giao thøc Líp 3 \n\n T¨ng thêi gian trÔ trªn m¹ng. \n\n4.2.3. Ph©n ®o¹n m¹ng b»ng router. \n\n Ph©n ®o¹n m¹ng b»ng router sÏ lµm t¨ng thêi gian trÔ cña m¹ng lªn 20% ®Õn \n30%. Thêi gian trÔ nµy cao h¬n bridge v× router ho¹t ®éng ë líp M¹ng vµ sö dông \n®Þa chØ IP ®Ó quyÕt ®Þnh chän ®−êng tèt nhÊt ®Õn m¸y ®Ých. \n\n \n\n i h©n ®o¹n m¹ng trong mét m¹ng ®¬n nay trong mét \nsubnet th«i. Cßn router cung cÊp kÕt nèi gi÷a c¸c m¹ng vµ c¸c subnet víi nhau. \n\n Router kh«ng chuyÓn gãi qu¶ng b¸ trong khi swich vµ bridge b¾t buéc ph¶i \nchuyÓ\n\nBr dge vµ switch chØ p\n\nn gãi qu¶ng c¸o. \n\n\n\n 344\n\n \n\n - DÔ qu¶n lý h¬n,  chøc n¨ng nhiÒu h¬n, nhiÒu ®−êng ®i h¬n \n\n - Thu nhá khÝch th−íc miÒn qu¶ng b¸ \n\n - Ho¹t ®éng ë líp 3 \n\n4.2.4. Ph©n ®o¹n m¹ng b»ng switch \n\n ChuyÓn m¹ch LAN gióp gi¶m ®i t×nh tr¹ng thiÕu hôt b¨ng th«ng vµ nghÏn \nm¹ch. SwitchsÏ ph©n ®o¹n m¹ng LAN thµnh c¸c vi ®o¹n (microsegment), thu nhá \ntèi ®a kÝch th−íc miÒn ®ông ®é. Tuy nhiªn tÊt c¶ c¸c host kÕt nèi vµo mét switch \nvÉn n»m trong cïng mét miÒn qu¶ng b¸. \n\n \n\n\n\n 345\n\n Trong m¹ng Ethernet LAN thuÇn chuyÓn m¹ch, c¸c node thùc hiÖn chøc \nn¨ng truyÒn vµ nhËn giãng nh− lµ trong m¹ng chØ cã duy nhÊt m×nh nã vËy. Khi hai  \nnode thiÕt lËp kÕ nèi, mét m¹ch ¶o ®−îc thiÕt lËp gi÷a chóng vµ cuing cÊp toµn bé \nb¨ng th«ng m¹ng. M¹ch ¶o nµy chØ tån t¹i trong switch khi c¸c node cÇn trao ®æi. \nC¸c kÕt nèi b»ng switch cung cÊp nhiÒu th«ng l−îng h¬ so víi Ethernet LAN kÕt \nnèi b»ng bridge hay hub. \n\n \n\n - Swithc lo¹i trõ ®ông ®é b»ng c¸ch ph©n ®o¹n cùc nhá (microsegement). \n\n - Têi gian trÔ thÊp vµ tèc ®é chuyÓn trang frame cao trªn mçi port. \n\n - Ho¹t ®éng tèt víi card m¹ng vµ c¸p cã s½n cña chuÈn 802.3 (CSMA/CD). \n\n.2.5. Ho¹t ®éng c¬ b¶n cña switch. \n\nChuyÓn m¹ch lµ mét kü thuËt gióp gi¶m t¾c nghÏn träng m¹ng Ethernet, \noken Ring vµ FDDI (Fiber Distributed Data Inteface). ChuyÓn m¹ch thùc hiÖn \n\n®−îc viÖc nµy b»ng c¸ch gi¶m giao th\n®−îc sö dông ®Ó thay thÕ cho hub vµ vÉn ho¹t ®éng tèt víi c¸c cÊu tróc c¸p cã s½n. \n\n4\n\n \nT\n\n«ng vµ t¨ng b¨ng th«ng. LAN switch th−êng \n\n Switch thùc hiÖn ho¹t ®éng chÝnh sau: \n\n - ChuyÓn m¹ch frame \n\n - B¶o tr× ho¹t ®éng chuyÓn m¹ch. \n\n\n\n 346\n\n \n\n \n\nh¶ n¨ng truy cËp riªng biÖt trªn port \n\n Lo¹i trõ ®−îc ®ông ®é vµ t¨ng th«ng l−îng ®−êng truyÒn \n\n - Hç trî ®−îc nhiÒu phiªn giao dÞch cïng mét lóc \n\n - ChuyÓn frame dùa trªn b¶ng chuyÓn m¹ch \n\n + ChuyÓn frame dùa theo ®Þa chØ MAC (Líp 2). \n\n - Ho¹t ®éng ë Líp 2 cña m« h×nh OSI. \n\n - Häc vÞ trÝ kÕt nèi cña tõng m¸y tr¹m b»ng c¸ch ghi nhËn ®Þa chØ nguån trªn \nframe nhËn vµo. \n\n + ChuyÓn frame ra tÊt c¶ c¸c port khi ®Þa chØ ®Ých lµ qu¶ng b¸, multicast \nhoÆc lµ mét ®Þa chØ mµ switch kh«ng biÕt. \n\n + ChØ chuyÓn frame ra port kh¸c khi ®Þa chØ ®Ých n»m ë port kh¸c víi port \nnhËn vµo. \n\n \n\n   \n\n   \n\n \n\n - K\n\n- \n\n\n\n 347\n\n \n\nH×nh 4.2.5.b. Ho¹t ®éng c¬ b¶n cña switch. Ta xÐt ho¹t ®éng cña switch tõ lóc \nng b¶ng chuyÓn m¹ch. ë h×nh nµy, m¸y A thùc ban ®Çu ch−a cã th«ng tin g× tro\n\nhiÖn göi gãi d÷ liÖu cho m¸y B. \n\n \n\n \n\n \n\nH×nh 4.2.5.c. Switch nhËn ®−îc frame tõ m¸y A vµo port sè 3. Switch kiÓm tra \n®Þa chØ nguån trong frame nh©n ®−îc vµ ghi nhËn vµo b¶ng chuyÓn m¹ch: ®Þa \n\nchØ MAC cña m¸y A t−¬ng øng víi port sè 3. \n\n \n\n\n\n 348\n\n \n\n \n\n \n\n \n\n \n\nH×nh 4.2.5.d. ë thêi ®iÓm nµy, trªn b¶ng chuyÓn m¹ch cña switch ch−a cã \nth«ng tin g× vÒ ®Þa chØ ®Ých lµ ®Þa chØ MAC cña m¸y B. Do ®ã, switch chuyÓn \n\nframe ra tÊt c¶ c¸c port tõ port sè 3 lµ port nhËn frame vµo. \n\n \n\n \n\nH×nh 4.2.5.e. M¸y B nhËn ®−îc d÷ liÖu m¸y A göi cho nã, nã göi d÷ liÖu cña nã \nl¹i cho m¸y A \n\n \n\n\n\n 349\n\n \n\n Lóc nµy, switch nhËn vµo tõ port sè 4 gãi d÷ liÖu cña m¸y B göi cho m¸y A. \nCòng b»ng c¸ch häc ®Þa chØ nguån trong frame nhËn vµo, switch sÏ ghi nhËn ®−îc \nvµo b¶ng chuyÓn m¹ch: ®Þa chØ MAC cña m¸y B lµ t−¬ng øng víi port sè 4. §Þa chØ \n®Ých cña frame nµy lµ ®Þa chØ MAC cña  m¸y A mµ swithc ®· häc tr−íc ®ã. Do ®ã, \nswitch chØ chuyÓn frame ra port sè 3. \n\n \n\n4.2.6. Thêi gian trÔ cña Ethernet switch. \n\n Thêi gian trÔ lµ kho¶ng thêi gian tõ lóc switch b¾t ®Çu nhËn frame cho ®Õn \nkhi switch ®· chuyÓn hÕt frame ra port ®Ých. Thêi gian trÔ nµy phô thuéc vµo cÊu \nh×nh chuyÓn m¹ch vµ l−îng giao th«ng qua switch. \n\n Thêi gian trÔ ®−îc ®o ®¬n vÞ nhá h¬n gi©y. §èi víi thiÕt bÞ m¹ng ho¹t ®éng \nvíi tèc ®é cao th× mçi mét nano gi©y (ns) trÔ h¬n lµ mét ¶nh h−ëng lín ®Õn ho¹t \n®éng m¹ng. \n\n4.2.7. ChuyÓn m¹ch Líp 2 vµ Líp 3. \n\n ChuyÓn m¹ch lµ tiÕn tr×nh nhËn frame vµo tõ mét cæng vµ chuyÓn frame ra \nmét cæng kh¸c. Router sö dông chuyÓn m¹ch Líp 3 ®Ó chuyÓn m¹ch c¸c gãi ®· \n®−îc ®Þnh tuyÕn xong. Switch sö dông chuyÓn m¹ch Líp 2 ®Ó chuyÓn frame. \n\n ù kh¸c nhau gi÷a chuyÓn m¹ch Líp 2 vµ Líp 3 lµ lo¹i th«ng tin n»m trong \nframe ®−îc sö dông ®Ó quyÕt ®Þnh chän cæng ra lµ kh¸c nhau. ChuyÓn m¹ch Líp 2 \ndùa trªn th«ng tin vÒ ®Þa chØ MAC. Cßn chuyÓn m¹ch Líp 3 th× dùa vµ ®Þa chØ líp \nM¹ng vÝ dô nh− ®Þa chØ IP. \n\n ChuyÓn m¹ch Líp 2 nh×n vµo ®Þa chØ MAC ®Ých trong phÇn header cña frame \nvµ chuyÓn frame ra ®óng port dùa theo th«ng tin vÒ ®Þa chØ MAC trªn b¶ng chuyÓn \n\nS\n\n\n\n 350\n\nm¹ch. B¶ng chuyÓn m¹ch ®−îc l−u trong bé nhí ®Þa chØ CAM (Content \nAddressable Memory). NÕu switch Líp 2 kh«ng biÕt ph¶i göi frame ra port nµo cô \nthÓ th× ®¬n gi¶n lµ nã qu¶ng b¸ frame ra tÊt c¶ c¸c port cña nã. Khi nhËn ®−îc gãi \ntr¶ lêi vÒ, switch sÏ ghi nhËn ®Þa chØ míi vµo CAM. \n\n ChuyÓn m¹ch Líp 3 lµ mét chøc n¨ng cña Líp M¹ng. ChuyÓn m¹ch Líp 3 \nkiÓm tra th«ng tin n»m trong phÇn header cña Líp 3 vµ dùa vµo ®Þa chØ IP trong ®ã \n®Ó chuyÓn gãi. \n\n Dßng giao th«ng trong m¹ng chuyÓn m¹ch hay m¹ng ngang hµng hoµn toµn \nkh¸c víi dßng giao th«ng trong m¹ng ®Þnh tuyÕn hay m¹ng ph©n cÊp. Trong m¹ng \nph©n cÊp, dßng giao th«ng ®−îc uyÓn chuyÓn h¬n trong m¹ng ngang hµng. \n\n \n\n \nH×nh 4.2.7.a. ChuyÓn m¹ch líp 2 \n\n \n\n\n\n 351\n\n \n\nH×nh 4.2.7.b. ChuyÓn m¹ch líp 3 \n\n \n\n4.2.8. ChuyÓn m¹ch ®èi xøng vµ bÊt ®èi xøng. \n\n ChuyÓn m¹ch LAN ®−îc ph©n lo¹i thµnh ®èi xøng vµ bÊt ®èi xøng dùa trªn \nb¶ng th«ng cña mçi Port trªn switch. ChuyÓn m¹ch ®èi xøng lµ chuyÓn m¹ch gi÷a \nc¸c port cã cïng b¨ng th«ng. ChuyÓn m¹ch bÊt ®èi xøng lµ chuyÓn m¹ch gi÷a c¸c \nport cã b¨ng th«ng kh¸c nhau, vÝ dô nh− gi÷a c¸c port 10 Mb/s vµ port 100 Mb/s. \n\n ChuyÓn m¹ch bÊt ®èi xøng cho phÐp dµnh nhiÒu b¨ng th«ng h¬n cho port nèi \nvµo server ®Ó tr¸nh nghÏn m¹ch trªn ®−êng nµy khi cã nhiÒu client cïng truy cËp \nvµo server cïng mét lóc. ChuyÓn m¹ch bÊt ®èi xøng cÇn ph¶i cã bé nhí ®Öm ®Ó gi÷ \nframe ®−îc liªn tôc gi÷a hai tèc ®é kh¸c nhau cña hai port. \n\n - ChuyÓn m¹ch gi÷a hai port cã cïng b¨ng th«ng (10/10 Mb/s hay 100/100 \nMb/s). \n\n - Th«ng l−îng cµng t¨ng khi sè l−îng th«ng tin liªn l¹c ®ång thêi t¹i mét \nthêi ®iÓm cµng t¨ng. \n\n\n\n 352\n\n \n\n  \n\nH×nh 4.2.8.a . ChuyÓn m¹ch ®èi xøng. \n\n - ChuyÓn m¹ch gi÷a hai port kh«ng cïng b¨ng th«ng (10/100 Mb/s) \n\n - §ßi hái ph¶i cã bé nhí ®Öm. \n\n  \n\n \n\nH×nh 4.2.8.b. ChuyÓn m¹ch bÊt ®èi xøng. \n\n\n\n 353\n\n4.2.9. Bé ®Öm. \n\n Ethernet switch sö dông bé ®Öm ®Ó gi÷ vµ chuyÓn frame. Bé ®Öm cßn ®−îc \nsö dông khi port ®Ých ®ang bËn. Cã hai lo¹i bé ®Öm cã thÓ sö dông ®Ó chuyÓn frame \nlµ bé ®Öm theo port vµ bé ®Öm chia sÎ. \n\n Trong bé ®Öm theo port, frame ®−îc l−u thµnh tõng hµng ®îi t−¬ng øng víi \ntõng port nhËn vµo. Sau ®ã frame chØ ®−îc chuyÓn sang hµng ®îi cña port ®Ých khi \ntÊt c¶ c¸c frame tr−íc nã trong hµng ®îi ®· ®−îc chuyÓn hÕt. Nh− vËy mét frame cã \nthÓ lµm cho tÊt c¶ c¸c frame cßn l¹i trong hµng ®îi ph¶i ho·n l¹i v× port ®Ých cña \nframe nµy ®ang bËn. Ngay c¶ khi port ®Ých ®ang trèng th× còng vÉn ph¶i chê mét \nkho¶ng thêi gian ®Ó chuyÓn hÕt frame ®ã. \n\n Bé ®Öm ®−îc chia sÎ ®Ó tÊt c¶ c¸c frame vµo chung mét bé nhí. TÊt c¶ c¸c \nport cña switch chia sÎ cïng mét bé ®Öm. Dung l−îng bé ®Öm ®−îc tù ®éng ph©n \nbæ theo nhu cÇu cña mçi port ë mçi thêi ®iÓm. Frame ®−îc tù ®éng ph©n bæ theo \nnhu c\n\n Switch gi÷ mét s¬ ®å cho biÕt frame nµo t−¬ng øng víi port nµo vµ s¬ ®å nµy \n\ni ®−îc  vµ Ýt bÞ rít gãi h¬n. §iÒu nµy rÊt \nquan träng ®èi víi chuyÓn m¹ch bÊt ®ång bé v× frame ®−îc chuyÓn m¹ch gi÷a hai \nport cã\n\ng toµn bé frame råi míi b¾t ®Çu tiÕn tr×nh chuyÓn \n\nÇu cña mçi port ë mçi thêi ®iÓm. Frame trong bé ®Öm ®−îc tù ®éng ®−a ra \nport ph¸t. Nhê c¬ chÕ chia sÎ nµy, mét frame nhËn ®−îc tõ port nµy kh«ng cÇn ph¶i \nchuyÓn hµng ®îi ®Ó ph¸t ra port kh¸c. \n\nsÏ ®−îc xo¸ ®i sau khi ®· truyÒn frame thµnh c«ng. Bé ®Öm ®−îc sö dông theo d¹ng \nchia sÎ. Do ®ã l−îng frame l−u trong bé ®Öm bÞ giíi h¹n bëi tæng dung l−îng cña \nbé cña bé ®Öm chø kh«ng phô thuéc vµo vïng ®Öm cña tõng port nh− d¹ng bé ®Öm \ntheo port. Do ®ã frame lín cã thÓ chuyÓn ®\n\n tèc ®é kh¸c nhau. \n\n - Bé ®Öm theo port l−u c¸c frame theo hµng ®îi t−¬ng øng víi tõng port nhËn \nvµo. \n\n - Bé ®Öm chia sÎ l−u tÊt c¶ c¸c frame vµo chung mét bé nhí. TÊt c¶ c¸c port \ntrªn switch chia sÎ cïng mét vïng nhí nµy. \n\n4.2.10. Hai ph−¬ng ph¸p chuyÓn m¹ch. \n\n Sau ®©y lµ hai ph−¬ng ph¸p chuyÓn m¹ch dµnh cho frame: \n\n - Store-and-forwad: NhËn vµo toµn bé frame xong råi míi b¾t ®Çu chuyÓn ®i. \nSwitch ®äc ®Þa chØ nguån, ®Ých vµ läc frame nÕu cÇn tr−íc  khi quyÕt ®Þnh chuyÓn \nframe ra. V× switch ph¶i nhËn xon\n\n\n\n 354\n\nm¹ch frame nªn thêi gian trÔ sÏ cµng lín ®èi víi frame cµng lín. Tuy nhiªn nhê \nvËy switch míi cã thÓ kiÓm tra lçi cho toµn bé frame gióp kh¶ n¨ng ph¸t hiÖn lçi \ncao h¬n. \n\n - Cut-through: Frame ®−îc chuyÓn ®i tr−íc khi nhËn xong toµn bé frame. ChØ \ncÇn ®Þa chØ ®Ých cã thÓ ®äc ®−îc råi lµ ®· cã thÓ chuyÓn frame ra. Ph−¬ng ph¸p nµy \nlµm gi¶m thêi gian trÔ nh−ng ®ång thêi còng lµm gi¶m kh¶ n¨ng ph¸t hiÖn lçi \nframe. \n\n Sau ®©y lµ hai chÕ ®é chuyÓn m¹ch cô thÓ theo ph−¬ng ph¸p cut-through: \n\n - Fast-forward: ChuyÓn m¹ch nhanh cã thêi gian trÔ thÊp nhÊt. ChuyÓn m¹ch \nnhanh sÏ chuyÓn frame ra ngay sau khi ®äc ®−îc ®Þa chØ ®Ých cña frame mµ kh«ng \ncÇn ph¶i chê nhËn hÕt frame. Do ®ã c¬ chÕ nµy kh«ng kiÓm tra ®−îc frame nhËn \nvµo cã bÞ lçi hay kh«ng mÆc dï ®iÒu nµy kh«ng x¶y ra th−êng xuyªn vµ m¸y ®Ých \nsÏ huû gãi nÕu gãi bÞ lçi. Trong chÕ ®é chuyÓn m¹ch nhanh, thêi gian trÔ ®−îc tÝnh \ntõ lóc switch nhËn vµo bit ®Çu tiªn cho ®Õn khi switch ph¸t ra bit ®Çu tiªn. \n\n - Fragment-free: C¬ chÕ chuyÓn m¹ch nµy sÏ läc bá c¸ch m¶nh g·ydo ®ông \n®é g©y ra tr−íc khi b¾t ®Çu chuyÓn gãi. HÇu hÕt nh÷ng frame bÞ lçi trong m¹ng lµ \nnh÷ng m¶nh g·y cña frame do bÞ ®ông ®é. Trong m¹n ho¹t ®éng b×nh th−êng, mét \nm¶nh frame g·y do ®ông ®é g©y ra nhÊt ph¶i nhá h¬n 64 byte. BÊt kú frame nµo \nlín h¬n 64 byte ®Òu ®−îc xem lµ hîp lÖ vµ th−êng kh«ng cã lçi. Do c¬ chÕ chuyÓn \nm¹ch khi«ng m¶nh g·y sÏ chê nhËn ®ñ 64 byte ®Çu tiªn cña frame ®Ó ®¶m b¶o \nframe nhËn ®−îc kh«ng ph¶i lµ mét m¶nh g·y do bÞ ®ông ®é råi míi b¾t ®Çu \nchuyÓn frame ®i. Trong chÕ ®é chuyÓn m¹ch nµy, thêi gian trÔ còng ®−îc tÝnh tõ \nlóc switch nhËn ®−îc bit ®Çu tiªn cho ®Õn khi switch ph¸t ®i bit ®Çu tiªn ®ã. \n\n Thêi gian trÔ cña mçi chÕ ®é chuyÓn m¹ch phô thuéc vµo c¸ch mµ switch \nchuyÒn frame nh− thÕ nµo. §Î chuyÓn frame ®−îc nhanh h¬n, switch ®· bít thêi \ngian kiÓm tra lçi frame ®i nh−ng lµm nh− vËy l¹i lµm t¨ng l−îng d÷ liÖu cÇn truyÒn \nl¹i. \n\n4.3. Ho¹t ®éng cña switch. \n\n4.3.1. Chøc n¨ng cña Ethernet switch. \n\n Switch lµ mét thiÕt bÞ m¹ng chän lùa ®−êng d·n ®Ó göi frame ®Õn ®Ých, C¶ \nswitch vµ bridge ®Òu ho¹t ®éng ë Líp 2 cña m« h×nh OSI. \n\n\n\n 355\n\n \n\nÓ quyÕt ®Þnh chuyÓn frame nªn m¹ng Lan cã thÎ ho¹t ®éng \nhiÖu qu¶ h¬n. Switch nhËn biÕt host nµo kÕt nèi vµo port cña nã b»ng c¸ch ®äca ®Þa \nchØ MAC nguån trong frame mµ nã nhËn ®−îc. Khi hai host thùc hiÖn liªn l¹c víi \nnhau, switch chØ thiÕt lËp mét m¹ch ¶o gi÷a hai port t−¬ng øng vµ kh«ng lµm ¶nh \nh−ëng ®Õn l−u th«ng trªn c¸c port kh¸c. Trong khi ®ã, hub chuyÓn d÷ liÖu ra tÊt c¶ \nc¸c port cña nã nªn mäi host ®Òu nhËn ®−îc d÷ liÖu vµ ph¶i xö lý d÷ liÖu cho dï \nnh÷ng d÷ liÖu nµy kh«ng ph¶i göi cho chóng. Do ®ã, m¹ng Lan cã hiÖu suÊt ho¹t \n®éng cao th−êng sö dông chuyÓn m¹ch toµn bé. \n\n - Switch tËp trung c¸c kÕt nèi vµ quyÕt ®Þnh chän ®−êng dÉn ®Ó chuyÓn d÷ \nliÖu hiÖu qu¶. Frame ®−îc chuyÓn m¹ch tõ port nhËn vµo ®Õn port ph¸t ra. Mçi port \nlµ mét kÕt nèi cung cÊp chän b¨ng th«ng cho host. \n\n - Trong Ethernet hub, tÊt c¶ c¸c port kÕt nèi vµo mét m¹ch chÝnh, hay nãi \nc¸ch kh¸c, tÊt c¶ c¸c thiÕt bÞ kÕt nèi hub sÏ cïng chia sÎ b¨ng th«ng m¹ng. NÕu cã \nhai  m¸y tr¹m ®−îc thiÕt lËp phiªn kÕt nèi th× chóng sÏ sö dông mét l−îng b¨ng \nth«ng ®¸ng kÓ vµ ho¹t ®éng cña c¸c thiÕt bÞ cßn l¹i kÕt nèi vµo hub sÏ bÞ gi¶m \nxuèng. \n\n - §Ó gi¶i quyÕt t×nh tr¹ng trªn, switch xö lý mçi port lµ mét segment riªng \nbiÖt. Khi c¸c m¸y ë c¸c port kh¸c nhau cÇn liªn l¹c víi nhau, switch sÏ chuyÓn tõ \nframe tõ port nµy sang port  kia vµ ®¶m b¶o cung cÊp chon b¨ng th«ng cho mçi \nphiªn kÕt nèi. \n\n §Ó chuyÓn frame hiÖu qu¶ gi÷a c¸c port, switch l−u gi÷ mét b¶ng ®Þa chØ. \nKhi switch nhËn vµo mét frame, nã sÏ ghi nhËn ®Þa chØ MAC cña m¸y göi t−¬ng \nøng víi port mµ nã nhËn frame ®ã vµo. \n\n Sau ®©y lµ c¸c ®Æc ®iÓm chÝnh cña Ethernet switch \n\n - T¸ch biÖt giao th«ng trªn tõng segment \n\n - T¨ng nhiÒu h¬n l−îng b¨ng th«ng dµnh cho mçi user b»ng c¸ch t¹o miÒn \n®ông ®é nhá h¬n. \n\n §Æc ®iÓm ®Çu tiªn: T¸ch biÖt giao th«ng trªn tõng segment. Ethernet switch \nchia hÖ thèng m¹ng thµnh c¸c ®¬n vÞ cùc nhá gäi lµ microsegment. C¸c segment \n\n§«i khi switch cßn ®−îc gäi lµ bridge ®a port hay hub chuyÓn m¹ch. Swich \nquyÕt ®Þnh chuyÓn frame dùa trªn ®Þa chØ MAC, do ®ã nã ®−îc xÕp µo thiÕt bÞ Líp \n2. Ng−îc l¹i, hub chØ t¸i t¹o l¹i tÝn hiÖu Líp 1 vµ ph¸t tÝn hiÖu ®ã ra tÊt c¶ c¸c port \ncña nã mµ kh«ng hÒ thùc hiÖn mét sù chän lùa nµo. ChÝnh nhê switch cã kh¶ n¨ng \nchän lùa d−êng dÉn ®\n\n\n\n 356\n\nnh− vËy cho phÐp c¸c user trªn segment kh¸c nhau cã thÓ göi d÷ liÖu cïng mét lóc \nmµ kh«ng lµm chËm l¹i c¸c ho¹t ®éng cña m¹ng. \n\n »ng c¸ch chia nhá hÖ thèng m¹ng, b¹n sÏ lµm gi¶m l−îng user vµ thiÕt bÞ \ncïng chia sÎ mét b¨ng th«ng. Mçi segment lµ mét miÒn ®ông ®é riªng biÖt. \nEthernet switch giíi h¹n l−u th«ng b»ng chØ chuyÓn gãi ®Õn ®óng port cÇn thiÕt dùa \ntrªn ®Þ\n\nai cña Ethernet switch lµ ®¶m b¶o cung cÊp b¨ng th«ng nhiÒu \nh¬n cho user b»ng c¸ch t¹o c¸c miÒn ®ông ®é nhá h¬n. Ethernet vµ Fast Ethernet \nswitch\n\ntÝnh. Khi \nc¸c øng dông míi nh\nnªn phæ bi\n\nµ kh«ng cÇn chê  nhËn ®−îc hÕt frame. Nh− vËy, frame ®−îc chuyÓn ®i tr−íc \nkhi nhËn hÕt toµn bé frame.. Do ®ã, thêi gian trÔ gi¶m xuèng nh−ng kh¶ n¨ng ph¸t \nhiÖn lç\n\n \nframe ®i. Switch ®äc ®Þa chØ nguån, ®Ých vµ thùc hiÖn läc bá frame nÕu cÇn råi míi \n\n®Çu tiªn cña Ethernet frame råi míi \nment-free lµ mét thuËt ng÷ ®−îc sö dông ®Ó chØ \n\nswitch ®ang sö dông mét d¹ng c¶i biªn cña chuyÓn m¹ch cut-through. \n\n Mét chÕ ®é chuyÓn m¹ch kh¸c ®−îc kÕt hîp gi÷a cut-through vµ store-and-\nforward. KiÓu kÕt hîp nµy gäi lµ cut-through thÝch nghi (adaptive cut-through). \n\nB\n\na chØa MAC Líp 2. \n\n §Æc ®iÓm thø h\n\n chia nhá m¹ng LAN thµnh nhiÒu segment nhá. Mçi segment nµy lµ mét kÕt \nnèi riªng gièng nh− lµ mét lµn ®−êng riªng 100 Mb/s vËy. Mçi serer cã thÓ ®Æt trªn \nmét kÕt nèi 100 Mb/s riªng. Trong c¸c hÖ thèng mang hiÖn nay, Fast Ethernet \nswitch ®−îc sö dông lµm ®−êng trôc chÝnh cho LAN, cßn Ethernet hub, Ethernet \nswitch hoÆc Fast Ethernet hub ®−îc sö dông ®Ó kÕt nèi xuèng c¸c m¸y \n\n− truyÒn th«ng ®a ph−¬ng tiÖn, video héi nghÞ ... ngµy cµng trë \nÕn h¬n th× mçi m¸y tÝnh sÏ ®−îc mét kÕt nèi 100 Mb/s riªng vµo switch. \n\n4.3.2. C¸c chÕ ®é chuyÓn m¹ch frame \n\n Cã 3 chÕ ®é chuyÓn m¹ch frame: \n\n - Fast-forwad: switch ®äc ®−îc ®Þa chØ cña frame lµ b¾t ®Çu chuyÓn frame ®i \nlu«n m\n\ni kÐm. Fast-forward lµ mét thuËt ng÷ ®−îc sö dông ®Ó chØ switch ®ang ë chÕ \n®é chuyÓn m¹ch cut-through. \n\n- Store \u2013and-forward: NhËn vµo toµn bé frame råi míi b¾t ®Çu chuyÓn \n\nquyÕt ®Þnh chuyÓn frame ®i. Thêi gian switch nhËn frame vµo sÏ g©y ra thêi gian \ntrÔ. Frame cµng lín th× thêi gian trÔ cµng v× switch ph¶i nhËn xong toµn bé frame \nråi míi tiÕn hµnh chuyÓn m¹ch cho frame. Nh−ng nh− vËy th× switch míi cã ®ñ \nthêi gian vµ d÷ liÖu ®Ó kiÓm tra lçi frame, nªn kh¶ n¨ng ph¸t hiÖn lçi cao h¬n. \n\n - Fragment-free: NhËn vµo hÕt 64 byte \nb¾t ®Çu chuyÓn frame ®i. Frage\n\n\n\n 357\n\nTrong chÕ ®é nµy, switch sÏ sö dông chuyÓn m¹ch cut-through cho ®Õn khi nµo nã \nph¸t hiÖn ra mét l−îng frame bÞ lçi nhÊt ®Þnh. Khi sè l−îng frame bÞ lçi v−ît qu¸ \nmøc ng−ìng th× khi ®ã switch sÏ chuyÓn dïng chuyÓn m¹ch store-and-forwad. \n\n   \n\n \n\n \n\n \n\nBridge ®−îc xem lµ mét thiÕt bÞ th«ng minh v× nã cã thÓ quyÕt ®Þnh chuyÓn \n\nframe dùa trªn ®Þa chØ MAC. §Ó thùc hiÖn c«ng viÖc nµy, bridge x©y dùng mét \n\nb¶ng ®Þa chØ. Khi bridge b¾t ®Çu ®−îc bËt lªn, nã sÏ qu¶ng b¸ mét th«ng ®iÖp cho \n\nmäi m¸y tr¹m trong segment  kÕt nèi vµo nã ®Ó yªu cÇu c¸c m¸y nµy tr¶ lêi. Khi \n\n4.3.3. Bridge vµ switch häc ®Þa chØ nh− thÕ nµo \n\nBridge vµ switch chØ chuyÓn tõ segment nµy sang segment kh¸c khi cÇn thiÕt. \n\n§Ó thùc hiÖn nhiÖm vô nµy, bridge vµ switch ph¶i biÕt thiÕt bÞ nµo kÕt nèi vµo \n\nsegment nµo. \n\n\n\n 358\n\nc¸c m¸y tr¹m tr¶ lêi cho th«ng ®iÖp qu¶ng b¸, bridge sÏ ghi nhËn l¹i ®Þa chØ cña c¸c \n\nm¸y vµo b¶ng ®Þa chØ cña m×nh. Qu¸ tr×nh nµy ®−îc gäi lµ qu¸ tr×nh häc ®Þa chØ. \n\nBridge vµ switch häc ®Þa chØ theo c¸c c¸ch sau: \n\n* §äc  ®Þa chØ MAC nguån trong mçi frame nhËn ®−îc. \n\n Ghi nhËn l¹i sè port mµ switch sÏ häc ®−îc ®Þa chØ nµo thuéc vÒ thiÕt bÞ kÕt \n\nnèi vµo port nµo cña bridge hoÆc switch. \n\n* §Þa chØ häc ®−îc vµ sè port t−¬ng øng sÏ l−u trong b¶ng ®Þa chØ. Bridge sÏ \n\nkiÓm tra ®Þa chØ ®Ých n»m trong frame nhËn ®−îc råi dß t×m ®Þa chØ ®Ých nµy trong \n\nb¶ng ®Þa chØ ®Ó t×m port t−¬ng øng. \n\nCAM (Content Addressable Memory) ®−îc sö dông cho c¸c ho¹t ®éng sau:  \n\n* LÊy ra th«ng tin ®Þa chØ trong gãi d÷ liÖu nhËn ®−îc vµ xö lý chóng \n\n* So s¸nh ®Þa chØ ®Ých cña frame víi c¸c ®Þa chØ trong b¶ng cña nã \n\nCAM l−u gi÷ b¶ng ®Þa chØ MAC vµ sè port t−¬ng øng. CAM sÏ so s¸nh ®Þa \n\nchØ MAC nhËn ®−îc víi néi dung cña b¶ng CAM. NÕu t×m thÊy ®óng ®Þa chØ ®Ých \n\nth× sè port t−¬ng øng sÏ ®−îc chän ®Ó chuyÓn gãi ra. \n\nEthernet switch häc ®Þa chØ cña tõng thiÕt bÞ trong m¹ng kÕt nèi vµo nã b»ng \n\nc¸ch ®äc ®Þa chØ nguån cña tõng frame mµ nã nhËn ®−îc vµ ghi nhí sè port mµ nã \n\nvõa nhËn frame ®ã vµo. Nh÷ng th«ng tin häc ®−îc sÏ l−u trong CAM. Mçi khi nã \n\n®äc ®−îc mét ®Þa chØ míi ch−a cã trong CAM th× nã sÏ tù ®éng häc vµ l−u l¹i ®Þa \n\nchØ ®ã ®Ó sö dông cho lÇn sau. Mçi ®Þa chØ nh− vËy ®−îc ®¸nh dÊu thêi gian cho \n\nphÐp ®Þa chØ cã ®−îc l−u gi÷ trong mét kho¶ng thêi gian. \n\nSau ®ã mçi khi switch ®äc mét ®Þa chØ nguån trong frame, ®Þa chØ t−¬ng øng \n\ntrong CAM sÏ ®−îc ®¸nh dÊu thêi gian míi. NÕu trong suèt kho¶ng thêi gian ®¸nh \n\n*\n\n\n\n 359\n\ndÊu mµ switch kh«ng cã ghi nhËn g× n÷a vÒ ®Þa chØ ®ã th× nã sÏ xo¸ ®Þa chØ ®ã ra \n\nkhái b¶ng. Nhê vËy CAM lu«n gi÷ ®−îc th«ng tin cña m×nh chÝnh x¸c vµ kÞp thêi. \n\nSau ®©y lµ qu¸ tr×nh xö lý cña CAM: \n\n1. NÕu bridge kh«ng t×m thÊy ®Þa chØ ®Ých trong b¶ng cña nã th× nã sÏ \n\nchuyÓn frame ra tÊt c¶  c¸c  port trõ port nhËn frame vµo. \n\n2. B¶ng ®Þa chØ cña bridge cã thÓ bÞ xo¸ do bridge khëi ®éng l¹i hoÆc mét ®Þa \nchØ nµo ®ã ®· bÞ xo¸ v× ®· hÕt thêi gian ®¸nh dÊu mµ bridge vÉn kh«ng nhËn \n®−îc th«ng tin nµo vÒ ®Þa chØ ®ã n÷a. Khi bridge kh«ng biÕt chän port nµo ®Ó \nchuyÓn frame th× nã göi frame ra tÊt c¶ c¸c port tõ port nhËn frame vµo. §−¬ng \nnhiªn lµ kh«ng cÇn ph¶i göi l¹i frame ra port mµ nã võa ®−îc nhËn vµo n÷a vi \nc¸c thiÕt bÞ kh¸c n»m trong segment kÕt nèi vµo port ®ã còng ®· nhËn ®−îc \nframe råi. \n\n. NÕu bridge t×m thÊy ®Þa chØ trong b¶ng nh−ng port t−¬ng øng còng chÝnh \n\nlµ port mµ nã võa nhËn frame vµo, lóc nµ\n\nrt t−¬ng øng lµ port kh¸c víi \n\nport nhËn frame vµo th× bridge sÏ chuyÓn frame ra ®óng port t−¬ng øng víi ®i¹ chØ \n\n®Ých. \n\n3\n\ny bridge sÏ huû bá gãi d÷ liÖu ®ã v× m¸y \n\n®Ých n»m cïng segment víi m¸y nguån vµ nã ®· nhËn ®−îc frame råi. \n\n4. NÕu bridge t×m thÊy ®Þa chØ trong b¶ng vµ po\n\n \n\n\n\n 360\n\n4.3.4. \n\nBridge cã kh¶ n¨ng läc frame dùa trªn bÊt kú th«ng tin Líp 2 nµo trong frame. \n\ndge cã thÓ läc frame dùa vµo ®Æc ®iÓm nµy. H¬n n÷a viÖc \ncã Ých ®èi víi c¸c gãi qu¶ng b¸ vµ multicast kh«ng cÇn thiÕt. \n\nMét khi bridge ®· x©y dùng xong b¶ng ®Þa chØ cña nã th× cã nghÜa lµ nã ®· \n\ns½n sµng ho¹t ®éng. Khi nã nhËn vµo frame, nã kiÓm tra ®Þa chØ ®Ých. NÕu ®Þa chØ \n\n®Ých n»m cïng phÝa víi port nhËn frame th×  bridge sÏ huû frame ®i. §éng t¸c nµy \n\n®−îc gäi lµ läc frame. NÕu ®i¹ chØ ®Ých n»m trªn segment kh¸c th× bridge sÏ chuyÓn \n\nframe ra segment ®ã. \n\nVÒ c¬ b¶n, bridge chØ läc bá nh÷ng frame ®−îc göi trong néi bé mét \n\nsegment vµ chØ chuyÓn c¸c frame göi sang segment kh¸c. \n\nCßn läc frame ®Æc biÖt theo ®Þa chØ nguån vµ ®Ých th× cã c¸c d¹ng sau: \no mét m¸y nµo ®ã ®−îc göi frame ra ngoµi segment cña m¸y ®ã. \n\nme ®Õn mét m¸y nµo ®ã. \n\nNhê vËy cã thÓ ng¨n kh«ng cho c¸c m¸y kh¸c cã thÓ th«ng tin liªn l¹c víi mét m¸y \n\nnµo ®ã\n\nulticast. §«i \n\nkhi cã mét\n\nqu¶ng b¸ ®i kh¾p m¹ng. Mét c¬n b·o qu¶ng b¸ cã thÓ lµm cho ho¹t ®éng m¹ng trë \n\nthµnh con sè 0. Do ®ã nÕu bridge kh«ng thÓ läc bá c¸c gãi qu¶ng b¸ th× c¬n b·o \n\nNgµy nay, bridge cßn cã thÓ läc frame tuú theo giao thøc líp m¹ng ë trªn. \n\n§iÒu nµy lµm gi¶m ®i ranh giíi gi÷a bridge vµ router. Router ho¹t ®éng ë líp \n\nBridge vµ switch thùc hiÖn läc frame nh− thÕ nµo  \n\nVÝ dô: bridge cã thÓ ®−îc cÊu h×nh ®Ó tõ chèi kh«ng chuyÓn tÊt c¶ c¸c frame cã \n®Þa chØ nguån tõ mét m¹ng nµo ®ã. C¸c th«ng tin líp 2 th−êng cã ph¶n ¸nh giao \nthøc líp trªn nªn bri\nläc frame còng rÊt \n\n* Kh«ng ch\n\n* Kh«ng cho tÊt c¶ c¸c frame tõ bªn ngoµi göi fra\n\n. \n\nC¶ hai lo¹i läc frame trªn ®Òu gióp kiÓm so¸t giao th«ng m¹ng vµ t¨ng kh¶ \n\nn¨ng b¶o mËt. \n\nHÇu hÕt Ethernet bridge ®Òu cã kh¶ n¨ng läc gãi qu¶ng b¸ vµ m\n\n thiÕt bÞ nµo ®ã ho¹t ®éng kh«ng b×nh th−êng vµ liªn tôc ph¸t ra c¸c gãi \n\nqu¶ng b¸ sÏ cã kh¶ n¨ng x¶y ra.   \n\n\n\n 361\n\nm¹ng, sö dông giao thøc ®Þnh tuyÕn ®Ó ph©n luång giao th«ng trªn m¹ng. Cßn \n\nbridge sö dông kü thuËt läc c¶i tiÕn dùa trªn th«ng tin líp m¹ng ®−îc gäi lµ \n\nbrouter. Brouter kh¸c víi router ë chç lµ kh«ng sö dông giao thøc ®Þnh tuyÕn. \n\n4.3.5. Ph©n ®o¹n m¹ng LAN b»ng bridge \n\nM¹ng Ethernet LAN ®−îc ph©n ®o¹n b»ng bridge lµm gi¶m sè l−îng user \n\ntrªn mçi segment, do ®ã sÏ t¨ng ®−îc l−îng b¨ng th«ng dµnh cho mçi user. \n\nBridge chia m¹ng ra b»ng c¸ch x©y dùng b¶ng ®i¹ chØ trong ®ã cho biÕt ®Þa \n\nchØ cña tõng thiÕt bÞ m¹ng n»m trong segment nµo. Khi ®ã, dùa vµo ®Þa chØ MAC \n\ncña frame bridge sÏ cã thÓ quyÕt ®Þnh chuyÓn frame hay kh«ng. Ngoµi ra, bridge \n\nthêi gian trÔ trong m¹ng lªn kho¶ng 10% ®Õn 30%, thêi gian \n\ntrÔ nµy lµ thêi gian ®Ó bridge quyÕt ®Þnh vµ thùc hiÖn chuyÓn m¹ch d÷ liÖu. Bridge \n\nchuyÓn m¹ch theo d¹ng nhËn \u2013 råi chuyÓn nªn nã ph¶i nhËn hÕt toµn bé frame, \n\nframe\n\n \n\ncßn ®−îc xem lµ trong suèt ®èi víi c¸c thiÕt bÞ kh¸c trong m¹ng. \n\nBridge lµm t¨ng \n\nkiÓm tra ®Þa chØ nguån vµ ®Ých, tÝnh to¸n CRC ®Ó kiÓm tra lçi frame råi míi chuyÓn \n\n ®i. NÕu port ®Ých ®ang bËn th× bridge sÏ t¹m thêi l−u frame l¹i cho ®Õn khi \n\nport ®Ých ®−îc gi¶i phãng. ChÝnh nh÷ng kho¶ng thêi gian nµy lµm t¨ng thêi gian trÔ \n\nvµ lµm chËm qu¸ tr×nh truyÒn trªn m¹ng. \n\n\n\n 362\n\n \n\n \n\n \n\n \n\n* Chia nhá m¹ng lµm gi¶m sè l−îng user trªn mét segment. \n\n* Bridge nhËn råi chuyÓn frame dùa trªn ®Þa chØ líp 2 \n\n\n\n 363\n\n* §éc lËp víi giao thøc líp 3 \n\n* Lµm t¨ng thêi gian trÔ trong m¹ng. \n\n \n\n \n\n\n\n 364\n\n \n\n \n\n \n\n\n\n 365\n\n \n\n \n\n4.3.6. T¹i sao ph¶i ph©n ®o¹n m¹ng LAN \n\nCã hai nguyªn nh©n chÝnh ®Ó chóng ta ph©n ®o¹n m¹ng LAN, thø nhÊt lµ ®Ó \n\nph©n luång giao th«ng gi÷a c¸c segment. Thø hai lµ ®Ó t¨ng l−îng b¨ng th«ng cho \n\nmçi user b»ng c¸ch t¹o miÒn ®ông ®é nhá h¬n. \n\nNÕu kh«ng ph©n ®o¹n m¹ng LAN, m¹ng LAN lín nhanh chãng bÞ nghÏn \n\nm¹ch v× mËt ®é giao th«ng vµ ®ông ®é qu¸ nhiÒu. \n\nB¹n  cã thÓ sö dông bridge, switch vµ router ®Ó chia nhá m¹ng LAN thµnh \n\nnhiÒu segment. Mçi segment lµ mét miÒn ®ông ®é riªng biÖt. \n\nBridge vµ switch cã nhiÒu −u ®iÓm khi sö dông ®Ó chia mét m¹ng lín thµnh \n\nnhiÒu ®¬n vÞ ®éc lËp. Bridge vµ switch sÏ gi¶m bít l−îng giao th«ng trªn tÊt c¶ c¸c \n\nsegment v× chóng chØ chuyÓn mét tØ lÖ giao th«ng nhÊt ®Þnh ra ngoµi mét segment \n\nchø kh«ng ph¶i toµn bé. Tuy bridge vµ switch cã thÓ thu hÑp miÒn ®ông ®é nh−ng \n\nl¹i kh«ng thu hÑp ®−îc miÒn qu¶ng b¸. \n\n\n\n 366\n\n \n\nMçi mét cæng trªn router kÕt nèi vµo mét m¹ng riªng. Do ®ã, router sÏ chia \n\nmét m¹ng LAN thµnh nhiÒu miÒn ®ông ®é nhá h¬n vµ ®ång thêi thµnh nhiÒu miÒn \n\nqu¶ng b¸ nhá h¬n v× router kh«ng chuyÓn gãi qu¶ng b¸ trõ phi nã ®−îc cÊu h×nh ®Ó \n\nlµm nh− vËy. \n\nseg\n\nliª\n\nm¹\n\nnh\n\nSwitch chia m¹ng LAN thµnh c¸c miÒn cùc nhá gäi lµ microsegment. Mçi \n\nment nh− vËy lµ mét kÕt nèi ®iÓm - ®Õn - ®iÓm riªng biÖt. Khi cã hai m¸y cÇn \n\nn l¹c víi nhau, switch sÏ thiÕt lËp mét m¹ch ¶o gi÷a hai port cña hai m¸y ®ã vµ \n\nch ¶o nµy chØ tån t¹i trong kho¶ng thêi gian cÇn thiÕt cho hai m¸y  liªn l¹c víi \n\nau th«i. \n\n \n\n \n\n\n\n 367\n\n4.3.7. Thùc hiÖn ph©n ®o¹n cùc nhá (microsegment) \n\nã thÓ \n\nph©n ®o¹n cùc nhá. B»ng c¸ch ®äc ®Þa chØ MAC ®Ých, switch cã thÓ chuyÓn m¹ch \n\nframe ridge. Tuy nhiªn switch cã thÓ chuyÓn m¹ch frame ra \n\nport ®Ých tr−íc khi nhËn hÕt toµn bé frame gióp gi¶m thêi gian trÔ vµ t¨ng tèc ®é \n\nchuyÓn frame. \n\nEthernet switch chia m¹ng LAN thµnh nhiÒu segment, mçi segment lµ mét \n\nkÕt nèi ®iÓm - ®Õn - ®iÓm vµ switch kÕt nèi c¸c segment nµy b»ng m¹ch ¶o. M¹ch \n\n¶o chØ ®−îc thiÕt lËp bªn trong switch vµ tån t¹i khi hai m¸y cÇn liªn l¹c víi nhau \n\nth«i. Nhê vËy chuyÓn m¹ch Ethernet cã thÓ lµm t¨ng b¨ng th«ng kh¶ dông trªn \n\nm¹ng. \n\nMÆc dï LAN switch cã thÓ thu nhá kÝch th−íc miÒn ®ông ®é nh−ng tÊt c¶ \n\nc¸c host kÕt nèi vµo switch vÉn n»m trong cïng mét miÒn qu¶ng b¸. Do ®ã, mét gãi \n\nqu¶ng b¸ tõ mét m¸y vÉn ®−îc göi ®Õn tÊt c¶ c¸c m¸y kh¸c th«ng qua switch. \n\nSwitch lµ mét thiÕt bÞ lín liªn kÕt d÷ liÖu gièng nh− brige, cho phÐp kÕt nèi \n\nnhiÒu segment LAN vËt lý víi nhau thµnh mét m¹ng lín. T−¬ng tù nh− bridge, \n\nswitch còng chuyÓn gãi dùa trªn ®Þa chØ MAC. Nh−ng switch chuyÓn m¹ch phÇn \n\ncøng chø kh«ng chuyÓn m¹ch b»ng phÇn mÒm nªn nã cã tèc ®é nhanh h¬n. Mçi \n\nmét port cña switch cã thÓ ®−îc xem lµ mét brige riªng biÖt víi trän b¨ng th«ng \n\ndµnh cho mçi port ®ã. \n\n4.3.8. Switch vµ miÒn ®ông ®é \n\nNh−îc ®iÓm lín nhÊt cña m¹ng Ethernet 802.3 lµ ®ông ®é. §ông ®é x¶y ra \n\nkhi cã hai m¸y truyÒn d÷ liÖu ®ång thêi. Khi ®ông ®é x¶y ra, mäi frame ®ang ®−îc \n\ntruyÒn ®Òu bÞ ph¸ huû. C¸c m¸y ®ang truyÒn sÏ ng−ng viÖc truyÒn d÷ liÖu l¹i vµ chê \n\nLAN switch ®−îc xem lµ bridge ®a port kh«ng cã miÒn ®ông ®é v× nã c\n\n víi tèc ®é cao nh− b\n\n\n\n 368\n\nmét kho¶ng thêi gian ngÉu nhiªn theo quy luËt cña CSMA/CD. NÕu ®ông ®é nhiÒu \n\nqu¸ møc sÏ lµm cho m¹ng kh«ng ho¹t ®éng ®−îc. \n\n \n\nMiÒn ®ông ®é lµ khu vùc mµ frame ®−îc ph¸t ra cã thÓ bÞ ®ông ®é. TÊt c¶ \n\nc¸c m«i tr−êng m¹ng chia sÎ víi nhau lµ c¸c miÒn ®ông ®é. Khi kÕt nèi mét m¸y \n\nvµo mét port cña switch, switch sÏ t¹o mét kÕt nèi riªng biÖt b¨ng th«ng 10Mb/s \n\ncho m¸y ®ã. KÕt nèi nµy lµ mét miÒn ®ông ®é riªng. VÝ dô: nÕu ta kÕt nèi m¸y vµo \n\nmét port cña mét switch 12 port th× ta sÏ t¹o ra 12 miÒn ®ông ®é riªng biÖt. \n\n \n\n \n\n \n\n\n\n 369\n\nSwitch x©y dùng b¶ng chuyÓn m¹ch b»ng c¸ch ®Þa chØ MAC cña c¸c host kÕt \n\nnèi trªn mçi port cña switch. Khi hai host kÕt nèi vµo switch muèn liªn l¹c víi \n\nnh  p kÕt nèi ¶o gi÷a hai \n\npor ªn giao dÞch kÕt \n\nthóc. \n\n. c, Host B vµ Host C muèn liªn l¹c víi nhau switch sÏ \n\nthiÕt lËp mét kÕt nèi ¶o gi÷a hai port cña Host B vµ Host C t¹o thµnh mét \n\nmic s ét m¹ng chØ cã hai host duy nhÊt, \n\nmé do ®ã nã sö dông ®−îc toµn bé b¨ng th«ng kh¶ \n\nông trong m¹ng. \n\n®é vµ t¨ng b¨ng th«ng m¹ng v× nã cung cÊp b¨ng th«ng \n\n \n\nau, switch sÏ t×m trong b¶ng chuyÓn m¹ch cña nã vµ thiÕt lË\n\nt cña hai host ®ã. KÕt nèi ¶o nµy ®−îc duy tr× cho ®Õn khi phi\n\nTrong vÝ dô h×nh 4.3.8\n\nro egment. Microsegment ho¹t ®éng nh− m\n\nt host göi vµ mét host nhËn, \n\nd\n\nSwitch gi¶m ®ông \n\ndµnh  riªng cho mçi segment. \n\n \n\n4.3.9. Switch vµ miÒn qu¶ng b¸ \n\nTh«ng tin liªn l¹c trong m¹ng ®−îc thùc hiÖn theo 3 c¸ch. C¸ch th«ng dông \n\nnhÊt lµ göi trùc tiÕp tõ mét m¸y ph¸t ®Õn mét m¸y thu. \n\n\n\n 370\n\nC¸ch thø 2 lµ truyÒn multicast. TruyÒn multicast ®−îc thùc hiÖn khi mét m¸y \n\no mét nhãm n»m trong segment. \n\nC¸ch thø 3 lµ truyÒn qu¶ng b¸. TruyÒn qu¶ng b¸ ®−îc thùc hiÖn khi mét m¸y \n\nnt ®Òu nhËn ®−îc th«ng ®iÖp nµy. \n\nt gãi qu¶ng b¸ líp 2 th× ®Þa chØ MAC ®Ých cña \n\nfra  Víi ®Þa chØ ®Ých nh− \n\nvËy\n\nmuèn göi gãi cho mét m¹ng con, hay ch\n\nmuèn göi cho tÊt c¶ c¸c m¸y kh¸c trong m¹ng. VÝ dô nh− server giö ®i mét th«ng \n\n®iÖp vµ tÊt c¶ c¸c m¸y kh¸c trong cïng segme\n\nKhi mét thiÕt bÞ muèn göi mé\n\nme ®ã sÏ lµ FF:FF:FF:FF:FF:FF theo sè thËp  lôc ph©n.\n\n, mäi thiÕt bÞ ®Òu ph¶i nhËn vµ xö lý gãi qu¶ng b¸. \n\n \n\n \n\nMiÒn g líp 2 cßn ®−îc xem miÒn qu¶ng b¸ MAC. MiÒn qu¶ng b¸ MAC \n\n tÊt c¶ c¸c thiÕt bÞ trong ame qu¶ng b¸ tõ mét host \n\n® . \n\nSwitc 2  b¸ th× nã sÏ göi \n\nra tÊt c¶ c¸c port cña nã trõ port nhËn gãi vµo. Mçi thiÕt bÞ nhËn ®−îc gãi qu¶ng b¸ \n\n qu¶n\n\nbao gåm\n\ntrong LAN \n\nLAN cã thÓ nhËn ®−îc fr\n\nã\n\nh lµ mét thiÕt bÞ líp . Khi switch nhËn ®−îc gãi qu¶ng\n\n\n\n 371\n\n®Òu ph¶i xö ý th«ng tin n»m trong ®ã. §iÒu nµy lµm gi¶m hiÖu qu¶ ho¹t ®éng cña \n\nm¹ng v× tèn ¨ng th«ng cho môc\n\nKhi hai switch kÕt nèi víi nhau, kÝch th−íc miÒn qu¶ng b¸ ®−îc t¨ng lªn. VÝ \n\ndô nh− h×nh 4.3.9.b-c, gãi qu¶ng b¸ ®−îc göi ra tÊt c¶ c¸c port cña Switch. 1 Switch \n\n1 kÕt nèi víi Switch 2. Do ®ã gã  \n\nkÕt nèi  vµo Switch 2. \n\nHËu  qu¶ lµ l−îng b¨ng th«ng kh¶ dông gi¶m xuèng v× tÊt c¶ c¸c thiÕt bÞ \n\nïng m iÒn qu¶ng b¸ ®\n\n l\n\n b  ®Ých qu¶ng b¸. \n\ni qu¶ng b¸ còng ®−îc truyÒn cho tÊt c¶ c¸c thiÕt bÞ\n\ntrong c ét m Òu ph¶i nhËn vµ xö lý gãi qu¶ng b¸. \n\n \n\n \n\n \n\n\n\n 372\n\n \n\nRouter lµ thiÕt bÞ líp 3. Router kh«ng chuyÓn tiÕp c¸c gãi qu¶ng b¸. Do ®ã \n\nRo\n\nb¸.\n\n4.3\n\nc¸c thiÕt bÞ kh¸c cïng kÕt nèi vµo LAN ®ã. M¸y tr¹m chØ ®¬n gi¶n lµ sö dông NIC \n\n®Ó \n\nhoÆ\n\nSwitch lµ thiÕt bÞ líp 2 th«ng minh, cã thÓ häc ®Þa chØ MAC cña c¸c thiÕt bÞ \n\nkÕt nèi vµo port cña nã. ChØ ®Õn khi thiÕt bÞ b¾t ®Çu truyÒn d÷ liÖu ®Õn switch th× nã \n\nmíi häc ®−îc ®Þa chØ MAC cña thiÕt bÞ vµo b¶ng chuyÓn m¹ch. Cßn tr−íc ®ã nÕu \n\nthiÕt bÞ ch−a hÒ göi d÷ liÖu g× ®Õn switch th× switch ch−a nhËn biÕt g× vÒ thiÕt bÞ \n\nnµy. \n\nuter ®−îc sö dông ®Ó chia m¹ng thµnh nhiÒu miÒn ®ông ®é vµ nhiÒu miÒn qu¶ng \n\n \n\n.10. Th«ng tin liªn l¹c gi÷a Switch vµ m¸y tr¹m \n\nKhi mét m¸y tr¹m ®−îc kÕt nèi vµo mét LAN, nã kh«ng cÇn quan t©m ®Õn \n\ntruyÒn d÷ liÖu xuèng m«i tr−êng truyÒn. \n\nM¸y tr¹m cã thÓ ®−îc kÕt nèi trùc tiÕp víi mét m¸y tr¹m kh¸c b»ng c¸p chÐo \n\nc lµ kÕt nèi vµo mét thiÕt bÞ m¹ng nh− hub, switch hoÆc router b»ng c¸p th¼ng. \n\n\n\n 373\n\nTæng kÕt \nSau khi kÕt thóc ch−¬ng nµy, b¹n cÇn n¾m ®−îc c¸c ý quan träng sau: \n\n* LÞch sö vµ chøc n¨ng cña Ethernet chia sÎ, b¸n song c«ng. \n\n* §ông ®é trong m¹ng Ethernet \n\n* Microsegment. \n\n* CSMA/CD \n\n* C¸c yÕu tè ¶nh h−ëng ®Õn ho¹t ®éng m¹ng \n\n* Chøc n¨ng cña repeater \n\n* Thêi \n\n* Chøc n¨ng c¬ b¶n cña Fast Ethernet \n\n* Ph©n ®o¹n m¹ng b»ng router, switch, vµ bridge \n\n* Ho¹t ®éng c¬ b¶n cña switch \n\n* Thêi gian trÔ cña Ethernet switch \n\n* Sù kh¸c nhau gi÷a chuyÓn m¹ch líp 2 vµ líp 3 \n\n* ChuyÓn m¹ch ®èi xøng vµ bÊt ®èi xøng \n\n* Bé ®Öm \n\n* ChuyÓn m¹ch kiÓu store \u2013 and \u2013 forward vµ kiÓu cut \u2013 through. \n\n* Sù kh¸c nhau gi÷a hub, bridge vµ switch \n\n* Chøc n¨ng chÝnh cña switch \n\n* C¸c chÕ ®é chuyÓn m¹ch chÝnh cña switch \n\ngian truyÒn \n\n\n\n 374\n\n* TiÕn tr×nh häc ®Þa chØ cña switch \n\n* TiÕn tr×nh läc frame \n\n* MiÒn ®ông ®é va miÒn qu¶ng b¸. \n\n\n\n 375\n\nCHƯƠNG 5: Switch \n\nGiíi thiÖu \n\n \n\nThiÕt kÕ m¹ng lµ mét c«ng viÖc ®Çy th¸ch thøc chø kh«ng chØ ®¬n gi¶n lµ kÕt \n\nnèi c¸c m¸y tÝnh l¹i víi nhau. Mét hÖ thèng m¹ng ph¶i cã nhiÒu ®Æc ®iÓm nh− ®é \n\ntin cËy cao, dÔ dµng qu¶n lý vµ cã kh¶ n¨ng më réng. §Ó thiÕt kÕ mét hÖ thèng \n\nm¹ng víi ®Çy ®ñ nh÷ng ®Æc ®iÓm nh− vËy th× ng−êi thiÕt kÕ m¹ng cÇn ph¶i biÕt \n\n®−îc r»ng mçi thµnh phÇn chÝnh trong m¹ng cã mét yªu cÇu thiÕt kÕ riªng biÖt. \n\nSù c¶i tiÕn ho¹t ®éng cña c¸c thiÕt bÞ m¹ng vµ kh¶ n¨ng cña m«i tr−êng \n\nm¹ng ®· lµm cho c«ng viÖc thiÕt kÕ m¹ng ngµy cµng trë nªn khã kh¨n h¬n. ViÖc sö \n\ndông nhiÒu lo¹i m«i tr−êng truyÒn kh¸c nhau vµ kÕt nèi LAN víi nhiÒu m¹ng bªn \n\nngoµi ®· lµm cho m«i tr−êng m¹ng trë nªn phøc t¹p. Mét m¹ng ®−îc thiÕt kÕ tèt lµ \n\nm¹ng ®ã ph¶i t¨ng hiÖu qu¶ ho¹t ®éng h¬n vµ Ýt cã trë ng¹i khi m¹ng ph¸t triÓn lín \n\nh¬n. \n\nMét m¹ng LAN cã thÓ tr¶i réng trong mét phßng, trong mét toµ nhµ hay trªn \n\nnhiÒu toµ nhµ. Mét nhãm c¸c toµ nhµ thuéc vÒ mét tc, mét ®¬n vÞ th× ®−îc xem nh− \n\nlµ mét tr−êng ®¹i häc vËy. ViÖc thiÕt kÕ c¸c m¹ng LAN lín cÇn x¸c ®Þnh c¸c tÇng \n\nnh− sau: \n\n* TÇng truy cËp: kÕt nèi ng−êi dïng ®Çu cuèi vµo LAN \n\n* TÇng ph© −êi dïng ®Çu \n\ncuèi LAN \n\n cã thÓ \nÖm vô ®Æc biÖt cña tÇng ®ã. C¸c ®Æc ®iÓm, chøc n¨ng vµ yªu \n\nn phèi: cung cÊp c¸c chÝnh s¸ch kÕt nèi gi÷a c¸c ng\n\n* TÇng trôc chÝnh: cung cÊp kÕt nèi nhanh nhÊt gi÷a c¸c ®iÓm ph©n phèi. \n\nMçi mét tÇng trªn khi thiÕt kÕ cÇn ph¶i chän lùa switch phï hîp nhÊt ®Ó\nthùc hiÖn nh÷ng nhi\n\n\n\n 376\n\ncÇu kü thuËt cña mçi switch tuú thuéc vµo thiÕt kÕ cña mçi tÇng trong LAN. Do \n®ã b¹n cÇn n¾m ®−îc vai trß cña mçi tÇng vµ chän lùa switch nh− thÕ nµo cho \nphï hîp víi tõng tÇng ®Ó b¶o ®¶m ho¹t ®éng tèi −u cho ng−êi dïng trong LAN. \n\nSau khi hoµn tÊt ch−¬ng tr×nh nµy, c¸c b¹n cã thÓ thùc hiÖn ®−îc nh÷ng \n\nviÖc sau: \n\n* M« t¶ 4 môc tiªu chÝnh trong thiÕt kÕ LAN. \n\n* LiÖt kª c¸c ®iÓm quan träng cÇn l−u ý khi thiÕt kÕ LAN. \n\n* HiÓu ®−îc c¸c b−íc thiÕt kÕ hÖ thèng LAN \n\n* HiÓu ®−îc c¸c vÊn ®Ò n¶y sinh trong thiÕt kÕ cÊu tróc 1,2 vµ 3. \n* M« t¶ m« h×nh thiÕt kÕ 3 tÇng. \n\n* X¸c ®Þnh chøc n¨ng cña tõng tÇng trong m« h×nh 3 tÇng nµy. \n\n* LiÖt kª c¸c Cisco switch sö dông cho tÇng truy cËp vµ c¸c ®Æc ®iÓm cña \n\nchóng. \n\n* LiÖt kª c¸c Cisco switch sö dông cho tÇng ph©n phèi vµ c¸c ®Æc ®iÓm cña \n\nchóng. \n\n* LiÖt kª c¸c Cisco switch sö dông cho tÇng trôc chÝnh vµ c¸c ®Æc ®iÓm cña \n\nchóng. \n\n5.1. ThiÕt kÕ LAN \n\n5.1.1. C¸c môc tiªu khi thiÕt kÕ LAN \n\nB−íc ®Çu tiªn trong thiÕt kÕ LAN lµ thiÕt lËp vµ ghi l¹i c¸c môc tiªu cña viÖc \n\nthiÕt kÕ. Mçi mét tr−êng hîp hay mçi mét tæ chøc sÏ cã nh÷ng môc tiªu riªng. Cßn \n\nnh÷ng yªu cÇu sau lµ nh÷ng yªu cÇu th−êng gÆp trong hÇu hÕt c¸c thiÕt kÕ m¹ng: \n\n\n\n 377\n\n* Kh¶ n¨ng ho¹t ®éng ®−îc: ®−¬ng nhiªn yªu cÇu tr−íc nhÊt lµ m¹ng ph¶i \n\nho¹t ®éng ®−îc. M¹ng ph¶i ®¸p øng ®−îc nh÷ng yªu cÇu c«ng viÖc cña ng−êi dïng, \n\ncung cÊp kÕt  nèi gi÷a user vµ user, gi÷a user víi c¸c øng dông \n\n* Kh¶ n¨ng më réng: m¹ng ph¶i cã kh¶ n¨ng lín h¬n n÷a. ThiÕt kÕ ban ®Çu \n\ncã thÓ ph¸t triÓn lín h¬n n÷a mµ kh«ng cÇn nh÷ng thay ®æi c¬ b¶n cña toµn bé thiÕt \n\nkÕ. \n\n* Kh¶ n¨ng thÝch øng: m¹ng ph¶i ®−îc thiÕt kÕ víi mét c¸i nh×n vÒ nh÷ng \n\nkü thuËt ph¸t triÓn trong t−¬ng lai. M¹ng kh«ng nªn cã nh÷ng thµnh phÇn lµm giíi \n\nh¹n viÖc triÓn khai c¸c c«ng nghÖ kü thuËt míi vÒ sau nµy. \n\n* Kh¶ n¨ng qu¶n lý: m¹ng ph¶i ®−îc thiÕt kÕ ®Ó dÔ dµng qu¶n lý vµ theo \n\ndâi nh»m ®¶m b¶o ho¹t ®éng æn ®Þnh cña hÖ thèng. \n\n5.1\n\nng LAN ®· cã cña m×nh hoÆc lËp kÕ \n\nho¹\n\nsù \n\nAsynchoronous. Transfer Mode (ATM) ch¼ng h¹n, sù më réng nµy cßn lµ do cÊu \n\ntróc phøc t¹p cña LAN khi sö dông chuyÓn m¹ch  LAN vµ m¹ng LAN ¶o (VLAN). \n\ng, bµn cÇn quan \n\nt©m nh÷ng vÊn ®Ò  sau khi thiÕt kÕ LAN: \n\n* MiÒn qu¶ng b¸ \n\n.2. Nh÷ng ®iÒu cÇn quan t©m khi thiÕt kÕ LAN \n\nCã nhiÒu tæ chøc muèn n©ng cÊp m¹\n\nch thiÕt kÕ vµ triÓn khai m¹ng LAN míi. Sù më réng trong thiÕt kÕ LAN lµ do \n\nph¸t triÓn víi mét tèc ®é nhanh chãng cña c¸c c«ng nghÖ míi nh− \n\n§Ó tèi ®a hiÖu qu¶ ho¹t ®éng vµ l−îng b¨ng th«ng kh¶ dôn\n\n* Chøc n¨ng vµ vÞ trÝ ®Æt server \n\n* VÊn ®Ò ph¸t hiÖn ®ông ®é \n\n* Ph©n ®o¹n m¹ng \n\n\n\n 378\n\nServer cung cÊp dÞch vô chia sÎ tËp tin, m¸y in, th«ng tin liªn l¹c vµ nhiÒu \n\nh vô øng dông kh¸c, server  kh«ng thùc hiÖn chøc n¨ng nh− mét m¸y tr¹m th«ng \n\nêng. Server ch¹y c¸c hÖ ®iÒu hµnh ®Æc biÖt nh−  NetWare, Windows NT, UNIX, \n\ndÞc\n\nth−\n\nvµ Linux. Mçi server th−êng giµnh cho mét chøc n¨ng riªng nh− Emai hoÆc chia sÎ \n\ntËp\n\nSer\n\nthè hay DNS lµ nh÷ng dÞch vô mµ mäi ng−êi trong tæ \n\nchø\n\nnhã\n\nnh−\n\ndïn\n\ndis\n\nth« ãm lµ ë \n\ntr¹m ph©n phèi trung gian gÇn nhãm ng−êi dïng mµ nã phôc vô nhÊt. Nh− vËy giao \n\n−ëng \n\n®Õn c¸c m¹ng kh¸c. LAN switch líp 2 ®Æt trong MDF vµ c¸c IDF nªn cã ®−êng \n\n h¬n dµnh cho c¸c\n\n \n\n tin.  \n\nServer cã thÓ ®−îc ph©n thµnh hai lo¹i: Server toµn hÖ thèng vµ server nhãm. \n\nver toµn hÖ thèng cung cÊp dÞch vô cña nã ®Ó dïng cho mäi ng−êi dïng trong hÖ \n\nng m¹ng. VÝ dô nh− Email \n\nc ®Òu cÇn sö dông v× tÝnh chÊt tËp trung cña nh÷ng dÞch vô nµy. Cßn server \n\nm th× chØ cung cÊp dÞch vô ®Ó phôc vô cho mét nhãm ng−êi dïng cô thÓ. VÝ dô \n\n nh÷ng dÞch vô xö lý vµ chia sÎ tËp tin cã thÓ chØ phôc vô cho mét nhãm ng−êi \n\ng nµo ®ã th«i. \n\nServer toµn hÖ thèng nªn ®Æt ë tr¹m ph©n phèi chÝnh (MDF \u2013 Main \n\ntribution facility). Giao th«ng h−íng ®Õn server toµn hÖ thèng chØ ®i qua MDF \n\ni chø kh«ng ®i qua c¸c m¹ng kh¸c. N¬i ®Æt lý t−ëng cho c¸c server nh\n\nth«ng ®Õn c¸c server nµy chØ ®i trong m¹ng riªng cña IDF ®ã mµ kh«ng ¶nh h\n\n100 Mb/s hoÆc  server. \n\n \n\n\n\n 379\n\n \n\nEthernet node sö dông CSMA/CD. Mçi node ®Òu ph¶i chó ý ®Õn tÊt c¶ c¸c \n\nnode kh¸c khi truy cËp vµo m«i tr−êng chia sÎ hay cßn gäi lµ miÒn ®ông ®é. NÕu \n\nhai node truyÒn d÷ liÖu cïng mét lóc th× ®ông ®é sÏ x¶y ra. Khi ®ông ®é x¶y ra, \n\nnh÷ng d÷ liÖu ®ang trªn ®−êng truyÒn sÏ bÞ huû bá vµ mét tÝn hiÖu b¸o nghÏn ®−îc \n\nph¸t ra trong mäi m¸y trong miÒn ®ông ®é. Sau ®ã c¸c node ph¶i chê trong mét \n\nkho¶ng thêi gian ngÉu nhiªn råi míi truyÒn l¹i d÷ liÖu cña m×nh. §ông ®é x¶y ra \n\nnhiÒu qu¸ cã thÓ gi¶m l−îng b¨ng th«ng kh¶ dung trong m¹ng xuèng kho¶ng 35 \u2013 \n\n40%. \n\nDo ®ã chóng ta cÇn chia nhá mét miÒn ®ông ®é thµnh nhiÒu miÒn ®ông ®é \n\nnhá h¬n, gióp gi¶m miÒn ®ông ®é trªn mçi miÒn vµ t¨ng l−îng b¨ng th«ng kh¶ \n\ndông cho mçi user. B¹n cã thÓ sö dông c¸c thiÕt bÞ líp 2 nh− brigde vµ switch ®Ó \n\nchia 1 LAN thµnh nhiÒu miÒn ®ông ®é nhá, cßn router ®−îc sö dông ®Ó chia nhá \n\nm¹ng ë líp 3. \n\n \n\n \n\n\n\n 380\n\n \n\nGãi qu¶ng b¸ lµ gãi d÷ liÖu cã ®Þa chØ MAC ®Ých lµ: FF: FF: FF:FF:FF:FF. \n\nMiÒn qu¶ng b¸ lµ tËp hîp c¸c thiÕt bÞ cã thÓ nhËn ®−îc gãi qu¶ng b¸ xuÊt ph¸t tõ \n\nbÊt kú thiÕt bÞ nµo trong tËp hîp ®ã. TÊt c¶ c¸c thiÕt bÞ nhËn ®−îc ®Òu ph¶i xö lý \n\nth«ng tin trong ®ã, viÖc xö lý gãi qu¶ng b¸ nµy lµm gi¶m l−îng b¨ng th«ng cña mçi \n\nhost. \n\nThiÕt bÞ líp 2 cã thÓ thu nhá kÝch th−íc miÒn ®ông ®é nh−ng kh«ngthÓ thu \n\nnhá kÝch th−íc cña miÒn qu¶ng b¸. ChØ cã router míi cã thÓ võa thu nhá kÝch th−íc \n\nmiÒn ®ông ®é võa thu nhá kÝch th−íc miÒn qu¶ng b¸ ë líp 3. \n\n \n\n\n\n 381\n\n \n\n5.1.3. Ph−¬ng ph¸p t\n\n§Ó cã 1 m¹ng LAN ho¹t ®éng hiÖu qu¶ vµ ®¸p øng ®−îc nhu cÇu cña ng−êi \n\nsö dông, LAN cÇn ®−îc thiÕt kÕ vµ triÓn khai theo 1 kÕ ho¹ch víi ®Çy ®ñ hÖ thèng \n\nc¸c b−íc sau: \n\n* Thu thËp c¸c yªu cÇu vµ mong ®îi cña ng−êi sö dông m¹ng \n\n* Ph©n tÝch c¸c d÷ liÖu vµ c¸c yªu cÇu thu thËp ®−îc \n\n* ThiÕt kÕ cÊu tróc LAN líp 1, 2 vµ 3 \n\n* Ghi nhËn l¹i c¸c b−íc triÓn khai m¹ng vËt lý vµ logic \n\nQu¸ tr×nh thu thËp th«ng tin sÏ gióp cho b¹n x¸c ®Þnh vµ lµm s¸ng tá nh÷ng \n\nvÊn ®Ò hiÖn t¹i cña hÖ thèng m¹ng. Nh÷ng th«ng tin nµy cã thÓ bao gåm lÞch sö \n\nph¸t triÓn tæ chøc, t×nh tr¹ng hiÖn t¹i, dù ¸n ph¸t triÓn, chÝnh s¸ch ho¹t ®éng vµ \n\nqu¶n lý, hÖ thèng v¨n phßng vµ ph−¬ng thøc lµm viÖc, quan ®iÓm cña nh÷ng ng−êi \n\nsÏ sö dông m¹ng LAN. Sau ®©y lµ nh÷ng c©u b¹n nªn hái khi thu thËp th«ng tin: \n\n* Nh÷ng ng−êi nµo sÏ sö dông hÖ thèng m¹ng \n\nhiÕt kÕ LAN \n\n\n\n 382\n\n* Kü n¨ng cña hä ë møc nµo? \n\n* Quan ®iÓm cña hä vÒ m¸y tÝnh vµ c¸c øng dông m¸y tÝnh lµ g×? \n\n* C¸c v¨n b¶n chÝnh s¸ch vÒ tæ chøc ®−îc ph¸t triÓn nh− thÕ nµo?  \n\n* Cã d÷ liÖu nµo cÇn c«ng bè trong ph¹m vi giíi h¹n kh«ng?  \n\n* Cã ho¹t ®éng nµo  cÇn giíi h¹n kh«ng? \n\n* Nh÷ng giao thøc nµo ®−îc phÐp ch¹y trªn m¹ng? \n\n* CÇn hç trîc c¸c m¸y tÝnh ®Ó bµn kh«ng? \n\n* Ai lµ ng−êi chÞu tr¸ch nhiÖm vÒ ®Þa chØ LAN? §Æt tªn, thiÕt kÕ cÊu tróc vµ \n\ncÊu h×nh? \n\nn vÒ nh©n lùc, phÇn cøng vµ phÇn mÒm cña tæ chøc lµ nh÷ng g×? \n\nNh÷ng nguån tµi nguyªn nµy hiÖn ®ang ®−îc liªn kÕt vµ chia sÎ nh− thÕ nµo? \n\nphÝ vµ kho¶ng thêi gi n thiÕt kÕ LAN. Mét ®iÓm rÊt quan träng \n\nmµ b¹n cÇn n¾m ®−îc lµ nh÷ng vÊn ®Ò ho¹t ®éng ®ang tån t¹i trong hÖ thèng m¹ng \n\n®· cã. \n\nTÝnh kh¶ dông ®o l−êng møc ®é h÷u Ých cña hÖ thèng m¹ng, cã nhiÒu yÕu tè \n\n¶nh h−ëng ®Õn tÝnh kh¶ dông, bao gåm nh÷ng yÕu tè sau: \n\n* Th«ng l−îng \n\n* Thêi gian ®¸p øng \n\n* Kh¶ n¨ng truy cËp vµo tµi nguyªn m¹ng \n\n* Tµi nguyª\n\nNguån tµi chÝnh mµ tæ chøc cã thÓ dµnh cho m¹ng lµ bao nhiªu? \n\nGhi nhËn l¹i toµn bé c¸c yªu cÇu trªn cho phÐp chóng ta −íc l−îng ®−îc chi \n\nan ®Ó triÓn khai dù ¸\n\n\n\n 383\n\nMçi kh¸ch hµng ®Òu cã ®Þnh nghÜa kh¸c nhau vÒ tÝnh kh¶ dông cña m¹ng. VÝ \n\ndô: kh¸ch hµng cÇn truyÒn tho¹i vµ video trªn m¹ng. Nh÷ng dÞch vô nµy ®ßi hái \n\nnhiÒu b¨ng th«ng h¬n l−îng b¨ng th«ng ®ang cã trªn m¹ng. §Ó t¨ng l−îng b¨ng \n\nth«ng kh¶ dông, cÇn ph¶i thªm nhiÒu tµi nguyªn vµo m¹ng nh−ng nh− vËy th× chi \n\nphÝ sÏ t¨ng theo. Do ®ã thiÕt kÕ m¹ng ph¶i lµm sao cung cÊp ®−îc kh¶ n¨ng sö \n\ndông lín nhÊt víi chi phÝ thÊp nhÊt. \n\nSau khi ph©n tÝch vÒ tÝnh kh¶ dông, b−íc tiÕp theo lµ ph©n tÝch c¸c yªu cÇu \n\ncña hÖ thèng m¹ng vµ ng−êi sö dông m¹ng ®ã. VÝ dô khi cµng cã nhiÒu øng dông \n\nm¹ng vÒ tho¹i vµ video th× nhu cÇu vÒ b¨ng th«ng m¹ng cµng t¨ng lªn nhiÒu h¬n. \n\nMét thµnh phÇn n÷a trong b−íc ph©n tÝch nµy lµ ®¸nh gi¸ yªu cÇu cña ng−êi \n\ndïng. Mét m¹ng LAN mµ kh«ng thÓ cung cÊp th«ng tin nhanh chãng vµ chÝnh x¸c \n\ncho ng−êi sö dông  lµ mét m¹ng LAN v« dông. Do ®ã yªu cÇu cña tæ chøc vµ yªu \n\ncÇu cña c¸c nh©n viªn trong tæ chøc ®ã ph¶i gÆp nhau. \n\nB−íc kÕ tiÕp lµ quyÕt ®Þnh cÊu tróc tæng thÓ cña LAN thÓ tho¶ m·n mäi yªu \n\ncÇu cña ng−êi sö dông. Trong gi¸o ng ta chØ tËp trung vµo cÊu tróc \n\nh×nh Sao vµ h×nh sao më réng. CÊu tróc h×nh Sao vµ h×nh sao më réng sö dông kü \n\nthu\n\nthè\n\nThiÕt kÕ cÊu tróc LAN cã thÓ ®−îc ph©n thµnh 3 b−íc theo 3 m« h×nh OSI \n\nnh\n\n vËt lý vµ luËn \n\nlý cña hÖ thèng m¹ng. CÊu tróc vËt lý cña m¹ng lµ s¬ ®å kÕt nèi vËt lý cña c¸c \n\ntr×nh nµy, chó\n\nËt Ethernet 802,3 CSMA/CD. CÊu tróc h×nh Sao CSMA/CD ®ang lµ cÊu h×nh \n\nng trÞ hiÖn nay. \n\n− sau: \n\n\u2022 Líp M¹ng \n\n\u2022 Líp liªn kÕt d÷ liÖu \n\n\u2022 Líp vËt lý \nB−íc cuèi cïng trong thiÕt kÕ LAN lµ ghi nhËn l¹i c¸c cÊu tróc\n\n\n\n 384\n\nthµ\n\nm¹ng. Nã còng bao gåm c¶ s¬ ®å tªn vµ ®Þa chØ ®−îc sö dông trong thiÕt kÕ LAN. \n\nnh phÇn trong m¹ng LAN. Cßn thiÕt kÕ luËn lý lµ c¸ch ph©n dßng d÷ liÖu trong \n\n \n\n \n\nS¬ ®å thiÕt kÕ LAN \n\nHå s¬ thiÕt kÕ LAN bao gåm nh÷ng thµnh phÇn quan träng sau: \n\n\u2022 S¬ ®å cÊu tróc theo líp OSI  \n\n\u2022 S¬ ®å LAN luËn lý \n\n\u2022 S¬ ®å LAN vËt lý \n\n\u2022 B¶ng ¸nh x¹ vÞ trÝ, ®Þa chØ vµ t×nh tr¹ng sö dông cña tõng thiÕt bÞ trong \nLAN (cut - sheet) \n\n\u2022 S¬ ®å VLAN luËn lý \n\n\u2022 S¬ ®å luËn lý líp 3 \n\n\u2022 S¬ ®å ®Þa chØ \n \n\n\n\n 385\n\n \n\n \n\n \n\n\n\n 386\n\n \n\n \n\n \n\n \n\n \n\nMét trong nh÷ng phÇn quan träng nhÊt mµ b¹n cÇn quan t©m khi thiÕt kÕ \n\nm¹ng lµ c¸p vËt lý. HiÖn nay, hÇu hÕt c¸p sö dông cho LAN ®Òu dùa trªn c«ng nghÖ \n\nFast Ethernet. Fast Ethernet lµ Ethernet ®−îc n©ng cÊp tõ 10Mb/s lªn 100 Mb/s vµ \n\ncã kh¶ n¨ng ho¹t ®éng song c«ng. Fast Ethernet vÉn sö dông cÊu tróc luËn lý h×nh \n\nbus h−íng qu¶ng b¸ chuÈn  Ethernet cña 10BASE \u2013 T vµ ph−¬ng ph¸p CSMA/CD \n\ncho ®Þa chØ MAC. \n\n\n\n 387\n\nNh÷ng vÊn ®Ò trong thiÕt kÕ líp 1 bao gåm lo¹i c¸p sö dông, th−êng lµ c¸p \n\n®ång hay c¸p quang vµ cÊu tróc tæng thÓ cña hÖ thèng c¸p. Mçi tr−êng c¸p líp  1 \n\ncã nhiÒu lo¹i nh− 10/100 BASE \u2013 TX CAT5, 5e hoÆc 6 UTP, STP, 100 BASE \u2013 \n\nFX c¸p quang vµ chuÈn TIA/EIA \u2013 568 \u2013 A vÒ c¸ch bè trÝ vµ kÕt nèi d©y. \n\n \n\nB¹n nªn ®¸nh gi¸ cÈn thËn ®iÓm m¹nh ®iÓm m¹nh vµ yÕu cña cÊu tróc m¹ng \n\nv× mét hÖ thèng m¹ng tån t¹i víi chÝnh hÖ thèng c¸p bªn d−íi cña nã. HÇu hÕt c¸c \n\nsù cè m¹ng ®Òu x¶y ra ë líp 1. Do ®ã khi cã bÊt kú dù ®Þnh thay ®æi quan träng nµo \n\nth× b¹n cÇn kiÓm tra toµn bé hÖ thèng c¸p ®Ó x¸c ®Þnh khu vùc cÇn n©ng cÊp hoÆc ®i \n\nd©y  l¹i. \n\n \n\n \n\n\n\n 388\n\nB¹n nªn sö dông c¸p quang cho c¸c ®−êng trôc chÝnh trong thiÕt kÕ c¸p UTP \n\nCAT 5e nªn sö dông cho ®−êng c¸p horizotal, lµ nh÷ng ®−êng c¸p nèi tõ hép c¾m \n\nd©y cña mçi host kÐo vÒ tr¹m tËp trung d©y. ViÖc n©ng cÊp c¸p cÇn ph¶i ®−îc thùc \n\nhiÖn −u tiªn so víi c¸c thay ®æi cÇn thiÕt kh¸c. Ngoµi ra b¹n cÇn ®¶m b¶o lµ toµn bé \n\nhÖ thèng c¸p t−¬ng thÝch víi chuÈn c«ng nghiÖp nh− chuÈn TIA/EIA \u2013 568 \u2013 A \n\nch¼ng h¹n. \n\nChuÈn TIA/EIA \u2013 568 \u2013 A quy ®Þnh r»ng mäi thiÕt bÞ trong m¹ng cÇn \n\n®−îc kÕt nèi vµo mét vÞ trÝ trung t©m b»ng c¸p horizontal. Kho¶ng c¸ch  giíi h¹n \n\ncña c¸p CAT 5e lµ UTP lµ 100m. \n\nTrong cÊu tróc h×nh sao ®¬n chØ cã mét tñ nèi d©y lµ MDF. Tõ hép c¾m d©y \n\ncña mçi host (Outlet) Õt nèi vµo c¸c bé tËp \n\nonnect patch panel) ®Æt trong MDF. Patch cord \n\n \n\nta kÐp c¸p horizaontal vÒ MDF råi k\n\ntrung d©y HCC (Horizontal Cross C\n\nlµ nh÷ng sîi c¸p ng¾n ®−îc sö dông ®Ó kÕt nèi c¸p horizontal vµo por cña switch \n\nlíp 2. Tuú theo phiªn b¶n switch, ®−êng  uplink sÏ kÕt nèi tõ switch vµo cæng \n\nEthernet cña router líp 3 b»ng c¸p patch cord. Nh− vËy lµ host ®Çu cuèi ®· cã kÕt \n\nnèi vËt lý hoµn chØnh vµo cæng cña router. \n\n \n\n\n\n 389\n\nKhi hÖ thèng m¹ng lín, cã nhiÒu host n»m ngoµi giíi h¹n 100m cña c¸p \n\nhñ. Tñ nèi d©y thø  hai ®−îc gäi lµ tr¹m ph©n \n\nn 10 m cña c¸p CAT 5e UTP. \n\nCAT 5e UTP th× b¹n cÇn cã nhiÒu h¬n mét tñ nèi d©y. B»ng c¸ch thiÕt lËp nhiÒu tñ \n\nnèi d©y b¹n sÏ t¹o ra nhiÒu vïng bao p\n\nphèi trung gian  IDF (Intermediate distribution facilities). ChuÈn TIA/EIA \u2013 568 \n\n\u2013 A quy ®Þnh r»ng IDF ®−îc kÕt nèi vµo MDF b»ng c¸p vertical hay cßn gäi lµ c¸p \n\ntrôc chÝnh (backbone). C¸p vertical ®−îc kÐo tõ IDF ®Õn MDF vµ ®−îc kÕt nèi vµo \n\nbé tËp trung c¸p VCC (Vertical Cros Connect patch panel) ®Æt trong MDF. Chóng \n\nta th−êng sö dông c¸p quang cho ®−êng c¸p vertical v× ®−êng c¸p nµy th−êng dµi \n\nh¬n giíi h¹\n\n \n\n \n\n \n\n\n\n 390\n\n \n\n \n\n \n\n \n\n\n\n 391\n\n \n\n \n\nS¬ ®å luËn lý lµ s¬ ®å cÊu tróc m¹ng nh−ng kh«ng m« t¶ chÝnh x¸c c¸c chi \n\ntiÕt å ®−êng ®i c¬ b¶n cña LAN bao \n\ngåm\n\n vÞ trÝ ®Æt MDF vµ IDF \n\n\u2022 \ndô:\n\nthª\n\n\u2022 \nvµ \n\n l¾p ®Æt ®−êng c¸p. S¬ ®å luËn lý chØ lµ s¬ ®\n\n nh÷ng thµnh phÇn sau: \n\n\u2022 X¸c ®Þnh\n\n\u2022 Ghi l¹i lo¹i c¸p vµ sè l−îng sö dông ®Ó kÕt nèi c¸c IDF vµ MDF \n\nGhi l¹i sè l−îng c¸p ®Ó dµnh ®Ó t¨ng b¨ng th«ng gi÷a c¸c tñ nèi d©y. VÝ \n\n nÕu c¸p vertical gi÷a IDF 1 vµ MDF ch¹y hÕt 80% th× sÏ sö dông \n\nm 2 cÆp c¸p n÷a ®Ó t¨ng gÊp ®«i b»ng th«ng. \n\nCung cÊp hå s¬ chi tiÕt vÒ tÊt c¶ c¸c c¸p trong hÖ thèng, chØ sè danh ®Þnh \n\nsè port cña chóng trªn HCC hoÆc VCC. \n\n\n\n 392\n\nS¬  \n\nh×nh 5.1.4.h-\n\nchó\n\nnèi vµ\n\n®Þn\n\nthÓ 3 ®Ó thiÕt lËp l¹i kÕt \n\nnèi\n\n5.1\n\nkhiÓn luång, ph¸t hiÖn lçi, söa \n\nlçi vµ gi¶m nghÏn m¹ch. Hai thiÕt bÞ líp 2 phæ biÕn nhÊt lµ bridge vµ switch. ThiÕt \n\nbÞ l  ®ông ®é. \n\n®å luËn lý rÊt quan träng khi xö lý sù cè vÒ kÕt nèi m¹ng. VÝ dô nh− trªn \n\ni: nÕu phßng 203 bÞ mÊt kÕt nèi th× b»ng c¸ch kiÓm tra trong cut sheet \n\nng ta sÏ x¸c ®Þnh ®−îc c¸p nèi tõ phßng nay ®Õn IDF lµ c¸p sè 203 \u2013 1 vµ kÕt \n\no port sè 13 trªn HCC trong IDF. Sö dông ®ång hå ®o c¸p chóng ta sÏ x¸c \n\nh ®o¹n c¸p nµy cã bÞ h− háng vÒ mÆt vËt lý hay kh«ng. NÕu cã th× chóng ta cã \n\n sö dông 2 s¬i c¸p dù phßng cßn l¹i lµ 203 \u2013 2 hoÆc 203 \u2013\n\n trong thêi gian chê söa ch÷a c¸p 203 \u2013 1. \n\n.5. ThiÕt kÕ líp 2. \n\nMôc ®Ých cña thiÕt bÞ líp 2 trong m¹ng lµ ®iÒu \n\níp 2 sÏ quyÕt ®Þnh kÝch th−íc miÒn\n\n \n\n§ông ®é vµ kÝch th−íc miÒn ®ông ®é lµ hai yÕu tè ¶nh h−ëng xÊu ®Õn hiÖu \n\nqu¶ nªn chia nhá m¹ng thµnh c¸c miÒn ®ông \n\n®é \n\n(microsegment) b»ng switch vµ bridge ®Ó gi¶m ®ông ®é vµ kÝch th−íc miÒn ®ông \n\n®é. Chóng ta cã thÓ sö dông switch kÕt hîp víi hub ®Ó cung cÊp møc ®é ho¹t ®éng \n\nhîp lý\n\n ho¹t ®éng cña m¹ng. Do ®ã chóng ta \n\ncña m¹ng. Do ®ã chóng ta nªn chia nhá m¹ng thµnh c¸c miÒn ®ông ®é cùc nhá \n\n cho mçi nhãm user vµ server kh¸c nhau. \n\n\n\n 393\n\nM t ®Æc ®iÓm quan träng cña LAN switch é lµ nã cã thÓ ph©n bæ b¨ng th«ng \n\nt 100Mb/s. \n\ntrªn tõng port. Nhê ®ã nã cã thÓ dµnh nhiÒu b¨ng th«ng h¬n cho ®−êng vertical, \n\nuplink hoÆc ®−êng kÕt nèi vµo server. Lo¹i chuyÓn m¹ch nh− vËy gäi lµ chuyÓn \n\nm¹ch bÊt ®èi xøng . ChuyÓn m¹ch bÊt ®èi xøng thùc hiÖn chuyÓn m¹ch gi÷a c¸c \n\nport cã b¨ng th«ng kh«ng b»ng nhau, vÝ dô tõ port 10Mb/s sang por\n\n \n\n§−êng vertical kÕt nèi tõ IDF ®Õn MDF ®Ó truyÒn d÷ liÖu gi÷a MDF vµ IDF. \n\nDung l−îng ®−êng vertical th−êng lín h¬n ®−êng horizontal. §−êng horizontal nèi \n\ngi÷a IDF vµ m¸y tr¹m th−êng sö dông c¸p CAT 5e UTP vµ dµi kh«ng qu¸ 100mÐt. \n\nTrong m«i tr−êng m¹ng th«ng th−êng, ®−êng horizontal cã b¨ng th«ng 10 Mb/s vµ \n\nsö dông switch chuyÓn m¹ch bÊt ®èi xøng ®Ó kÕt hîp port 10 Mb/s vµ 100 Mb/s. \n\n \n\n\n\n 394\n\n \n\nNhiÖm vô tiÕp theo lµ quyÕt ®Þnh sè l−îng port 10Mb/s vµ 100 Mb/s cÇn sö \n\ndông trong MDF vµ mçi IDF. Ta cã thÓ quyÕt ®Þnh sè l−îng nµy dùa vµo yªu cÇu \n\ncña user vÒ sè l−îng c¸p horizontal ®i vµo mçi phßng vµ tæng sè l−îng c¸p ®æ vµo \n\nmçi vïng bao phñ. §ång thêi chóng ta còng tÝnh lu«n sè l−îng ®−êng vertical cÇn \n\nthiÕ\n\nIDF phôc vô cho mét vïng bao phñ gåm 18 phßng. Nh− vËy cÇn tæng céng lµ 4* 18 \n\n= 72 port trªn LAN switch trong mçi IDF. \n\n−íc miÒn ®ông ®é x¸c ®Þnh bëi sè l−îng host ®−îc kÕt nèi vËt lý vµo \n\ncïn\n\ntõng host. Trong ®iÒu kiÖn lý t−ëng lµ ta kÕt nèi mét host vµo mét port cña switch \n\nt¹o\n\nhos\n\nmicrosegment. NÕu kh«ng ®ñ ®iÒu kiÖn ®Ó lµm vËy th× b¹n cã thÓ sö dông hub ®Ó \n\nkÕt c¸c host kÕt nèi vµo hub \n\ntrªn t b¨ng th«ng vµ cïng mét miÒn ®ông \n\n®é.\n\nt . VÝ dô: user yªu cÇu ph¶i cã 4 ®−êng horizontal ®i vµo mçi phßng. Mçi mét \n\nKÝch th\n\ng mét port cña switch. Tõ ®ã ta cã thÓ x¸c ®Þnh l−îng b¨ng th«ng kh¶ dông cho \n\n thµnh mét microsegment chØ bao gåm host nguån vµ host ®Ých khi cã bÊt kú hai \n\nt nµo thùc hiÖn th«ng tin liªn l¹c víi nhau. Do ®ã, kh«ng cã ®ông ®é trong \n\n nèi nhiÒu host vµo mét port cña switch. Nh− vËy tÊt c¶ \n\n cïng mét port cña switch chia sÎ cïng mé\n\n Do ®ã ®ông ®é cã thÓ x¶y ra. \n\n\n\n 395\n\n \n\n \n\n \n\n \n\n \n\n \n\n− Catalyst 1700 ch¼ng h¹n kh«ng hç trî chia sÎ b¨ng \n\nth«ng vµ miÒn ®ông ®é. Switch ®êi cò kh«ng l−u ®−îc nhiÒu ®Þa chØ MAC cho mét \n\nport nªn hËu qu¶ lµ sinh ra nhiÒu qu¶ng b¸ vµ c¸c yªu cÇu ARP. \n\nMét sè switch ®êi cò nh\n\n\n\n 396\n\nTa th−êng sö dông hub ®Ó t¹o nhiÒu ®iÓm kÕt nèi ®Çu cuèi vµo mét ®−êng \n\nc¸p\n\n®ông ® o \n\nyªu\n\n horizontal. BiÖn ph¸p nµy cã thÓ chÊp nhËn ®−îc nh−ng nªn cÈn thËn v× miÒn \n\né nªn gi÷ æ kÝch th−íc nhá ®Ó cung cÊp ®ñ l−îng b¨ng th«ng cho host the\n\n cÇu cña thiÕt kÕ. \n\n \n\n \n\n \n\n \n\n \n\n\n\n 397\n\n \n\nt bÞ m¹nh nhÊt \n\ntrong cÊu tróc m¹ng. \n\nkh¸c. \n\nchia hÖ thèng m¹ng thµnh c¸c subnet theo ®Þa chØ líp 3. \n\n \n\n \n\n \n\nRouter lµ thiÕt bÞ líp 3 vµ ®−îc coi lµ mét trong nh÷ng thiÕ\n\nThiÕt bÞ líp 3 ®−îc sö dông ®Ó chia m¹ng LAN thµnh nhiÒu m¹ng riªng biÖt. \n\nThiÕt bÞ líp 3 cho phÐp th«ng tin liªn l¹c gi÷a 2 m¹ng th«ng qua ®Þa chØ líp 3, vÝ dô \n\nnh− ®Þa chØ IP. TriÓn khai thiÕt bÞ líp 3 cho phÐp chia nhá m¹ng LAN vÒ mÆt vËt lý \n\nvµ luËn lý. Router cßn cã thÓ kÕt nèi WAN nh− nèi ra Internet ch¼ng h¹n. \n\n§Þnh tuyÕn líp 3 ph©n luång giao th«ng gi÷a c¸c m¹ng vËt lý dùa trªn ®Þa \n\nchØ líp 3. Router kh«ng chuyÓn tiÕp c¸c gãi qu¶ng b¸ vÝ dô nh− gãi yªu cÇu ARP \n\nch¼ng h¹n. Do ®ã mçi cæng trªn router ®−îc xem lµ cöa vµo vµ cöa ra cña mét miÒn \n\nqu¶ng b¸, lµ n¬i kÕt thóc cña qu¶ng b¸, ng¨n kh«ng cho qu¶ng b¸ sang c¸c m¹ng \n\nRouter ®−îc xem lµ bøc t−êng löa ®èi víi gãi qu¶ng b¸. Ngoµi ra router cßn \n\nKhi b¹n muèn quyÕt ®Þnh sö dông router hay switch ë ®©u th× b¹n nªn nhí \n\nc©u hái sau: \u201cVÊn ®Ò mµ b¹n ®ang cÇn gi¶i quyÕt ë ®ã lµ g×?\u201d NÕu vÊn ®Ò liªn quan \n\n®Õn giao thøc h¬n lµ sù tranh chÊp th× router lµ gi¶i ph¸p phï hîp. Router cã thÓ \n\ngi¶i quyÕt c¸c vÊn ®Ò liªn quan ®Õn møc ®é qu¶ng b¸ qu¸ nhiÒu, giao thøc kh«ng \n\nc©n ®èi, c¸c vÊn ®Ò vÒ b¶o mËt vµ ®Þa chØ líp m¹ng. Router m¾c tiÒn h¬n vµ khã \n\ncÊu h×nh h¬n so víi switch. \n\n\n\n 398\n\n \n\nH×nh 5.1.5.b lµ mét vÝ dô vÒ hÖ thèng m¹ng cã nhiÒu m¹ng vËt lý kh¸c nhau. \n\nn M¹ng 2 ®Òu ph¶i ®i qua router. Trong h×nh nµy, chóng \n\ns¬ ®å ®Þa chØ líp 3 riªng biÖt. Trong s¬ \n\n®å ®i d©y c¸c líp 1, mçi m¹ng vËt lý ®−îc t¹o ra dÔ dµng b»ng c¸ch kÕt nèi c¸p \n\ntæng qu¸t vÒ hÖ thèng m¹ng vµ ¸nh x¹ chóng vµo s¬ ®å vËt lý ®Ó sö dông khi xö lý \n\n cè.\n\nMäi d÷ liÖu tõ M¹ng 1 ®Õ\n\nta cã hai miÒn qu¶ng b¸. Mçi miÒn cã mét \n\nhorizontal vµ vertical vµo switch líp 2. Sau ®ã c¸c m¹ng vËt lý nµy ®−îc kÕt nèi vµo \n\nrouter lµm t¨ng kh¶ n¨ng b¶o mËt h¬n v×  mäi giao th«ng ®i vµo hoÆc ®i ra mét \n\nLAN ®Òu ph¶i qua router. \n\nSau khi b¹n ®· chia s¬ ®å IP cho client xong th× b¹n nªn lËp hå s¬ ®Ó ghi \n\nnhËn l¹i mét c¸ch râ rµng vµ ®Çy ®ñ. B¹n nªn ®Æt mét sè quy −íc chung cho nh÷ng \n\n®Þa chØ cña c¸c host quan träng trong m¹ng. S¬ ®å ®Þa chØ cÇn ®−îc thèng nhÊt vµ \n\nhoµ hîp trªn toµn bé hÖ thèng m¹ng. B¹n nªn lËp hå s¬ ®Þa chØ ®Ó cã mét c¸i nh×n \n\nsù  \n\n \n\n\n\n 399\n\n \n\n \n\n \n\n \n\n\n\n 400\n\n \n\n \n\nVLAN lµ mét kü thuËt kÕt hîp chuyÓn m¹ch líp 2 vµ ®Þnh tuyÕn líp 3 ®Ó \n\ngiíi h¹n miÒn ®ông ®é vµ miÒn qu¶ng b¸. VLAN cßn ®−îc sö dông ®Ó b¶o mËt \n\ngi÷a c¸c nhãm VLAN theo chøc n¨ng cña mçi nhãm. \n\n \n\n \n\n\u2022 Ph©n nhãm user theo phßng ban, ®éi nhãm vµ c¸c øng dông th−êng dïng. \n\n\u2022 Router cung cÊp th«ng tin liªn l¹c gi÷a c¸c VLAN víi nhau. \n\n\n\n 401\n\nC¸c port vËt lý ®−îc nhãm vµo mét VLAN. VÝ dô nh− h×nh 5.1.5.h, port P1, \n\nP4, P5 ®−îc nhãm vµo VLAN.1. VLAN.2 cã c¸c port P2, P3, P5. Th«ng tin liªn l¹c \n\ngi÷a VLAN.1. VLAN.2 b¾t buéc ph¶i th«ng qua router. Nhê vËy kÝch th−íc miÒn \n\n®ông ®é gi¶m xuèng vµ router lµ n¬i quyÕt ®Þnh cho VLAN.1. vµ VLAN.2 cã thÓ \n\nnãi chuyÖn víi nhau. \n\n \n\n5.2. LAN switch \n\n5.2.1. ChuyÓn\n\n−îc c¸c yªu cÇu cña mét tæ chøc \n\nèi \n\n m¹ch LAN vµ tæng qu¸t vÒ tÇng truy cËp \n\n§Ó x©y dùng mét m¹ng LAN tho¶ m·n ®\n\nvõa vµ lín, b¹n cÇn sö dông m« h×nh thiÕt kÕ ph©n cÊp. M« h×nh thiÕt kÕ ph©n cÊp \n\nsÏ lµm cho thiÕt kÕ m¹ng thay ®æi dÔ dµng khi tæ chøc ph¸t triÓn lín h¬n n÷a. M« \n\nh×nh nµy cã 3 tÇng nh− sau: \n\n\u2022 TÇn truy cËp: Cung cÊp kÕt nèi vµo hÖ thèng m¹ng cho user \n\n\u2022 TÇng ph©n phèi: Cung cÊp chÝnh s¸ch kÕt n\n\n\u2022 TÇng trôc chÝnh: Cung cÊp vËn chuyÓn tèi −u gi÷a c¸c site \n\n \n\n\n\n 402\n\n \n\nM« h×nh ph©n cÊp nµy cã thÓ ¸p dông cho bÊt kú thiÕt kÕ m¹ng nµo. §iÒu \n\nquan träng lµm b¹n cÇn thÊy r»ng 3 tÇng nµy tån t¹i víi thµnh phÇn vËt lý riªng \n\nbiÖt, râ rµng. Mçi tÇng ®−îc ®Þnh nghÜa ®Ó ®¹i diÖn cho nh÷ng chøc n¨ng mµ chóng \n\nt \n\nerver  m¸y tÝnh ®ã sÏ ®−îc dµnh trän b¨ng th«ng trªn \n\n nèi vµo hub ®ã. \n\nChøc n¨ng cña tÇng truy cËp cßn bao gåm c¶ läc líp MAC vµ thùc hiÖn ph©n \n\n®o¹n cùc nhá. Läc líp MAC cã nghÜa lµ switch chØ chuyÓn frame ra ®óng port kÕt \n\nnèi vµo thiÕt bÞ ®Ých mµ th«i. Switch cßn cã thÓ t¹o ra c¸c segment líp 2 rÊt nhá gäi \n\nlµ microsegment. Mçi segment nh− vËy chØ cã 2 thiÕt bÞ. §©y lµ kÝch th−íc nhá \n\nnhÊt cã thÓ ®−îc cña mét miÒn ®ông ®é. \n\nthùc hiÖn trong m¹ng. \n\nTÇng truy cËp lµ ®iÓm kÕt nèi vµo m¹ng cña m¸y tr¹m vµ server. Trong LAN, \n\nthiÕt bÞ ®−îc sö dông ë tÇng truy cËp cã thÓ lµ switch hoÆc hub. \n\nNÕu sö dông hub th× b¨ng th«ng sÏ bÞ chia sÎ. NÕu sö dông switch th× b¨ng \n\nth«ng sÏ ®−îc dµnh riªng cho mçi port. NÕu chóng ta nèi mét m¸y tr¹m hoÆc mé\n\ns  vµo mét port cña switch th×\n\nkÕt nèi cña port ®ã. NÕu kÕt nèi hub vµo mét port cña switch th× b¨ng th«ng trªn \n\nport ®ã sÏ chia sÎ cho mäi thiÕt bÞ kÕt\n\n\n\n 403\n\n \n\n5.2.2. Switch sö dông ë tÇng truy cËp \n\nSwitch tÇng truy cËp ho¹t ®éng ë líp 2 cña m« h×nh OSI vµ cung cÊp mét sè \n\nÞch vô nh− VLAN ch¼ng h¹n. Môc tiªu chÝnh cña switch tÇng truy cËp lµ cho phÐp \n\nng−êi dïng ®Çu cuèi  truy cËp vµo m¹ng. B¹n nªn chän switch tÇng truy cËp thùc \n\nhiÖn chøc n¨ng nµy víi chi phÝ thÊp vµ ®é c¶m nhËn trªn port cao. \n\nSau ®©y lµ mét sè dßng switch cña Cisco th−êng ®−îc dïng ë tÇng truy cËp: \n\u2022 Catalyst 1900 \n\n\u2022 Catalyst 2820 \n\n\u2022 Catalyst 2950 \n\n\u2022 Catalyst 4000 \n\n\u2022 Catalyst 5000 \nDßng Catalyst 1900 vµ 2820 lµ nh÷ng thiÕt bÞ truy cËp hiÖu qu¶ cho hÖ thèng \n\nm¹ng võa vµ nhá. Dßng switch Catalyst 2950 cung cÊp ®−êng truy cËp hiÖu qu¶ \n\n¬n cho server vµ nhiÒu b¨ng th«ng h¬n cho ng−êi dïng nhê c¸c port Fast Ethernet. \n\nßng Catalyst 4000 vµ 5000 cã port Gigabit Ethernet lµ thiÕt bÞ ®Ó truy cËp hiÖu \n\nqu¶ cho c¸c m¹ng lín. \n\nd\n\nh\n\nD\n\n\n\n 404\n\n \n\n \n\n\n\n 405\n\n \n\nTÇng ph©n phèi n»m gi÷a tÇng truy cËp vµ tÇng trôc chÝnh gióp x¸c ®Þnh vµ \n\ncho phÐp c¸c gãi d÷ liÖu ®−îc di chuyÓn trong ®ã. ë tÇng nµy, hÖ thèng m¹ng ®−îc \n\n\u2022 X¸c ®Þnh miÒn qu¶ng b¸ hay miÒn multicast \n\nph©n biÖt víi hÖ thèng trôc chÝnh. Môc tiªu cña tÇng ph©n phèi lµ cung cÊp giíi h¹n \n\nchia thµnh nhiÒu miÒn qu¶ng b¸, ®ång thêi ¸p dông c¸c chÝnh s¸ch vÒ truy cËp, läc \n\ngãi d÷ liÖu t¹i ®©y. TÇng ph©n phèi gióp c« lËp sù cè trong ph¹m vi mét nhãm vµ \n\nng¨n kh«ng cho sù cè t¸c ®éng vµo tÇng trôc chÝnh. Switch trong tÇng nµy ho¹t \n\n®éng ë líp 2 vµ 3 cña m« h×nh OSI. Tãm l¹i, tÇng ph©n phèi thùc hiÖn c¸c chøc \n\nn¨ng sau: \n\n\u2022 §Þnh tuyÕn VLAN \n\n\n\n 406\n\n\u2022 ChuyÓn ®æi m«i tr−êng m¹ng nÕu cÇn \n\n\u2022 B¶o mËt. \n\n5.2.4. Switch sö dông ë tÇng ph©n phèi: \n\nSwitch tÇng ph©n phèi lµ ®iÓm tËp trung cho c¸c switch tÇng truy cËp. Do ®ã, \n\nc¸c switch tÇng nµy ph¶i g¸nh toµn bé l−îng giao th«ng tõ c¸c thiÕt bÞ tÇng truy cËp \n\nnªn chóng ph¶i cã n¨ng lùc ho¹t ®éng cao. Switch tÇng ph©n phèi lµ ®iÓm kÕt thóc \n\ncho miÒn qu¶ng b¸. TÇng nµy tËp trung giao th«ng cña VLAN vµ c¸c chÝnh s¸ch ®Ó \n\nquyÕt ®Þnh dßng ch¶y cña giao th«ng. Do ®ã, switch cña tÇng ph©n phèi ho¹t ®éng \n\në c¶ líp 2 vµ 3 trong m« h×nh OSI. Switch trong tÇng nµy th−êng lµ switch ®a líp. \n\nSwitch ®a líp lµ sù kÕt hîp chøc n¨ng cña router vµ switch vµo chung trong mét \n\nthiÕt bÞ. Chóng ®−îc thiÕt kÕ ®Ó chuyÓn m¹ch giao th«ng víi hiÖu suÊt ho¹t ®éng \n\ncao h¬n mét router th«ng th−êng. NÕu c¸c switch nµy kh«ng cã router module g¾n \n\ntrong nã th× b¹n cã c hiÖn chøc n¨ng \n\np 3. \n\ni: \n\n thÓ sö dông mét router riªng bªn ngoµi ®Ó thù\n\nlí\n\nSau ®©y lµ c¸c dßng switch cña Cisco phï hîp víi tÇng ph©n phè\n\n\u2022 Catalyst 2926G \n\n\u2022 Catalyst 5000 \n\n\u2022 Catalyst 6000 \n \n\n \n\n \n\n\n\n 407\n\n \n\n \n\n4.1.1. Tæng qu¸t vÒ tÇng trôc chÝnh: \n\n \n \nTÇng trôc chÝnh ®−îc chuyÓn m¹ch tèc ®é cao. NÕu switch tÇng nµy kh«ng cã \nrouter module g¾n trong th× b¹n cã thÓ sö dông router riªng bªn ngoµi ®Ó thùc \nhiÖn c¸c chøc n¨ng líp 3. TÇng nµy ®−îc thiÕt kÕ lµ kh«ng thùc hiÖn bÊt kú ho¹t \n®éng c¶n trë gãi nµo v× nh÷ng ho¹t ®éng c¶n trë gãi d÷ liÖu nh− danh s¸ch kiÓm \ntra truy cËp ch¼ng h¹n sÏ lµm chËm tèc ®é chuyÓn m¹ch gãi. CÊu tróc tÇng trôc \nchÝnh nªn cã c¸c ®−êng  dù phßng ®Ó æn ®Þnh ho¹t ®éng m¹ng, tr¸nh t×nh tr¹ng \nchØ cã mét ®iÓm trung t©m duy nhÊt. \n\nTÇng trôc chÝnh ®−îc thiÕt kÕ sö dông chuyÓn m¹ch líp 2 hoÆc líp 3. B¹n cã \n\nthÓ sö dông switch ATM hoÆc Ethernet cho tÇng nµy. \n\n5.2.6. Switch sö dông ë tÇng trôc chÝnh. \n\nTÇng trôc chÝnh lµ x−¬ng sèng cña hÖ thèng m¹ng. Switch trong tÇng nµy cã thÓ \nsö dông mét sè c«ng nghÖ líp 2. NÕu kho¶ng c¸ch gi÷a c¸c switch cã thÓ sö \ndông c«ng nghÖ Ethernet. Mét sè c«ng nghÖ líp 2 kh¸c nh− chuyÓn m¹ch tÕ bµo \nATM (Asynchoronous Transfer Mode) còng cã thÓ ®−îc sö dông. Trong thiÕt kÕ \nm¹ng, tÇng trôc chÝnh còng cã thÓ ®Þnh tuyÕn líp 3 nÕu cÇn thiÕt. Khi chän lùa \n\n¶ switch cho tÇng nµy b¹n cÇn quan t©m ®Õn nh÷ng yÕu tè nh− sù cÇn thiÕt, gi¸ c\nvµ kh¶ n¨ng ho¹t ®éng. \n\nSau ®©y lµ mét sè dßng Switch cña Cosco phï hîp cho tÇng trôc chÝnh: \n\n\n\n 408\n\n\u2022 Catalyst 6500 \n\n\u2022 Catalyst 8500 \n\n\u2022 IGX 8400 \n\n\u2022 Lighstream 1010 \n\n \n\n \n\n\n\n 409\n\n \n\nTæng kÕt \n\nSau khi kÕt thóc ch−¬ng tr×nh nµy, b¹n cÇn n¾m ®−îc c¸c ®iÓm quan \n\nträng sau: \n\n\u2022 Bèn môc tiªu chÝnh trong thiÕt kÕ LAN \n\n\u2022 C¸c vÊn ®Ò cÇn quan t©m chÝnh yÕu trong thiÕt kÕ LAN. \n\n\u2022 Nh÷ng vÊn ®Ò trong thiÕt kÕ Líp 1, 2 vµ 3. \n\n\u2022 M« h×nh thiÕt kÕ 3 tÇng \n\n\u2022 Chøc n¨ng cña mçi tÇng trong m« h×nh 3 tÇng nµy \n\n\u2022 Cisco switch trong tÇng truy cËp vµ c¸c ®Æc ®iÓm cña chóng. \n\n\u2022 Cisco switch trong tÇng ph©n phèi vµ c¸c ®Æc ®iÓm cña chóng  \n\n\u2022 Cisco switch trong tÇng trôc chÝnh vµ c¸c ®Æc ®iÓm cña chóng  \n  \n\n- Kiểm tra các hiển thị của quá trình khởi động switch bằng HyperTerminal. \n\n- Sử dụng tính năng trợ giúp của giao tiếp dòng lệnh. \n\n- Liệt kê các ch\n\n- Kiểm tra cấu hình mặc định của Catalyst switch. \n\n\u2022 C¸c b−íc trong thiÕt kÕ LAN \n\nế độ dòng lệnh cơ bản của switch. \n\n\n\n 410\n\n- Đặt địa chỉ IP và cổng mặc định cho switch để cho phép kết nối và quản lý \n\nswitch qua mạng. \n\n- Xem các cài đặt trên switch bằng một trình duyệt Web. \n\n- Cài đặt tốc độ và hoạt động song công trên port của switch. \n\n- Kiểm tra và quản lý bảng địa chỉ MAC của switch \n\n- Cấu hình bảo vệ port. \n\n- Quản lý tập tin cấu hình và IOS. \n\n- Thực hiện khôi phục mật mã trên switch  \n\n- Nâng cấp IOS của switch. \n\n \n\n6\n\n6.1.1. Bắt đầu với phần vật lý của switch  \n\n.1. Bắt đầu với switch  \n\n \n\nSwitch là một máy tính đặc biệt cũng có bộ xử lý trung tâm (CPU), RAM (Random \naccess memory), và hệ điều hành. Switch có các port dành cho mục đích kết nối \nhost và có một  số port đặc biệt chỉ dành cho mục đích quản lý switch. Bạn có thể \nxem và thay đổi cấu hình switch bằng cách kết nối vào cổng console. \n\n \n\nSwitch thường không có công tắc điện để bật tắt mà nó chỉ có cắm dây điện hay \nkhông cắm dây điện mà thôi. \n\n \n\n\n\n 411\n\n \n\n6 Đèn báo hiệu LED trên switch  \n\n \n\n.1.2. \n\nặt tr\ntheo dõi switchự hoạt động của switch : \n\n\u2022 \n\u2022 \n\u2022 Port Mode LED: LED chế độ port. \n\u2022 \n\nrt, hiển thị trạng thái của port đó tùy theo chế độ hiển thị \n\nLE c cấp nguồn và hoạt động tốt, \n\nRP\n\nạng thái port. \nĐể chọn các chế độ hiển thị trạng thái khác nhau, bạn nhấn nút Mode một hoặc \n\n \n\nLED chế \nđộ port \n\nMàu của các \nLED trạng thái \ntrên từng port \n\nMô tả \n\nM ước của switch có một sô đèn báo hiệu LED ( Light-Emitting Diode) giúp \nbạn \n\nSystem LED: LED hệ thống. \nRemote Power Supply (RPS): LED nguồn điện từ xa. \n\nPort Status LED: LED trạng thái port. Mỗi port của switch có một đèn LED \nnằm ở phía trên po\nđược cài đặt ở nút Mode. \nD hệ thống cho biết hệ thống đã đượ\n\nS LED cho biết switch có sử dụng bộ nguồn bên ngoài hay không. \n\nLED chế độ port cho biết chế độ hiển thị hiện tại của các LED tr\n\nnhiều lần cho đến khi LED chế độ port hiển thị đúng chế độ mà bạn muốn. \n\nLED trạng thái port hiển thị các giá trị khác nhau tùy theo chế độ được cài đặt \ntrên nút Mode. \n\nTắt Không có kết nối \n\nMàu xanh \n\n \n\nKết nối đang hoạt động \n\nSTAT \n\n(Trạng \nthái hoạt \nđộng) \n\nMàu xanh nhấp \nnháy \n\nPort đang truyền và nhận dữ liệu \n\n\n\n 412\n\n \n\n \n\nLúc màu xanh lúc \nmàu cam \n\nKết nối đang bị lỗi \n\nMàu cam \n\n \n\nPort không thực hiện chuyển gói vì nó đã bị tắt \nchức năng này, hoặc có địa chỉ bị vi phạm cấu \nhình, hoặc bị khóa do giao thức Spanning Tree. \n\nTắt Cứ mỗi một LED trên mỗi port bị tắt có nghĩa là \ntổng băng thông sử\n\n \n\n \n\n \n\n dụng giảm xuống một nửa. \nCác đèn LED sẽ được tắt lần lượt từ phải sang \n\n \n\n \n\n \n\n \n\ntrái. Nếu một LED đầu tiên bên phải bị tắt có \nnghĩa là switch đang sử dụng dưới 50% tổng \nbăng thông. Nếu 2 LED đầu tiên bên phải bị tắt \ncó nghĩa là switch đang sử dụng dưới 25% tổng \nbăng thông. \n\nUTL  \n\n(mức độ \noạt đ\n\nMàu xanh Nếu tất cả các LED trên port đều xanh có nghĩa \nlà switch đang sử dụng >= 50% tổng băng thông \n\nh ộng \ncủa \nswitch ) \n\nTắt  Port tương ứng đang ở chế độ bán song công ( \nhalf-dupplex) \n\nFDUP \n\n(Full-\nduplex) Màu xanh Port tương ứng đang ở chế độ song công \n\nTắt  Port tương ứng đang hoạt động ở tốc độ 0Mb/s  1100 \n\n (Tốc độ) Màu xanh Port tương ứng đang hoạt động ở tốc độ 100Mb/s\n\n \n\n \n\n\n\n 413\n\n \n\n6.1.3. Kiểm tra LED trong suốt quá trình khởi động switch  \n\n \n\nKhi bắt đầu cắm điện, switch sẽ tiến hành một loạt các bước kiểm tra gọi là tự \nkiểm tra khi bật nguồn POST ( Power-On Self Test). POST tự động  kiểm tra  \ncác thành phần phần cứng để đảm bảo switch hoạt động đúng. LED hệ thống sẽ \ncho biết quá trình POST kết thúc thành công hay bị lỗi. Khi switch mới được \ncắm điện, quá trình POST đang chạy thì LED hệ thống còn tắt. Nếu sau đó LED \nhệ thống bật lên màu xanh có nghĩa là quá trình POST đã kết thúc thành công. \nNếu LED hệ thống bật lên màu vàng có nghĩa là quá trình POST đã gặp lỗi. \nPOST gặp lỗi thường là những lỗi vật lý nghiêm trọng. switch không thể hoạt \nđộng tin cậy nếu POST bị lỗi. \n\n \ntrạng thái trên mỗi  30 giây là quá trinhd \nswitch đang phát hiện cấu trúc mạng và dò tìm vòng lặp. Nếu sau đó LED trạng \nthái trên port chuyển sang màu xanh có nghĩa switch đã thiết lập được kết nối \ntrê  thái trên port tắt có nghĩa là \nsw\n\n switch, bạn cần kết nối một máy tính \nvào switch để thiết lập phiên giao tiếp. Bạn có thể dùng cáp rollover để nối từ \ncổn\n\n \n\nLED trạng thái của các port cũng thay đổi trong suốt quá trình POST. LED\nport sẽ bật lên màu cam trong khoảng\n\nn port đó với hệ thống mạng. Nếu LED trạng\nitch nhận thấy không có gì cắm vào port này cả. \n\n \n\n6.1.4. Xem các thông tin hiển thị trong quá trình khởi động switch  \n\nĐể cấu hình hoặc kiểm tra trạng thái của\n\ng console ở mặt sau của switch vào cổng COM trên máy tính. \n\n\n\n 414\n\n \n\n \n\nHình 6.1.4.a. Kết nối máy tính vào cổng console của switch \n\n \n\n \n\nHình 6.1.4.b \n\n \n\n \n\n \n\n\n\n 415\n\nSau\n\n mà bạn kết nối máy tính \nvào\n\n đó bạn chạy HyperTerminal trên máy tính. Trước tiên, bạn phải đặt tên cho \nkết nối để bắt đầu cấu hình phiên giao tiếp HyperTerminal với switch. Sau đó \nbạn gặp hộp thoại như hình 6.1.4.b, chọn cổng COM\n\n switch rồi nhấn nút OK. Bạn gặp một hộp thoại tiếp theo như hình 6.1.4.c, \nchọn các thông số như trên hình rồi ấn nút OK. \n\n \n\n\n\n 416\n\n \n\nHình 6.1.4.c. Cài đặt thông số cho HyperTerminal \n\n \n\nCắm điện cho switch. Các thông tin về quá trình khởi động switch sẽ hiện ra \ntrên màn hình HyperTerminal. Những thông tin này bao gồm thông tin về \nswitch, chi tiết về trạng thái POST và dữ liệu về phần cứng của switch.  \n\n \n\n\n\n 417\n\nSau khi switch hoàn tất quá  trình POST và khởi động xong, dấu nhắc của phần \nđối thoại cấu hình hệ thông sẽ xuất hiện. Bạn có thể cấu hình switch bằng tay \nhoặc với sự trợ giúp của phần đối thoại cấu hình. Phần đối thoại cấu hình trên \nswitch đơn giản hơn trên router. \n\n\n\n 418\n\n \n\nHình 6.1.4.d. Thông tin hiển thị của quá trình khởi động switch . \n\n \n\n6.1.5. Chức năng trợ giúp của giao tiếp CLI trên switch  \n\nGiao tiếp dòng lệnh (CLI-Command-Line Interface) của Cisco switch rất giống \nvới giao tiếp dòng lệnh của Cisco router. \n\nLệnh help có thể được gọi một cách ngắn gọn bằng dấu chấm hỏi (?). Khi bạn \nnhập dấu chấm hỏi tại dấu nhắc của hệ thống, switch sẽ hiển thị danh sách các \nlện\n\nHình 6.1.5. Lệnh help trong chế độ EXEC người dùng. \n\n \n\nLệnh help có thể được sử dụng một cách linh hoạt. Để tìm danh sách các lệnh \nbắt đầu với các ký tự mà bạn cần, bạn nhập các ký tự đó rồi liền tiêp sau đó là \ndấu chấm hỏi (?), không chừa khoảng trắng giữa các ký tự với dấu chấm hỏi. \nKhi đó bạn sẽ có kết quả hiển thị là danh sách các câu lệnh bắt đầu bằng các ký \ntự mà bạn vừa mới nhập vào. \n\n \n\nh mà bạn có thể sử dụng trong chế độ dòng lệnh hiện tại bạn đang ở. \n\n \n\n\n\n 419\n\nĐể hiện thị các từ khóa hoặc các tham số của một lệnh nào đó, bạn nhập câu \nlệnh đó, cách một  khoảng trắng rồi điền dấu chấm hỏi (?). switch sẽ hiện thị \ncác từ khóa hoặc tham số được sử dụng tại vị trí của dấu chấm hỏi trong câu \nlệnh đó. \n\n6.1.6. Các chế độ dòng lệnh của switch  \n\nSwitch có một chế độ dòng lệnh. Chế độ mặc định là chế độ EXEC người dùng. \nChế độ này có dấu nhắc đại diện lớn hơn (>). Các lệnh trong chế độ EXEC \nngười dùng rất giới hạn trong việc thay đổi cài đặt đầu cuối, kiểm tra cơ bản và \nhiện thị thông tin hệ thống. \n\nLệnh enable được sử dụng để di chuyển từ chế độ EXEC người dùng sang chế \nđộ EXEC đặc quyền. Chế độ EXEC đặc quyền có dấu nhắc là dấu thăng (#). \nCác lệnh sử dụng được trong chế độ này cũng bao gồm tất cả các lệ h của chế \nđộ EXEC e cho phép \nbạn truy cập vào các chế độ cấu hình sâu hơn. Bắt đầu từ chế độ EXEC đặc \n\nạn có thể cấu hình switch , do đó chế độ này cần được bảo vệ bằng \n đặt mật \n\nmã thì bạn sẽ được yêu cầu nhập mật mã trước khi vào được chế độ EXEC đặc \nqu\n\n \n\nLệnh  Giải thích \n\nn\n người dùng và còn có thêm lệnh configure. Lệnh configur\n\nquyền là b\nmật mã để cấm việc sử dụng ngoài ý muốn. Nếu người quản trị mạng\n\nyền. Khi bạn nhập mật mã, mật mã se không hiển thị trên màn hình. \n\nShow version Xem các thông tin về phần cứng và phần \n xác \n\nule nào, phần \nmềm nào. \n\nmềm. Được sử dụng để xác định chính\nswitch đang sử dụng mod\n\nShow running-config Hiển thị tập tin cấu hình đang chạy của \nswitch  \n\nShow interfaces Hiển thị trạng thái hoạt động của mỗi port, \nsố lượng gói vào/ra và bị lỗi trên port đó. \n\nShow interface status Hiển thị chế độ hoạt động của port  \n\n\n\n 420\n\nShow controllers ethernet- Xem số lượng frame bị hủy bỏ, bị\ncontroller \n\n trì hoãn, \nbị lỗi, bị đụng độ\u2026 \n\nShow port Xem thông tin về quá trình tự kiểm tra khi \nt nguồn của switch (POST) bậ\n\n \n\n6.2\n\nu hình mặc định của Catalyst switch \n\nKhi mới cắm điện lần đầu tiên, switch chỉ có tập tin cấu hình mặc định. Tên \nmặc định của switch là Switch . Không mật mã nào được cài đặt ở đường \nconsole và vty. \n\n \n\n. Cấu hình switch  \n\n6.2.1. Kiểm tra cấ\n\n \n\nHình 6.2.1.a. Cấu hình mặc định của switch \n\n \n\n\n\n 421\n\nBạn nên đặt mộ  trên cổng giả lập VLAN 1 để quản lý \nặc định là switch không có địa chỉ IP nào cả. \n\nTất cả các port của switch được đặt ở chế độ tự  động và đều nằm trong VLAN \n1. \n\nt địa chỉ IP cho switch\nswitch. M\n\nVLAN 1 và VLAN quản lý theo mặc định của switch. \n\nMặc định, trong thư mục flash lưu IOS, có một file tên là env_vars và một thư \nmục con tên là html. Sau khi switch đã được cấu hình, trong thư mục này sẽ có \nthêm tập tin config.text và vlan.dat là tập tin cơ sở dữ liệu của VLAN. \n\n \n\nHình 6.2.1.b. Đặc điểm mặc định của các port trên switch \n\n\n\n 422\n\n \n\nHình 6.2.1.c. Cấu hình mặc định của VLAN \n\n \n\n\n\n 423\n\n \n\nHình 6.2.1.d. Nội dung mặc định của thư mục flash. \n\n \n\nBạn có thể kiểm tra phiên bản IOS và giá trị cho thanh ghi cấu hình bằng lệnh \nsho\n\n \n\nặc \nnhiên chạy tự động trên switch cho phép switch xây dựng cấu trúc không vòng \nlặp trên toàn bộ mạng LAN. \n\nw version. \n\nMặc định, switch chỉ có một miền quảng bá và chúng ta chỉ có thể quản lý và \ncấu hình switch thông qua cổng console. Giao thức Spanning-Tree cũng m\n\n\n\n 424\n\n \n\nHình 6.2.1.e \n\n \n\nĐối với mạng nhỏ thì cấu hình mặc đinh là đủ. Switch vẫn thực hiện \nmicrosegment ngay, không cần cấu hình gì thêm. \n\n \n\n6.2\n\nhế đô EXEC người dùng hoặc chế độ EXEC đặc quyền. Để có thể \n\nTro  đặc \nquyền là Switch#, còn của chế độ EXEC người dùng là Switch>. \n\n \n\n.2. Cấu hình Catalyst switch  \n\nSwitch có thể đã được cấu hình trước đó và chúng ta có thể cần phải có mật mã \nđể vào được c\ncấu hình switch chúng ta phải bắt đầu từ chế độ EXEC đặc quyền. \n\nng giao tiếp dòng lệnh (CLI), dấu nhắc mặc định của chế độ EXEC\n\n\n\n 425\n\nSa\n\n\u2022 Xóa mọi thông tin về cơ sở dữ liệu đang có của VLAN bằng các xóa tập \n\n tin startup-\nconfig. \n\nu đây là các bứớc bạn cần thực hiện để đảm bảo là cấu hình mới sẽ được thay \nthế cho cấu hình cũ: \n\ntin vlan.dat trong thư mục flash. \n\u2022 Xóa tập tin cấu hình dự phòng của switch bằng cách xóa tập\n\n\u2022 Khởi động lại switch . \n\n \n\nHình 6.2.2.a Xóa mọi cấu hình cũ trên switch \n\n \n\nGhi hồ sơ, bảo mật và quản lý là những công việc hết sức quan trọng đối với mọi \nthiết bị mạng. \n\nChúng ta nên đặt tên cho switch và đặt mật mã cho đường console và vty. \n\nĐể có thể truy cập vào switch bằng Telnet hay bằng các ứng dụng TCP/IP khác thì \nbạn cần đặt một địa chỉ IP và kh witch . VLAN 1 là \nVLAN quản lý mặc định của switch. Tất cả các thiết bị mạng đều được đặt trong \n\nai báodefault gateway cho s\n\nVLAN quản lý. Nhờ đó, từ một máy trạm quản lý bạn có thể truy cập, cấu hình và \nquản lý tất cả các thiết bị liên  mạng. \n\n\n\n 426\n\n \n\nHì\n\nMặc định, Fast Ethernet Port được đặt ở chế độ tự động về tốc độ và song công. Do \nđó các\n\nnh 6.2.2.b. Đặt tên và mật mã trên đường console và vty, đặt địa chỉ IP và \ndefault gateway. \n\n \n\n port này sẽ tự động thỏa thuận các thông số với thiết bị kết nối vào nó. Nếu \nngười quản trị mạng muốn chắc chắn một port nào đó có tốc độ và chế độ song \ncông như ý mình muốn thì có thể cấu hình bằng tay cho port đó. \n\n \n\n\n\n 427\n\nCác thiết bị mạng thông minh có thể giao tiếp được bằng Web để cấu hình và quản \nlý chúng. Sau khi switch đã được cấu hình địa chỉ IP và gateway, chúng ta có thể \ntruy c ch \nbằng địa chỉ IP của switch  và port 80 là port mặc định của HTTP. Bạn có thể mở \n\nập vào switch bằng web. Trình duyệt web truy cập và dịch vụ này trên swit\n\nhoặc tắt dịch vụ HTTP trên switch và có thể chọn port khác cho dịch vụ này. \n\n \n\nHình 6.2.2.c. Cấu hình tốc độ và chế độ song công cho port cho \n\n \n\nHình 6.2.2.d. Mở dịch vụ HTTP và chọn port cho dịch vụ này trên switch. \n\n\n\n 428\n\n \n\nHình 6.2.2.e. Giao diện web của switch. \n\n\n\n 429\n\n \n\nHình 6.2.2.f. Giao diện quản lý web. \n\n6.2.3. \n\nSwitch\nn vào từ mỗi port . Các địa chỉ MAC \n\nhọc đư ỉ MAC. Những gói dữ liệu nào có địa chỉ \nMAC đích nằm trong bảng này sẽ được chuyển mạch ra đúng port đích. \n\nQuản lý bằng địa chỉ MAC \n\n học địa chỉ MAC của các thiết bị kết nối vào port của nó bằng cách kiểm \ntra địa chỉ nguồn của gói dữ liệu mà nó nhậ\n\nợc sẽ được ghi vào bảng địa ch\n\n \n\nHình 6.2.3.a \n\n\n\n 430\n\n \n\nĐể kiểm tra các địa chỉ mà switch đã học được, bạn dùng lệnh show mac-address-\ntable trong chế độ EXEC đặc quyền. \n\nSwitch có thể tự động học vào bảo trì hàng ngàn địa chỉ MAC. Để tiết kiệm bộ nhớ \ngiúp tối ưu hóa hoạt đ óa đi khi \nthiết bị tương ứng đã bị ngắt kết nối khỏi port, hoặc bị tắt điện hoặc đã được \nhuyển sang port khác trên cùng switch đó hoặc trên switch khác. Cho dù vì lý do \n\ngì đi n được \ngói dữ liệu nào có địa chỉ MAC đó nữa thì switch sẽ tự động xóa địa chỉ đó sau \n300 gi\n\nThay vì chờ bảng địa chỉ tự động bị xóa vì hết thời hạn thì người quản trị mạng có \nthể xó\n\n cấu hình \ntrước \n\nộng của switch, các địa chỉ MAC học được nên x\n\nc\nữa, nếu có một địa chỉ MAC nào đó trong bảng mà switch không nhận \n\nây. \n\na bảng địa chỉ MAC bằng lệnh clear mac-address-table trong chế độ EXEC \nđặc quyền. Ngay cả những địa chỉ MAC do chính người quản trị mạng\n\nđó cũng bị xóa bằng lệnh này. \n\n \n\nHình 6.2.3.b \n\n6.2.4. Cấu hình địa chỉ MAC cố định \n\nBạn có thể quy đó của \nswitch. Lý d  một trong \n\nết đinh gán một địa chỉ MAC cố định cho một port nào \no để gán cố định một địa chỉ MAC cho một port có thể là\n\nnhững lý do sau: \n\n\n\n 431\n\n\u2022 AC không bị xóa tự động do hết thời hạn trên bằng địa \n\n\u2022 ột máy trạm đặc biệt nào đó của user đựơc kết nối vào một \nđịa chỉ MAC của máy này không đổi. \n\n\u2022 Tăng khả năng bảo mật. \nĐể kh ỉ MAC cố định cho switch, bạn dùng lệnh sau: \n\number> vlan \n\nGiúp cho địa chỉ M\nchỉ \nMột server hay m\nport trên switch và \n\nai báo một địa ch\n\nSwitch (  config)#mac-address-table static <mac-address of host> interface \nFastEthernet <Ethernet n\n\nĐể xóa một địa chỉ MAC cố định đã được khai báo bạn dùng dạng no của câu lênh \ntrên \n\n \n\n6.2.5. Cấu hình port bảo vệ \n\nBảo vệ hệ thống mạng là một trách nhiệm quan trọng của người quản trị mạng. \n\n \nvào m\n\nswitch tầng truy cập là có khả năng truy cập dễ dàng nhất từ các ổ cắm dây đặt ở \ncác phòng. Bất kỳ người nào cũng có thể cắm PC hoặc máy tính xách tay của mình\n\nột trong những ổ cắm dây này. Do đó trên switch có một đặc tính gọi là port \nbảo vệ giúp giới hạn số lượng địa chỉ mà switch có thể  học trên một port. Bạn có \nthể cấu hình cho switch thực hiện một động tác nào đó khi số lượng địa chỉ học \nđược trên port đó vượt quá giới hạn cho phép. Địa chỉ MAC bảo vệ có thể được \nkhai báo cố định. Tuy nhiên việc khai báo cố định điạ chỉ MAC bảo vệ rất phức tạp \nvà dễ gây ra lỗi. \n\n\n\n 432\n\nThay vì khai báo địa chỉ MAC bảo vệ cố định thì bạn có thể thực hiện như sau. \nTrước tiên là bật chế độ port bảo vệ trên port mà bạn muốn. Số lượng địa chỉ MAC \ntrên port đó giới hạn là 1 thôi. Như vậy địa chỉ MAC đầu tiên mà switch tự động \nhọc được sẽ trở thành địa chỉ cần bảo vệ. \n\nĐể kiểm tra mạng trạng thái của port bảo vệ, bạn dùng lệnh show port security. \n\n \n\nHình 6.2.5 \n\nCác bước cơ bản để cấu hình port bảo vệ: \n\n1. Vào chế độ cấu hình của port mà bạn cần. \n2. mở chế độ truy cập cho port đó. \n3. mở chế độ port bảo vệ. \n4. Giới hạn số lượng địa chỉ MAC bảo vệ trên port đó (thường giới hạn 1 địa \n\nchỉ MAC ) \n5. Chỉ định loại địa chỉ MAC bảo vệ là địa chỉ cố định (static), học tự động \n\n(dynamic) hay sticky. \n\u2022 Static: là địa chỉ MAC do người quản trị mạng khai báo cố định bằng \n\ntay. Sau khi khai báo xong, địa chỉ này được lưu cố định trong bảng \nđịa chỉ và không có giới hạn về thời hạn lưu giữ. Ngay cả khi switch \nbị mất điện, khởi động lại cũng không xóa mất địa chỉ cố định. \n\n\u2022 Dynamic: là địa chỉ MAC do switch tư động học được. Loại địa chỉ \nđộng này được lưu có thời hạn trên switch . Nếu trong một khoảng \nthời gian nhất định mà switch không nhận được gói dữ liệu nào có địa \nchỉ MAC đó nữa thì nó sẽ xóa địa chỉ này ra khỏi bảng. \n\n\n\n 433\n\n\u2022 Sticky: là địa chỉ MAC c được tự động nhưng sau khi học \nxong thì switch ghi địa chỉ này cố đinh vào bảng luôn và không xóa \n\nc hiện động tác đóng port (Shutdown) hoặc treo port \n\nhể để cấu hình port bảo vệ trên mỗi dòng switch khác nhau sẽ khác \nnhau nhưng nhìn chung đều theo các bước cơ bản như trên. \n\nSau đây là ví dụ về cấu hình port bảo vệ trên switch 2950: \n\nALSwitch (config)#interface fastethernet 0/4 \n\nALSwitch (config-if)# switchport port-security ? \n\nAging Port-security aging commands \n\nMac-address Secure mac address \n\nMaximum Max secure addrs \n\nViolation Security Violation Mode \n\n<cr> \n\nALSwitch (config-if)# switchport mode access \n\nALSwitch (config-if)# switchport port-security \n\nximum 1 \n\nAL\n\n Thêm, bớt, chuyển đổi switch  \n\nKh\nau cho switch : \n\n\u2022 Default gateway. \n\n do switch họ\n\nđiạ chỉ đó nữa ngay cả khi switch bị tắt điện và khởi động lại. \n6. Cấu hình cho switch thự\n\n(Restrict) khi số lượng địa chỉ MAC học được trên port đó vượt quá giới hạn \ncho phép. \n\nCâu lệnh cụ t\n\nALSwitch (config-if)# switchport port-security ma\n\nSwitch (config-if)# switchport port-security mac-address sticky \n\nALSwitch (config-if)# switchport port-security violation shutdown \n\n6.2.6.\n\ni thêm một switch mới vào hệ thống mạng, bạn cần cấu hình các thông tin \ns\n\n\u2022 Tên switch  \n\u2022 Địa chỉ IP của switch trong VLAN quản lý. \n\n\n\n 434\n\n\u2022 Mật mã cho các đường truy cập switch. \nKhi chuyển một host từ port này sang port khác hoặc sang switch khác, bạn cũng \n\nhình port bảo vệ và cấu hình port bảo vệ cho port mới của host đó. \n\nủa \n\nS c ng trên một server nội bộ để sau đó có thể tải về bộ \nnhớ flash khi cần thiết. \n\nủa chế độ EXEC đặc quyền được cài đặt bằng lênh \n\nạn truy cập về \nmặt vật lý được nhưng lại không thể vào được chế độ EXEC người dùng hoặc đặc \n\nuyền\n\nSau đây là các bước thực hiện để khôi phục mật mã trên switch 2900: \n\n xong màn hình HyperTerminal. \n2. Tắt điện của switch đi. Sau đó bạn vừa nhấn nút Mode ở mặt trước của \n\nswitch vừa cắm điện lại cho switch. Khi nào LED STAT trên switch tắt đi \nthì bạn mới buông nút Mode ra. \n\n3. Khi đó trên màn hình HyperTerminal sẽ có hiện thị như sau: \nC2950 Boot Loader (C2950-HBOOT-MAC) Version \n\nnên xóa một số cấu hình có thể gây tác động không tốt ở vị trí cũ và thêm cấu hình \nmới cho vi trí mới của host. Ví dụ khi chuyển một host đang kết nối vào một port \ncó chế độ bảo vệ sang port khác hoặc switch khác, thì ở port cũ bạn nên xóa cấu \n\n6.2.7. Quản lý tập tin hoạt động hệ thống của switch  \n\nNhà quản trị mạng luôn phải lập hồ sơ và bảo trì các tập tin hoạt động hệ thống c\ncác thiết bị mạng. Tập tin cấu hình hoạt động mới nhất nên được lưu dự phòng ra \nserver hoặc ra đĩa. Tập tin này không chỉ là thông tin nhạy cảm mà còn rất hữu \ndụng khi cần khôi phục lại cấu hình cho thiết bị mạng. \n\nIO ũng nên được lưu dự phò\n\n6.2.8. Khôi phục mật mã trên switch 1900/2950 \n\nVì lý do quản lý và bảo mật, switch thường được đặt mật mã trên đường console và \nvty. Ngoài ra còn có mật mã c\nenable password hoặc enable secret password. Mật mã này giúp đảm bảo chỉ có \nnhưng user được phép mới có thể truy cập vào chế độ EXEC người dùng và đặc \nquyền trên switch. \n\nTuy nhiên có một số tình huống bạn cần truy cập vào switch nhưng b\n\nq  vì không biết hoặc quên mật mã. Trong những trường hợp như vậy bạn cần \nphải khôi phục lại mật mã trên switch . \n\n1. Đảm bảo rằng bạn đã kết nối PC của mình vào cổng console trên switch và \nđã mở\n\n\n\n 435\n\n12.1 (11r) EA1, RELEASE \n\nSOFT (fc1) \n\nCompiled Mon 22-Jul-02 18:57 by antonio \n\nWS-C2950-24 starting\u2026 \n\nBase ethernet MAC Address: 00:0a:b7:72:2b:40 \n\nXmodem file system is available. \n\nThe system has been interrupted prior to initializing the flash files \n\nSystem. The following commands will initialize the flash files system. \n\nAnd finish loading the operating system software: \n\nFlash_init \n\nLo\n\nBo\n\nr \n\nDi\n\nCh  câu lệnh \nthứ\n\nlash: sẽ cho biết nội dung của thư mục flash. Mặc \nđịnh, tên c ục flash sẽ có tên là \nconfig.text\n\n5. Bạn đổi định dạng tên của tập tin cấu hình như sau: \nRe\n\n6. \n\nad_helper \n\not \n\n4. Để khởi động tập tin hệ thống và kết thúc quá trình tải hệ điều hành, bạn \nnhập các lệnh sau theo thứ tự như sau: \n\nFlash_init \n\nLoad_helpe\n\nr flash: \n\nú ý: Không được quên dấu hai chấm (:) ở liền sau chữ flash trong\n 3 ở trên. \n\nKết quả hiện thị của lệnh dir f\nủa tập tin cấu hình switch lưu trong thư m\n\n. \n\nname flash:config.text flash:config.old \n\nSau đó bạn gõ lệnh boot để khởi động lại switch \n\n\n\n 436\n\nLú i định dạng nên switch không tải \nđược tập tin cấu hình. Do đó sau khi khởi động xong bạn sẽ gặp câu thoại cấu \nhìn\n\nContinue with the configuration dialog? [yes/no] : N \n\nSau đó bạn sẽ vào được chế độ EXEC người dùng và đặc quyền mà không gặp \nmậ\n\n7. \n\n8. Sau đó cho switch chạy tập tin cấu hình này bằng cách copy tập tin cấu hình \n\nSwitch#copy flash:config.text system\n\nSource filename [config.text]?[enter] \n\nDestination filenam\n\nc náy switch sẽ tải tập tin cấu hình xuống RAM để chạy. Khi đó bạn có \n\nAl\n\nisco \n\nAlSwitch (config-l\n\nAlSwitch (config-line)#exit \n\nconfig)#exit \n\nAl\n\nDestination filename [startup-config]?[enter] \n\nBuilding configuration\u2026. \n\n[OK] \n\nc này tập tin cấu hình của switch đã bị đổ\n\nh của switch như sau, bạn nhập ký tự N cho câu hỏi này: \n\nt mã nữa. \n\nBạn trả lại tên cũ cho tập tin cấu hình bằng lệnh như sau: \nRename flash:config.old flash:config.text \n\nnày lên RAM: \n:ruinning-config \n\ne [ruinning-config] [enter] \n\n9. Lú\nthể  thay đổi mật mã nếu muốn: \n\nSwitch#configure terminal \n\nAlSwitch (config)#no enable secret \n\nAlSwitch (config)#enable password c\n\nAlSwitch (config)#line console 0 \n\nine)#password cisco \n\nAlSwitch (\n\nSwitch#copy ruinning-config startup-config \n\n\n\n 437\n\nAlSwitch# \n\n10. Bạn tắt điện cho switch rồi bật lại để kiểm tra xem mật mã mới đã được áp \ndụng đúng chưa. Nếu chưa đúng thì bạn thực hiện quá trình trên lại từ đầu. \n\n6.2.9. Nâng cấp firmware 1900/2950 \n\nIOS và firmware thường xuyên được phát hành phiên bản mới với các khắc \nphục lỗ hổng cũ, thêm các đặc tính mới và tăng khả năng hoạt động. Nếu bạn \nmuốn hệ thống mạng được bảo vệ tốt hơn, hoạt động hiệu quả hơn với phiên \nbản mới hơn của IOS thì bạn nên nâng cấp IOS. \n\nBạn có thể tải phiên bản IOS về server nội bộ của mình từ Trung tâm phần mềm \nkết nối trực tuyến Cisco (CCO- Cisco Connection Online). \n\nTỔNG KẾT \n\nSau khi hoàn tất chương này, bạn cần nắm được các ý chính sau: \n\n\u2022 Thành phần cơ bản của Catalyst switch . \n\u2022 Theo dõi trạng thái và hoạt động cảu switch thông qua đèn báo hiệu LED \n\u2022 Kiểm tra thông tin xuất ra của quá trình khởi động switch bằng \n\nHyperTerminal. \n\u2022 Sử dụng tính năng trợ giúp của giao tiếp dòng lệnh. \n\u2022 Các chế độ mặc định của switch  \n\u2022 Đặt địa chỉ IP và default gateway cho switch để có thể kết nối và quản lý \n\nswitch qua mạng. \n\u2022 Xem cấu hình switch với trình duyệt Web. \n\u2022 Cài đặt tốc độ và chế độ song công cho port của switch . \n\u2022 Kiểm tra và quản lý bảng địa chỉ MAC của switch . \n\u2022 Cấu hình port bảo vệ. \n\u2022 Quản lý tập tin cấu hình IOS. \n\u2022 Thực hiện khôi phục mật mã cho switch \n\u2022 Nâng cấp IOS cho switch \n\n\n\n 438\n\nCHƯƠNG 6: CÊu h×nh switch \n\nGiíi thiÖu \nSwitch lµ mét thiÕt bÞ m¹ng Líp 2 ho¹t ®éng nh− mét ®iÓm tËp trung kÕt nèi \n\ncña m¸y tr¹m, server, router, hub vµ c¸c switch kh¸c. \n\nHub lµ mét thiÕt bÞ tËp trung kÕt nèi lo¹i cò, cÊp thÊp h¬n switch v× tÊt c¶ c¸c \n\nthiÕt bÞ kÕt nèi vµo hub chia sÎ cïng mét b¨ng th«ng vµ cã thÓ x¶y ra tranh chÊp. \n\nHub chØ cã thÓ ch¹y b¸n song c«ng, nghÜa lµ t¹i mét thêi ®iÓm hub hoÆc truyÒn \n\nhoÆc nhËn d÷ liÖu chø kh«ng thÓ thùc hiÖn ®ång thêi c¶ hai. Cßn switch th× cã thÓ \n\nch¹y song c«ng, truyÒn vµ nhËn d÷ liÖu song song ®ång thêi. \n\nSwitch lµ mét brigde ®a port: ChuyÓn m¹ch ®ang lµ mét c«ng nghÖ chuÈn \n\nhiÖn nay trong cÊu tróc h×nh sao cña Ethernet LAN. Khi hai thiÕt bÞ kÕt nèi vµo \n\nswitch muèn liªn l¹c víi nhau th× switch thiÕt lËp mét m¹ch ¶o ®iÓm ®Õn - ®iÓm \n\nµnh r ®ã nªn kh«ng cã kh¶ n¨ng x¶y ra ®ông ®é. \n\n lµ rÊt quan träng ®èi víi ng−êi lµm vÒ m¹ng. \n\nswitch. Mét trong nh÷ng t¸c vô nµy lµ b¶o tr× switch vµ hÖ ®iÒu hµnh IOS \n\n(Internetworking Oprating System) cña nã. Mét sè t¸c vô kh¸c liªn quan ®Õn viÖc \n\nqu¶n lý c¸c cæng giao tiÕp cña switch, tèi −u  ho¸ b¶ng ho¹t ®éng cña switch ®Ó \n\n®¶m b¶o ®é tin cËy vµ b¶o mËt. Nh÷ng kü n¨ng vÒ cÊu h×nh switch, n©ng cÊp IOS, \n\nkh«i phôc mËt m· lµ nh÷ng kü n¨ng rÊt quan träng cña ng−êi qu¶n trÞ m¹ng. \n\nd iªng cho hai thiÕt bÞ \n\nChÝnh v× vai trß quan träng cña switch trong hÖ thèng m¹ng hiÖn nay nªn \n\nviÖc t×m hiÓu vµ cÊu h×nh switch\n\nMét switch hoµn toµn míi lu«n cã mét cÊu h×nh mÆc ®Þnh cña nhµ s¶n xuÊt. \n\nCÊu h×nh nµy th−êng kh«ng ®¸p øng ®ñ c¸c yªu cÇu cña nhµ qu¶n trÞ m¹ng víi \n\n\n\n 439\n\nSau khi hoµn tÊt ch−¬ng nµy, b¹n cã thÓ thùc hiÖn nh÷ng c«ng viÖc sau: \n\nÇn chÝnh cña Catalyst switch. \n\nning \u2013 Tree. \n\nn¨ng suÊt gi¶m vµ kh¸ch hµng kh«ng hµi lßng. \n\n Do ®ã c¸c c«ng ty lu«n mong muèn hÖ thèng m¹ng may tÝnh cña hä lu«n \nian ho¹t ®éng \n\n−îc 99,999% thêi \nian h hÜa lµ chØ cho phÐp m¹ng ng−ng ho¹t ®éng trung \n×nh m y 1 giê trong 4000 ngµy, hay 5,25 phót trong mét \n\nn¨m. \n\n NÕu cã thÓ thùc hiÖn ®−îc môc tiªu trªn th× hÖ thèng m¹ng sÏ thùc sù ho¹t \n\n\u2022 X¸c ®Þnh c¸c thµnh ph\n\n\u2022 Theo dâi ho¹t ®éng vµ tr¹ng th¸i cña switch th«ng qua c¸c b¸o c¸o hiÖu \nLED. \n\n \u2022 X¸c ®Þnh lîi Ých vµ nh÷ng nguy c¬ cña cÊu tróc dù phßng. \n\n \u2022 M« t¶ vai tro cña Spanning -  Tree trong m¹ng chuyÓn m¹ch cã dù phßng. \n\n \u2022 X¸c ®Þnh c¸c thµnh phÇn quan träng trong ho¹t ®éng cña Span\n\n \u2022 M« t¶ qu¸ tr×nh bÇu bridge gèc. \n\n \u2022 LiÖt kª c¸c tr¹ng th¸i Spanning \u2013 Tree. \n\n \u2022 So s¸nh  giao thøc Spanning \u2013 Tree. \n\n7.1. CÊu tróc dù phßng. \n\n 7.1.1. Sù dù phßng. \n\n RÊt nhiÒu c«ng ty vµ tæ chøc ®· ph¸t triÓn ho¹t ®éng cña hä dùa trªn m¹ng \nm¸y tÝnh. ViÖc truy cËp vµo file server, c¬ së d÷ liÖu, Internet, Intranet vµ Extranet \n®ãng vai trß quan träng cho sù thµnh c«ng trong kinh doanh v× nÕu m¹ng bÞ ®øt, \n\nho¹t ®éng suèt 24 giê, 7 ngµy mét tuÇn. ViÖc thùc hiÖn 100% thêi g\nth× cã thÓ kh«ng kh¶ thi nh−ng môc tiªu ®Æt ra lµ ph¶i b¶o ®¶m ®\ng o¹t ®éng. TØ lÖ nµy cã ng\nb ét ngµy trong 30 n¨m, ha\n\n®éng rÊt tin cËy. §é tin cËy cña hÖ thèng m¹ng ®−îc ®¶m b¶o tõ viÖc trang bÞ c¸c \nthiÕt bÞ cã ®é tin cËy cao ®Õn viÖc thiÕt kÕ hÖ thèng m¹ng cã dù phßng, cã kh¶ n¨ng \nchÞu ®−îc lçi, héi tô nhanh ®Ó v−ît qua sù cè. \n\n\n\n 440\n\n M¹ng cã kh¶ n¨ng chÞu ®−îc lçi nhê cã sù dù phßng. Dù phßng ë ®©y cã \nnghÜa lµ chuÈn bÞ nh÷ng g× nhiÒu h¬n møc cÇn thiÕt b×nh th−êng. Nh−ng dù phßng \ngióp t¨ng ®é tin cËy cña m¹ng nh− thÕ nµo? \n\n Gi¶ sö nh− b¹n chØ cã mét c¸ch duy nhÊt ®Ó ®i lµm lµ ®i lµm b»ng xe h¬i cña \nb¹n, vËy nÕu chiÕc xe h¬i nµy bÞ h− cã nghÜa lµ b¹n kh«ng thÓ ®i lµm cho ®Õn khi \nchiÕc xe h¬i nµy ®−îc söa ch÷a xong. \n\n NÕu chiÕc xe nµy cø trung binh 10 ngµy l¹i h− mÊt 1 ngµy th× kh¶ n¨ng sö \ndông cña nã lµ 90%. §iÒu nµy cã nghÜa lµ cø 10 ngµy th× b¹n chØ ®i lµm ®−îc 9 \nngµy. Do ®ã ®é tin cËy ®¹t ®−îc 90%. \n\n NÕu b¹n mua thªm mét xe h¬i n÷a ®Ó ®i lµ. §óng lµ kh«ng cÇn thiÕt ph¶i cã \n®Õn 2 chiÕc xe h¬i chØ ®Ó ®i lµm nh−ng b¹n l¹i cã xe dù phßng khi chiÕc xe chÝnh bÞ \nh−. Nh− vËy viÖc ®i lµm cña b¹n sÏ kh«ng cßn bÞ phô thuéc vµo mét chiÕc xe n÷a. \n\n C¶ hai chiÕc xe còng cã thÓ bÞ h− cïng mét lóc, kho¶ng 100 ngµy th× cã mét \nngµy nh− thÕ. Nh− vËy b¹n mua thªm chiÕc xe thø 2 ®Ó dù phßng, ®é tin cËy ®· \nt¨ng lªn 99%. \n\n \n\n \n\n \n\nH×nh 7.1.1 \n\n 7.1.2. CÊu tróc dù phßng. \n\n\n\n 441\n\n Môc tiªu cña cÊu tróc dù phßng lµ lo¹i bá ®iÓm tËp trung cña sù cè. TÊt c¶ \nc¸c hÖ thèng m¹ng cÇn ph¶i cã dù phßng ®Ó n©ng møc ®é b¶o ®¶m. \n\n HÖ thèng ®−êng giao th«ng lµ mét vÝ dô vÒ cÊu tróc cã tÝnh dù phßng. NÕu \ncã mét con ®−êng bÞ ®ãng l¹i ®Ó söa ch÷a th× sÏ lu«n cã ®−êng kh¸c ®Ó ®i ®Õn ®Ých. \n\n−êng ®i vµo thÞ \n VÝ dô cã mét c«ng ®ång c¸ch trung t©m thÞ trÊn bëi cã mét con s«ng. NÕu \nchØ b¾c mét chiÕc cÇu qua s«ng ®ã th× cã nghÜa lµ chØ cã mét con ®\ntrÊn. CÊu tróc nh− vËy lµ kh«ng cã sù dù phßng. \n\n NÕu c©y cÇu nµy bÞ ngËp hoÆc bÞ h− háng do tai n¹n th× sÏ kh«ng thÓ ®i vµo \nthÞ trÊn b»ng chiÕc cÇu nµy ®−îc n÷a. \n\n B¾c thªm mét chiÕc cÇu thø hai qua s«ng ®Ó t¹o cÊu tróc cã dù phßng. Khi \n®ã ng−êi d©n ë ngo¹i « sÏ kh«ng cßn bÞ c¾t ®øt víi trung t©m thÞ trÊn khi mét c©y \ncÇu bÞ h− háng n÷a. \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n 442\n\n \n\n \n\n \n\n \n\n \n\nH×nh 7.1.2. m« h×nh cã dù phßng vµ kh«ng cã dù phßng. \n\n 7.1.3. CÊu tróc chuyÓn m¹ch dù phßng. \n\n HÖ thèng m¹ng cã thiÕt bÞ vµ ®−êng dù phßng sÏ cã kh¶ n¨ng tån t¹i cao \nh¬n, tr¸nh ®−îc m« h×nh chØ cã mét ®iÓm trung t©m cña sù cè v× nÕu mét ®−êng kÕt \nnèi hoÆc mét thiÕt bÞ gÆp sù cè th× ®−êng dù phßng hoÆc thiÕt bÞ dù phßng sÏ l·nh \ntr¸ch nhiÖm thay thÕ. \n\n VÝ dô nh− h×nh 7.1.3, nÕu Switch A bÞ h−, l−u l−îng tõ segment 2 sang \nsegment 1 vµ sang router vÉn cã thÓ ®i qua Switch B. \n\nSwitch B. \n NÕu port 1 trªn Switch A bÞ h− thi giao th«ng vÉn cã thÓ ®i qua port 1 trªn \n\n\n\n 443\n\n \n\nH×nh 7.1.3 \n\n ã, nhê ®ã nã cã \nthÓ «ng biÕt g× vÒ ®Þa chØ cña m¸y \n®Ých th×  nµo nã häc ®−îc ®Þa chØ \nMA  ®−îc chuyÓn ra tÊt c¶ c¸c \npor ñ\n\n − h×nh 7.1.3 cã thÓ sÏ g©y ra \ntrËn · g ®Þa chØ MAC kh«ng æn ®Þnh. \n\n ¸. \n\n −îc switch sö lý gièng nh− gãi qu¶ng b¸ lµ chuyÓn ra \ntÊt \n\nSwitch häc ®Þa chØ MAC cña thiÕt bÞ kÕt nèi vµo port cña n\n chuyÓn d÷ liÖu ®Õn ®óng ®Ých. NÕu switch kh\n\n nã sÏ chuyÓn gãi ra tÊt c¶ c¸c port cho ®Õn khi\nC cña thiÕt bÞ nµy. Gãi qu¶ng b¸ vµ multicast còng \n\nt c a switch. \n\nChÝnh v× vËy, cÊu tróc chuyÓn m¹ch dù phßng nh\n b o qu¶ng b¸, chuyÓn nhiÒu l−ît frame vµ b¶n\n\n7.1.4. TrËn b·o qu¶ng b\n\nGãi multicast còng ®\nc¶ c¸c port trõ port nhËn gãi vµo. \n\n \n\n\n\n 444\n\n \n\nH×nh 7.1.4.a \n\n \n\n \n\n \n\n \n\nH×nh 7.1.4.b. HËu qu¶ lµ g©y ra mét trËn b·o qu¶ng b¸ trªn m¹ng. \n\n\n\n 445\n\n Ta xÐt vÝ dô trªn h×nh 7.1.4.a: gi¶ sö Host X göi mét gãi qu¶ng b¸ vµ gãi yªu \ncÇu ARP ®Ó hái ®Þa chØ líp 2 cña router ch¼ng h¹n. KhÝ ®ã switch A nhËn ®−îc gãi \nqu¶ng b¸ nµy sÏ chuyÓn gãi qu¶ng b¸ nµy sÏ chuyÓn gãi ra tÊt c¶ c¸c port. Switch B \ncòng thùc hiÖn nh− vËy. KÕt qu¶ lµ Switch B sÏ nhËn l¹i c¸c gãi qu¶ng b¸ ®−îc göi \ntõ Switch A vµ ng−îc l¹i, Switch A còng nhËn l¹i c¸c gãi qu¶ng b¸ ®−îc göi tõ \n\n¸ cña nhau vµ l¹i chuyÓn tiÕp ra \ntÊt c¶ c¸c port. \n\n Cø nh− vËy, mçi mét gãi qu¶ng b¸ mµ switch nhËn vµo sÏ ®−îc nh©n ra tÊt \nc¶ c¸c port g©y lªn trËn b·o qu¶ng b¸ trªn m¹ng. TrËn b·o qu¶ng b¸ nµy sÏ ®−îc \ntiÕp tôc cho ®Õn khi nµo mét trong hai switch bÞ ng¾t kÕt nèi ra. Switch vµ c¸c thiÕt \nbÞ ®Çu cuèi sÏ bÞ qu¸ t¶i v× ph¶i sö lý qu¸ nhiÒu c¸c gãi qu¶ng b¸ vµ kh«ng thÓ sö lý \n®−îc c¸c gãi d÷ liÖu kh¸c cña user. Khi ®ã hÖ thèng m¹ng xem nh− bÞ tª liÖt. \n\n 7.1.5. TruyÒn nhiÒu l−ît frame. \n\n CÊu tróc m¹ng chuyÓn m¹ch dù phßng cã thÓ lµm cho thiÕt bÞ ®Çu cuèi nhËn \n®−îc nhiÒu frame trung lÆp nhau. \n\nSwitch B.  C¶ hai Switch nµy nhËn ®−îc gãi qu¶ng b\n\n \n\nH×nh 7.1.5 \n\nTa xÐt vÝ dô trªn h×nh 7.1.5: gi¶ sö r»ng c¶ hai switch võa míi xo¸ ®Þa chØ \n\n chØ MAC cña router Y trong b¶ng ARP cña m×nh lªn nã göi mét frame trùc \ni Route\n\n \nMAC cña Router Y trªn b¶ng ®Þa chØ v× hÕt thêi h¹n vµ gi¶ sö r»ng Host X vÉn cßn \ngi÷ ®Þa\ntiÕp tí r Y. Router Y nhËn ®−îc gãi gi÷ liÖu nµy v× nã n»m trong cïng \nsegment víi Host X. \n\n\n\n 446\n\n \nRouter Y trªn b¶ng ®Þa chØ nªn nã chuyÓn frame ra tÊt c¶ c¸c port cña nã. T−¬ng tù \ntrªn switch B còng vËy. KÕ −îc nhiÒu frame trïng nhau. \n§i n\n\n h. \n\n CÊu tróc m¹ng chuyÓn m¹ch dù phong cã thÓ lµm cho c¸c switch häc ®−îc \nth«ng tin sai vÒ ®Þa chØ, switch sÏ häc ®−îc mét ®Þa chØ MAC trªn mét port mµ \ntrong khi ®Þa chØ MAC nµy thËt sù n»m trªn port kh¸c. \n\nSwitch A còng nhËn ®−îc frame nµy nh−ng kh«ng cã ®Þa chØ MAC cña \n\nt qu¶ lµ Router Y nhËn ®\nÒu µy lµm cho c¸c thiÕt bÞ tèn tµi nguyªn ®Ó xö lý nhiÒu frame kh«ng cÇn thiÕt. \n\n7.1.6. C¬ së d÷ liÖu ®Þa chØ MAC kh«ng æn ®Þn\n\n \n\nH×nh 7.1.6 \n\n Ta xÐt vÝ dô nh− trªn h×nh 7.1.6: gi¶ sö ®Þa chØ MAC cña Router Y kh«ng cã \ntrong b¶ng ®Þa chØ cña c¶ hai switch. \n\n Gi¶ sö host X göi mét gãi d÷ liÖu trùc tiÕp ®Õn Router Y. Switch A vµ B ®Òu \nnhËn ®−îc gãi g÷i liÖu nµy vµ häc ®−îc ®Þa chØ MAC cña Host X lµ n»m trªn port \n0. Sau khi ®ã d÷ liÖu nµy ®−îc hai switch chuyÓn ra tÊt c¶ c¸c port v× trªn hai \nswitch ®Òu ch−a cã ®Þa chØ MAC cña Router Y. KÕt qu¶ lµ switch A nhËn l¹i gãi d÷ \nliÖ õ \nSwitch A vµo port 1.\ntrª  \n\n 7.2. Giao thøc Spanning � Tree (Giao thøc ph©n nh¸nh c©y). \n\n 7.2.1. CÊu tróc dù phßng vµ Spanning � Tree. \n\nu nµy tõ switch B vµo port 1 vµ ng−îc l¹i, Switch B còng nhËn l¹i d÷ liÖu t\n Khi ®ã Switch A vµ B häc l¹i lµ ®Þa chØ MAC cña Host X n»m \n\nn port 1, kÕ tiÕp, khi Router Y göi mét gãi d÷ liÖu cho Host X, Switch Avµ B\ncòng ®Òu nhËn ®−îc gãi d÷ liÖu tõ Router Y ®Õn Host X  sÏ bÞ r¬i vµo vßng lÆp. \n\n\n\n 447\n\n CÊu tróc m¹ng dù phßng ®−îc thiÕt kÕ ®Ó b¶o ®¶m m¹ng tiÕp ho¹t ®éng khi \ncã mét sù cè x¶y ra, user sÏ Ýt bÞ gi¸n ®o¹n c«ng viÖc cña hä h¬n. Mäi sù gi¸n ®o¹n \ndo sù cè g©y ra cµng ng½n cµng tèt. \n\n \n\nH×nh 7.2.1.a. Mét vÝ dô vÒ cÊu tróc dù phßng. \n\n Trong hÖ thèng m¹ng, chóng ta t¹o nhiÒu kÕt nèi gi÷a c¸c switch vµ bridge \n®Ó dù phßng. C¸c kÕt nåi nµy sÏ t¹o ra c¸c vßng lÆp vËt lý trong m¹ng nh−ng nÕu cã \nmét kÕt nèi bÞ ®øt thi l−u l−îng cã thÓ ®−îc chuyÒn sang kÕt nèi kh¸c. \n\n Switch ho¹t ®éng ë líp 2 cña m«i h×nh OSI vµ thùc hiÖn quyÕt ®Þnh chuyÓn \ngãi ë líp nµy. Khi Switch kh«ng x¸c ®Þnh ®−îc port ®Ých th× nã sÏ chuyÓn gãi ra tÊt \nc¶ rt \nnhËn gãi vµo. Do ®ã,\n\n \nTo L \n\n«ng tin líp 2 trong gãi d÷ liÖu kh«ng cã \nµo vßng lÆp líp 2 cña cÊu tróc m¹ng chuyÓn \n\nm¹ch, nã sÏ bÞ lÆp vßng ®Õn v« tËn v× kh« rong frame gióp lo¹i \nbá èng m¹ng tiªu tèn b¨ng th«ng vµ cã thÓ \ndÉn Õ\n\nc¸c port. Gãi qu¶ng b¸ vµ multicast còng ®−îc göi ra tÊt c¶ c¸c port  trõ po\n m¹ng chuyÓn m¹ch kh«ng ®−îc cã vßng lÆp, v× nh− vËy sÏ \n\ng©y ra nhiÒu sù cè nh− ®· ph©n tÝch ë c¸c phÇn trªn. \n\në líp 3, mçi khi gãi d÷ liÖu ®i qua mét Router, tr−êng thêi gian sèng (Time \nLive \u2013 TTL) sÏ gi¶m ®i mét gi¸ trÞ vµ gãi d÷ liÖu sÏ bÞ huû bá khi tr−êng TT\n\n®¹t ®Õn gi¸ trÞ 0. Trong khi ®ã, phÇn th\ntr−¬ng TTL. Do ®ã, nÕu frame bÞ r¬i v\n\nng cã th«ng tin nµo t\nframe khi bÞ lÆp vßng. §iÒu ®ã lµm hÖ th\n ® n bÞ tª liÖt. \n\n\n\n 448\n\n Tãm l¹i, m¹ng chuyÓn m¹ch víi switch vµ bridge kh«ng thÓ cã vßng lÆp \nnh−ng chóng ta vÉn cÇn x©y dùng cÊu tróc m¹ng vËt lý cã vßng l¾p ®Ó dù phßng khi \n\nspanning - tree. ThuËt to¸n nµy tån t¹i kh¸ nhiÒu thêi\n\nx¶y ra sù cè, nh»m ®¶m b¶o ho¹t ®éng cña hÖ thèng m¹ng. \n\n VËy gi¶i ph¸p lµ vÉn cho phÐp cÊu tróc vËt lý cã vßng lÆp nh−ng chóng ta sÏ \nt¹o cÊu tróc luËn lý kh«ng cã vßng lÆp. VÝ dô nh− trªn h×nh 7.2.1.a, giao th«ng tõ \nc¸c user kÕt nèi vµo Cat - 4 ®Õn server Farm kÕt nèi vµo Cat - 5 sÏ ®i qua ®−êng kÕt \nnèi gi÷a Cat - 1 vµ Cat - 2 mÆc dï cã tån t¹i ®−êng kÕt nèi vËt lý gi÷a Cat - 4 vµ Cat \n- 5. \n\n CÊu tróc luËn lý kh«ng vßng lÆp lµ mét cÊu tróc d¹ng ph©n nh¸nh c©y, t−¬ng \ntù nh− cÊu tróc luËn lý h×nh sao hay h×nh sao më réng. \n\n ThuËt to¸n ®−îc sö dông ®Ó t¹o cÊu tróc luËn lý kh«ng vßng lÆp lµ thuËt to¸n \n gian ®Ó héi tô. Do ®ã cã mét \n\nthuËt to¸n míi h¬i gäi lµ rapid spanning - tree víi thêi gian tinh to¸n cÊu tróc luËn \nlý kh«ng vßng lÆp rót ng¾n h¬n. \n\n \n\n \n\n \n\n \n\nH×nh 7.2.1.b. CÊu tróc luËn lý kh«ng vßng lÆp ®−îc t¹o ra bëi Spanning - Tree. \nCÊu tróc nµy theo d¹ng ph©n nh¸nh h×nh c©y, t−¬ng tù nh− cÊu tróc luËn lý h×nh \n\nsao më réng. \n\n\n\n 449\n\n 7.2.2. Giao thøc Spanning - Tree. \n\n Ethernet bridge vµ switch cã thÓ triÓn khai giao thøc Spanning - Tree \nIEEE802.1D vµ sö dông thuËt to¸n spanning - tree ®Ó x©y dùng cÊu tróc m¹ng ng¾n \nnhÊt kh«ng vßng lÆp. \n\n §Ó x©y dùng m¹ng theo d¹ng ph©n nh¸nh h×nh c©y,  tr−íc tiªn giao thøc \nSpanning - Tree ph¶i chän mét ®iÓm lµm gèc (root bridge). XuÊt ph¸t tõ mét bridge \ngèc nµy, c¸c ®−êng liªn kÕt ®−îc xem xÐt vµ tÝnh to¸n ®Ó ph©n nh¸nh ra t¹o cÊu \ntróc m¹ng theo d¹ng h×nh c©y, b¶o ®¶m r»ng chØ cã mét ®−êng duy nhÊt ®i tõ gèc \n®Õn tõng node trong m¹ng. Nh÷ng ®−êng kÕt nèi nµo d− thõa trong cÊu tróc h×nh \nc©y sÏ bÞ kho¸ l¹i. TÊt c¶ c¸c gãi d÷ liÖu nhËn ®−îc tõ ®−êng liªn kÕt bÞ kho¸ nµy sÏ \nbÞ huû bá. \n\n \n\n \n\nH×nh 7.2.2.a. Giao thøc Spanning - Tree x©y dùng m¹ng h×nh luËn lý h×nh c©y. KÕt \nnèi nµo d− thõa, t¹o thµnh vßng lÆp sÏ bÞ kho¸ l¹i. \n\n Giao thøc Spanning - Tree ®ßi hái thiÕt bÞ m¹ng ph¶i trao ®æi th«ng tin víi \nnhau ®Ó cã thÓ ph¸t hiÖn ra vßng lÆp trong m¹ng. Th«ng ®iÖp trao ®æi nµy ®−îc gäi \nlµ Bridge Protocol Data Unit (BPDU). KÕt nèi nµo t¹o thµnh vßng lÆp sÏ bÞ ®Æt vµo \ntr¹ng th¸i kho¸. Trªn kÕt nèi nµy kh«ng nhËn gãi d÷ liÖu nh−ng vÉn nhËn c¸c gãi \nBPDU ®Ó x¸c ®Þnh kÕt nèi ®ã cßn ho¹t ®éng hay kh«ng. NÕu cã mét kÕt nèi bÞ ®øt \nhay mét thiÕt bÞ h− háng th× mét cÊu tróc h×nh c©y míi sÏ ®−îc tÝnh to¸n l¹i. \n\n BPDU chøa ®Çy ®ñ c¸c th«ng tin gióp cho switch thùc hiÖn ®−îc c¸c viÖc \nsau: \n\n\n\n 450\n\n \u2022 Chän mét switch lµm gèc cho cÊu tróc h×nh c©y. \n\n \u2022 TÝnh to¸n ®−êng ng¾n nhÊt tõ mçi node ®Õn switch gèc. §−êng ng¾n nhÊt \n ®−êng cã chi phÝ thÊp nhÊt. Chi phÝ cña ®−êng kÕt nèi ®−îc tÝnh to¸n dùa trªn tèc \né cña ®−êng kÕt nèi ®ã. \n\n \u2022 Trong tõng LAN segment, chØ ®Þnh ra mét switch gÇn nhÊt víi switch gèc. \nSwitch ®−îc chØ ®Þnh (designated switch) sÏ l¾m gi÷ mäi th«ng tin liªn l¹c gi÷a \nLAN vµ switch gèc. \n\n \u2022 Trªn mçi switch kh«ng ph¶i lµ gèc chän mét port lµm port gèc (root port) \nlµ port cã ®−êng kÕt nèi ng¾n nhÊt vÒ gèc. \n\n \u2022 C¸c port cßn l¹i ®−îc xem xÐt ®Ó lµm port chØ ®Þnh (designated port). \nNh÷ng port nµo kh«ng ®−îc chØ ®Þnh ®Òu bÞ kho¸ l¹i. \n\n \n\nlµ\n®\n\n \n\nH×nh 7.2.2.b. Gi¸ trÞ chi phÝ mÆc ®inh t−¬ng øng víi tèc ®é cña ®−êng kÕt nèi. \n\n \n\n \n\n7.2.2.c. C¸c th«ng tin n»m trong gãi BPH×nh DU. \n\n\n\n 451\n\n \n\nH×n hi \nt  \n\n  \n\nqu¸ tr×nh bÇu chän bridge gèc Tõ bridge gèc, hai nh¸nh \ntõ port 1/1, 1/2 ®−îc më lªn \n\n−îc chän lµm port \n−îc chän lµm port gèc ®Ó nèi vÒ gèc.  Sau khi \n\n®· x¸c ®Þnh xong port gèc ®Ó \nxem\nsegme t LAN chØ cã mét \nsw\nvµ Cat - C sÏ chØ ®Þnh ra mét switch ®\nCat - B\nCat - C\n\n ning - tree. \n\n \n\n ng m¹ng tu©n theo c¸c nguyªn t¾c \n\nh 7.2.2.d. Mét vÝ dô ®Ó kÕt qu¶ tÝnh to¸n cña giao thøc Spanning - Tree. Sau k\nÝnh to¸n xong, vÒ mÆt luËn lý, cÊu tróc m¹ng sÏ cã d¹ng rÏ nh¸nh c©y, kh«ng cßn\n\nvßng lÆp n÷a. \n\nTa xÐt vÝ dô nh− h×nh 7.2.2.c. Ba switch Cat - A, Cat - B vµ Cat - C ®−îc nèi\nthµnh vßng trßn víi nhau. Nh− vËy lµ tån t¹i mét vßng lÆp vÒ mÆt vËt lý. §Çu tiªn, \n\n ®· chän Cat - A lµm gèc. \n®Ó kÕt nèi xuèng hai switch Cat - B vµ Cat - C. Trªn \n\nCat - B, port 1/1 cã chi phÝ nèi vÒ  gèc thÊp nhÊt nªn port nµy ®\ngèc. T−¬ng tù trªn Cat - C, port 1/1 ®\n\nthiÕt lËp kÕt nèi vÒ bridge gèc, Cat - B vµ Cat - C  sÏ \n xÐt c¸c port cßn l¹i. Chóng nhËn thÊy port 1/2 cña chóng cïng nèi vµo mét \n\nnt LAN. §Ó t¹o cÊu tróc h×nh c©y, trong mçi segmen\nitch ®−îc më mét ®−êng ®Ó kÕt nèi tõ gèc vµo segment LAN ®ã. Do ®ã, Cat - B \n\n−îc truy xuÊt vµo segment LAN nµy. KÕt qu¶, \n ®−îc chän vµ port 1/2 cña nã ®−îc chØ ®Þnh më kÕt nèi vµo segment LAN. \n kh«ng ®−îc chØ ®inh nªn port 1/2 cña nã bÞ kho¸ l¹i. \n\n7.2.3. Ho¹t ®éng cña span\n\nKhi m¹ng ®· æn ®Þnh vµ héi tô chØ cã mét c©y duy nhÊt trong mét m¹ng. \n\n§Ó ®¹t ®−îc kÕt qu¶ nµy, c¸c switch tro\nsau: \n\n\n\n 452\n\n \u2022 ChØ cã mét bridge gèc duy nhÊt cho mét m¹ng. \n\n \u2022 Trong tõng segment LAN, chØ ®−îc duy nhÊt mét port ®i vµo segment LAN \n\n\u2022  \n\n Po\n\n C¸c port kh«ng ®−îc chØ ®Þnh sÏ huû bá d÷ \nport kho¸ (B - Bloking). \n\n 7.2.4. Qu¸ tr×nh chän bridge gèc. \n\n Muèn x©y dùng cÊu tróc h×nh c©y th× tr−íc tiªn ph¶i cã mét ®iÓm lµm gèc ®Ó \n®ã ph\n\nchän ra mét bridge gèc sÏ t¸c ®éng ®Õn dßng giao th«ng trong m¹ng. \n\n Khi c¸c switch míi ®−îc bËt ®iÖn, chóng sÏ tr\nvµ dùa  gã\nTr−êng BID bao gåm gi¸ trÞ ®é −u tiªn cña switch vµ ®Þa chØ MAC cña switch ®ã. \nGi¸ trÞ −u tiªn mÆc ®Þnh cña switch lµ 32768. MÆc ®Þnh, c¸c gãi BPDU ®−îc g−i ®i \n\ni©y/lÇ\n\n \u2022 Trªn mçi bridge kh«ng ph¶i lµ gèc  chØ cã mét port duy nhÊt lµm port gèc  \nlµ port kÕt nèi vÒ gèc ng¾n nhÊt. \n\n®ã. \n\n Kh«ng sö dông c¸c port nµo kh«ng ®−îc chØ\n\nrt gèc vµ port ®−îc chØ ®Þnh lµm c¸c port ®−\n\n®Þnh. \n\nîc sö dông ®Ó chuyÓn d÷ liÖu. \n\nliÖu. C¸c port nµy ®−îc gäi lµ \n\ntõ ©n nh¸nh cho c©y. Do ®ã viÖc ®Çu tiªn lµ tÊt c¶ c¸c switch trong m¹ng ph¶i \n\nao ®æi c¸c gãi BPDU víi nhau \ni nµy ®Ó chän ra bridge gèc. vµo th«ng tin bridge ID (BID) trong c¸c\n\n2 g n. \n\n \n\nH×nh 7.2.4.a. Néi dung gãi BPDU. \n\n\n\n 453\n\n \n\nH×nh 7.2.4.b. CÊu tróc cña tr−êng BID. 2 byte ®Çu lµ gi¸ trÞ −u tiªn cña switch. Gi¸ \ntrÞ nµy n»m trong kho¶ng tõ 0 - 65535, gi¸ trÞ mÆc ®Þnh lµ 32768. 6 byte sau lµ ®Þa \n\nchØ MAC cña switch. \n\n §Çu tiªn mçi switch ®Òu tù cho nã lµ gèc. Do ®ã trong gãi BPDU ®Çu tiªn \nmµ mçi switch göi ®i, tr−êng Root BID vµ sender BID ®Òu cã gi¸ trÞ  −u tiªn vµ ®Þa \nchØ MAC cña chÝnh nã. Sau ®ã mçi switch sÏ lÇn l−ît nhËn ®−îc c¸c goi BPDU tõ \nnh÷ng switch kh¸c. Mçi khi switch nhËn ®−îc mét gãi BPDU cã tr−êng Root BID \nthÊp h¬n Root BID nã ®ang cã th× nã sÏ thay thÕ Root BID thÊp h¬n vµo gãi BPDU \nråi göi ®i. Cø nh− vËy, cuèi cïng c¸c switch sÏ thèng nhÊt ®−îc víi nhau switch \nnµo cã BID thÊp nhÊt lµm bridge gèc. \n\n \n\n \n\nH×nh 7.2.4.c. Mét vÝ dô vÒ néi dung gãi BPDU ®Çu tiªn cña Cat - A göi ®i. \n\n NÕu kh«ng cÊu h×nh g× c¶, gi¸ trÞ mÆc ®Þnh trªn c¸c switch ®Òu b»ng nhau vµ \nb»ng 32768. Do vËy switch nµo nµo cã ®Þa chØ MAC nhá nhÊt (®Þa chØ MAC th× \nkh«ng bao giê trïng nhau gi÷a c¸c switch) sÏ cã BID nhá nhÊt vµ switch ®ã sÏ lµm \ngèc. Ng−êi qu¶n trÞ m¹ng muèn t¸c ®éng vµo viÖc quyÕt ®Þnh chän bridge gèc th× \n\n\n\n 454\n\ncã thÓ cµi ®Æt gi¸ trÞ −u tiªn cña switch nhá h¬n gi¸ trÞ mÆc ®Þnh, khi ®ã BID cña \nswitch sÏ cã gi¸ trÞ nhá h¬n. Tuy nhiªn b¹n chØ lªn lµm ®iÒu nµy khi b¹n n¾m râ \nluång giao th«ng trong m¹ng cña m×nh. \n\n \n\nH×nh 7.2.4.d. Sau mét qu¸ trinh trao ®æi gãi BPDU, c¸c switch sÏ chän ra ®−îc \nswitch nµo cã BID nhá nhÊt lµm gèc. \n\n \n\n 7.2.5. C¸c tr¹ng th¸i port Spanning - Tree. \n\n Th«ng tin trao ®æi  cña c¸c giao thøc ph¶i mÊt mét kho¶ng thêi gian míi \ntruyÒn ®i hÕt cho toµn bé hÖ thèng m¹ng. Khi mét ph©n nµo ®ã cña cÊu tróc m¹ng \nbÞ thay ®æi th× c¶ hÖ thèng kh«ng thÓ nhËn biÕt ®−îc ®iÒu nµy cïng mét lóc vµ ngay \nlËp tøc mµ ph¶i lÇn l−ît sau ®ã mét kho¶ng thêi gian. §ã chÝnh lµ thêi gian trÔ lan \ntruyÒn. ChÝnh v× vËy, nÕu switch ®æi tr¹ng th¸i cña mét port tõ thô ®éng sang ho¹t \n®éng ngay lËp tøc cã thÓ sÏ g©y ra vßng lÆp. \n\n Trªn switch sö dông giao thøc Spanning - Tree, mçi port sÏ ë mét trong n¨m \ntr¹ng th¸i nh− h×nh 7.2.5.a. \n\n ë tr¹ng th¸i kho¸, port chØ nhËn gãi BPDU. C¸c gãi d÷ liÖu kh¸c sÏ bÞ huû bá \nvµ kh«ng hÒ cã häc ®Þa chØ ë tr¹ng th¸i nµy. MÊt kho¶ng 20 gi©y ®Ó chuyÓn tõ tr¹ng \nth¸i nµy sang tr¹ng th¸i kÕ tiÕp lµ tr¹ng th¸i nghe. \n\n\n\n 455\n\n \n\nH×nh 7.2.5.a. C¸c tr¹ng th¸i port Spanning - Tree. Khi kÕt nèi b¾t ®Çu ®−îc më lªn, \ntr¹ng th¸i ®Çu tiªn cña port lµ tr¹ng th¸i kho¸ (Blocking). Sau khi thuËt to¸n \n\nSpanning - Tree tÝnh to¸n xong vµ chän port ®ã lµ port gèc hay lµ port chØ ®Þnh cña \nmét segment LAN th× port sÏ ®−îc lÇn l−ît chuyÓn sang tr¹ng th¸i nghe \n\n(Listenning), tr¹ng th¸i häc (Learning) vµ cuèi cïng tr¹ng th¸i truyÒn d÷ liÖu \n(Forwarding). \n\n  \n\n     ë tr¹ng th¸i nghe, switch chØ x¸c ®Þnh xem port nµy cã kÕt nèi vÒ gèc víi chi phÝ \nthÊp nhÊt hay kh«ng, cã t¹o vßng lÆp hay kh«ng. NÕu kÕt qu¶ port nµy kh«ng ®−îc \nchän lµm port gèc vµ còng kh«ng ®−îc chØ ®Þnh lµm port nèi vµo mét segment \nLAN nµo th× port sÏ ®−îc ®−a trë vÒ tr¹ng th¸i kho¸. Tr¹ng th¸i nghe kÐo dµi \nkho¶ng 15 gi©y, kho¶ng thêi gian nµy gäi lµ thêi gian chê chuyÓn tr¹ng th¸i \n(Forward delay). Trong tr¹ng th¸i nghe, port vÉn kh«ng chuyÓn gãi d÷ liÖu, ch−a \nhäc ®Þa chØ MAC, vÉn chØ xö lý gãi BPDU th«i. \n\n Sau ®ã, port chuyÓn tõ tr¹ng th¸i nghe sang tr¹ng th¸i häc. ë tr¹ng th¸i nµy, \nport ch−a chuyÓn d÷ liÖu cña user nh−ng ®· b¾t ®Çu häc ®Þa chØ MAC tõ c¸c gãi d÷ \nliÖu nhËn ®−îc vµ vÉn xö lý gãi BPDU. Tr¹ng th¸i häc kÐo dµi kho¶ng 15 gi©y vµ \nkho¶ng thêi gian nµy còng ®−îc gäi thêi gian chê chuyÓn tr¹ng th¸i (Forward \ndelay). \n\n Sau cïng, port chuyÓn tõ tr¹ng th¸i häc sang tr¹ng th¸i truyÒn d÷ liÖu. ë \ntr¹ng th¸i nµy, port thùc hiÖn truyÒn d÷ liÖu cña user, häc ®Þa chØ MAC ®ång thêi \nvÉn xö lý gäi BPDU. \n\n\n\n 456\n\n Mét port cã thÓ r¬i vµo tr¹ng th¸i kh«ng ho¹t ®éng (disable). Tr¹ng th¸i nµy \nlµ do ng−êi qu¶n trÞ cµi ®Æt cho port b»ng lÖnh shutdown hoÆc do chÝnh b¶n th©n \nport kh«ng cã kÕt nèi hoÆc bÞ h−, kh«ng ho¹t ®éng ®−îc. \n\n Kho¶ng thêi gian cña mçi tr¹ng th¸i nh− ®· nªu ë trªn lµ kho¶ng thêi gian \nmÆc ®Þnh ®−îc tÝnh cho mét hÖ thèng m¹ng cã tèi ®a 7 switch trªn mét nh¸nh tÝnh \ntõ gèc. \n\n 7.2.6. Spanning - Tree tÝnh to¸n l¹i. \n\n Sau khi hÖ thèng m¹ng chuyÓn m¹ch ®· héi tô, tÊt c¶ c¸c port trªn mäi \nswitch vµ bridge ®Òu ë tr¹ng th¸i truyÒn d÷ liÖu hoÆc tr¹ng th¸i kho¸. Port truyÒn \nd÷ liÖu lµ port cã thÓ truyÒn , nhËn d÷ liÖu vµ BPDU. Port kho¸ lµ port chØ nhËn gãi \nBPDU mµ th«i. \n\n Khi cÊu tróc m¹ng cã sù thay ®æi, switch vµ bridge sÏ tÝnh to¸n l¹i cÊu tróc \nh×nh c©y vµ cã thÓ g©y c¶n trë cho giao th«ng m¹ng cña user khi ®ang trong qu¸ \ntr×nh tÝnh to¸n. \n\n Thêi gian héi tô theo chuÈn IEEE 801.1D cho cÊu tróc h×nh c©y míi lµ \nkho¶ng 50 gi©y. Khi cÊu tróc m¹ng cã sù thay ®æi x¶y ra, sau thêi gian chê tèi ®a \n(max - age) lµ 20 gi©y ®Ó x¸c ®Þnh sù thay ®æi ®ã, Spanning - Tree míi b¾t ®Çu tÝnh \nl¹i vµ chuyÓn tr¹ng th¸i cho port. Tõ tr¹ng th¸i kho¸, port ®−îc chuyÓn sang tr¹ng \nth¸i nghe. Sau ®ã ë tr¹ng th¸i nghe 15 gi©y råi míi chuyÓn sang tr¹ng th¸i häc vµ ë \ntr¹ng th¸i häc 15 gi©y råi míi chuyÓn sang tr¹ng th¸i truyÒn d÷ liÖu. Nh− vËy tæng \ncéng lµ 50 gi©y ®Ó cÊu tróc m¹ng chuyÓn sang cÊu h×nh c©y míi ®¸p øng theo sù \nthay ®æi. \n\n\n\n 457\n\n \n\nH×nh 7.2.6.a \n\n  VÝ dô mét cÊu tróc m¹ng chuyÓn m¹ch ®· héi tô nh− trªn. Theo chu kú mÆc \n®Þnh, cø 20 gi©y c¸c switch l¹i thùc hiÖn trao ®æi gãi BPDU mét lÇn. Gi¶ sö kÕt nèi \ntrªn port 1/1 cña Cat - B bÞ ®øt. Khi ®ã Cat - B kh«ng cßn nhËn ®−îc gãi BPDU \ntheo ®Þnh kú trªn port 1/1 n÷a. Trong khi ®ã Cat - B vÉn nhËn ®−îc gãi BPDU ®Òu \n®Æn trªn port 1/2. Cat - B ®îi hÕt thêi gian chê tèi ®a (max - age) lµ 20 gi©y míi x¸c \n®Þnh kÕt nèi trªn port 1/1 ®· chÕt vµ b¾t ®Çu chuyÓn sang tr¹ng th¸i cho port 1/2. \nPort 1/2 kh«ng thÓ chuyÓn ngay tõ tr¹ng th¸i kho¸ sang tr¹ng th¸i chuyÒn d÷ liÖu \n®−îc mµ ph¶i tr¶i qua 2 tr¹ng th¸i trung gian lµ tr¹ng th¸i nghe vµ tr¹ng th¸i häc, \nmçi tr¹ng th¸i trung gian nµy kÐo dµi 15 gi©y. Nh− vËy tæng céng lµ 50 gi©y kÓ tõ \nlóc kÕt nèi trªn port 1/1 cña Cat - B bÞ ®øt, m¹ng míi chuyÓn xong sang cÊu tróc \nmíi ®Ó ®¸p øng theo sù cè nµy. \n\n\n\n 458\n\n \n\n \n\nH×nh 7.2.6.b. KÕt qu¶ tÝnh l¹i lµ cÊu tróc míi nh− h×nh vÏ. \n\n \n\n 7.2.7. Giao thøc Rapid Spanning - Tree. \n\n Giao thøc Rapid Spanning - Tree ®−îc ®Þnh nghÜa trong chuÈn IEEE 802.1w. \nGiao thøc nµy giíi thiÖu c¸c vÊn ®Ò míi sau: \n\n \u2022 Lµm râ h¬n vai trß vµ tr¹ng th¸i cña port. \n\n \u2022 §Þnh nghÜa c¸c lo¹i kÕt nèi cã thÓ chuyÓn nhanh sang tr¹ng th¸i truyÒn d÷ \nliÖu. \n\n \u2022 Cho phÐp c¸c switch trong m¹ng ®· héi tô tù göi c¸c gãi BPDU cña nã chø \nkh«ng chØ riªng gãi BPDU cña bridge gèc. \n\n Tr¹ng th¸i kho¸ (bloocking) ®−îc ®æi tªn thµnh tr¹ng lo¹i bá (discarding). \nPort lo¹i bá ®ãng vai trß lµ mét port dù phßng. Trong mçi segment cã mét port \n®−îc chØ ®Þnh (designated port) ®Ó kÕt nèi vµo segment ®ã. NÕu port chØ ®Þnh nµy bÞ \nsù cè th× port lo¹i bá t−¬ng øng sÏ ®−îc thay thÕ ngay cho port ®ã. \n\n\n\n 459\n\n \n\nH×nh 7.2.7.a. Port 1 trªn Switch  Y lµ port thay thÕ cho port 1 trªn Switch X. \n\n  \n\n   C¸c kÕt nèi ®−îc ph©n thµnh c¸c lo¹i nh− kÕt nèi ®iÓm - ®Õn - ®iÓm, kÕt nèi chia \nsÎ vµ kÕt nèi biªn cuèi (edge - link). KÕt nèi ®iÓm - ®Õn - ®iÓm lµ kÕt nèi gi÷a hai \nswitch. KÕt nèi chia sÎ lµ kÕt nèi cã nhiÒu switch cïng kÕt nèi vµo. KÕt nèi biªn \ncuèi lµ kÕt nèi tõ switch xuèng host, kh«ng cßn switch nµo kh¸c xen gi÷a. Ph©n \nbiÖt thµnh nhiÒu lo¹i kÕt nèi cô thÓ nh− vËy, viÖc nhËn biÕt sù thay ®æi cÊu tróc \nm¹ng sÏ nhanh h¬n. \n\n KÕt nèi ®iÓm - ®Õn - ®iÓm vµ kÕt nèi biªn cuèi sÏ ®−îc chuyÓn vµo tr¹ng th¸i \ntruyÒn d÷ liÖu ngay lËp tøc v× kh«ng hÒ cã vßng lÆp trªn nh÷ng kÕt nèi d¹ng nµy. \n\n\n\n 460\n\n \n\nH×nh 7.2.7.b. C¸c lo¹i kÕt nèi trong Rapid Spanning - Tree. \n\n  \n\n           Thêi gian héi tô sÏ kh«ng l©u h¬n 15 gi©y kÓ tõ khi cã sù thay ®æi. \n\n Giao thøc Rapid Spanning - Tree, hay IEEE 802.1w sÏ thùc sù thay thÕ cho \ngiao thøc Spanning - Tree, hay IEEE 802.1D. \n\n TæNG kÕt \n\n Sau khi hoµn tÊt ch−¬ng nµy, b¹n cÇn n¾m ®−îc c¸c ý quan träng sau: \n\n \u2022 Sù dù phßng vµ vai trß quan träng cña nã trong hÖ thèng m¹ng. \n\n \u2022 C¸c thµnh phÇn chÝnh trong cÊu tróc m¹ng dù phßng. \n\n \u2022 TrËn b·o qu¶ng b¸ vµ t¸c h¹i cña nã trong m¹ng chuyÓn m¹ch. \n\n \u2022 TruyÒn nhiÒu l−ît frame vµ t¸c h¹i cña nã lªn m¹ng chuyÓn m¹ch. \n\n \u2022 Nguyªn nh©n vµ hËu qu¶ cña viÖc c¬ së d÷ liÖu ®Þa chØ MAC kh«ng æn \n®Þnh. \n\n \u2022 Lîi Ých vµ nguy c¬ cña cÊu tróc m¹ng dù phßng. \n\n\n\n 461\n\n \u2022 Vai trß cña Spanning - Tree trong cÊu tróc m¹ng dù phßng. \n\n \u2022 C¸c ho¹t ®éng c¬ b¶n cña Spanning - Tree. \n\n \u2022 Qu¸ tr×nh bÇu bridge gèc. \n\n \u2022 C¸c tr¹ng th¸i Spanning - Tree. \n\n \u2022 So s¸nh giao thøc Spanning - Tree vµ giao thøc Rapid Spanning - Tree. \n\n                                  \n\n\n\n 462\n\nCHƯƠNG 8 : VLAN \n\nGIỚI THIỆU \n\nMét ®Æc tÝnh quan träng cña m¹ng chuyÓn m¹ch Ethernet lµ m¹ng LAN \n¶o(VLAN).VLAN lµ mét nhãm l«gic c¸c thiÕt bÞ m¹ng hoÆc c¸c usur. C¸c thiÕt bÞ \nm¹ng hoÆc user ®−îc nhãm l¹i theo chøc n¨ng, phßng ban hoÆc theo øng dông chø \nkh«ng theo vÞ trÝ vËt lý n÷a. C¸c thiÕt bÞ trong mét VLAN ®−îc giíi h¹n chØ th«ng \ntin liªn l¹c víi c¸c thiÕt bÞ trong cïng VLAN. ChØ cã router míi cung cÊp kÕt nèi \ngi÷a c¸c VLAN kh¸c nhau. Cisco ®ang cè g¾ng h−íng tíi sù t−¬ng thÝch víi c¸c \nnhµ s¶n xuÊt kh¸c nhau nh−ng mçi nhµ s¶n xuÊt ®· ph¸t triÓn s¶n phÈm VLAN \nriªng ®éc quyÒn cña hä cho nªn chóng cã thÓ kh«ng hoµn toµn t−¬ng thÝch víi \nnhau. \n\nVLAN víi c¸ch ph©n nguån tµi nguyªn vµ user theo l«gic ®· lµm t¨ng hiÖu \nqu¶ ho¹t ®éng cña toµn bé hÖ thèng m¹ng. C¸c c«ng ty, tæ chøc th−êng sö dông \nVLAN ®Ó ph©n nhãm user theo l«gic mµ kh«ng cÇn quan t©m ®Õn vÞ trÝ vËt lý cña \nhä. Nhê ®ã, user trong phßng Maketing sÏ ®−îc nhãm vµo Maketing VLAN, user \ntrong phßng KÜ thuËt  ®−îc ®Æt vµo VLAN kÜ thuËt. \n\nVíi VLAN,m¹ng cã kh¶ n¨ng ph¸t triÓn, b¶o mËt vµ qu¶n lý tèt h¬n v× \nrouter trong cÊu tróc VLAN cã thÓ ng¨n gãi qu¶ng b¸, b¶o mËt vµ qu¶n lý dßng l−u \nl−îng m¹ng. \n\nVLAN lµ mét c«ng cô m¹nh trong thiÕt kÕ vµ cÊu h×nh m¹ng. Víi VLAN \nc¸c c«ng viÖc thªm bít, chuyÓn ®æi trong cÊu tróc m¹ng khi cÇn thiÕt trë nªn ®¬n \ngi¶n h¬n rÊt nhiÒu. VLAN cßn gióp gia t¨ng b¶o mËt vµ kiÓm so¸t qu¶ng b¸ Líp 3. \nTuy nhiªn nÕuVLAN  ®−îc cÊu h×nh kh«ng ®óng sÏ lµm cho m¹ng ho¹t ®éng kÐm \nhoÆc cã khi kh«ng ho¹t ®éng ®−îc. Do ®ã, khi thiÕt kÕ m¹ng, viÖc n¾m ®−îc c¸ch \ntriÓn khai VLAN trªn nhiÒu switch kh¸c nhau lµ rÊt quan träng. \n\n  Sau khi hoµn tÊt ch−¬ng tr×nh nµy, c¸c b¹n cã thÓ thùc hiÖn ®−îc nh÷ng viÖc \nsau: \n\n+§Þnh nghÜa VLAN \n\n+LiÖt kª c¸c Ých lîi cña VLAN \n\n+Gi¶i thÝch VLAN ®−îc sö dông ®Ó t¹o miÒn qu¶ng b¸ nh− thÕ nµo. \n\n\n\n 463\n\n+Gi¶i thÝch router ®−îc sö dông ®Ó th«ng tin liªn l¹c gi÷a c¸c VLAN nh− thÕ \nnµo. \n\n+LiÖt kª c¸c lo¹i VLAN \n\n+§Þnh nghÜa ISL vµ 802.1Q \n\n+Gi¶i thÝch c¸c kh¸i niÖm VLAN theo ®Þa lý. \n\n+CÊu h×nh VLAN cã cè ®Þnh trªn dßng Catalyst 29xx switch. \n\n+KiÓm tra vµ l−u cÊu h×nh VLAN \n\n+Xo¸ VLAN khái cÊu h×nh switch. \n\n8.1 Kh¸i niÖm vÒ VLAN \n\n8.1.1 Giíi thiÖu vÒ VLAN \n\n  VLAN lµ mét nhãm c¸c thiÕt bÞ m¹ng kh«ng bÞ giíi h¹n theo vÞ trÝ vËt lý \nhoÆc theo LAN switch mµ chóng kÕt nèi vµo. \n\nVLAN lµ mét segment m¹ng theo l«gic dùa trªn chøc n¨ng, ®éi nhãm hoÆc \nøng dông cña mét tæ chøc chø kh«ng phô thuéc vÞ trÝ vËt lý hay kÕt nèi vËt lý trong \nm¹ng. TÊt c¶ c¸c m¸y tr¹m vµ server ®−îc sö dông bëi cïng mét nhãm lµm viÖc sÏ \n®−îc ®Æt trong cïng VLAN bÊt kÓ vÞ trÝ hay kÕt nèi vËt lý cña chóng. \n\nMäi c«ng viÖc cÊu h×nh VLAN hoÆc thay ®æi cÊu h×nh VLAN ®Òu ®−îc thùc \nhiÖn trªn phÇn mÒm mµ kh«ng cÇn thay ®æi c¸p vµ thiÕt bÞ vËt lý. \n\nMét m¸y tr¹m trong mét VLAN chØ ®−îc liªn l¹c víi file server trong cïng \nVLAN víi nã. VLAN ®−îc nhãm theo chøc n¨ng l«gic vµ mçi VLAN lµ mét miÒn \nqu¶ng b¸, do ®ã gãi d÷ liÖu chØ ®−îc chuyÓn m¹ch trong cïng mét VLAN. \n\nVLAN cã kh¶ n¨ng më réng, b¶o mËt vµ qu¶n lý m¹ng tèt h¬n. Router trong \ncÊu tróc VLAN thùc hiÖn ng¨n chÆn qu¶ng b¸, b¶o mËt vµ qu¶n lý nguån giao \nth«ng m¹ng. Switch kh«ng thÓ chuyÓn m¹ch giao th«ng gi÷a c¸c VLAN kh¸c nhau. \nGiao th«ng gi÷a c¸c VLAN ph¶i ®−îc ®Þnh tuyÕn qua router. \n\n\n\n 464\n\n \n\nH×nh 8.1.1 Ph©n ®o¹n m¹ng LAN theo kiÓu truyÒn thèng vµ theo VLAN. \n\n8.2.1 MiÒn qu¶ng b¸ víi VLAN vµ router \n\nMét VLAN lµ mét miÒn qu¶ng b¸ ®−îc t¹o nªn bëi  mét hay nhiÒu switch. \n\nH×nh 8.1.2.a cho thÊy t¹o 3 miÒn qu¶ng b¸ riªng biÖt trªn ba switch nh− thÕ nµo. \n§Þnh tuyÕn Líp 3 cho phÐp router chuyÓn gãi gi÷a c¸c miÒn qu¶ng b¸ víi nhau. \n\n \n\nH×nh 8.1.2.a.3 miÒn qu¶ng b¸ trªn 3 switch kh¸c nhau. \n\nTrong h×nh 8.1.2.b chóng ta thÊy 3 VLAN tøc lµ 3 miÒn qu¶ng b¸ kh¸c nhau \n®−îc t¹o ra trªn mét switch vµ mét router. Router sÏ sö dông ®Þnh tuyÕn Líp 3 ®Ó \nchuyÓn giao th«ng gi÷a 3 VLAN. \n\n\n\n 465\n\n \n\nH×nh 8.1.2.b. 3 VLAN � 3 miÒn qu¶ng b¸ trªn mét switch. \n\n \n            Switch trong h×nh 8.1.2.b sÏ truyÒn frame lªn cæng giao tiÕp cña router khi: \n\n  +Gãi d÷ liÖu lµ gãi qu¶ng b¸. \n\n  +Gãi d÷ liÖu cã ®Þa chØ MAC ®Ých lµ mét trong c¸c ®Þa chØ MAC cña router. \n\nNÕu m¸y tr¹m 1 trong VLAN kÜ thuËt muèn göi d÷ liÖu cho m¸y tr¹m 2 trong \nVLAN B¸n hµng, hai m¸y nµy n»m trong hai miÒn qu¶ng b¸ kh¸c nhau, thuéc hai \nm¹ng kh¸c nhau, do ®ã ®Þa chØ MAC ®Ých trong gãi d÷ liÖu sÏ lµ ®Þa chØ MAC cña \ndefault gateway cña m¸y tr¹m 1. V× vËy ®Þa chØ MAC ®Ých cña gãi d÷ liÖu nµy sÏ lµ \n®Þa chØ MAC cña tæng Fa0/0 trªn router. Gãi d÷ liÖu ®−îc chuyÓn ®Õn router, b»ng \n®Þnh tuyÕn IP, router sÏ chuyÓn gãi ®Õn ®óng VLAN B¸n hµng. \n\nNÕu m¸y tr¹m 1 trong VLAN kÜ thuËt muèn göi gãi d÷ liÖu cho m¸y tr¹m 2 \ntrong cïng VLAN th× ®Þa chØ MAC ®Ých cña gãi d÷ liÖu sÏ chÝnh lµ ®Þa chØ MAC \ncña m¸y tr¹m 2. \n\nTãm l¹i, switch sÏ xö lý chuyÓn m¹ch gãi d÷ liÖu khi cã chia VLAN nh− sau: \n\n  +§èi víi mçi VLAN switch cã mét b¶ng chuyÓn m¹ch riªng t−¬ng øng \n\n\n\n 466\n\n  +NÕu switch nhËn ®−îc gãi d÷ liÖu tõ mét port n»m trong VLAN 1 ch¼ng \nh¹n, th× switch sÏ chØ t×m ®Þa chØ MAC ®Ých trong b¶ng chuyÓn m¹ch cña VLAN 1 \nmµ th«i. \n\n  +§ång thíi switch sÏ häc ®Þa chØ MAC nguån trong gãi d÷ liÖu vµ ghi vµo \nb¶ng chuyÓn m¹ch cña VLAN 1 nÕu ®Þa chØ MAC nµy ch−a ®−îc biÕt. \n\n  +Sau ®ã switch quyÕt ®Þnh chuyÓn gãi d÷ liÖu. \n\n  +Switch nhËn frame vµo tõ VLAN nµo th× switch chØ häc ®Þa chØ nguån cña \nframe vµ t×m ®Þa chØ ®Ých cho frame trong mét b¶ng chuyÓn m¹ch t−¬ng øng víi \nVLAN ®ã. \n\n8.1.3 Ho¹t ®éng cña VLAN \n\nMçi port trªn switch cã thÓ g¸n cho mét VLAN kh¸c nhau. C¸c port n»m \ntrong cïng mét VLAN sÏ chia sÎ gãi qu¶ng b¸ víi nhau. C¸c port kh«ng n»m trong \ncïng VLAN sÏ kh«ng chia sÎ gãi qu¶ng b¸ víi nhau. Nhê ®ã m¹ng LAN ho¹t ®éng \nhiÖu qu¶ h¬n. \n\n \n\n \n\nH×nh 8.1.3.a VLAN cè ®Þnh. \n\nThµnh viªn cè ®Þnh cña VLAN ®−îc x¸c ®Þnh theo port. Khi thiÕt bÞ kÕt nèi \nvµo mét port cña switch, tuú theo port thuéc lo¹i VLAN nµo th× thiÕt bÞ sÏ n»m \ntrong VLAN ®ã. \n\nMÆc ®Þnh, tÊt c¶ c¸c port trªn mét switch ®Òu n»m trong VLAN qu¶n lý. \nVLAN qu¶n lý lu«n lu«n lµ VLAN 1 vµ chóng ta kh«ng thÓ xo¸ VLAN nµy ®−îc. \n\n\n\n 467\n\nSau ®ã chóng ta cã thÓ cÊu h×nh g¸n port vµo c¸c VLAN kh¸c. VLAN cung cÊp \nb¨ng th«ng tin nhiÒu h¬n cho user so víi m¹ng chia sÎ. Trong m¹ng chia sÎ, c¸c \nuser cïng chia sÎ mét b¨ng th«ng trong m¹ng ®ã, cµng nhiÒu user trong mét m¹ng \nchia sÎ th× l−îng b¨ng th«ng cµng thÊp h¬n vµ hiÖu suÊt ho¹t ®éng cµng gi¶m ®i. \n\nThµnh viªn ®éng cña VLAN ®−îc cÊu h×nh b»ng phÇn mÒm qu¶n lý m¹ng. \nB¹n cã thÓ sö dông CiscoWorks 2000 hoÆc CiscoWorks for Switch Internetworks \n®Ó t¹o VLAN ®éng. VLAN ®éng cho phÐp c¸c ®Þnh thµnh viªn dùa theo ®Þa chØ \nMAC cña thiÕt bÞ kÕt nèi vµo switch chø kh«ng cßn x¸c ®Þnh theo port n÷a. Khi \nthiÕt bÞ kÕt nèi vµo switch, switch sÏ t×m trong c¬ së d÷ liÖu cña nã ®Ó x¸c ®Þnh \nthiÕt bÞ nµy  thuéc lo¹i VLAN nµo. \n\n \n\nH×nh 8.1.3.b VLAN ®éng \n\n*CÊu h×nh VLAN b»ng c¸c phÇn mÒm VLAN qu¶n lý tËp trung. \n\n*Cã thÓ chia VLAN theo ®Þa chØ MAC, ®Þa chØ l«gic hoÆc theo lo¹i giao \nthøc. \n\n*Kh«ng cÇn qu¶n lý nhiÒu ë c¸c tñ nèi d©y n÷a v× thiÕt bÞ kÕt nèi vµo m¹ng \nthuéc VLAN nµo lµ tuú theo ®Þa chØ cña thiÕt bÞ ®ã ®· ®−îc g¸n vµo VLAN. \n\n            *Cã kh¶ n¨ng th«ng b¸o cho qu¶n trÞ m¹ng khi cã mét user l¹, kh«ng cã \ntrong c¬ së d÷ liÖu kÕt nèi vµo m¹ng. \n\nX¸c ®Þnh thµnh viªn VLAN theo port tøc lµ port ®· ®−îc g¸n vµo VLAN nµo \nth× thiÕt bÞ kÕt nèi vµo port ®ã thuéc VLAN ®ã, kh«ng phô thuéc vµo thiÕt bÞ kÕt \nnèi lµ thiÕt bÞ g×, ®Þa chØ bao nhiªu. Víi c¸ch chia VLAN theo port nh− vËy, tÊt c¶ \nc¸c user kÕt nèi vµo cïng mét port sÏ n»m trong cïng mét VLAN. Mét user hay \nnhiÒu user cã thÓ kÕt nèi vµo mét port vµ sÏ kh«ng nhËn thÊy lµ cã sù tån t¹i cña \n\n\n\n 468\n\nVLAN. C¸ch chia VLAN nµy gióp viÖc qu¶n lý ®¬n gi¶n h¬n v× kh«ng cÇn t×m \ntrong c¬ së d÷ liÖu phøc t¹p ®Ó x¸c ®Þnh thµnh viªn cña mçi VLAN. \n\nNg−êi qu¶n trÞ m¹ng cã tr¸ch nhiÖm cÊu h×nh VLAN b»ng tay vµ cè ®Þnh. \n\nMçi mét port trªn switch còng ho¹t ®éng gièng nh− mét port trªn bridge. Bridge sÏ \nchÆn luång l−u l−îng nÕu nã kh«ng cÇn thiÕt ph¶i ®i ra ngoµi segment. NÕu gãi d÷ \nliÖu cÇn ph¶i chuyÓn qua bridge vµ switch kh«ng biÕt ®Þa chØ ®Ých hoÆc gãi nhËn \n®−îc lµ gãi qu¶ng b¸ th× míi chuyÓn ra tÊt c¶ c¸c port n»m trong cïng miÒn qu¶ng \nb¸ víi port nhËn gãi d÷ liÖu vµo. \n\n \n\nH×nh 8.1.3.c. Chia VLAN theo port. \n\n8.1.4 Ých lîi cña VLAN \n\nLîi Ých cña VLAN lµ cho phÐp ng−êi qu¶n trÞ m¹ng tæ chøc m¹ng theo l«gÝc \nchø kh«ng theo vËt lý n÷a. Nhê ®ã nh÷ng c«ng viÖc sau cã thÓ  thùc hiÖn dÔ dµng \nh¬n: \n\n*Di chuyÓn m¸y tr¹m trong LAN dÔ dµng. \n\n* Thªm m¸y tr¹m vµo LAN dÔ dµng. \n\n*Thay ®æi cÊu h×nh LAN dÔ dµng. \n\n\n\n 469\n\n*KiÓm so¸t giao th«ng m¹ng dÔ dµng. \n\n*Gia t¨ng kh¶ n¨ng b¶o mËt. \n\n \n\nTÊt c¶ c¸c user ®−îc g¾n vµo cïng port lµ cïng mét VLAN. \n\nH×nh 8.1.4 \n\n8.1.5 C¸c lo¹i VLAN \n\nCã 3 lo¹i thµnh viªn VLAN ®Ó x¸c ®Þnh vµ kiÓm so¸t viÖc sö lý c¸c gãi d÷ liÖu: \n\n         *VLAN theo port \n\n         *VLAN theo ®Þa chØ MAC \n\n         *VLAN theo giao thøc \n\n \n\n\n\n 470\n\n \n\nH×nh 8.1.5.1. 3 lo¹i thµnh viªn VLAN \n\n \n\n*User thuéc lo¹i VLAN nµo lµ tuú thuéc vµo port kÕt nèi cña user ®ã. \n\n*Kh«ng cÇn t×m trong c¬ së d÷ liÖu khi x¸c ®Þnh thµnh viªn VLAN \n\n*DÔ dµng qu¶n lý b»ng giao diÖn ®å ho¹(GUIs). Qu¶n lý thµnh viªn cña \nVLAN theo port còng dÔ dµng vµ ®¬n gi¶n. \n\n*B¶o mËt tèi ®a gi÷a c¸c VLAN \n\n*Gãi d÷ liÖu kh«ng bÞ \u201crß rØ\u201d sang c¸c miÒn kh¸c. \n\n*DÔ dµng kiÓm so¸t qua m¹ng \n\n \n\n\n\n 471\n\n \n\nH×nh 8.1.5.b.X¸c ®Þnh thµnh viªn VLAN theo port. \n\n \n\n*User thuéc lo¹i VLAN nµo lµ tuú thuéc vµo ®Þa chØ MAC cña user ®ã  \n\n*Linh ho¹t h¬n nh−ng t¨ng ®é t¶i lªn giao th«ng m¹ng vµ c«ng viÖc qu¶n trÞ \nm¹ng. \n\n*¶nh h−ëng ®Õn hiÖu suÊt ho¹t ®éng, kh¶ n¨ng më réng vµ kh¶ n¨ng qu¶n trÞ \nv× qu¶n lý thµnh viªn cña VLAN theo ®Þa chØ MAC lµ mét viÖc phøc t¹p. \n\n*TiÕn tr×nh xö lý gÇn gièng nh− c¸c líp trªn. \n\n \n\n \n\n \n\nH×nh 8.1.5.c X¸c ®Þnh thµnh viªn VLAN theo ®Þa chØ MAC. \n\nSè l−îng VLAN trªn mét switch phô thuéc vµo c¸c yÕu tè sau: \n\n\n\n 472\n\n+Dßng giao th«ng \n\n+Lo¹i øng dông \n\n+Sù qu¶n lý m¹ng \n\n+Sù ph©n nhãm \n\nNgoµi ra mét yÕu tè quan  träng mµ chóng ta cÇn quan t©m lµ kÝch th−íc cña switch \nvµ s¬ ®å chia ®Þa chØ IP \n\nVÝ dô: Mét m¹ng sö dông ®Þa chØ m¹ng cã 24 bÝt subnet mask, nh− vËy mçi subnet \ncã tæng céng 254 ®Þa chØ host. Chóng ta nªn sö dông mèi t−¬ng quan mét- mét  \ngi÷a VLAN  vµ IP subnet. Do ®ã, mçi VLAN t−¬ng øng víi mét IP subnet, cã tèi \n®a 254 thiÕt bÞ. \n\n \n\n \n\nThieu hinh ve ko co hinh \n\n \n\n \n\nPhÇn header cña frame sÏ ®−îc ®ãng gãi l¹i vµ ®iÒu chØnh ®Ó cã thªm th«ng \ntin vÒ VLAN ID tr−íc khi frame ®−îc truyÒn lªn ®−êng truyÒn kÕt nèi gi÷a c¸c \nswitch. C«ng viÖc nµy gäi lµ d¸n nh·n cho frame. Sau ®ã, phÇn header cña frame \n®−îc tr¶ l¹i nh− cò tr−íc khi truyÒn xuèng cho thiÕt bÞ ®Ých. \n\nCã hai ph−¬ng ph¸p chñ yÕu ®Ó d¸n nh·n frame lµ Intr \u2013 Switch Link(ISL) vµ \n802.1Q.ISL tõng ®−îc sö dông phæ biÕn nh−ng b©y giê ®ang thay thÕ bëi 802.1Q. \n\nXÐt vÝ dô trªn h×nh 8.1.5.d: Switch l−u riªng tõng b¶ng chuyÓn m¹ch t−¬ng \nøng víi mçi VLAN. Switch nhËn frame vµo tõ VLAN nµo th× chØ häc ®Þa chØ nguån \nvµ t×m ®Þa chØ ®Ých trong b¶ng chuyÓn m¹ch cña VLAN ®ã. Nhê ®ã switch b¶o ®¶m \nchØ thùc hiÖn chuyÓn m¹ch trong cïng mét VLAN. B©y giê gi¶ sö m¸y tr¹m trong \nVLAN1 cña switch A göi gãi d÷ liÖu cho m¸y tr¹m trong VLAN 1 cña switch B. \nSwitch A nhËn ®−îc gãi d÷ liÖu nµy vµo tõ port n»m trong VLAN1, do ®ã nã t×m \n®Þa chØ ®Ých trong b¶ng chuyÓn m¹ch cña VLAN1. Sau  ®ã switch x¸c ®Þnh lµ ph¶i \nchuyÓn frame nµy lªn ®−êng backbone. Tr−íc khi chuyÓn frame lªn ®−êng \n\n\n\n 473\n\nbackbone th× Switch A sÏ ®ãng gãi l¹i cho frame, trong ®ã phÇn header cña frame \ncã thªm th«ng tin vÒ VLAN ID cho biÕt gãi d÷ liÖu nµy thuéc VLAN1. C«ng viÖc \nnµy gäi lµ d¸n nh·n frame. Sau ®ã Switch B nhËn ®−îc gãi d÷ liÖu tõ ®−êng \nbackbone xuèng, dùa vµo VLAN ID trong gãi, Switch x¸c ®Þnh gãi d÷ liÖu nµy tõ \nVLAN1 nªn nã t×m ®Þa chØ ®Ých trong b¶ng chuyÓn m¹ch cña VLAN1. Switch B \nt×m ®−îc port ®Ých cña gãi d÷ liÖu. Tr−íc khi chuyÓn gãi xuèng m¸y ®Ých, Switch \nt×m ®−îc port ®Ých cña gãi d÷ liÖu. Tr−íc khi chuyÓn  gãi xuèng m¸y ®Ých, Switch \nB tr¶ l¹i ®Þnh d¹ng ban ®Çu cña phÇn header trong gãi d÷ liÖu, hay cßn gäi lµ gì \nnh·n frame. \n\nM« pháng LAN (LANE \u2013 LAN Emulation) lµm cho m¹ng ATM(Asynchronous \nTransfer Mode) b¾t ch−íc gièng m¹ng Ethernet. Trong LANE, kh«ng cã d¸n nh·n \nframe mµ sö dông kÕt nèi ¶o ®Ó biÓu thÞ choVLAN ID. \n\n8.2 CÊu h×nh VLAN \n\n8.2.1. CÊu h×nh VLAN c¬ b¶n \n\nTrong m«i tr−êng chuyÓn m¹ch, mét m¸y tr¹m chØ nhËn ®−îc giao th«ng nµo \ngöi ®Õn nã. Nhê ®ã, mçi m¸y tr¹m ®−îc dµnh riªng vµ trän vÑn b¨ng th«ng cho \n®−êng truyÒn vµ nhËn. Kh«ng gièng nh− hÖ thèng hus chia sÎ chØ cã mét m¸y tr¹m \n®−îc phÐp truyÒn t¹i mét thêi ®iÓm, m¹ng chuyÓn m¹ch cã thÓ cho phÐp nhiÒu \nphiªn giao dÞch cïng mét lóc trong mét miÒn qu¶ng b¸ mµ kh«ng lµm ¶nh h−ëng \n®Õn c¸c m¸y tr¹m kh¸c bªn trong còng nh− bªn ngoµi miÒn qu¶ng b¸. VÝ dô nh− \ntrªn h×nh 8.2.1.a, cÆp A/B, C/D, E/F cã thÓ ®ång thêi liªn l¹c víi nhau mµ kh«ng \n¶nh h−ëng ®Õn c¸c cÆp m¸y kh¸c. \n\n \n\n\n\n 474\n\nH×nh 8.2.1.a \n\nMçi VLAN cã mét ®Þa chØ m¹ng Líp 3 riªng: Nhê ®ã router cã thÓ chuyÓn \ngãi gi÷a c¸c VLAN víi nhau. \n\nChóng ta cã thÓ x©y dùng VLAN cho m¹ng tõ ®Çu cuèi - ®Õn - ®Çu cuèi hoÆc theo \ngiíi h¹n ®Þa lý. \n\n \n\nH×nh 8.2.1.b VLAN tõ ®Çu cuèi- ®Õn - ®Çu cuèi. \n\nMét m¹ng VLAN tõ ®Çu cuèi - ®Õn - ®Çu cuèi cã c¸c ®Æc ®iÓm nh− sau: \n\n*User ®−îc ph©n nhãm vµo VLAN hoµn toµn kh«ng phô thuéc vµo vÞ trÝ vËt \nlý, chØ phô thuéc vµo chøc n¨ng c«ng viÖc cña nhãm. \n\n*Mäi user trong cïng mét VLAN ®Òu cã chung tØ lÖ giao th«ng 80/20(80% \ngiao th«ng trong VLAN, 20% giao th«ng ra ngoµi VLAN) \n\n*Khi user di chuyÓn trong hÖ thèng m¹ng vÉn kh«ng thay ®æi VLAN cña \nuser ®ã. \n\n*Mçi VLAN cã nh÷ng yªu cÇu b¶o mËt riªng cho mäi thµnh viªn cña VLAN \n®ã. \n\nB¾t ®Çu tõ tÇng truy cËp, port trªn switch ®−îc cÊp xuèng cho mçi user. Ng−êi sö \ndông di chuyÓn trong toµn bé hÖ thèng m¹ng ë mäi thêi ®iÓm nªn mçi switch ®Òu \n\n\n\n 475\n\nlµ thµnh viªn cña mäi VLAN. Switch ph¶i d¸n nh·n frame khi chuyÓn frame gi÷a \nc¸c switch tÇng truy cËp víi switch ph©n phèi. \n\nISL lµ giao thøc ®éc quyÒn cña Cisco ®Ó d¸n nh·n cho frame khi truyÒn frame gi÷a \nc¸c switch víi nhau vµ víi router. CßnIEEE802.1Q lµ mét chuÈn ®Ó d¸n nh·n \nframe. Catalyst 2950 kh«ng hç trî ISL trunking. \n\nC¸c server ho¹t ®éng theo chÕ ®é client/server. Do ®ã c¸c server theo nhãm nªn ®Æt \ntrong cïng VLAN  víi nhãm user mµ server ®ã phôc vô, nh− vËy sÏ gi÷ cho dßng \nl−u l−îng tËp trung trong VLAN, gióp tèi −u ho¸ ho¹t ®éng chuyÓn m¹ch líp 2. \n\nRouter ë tÇng trôc chÝnh ®−îc sö dông ®Ó ®Þnh tuyÕn gi÷a c¸c subnet. Toµn bé hÖ \nthèng nµy cã tØ lÖ l−u l−îng lµ 80% l−u l−îng trong néi bé mçi VLAN, 20% giao \nth«ng ®i qua router ®Õn c¸c server toµn bé hÖ thèng vµ ®i ra internet, WAN. \n\n 8.2.2. Vlan theo ®Þa lý. \n\n VLAN tõ ®Çu cuèi  - ®Õn - ®Çu cuèi cho phÐp ph©n nhãm nguån tµi nguyªn \nsö dông, vÝ dô nh− ph©n nhãm user theo server sö dông, nhãm dù ¸n vµ theo phßng \nban... Môc tiªu cña VLAN tõ ®Çu ®Õn cuèi - ®Õn - ®Çu cuèi lµ gi÷ 80% giao th«ng \ntrong néi bé cña VLAN. \n\n Khi c¸c hÖ thèng m¹ng tËp ®oµn thùc hiÖn tËp trung tµi nguyªn m¹ng th× \nVLAN tõ ®Çu cuèi - ®Õn - ®Çu cuèi rÊt khã thùc hiÖn môc tiªu cña m×nh. Khi ®ã \nuser cÇn ph¶i sö dông nhiÒu nguån tµi nguyªn kh¸c nhau kh«ng n»m trong cïng \nVLAN víi user. ChÝnh v× xu h−íng sö dông vµ ph©n bè tµi nguyªn m¹ng  kh¸c ®i \nnªn hiÖn nay VLAN th−êng ®−îc t¹o ra theo giíi h¹n cña ®Þa lý. \n\n Ph¹m vi ®Þa lý cã thÓ lín b»ng c¶ mét toµ nhµ hoÆc còng cã thÓ chØ nhá víi \nmét switch. Trong cÊu tróc VLAN nµy. Tû lÖ l−u l−îng sÏ lµ 20/80, 20% giao \nth«ng trong néi bé VLAN vµ 80% giao th«ng ®i ra ngoµi VLAN. \n\n §iÓm nµy cã nghÜa lµ l−u l−îng ph¶i ®i qua thiÕt bÞ líp 3 míi ®Õn ®−îc 80% \nnguån tµi nguyªn. KiÓu thiÕt kÕ nµy cho phÐp viÖc truy cËp nguån tµi nguyªn ®−îc \nthèng nhÊt. \n\n\n\n 476\n\n \n\nH×nh 8.2.2 \n\n 8.2.3 CÊu hinh VLAN cè ®Þnh. \n\n VLAN cè ®Þnh lµ VLAN ®−îc cÊu h×nh theo port trªn switch b»ng c¸c phÇn \nmÒm qu¶n lý hoÆc cÊu h×nh trùc tiÕp trªn switch. C¸c port ®· ®−îc g¸n vµo VLAN \nnµo th× nã sÏ gi÷ nguyªn cÊu h×nh VLAN ®ã cho ®Õn khi ®−îc thay ®æi b»ng lÖnh. \n§©y lµ cÊu tróc VLAN theo ®Þa lý, c¸c user ph¶i ®i qua thiÕt bÞ líp 3 míi truy cËp \n80% tµi nguyªn m¹ng. Lo¹i VLAN cè ®Þnh ho¹t ®éng tèt trong nh÷ng m¹ng cã ®Æc \n®iÓm nh− sau: \n\n \u2022 Sù di chuyÓn trong m¹ng ®−îc qu¶n lý vµ kiÓm so¸t. \n\n \u2022 Cã phÇn mÒm qu¶n lý VLAN m¹nh ®Ó cÊu h×nh port trªn switch. \n\n \u2022 Kh«ng dµnh nhiÒu t¶i cho ho¹t ®éng duy tri ®Þa chØ MAC cña thiÕt bÞ ®Çu \ncuèi vµ ®iÒu chØnh b¶ng ®Þa chØ. \n\n VLAN ®éng th× kh«ng phô thuéc vµo port trªn switch. \n\n Sau ®©y lµ c¸c h−íng dÉn khi b¹n cÊu h×nh VLAN trªn Cisco 29xx switch:  \n\n \u2022 Sè l−îng VLAN tèi ®a phô thuéc vµo switch. \n\n \u2022 VLAN 1 lµ VLAN mÆc ®Þnh cña nhµ s¶n xuÊt. \n\n\n\n 477\n\n \u2022 VLAN 1 lµ VLAN Ethernet mÆc ®Þnh. \n\n \u2022 Giao thøc ph¸t hiÖn thiÕt bÞ Cisco (Cisco Discovery Protocol \u2013 CDP) vµ \ngiao thøc VLAN Trunking (VTP) ®Òu giö gãi qu¶ng b¸ cña m×nh trong VLAN 1. \n\n \u2022 §Þa chØ IP cña Catalyst 29xx mÆc ®Þnh n»m trong miÒn qu¶ng b¸ VLAN 1. \n\n \u2022 Switch ph¶i ë chÕ ®é VTP server ®Ó t¹o, thªm hoÆc xo¸ VLAN. \n\n ViÖc t¹o VLAN trªn switch rÊt ®¬n gi¶n vµ râ rµng. NÕu b¹n sö dông switch \nvíi cisco IOS, b¹n vµo chÕ ®é cÊu h×nh VLAN b»ng lÖnh vlan database ë chÕ ®é \nEXEC ®Æc quyÒn, sau ®ã b¹n t¹o VLAN: \n\n Switch # vlan database. \n\n Switch (vlan) # vlan vlan_number. \n\n Switch (vlan) # exit. \n\n Sau khi ®· cã VLAN trªn switch, b−íc tiÕp theo lµ c¸c b¹n g¸n port vµo \nVLAN: \n\n Switch (config) # interfase fastethernet 0/9. \n\n Switch (config-if)#switchport access vlan vlan_number. \n\n 8.2.4. Kiểm tra cÊu h×nh VLAN. \n\n B¹n dïng c¸c lÖnh sau ®Ó kiÓm tra cÊu h×nh VLAN: show vlan, show vlan \nbrief, show vlan id id_number. \n\n B¹n nªn nhí 2 ®iÒu kiÖn sau:  \n\n \u2022 TÊt c¶ c¸c VLAN ®−îc t¹o ra chØ b¾t ®Çu ®−îc sö dông khi ®· cã port ®−îc \nph©n cho nã. \n\n \u2022 MÆc ®Þnh, tÊt c¶ c¸c port ethernet ®Òu n»m trong VLAN 1. \n\n \n\n\n\n 478\n\n \n\nH×nh 8.2.4.a \n\n \n\n \n\nH×nh 8.2.4.b \n\n 8.2.5. L−u cÊu h×nh VLAN. \n\n B¹n nªn l−u cÊu h×nh VLAN thµnh mét tËp tin v¨n b¶n ®Ó cã thÓ biªn tËp l¹i \nhoÆc ®Ó dù phßng. \n\n\n\n 479\n\n B¹n cã thÓ l−u cÊu h×nh switch b»ng lÖnh copy running-config tftp hoÆc b»ng \nchøc n¨ng ghi l¹i v¨n b¶n (capture text) cña HyperTerminal. \n\n \n\n \n\nH×nh 8.2.5 \n\n 8.2.6. Xo¸ VLAN. \n\n Xo¸ mét VLAN trªn switch còng gièng nh− mét dßng lÖnh xo¸ trong cÊu \nh×nh router vËy. §¬n gi¶n lµ b¹n t¹o VLAN b»ng lÖnh nµo th× b¹n dïng d¹ng ®ã \ncña c©u lÖnh ®ã ®Ó xo¸ VLAN. \n\n Khi mét VLAN ®· bÞ xo¸ ®i th× tÊt c¶ c¸c port cña VLAN ®ã sÏ ë tr¹ng th¸i \nkh«ng ho¹t ®éng nh−ng vÉn thuéc vÒ VLAN ®· bÞ xo¸ cho ®Õn khi nµo c¸c port nµy \n®−îc cÊu h×nh sang VLAN kh¸c. \n\n \n\nH×nh 8.2.6. Xo¸ port 0/9 khái VLAN 300. \n\n  \n\n\n\n 480\n\n8.3. Xö lý sù cè VLAN. \n\n 8.3.1. Giíi thiÖu chung. \n\n HiÖn nay VLAN ®−îc sö dông phæ biÕn. Víi VLAN, ng−êi kü s− m¹ng cã \nthÓ linh ho¹t h¬n trong thiÕt kÕ vµ triÓn khai hÖ thèng m¹ng. VLAN gióp giíi h¹n \nmiÒn qu¶ng b¸, gia t¨ng kh¶ n¨ng b¶o mËt vµ ph©n nhãm theo logic. Tuy nhiªn, víi \nc¬ b¶n chuyÓn m¹ch LAN, sù cè cã thÓ xay ra khi chóng ta triÓn khai VLAN. \nTrong bµi nµy sÏ cho thÊy mét vµi sù cè cã thÓ x¶y ra víi VLAN vµ cung cÊp cho \nc¸c b¹n mét sè c«ng cô vµ kü thuËt sö lý sù cè. \n\n Sau khi hoµn tÊt bµi nµy c¸c b¹n cã thÓ thùc hiÖn c¸c viÖc sau: \n\n \u2022 Ph©n tÝch hÖ thèng ®Ó tiÕp xóc víi sù cè cña VLAN. \n\n \u2022 Gi¶i thÝch c¸c b−íc xö lý sù cè nãi chung trong m¹ng chuyÓn m¹ch. \n\n \u2022 M« t¶ sù cè Spanning \u2013 Tree dÉn ®Õn trËn b·o qu¶ng b¸ nh− thÕ nµo. \n\n \u2022 Sö dông lÖnh show vµ debug ®Ó xö lý sù cè VLAN. \n\n 8.3.2. TiÕn tr×nh xö lý sù cè VLAN. \n\n §iÒu quan träng lµ b¹n ph¶i ph¸t triÓn c¸c b−íc xö lý sù cè trªn switch mét \nc¸ch cã hÖ thèng. Sau ®©y lµ c¸c b−íc cã thÓ gióp cho b¹n x¸c ®Þnh sù cè trong \nm¹ng chuyÓn m¹ch: \n\n 1. KiÓm tra c¸c biÓu hiÖn vËt lý, nh− tr¹ng th¸i LED. \n\n 2. B¾t ®Çu tõ mét cÊu h×nh trªn mét switch vµ kiªm tra dÇn ra. \n\n 3. KiÓm tra kÕt nèi líp 1. \n\n 4. KiÓm tra kÕt nèi líp 2. \n\n 5. Xö lý sù cè VLAN x¶y ra trªn nhiÒu switch. \n\n Khi xay ra sù cè, b¹n nªn kiÓm tra xem ®©y lµ mét sù cè lÆp ®i lÆp l¹i hay lµ \nsù cè biÖt lËp. Mét sè sù cè lÆp ®i lÆp l¹i cã thÓ lµ do sù gia t¨ng cña c¸c dÞch vô \nphôc vô cho m¸y tr¹m, lµm v−ît qua kh¶ n¨ng cÊu h×nh, kh¶ n¨ng ®−êng trunking \nvµ kh¶ n¨ng truy cËp tµi nguyªn trªn server. \n\n\n\n 481\n\n VÝ dô: ViÖc sö dông c¸c c«ng nghÖ web vµ c¸c øng dông truyÒn thèng nh− \ntruyÒn t¶i file, email...sÏ lµm gia t¨ng mËt ®é giao th«ng lµm cho toµn bé hÖ thèng \nbÞ tr× trÖ. \n\n \n\nH×nh 8.3.1 \n\n HiÖn nay rÊt nhiÒu m¹ng LAN ph¶i ®èi mÆt víi m« h×nh giao th«ng ch−a \n®−îc tÝnh tr−íc, lµ kÕt qu¶ cña sù gia t¨ng giao th«ng trong intranet, Ýt ph©n nhãm \nserver h¬n vµ t¨ng sö dông multicast. Nguyªn t¾c 80/20 víi chØ cã 20% giao th«ng \n®i lªn c¸c ®−êng trôc chÝnh ®· trë lªn l¹c hËu. Ngµy nay, c¸c tr×nh duyÖt web néi \nbé cã thÓ cho phÐp user x¸c ®Þnh vµ truy cËp th«ng tin ë bÊt kú ®©u trong m¹ng néi \nbé cña tËp ®oµn. \n\n NÕu m¹ng th−êng xuyªn bÞ nghÏn m¹ch, qu¸ t¶i, rít gãi vµ truyÒn l¹i nhiÒu \nlÇn th× nghÜa lµ cã qu¸ nhiÒu port cho mét ®−¬ng trunk hoÆc cã qu¸ nhiÒu yªu cÇu \ntruy suÊt vµo c¸c nguån tµi nguyªn cña toµn hÖ th«ng vµ c¸c server intranet. \n\n NghÏn m¹ch còng cã thÓ do phÇn lín giao th«ng ®Òu ®−îc truyÒn lªn ®−êng \ntrôc chÝnh, hoÆc lµ do user më ra nhiÒu tµi nguyªn vµ nhiªu øng dông ®a ph−¬ng \ntiÖn. Trong tr−êng hîp nµy thÞ hÖ thèng m¹ng nªn n©ng cÊp ®Ó ®¸p øng nhu cÇu \nph¸t triÓn. \n\n 8.3.3. Ng¨n trÆn c¬n b·o qu¶ng b¸. \n\n\n\n 482\n\n TrËn b·o qu¶ng b¸ x¶y ra khi cã qu¸ nhiÒu gãi qu¶ng b¸ ®−îc nhËn vµo trªn \nmét port. ViÖc sö lý chuyÓn m¹ch c¸c gãi nµy cho hÖ thèng m¹ng ch©m ®i. Chóng \nta cã thÓ cÊu h×nh cho switch kiÓm so¸t b·o trªn tõng port. MÆc ®Þnh, chÕ ®é kiÓm \nso¸t b·o trªn switch bÞ t¾t ®i. \n\n §Ó ng¨n chÆn b·o qu¶ng b¸, chóng ta ®Æt mét gi¸ trÞ ng−ìng cho port ®Ó huû \ngãi d÷ liÖu vµ ®ãng port khi gi¸ trÞ ng−ìng nµy bÞ v−ít qua. \n\n STP (Spanning - Tree Protocol) cã mét sè sù cè bao gåm trËn b·o qu¶ng b¸, \nlÆp vßng, rít gãi BPDU va gãi d÷ liÖu. Chøc n¨ng cña STP lµ b¶o ®¶m kh«ng cã \nvßng lÆp tån t¹i trong m¹ng b»ng c¸ch chän ra mét bridge gèc. Bridge gèc nµy lµ \n®iÓm gèc cña cÊu tróc h×nh c©y vµ n¬i kiÓm so¸t ho¹t ®éng cña giao thøc STP. \n\n NÕu cÇn ph¶i gi¶m l−îng giao th«ng BPDU th× b¹n sÏ cµi ®Æt gi¸ trÞ tèi ®a \ncho c¸c kho¶ng thêi gian ho¹t ®éng cña bridge gèc. §Æc biÖt lµ b¹n nªn ®Æt gi¸ trÞ \ntèi ®a 30 gi©y cho kho¶ng thêi gian chuyÓn tr¹ng th¸i (Forward delay) vµ thêi gian \nchê tèi ®a (max - age) lµ 40 gi©y. \n\n Mét port vËt lý trªn router hoÆc switch cã thÓ lµ thµnh viªn cña mét hoÆc \nnhiÒu cÊu tróc h×nh c©y nÕu port nµy kÕt nèi vµo ®−êng trunk. \n\n L−u ý: VTP chØ ch¹y trªn Catalyst switch chø kh«ng ch¹y trªn router. \n\n Trªn switch kÕt nèi vµo router, b¹n nªn cÊu h×nh cho switch ®ã ch¹y ë chÕ ®é \nVTP transparent cho ®Õn khi nµo Cisco hç trî VTP trªn router cña hä. \n\n Giao thøc Spanning - Tree ®−îc xem lµ mét trong nh÷ng giao thøc líp 2 \nquan träng nhÊt trªn Catalyst switch. b»ng c¸ch ng¨n chÆn c¸c vßng luËn lý trong \nm¹ng chuyÓn m¹ch, STP cho phÐp cÊu tróc líp 2 vÉn cã c¸c ®−êng d− ®Ó dù phßng \nmµ kh«ng g©y ra tr©n b·o qu¶ng b¸. \n\n \n\n\n\n 483\n\nTẬP 4 \n\nCHƯƠNG I:PHÂN CHIA ĐỊA CHỈ IP \n\nGIỚI THIỆU \n\nSự phát triển không ngừng của Internet đã làm cho những nhà nghiên cứu bất ngờ. \n\nMột trong những nguyên nhân làm cho Internet phát triển nhanh chóng như vậy là \n\ndo sự linh hoạt, uyển chuyển của thiết kế ban đầu. Nếu chúng ta không có các biện \n\npháp phân phối địa chỉ IP thì sự phát triển của Internet sẽ làm cạn kiệt nguồn địa \n\nchỉ IP. Để giải quyết vấn đề thiếu hụt địa chỉ IP, nhiều biện pháp đã được triển \n\nkhai. Trong đó, một biện pháp đã được triển khai rộng rãi là chuyển đổi địa chỉ \n\nmạng (Network Address Translation \u2013 NAT). \n\nNAT là một cơ chế để tiết kiệm địa chỉ IP đăng kí trong một mạng lớn và giúp đơn \n\ngiản hóa việc quản lý địa chỉ IP. Khi một gói dữ liệu được định tuyến trong một \n\nthiết bị mạng, thường là firewall hoặc các router biên, địa chỉ IP nguồn sẽ được \n\nchuyển đổi từ địa chỉ mạng riêng thành địa chỉ IP công cộng định tuyến được. Điều \n\nnày cho phép gói dữ liệu được truyền đi trong trong mạng công cộng, ví dụ như \n\nInternet. Sau đó, địa chỉ công cộng trong gói trả lời lại được chuyển đổi thành địa \n\nchỉ riêng để phát vào trong mạng nội bộ. Một dạng của NAT, được gọi là PAT \n\n(Port Address Translation), cho phép nhiều địa chỉ riêng được dịch sang một địa \n\nchỉ công cộng duy nhất. \n\nRouter, server và các thiết bị quan trọng khác trong mạng thường đòi hỏi phải được \n\ncấu hình bằng tay địa chỉ IP cố định. Trong khi đó, các máy tính client không cần \n\nthiết phải đặt cố định một địa chỉ mà chỉ cần xác định một dải địa chỉ cho nó. Dải \n\nđịa chỉ này thường là một subnet IP. Một máy tính nằm trong subnet có thể được \n\nphân phối bất kì địa chỉ nào nằm trong subnet đó. \n\n\n\n 484\n\nGiao thức DHCP (Dynamic Host Configuration Protocol) được thiết kế để phân \n\nphối địa chỉ IP và đồng thời cung cấp các thông tin cấu hình mạng quan trọng một \n\ncách tự động cho máy tính. Số lượng máy client chiếm phần lớn trong hệ thống \n\nmạng, do đó DHCP thực sự là công cụ tiết kiệm thời gian cho người quản trị mạng. \n\nSau khi hoàn tất chương này, các bạn có thể: \n\n\u2022 Xác định địa chỉ IP riêng được mô tả trong RFC 1918. \n\n\u2022 Nắm được các đặc điểm của NAT và PAT. \n\n\u2022 Phân tích các lợi điểm của NAT. \n\n\u2022 Phân tích cách cấu hình NAT và PAT, bao gồm cả chuyển đổi cố định, \n\nchuyển đổi động và chuyển đổi overloading. \n\n\u2022 Xác định các lệnh dùng để kiệm tra cấu hình NAT và PAT. \n\n\u2022 Liệt kê các bước xử lý sự cố NAT và PAT. \n\n\u2022 Nắm được các ưu điểm và nhược điểm của NAT. \n\n\u2022 Mô tả các đặc điểm của DHCP. \n\n\u2022 Phân tích sự khác nhau giữa BOOTP và DHCP. \n\n\u2022 Phân tích quá trình cấu hình DHCP client. \n\n\u2022 Cấu hình DHCP server. \n\n\u2022 Xử lý sự cố DHCP. \n\n\u2022 Phân tích yêu cầu đặt lại DHCP. \n\n1.1. Chia địa chỉ mạng với NAT và PAT \n\n1.1.1. Địa chỉ riêng \n\nRFC 1918 dành riêng 3 dải địa chỉ IP sau: \n\n\u2022 1 địa chỉ lớp A: 10.0.0.0/8. \n\n\u2022 16 địa chỉ lớp B: 172.16.0.0 \u2013 172.31.255.255 (172.16.0.0/12). \n\n\n\n 485\n\n\u2022 256 địa chỉ lớp C: 192.168.0.0-192.168.255.255 (192.168.0.0/16). \n\nNhững địa chỉ trên chỉ dùng cho mạng riêng, mạng nội bộ. Các gói dữ liệu có địa \n\nchỉ như trên sẽ không định tuyến được trên Internet. \n\nĐịa chỉ Internet công cộng phải được đăng ký với một công ty có thẩm quyền \n\nInternet, ví dụ như American Registry for Internet Numbers (ARIN) hoặc Réseaux \n\nIP Européens (RIPE) và The Regional Internet Registry phụ trách khu vực Châu \n\nÂu và Bắc Phi. Địa chỉ IP công cộng còn có thể được thuê từ một nhà cung cấp \n\ndịch vụ Internet (ISP). Địa chỉ IP riêng được dành riêng và có thể được sử dụng bởi \n\nbất kỳ ai. Điều này có nghĩa là có thể có 2 mạng hoặc 2 triệu mạng sử dụng cùng \n\nmột địa chỉ mạng riêng. Router trên Internet sẽ không định tuyến các địa chỉ RFC \n\n1918.ISP cấu hình Router biên ngăn không cho các lưu lượng của địa chỉ riêng \n\nđược phát ra ngoài. \n\nNAT mang đến rất nhiều lợi ích cho các công ty và Internet. Trước đây, khi không \n\ncó NAT, một máy tính không thể truy cập Internet với địa chỉ riêng. Bây giờ, sau \n\nkhi có NAT, các công ty  có thể cấu hình địa chỉ riêng cho một hoặc tất cả các máy \n\ntính và sử dụng NAT để truy cập Internet. \n\n1.1.2. Giới thiệu NAT và PAT  \n\nNAT được thiết kế để tiết kiệm địa chỉ IP và cho phép mạng nội bộ sử dụng địa chỉ \n\nIP riêng. Các địa chỉ IP riêng sẽ được chuyển đổi sang địa chỉ công cộng định \n\ntuyến được bằng cách chạy phần mềm NAT đặc biệt trên thiết bị mạng. Điều này \n\ngiúp cho mạng riêng càng được tách biệt và giấu được địa chỉ IP nội bộ. \n\nNAT thường được sử dụng trên Router biên của mạng một cửa. Mạng một cửa là \n\nmạng chỉ có một kết nối duy nhất ra bên ngoài. Khi một host nằm trong mạng một \n\ncửa muốn truyền dữ liệu cho một host nằm bên ngoài nó sẽ truyền gói dữ liệu đến \n\nRouter  biên giới. Router biên giới sẽ thực hiện tiến trình NAT, chuyển đổi địa chỉ \n\n\n\n 486\n\nriêng của host nguồn sang một địa chỉ công cộng định tuyến được. Trong thuật ngữ \n\nNAT, mạng nội bộ có nghĩa là tập hợp các địa chỉ mạng cần chuyển đổi địa chỉ. \n\nMạng bên ngoài là tất cả các địa chỉ khác còn lai. \n\nMạng cục bộ chỉ có một cửa ra mạng bên ngoài. \n\n \n\nHình 1.1.2.a. Mạng một cửa \n\nCisco định nghĩa các thuật ngữ NAT như sau: \n\n\u2022 Địa chỉ cục bộ bên trong (Inside local address): là địa chỉ được phân phối \n\ncho các host bên trong mạng nội bộ. Các địa chỉ này thường không phải là \n\nđịa chỉ được cung cấp bởi InterNIC (Internet Network Information  Center) \n\nhoặc bởi nhà cung cấp dịch vụ Internet. Địa chỉ này thường là địa chỉ riêng \n\nRFC 1918. \n\n \n\n\u2022 Địa chỉ toàn cục bên trong (Inside global address): là địa chỉ IP hợp pháp \n\nđược cung cấp bởi InterNIC hoặc bởi nhà cung cấp dịch vụ Internet. Địa chỉ \n\nnày đại diện cho một hoặc nhiều địa chỉ nội bộ bên trong đối với thế giới bên \n\nngoài. \n\n\n\n 487\n\n\u2022 Địa chỉ cục bộ bên ngoài (Outside local address): là địa chỉ riêng của host \n\nnằm bên ngoài mạng nội bộ. \n\n\u2022 Địa chỉ toàn cục bên ngoài (Outside global address): là địa chỉ công cộng \n\nhợp pháp của host nằm bên ngoài mạng nội bộ. \n\n \n\nHình 1.1.2.b. Host nội bộ 10.0.0.3 muốn gửi gói dữ liệu cho một host nằm ngoài \n\n128.23.2.2. Gói dữ liệu được gửi tới router biên giới RTA. \n\n \n\nHình 1.1.2.c. RTA nhận thấy gói dữ liệu này đươc gửi ra ngoài internet nên nó \n\nthực hiên tiến trình NAT, chuyến đổi địa chỉ nguồn 10.0.0.3 thành địa chỉ công \n\ncộng là 179.9.8.80. Sauk hi thực hiện NAT xong, gói dữ liệu từ RTA đi ra sẽ có địa \n\nchỉ nguồn là một địa chỉ công cộng hợp pháp 179.9.8.80. \n\n\n\n 488\n\n \n\nHình 1.1.2.d. Sau đó server 128..23.2.2 có thể gửi lại một gói trả lời. Khi đó gói \n\ntrả lời sẽ có địa chỉ đích là 179.9.8.80. \n\n \n\nHình 1.1.2.e. RTA nhận thấy gói dữ liệu này được gửi từ bên ngoài vào trong \n\nmạng nội bộ. RTA sẽ tìm trong bảng NAT để ánh xạ từ địa chỉ đích công cộng sang \n\nđịa chỉ riêng tương ứng. Sau khi thực hiên NAT xong, gói dữ liệu từ RTA phát vào \n\ntrong mạng nội bộ sẽ có địa chỉ đích là địa chỉ riêng của host đích 10.0.0.3. \n\n Xét ví dụ hình 1.1.2.b, đối với RTA: \n\n\u2022 Địa chỉ nội bộ bên trong là 10.0.0.3. \n\n\u2022 Địa chỉ toàn cục bên trong là: 179.9.8.80. \n\n\u2022 Địa chỉ toàn cục bên ngoài là: 128.23.2.2. \n\n\n\n 489\n\n1.1.3. Các đặc điểm của NAT và PAT \n\nChuyển đổi NAT rất hữu ích cho nhiều mục đích khác nhau và có thể chuyển đổi \n\nđộng hoặc cố định. NAT cố định được thiết kế để ánh xạ một-một, từ một địa chỉ \n\nnội bộ sang một địa chỉ công cộng tương ứng duy nhất. Điều này rất tốt đối với \n\nnhững host cần phải có địa chỉ nhất định để truy cập từ Internet. Những host này có \n\nthể là các server toàn hệ thống hoặc các thiết bị mạng. \n\nNAT động được thiết kế để ánh xạ một địa chỉ IP riêng sang một địa chỉ công \n\ncộng một cách tự động. Bất kỳ địa chỉ IP nào nằm trong dải địa chỉ IP công cộng \n\nđã được định trước đều có thể được gán cho một host bên trong mạng. Overloading \n\nhoặc PAT có thể ánh xạ nhiều địa chỉ IP riêng sang một địa chỉ IP công cộng vì \n\nmỗi địa chỉ riêng được phân biệt bằng số port. \n\nPAT sử dụng số port nguồn cùng với địa chỉ IP riêng bên trong để phân biệt khi \n\nchuyển đổi. Số port được mã hóa 16 bit. Do đó có tới 65.536 địa chỉ nội bộ có thể \n\nđược chuyển đổi sang một địa chỉ công cộng. Thực tế thì số lượng port có thể gán \n\ncho một địa chỉ IP là khoảng 4000 port. PAT sẽ cố gắng giữ nguyên số port nguồn \n\nban đầu. Nhưng nếu số port này đã bị sử dụng thi PAT sẽ lấy số port còn trống đầu \n\ntiên trong các nhóm port 0-511, 512-1023, 1024-65535. \n\nKhi không còn số port nào còn trống và vẫn còn địa chỉ IP công cộng khác đã được \n\ncấu hình thì PAT sẽ chuyển sang địa chỉ IP công cộng kế tiếp và bắt đàu xác định \n\nsố port nguồn như trên. Quá trình này sẽ được thực hiện cho đến khi nào hết số \n\nport và địa chỉ IP công cộng còn trống. \n\n\n\n 490\n\n \n\nHình 1.1.3.a. \n\n.  \n\nHình 1.1.3.b. \n\n \n\n\n\n 491\n\nHình 1.1.3.c. Host 10.0.0.3 gửi gói dữ liệu ra internet. Trong gói  dữ liệu này, địa \n\nchỉ IP nguồn là 10.0.0.3, port là 1444 \n\n \n\n \n\nHình 1.1.3.d. Router thực hiện chuyển đổi địa chỉ IP nguồn từ 10.0.0.3 sang địa \n\nchỉ 179.9.8.80, port nguồn vẫn giữ nguyên là 1444. \n\n \n\nHình 1.1.3.e. Bây giờ Host 10.0.0.4 cũng gửi gói dữ liệu ra internet với địa chỉ \n\nnguồn là 10.0.0.4, port nguồn là 1444 \n\n\n\n 492\n\n \n\nHình 1.1.3.f. Router thực hiện chuyển đổi địa chỉ IP nguồn từ 10.0.0.4 sang \n\n179.9.8.80. Port  nguồn là 1444  lúc này phải đổi sang 1445. Như vậy theo như \n\nbảng NAT trong hình ta thấy địa chỉ công cộng 179.9.8.80: 1444 là tương ứng với \n\n10.0.0.3:1444, 179.9.8.80:1445 tương ứng với 10.0.0.4:1444. Bằng cách sử dụng \n\nkết hợp với số port như vậy, PAT có thể ánh xạ một địa chỉ IP công cộng cho nhiều \n\nđịa chỉ riêng  bên trong. \n\nNAT cung cấp những lợi điểm sau: \n\n\u2022 Không cần phải gán địa chỉ IP mới cho từng host khi thay đổi sang một ISP \n\nmới. Nhờ đó có thể tiết kiệm được thời gian và tiền bạc. \n\n\u2022 Tiết kiệm địa chỉ thông qua ứng dụng ghép kênh cấp độ port. Với PAT, các \n\nhost bên trong có thể chia sẻ một địa chỉ IP công cộng để giao tiếp với bên \n\nngoài. Với cách cấu hình này, chúng ta cần rất ít địa chỉ công cộng, nhờ đó \n\ncó thể tiết kiệm địa chỉ IP. \n\n\u2022 Bảo vệ mạng an toàn vì mạng nội bộ không để lộ địa chỉ và cấu trúc bên \n\ntrong ra ngoài. \n\n1.1.4. Cấu hình NAT và PAT \n\n\n\n 493\n\n1.1.4.1. Chuyển đổi cố định \n\nĐể cấu hình chuyển đổi cố định địa chỉ nguồn bên trong, chúng ta cấu hình các \n\nbước như sau: \n\nBước Thực hiện Ghi chú \n\n1 Thiết lập mối quan hệ chuyển đổi giữa địa \n\nchỉ nội bộ bên trong và địa chỉ đại diện \n\nbên ngoài \n\nRouter (config) # ip nat inside \n\nsource static local-ip global-ip \n\nTrong chế độ cấu hình toàn \n\ncục, bạn dùng câu lệnh no ip \n\nnat inside source static để \n\nxóa sụ chuyển đổi địa chỉ cố \n\nđịnh. \n\n2 Xác định cổng kết nối vòa mạng bên \n\ntrong. \n\nRouter (config) # interface type number \n\nSau khi gõ lệnh interface, \n\ndấu nhắc của dòng lệnh sẽ \n\nchuyển từ (config) # sang \n\n(config-if) # \n\n3 Đánh dấu cổng này là cổng kết nối vào \n\nmạng nội bộ bên trong. \n\nRouter (config-if) # ip nat inside \n\n \n\n4 Thóat khỏi chế độ cấu hình cổng hiện tại. \n\nRouter (config-if) # exit \n\n \n\n5 Xác định cổng kết nối ra mạng công cộng \n\nbên ngoài. \n\nRouter (config) # interface type number \n\n \n\n\n\n 494\n\n6 Đánh dấu cổng này là cổng kết nối ra \n\nmạng công cộng bên ngoài. \n\nRouter (config-if) # ip nat outside  \n\n \n\nHình vẽ - 2 hình \n\n \n\nHình 1.1.4.a Sự chuyển đổi địa chỉ sẽ được thưc hiện giữa hai cổng inside và \n\noutside \n\n \n\n \n\n\n\n 495\n\nHình 1.1.4.b. Cấu hình NAT chuyển đổi cố định từ địa chỉ 10.1.1.2 sang \n\n192.168.1.2. Khi có một gói dữ liệu từ host 10.1.1.2 được gửi ra ngoài internet, \n\nrouter GW sẽ chuyển đổi địa chỉ nguồn 10.1.1.2 của gói dữ liệu sang địa chỉ \n\n192.168.1.2 trước khi phát gói ra cổng s0. \n\n1.1.4.2. Chuyển đổi động \n\nĐể Chuyển đổi động địa chỉ nguồn bên trong, chúng ta cấu hình theo các bước như \n\nsau: \n\nBước Thực hiện Ghi chú \n\n1 Xác định dải địa chỉ đại diện bên ngoài \n\nRourter (config) # ip nat pool name start-ip \n\nend-ip [netmask netmask /prefix-length \n\nprefix-length] \n\nTrong chế độ cấu hình \n\ntoàn cục, gõ lệnh no ip \n\nnat pool name để xóa dải \n\nđịa chỉ đại diên bên ngoài. \n\n2 Thiết lập ACL cơ bản cho phép những địa \n\nchỉ nội bộ bên trong nào được chuyển đổi. \n\nRouter (config) # access-list access-list-\n\nnumber permit source [source-wildcard] \n\nTrong chế độ cấu hình \n\ntoàn cục, gõ lệnh no \n\naccess-list access-list-\n\nnumber để xóa ACL đó. \n\n3 Thiết lập mối liên quan giữa địa chỉ nguồn \n\nđã được xác định trong ACL ở bước trên với \n\ndải địa chỉ đại diện bên ngoài: \n\nRouter (config) # ip nat inside source list \n\naccess-list-number pool name \n\nTrong chế độ cấu hình \n\ntoàn cục, gõ lênh no ip \n\nnat inside source để xóa \n\nsự chuyển đổi động này \n\n4 Xác định cổng kết nối vào mạng nội bộ Sau khi gõ xong lệnh \n\n\n\n 496\n\nRouter (config) # interface type number interface, dấu nhắc của \n\ndòng lệnh sẽ chuyển đổi \n\ntừ config sang (config-if)#\n\n5 Đánh dấu cổng này là cổng kết nối vào mạng \n\nnội bộ. \n\nRouter (config-if) # ip nat inside \n\n \n\n6 Thóat khỏi chế độ cổng hiện tại.  \n\nRouter (config) # exit \n\n \n\n7 Xác định cổng kết nối ra bên ngoài. \n\nRouter (config) # interface type number \n\n \n\n8 Đánh dấu cổng này là cổng kết nối ra bên \n\nngoài. \n\nRouter (config) # ip nat outside \n\n \n\nDanh sách điều khiển truy cập (ACL \u2013 Access Control List) cho phép khai báo \n\nnhững địa chỉ nào được chuyển đổi. Bạn nên nhớ là kết thúc một ACL luôn có câu \n\nlệnh ẩn cấm tuyệt đối để tránh những kết quả không dự tính được khi một ACL có \n\nquá nhiều điều kiện cho phép. Cisco khuyến cáo là không nên dùng điều kiện cho \n\nphép tất cả permit any trong ACL sử dụng cho NAT vì câu lệnh này làm hao tốn \n\nquá nhiều tài nguyên của Router và do đó có thể gây ra sự cố mạng. \n\n\n\n 497\n\n \n\nHình 1.1.4.c \n\nXét ví dụ hình 1.1.4.c: Dải địa chỉ công cộng đại diện ben ngoài có tên là nat-\n\npool1, bao gồm các địa chỉ từ 179.9.8.80 đến 179.9.95. Địa chỉ nội bộ bên trong \n\nđược phép chuyển đổi được định nghĩa trong access-list 1 là 10.1.0.0 \u2013 10.1.0.255. \n\nNhư vậy, gói dữ liệu nào trong mạng nội bộ đi ra ngoài Internet có địa chỉ nguồn \n\nnằm trong dải địa chỉ 10.1.0.0 \u2013 10.1.0.255 sẽ được chuyển đổi địa chỉ nguồn sang \n\nmột trong bất kỳ địa chỉ nào còn trống trong dải địa chỉ công cộng 179.9.8.80 \u2013 \n\n179.9.8.95. Host 10.1.1.2 sẽ không được chuyển đổi địa chỉ vì địa chỉ của nó \n\nkhông được cho phép trong acces-list 1, do đó nó không truy cập được Internet. \n\nOverloading hay PAT \n\nOverloading được cấu hình theo hai cách tùy theo địa chỉ IP công cộng được cấp \n\nphát như thể nào. Một ISP có thể cho một hệ thống mạng của khách hàng sử dụng \n\nchung một địa chỉ IP công cộng duy nhất, đia jchỉ IP công cộng này chính là địa \n\nchỉ của cổng giao tiểp trên Router nối về ISP. Sau đây là ví dụ cấu hình cho tình \n\nhuống này: \n\n\n\n 498\n\nRouter (config) # access-list 1 permit 10.0.0.0 0.0.255.255 \n\nRouter (config)  ip nat inside source list 1 interface serial0/0 overload \n\nBước Thực hiện Ghi chú \n\n1 Tạo ACL để cho phép những địa chỉ nội bộ \n\nnào được chuyển đổi. \n\nRouter(config) # access-list acl-number \n\npermit source [source-wildcard] \n\nTrong chế độ cấu hình \n\ntoàn cục, gõ lệnh no \n\naccess-list access-list-\n\nnumber để xóa access-list \n\ntương ứng. \n\n2A Thiết lập mối liên quan giữa địa chỉ nguồn đã \n\nđược xác định trong access-list ở bước trên với \n\nđịa chỉ đại diện là địa chỉ của cổng kết nối với \n\nbên ngoài. \n\nRouter (config) # ip nat inside source list acl-\n\nnumber interface interface overload \n\nTrong chế độ cấu hình \n\ntoàn cục, gõ lệnh no ip \n\nnat inside source để xóa \n\nsự chuyển đổi động này. \n\nTừ khóa overload để cho \n\nphép chạy PAT \n\nHoặc \n\n2B \n\nKhai báo dải địa chỉ đại diện bên ngoài dùng \n\noverload. \n\nRouter (config)  ip nat pool name start-ip end-\n\nip \n\n[netmask netmask / prefix-length prefix-\n\nlength] \n\nThiết lập chuyển đổi overload giữa địa chỉ nội \n\nbộ đã được xác định trong ACL ở bước 1 với \n\ndải địa chỉ đại diện bên ngoài mới khai báo ở \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n 499\n\ntrên. \n\nRouter (config) # ip nat inside source list acl-\n\nnumber pool name overload \n\n \n\n \n\n \n\n \n\n \n\n \n\n3 Xác định cổng kết nối với mạng nội bộ. \n\nRouter (config) # interface type number  \n\nRouter (config-if) # ip nat inside  \n\n \n\n \n\n \n\nSau khi gõ lệnh interface, \n\ndấu nhắc của dòng lệnh sẽ \n\nđược đổi từ (config)# \n\nsang (config-if)# \n\n4 Xác định cổng kết nối với bên ngoài. \n\nRouter (config) # interface type number  \n\nRouter (config-if) # ip nat outside.  \n\n \n\n \n\n \n\nMột cách khác để cấu hình Overload là khi ISP cung cấp một hoặc nhiều địa chỉ IP \n\ncông cộng để cho hệ thống mạng khách hàng sử dụng làm dải địa chỉ chuyển đổi \n\nPAT. Cấu hình ví dụ cho tình huống này như sau: \n\n\u2022 Xác định địa chỉ nội bộ được phép chuyển đổi là 10.0.0.0/16: \n\n\n\n 500\n\nRouter (config) # access-list 1 permit 10.0.0.0.0.0.255.255 \n\n\u2022 Khai báo dải địa chỉ đại diện bên ngoài với tên là nat-pool2, bao gồm các địa \n\nchỉ trong subnet 179.9.8.20/28: \n\nRouter (config) # ip nat pool nat-pool2 179.9.8.20 netmask     \n\n255.255.255.240 \n\n\u2022 Thiết lập sự chuyển đổi Overload địa chỉ nội bộ được xác định trong access-\n\nlist 1 với dải địa chỉ đại diện nat pool2: \n\nRouter (config) # ip nat inside source list 1 pool nat-pool2 overload  \n\n \n\nHình 1.1.4.d. \n\nXét ví dụ hình 1.1.4.d: địa chỉ nội bộ bên trong được phép chuyển đổi được xác \n\nđịnh trong access-list 1 là 192.168.2.0/24 và 192.168.3.0/24. Địa chỉ đại diện bên \n\nngoài là địa chỉ của cổng serial 0, cổng kết nối ra Internet. Như vậy phải toàn bộ \n\nđịa chỉ bên trong được chuyển đổi PAT với một địa chỉ IP đại diện duy nhất là địa \n\nchỉ của cổng kết nối ra Internet, cổng serial 0. \n\n\n\n 501\n\n1.1.5. Kiểm tra cấu hình PAT \n\nSau khi NAT đã được cấu hình, chúng ta có thể dùng lệnh clear và show để kiểm \n\ntra hoạt động của NAT. \n\nMặc định, trong bảng chuyển đổi NAT động, mỗi một cặp chuyển đổi địa chỉ sẽ bị \n\nxóa đi sau một khoảng thời gian không sử dụng. Với chuyển đổi không sử dụng chỉ \n\nsố Port thì khoảng thời gian mặc định là 24 giờ. Chúng ta có thể thay đổi khoảng \n\nthời gian này bằng lệnh ip nat translation timeout timeout_seconds trong chế độ \n\ncấu hình toàn cục. \n\nCác thông tin về sự chuyển đổi có thể được hiển thị bằng các lệnh sau: \n\nLệnh Giải Thích \n\nClear ip nat translation * \n\n \n\nXóa mọi cặp chuyển đổi địa chỉ động \n\ntrong bảng NAT. \n\nClear ip nat translation inside global-\n\nip local-ip [outside local-ip global-ip] \n\nXóa một cặp chuyển đổi địa chỉ động \n\nbên trong hoặc cả bên trong và bên \n\nngoài tương ứng với địa chỉ cụ thể được \n\nkhai báo trong câu lệnh. \n\nClear ip nat translation protocol inside \n\nglobal-ip global-port local-ip local-port \n\n[outside local-ip local-port global-ip \n\nglobal-port] \n\nXóa một cặp chuyển đổi địa chỉ động \n\nmở rộng. \n\nShow ip nat translations  Hiển thị bảng NAT đang hoạt động. \n\nShow ip nat statistics Hiển thị trạng thái hoạt động của NAT. \n\n\n\n 502\n\n \n\nHình 1.1.5.a \n\n \n\nHình 1.1.5.b \n\nChúng ta có thể dùng lệnh show run để kiểm tra lại các giá trị cần khai báo trong \n\ncác câu lệnh cấu hình NAT, access-list, interface. \n\n1.1.6. Xử lý sự cố cấu hình NAT và PAT \n\nThường rất khó xác định nguyên nhân của sự cố khi kết nối IP bị sự cố trong môi \n\ntrường NAT. Nhiều khi chúng ta nhầm lẫn là do NAT gây ra nhưng thực sự \n\nnguyên nhân lại nằm ở chỗ khác. \n\nKhi cố gắng xác định nguyên nhân sự cố của một kết nối IP, chung ta nên cố gắng \n\nxác định loại trừ khả năng từ NAT trước. Sau đay là các bước để kiểm tra hoạt \n\nđộng của NAT: \n\n1. Dựa vào tập tin cấu hình, xác định rõ ràng NAT thực hiện những gì. \n\n2. Kiểm tra bảng NAT xem các chuyển đổi địa chỉ có đúng không. \n\n3. Kiểm tra hoạt động NAT xảy ra như thế nào bằng các lệnh show và \n\ndebug. \n\n4. Xem chi tiết những gì xảy ra cho một gói dữ liệu và kiểm tra xem router \n\ncó định tuyến đúng cho gói dữ liệu hay không. \n\n\n\n 503\n\nSử dụng lệnh debug ip nat để kiểm tra hoạt động của NAT, hiển thị các thông tin \n\nvề mỗi gói được chuyển đổi NAT bởi router. Lệnh debug ip nat detal còn cung \n\ncấp thêm một số thông tin liên quan đến sự chuyển của mỗi gói giúp chúng ta xác \n\nđịnh lỗi, ví dụ như lỗi không xác định được địa chỉ đại diện bên ngoài. \n\n \n\nHình 1.1.6 \n\nXét ví dụ hình 1.1.6. Hai dòng đầu tiên cho thấy các gói yêu cầu và trả lời DNS \n\nđược phát đi. Những dòng còn lại cho biết về một kết nối Telnet từ một host bên \n\ntrong tới một host bên ngoài mạng. \n\nĐể giải mã những thông tin hiển thị của lệnh debug, chúng ta dựa vào những điểm \n\nmấu chốt sau: \n\n\u2022 Dấu * kế bên từ NAT cho biết sự chuyển đổi đang được thực hiện trên \n\nđường chuyển mạch nhanh. Gói dữ liệu đầu tiên của một phiên đối thoại \n\nluôn được xử lý chuyển mạch nên chuyển mạch chậm. Các gói dữ liệu tiếp \n\ntheo được truyền chuyển mạch nhanh với bộ đệm, không cần xử lý nhiều \n\nnhư gói đầu tiên. \n\n\n\n 504\n\n\u2022 S= a.b.c.d là địa chỉ nguồn. \n\n\u2022 Địa chỉ nguồn a.b.c.d được dịch sang w.x.y.z. \n\n\u2022 D=e.f.g.h là địa chỉ đích. \n\n\u2022 Giá trị trong giấu ngoặc vuông là chỉ số danh đinh IP. Thông tin này có thể \n\nsẽ hữu dụng vì dựa vào đó chúng ta sẽ tìm được những gói dữ liệu tương \n\nứng được phân tích từ những phần mền phân tích giao thức khác. \n\n1.1.7. Những vấn đề của NAT \n\nNAT có những ưu điểm sau:  \n\n\u2022 Tiết kiệm địa chỉ đăng ký hợp pháp bằng cách cho phép sử dụng địa chỉ \n\nriêng.  \n\n\u2022 Tăng tính linh hoạt của các kết nối ra mạng công cộng. Chúng ta có thể triển \n\nkhai nhiều dải địa chỉ chia tải để đảm bảo độ tin cậy của kết nối mạng công \n\ncộng. \n\n\u2022 Nhất quán hồ sơ địa chỉ mạng nội bộ. Nếu mạng không sử dụng địa chỉ IP \n\nriêng và NAT mà sử dụng địa chỉ công cộng thì khi thay đổi địa chỉ công \n\ncộng, toàn bộ hệ thống mạng phải đặt lại địa chỉ. Chi phí cho việc đặt lại địa \n\nchỉ toàn bộ các thiết bịi mạng nội bộ được giữ nguyên khi thay đổi địa chỉ \n\ncông cộng. \n\nNAT cũng không phải là không có nhược điểm. Khi chuyển đổi địa chỉ như vậy sẽ \n\nlàm mất đi một số chức năng đặc biệt của giao thức và ứng dụng có cần đến các \n\nthông tin địa chỉ IP trong gói IP. Do đó cần phải có thêm các hỗ trợ khác cho thiết \n\nbị NAT. \n\nNAT làm tăng thời gian trễ. Thời gian trễ chuyển mạch sẽ lớn hưon do đó phải \n\nchuyển đổi từng địa chỉ IP trong mỗi dữ liệu. Gói dữ liệu đầu tiên luôn phải sử lý \n\nchuyển mạch nên thời gian chuyển mạch nhanh hơnnếu có bộ đệm. \n\n\n\n 505\n\nHiệu suất hoạt động cũng là một vấn đề cần được quan tâm vì NAT được thực hiện \n\ntrong tiến trình chuyển mạch. CPU phải được kiểm tra từng gói dữ liệu để quyết \n\nđịnh gói dữ liệu đó có cần chuyển đổiđịa chỉ hay không. CPU phải thay đổi phần \n\ngói IP của gói dữ liệu và cũng có htể phải thay cả phần đóng gói TCP hoặc UDP. \n\nMột nhược điểm đáng kể khi sử dụng NAT là sự mất đi khả nặng truy tìm địa chỉ \n\nIP đầu cuối-đến-đầu cuối. Việc truy theo gói dữ liệu sẽ trở nên khó hơn do gói dữ \n\nliệu thay đổi địa chỉ nhiều lần qua nhiều trạm NAT. Hacker sẽ rất khó khăn khi \n\nmuốn xác định địa chỉ nguồn hoặc đích của gói dữ liệu.  \n\nNAT cũng làm cho một số ứng dụng sử dụng địa chỉ IP không hoạt động được vì \n\nnó giấu địa chỉ IP đầu cuối-đến-đầu cuối. Những ứng dụng sử dụng địa chỉ vật lý \n\nthay vì sử dụng tên miền sẽ không đến được đích nằm sau router NAT. Đôi khi, sự \n\ncố này có thể tránh được bằng cách ánh xạ NAT cố định. \n\nCisco IOS NAT hỗ trợ các loại lưu lượng sau: \n\n\u2022 ICMP \n\n\u2022 File Transfer Protocol (FTP), bao gồm lệnh PPRRT và PÁV. \n\n\u2022 Dịch vụ NetBIOS qua TCP/IP, gói dự liệu, tên và phiên giao tiếp. \n\n\u2022 RealNetworks\u2019 RealAudio \n\n\u2022 White Pines\u2019 CUSeeMe \n\n\u2022 Xing Technologies\u2019 StreamWorks \n\n\u2022 DNS \u201cA\u201d and \u201cPTR\u201d queries \n\n\u2022 H.323/Microsoft NetMeeting, IOS versions 12.0(1)/ 12.0(1) T và sau đó. \n\n\u2022 VDOnet\u2019s VDOLive, IOS version 11.3(4)11.3(4)T và sau đó. \n\n\u2022 VXtreme\u2019s Web Theater, IOS versions 11.3(4)11.3(4)T và sau đó. \n\n\u2022 IP Multicast, IOS version 12.0(1)T chỉ chuyển đổi địa chỉ nguồn. \n\nCisco IOS NAT không hỗ trợ các loại giao thức sau: \n\n\n\n 506\n\n\u2022 Thông tin cập nhật bảng định tuyến. \n\n\u2022 Chuyển đổi vùng DNS. \n\n\u2022 BOOTP \n\n\u2022 Giao thức talk and ntalk. \n\n\u2022 Giao thức quản lý mạng đơn giản \u2013 Simple Network Management Protocol \n\n(SNMP) \n\n1.2. DHCP \n\n1.2.1. Giới thiệu DHCP \n\nGiao thức cấu hình họat động (DHCP \u2013 Dynamic Host Configuration Protocol) \n\nlàm việc theo chế độ client-server. DHCP cho phép các DHCP client trong một \n\nmạng IP nhận cấu hình IP của mình từ một DHCP server. Khi sử dụng DHCP thì \n\ncông việc quản lý mạng IP sẽ ít hơn vì phần lớn cấu hình IP của client được lấy về \n\ntừ server. Giao thức DHCP được mô tả trong RFC 2131. \n\nMột DHCP client có thể chạy hầu hết các hệ điều hành Windows, Netvell Netửae, \n\nSun Solaris, Linux và MAC OS. Client yêu cầu server DHCP cấp một địa chỉ cho \n\nnó. Server này quản lý việc cấp phát địa chỉ IP, sẽ gửi trả lời cấu hình IP cho client. \n\nMột DHCP có thể phục vụ cho nhiều subnet khác nhau nhưng không phục vụ cho \n\ncấu hình router, switch và các server khác vì những thiết bị này cần phải có địa chỉ \n\nIP cố định. \n\n \n\n\n\n 507\n\n \n\nHình 1.2.1.a. Client gửi trực tiếp quảng bá một yêu cầu DHCP. Trường hợp đơn \ngiản nhất là có DHCP server nằm trong cùng subnet với client, server DHCP này \nsẽ nhận được gói yêu cầu. Server thấy phần GIADDR bỏ trống thì biết client nằm \ntrong cùng subnet với server. Đồng thời server sẽ đọc địa chỉ vật lý (địa chỉ MAC) \n\ncủa client. \n\n \n\nHình 1.2.1.b. Server sẽ lấy một địa chỉ IP trong dải địa chỉ tương ứng để cấp cho \nclient. Sau đó server dùng địa chỉ của vật lý của client để gửi gói trả lời lại cho \n\nclient. \n\n\n\n 508\n\n \n\nHình 1.2.1.c. Hệ điều hành trên DHCP client sẽ dùng những thông tin nhận được \ntrong gói trả lời server để cấu hình IP cho client đó. \n\nServer chạy DHCP thực hiện tiến trình xác định địa chỉ IP cấp cho client. Client sử \n\ndụng địa chỉ được cấp từ server trong một khoảng thời gian nhất định do người \n\nquản trị mạng quy định. Khi thời này hết hạn thì client phải yêu cầu cấp lại địa chỉ \n\nmới mặc dù thông thường client sẽ vẫn được cấp lại địa chỉ cũ. \n\nCác nhà quản trị mạng thường sử dụng dịch vụ DHCP vì giải pháp này giúp quản \n\nlý hệ thống mạng dễ và có khả năng mở rộng. Cisco  router có thể sử dụng Cisco \n\nIOS có hỗ trợ Easy IP để làm DHCP server. Mặc định , Easy IP cấp cấu hình IP \n\ncho client sử dụng trong 24 tiếng. Cơ chế này rất tiện lợi cho các văn phòng nhỏ \n\nhoặc những văn phòng tại nhà, người sử dụgn tại nhà có thể tận dụng diạhc vụ \n\nDHCP và NAT của router mà không cần phải có thêm một server NT hoặc UNIX. \n\nNgười quản trị mạng cài đặt dải địa chỉ cho DHCP server còn có thể cung cấp \n\nnhiều thông tin khác như địa chỉ DNS server, địa chỉ WINS server và tên miền. \n\nHầu hết các DHCP server đều cho phép người quản trị mạng khai báo những địa \n\nchỉ MAC nào cần phục vụ và tự động cấp cho những địa chỉ MAC này địa chỉ IP \n\nkhông thay đổi mỗi lần chúng yêu cầu. \n\nDHCP sử dụng giao thức UDP (User Datagram Protocol) làm giao thức vận \n\nchuyển của nó. Client gửi thông điệp cho server trên port 67. Server gửi thông điệp \n\ncho client trên port 68.   \n\n\n\n 509\n\n1.2.2. Những điểm khác nhau giữa BOOTP và DHCP \n\nĐầu tiên cộng đồng Internet phát triển giao thức BOOTP để cấu hình cho máy trạm \n\nkhông có ổ đĩa. BOOTP được định nghĩa trong RFC 951 vào năm 1985. Là một \n\nphiên bản đi trước của DHCP nên BOOTP cũng có nhiều đặc điểm họat động \n\ntương tự như DHCP. Cả hai giao thức này đêgu dựa trên cơ sở client-server và sử \n\ndụng port UDP 67, 68. Hai port này hiện vẫn được biết đến như là port BOOTP. \n\nMột cấu hình IP cơ bản bao gồm 4 thông tin sau: \n\n\u2022 Địa chỉ IP. \n\n\u2022 Địa chỉ Gateway. \n\n\u2022 Subnet mask. \n\n\u2022 Địa chỉ DNS server. \n\nBOOTP không tự động cấp phát địa chỉ IP cho một host. Khi client yêu cầu một \n\nđịa chỉ IP, BOOTP server tìm trong bảng đã được cấu hình trước xem có hàng nào \n\ntương ứng với địa chỉ MAC của client hay không.Nếu có thì địa chỉ IP tương ứng \n\nsẽ được cung cấp cho client. Điều này có nghĩa là địa chỉ MAC và địa chỉ IP tương \n\nứng phải được cấu hình trước trên BOOTP server. \n\nSau đây là hai điểm khác nhau cơ bản giữa BOOTP và DHCP: \n\n\u2022 DHCP cấp một địa chỉ IP cho một client trong một khoảng thời gian nhất \n\nđịnh. Hết khoảng thời gian này địa chỉ IP có thể được cấp cho client khác. \n\nClient có thể lấy địa chỉ mới hoặc vẫn có thể tiếp tục giữ địa chỉ cũ. \n\n\u2022 DHCP cung cấp cho client nhiều thông tin cấu hình IP khác như địa chỉ \n\nWINS server, tên miền. \n\n \n\n \n\n\n\n 510\n\nBOOTP DHCP \n\nÁnh xạ cố định giữ địa chỉ MAC và \nđịa chỉ IP \n\nÁnh xạ tự động giữa địa chỉ MAC và \ndải địa chỉ IP tương ứng. \n\nCấp cố định Cấp trong một khoảng thời gian nhất \nđịnh \n\nChỉ cung cấp 4 thông tin cơ bản của \ncấu hình IP \n\nCó thể cung cấp hơn 30 thông tin cấu \nhình IP \n\n1.2.3. Những đỉểm chính của DHCP \n\nCó 3 cơ chế dùng để cấp phaqst một địa chỉ IP cho client: \n\n\u2022 Cấp phát tự động \u2013 DHCP tự động chọn một địa chỉ IP trong dải địachỉ được \n\ncấu hình và cấp địa chỉ IP đó cố định, không thay đổi cho một client. \n\n\u2022 Cấp phát cố định \u2013 Địa chỉ IP của một client do người quản trị mạng quyết \n\nđịnh. DHCP chỉ truyền địa chỉ này cho client đó. \n\n\u2022 Cấp phát động \u2013 DHCP cấp và thu hồi lại một địa chỉ IP của client theo một \n\nkhoảng thời gian giới hạn. \n\nTrong phần này chúng ta tập trung vào cơ chế cấp phát động. Một số thông số cấu \n\nhình được liệt kê trong IÈT RFC 1533 là: \n\n\u2022 Subnet mask \n\n\u2022 Router  \n\n\u2022 Tên miền \n\n\u2022 Server DNS \n\n\u2022 WINS server \n\nChúng ta có thể tạo trên DHCP server nhiều dải địa chỉ IP và thông số như trên \n\ntương ứng. Mỗi một dải địa chỉ dành riêng cho một subnet IP. Điều này cho phép \n\n\n\n 511\n\ncó thể có nhiều DHCP cùng trả lời và IP client có thể di động. Nếu có nhiều server \n\ncùng trả lời thì client có thể chọn một trả lời duy nhất. \n\n \n\nHình 1.2.3 \n\n1.2.4. Họat động của DHCP \n\nQuá trình DHCP client lấy cấu hình DHCP diễn ra theo các bước sau: \n\n1. Client phải có cấu hình DHCP khi bắt đầu tiến trình tìm các thành viên trong \n\nmạng. Client gửi một yêu cầu cho server để yêu cầu cấu hình IP. Đôi khi \n\nclient có thể đề nghị trước địa chỉ IP mà nó muốn, ví dụ như khi nó hết thời \n\ngian sử dụng địa chỉ IP hiện tại và muốn gia hạn thêm thời gian. Client sẽ \n\nxác định được DHCP server bằng cách gửi gói quảng bá gọi là \n\nDHCPDISCOVER. \n\n2. Khi server nhận được gói quảng bá, nó sẽ tìm trong cơ sở dữ liệu của nó và \n\nquyết định là có trả lời được yêu cầu này không. Nếu server không trả lời \n\nyêu cầu thì nó sẽ gửi gói trả lời trực tiếp bằng DHCPOFFER về cho client, \n\ntrong đó mời client sử dụng cấu hình IP của server. Trong DHCPOFER có \n\n\n\n 512\n\nthể có các thôngtin cho client về địa chỉ IP, địa chỉ DNS server và thời gian \n\nsử dụng địa chỉ này. \n\n3. Nếu client nhận thấy lời mời của server phù hợp thì nó sẽ gửi quảng bá một \n\nDHCPREQUEST để yêu cầu cung cấp những thông cố cụ thể của cấu hình \n\nIP. Tại sao lúc này client lại gửi quảng bá mà nó không gửi trực tiếp cho \n\nserver? Do thông điệp đầu tiên là DHCPDISCOVER đã được gửi quảng bá \n\nnên thông điệp này có thể sẽ đến được nhiều server DHCP khác nhau. Khi \n\nđó, có thể sẽ có nhiều server cùng mời một client chấp nhận. Thông thường \n\nlời mời mà client nhận được đầu tiên sẽ được chấp nhận. \n\n4. Server nào nhận được DHCPREQUEST cho biết client đã chấp nhận sử \n\ndụng cấu hình IP mà server đã mời thì server đó sẽ gửi trả lời trực tiếp cho \n\nclient một gói DHCPACK. Rất hiếm khi nhưng cũng có thể server sẽ không \n\ngửi DHCPACK vì có thể cấu hình IP đó đã được cấp cho client khác rồi. \n\n5. Sau khi client nhận được DHCPACK thì có thể bắt đầu sử dụng địa chỉ IP \n\nngay. \n\n6. Nếu client phát hiện rằng địa chỉ IP này đã được sử dụng trong cùng mạng \n\nnội bộ với nó thì client sẽ gửi thông điệp DHCPDECLINE và bắt đầu tiến \n\ntrình DHCP lại từ đầu. Hoặc nếu client nhận được thông điệp DHCPNAK từ \n\nserver trả lời cho thông điệp DHCPREQUEST thì sau đso client cũng bắt \n\nđầu tiến trình lại từ đầu. \n\n7. Nếu client không cần sủ dụng địa chỉ IP này nữa thì client guiử thống điệp \n\nDHCPRELEASE cho server. \n\n\n\n 513\n\n \n\nHình 1.2.4.a. Tiến trình hoạt động DHCP \n\n \n\nTùy theo quy định của mỗi tổ chức, công ty, người quản trị mạng có thể cấp cố \n\nđịnh cho một địa chỉ IP nằm trong dải địa chỉ của một DHCP server. Cisco IOS \n\nDHCP server luôn luôn phải kiểm tra một địa chỉ IP đã được sử dụng trong mạng \n\nhay chưa trước khi mời client sử dụng địa chỉ IP đó. Server sẽ phát một yêu cầu \n\nICMP echo, hay còn gọi là ping, đến các địa chỉ IP nằm trong dải địa chỉ của mình \n\ntrước khi gửi DHCPOFFER cho client. Số lượng ping mặc định được sủ dụng để \n\nkiểm tra một địa chỉ IP là 2 gói và chúng ta có thể cấu hình con số này được. \n\n \n\nHình 1.2.4.b. Thứ tự các thông điệp DHCP được gửi đi trong tiến trình DHCP. \n\n\n\n 514\n\n1.2.5. Cấu hình DHCP \n\nTương tự như NAT, DHCP server cũng yêu cầu người quản trị mạng phải khai báo \ntrước dải địa chỉ. Câu lệnh ip dhcp pool dùng để khai báo dải địa chỉ  mà server có \nthể cấp pháp cho host. \n\nCâu lệnh đầu tiên, ip dhcp pool, tạo dải địa chỉ với một tên cụ thể và đặt router \n\nvào chế độ cấu hình DHCP. Trong chế độ cấu hình DHCP, lệnh network được \n\ndùng để xác định dải địa chỉ được cấp phát. Nếu trong mạng đã có sử dụng cố định \n\nmột số địa chỉ IP nằm trong dải đã khai báo thì chúng ra quay trở lại chế độ cấu \n\nhình toàn cục. \n\nChúng ra sử dụng lệnh ip dhcp excluded-address để cấu hình cho Router loại trừ \n\nmột số hoặc một dải địa chỉ khi phân phối địa chỉ cho client. Những địa chỉ dành \n\nriêng này thường được cấu hình cố định cho những host quan trọng và cho các \n\ncổng của Router. \n\n \n\nHình 1.2.5. Cấu hình ví dụ một DHCP server trên router \n\nThông thường, chúng ta còn có thể cấu hình thêm nhiều thông tin khác ngoài thông \n\ntin về địa chỉ IP cho một DHCP server. Trong chế độ cấu hình DHCP, chúng ta \n\ndùng lệnh default-router để khai báo cổng mặc định gateway, lệnh dns-server để \n\nkhai báo địa chỉ của DNS server, lệnh netbios-name-server dùng để khai báo cho \n\nWINS server. \n\n\n\n 515\n\nDịch vụ DHCP được chạy mặc định trên các phiên bản Cisco IOS có hỗ trợ dịch \n\nvụ này. Để tẳt dịch vụ này, chúng ta dùng lệnh no service dhcp và dùng lệnh ip \n\nservice dhcp để chạy lại dịch vụ này. \n\nLệnh Giải thích \n\nnetwork \n\nnetwork-number \n\n[mask / \n\n/prefix-length] \n\nKhai báo địa chỉ mạng và subnet mask tương ứung cho dải \n\nđịa chỉ DHCP. Chiều dài bit thuộc phần network có thể \n\nđược khai báo bằng subnet mask hoặc bằng con số thể \n\nhiện số lượng bit, con số này luôn có dấu xổ phải (/) đứng \n\ntrước. \n\nDefault-router \n\nAddresss \n\n[address2 \u2026 \n\nAddress8] \n\nKhai báo địa chỉ của cổng mặc định gateway cho DHCP \n\nclient. Mặc dù chỉ cần một địa chỉ những trong cấu lệnh \n\nnày bạn có thể khai báo tới 8 địa chỉ.  \n\nDns-server \n\nAddress \n\n[address2 \u2026 \n\nAddress8] \n\nKhai báo địa chỉ của DNS server cho DHCP client. Mặc \n\ndù chỉ cần một địa chỉ những trong câu lệnh này bạn có \n\nthể khai báo tối đa 8 địa chỉ. \n\nNetbios-name- \n\nServer address \n\n[address2\u2026 \n\nKhai báo địa chỉ NetBios WINS server cho các Microsoft \n\nDHCP client. Mặc dù chỉ cần một địa chỉ những trong câu \n\nlệnh này bạn có thể khai báo tới 8 địa chỉ. \n\n\n\n 516\n\nAddress8] \n\nDomain-name \n\nName \n\nKhai báo tên miền cho client. \n\nLease [days \n\n[hours} \n\n[minutes] / \n\ninfinite] \n\nKhai báo khoảng thời gian cho phép client được sử dụng \n\nmột địa chỉ IP. Thời gian mặc định là một ngày. \n\n1.2.6. Kiểm tra hoạt động DHCP \n\nĐể kiểm tra họat động DHCP, bạn dùng lệnh show ip dhcp binding. Lệnh này sẽ \n\nhiển thị danh sách các địa chỉ IP đã được dịch vụ DHCP cấp phát cho các host nào \n\ntương ứng. \n\nĐể xem các thông điệp DHCP mà router đã gửi đi và nhận vào, chúng ta dùng lệnh \n\nshow ip dhcp server statistics. Lệnh này sẽ hiển thị các thông tin về số lượng các \n\nthông điệp DHCP mà Router đã gửi đi và nhận vào. \n\n \n\n \n\nHình 1.2.6 \n\n1.2.7. Xử lý sự cố DHCP \n\n\n\n 517\n\nĐể xử lý sự cố của họat động DHCP server chúng ta có thể dùng lệnh debug ig \n\ndhcp server events. Lệnh này sẽ cho biết chu kỳ kiểm tra của server để xem địa \n\nchỉ IP nào đã hết thời hạn được sử dụng và tiến trình lấy lại hoặc cấp phát một địa \n\nchỉ IP. \n\n \n\nHình 1.2.7. \n\n \n\n1.2.8. Chuyển tiếp DHCP \n\nDHCP client sử dụng IP quảng bá để tìm DHCP server trong mạng nội bộ. Điều gì \n\nsẽ xảy ra khi server và client không nằm trong cùng một mạng và bị ngăn cách \n\nnhau bởi Router? Router không hề chuyển tiếp gói quảng bá. \n\nDHCP không phải là một dịch vụ quan trọng duy nhất sử dụng quảng bá Cisco \n\nrouter và các thiết bị khác cũng sử dụng quảng bá để tìm TFTP server. Một số \n\nclient cần sử dụng quảng bá để tìm TACACS server. TACACS server là một \n\nserver bảo vệ. Thông thường, trong cấu trúc mạng phân cấp phức tạp, client này \n\nphát quảng bá để tim server thì mặc định là router sẽ không chuyển các gói quảng \n\nbá ra ngoài subnet của client. \n\nTuy nhiên có nhiều client sẽ không thể hoạt động được nếu không có những dịc vụ \n\nnhư DHCP chẳng hạn, khi đó phải chon lựa một trong hai giải pháp. Người quả trị \n\nmạng có thể đặt server cho mọi subnet trong mạng hoặc là sử dụng đặc tính giúp \n\n\n\n 518\n\nđỡ địa chỉ của Cisco IOS. Việc chạy các dich vụ như DHCP hay DNS trên nhiều \n\nmáy tính sẽ tạo sự quá tải và khó quản trị nên giải pháp đầu không hiệu quả. Nếu \n\ncó thể thì người quản trị mạng nên sử dụng giải pháp thứ hai là dùng lệnh ip \n\nhelper-address để chuyển tiếp yêu cầu quảng bá cho những dịch vụ UDP quan \n\ntrọng này. \n\nKhi sử dụng đặc tính giúp đỡ địa chỉ, router sẽ có thể được cấu hình để tiếp nhận \n\nyêu cầu quảng bá của một dịch vụ UDP và sau đó chuyển tiếp yêu cầu đó một cách \n\ntrực tiếp đến một địa chỉ IP cụ thể. Mặc định, lệnh ip helper-address có thể cho \n\nphép chuyển tiếp yêu cầu của 8 dịch vụ UDP sau: \n\n\u2022 Time \n\n\u2022 TACES \n\n\u2022 DNS \n\n\u2022 BOOTP/DHCP server \n\n\u2022 BOOTP/DHCP client \n\n\u2022 TFTP \n\n\u2022 Dịch vụ NetBIOS name \n\n\u2022 Dịch vụ NetBIOS datagram \n\nChúng ta xét cụ thể dịch vụ DHCP, client phát quảng bá gói DHCPDISCOVER ra \n\nmạng nội bộ của nó. Gói quảng bá này sẽ đến được Gateway chính là router. Nếu \n\ntrên router có cấu hình lệnh ip helper-address thì gói DHCP này sẽ dược chuyển \n\ntiếp cho một địa chỉ IP xác định. Trước khi chuyển tiếp gói yêu cầu này, Router sẽ \n\nđiền địa chỉ của cổng Router kết nối với client vào phần GIADDR của gói \n\nDHCPDISCOVER. Địa chỉ này sẽ là địa chỉ Gateway cho DHCP client sau khi \n\nclient lấy được địa chỉ IP. \n\n\n\n 519\n\nDHCP server nhận được gói DHCPDISCOVER. Đựa vào địa chỉ nằm trong phần \n\nGIADDR server sẽ xác định được Gateway này tương ứng với dải địa chỉ nào. Sau \n\nđó server sẽ lấy một địa chỉ IP còn trống trong dải để cấp cho client. \n\n \n\nHình 1.2.8.a. Cấu trúc gói DHCP \n\n \n\nHình 1.2.8.b. Chuyển tiếp DHCP \n\n\n\n 520\n\n \n\nHình 1.2.8.c. Client A gửi quảng bá DHCPDISCOVER và router chuyển tiếp yêu \ncầu này cho server DHCP 192.168.2.254. Trước khi chuyển tiếp yêu cầu này \n\nrouter điền địa chỉ của cổng kết nối với client A là 192.168.1.1 vào phần GIADDP \ncủa gói DHCPDISCOVER. \n\n \n\nHình 1.2.8.d. DHCP server nhận được gói yêu cầu DHCP từ router. Dựa vào địa \nchỉ 192.168.1.1 trong phần GIADDR, server sẽ xác định được client A nằm trong \nsubnet nào và chọn một địa chỉ IP còn trống trong giải địa chỉ tương ứng để cấp \ncho client A.. Trong gói trả lời của DHCP server chúng ta thấy client A được cấp \n\nđịa chỉ 192.168.1.10. \n\n\n\n 521\n\n \n\nTỔNG KẾT \n\nSau đây là những điểm quan trọng cần nắm trong chương này: \n\n\u2022 Địa chỉ riêng được sử dụng cho các mạng riêng, nội bộ và không bao giờ \n\nđược định tuyến trên các Router Internet công cộng. \n\n\u2022 NAT thay đổi phần IP header của gói dữ liệu để chuyển đổi địa chỉ nguồn \n\nhoặc đích hoặc cả hai. \n\n\u2022 PAT sử dụng một địa chỉ IP công cộng duy nhất cùng với số port để ánh xạ \n\ncho nhiều địa chỉ nội bộ bên trong. \n\n\u2022 Chuyển đổi NAT có thể được thực hiện cố định hoặc tự động tùy theo mục \n\nđích sử dụng. \n\n\u2022 NAT và PAT có thể được cấu hình để chuyển đổi cố định, chuyển đổi động \n\nvà chuyển đổi overloading. \n\n\u2022 Lệnh clear và show được sử dụng để kiểm tra họat động của NAT và PAT. \n\n\u2022 Lệnh debug ip nat được sử dụng để tìm sự cố của cấu hình NAT và PAT. \n\n\u2022 Những ưu điểm và nhược điểm của NAT \n\n\u2022 DHCP làm việc theo chế độ client-server, cho phép client lấy cấu hình IP từ \n\nmột DHCP server. \n\n\u2022 BOOTP là một phiên bản trước của DHCP và cũng có nhiều đặc điểm họat \n\nđộng giống DHCP nhưng BOOTP chỉ cấp phát địa chỉ cố định. \n\n\u2022 DHCP server quản lý dải địa chỉ IP và các thông số tương ứng kèm theo. \n\nMỗi một dải địa chỉ tương ứng với một subnet IP. \n\n\u2022 DHCP client thực hiện 4 bước để lấy cấu hình IP từ server. \n\n\u2022 DHCP server thường được cấu hình để phân phối nhiều địa chỉ IP. \n\n\u2022 Lệnh show ip dhcp binding dùng để kiểm tra họat động của DHCP. \n\n\n\n 522\n\n\u2022 Lệnh debug ip dhcp server events được dùng để tìm sự cố của DHCP. \n\n\u2022 Khi DHCP server và client không nằm trong cùng một mạng và bị ngăn cách \n\nbởi Router, chúng ta dùng lệnh ip helper-address để router chuyển tiếp yêu \n\ncầu DHCP.  \n\n \n\n2.2. Các công nghệ WAN  \n\n2.2.1.Kênh quay số (dial-up) \n\n \n\n Hình 2.2.1. Kết nối WAN thông qua modem và mạng điện thoại. \n\nModem và đường điện thoại quay số dùng tín hiệu tương tự cung cấp kết nối \n\nchuyển mạch, dung lượng thấp, phù hợp cho nhu cầu truyền dữ liệu tốc độ thấp, rẻ \n\ntiền. \n\nĐiện thoại truyền thống sử dụng cáp đồng kết nối từ máy điện thoại của thuê bao \n\nđến tổng đài mạng điện thoại chuyển mạch công cộng (PSTN \u2013 Public switched \n\ntelephone network). Tín hiệu truyền đi trên đường truyền này là tín hiệu tương tự \n\nbiến đổi liên tục để truyền tiếng nói. Do đó, đường truyền này không phù hợp với \n\ntín hiệu số nhị phân của máy tính. Modem tại đầu phát phải thực hiện điều chế tín \n\nnhị phân sang tính hiệu tương tự rồi mới đưa tín hiệu xuống đường truyền. Modem \n\ntại đầu thu giải điều chế tín hiệu tương tự thành tín hiệu nhị phân như ban đầu. \n\n\n\n 523\n\n \n\nĐặc điểm vật lý của đường truyền và kết nối PSTN khiến tốc độ của tín hiệu bị hạn \n\nchế. Giới hạn trên khoảng 33 kb/giây. Tốc độ này có thể tăng lên khoảng 56 \n\nkb/giây nếu tín hiệu được truyền trực tiếp qua một kết nối số. \n\nĐối với nhưng doanh nhiệp nhỏ thì đường truyền này phù hợp vì họ chỉ cần trao \n\nđổi các thông tin về bảng lương, giá cả, các báo cáo thông thường và email. Hơn \n\nnữa, họ có thể sử dụng cách quay số tự động vào ban đêm hoặc vào ngày nghỉ cuối \n\ntuần để truyền tải dữ liệu có dung lượng lớn và lưu dữ liệu dự phòng, vì trong \n\nnhưng khoảng thời gian này mức giá cước thấp hơn bình thường. Tổng chi phí \n\ncước phụ thuộc và khoảng cách giữa các điểm kết nối, thời gian trễ và thời gian \n\nthực hiện cuộc gọi. \n\nƯu điểm của modem và đường truyền tương tự là thực hiện đơn giản ở mọi nơi, \n\nchi phí thấp. Nhược điểm là tốc độ thấp, thời gian thực hiện kết nối lâu, có thời \n\ngian trễ và nghẽn mạch, việc truyền thoại và video không được tốt với tốc độ thấp \n\nnhư vậy. \n\n2.2.2. ISDN \n\nCác đường trung kế của PSTN được thay đổi từ tín hiệu tương tự phân kênh theo \n\ntần số sang tín hiệu số phân kênh theo thời gian (TDM). Bước tiếp theo là mạch \n\nvọng nội bộ kết nối từ tổng đài đến thuê bao cũng truyền tín hiệu số. Do đó, đường \n\ntruyền này có dung lượng cao hơn. \n\nISDN (Integrated Services Digital Network) là kết nối số TDM. Kết nối này sử \n\ndụng các kênh B (Bearer) 64 Kb/giây để truyền thoại hoặc dữ liệu và một kênh báo \n\nhiệu D (Delta) dùng để thiết lập cuộc gọi và nhiều mục đích khác. \n\n \n\n\n\n 524\n\nGiao tiếp tốc độ cơ bản BRI ISDN cung cấp hai kênh B 64 Kb/giây và một kênh D \n\n16 Kb/giây phù hợp cho cá nhân, gia đình và các công ty nhỏ. Nếu nhu cầu lớn hơn \n\nnữa thì chúng ta có giao tiếp PRI ISDN. PRI cung cấp 23 kênh B 64 Kb/giây và \n\nmột kenh Điểm 64 Kb/giây ở Bắc Mỹ, tổng tốc độ bit lên tới 1.544 Mb/giây. Ở \n\nChâu Âu, Australia và nhiều nơi khác trên thế giới, ISDN PRI cung cấp 30 kênh B \n\nvà một kênh D, tổng tốc độ bit lên tới 2,048 Mb/giây. Kết nối T1 có tốc độ PRI ở \n\nBắc Mỹ, kết nối E1 có tốc độ PRI quốc tế. \n\nKênh Điểm BRI không được tận dụng hết khả năng vì nó chỉ được sử dụng để điều \n\nkhiển cho 2 kênh B. Một số nhà cung cấp dịch vụ cho phép kênk D truyền dữ liệu \n\nở tốc độ thấp, ví dụ như kết nối X.25 với tốc độ 9,6 kb/giây. \n\nĐối với mạng WAN nhỏ thì kết nối BRI ISDN là một kết nối lý tưởng . BRI có \n\nthời gian thiết lập cuộc gọi nhỏ hơn một giây, kênh B 64 kb/giây cung cấy dung \n\nlượng lớn hơn một kết nối tương tự với modem. Nếu nhu cầu dung lương cao hơn \n\nthì kênh B thứ 2 sẽ được kích hoạt để cung cấp tốc độ 128 kb/giây. Mặc dù như \n\nvậy vẫn chưa phù hợp cho truyền video nhưng cũng đã cho phép thực hiện cùng \n\nlúc nhiều cuộc đối thoại cùng với các luồng lưu lượng khác. \n\n \n\n \n\nHình 2.2.a. ISDN \n\n \n\n\n\n 525\n\nMột ứng dụng thông thường của ISDN là cung cấp thêm dung lượng truyền cho \n\nđường truyền thuê riêng. Đường truyền thuê riêng được sử dụng chính, trong \n\nnhững thời điểm nhu cầu dung lượng tăng cao thì ISDN được kích hoạt để hỗ trợ \n\nthêm. Ngoài ra, ISDN còn được sử dụng làm đường truyền dự phòng trong trường \n\nhợp đường truyền thuê riêng gặp sự cố. Chi phí cước của ISDN được tính trên từng \n\nkênh B và cũng tương tự như kết nối thoại quay số. \n\nVới PRI ISDN, ta có thể kết nối hai điểm với nhau bằng nhiều kênh B. Do đó, ta \n\ncó thể thực hiện được hội nghị truyền hình (video conference), kết nối dữ liệu tốc \n\nđộ cao, không có thời gian trễ và nghẽn mạch, nhưng chi phí sẽ cao khi khoảng \n\ncách giữa các điểm khá lớn \n\n \n\nHình 2.2.2.b. Cấu trúc chung của mạng WAN với ISDN, Router cần phải có cổng \ngiao tiếp ISDN hoặc phải kết nối thông qua bộ chuyển đổi giao tiếp. \n\n2.2.3.Đường truyền thuê riêng (leased line) \n\nKhi cần phải có một kết nối dành riêng cố định thì sử dụng đường truyền thuê \nriêng với dung lượng có thể lên tới 2,5 Gb/giây. \n\n\n\n 526\n\n \n\nLoại Chuẩn Dung lượng \n\n56 DS0 56 Kbps \n\n64 DS0 64 Kbps \n\nT1  DS1  1.544 Mbps  \n\nE1 ZM 2.048 Mbps \n\nE3 M3 34.064 Mbps \n\nJ1 Y1  2.048 Mbps \n\nT3 DS3 44.736 Mbps \n\nOC-1 SONET 51.84 Mbps \n\nOC-3 SONET 155.54 Mbps \n\nOC-9 SONET 466.56 Mbps \n\nOC-12 SONET 622.08 Mbps \n\nOC-18 SONET 933.12 Mbps \n\nOC-24 SONET 1244.16 Mbps \n\nOC-36 SONET 1866.24 Mbps \n\nOC-48 SONET 2488.32 Mbps \n\n Hình 2.2.3.a. Các đường truyền WAN và băng thông tương ứng. \n\n \n\nMột kết nối điểm-đến-điểm thiết lập một đường truyền WAN từ vị trí của thuê bao \n\nthông qua mạng của nhà cung cấp dịch vụ đến điểm đích. Đườn truyền điểm-đến-\n\nđiểm này thườn được thuê từ nhà cung cấp dịch vụ nên được gọi là đường truyền \n\nthuê riêng. Đường truyền thuê riêng có thể được cung cấp với nhiều mức dung \n\n\n\n 527\n\nlượng khác nhau. Giá cả phụ thuộc vào mức băng thông yêu cầu và khoảng cách \n\ngiữa hai điểm kết nối. Đương nhiên, giá thuê một đường truyền riêng điểm-đến-\n\nđiểm sẽ cao hơn nhiều so với các đường chia sẻ khác như Frame Relay. Đôi khi chi \n\nphí cho đường thuê riêng quá cao so với nhu cầu mà ta sử dụng được. Chi phí này \n\nsẽ hiệu quả hơn nếu các kết nối này được sử dụng để nối nhiều vị trí trung tâm. \n\nDung lượng cố định có ưu điểm là không có thời gian trễ và nghẽn mạch giữa hai \n\nđiểm cuối, phù hợp cho nhiều ứng dụng như thương mại điện tử. \n\n \n\nĐể thực hiện kết nối thuê riêng ta cần phải có CSU/DSU và đường truyền từ \n\nnhà cung cấp dịch vụ, router phải có cổng Serial, mỗi cổng tương ứng với một kết \n\nnối. \n\n \n\nHình 2.3.b. Mạng WAN với đường truyền thuê riêng. \n\nĐường kết nối trực tiếp thường được sử dụng để kết nối giữa các toà nhà, cung cấp \n\ndung lượng truyền cố định. Đường truyền thuê riêng là một chọn lựa truyền thống \n\ntừ trước tới nay, tuy nhiên nó cũng có nhiều nhược điểm. Lưu lượng WAN luôn \n\nbiến đổi nhưng dung lượng đường truyền cố định. Do đó, băng thông đường truyền \n\nít khi nào bằng với lưu lượng thực tế. Mỗi router tại mỗi điểm cuối cần phải có một \n\n\n\n 528\n\ncổng Serial cho một kết nối, do đó chi phí cho thiết bị sẽ tăng thêm. Mỗi lần muốn \n\nthay đổi dung lượng đường truyền ta cần phải liên hệ với nhà cung cấp dịch vụ. \n\nĐường truyền thuê riêng cung cấp kết nối trực tiếp điểm-đến-điểm giữa các LAN \n\nvà kết nối nhiều chi nhánh riêng lẻ vào mạng chuyển mạch gói. \n\n2.2.4.X.25 \n\nDo đường truyền thuê riêng có chi phí cao nên các nhà cung cấp dịch vụ đã giới \n\nthiệu mạng chuyển mạch gói sử dụng đường truyền chia sẻ để giảm bớt chi phí. \n\nMạng chuyển mạch gói đầu tiên là mạng X.25. X.25 cung cấp tốc độ bit thấp, dung \n\nlượng chia sẻ qua dịch vụ chuyển mạch hoặc cố định. \n\nX.25 là một giao thức lớp Mạng và các thuê bao được cung cấp một địa chỉ mạng. \n\nKhi có yêu cầu từ một tập hợp các địa chỉ, mạch ảo SVC sẽ được thiết lập, mỗi \n\nSVC được phân biệt bằng một địa chỉ số kênh. Các gói dữ liệu được dán nhãn theo \n\nchỉ số kênh này, dựa vào đó các gói dữ liệu được truyền đến đúng địa chỉ mạng \n\nđích. Trên một kết nối vật lý có thể thiết lập nhiều kênh truyền. \n\nThuê bao có thể kết nối vào mạng X.25 bằng kết nối thuê riêng hoặc bằng kết nối \n\nquay số. Mạng X.25 cũng có thể cung cấp kênh truyền cố định PVC cho các thuê \n\nbao. \n\n\n\n 529\n\n \n\nHình 2.2.4. Mạng X25 \n\n \n\nX.25 có chi phí thấp và hiệu quả vì chi phí cước được tính theo lưu lượng dữ liệu \n\nchứ không tính theo thời gian kết nối và khoảng cách của kết nối. Dữ liệu được \n\ntruyền đi với bất kỳ tốc độ nào lên tới mức độ tối đa của đường truyền. Nhưng \n\nmạng X.25 thường có dung lượng thấp, tối đa là 48 Kb/giây. Ngoài ra thời gian \n\ntruyền gói dữ liệu cũng bị trễ do đặc trưng của mạng chia sẻ. \n\nCông nghệ X.25 từ lâu đã không còn được sử dụng rộng rãi. Frame Relay đã thay \n\nthế cho X.25 \n\nỨng dụng thường thấy của X.25 là trên các máy đọc thẻ tín dụng. Tại các trung \n\ntâm thương mại, siêu thị, khi khach hàng sử dụng thẻ để thanh toán thì các máy \n\nđọc thẻ sẽ sử dụng X.25 để liên hệ với máy tính trung tâm xác định giá trị của thẻ, \n\nthực hiện giao dịch thanh toán. Một số công ty còn sử dụng X.25 trên mạng VAN ( \n\nValue-add network). VAN là một mạng riêng được các công ty thuê từ nhà cung \n\ncấp dịch vụ để thực hiện trao đổi dữ liệu về tài chính và nhiều thông tin thương mại \n\n\n\n 530\n\nkhác. Đối với những ứng dụng này, băng thông thấp và thời gian trễ cao không \n\nphải là vấn đề lớn, trong khi đó chi phí thấp lại là một ưu điểm của X.25. \n\n2.2.5. Frame Relay. \n\nDo nhu cầu băng thông ngày càng cao và yêu cầu thời gian chuyển mạch gói nhanh \n\nhơn, nhà cung cấp dịch vụ đã giới thiệu Frame Relay, Frame Relay cũng hoạt động \n\nnhư X.25 nhưng có tốc độ cao hơn, lên đến 4 Mb/giây hoặc hơn nữa. \n\nFrame Relay có một số đặc điểm khác với X.25. Trong đó, điểm khác biệt quan \n\ntrọng nhất là: Frame Relay là giao thức đơn giản hơn, hoạt động ở lớp liên kết dữ \n\nliệu thay vì ở lớp Mạng. \n\nFrame Relay không thực hiện điều khiển luồng và kiểm tra lỗi. Do đó, thời gian trễ \n\ndo chuyển mạch frame giảm đi. \n\n \n\nHình 2.2.5. Mạng Frame Relay \n\n \n\nHầu hết các kết nối Frame Relay đều là kết nối PVC, chứ không phải là SVC. Kết \n\nnối từ mạng của khách hàng vào mạng của nhà cung cấp dịch vụ thường là kết nối \n\nthuê riêng hoặc cũng có thể là kết nối quay số nếu nhà cung cấp dịch vụ có sử dụng \n\nđường ISDN, Kênh D ISDN được sử dụng để thiết lập kết nối SVC trên một hay \n\n\n\n 531\n\nnhiều kênh B. Giá cước Frame Relay được tính theo dung lượng kết nối và dung \n\nlượng thoả thuận trên các PVC> \n\nFrame Relay cung cấp kết nối chia sẻ có băng thông truyền cố định, có thể truyền \n\nđược cả tiếng nói. Frame Relay là một chọn lựa lý tưởng cho kết nối giữa các \n\nLAN. Router trong LAN chỉ cần một cổng vật lý, trên đó cầu hình nhiều kết nối ảo \n\nVC. Kết nối thuê riêng để kết nối vào mạng Frame Relay khá ngắn nên chi phí \n\ncũng tương đối hiệu quả khi nối giữa các LAN. \n\n2.2.6. ATM \n\nCác nhà cung cấp dịch vụ đã nhìn thấy nhu cầu cần phải có công nghệ cung cấp \nmạng chi sẻ cố định với thời gian trễ thấp, ít nghẽn mạch và băng thông cao. Giải \npháp của họ chính  là ATM (Asychronous Transfer Mode) với tốc độ 155 Mb/giây. \nSo với các công nghệ chia sẻ khác như X.25, Frame Relay thì sơ đồ mạng WAN \nATM cũng tương tự. \n\n \n\nHình 2.2.6. ATM. \n\nATM là một công nghệ có khả năng truyền thoại, video và dữ liệu thông qua mạng \nriêng và mạng công cộng. ATM được xây dựng dựa trên cấu trúc tế bào (cell) chứ \nkhông dựa trên cấu trúc frame. Gói dữ liệu được truyền đi trên mạng ATM không \nđược gọi là frame mà gọi là tế bào (cell). Mỗi tế bào ATM luôn có chiều dài cố \nđịnh là 53 byte. Tế bào ATM 53 byte này chứa 5 byte phần ATM header, tiếp theo \n\n\n\n 532\n\nsau là 48 byte của phần dữ liệu. Tất cả các tế bào ATM đều có kích thước nhỏ, cố \nđịnh như nhau. Do đó, không có các gói dữ liệu khác lơn hơn trên đường truyền, \nmọi tế bào đều không phải chờ lâu. Thời gian truyền của mỗi gói là như nhau. Do \nđó, các gói đến đích cách nhau đều đặn, không có gói nào đến quá chậm so với gói \ntrước. Cơ chế này rất phù hợp cho truyền thoại và video vì những tín hiệu này vốn \nrất nhạy cảm với vấn đề thời gian trễ. \n\nSo với các frame lơn hơn của Frame Relay và X.25 thì tế bào ATM 53 byte không \nđược hiệu quả bằng. Khi có một packet lớn của lớp Mạng cần phải phân đoạn nhỏ \nhơn thì cữ mỗi 48 byte phải có 5 byte cho phần ATM header. Công việc ráp các \nphân đoạn lại thành packet ban đầu ở ATM switch đầu thu sẽ phức tạp hơn. Hơn \nnữa, việc đóng gói như vậy làm cho đường truyền ATM phải tốn nhiều hơn 20% \nbăng thông so với Frame Relay để truyền cùng một lượng dữ liệu lớp Mạng. \n\nATM cung cấp cả kết nối PVC và SVC mặc dù PVC được sử dụng nhiều hơn \ntrong WAN. Cũng như các công nghệ chia sẻ khác, ATM cho phép thiết lập kết nối \nảo trên một kết nối vật lí. \n\n2.2.7. DSL \n\nDigital Subscriber Line \u2013 DSL là một công nghệ truyền băng rộng sử dụng đường \ntruyền hai dây xoắn của hệ thống điện thoại để truyền dữ liệu với băng thông lớn \nđến thuê bao dùng dịch vụ. Kỹ thuật truyền băng rộng ghép nhiều dải tần số khác \nnhau trên cùng một đường truyền vật lý để truyền dữ liệu xDSL bao gồm các công \nnghệ DSL như sau: \n\n Asymmetric DSL (ADSL) \n\n Symmetric DSL (SDSL) \n\n High Bit Rate DSL (HDSL) \n\n ISDN DSL (IDSL) \n\n Consumer DSL (CDSL), cũng được gọi là DSL-lite hay G.lite \n\n \n\n\n\n 533\n\n \n\nHình 2.2.7.a. \n\n \n\nVới công nghệ DSL, các nhà cung cấp dịch vụ có thế cung cấp cho khách hàng \ndịch vụ mạng tốc độ cao trên đường dây thoại cáp đồng. Công nghệ DSL cho phép \nđường dây này thực hiện song song đồng thời chức năng của một kết nối điện thoại \nvà một kết nối mạng thường trực cố định. Nhiều kết nối của thuê bao DSL được \nghép kênh vào một đường kết nối có dung lượng cao tại trung tâm cung cấp dịch \nvụ thông qua thiết bị ghép kênh truy cập DSL (DSLAM \u2013 DSL Access \nMultiplexer). Nhiều kết nối DSL của thuê bao được DSLAM tích hợp vào một kết \nnối T3/DS3 duy nhất. Các công nghệ DSL hiện nay sử dụng nhiều kỹ thuật mã hoá \nvà điều chế phức tạp để đạt được tốc độ dữ liệu lên đến 8,192 Mb/giây. \n\nKênh truyền thoại chuẩn trên đường dây điện thoại nằm trong dải tần 300 Hz đến \n3,3 KHz. Như vậy, dải tần số 4 KHz được dành để truyền thoại trên đường dây \nđiện thoại. Công nghệ DSL sử dụng dải tần cao hơn 4 KHz để truyền tải dữ liệu. \nBằng cách này thoại và dữ liệu có thể được truyền tải song song đồng thời trên \ncùng một đường truyền. \n\n \n\n\n\n 534\n\nHình 2.2.7.b. Mạch vòng nội bộ của hệ thống điện thoại kết nối modem DSL của \ntừng thuê bao đến DSLAM đặt tại trung tâm cung cấp dịch vụ. Thoại và dữ liệu sử \n\ndụng hai dải tần số riêng biệt. \n\n \n\nCó 2 loại công nghệ DSL cơ bản là ADSL (Asymmetric DSL \u2013 DSL bất đối xứng) \nvà SDSL (Symmetric DSL \u2013 DSL đối xứng). Dịch vụ bất đối xứng cung cấp kênh \ntải dữ liệu (download) lớn hơn kênh truyền dữ liệu (upload). Dịch vụ đối xứng \ncung cấp cả hai kênh truyền này có dung lượng như nhau. \n\nKhông phải tất cả các công nghệ DSL đều cho phép sử dụng đường dây điện thoại. \nVí dụ SDSL không cung cấp dịch vụ điện thoại trên cùng một đường truyền. Do đó \nphải có riêng một đường truyền cho SDSL. \n\nCác loại DSL khác nhau cung cấp băng thông khác nhau với dung lượng có thể \nvượt qua đường thuê riêng T1 hoặc E1. Tốc độ truyền phụ thuộc vào chiều dài thực \ntế của mạch vòng nội bộ, loại cáp và điều kiện đi dây cáp. Để dịch vụ được cung \ncấp tốt thì mạch vòng nội bộ nên ngắn hơn 5,5 km. DSL thường không được chọn \nlàm kết nối giữa nhà riêng và hệ thống mạng trong công ty vì thuê bao không thể \ntừ nhà riêng kết nối trực tiếp vào mạng trung tâm của công ty, mà phải thông qua \nmột nhà cung cấp dịch vụ Internet (ISP \u2013 Internet Service Provider). Từ đây, một \nkết nối IP mới được thực hiện thông qua Internet để đến mạng trung tâm của công \nty. Như vậy rất nguy hiêm về mặt bảo mật. Để đảm bảo tính an toàn, dịch vụ DSL \ncó cung cấp khả năng sử dụng mạng riêng ảo VPN (Virtual Private Network) để \nkết nối vào server VPN đặt tại công ty. \n\n2.2.8. Cable modem \n\nCáp đồng trục được sử dụng rộng rãi trong các thành phố để truyền tín hiệu truyền \nhình. Hệ thống mạng được xây dựng dựa trên hệ thống cáp đồng trục này có băng \nthông cao hơn so với hệ thống mạng trên cáp đồng điện thoại. \n\n\n\n 535\n\n \n\nHình 2.2.8.a. Cable modem \n\n \n\nCable modem thực hiện truyền dữ liệu hai chiều tốc độ cao, sử dụng cáp đồng trục \ntrong hệ thống mạng cáp truyền hình. Một số nhà cung cấp dịch vụ còn cam kết tốc \nđộ truyền dữ liệu cao gấp 6,5 lần đường thuê riêng T1. Tốc độ này cho phép truyền \nđược nhanh chóng một lượng lớn thông tin số bao gồm video clip, audio\u2026 Lượng \nthông tin cần phải mất 2 phút nếu tải bằng đường truyền ISDN BRI thì bây giờ chỉ \nmất 2 giây thông qua kết nối cable modem. \n\nCable modem cũng cung cấp kết nối thường trực và lắp đặt kết nối này đơn giản. \nMột kết nối thường trực cũng có nghĩa là máy tính luôn luôn đứng trước mối nguy \nhiểm về mặt bảo mật, do đó cần phải được bảo vệ bằng bức tường lửa (firewalls). \nĐể đảm bảo về mặt an toàn, dịch vụ cable modem cũng cho phép sử dụng mạng \nriêng ảo VPN để kết nối vào VPN server đặt tại mạng trung tâm của một công ty. \n\nMột kết nối cable modem có dung lượng có thể lên đến 30 \u2013 40 Mb/giây trên kênh \ntruyền 6 MHz. Đường truyền này nhanh gần gấp 500 lần so với đường truyền \nmodem thường (56 Kb/giây). \n\n \n\n\n\n 536\n\nVới cable modem, thuê bao vẫn có thể nhận song song đồng thời dịch vụ truyền \nhình cáp và dữ liệu cho máy tính thông qua một bộ phân giải 1-2 đơn giản. \n\n \n\nHình 2.2.8.b. Cấu trúc bộ phân giải 1-2. \n\n \n\nThuê bao cable modem phải sử dụng ISP liên kết với nhà cung cấp dịch vụ truyền \nhình cáp. Tất cả các thuê bao nội bộ đều chia sẻ cùng một băng thông cáp. Do đó \ncàng nhiều người tham gia vào dịch vụ thì lượng băng thông cho mỗi người sẽ \ngiảm xuống. \n\n\n\n 537\n\n \n\n \n\n\n\n 538\n\n \n\nHình 2.2.8.c. Cấu trúc mạng cable modem. \n\n \n\n2.3. Thiết kế WAN \n\n2.3.1. Thông tin liên lạc bằng WAN \n\nWAN là một tập hợp các đường liên kết dữ liệu kết nối các router trong các LAN \nkhác nhau. \n\nVì lý do chi phí và pháp định nên chỉ có các nhà cung cấp dịch vụ thông tin liên lạc \n- viễn thông mới sở hữu các đường truyền dữ liệu của WAN. Khách hàng thuê các \nđường liên kết này để kết nối các mạng LAN của mình hoặc kết nối đến các mạng \nở xa. Tốc độ truyền dữ liệu trong WAN thường thấp hơn tốc độ 100 Mb/giây trong \nLAN. Chi phí thuê bao đường truyền là chi phí lớn nhất cho một mạng WAN. Do \nđó, việc thiết kế WAN phải đảm bảo cung cấp băng thông lớn nhất trong khả năng \nchi trả chấp nhận được. Đối với người sử dụng, việc cân đối giữa chi phí và nhu \ncầu dịch vụ tốc độ cao là một điều không dễ dàng. \n\nWAN truyền tải rất nhiều loại lưu lượng khác nhau như dữ liệu, thoại và video. Do \nđó thiết kế được đưa ra phải cung cấp đủ dung lượng, thời gian truyền đáp ứng \nđược với yêu cầu của toàn bộ hệ thống. Ngoài ra, người thiết kế còn phải quan tâm \nđến cấu trúc của mạng nối giữa các trung tâm với nhau, về đặc tính tự nhiên, về \nbăng thông và khả năng của các kết nối này. \n\n\n\n 539\n\n \n\nMạng WAN cũ trước đây thường bao gồm các đường kết nối giữa các máy tính lớn \n(mainframe) ở cách xa nhau. Mạng WAN ngày nay kết nối các LAN ở xa lại với \nnhau. Tất cả các máy tính đầu cuối, server và router nằm trong cùng một phạm vi \nđược kết nối với nhau thông qua LAN và WAN kết nối các router của từng LAN \nlại với nhau. Thông qua sự trao đổi thông tin địa chỉ lớp 3 router có thể định tuyến \ncho mọi luồng dữ liệu. Ngoài ra, router còn cung cấp chế độ quản lý chất lượng \ndịch vụ (QoS) cho phép định tuyến và chuyển mạch các luồng dữ liệu khác nhau \nvới các mức ưu tiên khác nhau. \n\nWAN thường chỉ là tập hợp các kết nối giữa các router để liên kết các LAN với \nnhau, do đó không có dịch vụ nào thực hiện trên WAN. WAN hoạt động ở 3 lớp \ndưới của mô hình OSI. Router quyết định chọn đường đến đích cho dữ liệu từ \nthông tin lớp Mạng nằm trong gói dữ liệu rồi sau đó chuyển gói dữ liệu xuống kết \nnối vật lý tương ứng. \n\n \n\n\n\n 540\n\n \n\nHình 2.3.1.a. Mạng WAN trước đây và hiện nay. \n\n \n\nHình 2.3.1.b. Các công nghệ WAN hoạt động ở 3 lớp dưới của mô hình OSI. \n\n \n\n2.3.2. Các bước trong thiết kế WAN  \n\nThiết kế WAN là một công việc đầy thử thách, nhưng nếu thiết kế theo một cách \ncó hệ thống thì chúng ta sẽ xây dựng được một mạng WAN có hiệu suất hoạt động \ncao với chi phí thấp. Mỗi khi cần thay đổi một mạng WAN đã có sẵn thì chũng ta \nnên đi theo các bước được đề nghị dưới đây trong phần này. \n\n \n\n\n\n 541\n\nChúng ta thường phải thay đổi mạng WAN mỗi khi cần mở rộng server WAN, \ncông việc kinh doanh thực tế có sự thay đổi\u2026 \n\nCác công ty lắp đặt mạng WAN để thực hiện trao đổi dữ liệu giữa các chi nhánh. \nMạng WAN này phục vụ cho toàn bộ hệ thống mạng của công ty. Chi phí bao gồm \nnhiều phần, ví dụ trong đó có chi phí cho thiết bị và cho việc quản lý đường truyền. \n\nTrong thiết kế WAN, chúng ta cần biết trong mạng WAN đó truyền những loại lưu \nlượng nào, từ đâu đến đâu. WAN có thể truyền tải nhiều loại dữ liệu khác nhau với \nyêu cầu băng thông, độ trễ và nghẽ mạch khác nhau. \n\n \n\nHình 2.3.2.a. So sánh giữa các loại lưu lượng trong WAN. \n\nn biết thông tin về các đặc ỗi loại lưu lượng trên mỗi \nhướng. Quyết định về những đặc điểm này uỳ thuộc vào sự sử dụng của user. Việc \nthiết kế WAN thường là nâng cấp, mở rộ g hoặc thay đổi một mạng WAN đã có \n\nmạng cũ. \n\nng. \n\u2022 Dữ liệu Client/Server. \n\u2022 Hướng kết nối hay không hướng kết nối. \n\u2022 Khả năng kéo dài thời gian trễ. \n\u2022 Khả năng hoạt động của mạng. \n\n \n\nChúng ta cà điểm của m\n t\nn\n\nsẵn. Do đó, có rất nhiều dữ liệu mà chúng ta cần đã có trong hồ sơ quản lý của \n\nCác đặc điểm của lưu lượng mạng: \n\n\u2022 Kết nối và mức độ dòng lưu lượ\n\n\n\n 542\n\n\u2022 Tỉ lệ lỗi. \n\u2022 Mức độ ưu tiên. \n\u2022 Loại giao thức. \n\u2022 Chiều dài trung bình của gói dữ liệu. \n\nViệc xác định vị trí các điểm cuối của kết nối sẽ giúp chúng ta xây dựng sơ đồ cấu \ntrúc WAN. Cấu trúc này phải thoả mãn các điều kiện về địa lý cũng như các điều \nkiện hoạt động. Nếu điều kiện hoạt động đòi hỏi cao thì cần phải có thêm các kết \nnối để dự phòng và chia sẻ tải. \n\nCuối cung, chúng ta phải quyết đình chi phí lắp đặt và hoạt động cho WAN, so \nsánh chi phí đó với những lợi ích mà WAN mang lại. \n\nTrong thực tế các bước được đưa ra dưới đây rất ít khi là một quá trình xuyên suốt \nliên tục. Sẽ có thể có nhiều thay đổi cần thiết trước khi kết thúc thiết kế. Sau khi \nlắp đặt WAN xong chúng ta cũng luôn phả theo dõi và đánh giá lại mạng WAN để \nđảm bảo hiệu quả hoạt động của nó. \n\n \n\n \n\nHình 2.3.2.b. Các bước trong thiết kế WAN \n\nXác định và lựa chọn dung lượng mạng như thế nào  \n\n \n\n\n\n 543\n\nThiết kế WAN thực chất bao gồm các công việc sau: \n\nLựa chọn cấu trúc kết nối giữa các vị trí khác nhau. \n\nLựa chọn công nghệ cho các kết nối này sao cho phù hợp với yêu cầu của \ntoàn bộ hệ thống và chi phí chấp nhận được. \n\n \n\nCó rất nhiều mạng WAN sử dụng cấu trúc hình sao. Khi tổ chức phát triển hơn, \nthêm một chi nhánh cần kết nối vào trung tâm thì khi đó triển khai thêm một nhánh \ncho cấu trúc hình sao. Đôi khi các điểm cuối của hình sao được kết nối chéo với \nnhau để tạo thành mạng lưới, tạo thêm nhiều khả năng kết nối. Khi thiết kế, đánh \ngiá lại hoặc thay đổi mạng WAN chúng ta cần chọn ra một cấu trúc phù hợp với \nyêu cầu. \n\n \n\nHình 2.3.3.a. Cấu trúc hình sao. \n\n\n\n 544\n\n \n\nHình 2.3.3.b. Cấu trúc hình lưới toàn phần. \n\n \n\nHình 2.3.3.c. Cấu trúc hình lưới một phần. \n\n \n\nKhi lựa chọn cấu trúc, chúng ta cần quan tâm đến một số yếu tố. Càng nhiều kết \nnối thì chi phí càng tăng cao, nhưng càng có nhiều đường kết nối giữa các điểm thì \nđộ tin cậy của mạng càng cao. Càng đặt thêm nhiều thiết bị trên đường truyền dữ \nliệu càng làm tăng thêm thời gian trễ và làm giảm độ tin cậy. Chúng ta có rất nhiều \n\n\n\n 545\n\ncông nghệ khác nhau với những đặc điểm khác nhau để chọn lựa cho kết nối dữ \nliệu. \n\nCông nghệ Yếu tố tính cước \nphí \n\nTốc độ bit tối đa Đặc điểm khác \n\nĐường thuê riêng Khoảng cách, \ndung lượng \n\nKhông giới hạn Dung lượng cố \nđịnh. \n\nĐường điện thoại Khoảng cách, thời \ngian \n\n33 \u2013 56 kb/giây Quay số, kết nối \nchậm. \n\nISDN Khoảng cách, \ndung lượng \n\n64 hoặc 128 \nKb/giây \n\n<2 Mb/giây PRI \n\nQuay số, kết nối \nnhanh. \n\nX.25 Dung lượng. <48 Kb/giây Dung lượng cố \nđịnh \n\nATM Dung lượng. >155 Mb/giây Dung lượng thay \nđổi. \n\n \n\nNhững công nghệ đòi hỏi phải thiết lập kết nối trước khi truyền dữ liệu, ví dụ như \nđường điện thoại, ISDN, X.25, không phù hợp cho mạng WAN cần thời gian đáp \nứng nhanh hoặc thời gian trễ thấp. Một khi đã được thiết lập kết nối thì ISDN và \ncác dịch vụ quay số khác có thời gian trễ thấp, ít nghẽn mạch. ISDN thường được \nchọn để kết nối các văn phòng nhỏ vào mạng trung tâm vì nó cung cấp kết nối tin \ncậy, băng thông phù hợp. ISDN còn được sử dụng làm đường dự phòng cho đường \nkết nối chính và là kết nối được thiết lập theo yêu cầu để chia sẻ tải với đường kết \nnối chính. Một ưu điểm của công nghệ này là thuê bao chỉ phải trả cước phí cho \nthời gian đường truyền được thiết lập. \n\nCác chi nhánh của một công ty có thể kết nối trực tiếp với nhau bằng đường thuê \nriêng hoặc kết nối vào mạng chia sẻ như X.25, Frame Relay và ATM. Đường \ntruyền thuê kênh riêng kéo được xa hơn và đương nhiên cũng đắt hơn nhưng nó có \nthể cung cấp mọi băng thông chúng ta muốn, thời gian trễ và nghẽn mạch rất thấp. \n\n\n\n 546\n\n \n\nMạng ATM, Frame Relay và X.25 truyền lưu lượng của nhiều khách hàng khác \nnhau trong cùng một kết nối. Khách hàng không kiểm soát được số lượng đường \nkết nối, số lượng trạm trung gian mà dữ liệu phải đi qua trong mạng chia sẻ, cũng \nnhư không thể điều khiển được thời gian chờ tại mỗi trạm. Chính vì nhược điểm về \nthời gian trễ và nghẽn mạch mà các công nghệ này không phù hợp với một số loại \nlưu lượng mạng. Tuy nhiên, nhược điểm này vẫn thường được chấp nhận vì các \nmạng chia sẻ này lại có ưu điểm lớn là chi phí rẻ. Khi có nhiều khách hàng cùng \nchia sẻ một đường kết nối thì đương nhiên chi phí sẽ thấp hơn nhiều so với chi phí \ncho một đường thuê kênh riêng có cùng dung lượng. \n\nMặc dù ATM cũng là một mạng chia sẻ nhưng nó được thiết kế để giảm thiểu tối \nđa thời gian trễ và nghẽn mạch bằng cách sử dụng các kết nối tốc độ cao với một \nđơn vị dữ liệu thống nhất, dễ quản lý, gọi là tế bào. Mỗi một tế bào ATM ( chính là \nmỗi gói dữ liệu trong mạng ATM) có chiều dài cố định là 53 byte, trong đó 48 byte \ndữ liệu và 5 byte cho phần Header. Các tế bào có chiều dài nhỏ và như nhau, \nkhông có gói nào khác lớn hơn trong mạng ATM nên không có thời gian trễ lớn \nhơn giữa các gói. Do đó, ATM được sử dụng rộng rãi cho các loại lưu lượng nhạy \ncảm với thời gian trễ. Frame Relay cũng có thể được sử dụng cho những loại lưu \nlượng nhạy cảm với thời gian trễ nhưng thường phải sử dụng thêm cơ chế QoS để \ncấu hình độ ưu tiên cho những loại dữ liệu này. \n\nViệc chọn lựa các công nghệ cho WAN thường dựa trên loại lưu lượng và dung \nlượng của chúng. ISDN, DSL, Frame Relay hoặc đường thuê riêng thường được sử \ndụng để kết nối các chi nhánh vào một trung tâm. Frame Relay, ATM hoặc đường \nthuê riêng thường được sử dụng để kết nối các vùng mở rộng vào đường trục \nchính. ATM hoặc đường thuê kênh riêng được sử dụng làm đường trục chính cho \nWAN. \n\n2.3.4. Mô hình thiết kế 3 lớp \n\nViệc kết hợp một cách có hệ thống là rất cần thiết khi chúng ta cần liên kết nhiều \nvị trí lại với nhau. Giải pháp phân cấp với mô hình 3 lớp cho chúng ta rất nhiều ưu \nđiểm được nêu trong bảng sau. \n\n\n\n 547\n\n \n\nKhả năng \nmở rộng \n\nMạng được thiết kế theo mô hình phân cấp có thể mở rộng hơn \nnhiều  mà không hề làm giảm bớt mức độ kiểm soát và quản lý hệ \nthống. Các chức năng của hệ thống đã mang tính tập trung và các lỗi \ntiềm ẩn sẽ được phát hiện dễ dàng hơn. Hệ thống mạng chuyển mạch \nđiện thoại là một ví dụ cho kiểu cấu trúc mạng phân cấp lớn. \n\nDễ triển \nkhai \n\n Cấu trúc phân cấp có chức năng rõ ràng cho từng lớp nên công việc \ntriển khai cũng được thực hiện dễ dàng hơn. \n\nDễ dàng \nxử lý sự \ncố \n\nViệc phân chi chức năng rõ ràng cho mỗi lớp cho phép việc xác định \nsự cố dễ dàng hơn. Việc chia hệ thống mạng ra thành nhiều phân \nđoạn giúp giảm thiểu phạm vi ảnh hưởng của sự cố. \n\nKhả năng \ndự đoán \n\nPhản ứng của hệ thống mạng có cấu trúc phân lớp hoàn toàn có thể \ndự đoán được, do đó việc nâng cấp hệ thống cũng sẽ tạo được thuận \nlợi hơn. \n\nKhả năng \nhỗ trợ \ncác giao \nthức \n\nĐối với cấu trúc mạng có phân cấp thì việc tích hợp các ứng dụng và \ngiao thức hiện tại với tương lai có thể thực hiện dễ dàng vì cơ sở hạ \ntầng mạng được tổ chức theo logic. \n\nKhả năng \nquản lý \n\nTất cả các ưu điểm được liệt kê ở trên đều nhằm cung cấp khả năng \nquản lý tốt hơn cho hệ thống mạng. \n\n \n\nChúng ta thử tưởng tượng một công ty lớn hoạt động trên mọi quốc gia ở Châu Âu \nvà có chi nhán ở mọi thành phố có dân số hơn 10.000 người. Mỗi chi nhánh là một \nLAN và chúng ta cần liên kết các chi nhánh với nhau. Mạng hình lưới rõ ràng là \nkhông khả thi vì chúng ta cần tới gần 500.000 liên kết cho 900 điểm. Mạng hình \nsao đơn cũng không thực hiện được vì chúng ta cần phải có một router tại vị trí \ntrung tâm hình sao với 900 cống hoặc 1 cổng vật lý có khả năng thiết lập 900 giao \ntiếp ảo. \n\n \n\n\n\n 548\n\nThay vào đó chúng ta sẽ thiết kết theo mô hình phân cấp. Các mạng LAN trong \ncùng một vùng địa lý sẽ được liên kết lại với nhau thành một vùng. Các vùng sẽ \nđược kết nối với nhau tạo thành một khu vực. Các khu vực kết nối với nhau và \nđóng vai trò là trục chính của mạng WAN. \n\n \n\nHình 2.3.4.a. Các LAN trong một vùng được kết nối lại theo hình sao và từ router \nở trung tâm hình sao kết nối ra khu vực. \n\n \n\nHình 2.3.4.b. Một mạng khu vực. \n\n\n\n 549\n\n \n\nHình 2.3.4.c. Kết nối mạng khu vực vào đường trục chính. \n\n \n\nSố lượng các địa điểm được kết nối với nhau trong một vùng được giới hạn trong \nkhoảng từ 30 đến 50. Mỗi vùng có cấu trúc hình sao, thiết bị tại trung tâm hình sao \nsẽ kết nối ra khu vực. Mạng khu vực có phạm vi địa lý lớn, kết nối khoảng 3 đến \n10 vùng với nhau. Thiết bị trung tâm của mạng khu vực sẽ kết nối ra trục chính, \ncác kết nối này có thể là kết nối điểm-đến-điểm. \n\nMô hình 3 lớp này dựa theo thiết kế phân cấp được sử dụng trong hệ thống điện \nthoại. Lớp truy cập là lớp kết nối các điểm trong cùng một vùng và đây là điểm \ntruy cập vào hệ thống mạng. Lưu lượng giữa các vùng được phân phối bởi các kết \nnối trong lớp phân phối và chỉ được chuyển lên đường trục chính sang khu vực \nkhác khi cần thiết. \n\nCấu trúc này rất hữu dụng khi công ty có cấu trúc chi nhánh và được chia thành \nkhu vực, vùng, chi nhánh. Cấu trúc này cũng rất phù hợp khi có một trung tâm dịch \nvụ mà tất cả các chi nhánh đều cần phải truy cập vào nhưng cấp độ lưu lượng \nkhông đủ để phân phối trực tiếp cho từng kết nối của từng chi nhánh. \n\n \n\n\n\n 550\n\nTrong mạng LAN ở trung tâm của mỗi vùng, chúng ta có thể đặt các server để \ncung cấp dịch vụ nội bộ. Tuỳ theo mức độ và loại lưu lượng mà kết nối truy cập có \nthể là quay số, thuê riêng hoặc Frame Relay. Cấu trúc Frame Relay cho phép thực \nhiên dạng mạng lưới để dự phòng mà không cần phải thêm kết nối vật lý. Các kết \nnối ở lớp Phân phối (Distribution Layer) có thể là Frame Relay hoặc ATM và kết \nnối trục chính ( Core Layer) có thể là ATM hoặc đường thuê riêng. \n\n2.3.5. Các mô hình phân lớp khác \n\nCó nhiều hệ thống mạng lại không đòi hỏi phải có cấu trúc phân cấp phức tạp đủ 3 \nlớp. Do đó, chúng ta có thể sử dụng dạng phân cấp đơn giản hơn. \n\n \n\nHình 2.3.5.a. Mô hình phân cấp 3 lớp. \n\n \n\nMột công ty có một số chi nhánh nhỏ với mức độ lưu lượng thấp thì có thể thiết kết \ntheo một lớp. Trước đây, mô hình này không được phổ biến vì chiều dài của đường \nthuê riêng là một yếu tố đáng kể. Ngày nay, với Frame Relay chúng ta không trả \ncước phí theo chiều dài thì giải pháp thiết kế này có thể thực hiện được. \n\n\n\n 551\n\n \n\nHình 2.3.5.b. Mô hình phân cấp một lớp. \n\n \n\nNếu do yêu cầu địa lý cần phải tập trung thành một số điểm thì chúng ta có thể áp \ndụng mô hình thiết kế 2 lớp. \n\nKhi thiết kế mạng đơn giản chúng ta vẫn dựa theo mô hình ba lớp để mạng có khả \nnăng mở rộng về sau. Các thiết bị tại trung tâm của lớp 2 được coi là trục chính \nmặc dù không có router nào ở lớp trục chính (core layer) kết nối vào nó. Tương tự, \ntrong thiết kế một lớp, thiết bị trung tâm cũng đồng thời là thiết bị khu vực và thiết \nbị trục chính. Với cách thiết kế phân lớp như vậy hệ thống có thể được mở rộng dễ \ndàng sau này. \n\n2.3.6. Một số điểm cần lưu ý khác khi thiết kế WAN. \n\nNhiều mạng WAN có kết nối ra Internet. Đây là một giải pháp có nhiều vấn đề về \nbảo mật nhưng lại là một cách tốt để kết nối các chi nhánh ở nhiều quốc gia khác \nnhau. \n\nTrong quá trình thiết kế, chúng ta phải quant tâm đến thành phần đi ra và đi vào từ \nInternet. Từ khi Internet được triển khai khắp nơi, các mạng LAN của công ty có \nthể trao đổi dữ liệu theo hai cách. Mỗi LAN có một kết nối đến ISP trong vùng của \nnó hoặc là từ router trung tâm củ vùng thực hiện một kết nối đến một ISP. Cách \nthứ nhất có ưu điểm là luồng lưu lượng được truyền đi trong mạng Internet chứ \n\n\n\n 552\n\nkhông phải trong mạng của công ty, do đó kết nối WAN có thể có dung lượng nhỏ \nhơn. Nhưng cách này có một nhược điểm là cả hệ thống mạng công ty được phơi \nra cho các tấn công từ Internet. Khi có nhiều kết nối như vậy thì việc theo dõi và \nquản lý cũng gặp khó khăn. Một kết nối đơn từ router trung tâm của vùng ra \nInternet sẽ dễ dàng theo dõi và bảo vệ hơn và như vậy mạng WAN của công ty sẽ \nphải thực hiện truyền tải lưu lượng nhiều hơn. \n\n \n\nHình 2.3.6. Sử dụng Internet như mạng WAN của công ty. \n\n \n\nNếu mỗi LAN trong mạng có một kết nối Internet riêng thì Internet có thể được sử \ndụng như mạng WAN của công ty đó, trong đó lưu lượng giữa các chi nhánh được \ntruyền đi trong Internet. Việc bảo vệ các mạng LAN sẽ là một vấn đề nhưng chi \nphí tiết kiêm được do không phải xây dựng mạng WAN riêng sẽ được dành để chi \ntrả cho vấn đề bảo mật. \n\nServer nên được đặt ở gần nơi thường xuyên truy cập vào nó nhất. Các thông tin \ntrả lời, cập nhật của server sẽ làm giảm dung lượng hiệu dụng của đường truyền. \nVị trí đặt dịch vụ truy cập Internet phụ thuộc vào đặc tính của bản thân mỗi dịch \nvụ, mỗi loại lưu lượng và yêu cầu về bảo mật. Lĩnh vực này là một chủ đề đặc biệt \nnằm ngoài phạm vi của giáo trình này. \n\n \n\n\n\n 553\n\nTỔNG KẾT  \n\n \n\nSau đay là các điểm chính của chương này: \n\n\u2022 Sự khác nhau về phạm vi địa lý giữa WAN và LAN. \n\u2022 Các lớp hoạt động của WAN và LAN trong mô hình OSI. \n\n\n\n 554\n\nCHƯƠNG 3: GIAO THỨC ĐIỂM NỐI ĐIỂM \n\n(Point \u2013 to \u2013 Point Protocol) \n\nGIỚI THIỆU \n\nChương này cung cấp cho bạn đọc một cái nhìn tổng quát về công nghệ WAN. \nTrong đó chúng tôi giới thiệu và giải thích các thuật ngữ WAN như truyền nối tiếp, \nphân kênh theo thời gian (TDM \u2013 Time Division Multiplexing), điểm ranh giới, \nDTE \u2013Data Terminal Equipment, DCE \u2013 Data Circuit \u2013 terminating Equipment. Sự \nphát triển và ứng dụng của giao thức đóng gói HDLC (High-level Data Link \nControl) cũng như phương pháp cấu hình và xử lý sự cố cổng Serial trên router \nđược trình bày trong chương trình này. \n\nPPP (Point \u2013 to \u2013 Point Protcol) là một giao thức thường được chọn để triển khai \ntrên một kết nối WAN nối tiếp. PPP có thể thực hiện được  \n\nThong tin lien  lien lạc thông tin liên lạc đồng bộ, bất đồng bộ và phát hiện lỗi. \nQuan trọng nhất là PPP có quá trình xác minh sử dụng CHAP hoặc PAP. PPP có \nthể sử dụng được trên nhiều môi trường vật lý khác nhau bao gồm cáp xoắn, cáp \nquan và truyền qua vệ tinh. \n\nTrong chương này chúng ta sẽ tìm hiểu về quá trình cấu hình và xử lý sự cố cho \nPPP \n\nSau khi hoàn t ất ch ương n ày các b ạn c ó th ể th ực hi ện đ ư ợc: \n\nGi ải th ích s ự truy ền n ối ti ếp  \n\nM ô t ả v à cho v í d ụ v ề TDM  \n\nx ác định đi ểm  ranh  giới trong mạng WAN \n\nM ô t ả ch ức n ăng c ủa DTE v à DCE \n\nTr ình b ày s ự ph át tri ển c ủa giao th ức đ óng g ói HDLC \n\nS ử d ụng s ự ph át tri ển c ủa giao th ức đ óng g ói HDLC \n\nS ử d ụng l ệnh encapsulation hdlc đ ể c ấu h ình HDLC  \n\nX ử l ý s ự c ố tr ên c ổng S erial b ằng l ệnh sh ow int erface v à sh ow c ontroller  \n\n\n\n 555\n\nX ác đ ịnh nh ững ưu đi ểm khi s ử d ụng PPP  \n\n\u2022 Gi ải th ích ch ức n ăng c ủa hai th ành ph ần trong PPP :LCP ( Link C \nontrol Protocol ) v à NCP (Net work C ontrol Protocol) \n\n\u2022 M ô t ả c ấu tr úc frame PPP \n\u2022 X ác đ ịnh 3 qu á tr ình c ủa m ột phi ên giao ti ếp PPP \n\u2022 Gi ải th ích s ự kh ác nhau gi ữa PAP v à CHAP \n\u2022 Li ệt k ê c ác b ư ớc c ủa qu á tr ình x ác minh PPP \n\u2022 C ấu h ình PPP v ới nhi ều ch ọn l ựa kh ác nhau \n\u2022 C ấu h ình ki ểu đ óng g ói PPP \n\u2022 C ấu h ình qu á tr ình x ác minh Chap va PAP \n\u2022 S ử d ụng l ệnh Sh ow int erface đ ể ki ểm tra ki ểu đ óng g ói tr ên c ổng S \n\nerial \n\u2022 X ử l ý c ác sự cố liên quan đến cấu hình PPP bằng lệnh debug PPP \n\n3.1. Liên kết nối tiếp điểm-đến-điểệ \n\n3.1.1.Giới thiệu về truyền nối  tiếp \n\n \n\n \n\nCác công nghệ WAN đều dựa trên cơ sở truyền nối tiếp ở lớp Vật lý. Điều này có ý \nnghĩa là các bit trong một frame được truyền lần lượt trên đường truyền vật lý \n\n\u2022 Mỗi bit trong frame Lớp 2 được mã hoá thành tín hiệu và được truyền lần \nlượt xuống môi trường tryền vật lý. Các phương pháp mã hoá ín hiệu lớp \nVật lý bao gồm NRZ-L (Nonreturn to Zezo Level), HDB3(High Density \nBinary) và AMI ( các phương pháp mã hoá tín hiệu khác nhau. Sau đây là \nmột số các chuẩn truyền nối tiếp khác nhau \n\n\n\n 556\n\n\u2022 RS-232-E \n\u2022 V.35 \n\u2022 High Speed Serial Interface (HSSI) \n\n3.1.2 Phân kênh theo thời gian (TDM- Time Division Multiplexing) \n\nPhân kênh theo thời gian TDM là truyền nhiều nguồn thong tin trên cùng một tín \nhiệu, sau đó lại tách ra thành các nguồn riêng biệt như ban đầu tại điểm cuối \n\n \n\n \n\nVí  dụ như hình 3.1.2.a chúng ta có 3 nguồn thong tin khác nhau đưa vào cùng một \nkênh. Mỗi nguồn thông tin được truyền luân phiên, đơn vị dữ liệu. Đơn vị dữ liệu \nnày có thể là một bit hoặc một byte. Tuỳ theo đơn vị là bit hay byte mà loại TDM \nnày được gọi là chèn bit hay chèn byte. \n\nMỗi nguồn thông tin ở đầu vào có một dung ượng riêng của nó. Để có thể truyền \nthông tin cho cả 3 nguồn thì dung lượng của kênh truyền không được thấp hơn \ntổng dung lượng của 3 đầu vào. \n\nTrong TDM các khe thời gian luôn luôn tồn tại cho dù không có dữ liệu truyền \nvào. TDM có thể được ví như một xe lửa có 3 toa xe. mỗi toa xe thuộc sở hữu của \nmột công ty và mỗi ngày xe lửa đều cạy với 32 toa. Nêu công ty nào có hang gởi đi \nthì toa xe của công ty đó đầy. Nếu công ty nào không có gì gởi đi thì toa xe đó để \ntrống nhưng vẫn hiện diện trong đoàn tàu \n\n\n\n 557\n\nTDM là một khái niệm ở lớp Vật lý, nó không phụ thuộc vào bản chất của thông \ntin được ghép vào kênh truyền và cũng không phụ thuộc vào các giao thức lớp 2 \nđược sử dụng trên các đầu vào. \n\nMột ví dụ cho TDM là ISDN (Integrated Services Digital Network). ISDN BRI có \n3 kênh truyền, bao gồm 2 kênh B 64Kb/giây và một kênh D 16Kb/giây. TDM có 9 \nkhe thời gian được chia ra như trong hình3.1.2b. \n\n \n\n3.1.3 Điểm ranh giới \n\nĐiểm ranh giới là điểm mà trách nhiệm của nhà cung cấp dịch vụ trong mạng kết \nthúc. Ở Mỹ nhà cung cấp dịch vụ cung cấp mạng vòng nội bộ đến vị trí của khách \nhang và khách hang kết nối thiết bị của mình như CSU/DSU vào điểm cuối của \nmạch vòng dữ liệu này. Khách hang phải chịu trách nhiệm bảo trì, thay thể hay sửa \nchữa thiết bị của mình \n\nỞ các nước khác trên thế giới thì công ty khai thác dịch vụ sẽ cung cấp và quản lý \nđơn vị kết cuối mạng NTU (network terminating unit). Như vậy nhà cung cấp dịch \nvụ có thể quản lý và xử lý sự cố với điểm ranh giới nằm sau NTU. Khách hàng kết \nnối thiết bị CPE của mình, ví dụ như router, thiết bị truy cập Frame Relay vào \nNTU bằng cổng Serial V3.5 hoặc RS -232 \n\n \n\n\n\n 558\n\n \n\n \n\n3.1.4 DTE/DCE \n\nMột kết nối tiếp có một đầu là thiết bị DTE và đầu kia là thiết bị DCE. Kết nối \ngiữa hai DCE chính là mạng WAN của nhà cung cấp dịch vụ CPE thông thường là \nrouter của khách hang đóng vai trò là DTE \n\nMáy tính, máy in, máy fax cũng là những ví dụ cho thiết bị DTE, DCE, thông \nthường là moderm hoặc CSU/DSU là thiết bị chuyển đổi tín hiệu từ DTE sang \ndạng tín hiệu phù hợp với đường truyền trong mạng WAN của nhà cung cấp dịch \nvụ. Tín hiệu này được thiết bị DCE ở đầu bên kia nhận được và lại được chuyển \nđổi thành dạng tín hiệu phù hợp với DTE và được truyền cho DTE \n\n \n\n\n\n 559\n\n \n\nChuyển giao tiếp DTE/DCE định nghĩa các đặc điểm sau: \n\n\u2022 Cấu trúc vật lý: số lượng chân và hình dạng của đầu kết nối \n\u2022 Điện : định nghĩa mức điện thế cho tín hiệu 0 và 1 \n\u2022 Chức năng: quy ước chức năng ý nghĩa của từng đường tín hiệu trong \n\ncổng kết nối \n\u2022 Thủ tục: quy ước thứ tự các bước trong truyền dữ liệu \n\nNếu hai DTE cần phải kết nối trực tiếp với nhau giống như hai máy tính hoặc hai \nrouter thì chúng ta cần sử dụng một loại cáp đặc biệt gọi là cáp null-moderm để \nthay thế cho DCE. Đối với kết nối đồng bộ thì cần phải có tín hiệu đồng bộ, khi đó \nchúng ta cần phải có thêm một thiết bị bên ngoài hoặc một trong hai thiết bị DTE \nphải phát được tín hiệu đồng bộ \n\nCổng Serial đồng bộ trên router được cấu hình là DTE hay DCE là tuỳ theo đầu \ncáp cắm vào cổng đó là DTE hay DCE. Cấu hình mặc định của cổng Serial là \nDTE. Nếu cổng Serial được cấu hình là DTE thì CSU/DSU hoặc thiết bị DCE kết \nnối vào cổng này phải phát tín hiệu đồng bộ \n\nCáp cho kết nối DTE \u2013 DCE là cáp nối tiếp có lớp bọc chống nhiều. Đầu cáp kết \nnối vào cổng Serial trên Router là đầu DB-60. Đầukia của cáp theo chuẩn nào là \ntuỳ theo CSU/DSU hay nhà cung cấp dịch vụ WAN. Thiết bị Cisso có hỗ trợ các \nchuẩn kết nối sau: EIA/TIA-32, EIA/TIA-449, V.35, X.21 và EIA/TIA-530 \n\n \n\n \n\n\n\n 560\n\n \n\nCisso cũng đã giới thiệu loại cáp Smart Serial với độ nhạy cao hơn và kiểu dáng \nnhỏ gọn hơn . Đầu cáp Smart Serial cắm vào cổng Serial trên router chỉ có 26 chân \ntín hiệu nhỏ gọn hơn so với đầu DB-60 \n\n3.1.5 Đóng gói HDLC \n\n\u2022 Truyền nối tiếp đặt cơ sở trên giao thức hướng bit. Giao thức hướng bit tuy \ncó hiệu quả hơn nhưng thường mang tính độc quyền. Năm 1979, ISO đã \nchấp thuận HDLC là giao thức chuẩn hướng bit của lớp Liên kết dữ liệu) \ncho ISDN \n\nLink Aceess Procedure f or Mod emsthực hiện đóng gói dữ liệu cho đường truyền \nnối tiếp đồng bộ. Sự chuẩn hoá này đã giúp cho các tổ chức khác áp dụng và mở \nrộng giao thức này. Từ năm 1981, ITU-T đã phát triển một loạt các phiên bản của \nHDLC. Sau đâ là một ví dụ, những giao thức này được gọi là giao thức truy cập \nđường liên kết: \n\n\u2022 Link Aceess Procedure, Balanced (LAPB) cho X.25\\ \n\u2022 Link Aceess Procedure on the D channel (LAPD) cho ISDN( \n\u2022 Link Aceess Procedure f or Mod ems (LAPM) and PPP cho mod ems \n\u2022 Link Acc ess Proced ure f or Frame Relay (L APF) cho Frame Relay \n\nHDLC cung c ấp c ơ ch ế truyền đồng bộ không có lỗi giữa hai điểm. HDLC định \nnghĩa cấu trúc frame Lớp 2 cho phép điều khiển luồng theo cơ chế cửa sổ trượt, \nkiểm tra lỗi và báo nhận. Frame dữ liệu hay frame điều khiển đều có cùng một định \ndạng frame \n\n\n\n 561\n\nChuẩn HDLC không hỗ trợ nhiều giao thức trên một đường kết nối, đồng thời cũng \nkhông có thông tin cho biết giao thức lớp trên nào đang được truyền trên đường \ntruyền. Cisso có giới thiệu một phiên bản HDLC độc quyền riêng. Frame Cisso \nHDLC có phần \u201ctype\u201d cho biết giao thức lớp trên của của frame. Nhờ có phần này \nmà nhiều giao thức lớp Mạng có thể chia sẻ cùng một đường truyền nối tiếp . \nHDLC là giao thức Lớp 2 mặc định trên cổng Serial của Cisso router \n\nHDLC định nghĩa 3 loại frame mỗi loại có định dạng phần điêu khiển khác nhau  \n\n\u2022 Frame thông tin (I-Frames\u2013 Information frames): là frame mạng dữ liệu của  \nmáy truyền. Trong frame thông tin có chèn thêm phần điều khiển luồng và \nlỗi. \n\n\u2022 Frame giám sát (S-Frames \u2013 Supervisory frames): cung cấp cơ chế hỏi đáp \nkhi cơ chế chèn thông tin trong I-Frame không được sử dụng. \n\n\u2022 Frame không đánh số (U-Frames \u2013 Unnumbered frames):thực hiện chức \nnăng bổ sung điều khiển kết nối như thiết lập kết nối. Phần \u201ccode\u201d trong \nframe sẽ xác định loại frame là U-frame \n\nMột hoặc hai bit đầu tiên của phần \u201cCotrol\u201d cho biết loại frame. Trong frame thông \ntin phần nay có chỉ số của gói gủi kế tiếp và gói nhận kế tiếp. Trong frame phát đi \ncủa máy gửi và máy nhận đều có hai chỉ số này \n\n \n\n \n\n3.1.6 Cấu hình đóng gói HDLC \n\n\n\n 562\n\nKiêủ đóng gói mặc định trên cổng Serial đồng bộ của thiết bị Cisco là Cisco \nHDLC. Nếu cổng Serial đã được cấu hình kiểu đóng gói khác và bây giờ cần quay \nlại kiểu đóng gói HDLC thì chúng ta vào chế độ cấu hình cổng Serial tương ứng. \nSau đó dung lệnh encapsulation để khai báo giao thức đóng gói HDLC cho cổng \nđó \n\nRouter (config \u2013 if)# encapsulation hdlc \n\nCisso HDLC là giao thức điểm nối điểm được sử dụng trên đường truyền nối tiếp \ngiữa hai thiết bị Cisso. Nếu kết nối với một thiết bị không phải của Cisco thì chúng \nta nên chọn PPP \n\n3.1.7 Xử lý sự cố trên cổng Serial \n\nKết quả hiển thị của lệnh show interfaces serial cho biết các thông tin về cổng \nserial. Khi cổng serial được cấu hình kiểu đóng gói HDLC thì chúng ta sẽ đọc thấy \ndòng \u201cEncapsulation HDLC\u201d trong kết quả hiển thị của lệnh này \n\n \n\nNếu cổng serial đã được cấu hình PPP thì chúng ta sẽ đọc thấy dòng \n\u201cEncapsulation PPP\u201d như trong hình 3.1.7b \n\n\n\n 563\n\n \n\n \n\nSau đây là 5 trạng thái sự cố mà chúng ta có thể xác định được thông qua kết quả \nhiển thị của lệnh show interfaces serial\u201d \n\n\u2022 Serial x is down, line protocol is down \n\u2022 Serial x is up, line protocol is down \n\u2022 Serial x is up, line protocol is up (looped) \n\u2022 Serial x is up, line protocol is down (disabled) \n\u2022 Serial x is administratively down, line protocol is down \nTrạng thái  \n\nđường kết nối \nĐiều kiện có thể     \n\nxảy ra \nSự cố/ Giải pháp \n\nSerial x is up, \nline protocol is \nup \n\nĐây là trạng thái hoạt \nđộng tốt của đường \ntruyền \n\nKhông cần phải làm gì cả \n\nSerial x is \ndown, line \n\nRouter không gửi tín \nhiệu CD, có nghĩa  CD \n\n1.Kiểm tra LED trên CSU/DSU xem \nCD có hoạt động hay không, hoặc \n\n\n\n 564\n\nprotocol is \ndown (dầu \nDTE) \n\nkhông hoạt động. Có \nthể sự cố xảy ra do \nphía nhà cung cấp dịch \nvụ WAN, kết nối \nkhông thực hiện hoặc \nchưa được kết nối vào \nCSU/DSU \n\nCáp bị lỗi hoặc kết nối \nkhông đúng \n\nLỗi phần cứng \n(CSU/DSU) \n\nsử dụng thiết bị đo trên đường dây \nxem có tín hiệu CD hay không. \n\n2. Kiểm tra cáp và kết nối có theo \nđúng hướng dẫn lắp đặt hay không \n\n3. Sử dụng thiết ị kiểm tra mọi dây \ncáp. \n\n4. Liên hệ với nhà cung cấp dịch vụ \nđể kiểm tra vị trí xảy ra sự cố. \n\n5. Thay thế phần bị sự cố. \n\n6. Nếu nghi ngờ phần cứng router bị \như hỏng  thì nên chuyển kết nối \nsang cổng khác. Nếu sự cố không \nxảy ra nữa thì có nghĩa là cổng kết \nnối trước  đó đã bị hư. \n\n \n\nSerial x is up, \nline protocol is \ndown (dầu \nDTE) \n\nRouter nội bộ hoặc \nrouter ở đầu bên kia bị \ncấu hình sai. \n\nRouter đầu bên kia \nkhông gửi thông điệp \nKeepalives \n\nCó thể sự cố xảy ra do \nphía nhà cung cấp dịch \nvụ, đường truyền bị \nnhiễu hoặc switch bị \ncấu hình sai. \n\nVấn đề về đồng bộ xảy \nra trên cáp, SCTE \u2013 \nSerial clock transmit \n\n1. Đặt modem, CSU hoặc DSU vào \nchế độ loopback và dùng lệnh show \ninterfaces serial để xem line \nprotocol is up, có nghĩa là sự cố do \nphía nhà cung cấp dịch vụ WAN \nhoặc router ở đầu bên kia bị sự cố. \n\n2. Nếu có vẻ như sự cố xảy ra ở đâù \nbên kia thì chúng ta lặp lại bước 1 ở \nđầu bên kia \n\n3. Kiểm tra mọi dây cáp, chúng ta \ncần chắc chắn rằng mọi dây cáp đã \nđược kết nối vào đúng cổng, đúng \nCSU/DSU vào đúng điểm cuối của \nmạng WAN của nhà cung cấp dịch \nvụ.Chúng ta sử dụng lệnh show \n\n\n\n 565\n\nexternal chưa được cài \nđặt trên CSU/DSU.  \n\nSCTE được thiết kế để \nbổ xung cho sự lệch \nphạ đồng hồ trên cáp \ndài. \n\nThiết bị DCE sử dụng \nSCTE thay vì xung \nđồng hồ bầu bên trong \nthiết bị DCE \n\nCSU/DSU nội bộ hoặc \nở đầu bên kia bị sự cố. \n\nPhần cứng của router \nnội bộ hoặc router đầu \nbên kia bị hư \n\ncontrollers để xác định cáp nào đang \nđược cắm vào cổng nào \n\n4. Sử dụng lệnh debug serial \ninterface. \n\n5. Nếu vẫn còn trạng thái line \nprotocol is down trong chế độ \nloopback ở bước 1 và kết quả hiển \nthị của lệnh debug serial interface \ncho thấy số lượng Keepalive không \ntăng lên thì khả năng lớn là lỗi phần \ncứng của router . Kết nối loopback \ncho cổng đang kết nối trên router \n\n6. Nếu line protocol is up, số lượng \nKeepalive tăng lên thì sự cố không \nnằm trên router nội bộ \n\n7. Nếu nghi ngờ sự cố do phần cứng \nrouter thì chúng ta đổi kết nối lên \ncổng khác còn trống. Nếu kết nối \nhoạt động được có nghĩa là cổng \ntrước đó bị hư \n\nSerial x is up \nline protocol is \ndown (dầu \nDCE) \n\nThiếu lệnh cấu hình \nclokrate cho cổng. \nThiết bị DTE không hỗ \ntrợ hoặc chưa được cấu \nhình cho chế độ SCTE \n.CSU hoặc DSU ở đầu \nbên kia bị hư \n\n1.Thêm lệnh cấu hình clokrate cho \ncấu hình cổng serial \n\n2. Clockrate bps \n\n3. Tham số bps có thể là : \n1200,2400,4800,9600,19200,38400, \n\n56000,64000,72000,125000,148000,\n\n250000,500000,800000,1000000, \n\n1300000,2000000,8000000. \n\n\n\n 566\n\n4. Nếu có vẻ như sự cố xảy ra ở đầu \nbên kia kết nối thì chúng ta thực \nhiện lại bước 1 ở modem, CSU hoặc \nDSU ở đầu bên kia \n\n5. Kiểm tra xem cáp có kết nối đúng \nkhông. \n\n6. Nếu vẫn còn trạng thái line \nprotocol is down, sự cố có thể là \nphần cứng hoặc do cáp \n\nChúng ta sử dụng thiết bị kiểm tra \ncáp \n\n7. Thay thế phần bị hư khi cần thiết \n\n \n\nSerial x is up \nline protocol is \nup (looped) \n\nTồn tại mạch lặp vòng. \nKhi mạch lặp vòng bắt \nđầu được phát hiện, chỉ \nsố thứ tự của gói \nKeepalive thay đổi \nngẫu nhiên. Nếu chỉ số \nnhận lại cũng giống với \nchỉ số gửi đi thì có \nnghĩa là đang tồn tại \nmạch lặp vòng \n\n1. Sử dụng lệnh show running-\nconfif để kiểm tra xem có lệnh nào \ncấu hình cho cổng làm loopback hay \nkhông \n\n2. Nếu có lệnh loopback trong cấu \nhình của cổng giao tiếp thì chúng ta \ndùng lệnh no loopback để xoá lệnh \nnày khỏi cấu hình \n\n3. Nếu không có lệnh cấu hình \nloopback thì chúng ta kiểm tra \nCSU/DSU xem thiết bị này có bị \ncấu hình bằng tay vào chế độ \nloopback hay không. Nếu có thì \nchúng ta tắt chế độ này đi \n\n4.Sau khi tắt chế độ loopback trên \nCSU/DSU, chúng ta khởi động lại \nCSU/DSU và xem lại trạng thái \n\n\n\n 567\n\nđường liên kết. Nếu Line protocol is \nup thì không cần làm gì nữa \n\n5. Nếu CSU/DSU không thể cấu \nhình bằng tay được thì chúng ta nên \nliên hệ với nhà cung cấp dịch vụ để \nyêu cầu hỗ trợ xử lý sự cố trên \nđường truyền \n\nSerial x is up \nline protocol is \ndown (disable) \n\nTỉ lệ lỗi cao đang xảy \nra do sự cố phía nhà \ncung cấp dịch vụ. \n\nSự cố phần cứng của \nCSU hoặc DSU. \n\nPhần cứng router \nkhông tốt \n\n1.Sử dụng thiết bị kiểm tra và phân \ntích đường truyền. Kiểm tra tín hiệu \nCTS và DSR \n\n2. Ngắn mạch CSU/DSU. Nếu sự cố \nvẫn còn thì có nghĩa là sự cố phần \ncứng. Nếu không còn sự cố thì sự cố \nlà do phía nhà cung cấp dịch vụ. \n\n3. Thay thế những thiết bị có sự cố \n(CSU, DSU, Switch, router) \n\nSerial x is \nadministratively \ndown, line \nprotocol is \ndown \n\nTrong cấu hình cổng \ncủa router có lệnh \nshutdown. \n\nBị trùng địa chỉ IP \n\n1. Kiểm tra cấu hình cổng router \nxem có lệnh shutdown hay không \n\n2. Nếu có thì dùng lệnh no \nshutdown để xoá bỏ lệnh này ra khỏi \ncấu hình  \n\n3. Kiểm tra cấu hình địa chỉ IP bằng \nlệnh show running \u2013 config hoặc \nshow interfaces \n\n4. Nếu có trùng địa chỉ thì thay thế \nđịa chỉ IP khác \n\nLệnh show controllers là một công cụ rất hữu ích khi xử lý sự cố trên kết nối serial. \nKết quả hiển thị của lệnh show controllers cho biết trạng thái của cổng, cáp nào \nhiện đang kết nối vào cổng. Ví dụ như trong hình 3.1.7.c cổng Serial 0/0 được kết \n\n\n\n 568\n\nnối với đầu cáp V.35 DTE. Tuỳ theo các phiên bản router khác nhau mà cấu trúc \ncâu lệnh này có khác nhau \n\nVí dụ khi chúng ta cần xem thông tin về cổng Serial trên router Cisco 7000 thì \ndùng lệnh show controllers cbus \n\nNếu trong kết quả hiển thị của câu lện này cho thấy cổng giao tiếp là UNKNOWN \nthay  vì là V.35, EIA/TIA \u2013 449 hay một chuẩn cụ thể nào khác, thì sự cố có thể là \ndo kết nối cáp không đúng, Khi đó kết quả hiển thị của lệnh show interfaces serial \n(X) sẽ cho thấy interface is down, line protocol is down. \n\n \n\n \n\n3.2 Quá trình xác minh trong PPP \n\n3.2.1. Cấu trúc phân lớp của PPP \n\nPPP sử dụng cấu trúc phân lớp. Cấu trúc phân lớp là mô hình giao tiếp logic giữa \ncác lớp. Mô hình OSI là một ví dụ về mô hình phân lớp trong mạng. PPP cung cấp \ncách đóng gói phù hợp cho nhiều gói dữ liệu của nhiều giao thức khác nhau để \ntruyền trên một đường truyền điểm-nối-điểm, đồng thời PPP sử dụng lớp liên kết \ndữ liệu để kiểm tra kết nối. Do đó PPP được chia thành hai giao thức con: \n\n\n\n 569\n\n \n\n\u2022 Giao thức điều khiển đường truyền LCP (Link Control Protocol): được sử \ndụng để thiết lập kết nối điểm - nối - điểm \n\n\u2022 Giao thức điều khiển lớp mạng NCP (Network Control Protocol): được sử \ndụng để cấu hình cho nhiều giao thức lớp Mạng khác nhau \n\nPPP có thể được cấu hình trên nhiều loại cổng vật lý như sau: \n\n\u2022 Cổng truyền nối tiếp bất đồng bộ  (Asynchronous serial) \n\u2022 Cổng truyền nối tiếp đồng bộ (Synchronous serial) \n\u2022 High \u2013 Speed Serial Interface (HSSI). \n\u2022 Integrated Services Digital Network (ISDN) \n\nLCP nằm ngay trên lớp Vật lý, được sử dụng để thiết lập, cấu hình và kiểm tra kết \nnối theo những yêu cầu sau \nThực hiện xác minh: Yêu cầu nay đòi bên thiết lập kết nối phải cung cấp thông \ntin cho biết có được phép của người quản trị mạng để thiết lập kết nối hay không. \nHai router ở hai đầu kết nối sẽ thực hiện quá trình xác minh bằng PAP hoặc Chap \n\n\u2022 Nén: Thực hiện yêu cầu nén frame khi truyền kết nối PPP sẽ giúp tăng thông \nlượng của đường truyền, giảm lượng dữ liệu phải truyền trên đường dây. Tại \nđầu nhận frame dữ liệu sẽ được giải nén. Router Cisco có hỗ trợ hai giao \nthức nén là Stacker và Predictor \n\n\u2022 Phát hiện lỗi: Cơ chế phát hiện lỗi của PPP thực hiện quá trình kiểm tra \nđiều kiện đường truyền. Chỉ số Quality Magic giúp xác định vòng lặp và độ \ntin cậy của đường truyền. \n\n\u2022 Ghép kênh (Multilink PPP):Cisco IOS phiên bản 11.1 trở đi cho phép thực \nhiện ghép kênh PPP trên cổng của router để thực hienẹ chia sẻ tải \n\n\u2022 PPP Callback: Để gia tăng khả năng bảo mật, Cisco IOS phiên bản 11.1 trở \nđi đã cho phép thực hiện chức năng gọi lại trên kết nối PPP. Cisco router \nđóng vai trò là callback client hoặc callback server. Callback client thiết lập \n\n\n\n 570\n\nmột cuộc gọi yêu cầu callback server gọi lại cho nó rồi kết thúc ngay cuộc \ngọi này. Sau đó callback server thực hiện gọị lại cho client dựa trên cấu hình \ncủa nó. \n\nLCP còn thực hiện những việc sau: \n\n\u2022 Kiểm soat các giới hạn khác nhau về kích thước gói dữ lieu \n\u2022 Phát hiện lỗi cấu hình \n\u2022 Kết thúc đường truyền \n\u2022 Kiểm tra xem đường truyền hoạt động tốt hay bị hư hỏng \n\nPPP cho phép nhiều giao thức lớp mạng khác nhau hoạt động trên cùng một đường \ntruyền. Đối với mỗi giao thức lớp Mạng được sử dụng, PPP cung cấp một NCP \nriêng biệt. Ví dụ : IPCP (IP Control Protocol) sử dụng cho giao thức IP, IPXCP \n(Novell IPX control Protocol) sử dụng cho IPX. NCP có mã số chuẩn cho biết giao \nthức lớp mạng nào đang được đóng gói trong frame PPP \n\n \n\nSau đây là các phần trong frame PPP \n\n\u2022 Cờ: Cho biết bắt đầu kết thúc một frame, phần này bao gồm chuỗi nhị phân \n0111110 \n\n\u2022 Địa chỉ: Chứa địa chỉ quảng bá 11111111. PPP không ấn định địa chỉ riêng \ncho trạm đích vì kết nối PPP là kết nối điểm-nối-điểm \n\n\u2022 Điều khiển : Chiều gài 1 byte có giá trị là 00000011,thực hiện dịch vụ \ntruyền thông kết nối, tương tự như LLC (Logical Link Control) loại 1, \ntruyền dữ liệu không theo thứ tự frame \n\n\u2022 Giao thức:Chiều gài 2 bte cho biết giao thức lớp trên nào có dữ liệu được \nđóng gói trong frame \n\n\u2022 Dữ liệu: Có chiều dài >= 0 byte, chứa toàn bộ dữ liệu của lớp trên. Kết thúc \nphần dữ liệu là cờ kết thúc và tiếp theo sau là 2 byte của phần FCS. Chiều \ndài tối đa mặc định của phần dữ liệu là 1500 byte \n\n\u2022 FCS: Thường dài 2 byte được sử dụng để kiểm tra lỗi frame \n3.2.2. Thiết lập một phiên kết nối PPP \n\n\n\n 571\n\nMột phiên kết nối PPP được thiết lấp sau 3 giai đoạn: giai đoạn thiết lập kết nối, \ngiai đoạn xác minh và giai đoạn cấu hình giao thức lớp Mạng. Frame LCP được sử \ndụng để thực hiện các công việc trong mỗi giai đoạn. Sau đây là các loại frame \nLCP được sử dụng trong phiên kết nối PPP \n\n\u2022 Frame thiết lập kết nối: được sử dụng để thiết lập và cấu hình kết nối \n\u2022 Frame kết thúc kết nối : được sử dụng để kết thúc kết nối \n\u2022 Frame duy trì kết nối được sử dụng để quản lý và điều chỉnh đường truyền \n\nSau đây là 3 giai đoạn thiết lập một phiên kết nối PPP: \n\n\u2022 Giai đoạn thiết lập kết nối;Trong giai đoạn này mỗi thiết bị PPP gửi đi \nframe LCP để cấu hình và kiểm tra kết nối.Trong frame LCP có chứa các \nthông tin để các thiết bị có thể thoả thuận và thực hiện các cấu hình cho \nđường truyền, ví dụ: đơn vị truyền tối đa (MTU \u2013 Maximum transmission \nunit), nén dữ liệu và giao thức xác minh. Nếu không có thông tin gì nằm \ntrong gói LCP thì đường truyền sẽ được thiết lập theo các thông số mặc \nđịnh. Đường truyền phải được mở lên và cấu ình xong trước khi có thể \ntruyền các gói dữ liệu lớp Mạng. Quá trình này dược kết thúc khi thông tin \nxác nhận cấu hình được gửi và nhận xong. \n\n\u2022 Giai đoạn xác minh:(Giai đoạn này không bắt buộc phải có ) Sauk hi \nđường truyền đã được thiết lập và giao thức xác minh đã được chọn xong, \nthiết bị ở hai đầu kết nối thực hiện xác mnh với nhau. Quá trình xác minh \nđược thực hiện trước khi chuyển sang giai đoạn cấu hình giao thức lớp \nMạng. Trong giai đoạn này LCP cũng thực hiện kiểm tra chất lượng đường \ntruyền. \n\n\u2022 Giai đoạn câu hình giao thức lớp mang Trong giai đoạn này các thiết bị \nPPP gửi gói NCP để chọn lựa và cấu hình cho một hay nhiều giao thức lớp \nMạng, ví dụ như giao thức IP. Khi mỗi giao thức lớp Mạng được cấu hình \nxong thì gói dữ liệu của giao thức đó có thể được truyền đi trên đường \ntruyền. Kết quả của lệnh show interfaces sẽ cho biết trạng thái của LCP và \nNCP trong cấu hình PPP \n\nMột kết nối PPP sẽ được duy trì cho đến khi: \n     Frame LCP hay LCP đóng đường truyền \n\n\u2022 Thời gian chờ đã hết hạn \n\u2022 Sự can thiệp của người sử dụng \n\n3.2.3 Giao thức xác minh PPP \n\n\n\n 572\n\nGiai đoạn xác minh của một phiên kết nối PPP là không bắt buộc. Sauk hi đường \ntruyền đã được thiết lập và giao thức xác minh đã được chọn thì hai thiết bị ở hai \nđầu kết nối thực hiện xác minh với nhau. Quá trình xác minh được thực hiện trước \nkhi giai đoạn cấu hình giao thức lớp Mạng bắt đầu. \n\nKhi thực hiện xác minh, bên thiết lập kết nối được yêu cầu cung cấp các thông tin \nđể xác minh quyền thiết lập kết nối. Hai router ở hai đầu kêt nối sẽ trao đổi với \nnhau các thông điệp xác minh \n\nKhi cấu hình quá trình xác minh PPP, người quản trị mạng có thể chọn giao thức \nPAP (Password Authentication Protocol) hay CHAP (Challenge Handshake \nAuthentication Protocol). Nói chung Chap là giao thức thường được đề nghị hơn \n\n3.2.4 PAP (Password Authentication Protocol) \n\nPAP cung cấp một cơ chế xác minh đơn giản sử dụng quá trình bắt tay 2 bước. \nSauk hi giai đoạn thiết lập kết nối PPP hoàn tất, cặp username/password được \nrouter ở đầu xa gửi đi nhiêu lần trên đường truyền cho đến khi đã được xác nhận \nhoặc kết nối bị xóa. \n\nPAP không phải là một giao thức xác minh manh. Password được gửi đi nguyên \nmẫu trên đường truyền. Do đó không có gì khó khăn đối với các loại tấn công \nPlayback hoặc repeated trial-and-error. Router đầu xa chỉ được kiểm tra một lần \nkhi truy nhập \n\n \n\n3.2.5 CHAP (Challenge Handshake Authentication Protocol) \n\nChap được sử dụng khi khởi động đường truyền và sau đó kiểm tra router đầu xa \ntheo định kỳ với quá trình bắt tay 3 bước. CHAP được thực hiện ở lúc bắt đầu thiết \nlập kết nối và luôn được lặp lai trong suốt quá trình kết nối được duy trì. \n\n\n\n 573\n\nSau khi giai đoạn thiết lập kết nối PPP hoàn tất, router trung tâm gửi một thông \nđiệp \u201cthử thách\u201d cho router đầu xa. Router đầu xa sử dụng thông điẹp này với \npassword của nó thông qua thuật toán MD5 (Message Digest  ) tạo ra một thông \nđiệp trả lời. Router đầu xa gửi thông điệp trả lời này cho router trung tâm. Router \ntrung tâm sử dụng thông điệp trả lời để tính toan ra một giá trị. Nếu giá trị này \nđúng với thông điệp \u201cthử thách\u201d ban đầu thì thông tin xác minh được xác nhận nếu \nkhong thì kết nối sẽ bị xoá ngay \n\nChap chống được kiểu tấn công Playback vì giá trị của thông điệp \u201cthử thách\u201d là \nngẫu nhiên hoàn toàn khác nhau giữa mỗi lần gửi và không thể đoán được. Do đó \ngiá trị của thông điệp trả lời cũng ngẫu nhiên và riêng biệt. Việc xác minh được \nthực hiện lặp đi lặp lại để giời hạn thời gian tìm ra mật mã của các đợt tấn công \nđơn lẻ \n\n \n\n \n\n \n\n3.2.6 Quá trình thực hiện xác minh PPP \n\nSauk hi nhập lệnh encapsulation ppp thi bạn có thể thêm cấu hình cho quá trình \nxác minh PAP hoặc Chap. Nếu không cấu hình quá trình xác minh thì phiên kết nối \nPPP được bắt đầu ngay . Nếu bạn có cấu hình cho quá trình xác minh thì sẽ diễn ra \nnhư sau: \n\n\u2022 Xác định giao thức xác minh \n\u2022 Kiểm tra cơ sở dữ liệu để tìm cặp username/password tương ứng \n\n\n\n 574\n\n\u2022 Nếu tín hiệu trả lời từ cơ sở dữ liệu là đúng thì phiên kết nối PPP được bắt \nđầu nếu không thì sẽ bị xoá ngay \n\n \n\n \n \n\n \n \n\n \n \n\n\n\n 575\n\n \n\n \n3.3 Cấu hình PPP \n\n3.3.1 Giới thiệu cấu hình PPP \n\nCấu hình PPP bao gồm các thông tin về : phương pháp xác minh, nén dữ liệu phát \nhiện lỗi có ghép kênh hay không \n\nCác thành \nphần cấu hinh \nPPP \n\nChức năng Giao \nthức \n\nLệnh cấu hình \n\n\n\n 576\n\nQuá trình xác \nminh  \n\nQuá trình xác minh yêu cầu \nbên thiết lập kết nối cung cấp \nthông tin để xác minh quyền \nthực hiện kết nối . Hai router \nở hai bên đầu kết nối trao đổi \nthông điệp xác minh. Có hai \ngiao thức thực hiện xác minh \nlà PAP và CHAP \n\nPAP \n\nCHAP \n\nPpp \n\nAuthentication \n\nPap \n\nPpp \n\nAuthentication \n\nChap \n\nNén dữ liệu Nén dữ liệu giúp tăng thông \nlượng đường truyền PPP \nbằng cách giảm lượng dữ liệu \nđược truyền đi trên đường \ntruyền. Frame sẽ được giải \nnén ở đầu nhận. Hai giao thức \nnén dữ liệu chạy trên router \nCisco là Stacker và Preditor \n\nStacker \n\nPredictor\n\nCompress stac \n\nCompress \n\nPredictor \n\nPhát hiện lỗi Cơ chế phát hiện lỗi của PPP \nthực hiện quá trình kiểm tra \nđiều kiện đường truyền. Chỉ \nsố Quality Magic giúp xác \nđịnh vòng lặp và độ tin cập \ncủa đường truyền \n\n  \n\nMultilink Phiên bản Cisco IOS 11.1 trở \nđi có hỗ trợ giao thức ghép \nkênh MP (Multilink protocol) \n\nGiao thức này cho phép chia \nsẻ tải trên các cổng của router \nđang sử dụng PPP. MP cắt \ngói dữ liệu thành nhiều phân \nđoạn có đánh số thứ tự và \ntruyền trên các kênh song \nsong. Các kênh PPP này hoạt \n\nMP Ppp multilink \n\n\n\n 577\n\nđộng như một kênh logic, \ngiúp tăng thông lượng và \ngiảm thời gian trễ giữa hai \nrouter \n\n3.3.2 Cấu hình PPP \n\nSau đây là ví dụ cho cấu hình đóng gói PPP trên cổng Serial (pp) \n\n\u2022 Router # configure terminal \n\u2022 Router (config) # interface serial 0/0 \n\u2022 Router (config \u2013if)#encapsulation ppp \n\nChúng ta cũng có thể cấu hình phần mềm nén dữ liệu trên cổng Serial đang sử \ndụng đóng gói PPP. Nén dữ liệu được thực hiện bằng phần mềm. Chúng ta không \nnên sử dụng nén dữ liệu lần nữa khi bản than phần lớn dữ liệu được truyền đi trên \ncổng này đã được nén rồi. \n\n\u2022 Router (config)#interface serial 0/0 \n\u2022 Router (config \u2013 if )#encapsulation ppp \n\u2022 Router (config \u2013 if)# compress (predictor stac) \n\nChúng ta nhập lệnh sau để có thể theo dõi mức đọ rớt gói dữ liệu trên đường truyền \nvà tránh bị vòng lặp: \n\n\u2022 Router (config)#interface serial 0/0 \n\u2022 Router (config \u2013 if )#encapsulation ppp \n\u2022 Router (config \u2013 if )#ppp quality  p ercentage \n\nCh úng ta s ử d ụng c ác l ệnh sau đ ể cho ph ép th ực hi ện chia t ải tr ên nhi ều đ ư \nờng k ết n ối: \n\n\u2022 Router (config)#interface serial 0/0 \n\u2022 Router (config \u2013 if )#encapsulation pp \n\u2022 Rot er (c onfig \u2013 if) # ppp multilink \n\n3.3.3 Cấu hình quá trình xác minh PPP \n\nBước Mô tả \n\nBước 1 Trên mỗi router khai báo username và password của router kết \nnối vào nó \n\n\n\n 578\n\nRouter (config)# username name password secret \n\nName là tên của router kết nối vào router đang cấu hình  \n\n \n\nBước 2 Vào chế độ câú hình của cổng tương ứng \n\nBước 3 Cấu hình đóng gói PPP cho cổng: \n\nRouter (config \u2013 if) # encapsulation ppp \n\nBước 4  Cấu hình quá trình xác minh PPP \n\nBước 5 Nếu bạn khai báo cả CHAP và PAP thì tên nào được đặt trước \nsẽ được sử dụng trước. Nếu router đầu bên kia yêu cầu sử \ndụng phương thức thứ hai hoặc đơn giản là từ chối phương \nthức thứ nhất thì phương thức thứ hai sẽ được áp dụng. \n\nBước 6 Bắt đầu từ phiên bản Cisso IOS 11.1 trở đi bạn phải khởi động \nPAP trên cổng cần thiết mặc định là PAP không chạy trên \nrouter \n\nHình 3.3..3.a là tóm tắt quá trình cấu hình PAP trên hai router kết nối với nhau. \nCặp username/password trên mỗi router phải phù hợp với hostname và password \nđược khai báo trên router kia. \n\n \n\n\n\n 579\n\n \n\nPAP là phương thức xác minh đơn giản sử dụng hai bước bắt tay và được thực hiện \nkhi thiết lập kết nối. Quá trình xác minh PAP thực hiện và đường truyền được thiết \nlập \n\nCHAP thực hiện kiểm tra router kết nối  ở đầu xa sử dụng ba bước bắt tay và được \nlặp lại theo định kì. Quá trình này được thực hiện xong lần đầu tiên. Đường truyền \nđược thiết lập và luôn được lặp lại trong suốt quá trình kết nối \n\n \n\n \n\n \n\n\n\n 580\n\n \n\n3.3.4 Kiểm tra cấu hình PPP trên cổng Serial \n\nChúng ta sử dụng lệnh show interfaces serial để kiểm tra cấu hình đóng gói HDLC \nhoặc PPP trên cổng Serial. Nếu cổng được cấu hinh đóng gói HDLC thì trong kết \nquả hiển thị có dòng \u201cEncapsulation HDLC\u201d. Ví dụ như trên hình 3.3.4 chúng ta  \nthấy dòng \u201cEncapsulation PPP\u201d như vậy là cổng serial 0/0 đã được cấu hình đóng \ngói PPP. Sauk hi đã cấu hình PPP, chúng ta có thể kiểm tra trạng thái của LCP \n(Link Control Protocol ) và NCP (Network Control Protocol) cũng bằng lệnh Show \ninterfaces serial \n\n \n\n\n\n 581\n\n \n\n3.3.5 Xử lý sự cố trên cổng Serial \n\nlệnh debug ppp authentication hiển thị các hoạt động xảy ra của qúa trình xác \nminh. Ví dụ như trên hình 3.3..5.a là kết quả cho thấy quá trình hoạt động của \nCHAP trên router Left Router Left và router Right được cấu hình thực hiện xác \nminh hai chiều, do đó hai router này thực hiện xác minh lẫn nhau \n\n \n\n\n\n 582\n\n \n\nHìn 3.3.5. Kết quả hiển thị của lệnh debug ppp authentication trên router Left. \n\nKết quả hiển thị Giải thích \n\nSe0/0 PPP: Phase is \nAUTHENTICATION by both \n\nXác minh hai chiều \n\nSe0/0 PAP: O AUTH-REQ id 4 \u2018len 18 \nfrom \u201cleft\u201d \n\nYêu cầu xác minh được gửi ra cổng \nSerial 0/0. \n\n \n\nSe0/0 PAP: I AUTH-REQ id 1 \u2018len 18 \nfrom \u201cleft\u201d \n\nYêu cầu xác minh nhận được từ cổng \nSerial 0/0. \n\n \n\nSe0/0 PAP: Authentication peer right Nhận được thông điệp trả lời của yêu \ncầu xác minh. \n\nSe0/0 PAP: O AUTH-ACK id 1 len 5 Gửi thông điệp xác nhận \n\nSe0/0 PAP: I AUTH-ACK id 4 len 5 Nhận được thông điệp xác nhận \n\nBảng 3.3.5. Giải thích kết quả hiển thị của lệnh debig ppp authentiacation  \n\n\n\n 583\n\nLệnh debug ppp được sử dụng để hiển thị các hoạt động của PPP . Chúng ta có thể \ndungdạng no của câu lệnh này để kết thúc quá trình hiển thị của lệnh \n\nTổng kết \n\nSau đây là những điểm quan trọng trong chương này mà các bạn cần nắm được: \n\n\u2022 Ghép kênh theo thời gian  \n\u2022 Điểm ranh giới trong mạng WAN \n\u2022 Định nghĩa chức năng của DTE và DCE \n\u2022 Quá trình phát triển của giao thức đóng gói HDLC \n\u2022 Sử dụng lệnh encapsulation hdlc để cấu hình HDLC \n\u2022 Sử dụng lệnh show interface và show controllers khi xác định sự cố trên \n\ncổng serial  \n\u2022 Ưu điểm của giao thức PPP \n\u2022 Chức năng của LCP và NCP trong PPP \n\u2022 Cấu trúc frame PPP \n\u2022 Ba giai đoạn thiết lập một phiên kết nối PPP \n\u2022 Sự khác nhau giữa PAP và CHAP \n\u2022 Cấu hình PPP \n\u2022 Cấu hình PAP và Chap \n\u2022 Sử dụng lệnh show interface serial để kiểm tra cấu ình đóng gói trên cổng \n\nserial \n\u2022 Sử dụng lệnh debug ppp để xác định sự cố ppp \n\n \n\n \n\n\n\n 584\n\nCHƯƠNG 4: ISDN và DDR \n\nGIỚI THIỆU \n\nISDN là mạng cung cấp kết nối toàn số từ đầu đến cuối để thực hiện dịch vụ truyền \nthoại và số liệu \n\nISDN cho phép nhiều kênh kỹ thuật số cùng  hoạt động đồng thời trên một đường \ncáp điện thoại thông thường, nhưng ISDN truyền tín hiệu số chứ không truyền tín \nhiệu tương tự. Thời gian trễ trên đương ISDN cũng thấp hơn so với đường truyền \ntín hiệu tương tự \n\nKhi chúng a không có nhu cầu cần một đường truyền thường trực thì nên sử dụng \nDDR để tiết kiệm chi phi. DDR định nghĩa một tiến trình cho router thực hiện kết \nnối với mạng quay số khi có dữ liệu cầu truyền đi và ngắt kết nối khi việc truyền \ndữ liệu đã hoàn tất \n\nSau khi kết thúc chương này các bạn có thể thực hiện những việc sau: \n\n\u2022 Định nghĩa các chuẩn ISDN về địa chỉ, tín hiệu \n\u2022 Mô tả ISDN sử dụng lớp Vật lys và lớp Liên kết dữ liệu như thế nào \n\u2022 Liệt kê các điểm kết nối và các giao tiếp được sử dụng trong ISDN \n\u2022 Cấu hình cổng trên router để sử dụng ISDN \n\u2022 Xác định các lưu lượng được phép truyền đi khi cấu hình DDR \n\u2022 Cấu hình định tuyến cố định cho DDR \n\u2022 Xác định và áp dụng danh sách kiểm tra truy cập ACL, cho các lưu lượng \n\nDDR \n\u2022 Cấu hình cổng quay số \n\n4.1 Các định nghĩa của ISDN \n\n4.1.1 Giới thiệu ISDN \n\nCó rất nhiều công nghệ WAN cung cấp đường truy cập mạng từ xa. Một trong \nnhững công nghệ đó là ISDN. Những người sử dụng riêng lẻ hay những văn phòng \nnhỏ chỉ  có đường điện thoại truyền thông băng thông thấp. ISDN là giải pháp dành \ncho những đối tượng này \n\n \n\n \n\n\n\n 585\n\n \n\n \n\nĐường điện thoại truyền thông PSTN truyền tín hiệu tương tự trên mạch vòng nội \nbộ kết nối giữa thuê bao và mạng của công ty điện thoại. Mạch tín hiệu tương tự có \ngiới hạn băng thông không được lớn hơn 3000Hz. Công nghệ ISDN cho phép \ntruyền tín hiệu số trên mạch vòng nội bộ này tốc độ truy cập cao hơn. Các côngty \nđiện thoại chỉ cần nâng cấp các bộ chuyển mạch để có thể xử lý được tín hiệu số. \nISDN thường được các văn phòng nhỏ ở xa sử dụng để kết nối vào mạng LAN ở \ntrung tâm \n\nCác công ty điện thoại cũng đã phát triển các chuẩn cho ISDN. Các chuẩn ISDN \nđịnh nghĩa về thiết bị phần cứng và quá trình thiết lập cuộc gọi. Những chuẩn này \ngiúp cho mạng ISDN giao tiếp dễ dàng với các mạng khác trên toàn cầu. Trong \nmạng ISDN việc số hoá tín hiệu được thực hiện ngay bên phía thuê bao thay vì \nđược thực hiện bên phía nhà cung cấp dịch vụ như trước đây \n\nSau đây là một số ưu điểm của ISDN: \n\n\n\n 586\n\n\u2022 Truyền nhiều loại lưu lượng khác nhau bao gồm dữ liệu thoại và và video \n\u2022 Tốc độ thiết lập cuộc gọi nhanh hơn modem \n\u2022 Kênh B cung cấp tốc độ truyền dữ liệu nhanh hơn modem \n\u2022 Kênh B phù hợp với kết nối PPP \n\nISDN là một dịch vụ linh hoạt có thể truyền dữ liệu  thoại và video cho phép \ntruyền nhiều loại lưu lượng trên nhiều kênh khác nhau trên cùng một kết nối \n\nISDN sử dụng một kênh riêng được gọi là kênh D để truyền tín hiệu điều khiển. \nKhi cần thiết lập cuộc gọi thuê bao nhấn số cần gọi . Khi tất cả các chữ số đã được \nnhận đầy đủ thì cuộc gọi được thực hiện. ISDN truyền các số này trên kênh D do \nđó thời gian thiết lập cuộc gọi nhanh hơn \n\nMỗi kênh B có thể kết nối đến một điểm khác nhau trong mạng ISDN. PPP có thể \nhoạt động cả trên kết nối đồng bộ và bất đồng bộ do đó đường  truyền ISDN có thể \nsử dụng kết hợp với đóng gói PPP \n\n4.1.2 Các chuẩn ISDN và phương pháp truy cập \n\nCông việc chuẩn hoá ISDN được bắt đầu từ cuối thập niên 60. Các bộ chuẩn đề \nnghị của ISDN được xuất bản năm 1994 và sau đó liên tục được cập nhật bởi ITU-\nT. Các chuẩn ISDN là một tập hợp các giao thức về điện thoại kỹ thuật số và \ntruyền số liệu. Các giao thức ISDN được phân theo các chủ đề chính sau: \n\n\u2022 Bộ giao thức E- các chuẩn về mạng điện thoại cho ISDN. Ví dụ: E:164 là \ngiao thức mô tả địa chỉ quốc tế cho ISDN \n\n\u2022 Bộ giao thức I- Liên quan đến các khái niệm thuật ngữ ví dụ I.100 bao gồm \ncác khái niệm chung của ISDN và cấu trúc các giao thức I khác I:200 đề cập \nđến mặt dịch vụ của ISDN \n\n\u2022 Bộ giao thức Q - Đề cập đến hoạt động tín hiệu và chuyển mạch. Hoạt động \ntín hiệu ở đây có nghĩa là quá trình thiết lập cuộc gọi ISDN \n\nChuẩn ISDN định nghĩa hai loại kênh chính, mỗi loại có tốc độ truyền khác nhau \nKênh B, 64Kb/giây, được sử dụng để truyền mọi dữ liệu số với chế độ truyền song \ncông. Loại kênh thứ hai được gọi là kênh D \n\nKhi thiết lập một kết nối TCP 2 bên trao đổi các thông tin điều khiển để thiết lập \nkết nối. Các thông tin điều khiển này truyền trên kênh truyền mà sau đó cũng được \nsử dụng để truyền dữ liệu. Thông tin điều khiển và dữ liệu chia sẻ cùng một kênh \ntruyền. Dạng truyền như vậy được gọi là in-band signaling. ISDN thì không thực \n\n\n\n 587\n\nhiện truyền như vậy, mà sử dụng một kênh riêng chính là kênh D, để truyền tín \nhiệu điều khiển. Dạng truyền như vậy gọi là out \u2013 of \u2013 band signaling \n\nISDN định nghĩa hai phương pháp truy cập chuẩn là BRI và PRI. Một cổng BRI \nhay PRI cung cấp một kênh D và nhiều kênh B \n\n \n\nBRI sử dụng hai kênh B 64kb/giây  và một kênh D 16kb/giây. BRI hoạt động được \ntrên nhiều Cisco router và đôi khi được ký hiệu là 2B+D \n\nKênh B có thể được sử dụng để truyền thoại . Khi đó tín hiệu thoại được mã hoá \ntheo cách đặc biệt. Khi kênh B được sử dụng để truyền số liệu thì thông tin được \nđóng thành frame, sử dụng giao thức đóng gói HDLC hoặc PPP ở lớp 2. PPP phức \ntạp hơn HDLC vì nó cung cáp cơ chế xác minh, thoả thuận cấu hình kết nối và giao \nthức phù hợp \n\nISDN được xem là một kết nối chuyển mạch .Kênh D mang các thông điệp điều \nkhiển để thiết lập cuộc gọi ngắt cuộc gọi và điều khiển cuộc gọi cho kênh B. Lưu \nlượng trên kênh D sử dụng giao thức LAPD. LAPD là một giao thức lớn liên kết \ndữ liệu dựa trên cơ sở của HDLC. \n\nỞ Bắc mỹ và Nhật, PRI cung cấp 23 kênh B 64kb/giây và một kênh D 64kb/giây. \nMột PRI này cung cấp dịch vụ tương đương với một kết nối T hay DSL. Ở Châu \nâu và phần còn lại trên thế giới , PRI cung cấp 30 kênh B và một kênh D, tương \nđương với một kết nối E1. PRI sử dụng CSU/DSU cho kết nối T1/E1 \n\n\n\n 588\n\n4.1.3 Mô hình 3 lớp ISDN và các giao thức tương ứng \n\n \n\n \n\nISDN hoạt đọng theo các chuẩn ITU-T tương úng với lớp Vât lý lớp liên kết dữ \nliệu và lớp Mạng trong mô hình OSI \n\n\u2022 Chuẩn lớp Vật ly của ISDN BRI và PRI được định nghĩa trong ITU \u2013T I.430 \nvà I..431 \n\n\u2022 Chuẩn lớp liên kế dữ liệu của ISDN dựa trên cơ sở LAPD và được định \nnghĩa trong: \n\n- ITU-T Q.920 \n- ITU-T Q.921 \n- ITU-T Q.922 \n- ITU-T Q.923 \n\u2022 Chu ẩn l ớp M ạng của ISDN được định nghĩa trong ITU-T Q.930 hay I.450 \n\nvà ITU-T Q.931 hay I.451. Các chuẩn này quy ước về kết  nối từ user đến \nuser chuyển mạch và chuyển mạch gói. \n\nDịch vụ BRI được thực hiện trên cáp điện thoại truyền thông. Mặc dù chỉ có một \nđường truyền vật lý cho một BRI nhưng bên trong là ba kênh truyền thông tin khác \nnhau 2B+D \n\nĐịnh dạng frame ở lớp Vật lý ISDN khác nhau tuỳ theo frame đi vào hay frame đi \nra. Nếu là frame đi ra có nghĩa là frame được truyền từ thiết bị đầu cuối đến mạng \nISDN thì sử dụng định dạng frame TE. Nếu là frame đi vào có nghĩa là frame được \ntruyền từ mạng ISDN đến thiết bị đầu cuối thì sử dụng định dạng frame NT \n\n \n\n\n\n 589\n\n \n\nHình 4.1.3.b \n\nMỗi frame ISDN BRI chứa hai frame con trong đó mỗi frame con có: \n\n\u2022 8 bit của kênh B1 \n\u2022 8 bit của kênh B2 \n\u2022 2 bit của kênh D \n\u2022 6 bit chèn thêm \n\nDo đó mỗi frame ISDN BRI có 48 bit , 4000 frame được truyền đi mỗi giây. Mỗi \nkênh B có dung lượng là 8*4000*2=64kb/giây trong khi đó kênh D có dung lượng \nlà 2*4000*2=16kb/giây. Dung lượng tổng cộng (B1+b2+D) là 144kb/giây, trên \nmột cổng vật lý ISDN có dung lượng là 192kb/giây. Phần dung lượng chênh lệch \ncòn lại là của các bit chèn thêm:6*4000*2=48kb/giây \n\nCác bit chèn thêm trong mỗi frame con ISDN có chức năng như sau \n\n\u2022 Framing bit - thực hiện chức năng đồng bộ \n\u2022 Load balancing bit \u2013 điêu chỉnh giá trị bit trung bình \n\u2022 Echo of previous D channel bit- giúp phân biệt tín hiệu của từng thiết bị khi \n\ncó nhiều thiết bị đầu cuối kết nối vào một đường truyền \n\u2022 Activation bit- kích hoạt thiết bị \n\u2022 Spare bit- bit để dành, chưa có chức năng nào được gắn cho bit này  \n\nChúng ta cần lưu ý rằng: tốc độ vật lý của , cổng BRI là 48*4000=192kb/giây, tốc \nđộ truyền dữ liệu là 144kb/giây=64kb/giây+64kb/giây+16kb/giây(2B+D) \n\n\n\n 590\n\nGiao thức lớp 2 của kênh tín hiệu ISDN là LAPD. LAPD tương ứng như HDLC. \nLAPD được sử dụng trên kênh D để đảm bảo cho việc truyền và nhận tín hiệu điều \nkhiển \n\nPhần Cờ và phần điều khiển của LAPD tương ứng như HDLC, phần địa chỉ của \nLAPD dài 2 byte. Trong đó byte đầu tiên chứa chỉ số xác định điểm truy cập dịch \nvụ, là chỉ số port giao tiếp giữa dịch vụ LAPD và Lớp 3 . Bit yêu cầu/ đáp ứng \n(C/R) cho biết frame này là frame yêu cầu hay frame đáp ứng. Byte thứ 2 chứa chỉ \nsố xác định điểm cuối (TEI). Mỗi thiết bị đầu cuối của khách hang cần phải có một \nchỉ số riêng biệt. Chỉ số TEI này có thể được cấu hình cố định khi cài đặt hoặc \nđược switch cung cấp động mỗi khi thiết bị này khởi động. Nếu TEI được cấu hình \ncố định khi cài đặt thì chỉ số này nằm trong khoảng từ o đến 63. Chỉ số TEI cấp \nđộng nằm trong khoảng từ 64 đến 126. Chỉ số TEI 127 là địa chỉ quảng bá \n\n \n\n \n\n4.1.4 Các hoạt động trong ISDN \n\nCó nhiều hoạt động trao đổi thông tin diễn ra khi một router sử dụng ISDN để kết \nnối đến router khác. Kênh D được sử dụng để thiết lập kết nối giữa router và ISDN \nswitch. Tín hiệu SS7 được sử dụng giữa các switch trong mạng của nhà cung cấp \ndịch vụ \n\nKênh D giữa router và ISDN switch luôn luôn trong trạng thái hoạt động. Q.921 \nmô tả tiến trình hoạt động của LAPD ở lớp 2 của mô hình OSI. Kênh D được sử \ndụng để truyền tín hiệu khiển như thiết lập cuộc gọi kết thúc cuộc gọi điều khiển \n\n\n\n 591\n\ncuộc gọi. Những chức năng này định nghĩa trong giao thức Q.931 ở lớp 3 của mô \nhình OSI.Q.931 định nghĩa kết nối mạng giữa thiết bị đầu cuối và ISDN switch \nnhung không định nghĩa kết nối đầu cuối -đến-đầu cuối. Có nhiều ISDN switch đã \nđược phát triển trước khi Q.931 được chuẩn hoá, do đó có nhiều nhà cungcấp dịch \nvụ ISDN và nhiều loại ISDN switch triển khai Q.931 khác nhau. Cũng chính vì \nkhông có chuẩn chungcho loại ISDN switch nên trong cấu hình router phải có câu \nlệnh khai báo ISDN switch mà router kết nối đến. \n\n \n\nHình 4.1.4.a \n\nSau đây là thứ tự các bước diễn ra trong quá trình thiết lập một cuộc gọi BRI hoặc \nPRI \n\n1. Kênh D gửi số cần gọi đến cho ISDN switch nội bộ \n2. Switch nội bộ sử dụng giao thức tín hiệu SS7 để thiết lập đường truyền và \n\nchuyển số cần gọi cho ISDN switch đầu xa \n3. ISDN switch đầu xa chuyển tín hệu đến cho máy đích trên kênh D \n4. Thiết bị đích ISDN NT \u2013 1 gửi thông điệp kết nối cuộc gọi cho ISDN switch \n\nđầu xa \n5. ISDN switch đầu xa sử dụng SS7 để gửi thông điệp kết nối cuộc gọi cho \n\nswitch nội bộ \n6. ISDN switch nội bộ thực hiện kết nối một kênh B, kênh B còn lại dành cho \n\nkết nối mới. Cả hai kênh B cũng có thể được sử dụng đồng thời. \n \n \n\n\n\n 592\n\n \nHình 4.1.4b \n\n4.1.5 Các điểm liên kết trong ISDN \n\nChuẩn ISDN định nghĩa các nhóm chức năng là các nhóm thiết bị phần cứng cho \nphép user truy cập dịch PRI. Các hang sản xuất có thể tạo ra một thi bị phần cứng \nthực hiện một hoặc nhiều chức năng. Chuẩn ISDN cũng định nghĩa bốn điểm liên \nkết giữa các thiết bị ISDN. Mỗi thiết bị trong mạng ISDN thực hiện một nhiệm vụ \nđể tạo nên một kết nối đầu cuối - đến - đầu cuối \n\nĐể kết nối các thiết bị khác nhau với các chức năng khác nhau các điểm giao tiếp \ngiữa hai thiết bị phải được chuẩn hoá. Các điểm giao tiếp bên phía khách hang \ntrong kết nối ISDN bao gồm những điểm sau: \n\n\u2022 R \u2013 là điểm liên kết giữa thiết bị đầu cuối loại 2 (TE2 \u2013 Terminal Equipment \n(ty \n\nPe 2) không tương thích với ISDN và thiết bị chuyển đổi TA (Terminal Adapter) \n\n\u2022 S \u2013 là điểm kết nối vào thiết bị chuyển mạch của khách hang NT2 (Network \nTermination 2) và cho phép thực hiện cuộc gọi giữa nhiều loại thiết bị khác \nnhau của khách hang \n\n\u2022 T  - Tương tự như giao tiếp S về mặt tín hiệu điện. Đây là điểm kết nối từ \nNT2 vào mạng ISDN hay cho NT1 (Network Termination type 1) \n\n\u2022 U \u2013 là điểm kết nối giữa NT1 và mạng ISDN của nhà cung cấp dịch vụ \nĐiểm giao tiếp S và T tương tự nhau về mặt tín hiệu điện nên có nhiều cổng giao \ntiếp dán nhã là S/T. Mặc dù hai giao tiếp này thực hiện chức năng khác nhau \n\n\n\n 593\n\nnhưng do tương tự nhau về mặt tín hiệu điện nên có thể dùng chung cho cả hai \nchức năng. \n\nThiết bị Loại thiết bị Chức năng của thiết bị\n\nTE1 Terminal Equipment 1 - \nThiết bị đầu cuối loại 1 \n\nThiết bị đầu cuối có \ncổng tương thích với \nISDN, ví dụ như ISDN \nrouter, điện thoại ISDN \n\nTE2 Terminal Equipment 2 - \nThiết bị đầu cuối loại 2 \n\nThiết bị đầu cuối không  \ncó cổng tương thích với \nISDN. Để kết nối loại \nthiết bị đầu cuối này \nvào mạng ISDN thì cần \nphải có thiết bị chuyển \nđổi TA \n\nTA Terminal Adapter - \nThiếtbị chuyển đổi \n\nChuyển đổi tín hiệu \nEIA/TIA \u2013 232, V.35 \nvà các loại tín hiệu khác \nsang tín hiệu BRI \n\nNT2 Network Termination 2 \n- Thiết bị kết cuối mạng \nloại 2 \n\nLà điểm tập trung mọi \nđường dâyISDN phia \nkhách hang và thực hiện \nchuyển mạch giữa các \nthiết bị đầu cuối bằng \nswitch của khách hang \n\nNT1 Network Termination 1 \n- thiết bị kết cuối mạng \nloại 1 \n\nĐiều khiển kết cuối về \nmặt vật lý và tín hiệu \nđiện phía khách hang \n\nChuyển đổi tín hiệu \nBRI dây sang tín hiệu 2 \ndây \n\n\n\n 594\n\n \n\n \n\n \n\n \n\n4.1.6. Xác định cổng ISDN trên router \n\nỞ BẮC Mỹ, NT1 là thiết bị thuộc sở hữu của khách hang. Điều này có nghĩa \nlà khách hang phải cung cấp thiết bị có tích hợp chức năng của NT1. Do đó \nở Bắc Mỹ các router ISDN thường có cổng ISDN BRI U trong đó có tích hợ \nchức năng của NT1. Ở Châu Âu , nhà cung cấp dich vụ cung cấp thiết bị \nNT1 riêng. Do đó, phía khách hàng chỉ cần cung cấp thiết bị có thể kết nối \nvào NT1, ví dụ như router có cổng ISDN BRI S/T. \n\nĐể chọn Cisco router có cổng ISDN phù hợp, các bạn cần đi theo các bước \nsau: \n\n1. Xác định vị trí cổng ISDN BRI trên router. Chúng ta nhìn phía sau router \nđể xách định vị trị cổng BRI hoặc vị trí để gắn BRI WAN Interface \n(WIC). \n\n2. Xác định ai là người cung cấp NT1. NT1 là điểm kết nối của mạch vòng \nnội bộ đến tổng đài trung tâm của nhà cung cấp dich vụ. Ở Bắc Mỹ, NT1 \nthuộc phần sở hữu của khách hàng. Còn ở Châu Âu, nhà cung cấp dịch \nvụ sẽ cung cấp thiết bị NT1 riêng. \n\n\n\n 595\n\n3. Nếu NT1 thuộc phía khách hàng thì nên chọn router có cổng U. Nếu \nrouter có cổng S/T thì cần phải có NT1 bên ngoài để kết nối router vào \nmạng ISDN của nhà cung cấp dich vụ. \n\n \n\nHình 4.1.6 \n\nNếu router có cổng BRI thì có nghĩa là nó đã sẵn sàng để sử dụng ISDN  Router \nnhư vậy chính là TE1 và có thể kết nối trực tiếp vào NT1. Nếu trên router đã có \ncổng U có nghĩa là đã tích hợp luôn NT1 bên trong \n\nNếu router không có cổng BRI và thuộc loại cấu trúc cố định, không thể gắn thêm \ncard bên ngoài vào thì chúng ta bắt buộc phải sử dụng cổng Serial. Khi đó chúng ta \ncần phải có thêm thiết bị đổi TA bên ngoài để có thể thực hiện kết nối BRI trên \ncổng Serial. Nếu router có khả năng gắn thêm card bên ngoài thì chúng ta có thể \ngắn thêm card BRI WIC cho router \n\n4.1.7 Các loại ISDN switch \n\nRouter cần phải có được khai báo loại switch mà nó giao tiếp. Có rất nhiều loại \nISDN switch khác nhau tuỳ theo từng nơi. Do sự triển khai Q.931 khác nhau nên \ngiao thức tín hiệu kênh D trên mỗi loại switch của mỗi hang cũng khác nhau \n\nDịch vụ được cungcấp bởi các nhà cung cấp dịch vụ ISDN rất khác nhau theo từng \nquốc gia và từng vùng trên thế giới. Giống như modem mỗi loại switch hoạt động \nkhác nhau và có yêu cầu thiết lập cuộc gọi khác nhau. Trước khi router có thể kết \nnối vào dịch vụ ISDN nó cần phải được khai báo loại switch đang được sử dụng ở \ntổng đài của nhà cung cấp dịch vụ. Thông tin này phải được khai báo khi cấu hình \nrouter sau đó router có thể giao tiếp với switch để thiết lập cuộc gọi và gửi dữ liệu \n\n\n\n 596\n\n \n\nHình 4.1.7  \n\nNgoài việc xác định loại switch của nhà cungcấp dịch vụ, chúng ta còn phải biết số \nSPID là chỉ số được cung cấp bởi nhà cung cấp dịch vụ ISDN, được dùng để xác \nđịnh cấu hình dịch vụ BRI cho mỗi kết nối.SPID cho phép thực hiện nhiều thiết bị \nISDN cùng chia sẻ một kết nối. Switch DMS \u2013 100 và National ISD- 1 thường yêu \ncầu phải có số SPID \n\nSPID chỉ được sử dụng ở Bắc Mỹ và Nhật. Nhà cung cấp dịch vụ ISDN cung cấp \nsố SPID để xác định cấu hình dịch vụ ISDN trên mỗi kết nố. Do đó trong nhiều \ntrường hợp chúng ta cần phải nhập số SPID khi cấu hình router \n\nMỗi số SPID tương ứng với một cấu hình cho một kết nối. Số SPID bao gồm nhiều \nký tự thường hay giống như số điện thoại. Mỗi số SPID xác định một kênh B cho \nswitch ở tổng đài trung tâm. Một khi đã được xác định, switch sẽ cung cấp dịch vụ \ncho kết nối. Các bạn nên nhớ ISDN là loại kết nối quay số. Số SPID được xử lý khi \nrouter thiết lập kết nối với ISDN switch. nếu loại switch này yêu cầu phải có số \nSPID mà số SPID lại không được khai báo đúng thì quá trình thiết lập kết nối sẽ \nkhông thực hiện được, dịch vụ ISDN cũng không sử dụng được \n\n4.2 Cấu hình ISDN \n\n4.2.1 Cấu hình ISDN BRI \n\nLệnh ISDN switch type là câu lệnh khai báo loại ISDN switch mà router cần kết \nnối đến. Câu lệnh này có thể sử dụng ở chế độ cấu hình toàn cục hay ở chế độ cấu \nhình cổng BRI. Nếu khai báo câu lệnh này ở chế độ cấu hình toàn cục thì mọi cổng \nISDN trên router đều sẽ có áp dụng loại ISDN switch được khai báo. Chúng ta \ncũng có thể khai báo loại ISDN switch riêng tương ứng cho từng cổng BRI. Sau \n\n\n\n 597\n\nđây là ví dụ về câu lệnh khai báo loại switch National ISDN \u2013 1 ở chế độ cấu hình \ntoàn cục: \n\nSau khi lắp đặt dịch vụ ISDN xong, nhà cung cấp dịch vụ sẽ cho biết các thông tin \nvề loại ISDN switch và số SPID. Mỗi số SPID định nghĩa một cấu hình dịch vụ \ntương ứng cho mỗi khác thuê báo. Tuy theo từng loại switch mà ta có thể cần hoặc \nkhông cần khai báo số SPID trong cấu hình router. Switch loại National ISDN \u2013 1 \nvà DMS \u2013 100 đòi hỏi phải có số SPID nhưng switch AT&T 5ESS thì không cần \nsố SPID \n\nĐịnh dạng của số SPID cũng phụ thuộc vào loại ISDN switch và quy ước của nhà \ncung cấp dịch vụ. Chúng ta sử dụng lệnh ISDN Spidl và ISDN Spid trong chế độ \ncấu hình cổng BRI để khai báo số SPID \n\nTham số  ldn định nghĩa số danh bạ nội bộ. Thông số khai báo cho ldn phải đúng \nvới thông số khai báo trên ISDN switch. Tham số này không bắt buộc phải khai \nbáo  \n\n \n\n \n\nHình 4.2.1 \n\n4.2.2 Cấu ình ISDN PRI \n\nISDN PRI chạy trên đường T1 hay E1. Sau đây là ba nhiệm vụ chính khi cấu hinh \nPRI \n\n\n\n 598\n\n1. Xác định loại switch PRI mà router kết nối đến \n2. Xác định T1/E1 controller, loại framing loại mã hoá trên đường truyền \n3. Nhóm các timeslot PRI \n\nRouter kết nối PRI thông qua T1/E1 do đó không có lệnh \u201cinterface pri\u201d. Cổng vật \nlý trên router thực hiện kết nối này được gọi là T1 controller hay E1 controller tuỳ \ntheo chúng ta sử dụng T1 hay E1. Chúng ta phải cấu hình các controller này hoàn \nchỉnh thì router mới có thể giao tiếp được với mạng của nhà cungcấp dịch vụ. còn \nkênh B và D của ISDN được cấu hình riêng bên dưới controller bằng lệnh interface \nserial \n\nTương tự như BRI chínta cũng dùng lệnh ISDN switch \u2013 type để khai báo loại \nISDN switch mà router kết nối đến Router (config) # isdn switch-ttype primary-\nnet5 \n\n \n\nHình 4.2.2.a \n\nSau đây là 4 bước cấu hình T1 hay E1 controller \n\n1. Từ chế độ cấu hình toàn cục xác định controller và slot/port của card PRI \n2. Cấu hình framing, line codin, cloking theo hướng dẫn của nhà cung cấp dịch \n\nvụ. Nếu bạn dùng T1 thì khai báo một trong các tham số sau \nLệnh linecode xác định phương pháp mã hoá tín hiệu ở lớp Vật lý của nhà cung \ncấp dịch vụ \n\nRouter (config \u2013 controller) # linecode (ami/b8zs/ hđb3) \n\nỞ Bắc Mỹ phương pháp mã hoá tín hiệu b8zs được sử dụng cho T1. Ở Châu âu thì \nsử dụng HDB3 \n\n1. Nhóm các timeslot vào một cổng PRI \n\n\n\n 599\n\nĐối với T1 chúng ta sử dụng timeslot trong khoảng 1 -24. Còn đối với E1 thì \nchúng ta sử dụng các timeslot trong khoảng 1 \u2013 31 \n\n2.Cấu hình một cổng giao tiếp tương ứng cho kênh D PRI hoạt động \n\nTrong thiết bị E1 hay T1 số kênh được bắt đầu từ 1 và kết thúc ở 31 đối với E1 hay \nkết thúc 24 đối với T1. Trong khi đó số cổng Serial trên Cisco router lại bắt đầu từ \n0. Do đó kênh 16 kênh truyền tín hiệu điều khiển của E1, sẽ tương ứng với cổng \n15. Kênh 24 kênh truyền tín hiệu điều khiển của T1, sẽ tương ứng với cổng 23. \nNhư vậy cổng Serial 0/0:23 tương ứng với kênh D của T1 PRI \n\nCác bạn không được nhằm lẫn giữa các kênh của T1/E1 với các cổng con  thường \nđược sử dụng cho frame Relay. Các cổng con thường được ký hiệu bằng dấu chấm, \ncòn các kênh được ký hiệu bằng dấu hai chấm: \n\n\u2022 S0/0.23 là cổng con của cổng S0/0 \n\u2022 S0/0:23: tương ứng với kênh 24 của T1 \n\n \nHình 4.2.2.b \n\n \n\n \n\nHình 4.2.c \n\n4.2.3 Kiểm tra cấu hình ISDN \n\nChúng ta có thể sử dụng nhiều lệnh show khác nhau để kiểm tra cấu hình ISDN \n\n\n\n 600\n\nĐể xác định trạng thái hoạt động của BRI chúng ta dùng lệnh show ISDN status. \nChúng ta sử dụng lệnh này sau khi đã cấu hình xong ISDN BRI để kiểm tra xem \nrouter đã giao tiếp được với  ISDN switch hay chưa. Trong ví dụ ở hình 4.2.3.a cho \nthấy router đã giao tiếp thành công và ISDN Lớp 3 cũng đã sẵn sang để thực hiện \nhay nhận cuộc gọi. Trong kết quả hiển thị của lệnh show isdn status chúng ta nên \nlưu ý đến trạng thái của lớp 1 và lớp 2 Layer 1 Status: Active, layer 2 status \nMultiple _ Frame _ Established  \n\n \n\n \n\nHình 4.2.3.a \n\nLệnh show isdn active cho biết các thông tin về những cuộc gọi đang thực hiện bao \ngồm \n\n\u2022 Số gọi đến \n\u2022 Thời gian gọi \n\u2022 Cước phí \n\u2022 Đơn vị tính cước phí trong suốt cuộc gọi \n\u2022 Thông tin về thiết bị kết nối ở đầu bên kia \n\nLệnh show interface bri0/0 cho biết trạng thái của cổng BRI trên router. Bạn muốn \nxem thông tin của từng lệnh thì khai báo thêm số kênh ở cuối câu lệnh này. Ví dụ \nlệnh show interface br0/0:1 cho biết: \n\n\u2022 Kênh B sử dụng đóng gọi PPP \n\n\n\n 601\n\n\u2022 LCP đã được thoả thuận và hoạt động \n\u2022 Có hai NCP đang chạy là IPCP và CDPCP \n\n \n\n \n\nHình 4.2.3.b \n\n4.2.4 Xử lý sự cố ISDN \n\nSau đây là các lệnh được dùng để theo dõi và phát hiện sự cố trong  cấu hình \nISDN: \n\n\u2022 Lệnh debug isdn q921 hiển thị các thông tin về lớp liên kết dữ liệu các thông \nđiệp trên kênh D giữa router và ISDN switch. Chúng ta nên sử dụng lệnh \nnày khi trong kết quả hiển thị của lệnh show isdn status không cho thấy là : \nLayer 1 :Active Layer 2  Multiple_Frame-Established \n\n\u2022 Lệnh debug isdn q931 cho biết thông tin về các thông điệp Lớp 3 trong quá \ntrình thiết lập và kết thúc cuộc gọi. \n\n\u2022 Lệnh debug ppp authentication hiển thị các thông điệp trao đổi của giao thức \nxác minh PAP hoặc Chap \n\n\u2022 Lệnh debub ppp negotiation hiển thị các thông tin về lưu lượng PPP khi các \nthành phần trong PPP đang thực hiện việc thoả thuận cấu hình. Trong đó có \nquá trình thoả thuận của LCP quá trình xác minh và quá trình thoả thuận của \nNCP \n\n\u2022 lệnh debug ppp error hiển thị các lỗi của giao thức và lỗi trạng thái của kết \nnối PPP. Chúng ta nên sử dụng các lệnh debug ppp để tìm sự cố ở lớp 2 khi \nkết quả hiển thị của lệnh show isdn status không cho thấy có sự cố của ISDN \n\n4.3. Cấu hình DDR \n\n\n\n 602\n\n4.3.1. Hoạt động của DDR \n\nTrên cổng có cấu hình DDR nếu có một dòng dữ liệu nào cần gửi ra cổng này và \nphù hợp với những tiêu chuẩn đã được định nghĩa trước đó thì DDR sẽ được kích \nhoạt để thực hiện truyền dữ liệu. Nhưng loại dữ liệu có thể kích hoạt DDR được \ngọi là lưu lượng đặc biệt. Sau khi router đã truyền xong nhưng lưư lượng đặc biệt \nnày nó sẽ ngắt kết nối. \n\nĐiểm quan trọng nhất để DDR hoạt động hiệu quả là việc định nghĩa lưu lượng đặc \nbiệt. . Lưu lượng đặc biệt được định nghĩa bằng lệnh dialer-list . Các lưu lượng của \ncác giao thức được định nghĩa trong dialer \u2013 list có thể thực hiện kết nối DDR. Tuy \nnhiên bạn cần lưu ý rằng dialer \u2013 list không ngăn chặn lưu lượng đi qua cổng . Một \nkhi lưu lượng đặc biệt đã kích hoạt kết nối DDR và kết nối này đang còn hoạt động \nthì mọi lưu lượng khác đều có thể đi qua \n\nSau đây là các bước hoạt động của DDR trên Cisco router \n\n1. Router nhận luồng lưu lượng vào từ một cổng, kiểm tra bảng định tuyển để \nxác định cổng ra cho lưu lượng đó. \n\n2. Nếu cổng đi ra có cấu hình DDR thì router sẽ xác định xem lưu lượng này có \nphải là loại lưu lượng đặc biệt hay không \n\n3. Router xác định các thông tin quay số cần thiết để thực hiện cuộc gọi cho \nrouter kế tiếp \n\n4. Nếu cổng ra đang có kết nối thì lưu lượng được chuyển ran gay. nếu cổng ra \nchưa có kết nối thì router sẽ gửi thông tin thiết lập kết nối trên kênh D BRI \n\n5. Sau khi kếtnối đã được thiết lập thì mọi lưu lượng đặc biệt hay không đặc \nbiệt đều được truyền đi \n\n6. Đồng hồ đếm thời gian chờ bắt đầu được khởi động. Sau một khoảng thời \ngian định trước mà không có lưu lượng đặc biệt nào đi qua nữa thì kết nối sẽ \nbị ngắt \n\nThời gian chờ là khoảng thời gian router duy trì kếtnối khi không có lưu lượng đặc \nbiệt nào truyền đi trên kết nối đó. Một khi kết nối DDR đã được thiết lập thì mọi \nlưu lượng đều được phép đi qua. Tuy nhiên chỉ có lưu lượng đặc biêt mới có thể \nkhởi động lại đồng hồ đếm thời gian chờ \n\n \n\n\n\n 603\n\n \n\nHình 4.3.1 \n\n4.3.2 Cấu hình DDR \n\nCấu hình DDR cơ bản chỉ có một tập hợp các thông tin quay số được áp dụng cho \nmột cổng. nếu cần có nhiều cấu hình quay số khác nhau áp dụng cho một cổng thì \nkhi đó chúng ta nên sử dụng dialer profile \n\nĐể cấu hình DDR chúng ta thực hiện các bước sau: \n\n\u2022 Cấu hình định tuyến cố định \n\u2022 Xác định lưu lượng đặc biệt \n\u2022 Cấu hình các thông tin  quay số \n\n4.3.3 Cấu hình định tuyến cố định cho DDR \n\nĐể chuyển tiếp dữ liệu router cần phải biết con đường nào tương ứng với mỗi \nluồng lưu lượng nhận được . Nếu chúng ta sử dụng giao thức định tuyến động và \nlưu lượng của giao thức định tuyến này được định nghĩa là lưu lượng đặc biệt thì \ncổng DDR sẽ thực hiện quay số mỗi khi đến chu kỳ cập nhật thông tin định tuyến. \nDo đó để tránh vấn đề này chúng ta cần cấu hình định tuyến cố định cho DDR \n\nĐể cấu hình định tuyến cố định cho IP chúng ta dùng lệnh sau: \n\n\n\n 604\n\n \n\nHình 4.3.3 \n\nXét ví dụ hình 4.3.3 router Central có định tuyến cố định đến mạng 10.40.0.0 của \nrouter Home. Router Home có hai định tuyến cố định đến hai mạng LAN trên \nrouter Central. Nếu mạng kết nối trên router Home là stub network thì mọi lưu \nlượng đi ra ngoài đều gửi cho router Central \n\nDo đó trên router Home trong trường hợp nà chỉ cần một định tuyến mặc định là \nđủ \n\nKhi cấu hình định tuyến cố định, các bạn nên nhớ \n\nMặc định định tuyến cố định luôn được ưu tiên trước định tuyến vì nó có chỉ số tin \ncậy nhỏ hơn. Nếu không có thêm cấu hình gì đặc biệt thì định tuyến động sẽ bị bỏ \nqua nếu có định tuyến cố định đến cùng một mục đích \n\nĐể giảm bớt số lượng định tuyến cố định chúng ta nên sử dụng định tuyến mặc \nđịnh hoặc tổng hợp địa chỉ mạng \n\n4.3.4 Định nghĩa lưu lượng đặc biệt cho DDR \n\nCuộc gọi DDR được kích hoạt lưu lượng đặc biêt. Lưu lượng đặc biệt có thể được \nđịnh nghĩa theo một trong những tiêu chuẩn sau \n\n\u2022 Theo loại giao thức \n\n\n\n 605\n\n\u2022 Theo địa chỉ nguồn hoặc đích của gói dữ liệu \n\u2022 Các tiêu chuẩn khác được định nghĩa do nhà quản trị mạng \n\nLệnh dialer \u2013 list được sử dụng để xác định lưu lượng đặc biêt \n\nRouter (config)#dialer \u2013 list dialer \u2013 group- number protocol protocol \u2013 name \n(permit deny list aceess \u2013 list \u2013 number) \n\nDialer \u2013 group \u2013 number là chỉ số nằm trong khoảng từ 1 đến 10 giúp phân biệt \ngiữa các dialer \u2013 list. Lệnh dialer \u2013 list 1 protocol ip permit sẽ cho phép mọi lưu \nlượng IP kích hoạt cuộc gọi. Thay vì cho phép mọi lưu lượng IP như vậy, dialer \u2013 \nlist có thể chỉ đến một danh sách kiểm tra truy cập ACL để xác định chính xác hơn \nloại lưu lượng nào được phép thực hiện kết nối . Như ví dụ trên hình 4.3.4 dialer \u2013 \nlist 2 chỉ kích hoạt kết nối DDR mọi gói IP khác đều được xem là lưu lượng đặc \nbiệt và được phép khởi động kết nối DDR \n\n \n\n \n\n4.3.5 Cấu hình thông tin quay số cho DDR \n\nĐể cấu hình DDR chúng ta phải thực hiện qua nhiều bước. Trước tiên là cấu hình \nPPP cho cổng quay số chúng ta cũng phải sử dụng các lệnh tương tự như khi cấu \nhình PPP cho cổng serial. HDLC là giao thức đóng gói mặc đinh trên cổng ISDN \ncủa Cisco router. Nhưng hầu hết các mạng đều sử dụng PPP cho kết nối chuyển \nmạch . PPP phức tạp hơn dễ tương thích và có nhiều chức năng hơn. Ví dụ như có \nquá trình xác minh nên PPP là giao thức liên kết dữ liệu được sử dụng trên kênh B \ntrên hầu hết mọi router. Để cấu hình PPP trên cổng DDR chúng ta xem ví dụ sau \n\n\n\n 606\n\nHome (config)# username Central password Cisco \n\nHome (config)#interface bri0/0 \n\nHome (config \u2013 if)#encapsulation ppp \n\nHome (config \u2013 if)# ppp authentication chap \n\nHome (config \u2013 if) #ip addres 10.1.0.1 \n\n255.255.255.0 \n\nDialer \u2013 list xác định lưu lượng đặc biệt cho cổng DDR. Do đóchúng ta cần liên \nkết cổng DDR với một dialer \u2013 list tương ứng bằng lệnh đialer-group group \u2013 \nnumber; \n\nHome (config \u2013 if)#dialer \u2013 group1. \n\nTrong đó group number xác định số thứ tự của dialer \u2013 list tương ứng. Do đó chỉ số \nnày phải giống với chỉ số của dialer \u2013 list group number. Mỗi một cổng chỉ có một \ndialer \u2013 group nhưng một dialer- list có thể tương ứng cho nhiều cổng khác nhau \n\n \n\n\n\n 607\n\nHình 4.3.5a \n\n \n\nHình 4.3.5b \n\n \n\nHình 4.3.5c \n\nSau đó chúng ta cấu hình thông tin quay số cho DDR bằng lệnh dialer map \n\nLệnh dialer map ánh xạ địa chỉ của trạm kế tiếp với một số điện thoại \n\nNếu bạn chỉ cần gọi đến một số duy nhất thì bạn có thể dùng lệnh dialer string. Với \nlệnh dialer string router sẽ luôn luôn gọi đến số điện thoại khai báo trong lệnh này \nbất kể địa chỉ đích của dữ liệu \n\n\n\n 608\n\nLệnh dialer idle timeỏu seconds cho phép cấu hình khoảng thời gian chờ tính theo \ngiây trước khi ngắt kết nối, second là số giây chờ tính lúc gói dữ liệu đặc biệt cuối \ncùng được gửi đi. Thời gian chờ mặc định là 120 \n\nc \n\nHình .4.3.5.d \n\n4.3.6 Dialer profiles \n\nDDR có một hạn chế là chỉ có một cấu hình quay số áp dụng trực tiếp cho một \ncổng vật lý. Địa chỉ IP được gán trực tiếp cho cổng vật lý do đó chỉ có hai cổng có \nhai địa chỉ nằm trong cùng một subnet mới có thể thực hiện kết nối DDR với nhau. \nĐiều này có nghĩa là một cổng DDR ở đầu này chỉa có thể kết nối được với một \nDR ở đầu bên kia \n\n \n\nHình 4.3.6a \n\n\n\n 609\n\nDialer profile giải quyết được giới hạn này của DDR. Dialer profile tách được mối \nrang buộc cố định giữa cổng vật lý vàcấu hình quay số , nó cho phép cổng vật lý có \nthể tự động chọn lựa cấu hình tương ứng với mỗi cuộc gọi. Dialer profile có thể \nthực hiện được những việc sau  \n\n\u2022 Định nghĩa giao thức đóng gói và danh sách kiểm tra truy cập ACL \n\u2022 Định nghĩa số lượng cuộc gọi tối thiểu và tối đa \n\u2022 Bật hoặc tắt các đặc tính đã được định trước \n\nDialer profile giúp cho việc thiết kế và phát triển hệ thống mạng được linh hoạt \nhơn, khả năng mở rộng lớn hơn. Dialer profile tách phần logic của DDR, ví dụ \nnhư: phần lớp Mạng đóng gói và các đặc tính về quay số ra khỏi cổng vật lý \n\nKhi sử dụng dialer profile chúng ta thực hiện được những việc sau \n\n\u2022 Cấu hình kênh B của cổng ISDN với nhiều IP subnet khác nhau \n\u2022 Sử dụng nhiều kiểu đóng gói khác nhau trên kênh B của cổng ISDN \n\u2022 Khai báo nhiều đặc tính DDR khác nhau cho kênh B của cổng ISDN \n\u2022 Tận dụng kênh B bằng cách gán một ISDN BRI với nhiêù dialer pools khác \n\nnhau \nMột dialer profile bao gồm những thành phần sau \n\nCổng quay số (Dialer interface) - cổng logic tương ứng với một mạng đích của \ndialer profile \n\n\u2022 Dialer pool - mỗi một cổng quay số tương ứng với một dialer pool điều này \ncó nghĩa là một hay nhiều cổng vật lý tươngứng với một dialer profile \n\nCổng vật lý -  cấu hình các đặc tính về đóng goi quá trình xác minh PPP. Multilink \nPPP và xác định cổng này tương ứng với dialer profile \n\n \n\n\n\n 610\n\n \n\nHình 4.3.6.b \n\n \n\n \n\nHình 4.3.6.c \n\nDDR hay dialer profile đều kích hoạt đường truyền khi cần truyền lưu lượng đặc \nbiệt ra cổng DDR. Trước tiên lưu lượng đặc biệt được định tuyến đến trạm DDR \nkế tiếp. Sau đó router tìm cổng quay số có địa chỉ IP nằm trong cùng subnet với địa \nchỉ IP của trạm DDR kế tiếp. Nếu có router tiếp tục tìm trong dialer pool một cổng \nvật ý DDR còn trống. Sau đó cấu hình của dialer profile được áp dụng cho cổng \n\n\n\n 611\n\nđược chọn và tạo kết nối DDR. Sauk hi kết nối DDR kết thúc cổng vật lý được trả \nvề cho dialer pools để sử dụng cho lần sau.. \n\n4.3.7 Cấu hình dialer profiles \n\nChúng ta có thể cấu hnhf nhiều cổng quay số trên một router.Mỗi cổng quay số là \nmột cấu hình hoàn chỉnh cho một điểm đích. Lệnh interface dialer được sử dụng để \ntạo cổng quay số và vào chế độ cấu hình của cổng này \n\nSau đây là những công việc cần thực hiện khi cấu hình cổng quay số: \n\n1. Cấu hình một hay nhiều cổng quay số với những lệnh tương tự như cấu hình \nDDR cơ bản: \n\nĐịa chỉ IP \nKiểu đóng gói và giao thức xác minh \n\nThời giam chờ \n\nDialer group \n\n2. Khai báo tên và số điện thoại của router đầu bên kia bằng lệnh dialer string \nvà dialer remote name. Khai báo nhóm các cổng vật lý tương ứng với cổng \nlogic này bằng lệnh dialer pool \n\n3. Cấu hình cổng vật lý và gán cổng này vào dialer pool bằng lệnh dialer pool \u2013 \nmember \n\n \n\n \nHình 4.3.7.a \n\n\n\n 612\n\n \n\n \n\nHình 4.3.7.b \n\nMột cổng có thể gán vào nhiều dialer pool khác nhau bằng cách dùng nhiều lần \nlệnh dialer pool \u2013 member. Nếu có nhiều cổng vật lý trong một dialer pool \nthìchúng ta có thể sử dụng thông số ưu tiên priority trong lệnh dialer poole- \nmember để định mức độ ưu tiên cho các cổng trong dialer pool \n\nMột hoặc nhiều cổng sau đây có thể sử dụng được với dialer pool \n\n\u2022 Cổng serial đồng bộ \n\u2022 Cổng serial bất đồng bộ \n\u2022 BRI \n\u2022 PRI \n\n4.3.8 Kiểm tra cấu hình DDR \n\nLệnh show dialer interface (BRI) hiển thị thông tin về các cuộc gọi vào và ra của \nDDR \n\nThông lệnh \u201cDialer state is data link layer up. Interface bound to profile Dialer1\u201d \ncho biết cuộc gọi thực hiện tốt và cổng BRI o/0:1 được gán với dialer profile 1i \n\n\n\n 613\n\n \n\nHình 4.3.8a \n\nLệnh show ISDN active hiển thị thông tin về các cuộc gọi ISDN đang thực hiện. \nTrong ví dụ hình 4.3.8.b chúng ta thấy đang có cuộc gọi ra đến router Seatle \n\n \n\nHình 4.3.8.b \n\nLệnh show ISDN status hiển thị các thông tin 3 lớp của cổng BRI. Trong ví dụ \nhình 4.3.8. c chúng ta thấy ISDN Lớp 1 đã hoạt động ISDN Lớp 2 đã được thiết lập \nvới số SP1D1 và SP1D2 và đang có một kết nối ở Lớp 3 \n\n \n\n\n\n 614\n\n \n\nHình 4.3.8.c \n\n4.3.9 Xác định sự cố trong cấu hình DDR \n\nCó hai loại sự cố chíng trong DDR. Một là router không thực hiện quay số khi cần \nthiết hai là router liên tục gọi đi khi không cần thiết. Các lệnh debug sẽ rất hữu \ndụng khi chúng ta xác định sự cố trong cấu hình DDR \n\n\n\n 615\n\n \n\nHình 4.3.9.a \n\nTrong ví dụ hình 4.3.9.a hai chữ số Hex đứng vị trí thứ 7 và thứ 8 cho biết loại \nthông điệp:\\ \n\n0*05:Thông điệp thiết lập cuộc phí \n\n0*02:Thông điệp triển khai cuộc gọi \n\n0*07 Thông điệp kết nối \n\n0*0F: Thông điệp xác nhận kết nối \n\nLệnh debug ISDN q931 cho chúng ta xem các thông tin trao đổi Lớp 2 của ISDN \nkhi cuộc gọi ra hoặc vào được thiết lập. Các chỉ số \u201ci=\u201d là chỉ số Hex của các \nthông điệp Q931 \n\n\n\n 616\n\n \n\nHình 4.3.9b \n\n \n\n \n\nHình 4.3.9c \n\nLệnh debug dialer (event packer) được sử dụng để xác định sụ cố kết nối DDR. \nLệnh debug dialer events hiển thị các thông điệp cho biết kết nối DDR đã được \nthực hiện chưa lưu lượng nào đã kích hoạt kết nối. Nếu router  bị cấu hình DDR \nkhông đúng thì lệnh này sẽ chỉ ra được nguồn gốc của sự cố. Nếu không có thông \nđiệp nào được hiển thị thì ra có nghĩa là router chưa nhận được lưu lượng đặc biệt \nnào. Như vậy nguyên nhân có thể là do cấu hình dialer \u2013 list hoặc ACL không \nđúng \n\n\n\n 617\n\n \n\nHình 4.3.9d \n\nKhông phải lỗi cấu hình DDR nào cũng dẫn đến việc quay số không đúng. Giao \nthức định tuyến động cũng có thể làm cho router quay số liên tục mặc dù không có \ndữ liệu của  người dùng cần truyền đi. Lệnh debug dialer packets sẽ hiển thị thông \nđiệp mỗi khi có một gói dữ liệu được truyền ra cổng DDR. Do đó chúng ta có thể \ndùng lệnh này để xác định chính xác loại lưu lượng nào đã kích hoạt liên tục cổng \nDDR \n\nNếu router không thực hiện kết nối được khi cần thiết thì có thể là do lỗi của ISDN \nhoặc DDR. Có thể router đầu bên kia được cấu hình không đúng hoặc là mạng \nISDN của nhà cung cấp dịch vụ có sự cố. Chúng ta dùng lệnh ISDN call interface \nđể ép router quay số đến router đầu bên kia. Nếu hai router không thể giao tiếp \nđược với nhau thì sự cố thuộc về ISDN chứ không phải sự cố DDR. Nhưng nếu hai \nrouter có thể giao tiếp được với nhau thì có nghĩa là cấu hình ISDN ở cả hai đầu \nđều không có vấn đề. Trong trường hợp nay thì khả năng lớn là lỗi của cấu hình \nDDR trên hai router \n\nTrong một số trường hợp việc khởi động lại kết nối giữa router và ISDN switch \ncũng rất hiệu quả. Lệnh clear interface bri sẽ xoá hết kết nối hiện tại.trên cổng BRI \nvà khởi động lại kết nối hiện tại trên cổng BRI và khởi động lại ket nối mới với \nISDN switch. Và đôi khi chúng ta cũng nên kiểm tra lại chỉ số SP1D1 và SP1D2 \n\n\n\n 618\n\n \n\nHình 4.3.9.e \n\nTỔNG KẾT \n\nISDN được xem là một tập hợp các giao thức được thực hiện các công ty điện \nthoại để cho phép mạng điện thoại có thể tích hợp dịch vụ truyền thoại, video và \ndữ liệu. ISDN cho phép thông tin liên lạc tốc độ cao chất lượng tốt \n\nDDR được sử dụng để tiết kiệm chi phí khi một công ty hay tổ chức không có nhu \ncầu cần một đường kết nối WAN cố định. Đường truyền này cũng được sử dụng \nlàm đường dự phòng cho kết nối chính. \n\n\u2022 Sau đây là các điểm quan trọng mà bạn cần nắm trong chương này: \nISDN truyền dữ liệu thoại và video \n\n\u2022 ISDN có sử dụng các chuẩn về địa chỉ tín hiệu \n\u2022 ISDN hoạt động ở lớp Vật lý và lớp liên kết dữ liệu \n\u2022 Các điểm liên kết trong ISDN \n\u2022 Cấu hình ISDN trên router \n\u2022 Cấu hình những lưu lượng nào được phép kích hoạt DDR \n\u2022 Cấu hình định tuyến cố định cho DDR \n\u2022 Cấu hình kiểu đóng gói cho DDR \n\u2022 Cấu hình ACL cho DDR \n\u2022 Cấu hình cổng quay số \n\nMột hệ thống mạng được xây dựng bởi nhiều thiết bị nhiều giao thức và nhiều loại \nmôi trường truyền. Khi một bộ phận nào đó của mạng không hoạt động đúng thì sẽ \ncó một vài người dùng không truy cập được hoặc có thể cả hệ thống mạng cũng \nkhông hoạt động được. Cho dù trong trường hợp nào thì khi sự cố xảy ra người \n\n\n\n 619\n\nquản trị mạng phải nhanh chóng xác định sự cố và xử lýchúng. Sự cố mạng thường \ndo những nguyên nhân sau \n\n\u2022 Gõ sai câu lệnh \n\u2022 Cấu hình danh sách kiểm tra truy cập ACL không đúng hoặc đặt ACL không \n\nđúng chỗ \n\u2022 Cấu hình thiếu cho router switch và các thiết bị mạng khác \n\u2022 Kết nối vật lý không tốt \n\nNgười quản trị mạng cần tiếp cận với sụ cố một cách có phương pháp, sử dụng sơ \nđò xử lý sự cố tổng quát. Trước tiên là kiểm tra sự cố ở lớp Vật lý trước rồi mới đi \ndẫn lên các lớp trên. Mặc dù chương này chỉ tập trung vào xử lý sự cố các hoạt \nđộng của giao thức định tuyến ở lớp 3 nhưng cũng rất quan trọng cho các bạn khi \ncần loại trừ ở các lớp dưới \n\nSauk hi hoàn tất chương này các bạn sẽ thực hiện được những việc sau \n\n\u2022 Mô tả sự khác nhau giữa EIGRP và IGRP \n\u2022 Mô tả các khái niệm kỹ thuật và cấu trúc dữ liệu EIGRP \n\u2022 Hiểu được quá trình hội tụ của EIGRP và các bước hoạt động cơ bản của \n\nthuật toán DUAL \n\u2022 Thực hiện cấu hình EIGRP cơ bản \n\u2022 Cấu hinh được tổng hợp cho EIGRP \n\u2022 Mô tả quá trình EIGRP xây dựng và bảo trì bảng định tuyến \n\u2022 Kiểm tra hoạt động của EIGRP \n\u2022 Mô tả tám bước để xử lý sự cố tổng quát \n\u2022 Áp dụng tiến hành logic để xử lý sự cố định tuyến \n\u2022 Xử lý sự cố của hoạt động định tuyến RIP bằng cách sử dụng lệnh show và \n\ndebug \n\u2022 Xử lý sự cố của hoạt động định tuyến IGRP bằng cách sử dụng lệnh show và \n\ndebug \n\u2022 Xử lý sự cố của hoạt động định tuyến EIGRP bằng cách sử dụng lệnh show \n\nvà debug \n\u2022 Xử lý sự cố của hoạt động định tuyến OSPF bằng cách sử dụng lệnh show \n\nvà debug \n\n3.1 C ác kh ái ni ệm c ủa EIGRP \n\n3.1.1 So sánh EIGRP và IGRP \n\n\n\n 620\n\nCisco đưa ra giao thức EIGRP vào năm 1994 như là một phiên bản mới mở rộng \nvà nâng cao hơn của giao thức IGRP. Kỹ thuật vectơ khoảng cách trong IGRP vẫn \nđược sử dụng cho EIGRP \n\nEIGRP cải tiến các đặc tính của quá trình hội tụ, hoạt động hiệu quả hơn IGRP. \nĐiều này cho phép chúng ta mở rộng cải tiến cấu trúc trong khi vẫn giữ nguyên \nnhững gì đã xây dựng trong IGRP \n\nChúng ta sẽ tập trung so sánh EIGRP và IGRP trong lĩnh vực sau \n\n\u2022 Tính tương thích \n\u2022 Cách tính thông số định tuyến \n\u2022 Số lượng họp \n\u2022 Hoạt động phân phối thông tin tự động \n\u2022 Đánh dấu đường đi \n\nIGRP và EIGRP hoàn toàn tương thích với nhau EIGRP router không có ranh giới \nkhi hoạt động chung với IGRP router. Đặc điểm này rấtquan trọng khi người sử \ndụng muốn tận dụng ưu điểm của cả hai giao thức EIGRP có thể hỗ trợ nhiều loại \ngiao thức khác nhau còn IGRP thì không  \n\nEIGRP và IGRP có cách tính thông số định tuyến khác nhau. EIGRP tăng thông số \nđịnh tuyến của IGRP lên 256 lần vì EIGRP sử dụng thông số 32 bit còn IGRP sử \ndụng thông số 24 bit. Bằng cách nhân lên hoặc chia đi 256 lần , EIGRP có thể dễ \ndàng  chuyển đổi thông số định tuyến của IGRP \n\nIGRP có số lượng hợp tối đa là 255. EIGRP có số lượng họp tối đa là 224 Con số \nnày dư sức đáp ứng cho một mạng được thiết lập hợp lý lớn nhất \n\nĐể các giao thức định tuyến khác nhau như GSPF và RIP chẳng hạn thực hiện chia \nsẻ thông tin định tuyến  với nhau thì cần phải cấu ình nâng cao hơn. Trong khi đó \nIGRP và EIGRP có cùng số AS của hệ tự quản sẽ tự động phân phối và chia sẻ \nthông tin về đường đi với nhau. Trong ví dụ ở hình 3.1.1, RTB tự động phân phối \ncác thông tin về đường đi mà EIGRP học được cho IGRP AS và ngược lại \n\nEIGRP đánh dấu những đường mà nó hoạc được từ IGRP hay từ bất kỳ nguồn bên \nngoài nào khác là đường ngoại vi vì những con đường này không xuất phát từ các \nEIGRP router, IGRP thì không phân biệt đường ngoại vi và nội vi \n\n\n\n 621\n\nVí dụ như hình 3.1.1 trong kết quả hiển thị của lệnh show ip route đường EIGRP \nđược đánh dấu bằng chữ D đường ngoại vi được đánh dấu bằng chữ EX. RTA \nphân biệt giữa mạng học được từ EIGRP và mạng được phân phối  từ IGRP. Trong \nbảng định tuyến của RTC giao thức IGRP không có sự phân biệt này. RTC chỉ \nnhận biết tất cả các đường đều là đường IGRP mặc dù hai mạng 10.1.1.0 và \n172.16.0.0 là phân phối từ EIGRP \n\n \n\n \n\n \n\nHình 3.1.1 \n\n3.1.2 Các khái niệm và thuật ngữ của EIGRP \n\n\n\n 622\n\nEIGRP router lưu giữ các thông tin về đường đi và cấu trúc mạng trên RAM nhờ \nđó chúng đáp ứng nhanh chóng theo sự thay đổi. Giống như  OSPF EIGRP cũng \nlưu những thông tin này thành từng bảng và từng cơ sở dữ liệu khác nhau \n\nEIGRP lưu các con đường mà nó học được theo một cách đặc biệt. Mỗi con đường \ncó trạng thái riêng và có đánh dấu để cung cấp thêm nhiều thông tin hữu dụng \nkhác. \n\nEIGRP có ba loại bảng sau \n\n\u2022 Bảng láng giềng \n\u2022 Bảng cấu trúc mạng \n\u2022 Bảng định tuyến \n\nBảng láng giềng là bảng quan trọng nhất trong EIGRP. Mỗi router EIGRP lưu giữ \nmột bảng láng giềng, trong đó là danh sách các router than mật với nó. Bảng này \ntương tự như cơ sở dữ liệu về các láng giềng của OSPF. Đỗi với mỗi giao thức mà \nEIGRP hỗ trợ, EIGRP có một bảng láng giềng tương ứng \n\nKhi phát hiện một láng giềng mới router sẽ ghi lại địa chỉ và cổng kết nối của láng \ngiềng đó vào bảng láng giềng. Khi láng giềng gửi gói hello. Trong đó có thông số \nvề khoảng thời gian lưu giữ. nếu router không nhận được gói hello khi đến định ký \nthì khoảng thời gian lưu giữ là khoảng thời gian mà router chờ và vẫn xem là \nrouter láng giềng còn kếtnối được nhận được hello từ router láng giềng đó thì xem \nnhư router láng giềng đã không còn kết nối được hoặc không còn hoạt động thuật \ntoán DUAL sẽ thông báo sự thay đổi này và thực hiện tính toán lại theo mạng mới \n\nBảng cấu trúc mạng là bảng cung cấp dữ liệu để xây dựng nên bảng định tuyến của \nEIGRP. DUAL lấy thông tin từ bảng láng giềng và bảng cấu trúc mạng để tính \ntoán chọn đường có chi phí thấp nhất đến từng mạng đích \n\nMỗi EIGRP router lưu một bảng cấu trúc mạng riêng tương ứng với từng loại giao \nthức mạng khác nhau. Bảng cấu trúc mạng chứa thông tin về tất cả các con đương \nmà router học được. Nhờ những thông tin này mà router có thể xác định đường đi \nkhác để thay thế nhanh chóng khi cần thiết. Thuật toán DUAL chọn ra đường tốt \nnhất đến mạng đích gọi là đường chính \n\nSau đây là những thông tin chứa trongbảng cấu trúc mạng: \n\n\n\n 623\n\n\u2022 Feasible distance (FD): là thông số định tuyến nhỏ nhất mà EIGRP tính \nđược cho từng mạng đích \n\n\u2022 Route source là nguồn khởi phát thông tin về một con đường nào đó. Phần \nthông tin này chỉ có đối với những đường được học từ ngoài mạng EIGRP \n\n\u2022 Reported distance (RD) là thông số định tuyến đến một mạng đích do router \nláng giềng thân mật thông báo qua \n\n\u2022 Thông tin về cổng giao tiếp mà route sử dụng để đi đến mạng đích \n\u2022 Trạng thái đường đi: trạng thái không tác động là trạng thái ổn định, sẵn \n\nsang sử dụng được trạng thái tác động là trạng thái đang trong tiến trình tính \ntoán lại của DUAL \n\nBảng định tuyến EIGRP lưu giữ danh sách các đường tốt nhất đến các mạng đích. \nNhững thông tin trong bảng định tuyến được rút ra từ bảng cấu trúc mạng. Router \nEIGRP có bảng định tuyến riêng cho ừng giao thức mạng khác nhau \n\nCon đường được chọn làm đường chính đến mạng đích gọi là đường successor. Từ \nthông tin trong bảng láng giềng và bảng cấu trúc mạng, DUAL chọn ra một đường \nchính và đưa lên bảng định tuyến. Đến một mạng đích có thể có đến 4 successor. \nNhững đường này có chi phí bằng nhau hoặc không bằng nhau. Thông tin về \nsuccessor cũng được đặt trong bảng cấu trúc mạng \n\nĐường Feasible sucessor (FS) là đường dự phòng cho đường successor. Đường \nnày cũng được hcọn ra cùng với đường successor nhưng chúng chỉ được lưu lượng \ntrong b ảng cấu trúc mạng. Đến một mạng đích có thể có nhiều feasible successor \nđược lưu trong bảng cấu trúc mạng nhưng điều này không bắt buộc \n\nRouter xem hợp kế tiếp của đường feasible successor là hop dưới nó, gần mạng \nđích hơn nó. Do đó chi phí của feasible successor được tính bằng chi phí của chính \nnó cộng với chi phí mà router láng giềng thông báo  qua. Trong trường hợp \nsuccessor bị sự cố thì router sẽ tìm feasible successor để thay thế. Một đường \nfeasible successor bắt buộc phải có chi phí mà route láng giềng thông báo qua thấp \nhơn chi phí của đường successor hiện tại. Nếu trong bảng cấu trúc mạng không có \nsẵn đường feasible successor thì con đường đến mạng đích tương ứng được đưa \nvào trạng thái Active và route bắt đầu gửi các gói yêu cầu đến tất cả các láng giềng \nđể tính toán lại cấu trúc mạng . Sau đó với các thông tin mới nhận được router có \nthể sẽ chọn ra được successor mới hoặc feasible successor mới. Đường mới được \nchọn xong sẽ có trạng thái là Passive \n\n \n\n\n\n 624\n\n \n\n \n\nHình 3.1.2.a \n\n \n\n \n\n \n\n\n\n 625\n\n \n\n \n\nHình 3.1.2.b \n\nBảng cấu trúc mạng còn lưu nhiều thông tin khác về các đường đi. EIGRP phân \nloại ra đường nội vi và đường ngoại vi. Đường nội vi là đường xuất phát từ bên \ntrong hệ tự quản EIGRP, EIGRP có dãn nhãn với giá trị từ 0 đến 255 để phân biệt \nđường thuộc loại nào \n\nĐường ngoại vi là đường xuất phát từ bên ngoài AS của EIGRP. Các đường ngoại \nvi là nững đường được học từ các giao thức định tuyến khác như RIP, OSPF và \nIGRP. Đường cố định cũng được xem là đường ngoại vi \n\n\n\n 626\n\n \n\nHình 3.1.2.c \n\n \n\nHình 3.1.2.d \n\n\n\n 627\n\n \n\nHình 3.1.2.e \n\n \n\nHình 3.1.2.f \n\n3.1.3 Các đặc điểm của EIGRP \nEIGRP hoạt động khác với IGRP, về bản chất EIGRP là một giao thức định tuyến \ntheo vectơ khoảng cách nâng cao nhưng khi cập nhật và bảo trì thông tin láng \ngiềng và thông tin định tuyến thì nó làm việc giống như một giao thức định tuyến \ntheo trạng thái đường liên kết . Sau đây là các ưu điểm của EIGRP so với giao thức \nđịnh tuyến theo vectơ khoảng cách thông thường \n\n\n\n 628\n\n\u2022 Tốc độ hội tụ nhanh \n\u2022 Sử dụng băng thông hiệu quả \n\u2022 Có hỗ trợ VLSM và CIDR. Không giống như IGRP EIGRP có trao đổi \n\nthông tin về subnet mask nên nó hỗ trợ được cho hệ thống IP không theo lớp \n\u2022 Hỗ trợ cho nhiều giao thức mạng khác nhau  \n\u2022 Không phụ thuộc vào giao thức được định tuyến. Nhờ cấu trúc từng phần \n\nriêng biệt tương ứng với từng giao thứ mà EIGRP không cần phải chỉnh sửa \nlâu. Ví dụ như khi phát triển để hỗ trợ một giao thức mới như IP chẳng hạn. \nEIGRP cần phải có thêm phần mới tương ứng cho IP nhưng hoàn toàn \nkhông cần phải viết lại EIGRP \n\nEIGRP router hội tụ nhanh vì chúng sử dụng DUAL, DUAL bảo đảm hoạt động \nkhông bị lặp vòng khi tính toán đường đi cho phép mọi router trong hệ thống mạng \nthực hiện đồng bộ cùng lúc khi có sự thay đổi xảy ra \n\nEIGRP sử dụng băng thông hiệu quả vì nó chỉ gửi thông tin cập nhật một phần và \ngiới hạn chứ không gửi toàn bộ bảng định tuyến. Nhờ vậy nó chỉ tổn một lượng \nbăng thông tối thiểu khi hệ thống mạng đã ổn định. điều này tương tự như hoạt \nđộng cập nhật OSPF nhưng không giống như router OSPF router EIGRP chỉ gửi \nthông tin cập nhật một router khác trong vùng như OSPF Chính vì vậy mà hoạt \nđộng cập nhật của EIGRP gọi là cập nhật giới hạn. Thay vì hoạt động cập nhật theo \nchu kỳ các router EIGRP giữ liên lạc với nhau bằng các gói hello rất nhỏ. Việc trao \nđôi các gói hello theo định kỳ không chiểm nhiều băng thông đường truyền \n\nEIGRP có thể hỗ trợ cho IP, IPX và Apple talk nhờ có cấu trúc từng phần theo giao \nthức, EIGRP có thể phân phối thông tin của IPX RIP và SAP để cải tiến hoạt động \ntoàn diện. Trên thực tế EIGRP có thể điều khiển hai giao thức này Router EIGRP \nnhận thông tin định tuyến dịch vụ, chỉ cập nhật cho các router khác nhau khi thông \ntin trong bảng định tuyến hay bảng SAP thay đổi \n\nEIGRP còn có thể điều khiển giao thức Alpha talk routing table maintenance \nProtocol (RTMP) RTMP sử dụng số lượng để chọn đường nên khả năng chọn \nđường khôngđược tốt lắm. Do đó, EIGRP sử dụng thông số định tuyến tổng hợp \ncấu hình được để chọn đường tốt nhất cho mạng Apple talk. Là một giao thức định \ntuyến theo vectơ khoảng cách RTMP thực hiện trao đổi toàn bộ thông tin định \ntuyến theo chu kỳ. Để giảm bớt sự quá tải này EIGRP thựch iện phân phối thông \ntin định tuyến Apple talk khi có sự kiện thay đổi mà thôi. Tuy nhiên apple talk \nclient cũng muốn nhận thông tin RTMP từ các router nội bộ do đó EIGRP dùng \n\n\n\n 629\n\ncho Apple talk chỉ nên chạy trong mạng không có client ví dụ nhưcác liên kết \nWAN chẳng hạn \n\n3.1.4 Các kỹ thuậtcủa EIGRP \nEIGRP có rất nhiều kỹ thuật mới để cải tiến hiệu quả hoạt động tốc độ hội tụ và \ncác chức năng so với IGRP và các giao thức định tuyến khác. Các kỹ thuật này \nđược tập trung thành 4 loại như sau: \n\n\u2022 Sự phát hiện và tái phát hiện các router láng giềng \n\u2022 Giao thức truyền tải tin cậy \n\u2022 thuật toán DUAL finite \u2013 sate machine \n\u2022 Cấu trúc từng phần theo giao thức \n\nRouter định tuyến theo vectơ khoảng cách dạng đơn giản không thiết lập mối quan \nhệ với các láng giềng của nó. RIP và IGRP route chỉ đơn giản là phát quảng bá hay \nmulticast các thông tin cập nhật của nó ra mọi cổng đã được cấu hình. Ngược lại, \nEIGRP router chủ động thiết lập mối quan hệ với các láng giềng của chúng tương \ntự như cách làm của OSPF router \n\n \n\n \n\nHình 3.1.4 \n\nQuá trình EIGRP router thiết lập mối quan hệ than mật được mô tả trong hình \n3.1.4. EIGRP route sử dụng các gói hello rất nhỏ để thực hiện việc thiết lập mối \n\n\n\n 630\n\nquan hệ than mật với các router láng giềng. Mặc định hello được gửi đi theo chu kỳ \nlà 5 giây. Nếu router vẫn nhận được hello từ láng giềng thì nó sẽ xem như láng \ngiềng này và các đường đi của nó vẫn còn hoạt động . Bằng cách thiết lập mối \nquan hệ này, EIGRP router có thể thực hiện được những việc sau \n- Tự động học được đường mới khi chúng kết nối vào hệ thống mạng \n\n- Xác định một router không còn kết nối hoặc không còn hoạt động nữa \n- Phát hiện sự hoạt động trỏ lại của các  router \n\nGiao thức vận chuyển tin cậy RTP là giao thức ở lớp vận chuyển thực hiện chuyển \ngói EIGRP một cách tin cậy và có thứ tự đến tất cả các láng giềng. Trong mạng IP \nhost sử dụng TCP để vận chuyển các gói một cách tuần tự và tin cậy. Tuy nhiên \nEIGRP là một giao thức độc lập với giao thức mạng do đó nó không dựa vào \nTCP/IP để thực hiện trao đổi thông tin định tuyến giống như RIP, IGRP và OSPF \nđã làm . Để không bị phụ thuộc vào IP, ẺIGP sử dụng RTP làm giao thức vận \nchuyển riêng độc quyền của nó để đảm bảo việc truyền thông tin định tuyến \n\nEIGRP có thể yêu cầu RTP cung cấp dịch vụ truyền tin cậy hoặc không tin cậy tuỳ \ntheo yêu cầu của từng trường hợp. Ví dụ các gói hello được truyền theo định kỳ và \ncần phải càng nhỏ càng tốt nên chúng không cần phải dùng chế độ truyền tin cậy. \nNgược lại việc truyền tin cậy các thông tin định tuyến sẽ có thể làm tăng tốc độ hội \ntụ vì EIGRP router không cần hết thời hạn mới truyền lại \n\nVới RTP, EIGRP có thể gửi multicast và trực tiếp cho các đối tác khác nhau cùng \nmột lúc giúp tối ưu hiệu quả hoạt động \n\nThành phần trung tâm của EIGRP là thuật toán DUAL là bộ máy tính toán đường \nđi cuả EIGRP. Tên đầy đủ của kỹ thuật này là DUAL finite  - state machine . FMS \nlà một bộ máy thuật toán nhưng không phải là một thiết bị cơ khí có các thành \nphần di chuyển được. FSM định nghĩa một tập hợp các trạng thái có thể trải qua, \nsự kiện nào gây ra trạng thái nào và sẽ có kết quả là gì. Người thiết kế sử dụng \nFSM để lập trình cách mà một thíêt bị một chương trình máy tính hay một thuật \ntoán định tuyến sẽ xử lý như thế nào với một tập hợp các dữ kiện đầu vào. DUAL \nFSM chứa tất cả các logic được sử dụng để tính toán và so sánh đường đi trong \nmạch EIGRP \n\nDUAL lưu tất cả các đường mà láng giềng thông báo qua. Dựa trên thông số định \ntuyến tổng hợp của mỗi đường, DUAL so sánh và chọn ra đường có chi phí thấp \n\n\n\n 631\n\nnhất đến đích. DUAL đảm bảo mỗi một đường này là không có lặp vòng. Đường \nchính được chọn ra gọi là đường successor. Đường successor được lưu trên bảng \nđịnh tuyến và đồng thời cũng được lưu trong bảng cấu trúc mạng \n\nEIGRP giữ các thông tin quan trọng về đường đi và cấu trúc mạng trong bảng láng \ngiềng và bảng cấu trúc mạng. Hai bảng này cung cấp cho DUAL các thông tin về \nđường đi khi cần thiết. Nếu có một đường liên kết bị đứt, DUAL sẽ tìm đường thay \nthế hoặc một feasible successor trong bảng cấu trúc mạng \n\nMột trong những ưu điểm nổi bật của EIGRP là nó được thiết kế thành từng phần \nriêng  biệt theo giao thức. Nhờ cấu trúc này, nó có khả năng mở rộng và tương \nthích tốt nhất. Các giao thức được định tuyến như IP, IPX và Apple Talk được đưa \nvào EIGRP thông qua các PDM EIGRP có thể dễ dàng tương thích với giao thức \nđược định tuyến mới hoặc các phiên bản mới của chúng như IPv6 chẳng hạn bằng \ncách thêm PDM vào. \n\nMỗi PDM chịu trách nhiệm thực hiện mọi chức năng liên qan đến một giao thức \nđược định tuyến. Ví dụ phần IP \u2013 EIGRP chịu trách nhiệm các việc sau: \n\n\u2022 Gửi và nhận các gói EIGRP chứa dữ liệu IP \n\u2022 Thông báo cho DUAL khi nhận được thông tin định tuyến IP mới \n\u2022 Duy trì kết quả chọn đường của DUAL trong bảng định tuyến IP \n\u2022 Phân phối thông tin định tuyến mà nó học được từ các giao thức định tuyến \n\nIP khác \n3.1.5 Cấu trúc dữ liệu của EIGRP \n\nGiống như OSPF EIGRP dựa vào nhiều loại gói dữ liệu khác nhau để duy trì các \nloại bảng của nó và thiết lập mối quan hệ phức tạp với router láng giềng \n\nCó 5 loại gói EIGRP \n\n\u2022 Hello \n\u2022 Báo  nhận \n\u2022 Cập nhật \n\u2022 Yêu cầu  \n\u2022 Đáp úng \n\nEIGRP dựa vào các gói hello để phát hiện, kiểm tra và tái phát hiện các router láng \ngiềng. Tái phát hiện có nghĩa là router EIGRP không nhận được hello từ một router \n\n\n\n 632\n\nláng giềng trong suốt khoảng thời gian lưu giữ nhưng sau đó router láng giềng này \nlại tái lập lại thông tin liên lạc \n\nChu kỳ gửi hello của EIGRP router có thể cấu hình được. Khoảng thời gian hello \nmặc định phụ thuộc vào băng thông trên từng cổng của router. Trong mạng IP, \nEIGRP router gửi hello theo địa chỉ multicast 224.0.0.10 \n\nEIGRP router lưu thông tin về các láng giềng trong bảng láng giềng. Bảng láng \ngiềng này có lưu số thứ tự và thời gian lưu giữ của gói EIGRP cuối nhận được từ \nmỗi router láng giềng. Theo định kỳ và trong giới hạn củak hoảng thời gian lưu \ngiữ. Router phải nhận được gói EIGRP thì những đường tương ứng mới có trạng \nthái Pasive. Trạng thái Passive có nghĩa là trạng thái hoạt động ổn định \n\nNếu roter không nghe ngóng được gì về router láng giềng trong suốt khoảng thời \ngian lưu giữ thì EIGRP sẽ xem như láng giềng đó đã bị sự cố và DUAL phải tính \noná lại bảng định tuyến. Mặc định khoảng thời gian lưu giữ gấp 3 lần chu kỳ hello. \nNgười quản trị mạng có thể cấu hình giá trị cho 2 khoảng thời gian này phù hợp \nhơn với hệ thống của mình \n\n \n\nHình 3.1.5 \n\nOSPF bắt buộc các router láng giềng với nhau phải có cùng khoảng thời gian hello \nvà khoảng thời gian bất đọng thì mới có thể thông tin liên lác với nhau được. \nEIGRP thì không yêu cầu như vậy. Router sẽ học các khoảng thời gian của router \nláng giềng thông qua việc trao đổi gói hello. Chúng sẽ dùng thông tin trong đó thiết \nlập mối quan hệ ổn định mà không cần các khoảng thời gian này phải giống nhau \ngiữa chúng. \n\nGói hello thường được gửi theo chế độ không bảo đảm tin cậy. Điều này có nghĩa \nlà không có báo nhận cho các gói hello \n\n\n\n 633\n\nEIGRP router sử dụng gói báo nhận để xác nhận là đã nhận được gói EIGRP trong \nquá trình trao đổi tin cậy. Giao thức vận chuyển tin câỵ cung cấp dịch vụ liên lạc \ntin cậy giữa hai host EIGRP. Gói báo nhận chính là gói hello mà không có dữ liệu. \nKhông giống như hello được gửi multicast các gói báo nhận chỉ gửi trực tiếp cho \nmột máy nhận. Báo nhận có thể được kết hợp vào loại gói EIGRP khác như gói trả \nlời chẳng hạn \n\nGói cập nhật được sử dụng khi router phát hiện một láng giềng mới. Router EIGRP \nsẽ gửi gói cập nhật cho router láng giềng mới này để nó có thể xây dựng bảng cấu \ntrúc mạng. Có thể sẽ cần nhiều gói cập nhật mới có thể truyền tải hết các thông tin \ncấu trúc to \n\nGói cập nhật còn được sử dụng khi router phát hiện sự thay đổi trong cấu trúc \nmạng. Trong trường hợp này EIGRP router sẽ gửi multicast gói cập nhật cho mọi \nrouter láng giềng của nó để thông báo về sự thay đổi . Mọi gói cập nhật đều được \ngửi bảo đảm \n\nEIGRP router sử dụng gói yêu cầu khi nó cần một thông tin đặc biệt nào đó từ một \nhay nhiều láng giềng của nó. Gói đáp ứng được sử dụng để trả lời cho các gói yêu \ncầu \n\nNếu một EIGRP router mất successor và nó không tìm được feasible successor để \nthay thế thì DUAL sẽ đặt con đường đến mạng đích đó vào trạng thái Active. Sau \nđó route gửi multicast gói yêu cầu đến tất cả các láng giềng để cố gắng tìm \nsuccessor mới cho mạng đích này. Router láng giềng phải trả lời bằng gói đáp ứng \nđể cung cấp thông tin hoặc cho biết là không có thông tin nào khác có thể khả thi. \nGói yêu cầu có thể được gửi multicast hoặc chỉ gửi cho một máy, còn gói đáp ứng \nthì chỉ gửi cho máy nào gửi yêu cầu mà thôi. Cả hai loại gói này đều được gửi bảo \nđảm \n\n3.1.6 Thuật toán EIGRP \nThuật toán DUAL phức tạp giúp co EIGRP hội tụ nhanh. Để hiểu rõ hơn về quá \ntrình hội tụ với DUAL ta étt ví dụ ở hình 3.1.6.a. Mỗi router xấy dựng một bảng \ncấu trúc mạng chứa các thông tin về đường đi đến mạng A \n\nMỗi bảng cấu trúc mạng trong ví dụ ở các hình 3.1.6.a \u2013 f có các thông tin sau \n\n\u2022 Giao thức định tuyến là giao thức EIGRP \n\n\n\n 634\n\n\u2022 Chi phí thấp nhất của đường đến một mạng đích gọi là Feasible Distance \n\u2022 Chi phí của đường đến một mạng đích do router láng giềng thông báo qua \n\ngọi là Reported Distance \nNguyên tắc chọn đừờng feasible successor \n\n1. Đường feasible successor là đường dự phòng thay thế cho đường successor \nkhi đường này bị sự cố \n\n2. Reported Distance của một đường đến một đích nào đó là chi phí được thông \nbáo từ router láng giềng. Chi phí này phải nhỏ hơn Feasible Distance của \nđường successor hiện tại \n\n3. Nếu thoả điều kiện trên thì có nghĩa là không có vòng lặp đường đó sẽ được \nchọn làm feasible successor \n\n4. Đường feasible successor có thể thay thế cho đường successor khi cần thiết \n5. Nếu RD của mộ đường lớn hơn hoặc bằng FD của successor hiện tại đường \n\nđó không được chọn làm feasible successor \n6. Router phải tính toán cấu trúc mạng bằng cách thu thập thông tin từ tất cả \n\ncác láng giềng \n7. Router gửi gói các yêu cầu đến tất cả các láng giềng để tìm thông tin về \n\nđường đi và chi phí của đường đó đến mạng đích mà router đang cần \n8. Tất cả các láng giềng phải gửi gói đáp ứng để trả lời cho gói yêu cầu \n9. Router ghi nhận dữ liệu mới nhận được vào bảng cấu trúc mạngcủa mình \n10. Bây giờ DUAL đã có thể xác định đường successor mới và feasible \n\nsuccessor mới nếu có dựa vào thông tin mới \n \n\n \nHình 3.1.6.a \n\n\n\n 635\n\nCột Topology trong hình cho biết đường nào là đường chính hay còn gọi là \nsuccessor, đưòng nào là đường dự phòng hay còn gọi là feasible successor. Tuy \nnhiên bạn cần lưu ý là không nhất thiết lúc nào cũng phải tìm được feasible \nsuccessor \n\nMạng EIGRP sẽ hoạt động theo các bước mô tả bên dưới để tiến hành hội tụ giữa \ncác router. Hiện tại các router có các thông tin về đường đến Mạng A như sau\u201d \n\nRouter C có một đường successor là đường qua Router B \n\nRouter C có một đường f easible succ esor là đường qua Router B \n\nRouter D có một đường successor là đường qua Router B \n\nRouter D không có đường feasible successor \n\nRouter E có một đường successor là đường qua router D \n\nRouter E không có đường feasible successor \n\nSau đây sẽ mô tả mỗi router thực hiện nguyên tắc chọn feasible successor như thế \nnào khi đường liên kết giữa router D và router B bị đứt \n\n \n\nHình 3.1.6.b \n\nTrong router D (hình 3.1.6.B) \n\n\n\n 636\n\n\u2022 Đường đi qua router B bị xoá khỏi bảng cấu trúc mạng \n\u2022 Đường này là đường successor. Router không xác định được feasible \n\nsuccessor trước đó \n\u2022 Router D phải tính toán lại đường mới \n\nTrong Router C: \nĐường đến mạng A qua router D bị đứt \n\nĐường này bị xoá khỏi bảng \n\nĐường này là successor của router C \n\n \n\n \n\nHình 3.1.6.c \n\nTrong router D  \n\n\u2022 Router D không có feasible successor. Do đó nó không thể chuyển qua \nđường dự phòng được \n\n\u2022 Router D phải tính toán lại cấu trúc mạng. Con đường đến Mạng A được đặt \nvào trạng thái Active \n\n\u2022 Router D gửi gói yêu cầu cho tất cả các láng giềng kết nối với nó là router C \nvà router R để yêu cầu gửi thông tin về mạng \n\n\u2022 Trước đó router C có đường qua router D \n\u2022 Trước đó router D không có đường qua router E \n\nTrong router E: \n\n\u2022 Đường đến Mạng A thông qua router D bị đứt \n\u2022 Đường này là đường successor của router E \n\u2022 Router E không có feasible successor \n\n\n\n 637\n\n\u2022 Lưu ý rằng RD của đường thông qua Router C là 3 bằng với chi phí của \nđường successor  qua router D \n\n \nHình 3.1..6.d \n\nTrong router C  \n\n\u2022 Router E gửi gói yêu câud cho Router C \n\u2022 Router C xoá đường qua Router khỏi bảng \n\u2022 Router C trả lời cho Router với thông tin về đường mới đến Mạng A \n\nTrong Router D \n\n\u2022 Trạng thái của đường đến Mạng A vẫn là Active vì công việc tính toán lại \nchưa hoàn tất \n\n\u2022 Router C trả lời cho Router D để xác nhận là đường đến mạng A đang hoạt \nđộng  với chi phí là 5 \n\n\u2022 Router D vấn đangchờ đáp ứng từ router E \nTrong router E \n\n\u2022 Router E không có feasible successor đến Mạng A \n\u2022 Do đó, router E đánh dấu trạng thái con đường đến mạng A là Active \n\u2022 Router E phải tính toán lại cấu trúc mạng \n\u2022 Router E xoá đường đi qua Router D ra khỏi bảng \n\u2022 Router E gửi gói yêu cầu cho router C để yêu cầu thông tin về mạng \n\u2022 Trước đó, router E đã có thông tin về đường đi qua router C. Đường này có \n\nchi phí là 3 , bằng với chi phí của đường successor \n\n\n\n 638\n\n \nHình 3.1.6.e \n\nTrong router E (hình 3.1.6.e) \n\n\u2022 Router C trả lời lại thông tin về đường đến Mạng A có RD là 3 \n\u2022 Bây giờ router E có thể chọn đường qua router C làm successor mới với FD \n\nlà 4 và RD là 3 \n\u2022 Trạng thái của đường đến Mạng A được đổi từ Active sang Pasive. Lưu ý  \n\ntrạng thái Passive là trạng thái mặc định khi router vẫn nhận được gói hello \ntừ đường đó. Do đó trong ví dụ này chỉ cần đánh dấu trạng thái Active thôi \n\n \n\n \nHình 3.1.6.f \n\nTrong router E (hình 3.1.6f) \n\n\u2022 Router E gửi đáp ứng cho Router D để cung cấp thông tin về mạng của \nrouter E \n\n\n\n 639\n\nTrong router D \n\n\u2022 Router D nhận được gói  hồi đáp từ router E với những thông tin về mạng \ncủa router E \n\n\u2022 Router D ghi nhận con đường đến Mạng A thông qua router E \n\u2022 Con đường này trở thành một đường successor nữa vì nó có chi phí bằng với \n\nđường thông qua router C và nó có RD nhỏ hơn FD của đường thông qua \nrouter  \n\nQuá trình hội tụ xảy ra giữa mọi router EIGRP sử dụng thuật toán DUAL \n\n3.2 Cấu hình EIGRP \n\n3.2.1 Cấu hình EIGRP \n\nTrù thuật toán DUAL là phức tạp còn cấu hình EIGRP thì khá đơn giản tuỳ theo \ngiao thức được định tuyến là IP, IPX hay Apple Talk mà câu lệnh cấu hình EIGRP \nsẽ khác nhau. Phần sau đây chỉ đề cập đếncấu hình EIGRP cho giao thức IP \n\n \n\nHình 3.2.1 \n\nSau đây là các bước cấu hình EIGRP cho ip \n\n1. Sử dụng lệnh sau khởi động EIGRP và xác định con số của hệ tự quản \nThông số autonomous system number xác định các router trong một hệ tự quản. \nNhững router nào trong cùng một hệ thống mạng thì phải có con số này giống nhau \n\n\n\n 640\n\n2. Khai báo những mạng nào của router mà bạn đang cấu hình thuộc về hệ tự \nquản  \n\nThông số network number là địa chỉ mạng của các cổng giao tiếp trên router thuộc \nvề hệ thống mạng EIGRP. Router sẽ thực hiện \n\n5.1 C¸c kh¸i niÖm vÒ Frame Relay: \n\n5.1.1 Giíi thiÖu Frame Relay: \n\n Frame Relay lµ chuÈn cña ITU-T(International Telec«munication Union \nTelcommunication Stan®ardization Sector) vµ WASI (American NatÞonal Standards \nInstitute). Frame Relay lµ dÞch vô WAN chuyÓn m¹ch gãi theo h−íng kÕt nèi. \nFrame Relay ho¹t ®éng ë líp Liªn kÕt d÷ liÖu cña m« h×nh OSI. Frame Relay sö \ndông mét phÇn giao thøc HDLC lµm giao thøc LAPF (Link Access Procedure for \nFrame Relay). Frame Relay thùc hiÖn truyÒn frame gi÷a thiÕt bÞ cña ng−êi dïng \nDTE vµ thiÕt bÞ DCE t¹i danh giíi cña m¹ng WAN. \n\n \n\n Ban ®Çu Frane Relay  ®−îc thiÕt kÕ ®Ó cho phÐp thiÕt bÞ ISDN cã thÓ truy cËp \nvµo dÞch vô chuyÓn m¹ch gãi trªn kªnh B. Nh−ng b©y giê Frame Relay ®· lµ mét \nc«ng nghÖ hoµn toµn ®éc lËp. \n\n M¹ng Frame Relay cã thÓ thuéc së h÷u riªng cña ng−êi dïng nh−ng th«ng \nth−êng lµ ®−îc cung cÊp bëi c¸c c«ng ty dÞch vô viÔn th«ng. \n\n Frame Realay th−êng ®−îc sö dông ®Ó kÕt nèi c¸c m¹ng LAN. Mçi Router \nbiªn giíi cña mét m¹ng LAN lµ mét DTE. Mét kÕt nèi nèi tiÕp, vÝ dô nh− E1/T1, sÏ \nkÕt nèi vµo Frame Relay switch gÇn nhÊt cña nhµ cung cÊp dÞch vô. Frame Relay \nswitch chÝnh lµ thiÕt bÞ DCE. \n\n \n\n\n\n 641\n\n \n\n \n\n \n\n \n\n \n\n\n\n 642\n\n ThiÕt bÞ m¸y tÝnh kh«ng n»m trong mét m¹ng LAN còng cã thÓ göi d÷ liÖu \nqua m¹ng Frame Relay. ThiÕt bÞ m¸y tÝnh nµy sö dông thiÕt bÞ truy cËp Frame \nRelay (FRAD) lµm DTE. \n\n5.1.2 C¸c thuËt ng÷ cña Frame Relay: \n\n KÕt nèi gi÷a hai DTE qua m¹ng Frame Relay ®−îc gäi lµ kÕt nèi ¶o (VC \u2013 \nVirtual Circuit). C¸c kÕt nèi ¶o chuyÓn m¹ch (SVC \u2013 Switched virtual               \n\nCircuit) cã thÓ ®−îc thiÕt lËp tù ®éng b»ng c¸ch göi ®i c¸c th«ng ®iÖp b¸o hiÖu. Tuy \nnhiªn SVC kh«ng ®−îc sö dông phæ biÕn l¾m.KÕt nèi ¶o cè ®Þnh PVC (Permanent \nvirtual circuit) ®−îc sö dông nhiÒu h¬n víi cÊu h×nh dÞnh tr−¬c cña nhµ cung cÊp. \nTrªn mçi Frame Relay switch cã l−u gi÷ s¬ ®å ¸nh x¹ gi÷a port vµo vµ port ra \nt−¬ng øng víi mçi VC. Do ®ã mçi kÕt nèi VC ®−îc thiÕt lËp tõ mét ®iÓm cuèi \nth«ng qua c¸c switch ®eens ®iÓm cuèi ®−îc x¸c ®Þnh duy nhÊt. \n\n \n\n \n\n \n\n\n\n 643\n\n \n\n \n\n \n\n \n\n\n\n 644\n\n \n\n \n\n \n\n Frame Relay ®−îc thiÕt kÕ ®Ó ho¹t  ®éng trªn ®−êng truyÒn sè chÊt l−îng \ncao, Frame Realy kh«ng cã c¬ chÕ kh¾c phôc lçi. Nõu thiÕt bÞ nµo trªn ®−êng \ntruyÒn ph¸t hiÖn frame bÞ lçi th× hñy bá frame ®ã mµ kh«ng cÇn th«ng b¸o. \n\n Mçi router hay FRAD kÕt nèi ¶o vµo m¹ng Frame Relay ®Òu cã thÓ cã nhiÒu \nkÕt nèi ¶o ®Õn nhiÒu ®iÓm cuèi kh¸c nhau. Mçi kÕt nèi ®Çu cuèi chØ cÇn cã mét \ncæng vËt lý vµ mét kÕt nèi  vËt lý, trªn ®ã thiÕt lËp ®−îc nhiÒu kÕt nèi ¶o ®Õn nhiÒu \n®iÓm ®Ých kh¸c nhau. Do ®ã m¹ng Frame Relay gi¶m ®−îc nhiÒu chi phÝ l¾p ®Æt v× \nkh«ng cÇn t¹o m¹ng h×nh l−íi víi nhiÒu ®−êng truyÒn vËt lý. H¬n n÷a chóng ta cßn \n\n\n\n 645\n\ntiÕt kiÖm ®−îc tiÒn thuª bao v× dung l−îng  cña ®−êng truyÒn vËt lý phô htuéc vµo \nb¨ng th«ng trung b×nh cña c¸c VC thay v× phô thuéc vµo chu cÇu tæng b¨ng th«ng \ntèi ®a. \n\n C¸c kÕt nèi ¶o VC trªn cïng mét ®−êng truyÒn vËt lý vÉn ®−îc ph©n biÖt víi \nnhau v× mçi VC cã mét chØ sè DLCI riªng. ChØ sè DLCI (D©t Link Connection \nIdentifier) ®−îc ghi trong mçi frame d÷ liÖu truyÒn ®i. ChØ sèDLCI chØ co ý nghÜa \nnéi bé, cã nghÜa lµ no chØ cã duy nhÊt ®èi víi kªnh vËt lý mµ nã thuéc vÒ mµ th«i. \nDo ®ã thiÕt bÞ ë ®Çu bªn kia cã thÓ sö dông mét chØ sè kh¸c ®Ó  quy −íc cho cïng \nmét kÕt nèi ¶o VC. \n\n \n\n \n\n5.1.3 §ãng gãi Frame Relay: \n\n §ãng gãi Frame Relay thùc hiÖn theo ph©n líp nh− sau: \n\n\u2022 NhËn gãi d÷ liÖu tõ líp M¹ng, vÝ dô gãi IP hay IPX. \n\u2022 §ãng gãi thµng frame cña Frame Relay.  \n\u2022 ChuyÓn frame xuèng líp VËt lý ®Ó truyÒn xuèng ®−êng truyÒn. \n\n \n\nLíp vËt lý th−ênglµ EIA/TIA-232, 449 hay 530, V.35, X.21. Frame cña \nFrame Relay sö dông mét phÇn ®Þnh d¹ng cña frame HDLC. Do®ã còng cã phÇn cê \n01111110. PhÇn FCS  (Frame Check Sequence) ®−îc sö dông ®Ó kÓim tra lçi cña \nframe.Gi¸ trÞ FCS®−îc tÝnh ra tr−íc khi truyÒn frame ®ivµ ®−îc ghi vµo phÇn FCS \ncña frame. ThiÕt bÞ nhËn frame còng tÝnh l¹i gi¸ trÞ FCS vµ so s¸nh víi gi¸ trÞ FCS \nghi trong frame nhËn ®−îc. Nõu hai gi¸ trÞ gièng nhau thi frame ®−îc tiÕp tôc xö \n\n\n\n 646\n\nlý. Nõu hai gi¸ trÞ kh¸c nhau cã nghÜ la frmae bÞ lçi, lËp tøc frame bÞ hñy bá vµ \nkh«ng hÒ th«ng b¸o cho thiÕt bÞ nguån. ViÖn kiÓm so¸t lçi ®−îc giao cho c¸c líp \ntrªn cña m« h×nh OSI ®¶m tr¸ch. \n\n \n\n \n\n \n\n \n\n \n\n5.1.4 B¨ng th«ng vµ ®iÒu khiÓn luång trong Frame Relay: \n\n Tèc ®é ®−êng truyÒn nèi tiÕp trong m¹ng Frame Relay chÝnh lµ tèc ®é truy \ncËp hay tèc ®é port. Tèc ®é port th−êng n»m trong kho¶ng tõ 64 kb/gi©y ®Õn 4 \nMb/gi©y. Mét sè nhµ cung cÊp dÞch vô cßn cung cÊp tèc ®é lªn ®Õn 45 Mb/gi©y. \n\n Tren mét ®−êng truyÒn vËt lý ho¹t ®éng ®ång thêi nhiÒu kÕt nèi ¶o PVC, mçi \nVC co mét l−îng b¨ng th«ng riªng nhÊt ®Þnh. B¨ng th«ng nµy chÝnh lµ b¨ng th«ng \ncam kÕt cña nhµ cung cÊp dÞch vô, gäi la CIR (Commited Information Rate). Nhµ \ncung cÊp dÞch vô ®ång ý chÊp nhËn l−îng bÝt nµy trªn mét VC. \n\n Mçi CIR cã gi¸ trÞ nhá h¬n tèc ®ä port. Nh−ng tæng c¸c CIR trªn mät port \nl¹i lín h¬n tèc ®é port, th−êng lµ lín h¬n kho¶ng 2 hay 3 lÇn,v× c¸c kªnh ¶o ho¹t \n\n\n\n 647\n\n®éng víi dung l−îng kh¸c nhau t¹i mçi thíi ®iÓm vµ kh«ng ®ång thêi sö dông tèi \n®a b¨ng th«ng cña m×nh. \n\n Khi truyÒn frame ,mçi bÝt ®−îc ph¸t ®i víi tèc ®é port. Do ®ã nÕu l−îng bÝt \ntrung b×nh trªn VC ®· b»ng víi CIR th× sÏ ph¶i cã kho¶ng thêi gian nghØ gi÷a hai \nframe. \n\n Frame Relay switch còng chÊp nhËn frame ®−îc göi tõ DTE víi tèc ®é cao \nh¬n CIR. Nh− vËy mçi VC cã thÓ sö dông b¨ng th«ng theo nhu cÇulªn ®Õn møc tèi \n®a lµ tèc ®é port. Mét sè nhµ cung cÊp cã thÓ quy −¬c møc ®é tèi ®a nµy thÊp h¬n \ntèc ®é port. Møc chªnh lÖch gi÷a CIR vµ møc tèi ®a gäi lµ ERI (Ecs Information \nRate). \n\n Kho¶ng thêi gian (chu kú) ®Ó tÝnh tèc ®é ®−îc gäi la Tc (Committed Time). \nSè l−îng bit trong mét chu kú ®−îc gäi la Bc (Committed Burst). Sè l−îng bit \nchªnh lÖch gi÷a Bc vµ møc tèi ®a (lµ tèc ®é vËt lý cña ®−êng truyÒn) ®−îc gäi la Be \n(Ecs Burst). \n\n MÆc dï switch vÉn chÊp nhËn c¸c frame ®−îc truyÒn víi tèc ®é v−ît qu¸ \nCIR,nh−ng mçi frame v−ît tiªu chuÈn nµy ®−îc switch ®¸nh dÊu b»ng c¸ch ®Æt bit \nDE cña frame (Discard Eligible) lªn 1. \n\n Switch co mét ®ång hå ®Õm bit t−¬ng øng víi mçi VC. Khi switch nhËn \nframe vao, nÕu frame nµy v−ît qu¸ sè l−îng Bc th× frame sÏ ®−î ®¸nh dÊu bit DE. \nFrame nhËn vµo sÏ bÞ hñy bá khi sè l−îng bit v−ît qu¸ Bc + Be. Cuèi mçi chu kú \nTc switch sÏ khëi ®éng l¹i ®ång hå ®Õm bit. \n\n Frame sau khi ®−îc nhËn vµo switch sÏ ®−îc xÕp hµng ®îi chuyÓn ra. Tuy \nnhiªn nÕu sè l−îng fame qu¸ nhiÒu sÏ lµm trµn hµng ®îi, thêi gian trÔ sÏ t¨ng lªn. \nMét sè giao thøc líp trªn cã yªu cÇu truyÒn l¹i khi kh«ng nhËn ®−îc d÷ liÖu sau \nmét thêi gian nhÊt ®Þnh. Nh−ng do thêi gian trÔ qu¸ lín, yªu cÇu truyÒn l¹i kh«ng \nthÓ thùc hiÖn ®−îc. Tr−êng hîp nµy sÏ lµm tôp gi¶m th«ng l−îng m¹ng nghiªm \nträng \n\n §Ó tr¸nh sù cè nµy, Frame Relay switch cã chÝnh s¸ch hñy bít frame trong \nhµng ®îi ®Ó gi÷ hµng ®îi kh«ng qu¸ dµi. Nh÷ng frame nµo cã bit DE sÏ ®−îc ®Æt \nlªn hñy bá tr−êc tiªn.  \n\n Khi switch nhËn hµng ®îi cña nã ®ang t¨ng lªn th× nã sÏ cè g¾ng t×m c¸ch \nlµm gi¶m dßng truyÒn frame tõ DTE ®Õn nã. Switch thùc hiÖn ®Æt bit b¸o nghÏn \n\n\n\n 648\n\nECN (Explicit Congestion Notification) vµo phÇn ®Þa chØcña frame mµ switch sÏ \ntruyÒn l¹i cho DTE. \n\n Bit FECN (Forward ECN) ®−î cµi ®Æt vµo mçi frame mµ siwtch sÏ göi ra \n®−êng truyÒn ®ang bÞ nghÏn ®Ó th«ng b¸o nghÏn cho c¸c thiÕt bÞ kÕ tiÕp. Bit BECN \n(Back ECN) ®−îc cµi ®Æt trong mçi frame mµ switch sÏ göi ng−îc l¹i cho thiÕt bÞ \ntr−íc nã. DTE sÏ nhËn ®−îc c¸c frame cã bit ECN ®−îc cµi ®Æt trong ®ã vµ sau ®o \nsÏ gi¶m dßng truyÒn frame lai cho ®Õn khi kh«ng cßn nghÏn m¹ch n÷a. \n\n NÕu nghÏn m¹ch x¶y ra trªn ®−êng kÕt nèi gi÷a c¸c switch th× DTE bªn d−íi \ncòng cã thÓ nhËn ®−îc th«ng b¸o nghÏn m¹ch mÆc dï nã kh«ng ph¶i lµ thiÕt bÞ g©y \nra nghÏn m¹ch. \n\n C¸c bit DEM, FECN, BECN lµ nh÷ng bit n»m trong phÇn ®Þa chØ cña frame \nLAPP. \n\n \n\n \n\n \n\n \n\n \n\n\n\n 649\n\n \n\n \n\n5.1.5  ¸nh x¹ ®Þa chØ vµ m« h×nh m¹ng Frame Realy: \n\n Khi chóng ta cÇn liªn kÕt  nhiÒu m¹ng víi nhau th× chóng ta cÇn quan t©m \n®Õn m« h×nh kÕt nèi gi÷a c¸c m¹ng. \n\n Nõu chóng ta chØ cÇn kÕt nèi hai m¹ng víi nhau b»ng kÕt nèi ®iÓm-nèi-®iÓm \nth× lîi thÕ chi  phÝ thÊp cña Frame Relay kh«ng ®¸ng kÓ. Frame Relay sÏ rÊt cã lîi \nvÒ mÆt chi phÝ nÕu chóng ta liªn kÕt nhiÒu m¹ng víi nhau. \n\n WAN th−êng ®−îc liªn kÕt theo cÊu tróc h×nh sao. DÞch vô chÝnh ®−îc ®Æt ¬ \nmét m¹ng trung t©m vµ mçi m¹ng ë xa cÇn truy cËp dÞch vô th× kÕt nèi vµo m¹ng \ntrung tam. Víi c¸ch kÕt nèi h×nh sao nh− vËy cho ®−êng thue riªng, chi phÝ sÏ ®−îc \ngi¶m tèi ®a. \n\n \n\n \n\n Nõu chóng ta kÕt nèi m¹ng h×nh sao cho Frame Relay, mçi m¹ng ë xa sÏ cã \nmét kÕt nèi v¸o ®¸m m©y Frame Relay víi mét kÕt nèi VC. M¹ng trung t©m còng \n\n\n\n 650\n\ncã mét kÕt nèi vµo ®¸m m©y Frame Relay nh−ng trªn ®ã cã nhiÒu VC kÕt nèi ®Õn \nc¸c m¹ng  xa. TiÒn c−íc cña m¹ng Frame Relay kh«ng tÝnh theo kho¶ng c¸ch kÐo \nc¸p nªn vÞ trÝ ®Þa lý cña m¹ng trung t©m kh«ng nhÊt thiÕt ph¶i n»m ë gi÷a. \n\n \n\n Chóng ta nªn chän m« h×nh m¹ng h×nh l−íi nÕu c¸c ®iÓm truy cËp dÞch vô bÞ \nph©n t¸n vÒ mÆt ®Þa lý vµ đường truy cập cã yªu cầu cao về độ tin cậy. Với mạng \nlưới, mỗi mạng lưới phải có đường kết nối đến tất cả các mạng còn lại. Tuy nhiên, \nkhông giống như đường truyền thuê riêng, chúng ta có thể triển khai mạng hình \nlưới trong Frame Relay mà không cần phải tăng thêm nhiều VC trên một đường \ntruyền vật lý là có thể nâng cấp mạng hình sao thành mạng hình lưới. Khi ghép \nnhiều kênh VC vào một đường truyền, chúng ta cungc tận dụng băng thông đường \ntruyền tốt hơn so với việc chỉ cấu hình một VC. \n\nĐối với hệ thống mạng quy mô lớn rất ít khi chúng ta sử dụng mạng hình lưới vì số \nlượng kết nối cần cho mạng hình lưới quá lớn, tăng theo tỉ lệ bình phương của số \nvị trí cần kết nối. Các thiết bị có giới hạn dưới 1000VC trên một kết nối. Nhưng \ntrên thực tế thì giới hạn này còn thấp \n\nh¬n n÷a. Do ®ã ®èi víi hÖ thèng m¹ng lín chóng ta nªn sö dông m¹ng h×nh løi b¸n \nphÇn. Víi m¹ng h×nh l−íi b¸n phÇn chóng ta vÉn cÇn nhiÒu kÕt nèi h¬n so víi m¹ng \nh×nh sao còng kh«ng nhiÒu b»ng b»ng m¹ng h×nh l−íi toµn phÇn. ViÖc kÕt nèi \nm¹ng h×nh l−íi b¸n phÇn nh− thÕ nµo tïy thuéc vµo nhu cÇu cña dßng ch¶y d÷ liÖu. \n\nTrong bÊt kú cÊu tróc Frame Relay nµo, khi chung ta sö dông mét  cæng ®Ó \nkÕt nèi nhiÒu m¹ng kh¸c nhau th× cã thÓ gÆp ph¶i sù cè kh«ng ®Õn ®−îc m¹ng ®Ých. \nSù cè nµy do ®Æc tÝnh ®a truy cËp kh«ng qu¶ng b¸(NBMA- nonbroadcast \n\n\n\n 651\n\nmultiaccess) cña Frame Relay g©y ra. Nh− chóng ta ®· häc ®−îc ë gi¸o trinh tr−íc, \nc¸c giao thøc ®Þnh tuyÕn ®éng sö dông kü thuËt Split horizon ®Ó tr¸nh g©y ra vßng \nlÆp. Split horizon kh«ng cho phÕp truyÒn ra mét cæng nh÷ng th«ng tin ®Þnh tuyÕn \nvõa nhËn vµo tõ cæng ®ã. Khi co nhiÒu PVC trªn cïng mét cæng vËt lý thi Split \nhorizon l¹i g©y ra mét r¾c rèi vÒ mÆt cËp nhËt ®Þnh tuyÕn. Chóng ta sÏ bµn vÒ vÉn \n®Ò nµy kü h¬n trong phÇn sau cña tr−¬ng. Frame Relay ë líp Liªn kÕt d÷ liÖu víi \n®Þa chØ líp M¹ng, vÝ dô ®Þa chØ IP. Router lu«n cÇn biÕt t−¬ng øng víi ®Þa chØ m¹ng \n®Ých lµ cæng nµo. ®èi víi ®−êng kÕt nèi trùc tiÕp th× ®Çu kia chØ kÕt nèi ®Õn mét \nrouter duy nhÊt. Nh−ng franme ®i tõ DTE ®Òn Frame Relay swich vµ sau ®ã ®−îc \n¸nh x¹ víi mét ®Þa chØ m¹ng cña router ®Çu xa. Nh÷ng th«ng tin nµy cã thÓ ss−îc \ncÊu h×nh b»ng cÊu h×nh b»ng lÖnh Map hoÆc cÊu h×nh tù ®éng b»ng c¸ch dïng \nInverse ARP. \n\n5.1.6. Frame Relay LMI: \n\nFrame Relay ®−îc thiÕt kÕ ®Ó truyÒn d÷ liÖu chuyÓn m¹ch gãi víi thêi gian \ntrÔ tèi thiÓu. BÊt kú yÕu tè nµo gãp phÇn vµo thêi gian trÔ ®Òu ®−îc bá qua. Nh−ng \nkhi c¸c h·ng muèn trÓn khai Frame Relay nh− lµ mét c«ng nghÖ ®éc lËp chø kh«ng \ncßn lµ mét thµnh phÇn cña ISDN n÷a th× hä quyÕt ®Þnh r»ng DTE cÇn ®−îc cung \ncÊp th«ng tin ®éng vÒ tr¹ng th¸i ho¹t ®éng cña m¹ng. C¬ chÕ nµy kh«ng cã trong \nthiÕt kÕ ban ®Çu cña Frame Relay vµ LMI \n\n(Local M©ngemaent Interface) ®· ®−îc thªm vµo sau nµy ®Ó truyÒn th«ng tin vÒ \ntr¹ng th¸i ho¹t ®éng m¹ng. \n\n PhÇn DLCI 10 bit cho phÐp x¸c ®Þnh VC tõ 0 ®Õn 1023.Trong ®ã cã dµnh \nriªng l¹i mét sè chØ sè lµm giíi h¹n cña VC gi¶m xuèng.C¸c th«ng ®iÖp LMI ®−îc \ntrao ®æi gi÷a DTE vµ DCE vµ sö dông nh÷ng chØ sè DLCI dµnh riªng nµy \n\n \n\nChỉ số VC Loại VC \n\n0 LMI (ÁNI, ITU) \n\n1..15 Để dành cho việc sử dụng ở tương lai \n\n992..1007 CLLM \n\n\n\n 652\n\n1008..1022 Để dành cho việc sử dụng ở tương lai (ÁNI, ITU) \n\n1019..1020 Multicasting (Cisco) \n\n1023 LMI (Cisco) \n\n LMI baogåm nh÷ng th«ng tin sau: \n\n\u2022 C¬ chÕ keepalive ®Ó kiÓm tra mét vßng VC cßn ho¹t ®éng. \n\u2022 C¬ chÕ multicast. \n\u2022 §iÒu khiÓn luång. \n\u2022 Cã DLCI nµo ®−îc g¸n thµnh gi¸ trÞ toµn côc hay kh«ng. \n\u2022 Tr¹ng th¸i VC. \n\nCã nhiÒu lo¹i LMI kh¸c nhau vµ c¸c lo¹i nµy kh«ng t−¬ng thÝch víi nhau. \nDo ®ã chóng ta cÇn cÊu h×nh lo¹i LMI tªn router phï hîp víi lo¹i LMI mµ nhµ \ncung cÊp dÞch  vô ®ang sö dông. Sau ®ay lµ 3 lo¹i lMI mµ Cisco router cã hç trî: \n\n\u2022 Cisco - LMI gèc. \n\u2022 Ansi \u2013 theo chuÈn ANSI T1.617 Phô ch−¬ng D. \n\u2022 Q933a \u2013 theo chuÈn ITU Q933 phô ch−¬ng A. \n\n \n\n Th«ng ®iÖp LMI ®−îc lång trong frame LAPF.Tong ®ã cã thªm 4 phÇn m»n \ntrong phÇn Header cña frame ®Ó cã thÓ t−¬ng thÝch víi frame LAPD sö dông trong \nISDN, trong ®ã phÇn thø 4 cho biÕt lo¹i tr«ng ®iÖp LMI. \n\n Theo sau phÇn Header lµ mét hoÆc nhiÒu th«ng tin kh¸c nhau, bao gåm: \n\n\u2022 1 byte chøa chØ sè danh ®Þnh cña th«ng tin. \n\u2022 PhÇn cho biÕt chiÒu dµi cña phÇn th«ng tin t−¬ng øng. \n\u2022 Mét hoÆc nhiÒu byte chø th«ng tin thùc sù vÒ tr¹ng th¸i cña mét \n\nDLCI. \nTh«ng ®iÖp tr¹ng th¸i gióp kiÓm tra kÕt nèi logic vµ vËt lý. Nh÷ng th«ng tin \n\nnµy rÊt quan träng trong m«i tr−êng ®Þnh tuyÕn v× c¸c giao thøc ®Þnh tuyÕn quyÕt \n®Þnh dùa trªn nh÷ng th«ng tin vÒ tr¹ng th¸i ®−êng kÕt nèi. \n\n \n\n \n\n\n\n 653\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n5.1.7 Ho¹t ®éng cña Inerse ARP vµ LMI: \n\n Th«ng ®iÖp tr¹ng th¸i LMI kÕt hîp víi th«ng ®iÖp Inverse ARP cho phÐp \nrouter liªn kÕt ®−îc ®Þa chØ líp m¹ng vµ ®Þa chØ líp Liªn kÕt d÷ liÖu. \n\n\n\n 654\n\n Khi router trong m¹ng Frame Relay b¾t ®Çu khëi ®éng, nã sÏ göi c¸c th«ng \n®iÖp LMI ®Ó hái vÒ tr¹ng th¸i cña hÖ thèng m¹ng. HÖ thèng m¹ng sÏ tr¶ lêi l¹i b»ng \nth«ng ®iÖp LMI,trong ®ã cã c¸c th«ng tin chi tiÕt vÒ mäi VC ®−îc cÊu h×nh trªn \nmét ®−êng kÕt nèi. \n\n Theo chu kú router lÆp l¹i viÖc hái th«ng tin tr¹ng th¸i cña m¹ng nh−ng \nnh÷ng lÇn sau nµy nß chØ nhËn ®−îc tr¶ lêi vÒ nh÷ng thay ®æi tr¹ng th¸i míi x¶y ra. \nSau mét sè lÇn nhÊt ®Þnh nh− vËy m¹ng l¹i göi mét lÇn ®Çy ®ñ c¸c th«ng tin vÒ \ntr¹ng thaÝ m¹ng. \n\n Nªó router cÇn ¸nh x¹ gi÷a VC vµ ®Þa chØ líp m¹ng th× nã sÏ göi th«ng tin \n®iÖp Inverse ARP ra mçi VC. Th«ng ®iÖp Inverse ARP tr¶ lêi sÏ cho phÐp router co \nthÓ ¸nh x¹ gi÷a ®Þa chØ m¹ng va DLCI t−¬ng øng. Nõu trong m¹ng cã ch¹y nhiÒu \ngiao thøc líp M¹ng kh¸c nhau th× th«ng ®iÖp Inverse ARP ®−îc göi ®i nhiÒu lÇn \nt−¬ng øng víi mçi giao thøc líp M¹ng kh¸c nhau. \n\n \n\n \n\n \n\n \n\n \n\n\n\n 655\n\n \n\n \n\n \n\n5.2 CÊu h×nh Frame Relay: \n\n5.2.1. CÊu h×nh Frame Relay c¬ b¶n \n\nPhÇn nµy sÏ gi¶i thich cÊu h×nh c¬ b¶n cña mét Frame Relay PVC, Frame \nRelay ®ùoc cÊu h×nh trªn cæng serial. Giao thøc ®ãng gãi mÆc ®Þnh trªn cæng nµy lµ \nHDLC. §Ó chuûªn sang kiÓu ®ãng gãi Frame Relay chung ta dïng lÖnh \n\u201cencapsulation Frame - Relay {cisco/ietf}.\u201d \n\nCisco: sö dông kiÓu ®ãng gãi ®éc quyÒn cña cisco cho Frame Relay. Chóng ta sö \ndông kiÓu ®ãng gãi nµy nÕu thiÕt bÞ ®Çu bªn kia còng la mét cisco router. Cã nhiÒu \nthiÕt bÞ kh«ng ph¶i cña cisco còng cã hç trî kiÓu ®ãng gãi nµy. cisco lµ trän lùa \nm¹c ®Þnh cña c©u lÖnh nµy, do ®o b¹n chØ cÇn nhÊp lÖnh nµy \u201cencapsulation Frame \n- Relay {cisco/ietf}.\u201dlµ ®ñ. \n\nIetf: kiÓu ®ãng gãi phï hîp víi chuÈn RFC 1490 cña IETF. Chóng ta nªn chon kiÓu \n®ãng gãi nµy nÕu thiÕt bÞ ë ®Çu bªn kia kÕt nèi kh«ng ph¶i la Cisco router. \n\n\n\n 656\n\nKiÓu ®ãng gãi ®éc quyÒn cña Cisco cho Frame - Relay sö dông 2 byte phÇn \nheader, trong ®ã 2byte x¸c ®Þnh chØ sè DLCI vµ 2byte x¸c ®Þnh lo¹i gãi d÷ kiÖu. \n\nNh− ®· häc ë gi¸o tr×nh tr−íc: chóng ta dïng lÖnh ip address ®Ó khai b¸o ®Þa \nchØ IP cho cæng Serial. LÖnh Bandwidth ®Ó cµi ®Æt b¨ng th«ng cho cæng Serial, \nb¨ng th«ng nµy tÝnh theo ®¬n vÞ (kb/gi©y). chóng ta sö dông lÖnh nµy ®Ó cµi ®Æt \nb¨ng th«ng cè ®Þnh cho c¸c giao thøc ®Þnh tuyÕn. C¸c giao thøc ®Þnh tuyÕn nh− \nIGRP, EIGRP vµ OFPS sÏ sö dông gi¸ trÞ b¨ng th«ng trong c©u lÖnh nµy ®Ó tinh \ntoan ®−êng ®i. \n\nKÕt nèi LMI ®−îc thiÕt lËp vµ cÊu h×nh bëi lÖnh Frame \u2013 Relay Lmi- \ntype{ansi/cisco/q933a}. chóng ta chØ sö dông lÖnh nµy nÕu phiªn b¶n Cisco IOS \nphiªn b¶n 11.2 trë vÒ sau, lo¹i LMI mÆc ®Þnh lµ Cisco vµ ®−îc cµi dÆt trªn cæng \nSerial. Chóng ta cã thÓ xem th«ng tin vÒ lo¹i LMI b»ng lÖnh show interfaces. \n\nC¸c b−íc cÊu h×nh trªn kh«ng phô thuéc vµo giao thøc líp m¹ng nµo ®ang ch¹y \ntrªn m¹ng. \n\n \n\n5.2.2. CÊu h×nh s¬ ®å ¸nh x¹ cè ®inh cho Frame � Relay: \n\nMçi chØ sè cña DLCI néi bé ph¶i ®−îc ¸nh x¹ cè ®Þnh ®Õn mét ®Þa chØ líp \nm¹ng cña router ®Çu xa khi router ®Çu xa kh«ng cã hç trî Invªrse ARP. T−¬ng tù, \nkhi l−u l−îng qu¶ng b¸ vµ multicast trªn PVC bÞ kiÓn sãat th× chóng ta còng ph¶i \ncÊu h×nh s¬ ®ß ¸nh x¹ cè ®Þnh cho Frame \u2013 Relay b»ng lÖnh: Frame \u2013 Relay map \nprotocol \u2013 address dlci {broadcast}. \n\n\n\n 657\n\nBroadcast: cho phÐp l−u l−îng qu¶ng b¸ vµo multicast trªn VC , cho phÐp sö \ndông giao thøc ®Þnh tuyÕn ®éng trªn VC. Tham sè nµy kh«ng b¾t buéc ph¶i cè khi \nkhai b¸o lÖnh. \n\n \n\n5.2.3. Sù cè kh«ng ®Õn ®−îc m¹ng ®Ých do qu¸ tr×nh cËp nhËt th«ng tin ®Þnh \ntuyÕn g©y ra trong m¹ng ®a truy cËp kh«ng qu¶ng b¸ NBMA (Non -broadcast    \nmulti - access). \n\nMÆc ®Þnh, m¹ng Frame \u2013 Relay lµ m«i tr−êng ®a truy cËp kh«ng qu¶ng b¸ \nNBMA. M«i tr−¬ng NBMA còng ®−îc xem t−¬ng tù nh− c¸c m«i tr−êng ®a truy \ncËp kh¸c , vÝ dô nh− Ethernet. TÊt c¶ c¸c router kÕt nèi vµo mét Ethernet ®Òu n¨m \ntrong cïng m¹ng. Nh−ng ®Ó gi¶m chi phÝ phÇn cøng , m¹ng NBMA l¹i ®−îc x©y \ndùng thieo cÊu tróc h×nh sao, do ®o kh¶ n¨ng ®a truy cËp kh«ng b»ng Enthernet. \n\nCêu tróc Frame \u2013 Relay NBMA cã thÓ g©y ra 2 vÊn ®Ò sau:  \n\n\u2022 Sù cè kh«ng ®Õn ®−îc m¹ng ®Ých do qu¸ tr×nh cËp nhËt th«ng tin ®Þnh tuyÕn \ng©y ra. \n\n\u2022 Ph¶i lËp l¹i c¸c m¹ng qu¶ng b¸ trªn mçi PVC khi trªn mét cæng vËt lý cã \nnhiÒu PVC. \n\nC¸c giao thøc ®Þnh tuyÕn ®éng sö dông kü thuËt Split-horizon ®Ó ng¨n chÆn vßng \nlÆp x¶y ra. Khi ®ã nh÷ng th«ng tin ®Þnh tuyÕn võa ®−îc nhËn vµo tõ mét cæng cña \nrouter sÏ kh«ng ®−îc phep ph¸t ng−îc ra cæng ®ã. B©y giê chóng ta sÐt mét vÝ dô \nnh− hÝnh 5.2.3a. Nõu router D göi mét th«ng tin qu¶n b¸ ®Õn cho router A, trong ®ã \ncã chøa th«ng tin cËp nhËt ®Þnh tuyÕn. Router A la ruoter trung t©m nªn cã nhiÒu \nkÕt nèi PVC trªn mét cæng vËt lý. Nh−ng router A kh«ng thÓ ph¸t ng−îc trë ra \n\n\n\n 658\n\nnh÷ng th«ng tin cËp nhËt mµ nã võa nhËn ®−îc tõ router D. kÕt qu¶ lµ router B vµ C \nkh«ng nhËn ®−îc nh÷ng th«ng tin ®ã . nh− vËy router B,C kh«ng thÓ göi gãi d÷ liÖu \n®ªn c¸c m¹ng router D. do ®ã router Bvµ C kh«ng cã chøc n¨ng Split-horizon th× \nc¸c th«ng tin cËp nhËt ®Þnh tuyÕn míi cã thÓ ph¸t nh−îc trë l¹i trªn cæng mµ chóng \nvõa nhËn vµo. Split-horizon sÏ khong g©y ra r¸c rèi nÕu chóng ta chØ cã mét PVC \ntrªn mét cæng vËt lý, ®ã chÝnh lµ kÕt nèi Frame Relay \n\n§iÓm- nèi - ®iÓm. \n\n \n\n \n\n \n\nMét router cã thÓ cã nhiÒu kÕt nèi PVC trªn mét cæng vËt lý vµ mçi PVC kÕt \nnèi ®Õn mét router riªng. khi ®ã router phØa lÆp c¸c gãi d÷ liÖu qu¶ng b¸ trªn mçi \nPVC , vÝ dô nh− c¸c gãi cËp nhËt th«ng tin ®Þnh tuyÕn ®Ó ®¶m b¶o mçi router ®Çu \nbªn kia ®Òu nhËn ®−îc ®Çy ®ñ th«ng tin. \n\nNh−ng viÖc lÆp l¹i c¸c th«ng tin qu¶ng b¸ nµy l¹i chiÕm nhiÒu b¨ng th«ng ®−êng \ntruyÒn vµ lµm cho c¸c l−u l−îng kh¸c cña ng−êi dïng bÞ chËm l¹i. \n\n\n\n 659\n\nNh− v¹y chóng ta thÊy r»ng, ®Ó gi¶i quyÕt sù cè Split-horizon g©y ra th× tèt \nh¬n lµ nªn t¾t Split-horizon ®i. nh−ng kh«ng ph¶i giao thøc líp m¹ng nµo còng cho \nphÐp chung ta t¾t chøc n¨ng Split-horizon vµ viÖc t¾t chøc n¨ng Split-horizon còng \n®ång nghÜa víi kh¶ n¨ng x¶y ra lÆp vßng trong m¹ng xÏ cao h¬n. \n\nCßn mét c¸ch kh¸c ®Ó gi¶i quyÕt vÊn ®Ò Split-horizon lµ sö dông cÊu tróc l−íi nèi \n®ñ. Nh−ng cÊu tróch nµy l¹i lµm t¨ng chi phÝ vµ cÇn nhiÒu kÕt nèi h¬n. \n\nCuèi cïng, gi¶i ph¸p mµ chung t«i ®Ò nghÞ lµ gi¶i ph¸p sö dông Subinterface ®−îc \ntr×nh bµy trong phÇn kÕ tiÕp. \n\n5.2.4. Subinterface trong Frame Relay: \n\n Theo phÇn trªn th× khi mét cæng vËt lý cã nhiÒu PVC kÕt nèi ®Õn c¸c router \n®Çu xa sÏ x¶y ra sù cè Split-horizon.Trong m«i tr−êng ®Þnh truyÕn Split-horizon, \nc¸c th«ng tin cËp nhËp ®Þnh tuyÕn ®−îc nhËn vµo tõ cæng nµo th× kh«ng ®−îc ph¸t \nng−îc ra cæng ®ã. B©y giê chóng ta chia mét cæng vËt lý thµnh nhiÒu subinterface \npoin-to-point. Mçi mét subinterface poin-topint thiÕt lËp mét PVC ®Õn mét cæng \nvËt lý hay mét subinterface kh¸c trªn router ®Çu bªn kia. Nh− vËy, mçi cÆp router \n®iÓm-nèi-®iÓm nµy n»m trong cïng mét subnet vµ mçi cæng subinterface poin-to-\npoint cã mét DLCI riªng. Mçi mét subinterface poin-topint ho¹t ®éng nh− mét \ncæng riªng biÖt, do ®ã Split-horizon kh«ngcßn lµ vÊn ®Ò r¾c rèi n÷a. D¹ng \nsubinterface poin-topint ®−îc øng dông cho cÊu tróc Frame Relay h×nh sao. \n\n Cæng subinterface Frame Relay cßn cã thÓ cÊu h×nh lµm cæng ®a ®iÓm \n(Multipoint). Mét subinterface multipoint thiÕt lËp nhiÒu kÕt nèi PVC ®Õn nhiÒu \nrouter kh¸c nhau. TÊt c¶ c¸c router kÕt nèi dÒu n»m trong cïng mét subnet. Do ®ã \nchóng ta tiÕt kiÖm ®−îc nhiÒu ®Þa chØ m¹ng vµ ®iÒu nµy hÕt søc cã ý nghÜa nÕu \ntrong tr−êng hîp chóng ta kh«ng sö dông VLSM (Variable Length Subnet \nMasking). Tuy nhiªn, subinterface multipoint l¹i kh«ng gi¶i quyÕt ®−îc vÊn ®Ò \nSplit-horizon. Chóng ta øng dông subinterface multipoint cho m¹ng Frame Relay \nh×nh l−íi nèi ®ñ hoÆc nèi b¸n phÇn. \n\n LÖnh encapsulation frame-relay ®−îc sö dông ®Ó cÊu h×nh cho cæng vËt lý. \nCßn tÊt c¶ c¸c th«ng tin cÊu h×nh kh¸c cña cæng, vÝ dô nh− ®Þa chØ líp M¹ng, DLCI, \nchóng ta sÏ cÊu h×nh cho mçi subinterface. PhÇn kÕ tiÕp sÏ tr×nh bÇy cô thÓ cÊu \nh×nh subinterface cho Frame Relay. \n\n5.2.5 CÊu h×nh subinterface cho Frame Relay: \n\n\n\n 660\n\n Nhµ cung cÊp cã tr¸ch nhiÖm cÊp sè DLCI. ChØ sè DLCI th−êng n»m trong \nkho¶ng tõ 16 ®Õn 992 vµ cã gi¸ trÞ côc bé.Sè l−îng tèi ®a cña chØ sè DLCI cßn phô \nthuéc vµo lo¹i LMI ®ang sö   ®−îc dông. ChØ sè DLCI còng cã thÓ cã gi¸ trÞ toµn \ncÇu nh−ng chóng ta kh«ng bµn ®Õn vÊn ®Ò nµy trong ph¹m vi cña gi¸o tr×nh nµy.  \n\n \n\n \n\n Chóng ta xÐt vÝ dô nh− h×nh 5.2.5. Router A cã hai subinterface poin-to-\npoint: cæng s0/0.120 kÕt nãi ®Õn router C. Mçi subinterface n»m trong mét subnet \nriªng. Sau ®©y lµ c¸c b−íc thùc hiÖn ®Ó cÊu h×nh subinterface trªn mét cæng vËt lý: \n\n\u2022 CÊu h×nh ®ãng gãi Frame Relay cho cæng vËt lý b»ng lÖnh \nencapsulation frame-relay. \n\n\u2022 §Þnh nghÜa PVC b»ng c¸ch t¹o subinterface. \n§Ó t¹o subinterface chóng ta sö dông lÖnh sau: \n\n  Router (config-if) #interface \n\n  Serialnumber.subinterface-number  [multipoint | piont-to-point] \n\n\n\n 661\n\n Th«ng th−êng chóng ta lÊy chØ sè DLCI g¸n cho chØ sè cña subinteface \n(subinteface-number) ®Ó dÔ nhËn biÕt khi kiÓm tra cÊu h×nh. K«ng cã chÕ ®é mÆc \n®Þnh cho subinteface,do ®ã chóng ta b¾t buéc ph¶i khai b¸o tham sè multipoint \nhay piont-to-point. \n\n Nõu subinteface ®−îc cÊu h×nh poin-to-point,sau ®ã chóng ta ph¶i cÊu h×nh \nDLCI cho cæng ®ã ®Ó ph©n biÖt víi cæng vËt lý. §èi víi subinteface ®−îc cÊu h×nh \nmultipiont vµ cã hç trî Inverse ARP th× kh«ng cÇn khai b¸o DLCI vµ cÊu h×nh s¬ \n®å ¸nh x¹ ®Þa chØ \u2013 DLCI cè ®Þnh. \n\n5.2.6 KiÓn tra cÊu h×nh Frame Relay: \n\n LÖnh show interfaces sÏ cung cÊp c¸c th«ng tin vÒ cÊu h×nh ®ãng gãi, tr¹ng \nth¸i Líp 1 vµ Líp 2. Ngoµi ra , lÖnh nµy cßn hiÓn thÞ c¸c th«ng tin sau: \n\n\u2022 Lo¹i LMI. \n\u2022 LMI DLCI. \n\u2022 Lo¹i Frame Relay DTE hay DCE. \n\nTh«ng th−êng th× router ®−îc xem lµ thiÕt bÞ DTE. Tuy nhiªn, chóng ta cã \nthÓ sö dông mét Cisco router ®Ó cÊu h×nh lµm Frame Relay switch. Khi ®ã router \nnµy trë thµng thiÕt bÞ DCE. \n\nChóng ta sö dông lÖnh show frame-relay lmi ®Ó xem tr¹ng th¸i cña c¸c ho¹t \n®éng LMI. VÝ dô: lÖnh nµy sÏ cho biÕt sè l−îng c¸c gãi LMI ®−îc trao ®æi gi÷a \nrouter vµ Frame Relay switch. \n\n \n\n \n\n\n\n 662\n\n \n\n \n\n \n\n \n\nLÖnh show frame-relay pvc [interface interface] [dlci] hiÓn thÞ tr¹ng th¸i \ncña mçi PVC t−¬ng øng ®· ®−îc cÊu h×nh vµ th«ng tin vÒ c¸c l−u l−îng trªn PVC \n®ã. Mét PVC cã thÓ ë tr¹ng th¸i ho¹t ®éng (active), kh«ng ho¹t ®éng (inactive) hay \n®· bÞ xãa (deleted). B»ng lÖnh nµy chóng ta cßn cã thÓ xem ®−îc sè l−îng c¸c gãi \nBECN vµ FECN ®−îc nhËn vµo bëi router. \n\nLÖnh show frame-relay pvc ®−îc sö dông ®Ó xem tr¹ng th¸i cña tÊt c¶ c¸c \nPVC ®· ®−îc cÊu h×nh trªn router. Nõu chógn ta  khai b¸o thªm chØ sè cña mét \n\n\n\n 663\n\nPVC th× lÖnh sÏ hiÓn thÞ th«ng tin cña mét PVC ®ã. Trong vÝ dô 5.2.6.c lµ kÕt qu¶ \nhiÓn thÞ tr¹ng th¸i cña PVC 100. \n\n \n\n \n\nChóng ta sö dông lÖnh show frame-relay map ®Ó xem s¬ ®å ¸nh x¹ hiÖn t¹i \nvµ th«ng itn vÒ c¸c kÕt nèi. VÝ dô nh− h×nh 5.2.6.d lµ kÕt qu¶ hiÓn thÞ cña lÖnh \nshow frame-relay map: \n\n\u2022 10.140.1.1 lµ ®Þa chØ IP cña router ®Çu xa. §Þa chØ nµy ®−î häc tù ®éng \nth«ng qua qu¸ tr×nh Inverse ARP. \n\n\u2022 100 lµ gi¸ trÞ cña DLCI tÝnh theo sè thËp ph©n. \n\u2022 0x64 lµ gi¸ trÞ hÏ cña DLCI, 0x64 = 100. \n\u2022 0x1840 lµ gi¸ trÞ cña DLCI ®−îc thÓ hiÖn trªn ®−êng truyÒn do c¸c bit \n\n®−îc ®Æt trong ®Þa chØ cña frame (Frame Relay). \n\n\n\n 664\n\n\u2022 Broadcast/multicast ®−îc cho phÐp trªn PVC. \n\u2022 Tr¹ng th¸i PVC lµ ®ang ho¹t ®éng. \n\n§Ó xãa s¬ ®å ¸nh x¹ Frame Relay ®−îc t¹o ra tù ®éng do qu¸ tr×nh \nARP,chóng ta sö dông lÖnh clear frame-relay-inarp. Ngay sau ®ã chung s ta dïng \nl¹i lÖnh show frame-relay th× sÏ kh«ng thÊy g× n÷a. Sau mét kho¶ng thêi gian nhÊt \n®Þnh, qu¸ tr×nh ARP sÏ cËp nhËp l¹i b¶ng nµy mét c¸ch tù ®éng. \n\n5.2.7 X¸c ®Þnh sù cè trong cÊu h×nh Frame Relay: \n\n \n\n Chóng ta sö dông lÖnh  debug frame-relay lmi ®Ó x¸c ®Þnh router nµo va \nFrame Relay switch nµo göi nhËn c¸c gãi tin mét c¸ch b×nh th−êng. \u201cOut\u201d lµ nh÷ng \nth«ng ®iÖp LMI ®−îc göi ®i bëi router, \u201cin\u201d lµ nh÷ng th«ng ®iÖp LMI nhËn ®−îc tõ \nFrame Relay switch. Th«ng ®iÖp tr¹ng th¸i LMI ®Çy ®ñ cã \u201ctype 0\u201d, \u201ctype 1\u201d lµ \nmét phiªn giao dÞch trao ®æi LMI. Sau ®©y lµ ý nghÜa cña c¸c th«ng sè tr¹ng th¸i: \n\n\u2022 0x0: ®· nhËn biÕt nh−ng kh«ng ho¹t ®éng. §iÒu nµy cã nghÜa lµ switch \n®· ®−îc cÊu h×nh DLCI nh−ng v× lý do nµo ®ã kh«ng sö dông ®−îc \nDLCI nµy. Nguyªn nh©n cã thÓ lµ do ®Çu bªn kia cña PVC ch−a ho¹t \n®éng . \n\n\u2022 0x2: ®· nhËn biÕt lµ ®ang ho¹t ®éng. §iÒu nµy cã nghÜa lµ Frame \nRelay switch ®· cã DLCI vµ mäi c¸i ho¹t ®éng tèt. \n\n\u2022 0x4: ®· xãa. §iÒu nµy cã nghÜa lµ hiÖn t¹i Frame Relay switch kh«ng \ncßn DLCI nµy n÷a nh−ng tr−íc ®ã DLCI nµy ®· ®−îc cÊu h×nh cho \n\n\n\n 665\n\nswitch. Nguyªn nh©n cã thÓ do sè DLCI ®−îc l−u trªn router hoÆc nhµ \ncung cÊp ®· xãa PVC t−¬ng øng trong m¹ng Frame Relay. \n\n \n\nTæNG KÕT \n\nSau ®©y lµ nh÷ng ®iÓm chÝnh trong ch−¬ng tr×nh mµ c¸c b¹n cÇn n¾m ®−îc: \n\n\u2022 Ph¹m vi ho¹t ®éng vµ môc ®Ých cña Frame Relay. \n\u2022 C«ng nghÖ Frame Relay. \n\u2022 CÊu tróc ®iÓm-nèi-®iÓm vµ ®iÓm-nèi-®a ®iÓm. \n\u2022 CÊu tróc m¹ng Frame Relay. \n\u2022 C¸ch cÊu h×nh Frame Relay PVC. \n\u2022 C¸c cÊu h×nh s¬ ®å ¸nh x¹ ®Þa chØ cho Frame Relay. \n\u2022 Nh÷ng vÊn ®Ò vÒ ®Þnh truyÕn trong m¹ng ®a truy cËp kh«ng qu¶ng b¸. \n\u2022 T¹i sao ph¶i cÇn subinterface vµ cÊu h×nh chóng nh− thÕ nµo. \n\u2022 KiÓm tra vµ x¸c ®Þnh sù cè kÕt nèi Frame Relay. \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n 666\n\nCH¦¥NG 6: GiíI THIÖU VÒ QU¶N TRÞ M¹NG \n\n \n\nGiíI THIÖU: \n\nPC ®ù¬c thiÕt kÕ lµ mét m¸y tÝnh ®Ó bµn ®éc lËp. PhÇn hÖ ®iÒu hµnh lóc ®ã \nchØ cho phÐpt¹i mét thêi ®iÓm mét use truy cËp sö dông tµi nguyªn hÖ thèng. Khi \nm¹ng m¸y tÝnh trë nªn phæ biÕn th× c¸c c«ng ty phÇn mÒm b¾t ®Çu ph¸t triÓn hÖ \n®iÒu hµnh m¹ng, gäi t¾t lµ NOS (Network Operating System). NOS ®−îc thiÕt kÕ®Ó \ncung cÊp kh¶ n¨ngb¶o mËt tËp tin, ph©n quyÒn use vµ chia sÎ tµi nguyªn hÖ thèng \ncho nhiÒu use. Sù ph¸t triÓn nhanh chãng cña Internet ®· ®ßi hái c¸c nhµ thiÕt kÕ \nph¶i ph¸t triÓn NOS ngµy nay theo c¸c c«ng nghÖ cña Internet, vÝ dô nh− World \nWide Web (WWW). \n\nKÕt nèi m¹ng trë thµnh nhu cÇu thiÕt yÕu víi m¸y tÝnh ®Ó bµn. Ranh giíi \ngi÷a hÖ ®iÒu hµnh Desktop vµ NOS ®· trë nªn rÊt mê nh¹t. Ngµy nay, hÇu hÕt c¸c \nhÖ ®iÒu hµnh th«ng dông nh− Microsoft Windows 2000 v¸ Linux ®Òu cã thÓ t×m \nthÊy trªn server trªn m¹ng cÊu h×nh m¹nh vµ trªn c¶ desktop cña user. \n\nHiÓu biÕt vÒ c¸c hÖ ®iÒu hµnh kh¸c nhau sÏ gióp chóng ta chon lùa ®óng hÖ \n®iÒu hµnh ®Ó cung cÊp ®Çy ®ñ c¸c dÞch vô cÇn thiÕt. Trong ch−¬ng nµy sÏ giíi thiÖu \nvÒ UNIX, Linux, Mac OS X vµ c¸c hÖ ®iÒu hµnh Windows. \n\nViÖc qu¶n trÞ m¹ng LAN vµ WAN hiÖu qu¶ lµ mét ®iÒu kiÖn then chèt trong \nviÖc duy tr× mét m«i tr−êng ho¹t ®éng tèt trong thÕ giíi m¹ng. Cµng nhiÒu dÞch vô \n®¸p øng cho cµng nhiÒu ng−êi dïng, hiÖu suÊt m¹ng cµng cao. Ng−êi qu¶n trÞ m¹ng \nth«ng qua viÖc theo dâi th−êng trùc, ph¶i ph¸t hiÖn vµ sö lý ngay c¸c sù cè tr−êc \nkhi nh÷ng sù cè cã t¸c ®éng ®Õn ng−êi sö dông. \n\nCã rÊt nhiÒu c«ng cô vµ giao thøc kh¸c nhau ®Ó thùc hiÖn viÖc theo dâi ho¹t \n®éng m¹ng. Thµnh th¹o vÒ c¸c c«ng cô nµy lµ rÊt quan träng ®Ó cã thÓ qu¶n trÞ \nm¹ng mét c¸ch hiÖu qu¶. \n\nSau khi hoµn tÊt ch−¬ng ch×nh nµy, c¸c b¹n cã thÓ thùc hiÖn nh÷ng viÖc sau: \n\n\u2022 X¸c ®Þnh nh÷ng nhiÖm vô ®−îc thùc hiÖn bëi m¸y tr¹m. \n\u2022 X¸c ®Þnh nh÷ng chøc n¨nh cña server. \n\u2022 M« t¶ vai trß client/server. \n\u2022 M« t¶ sù kh¸c nhau gi÷a NOS vµ hÖ ®iÒu hµnh desktop. \n\n\n\n 667\n\n\u2022 LiÖt kª c¸c hÖ ®iÒu hµnh Windows vµ c¸c ®Æc ®iÓm cña chóng. \n\u2022 LiÖt kª c¸c hÖ ®iÒu hµnh kh¸c vµ c¸c ®Æc ®iÓm cña chóng. \n\u2022 X¸c ®Þnh c¸c c«ng cô qu¶n trÞ m¹ng. \n\u2022 M« t¶ OSI vµ m« h×nh qu¶n trÞ m¹ng. \n\u2022 M« t¶ SNMP (Simple Network Management Protocol) vµ CMIP \n\n(Common Management Information Protocol). \n\u2022 M« t¶ c¸ch thu nhËp th«ng tin vµ l−u l¹i sù cè c¸c phÇn mÒm qu¶n trÞ \n\nm¹ng. \n\n6.1. M¸y tr¹m vµ Server: \n\n6.1.1. M¸y tr¹m: \n\n \n\n M¸y tr¹m client ®−îc sö dông ®Ó ch¹y c¸c tr×nh øng dông vµ kÕt nãi ®Õn \nserver. Server lµ m¸y tÝnh ch¹y hÖ ®iÒu hµnh m¹ng NOS, lµ n¬i l−u d÷ liÖu chia sÎ \ngi÷a c¸c m¸y tÝnh. M¸y tr¹m sö dông phÇn mÒm ®Æc biÖt ®Ó thùc hiÖn nh÷ng nhiÖm \nvô sau: \n\n\u2022 TiÕp nhËn d÷ liÖu cña user vµ lÖnh cña ch−¬ng tr×nh õng dông. \n\u2022 X¸c ®Þnh xem lÖnh nhËn ®−îc lµ cho hÖ ®iÒu hµnh néi bé hay lµ cho \n\nNOS. \n\u2022 ChuyÓn lÖnh ®Õn hÖ ®iÒu hµnh néi bé hoÆc ra card m¹ng (NIC) ®Ó \n\ntruyÒn vµo m¹ng. \n\u2022 Thùc hiÖn viÖc truyÒn d÷ liÖu gi÷a m¹ng vµ phÇn mÒm øng dông ®ang \n\nch¹y trªn m¸y tr¹m \nMét sè hÖ ®iÒu hµnh Windows cã thÓ cµi ®Æt ®−îc c¶ trªn m¸y tr¹m vµ \n\nserver. Windows NT/2000/XP cã cung cÊp kh¶ n¨ng Server m¹ng. Windí 9x vµ \nME chØ cã thÓ sö dông cho m¸y tr¹m. \n\n\n\n 668\n\nUNIX vµ Linux còng th−êng ®−îc sö dông trªn c¸c m¸y desktop cÊu h×nh \nm¹nh. Nh÷ng m¸y tr¹m nµy th−êng ®−îc sö dông cho c¸c øng dông vÒ khoa häc kü \nthuËt ®ßi hái cÊu h×nh m¸y tÝnh m¹nh. Sau ®©y lµ nh÷ng phÇn mÒm ®Æc biÖt th−êng \n®−îc ch¹y trªn c¸c m¸y tr¹m UNIX: \n\n\u2022 Computer-ai®e desing (CAD). \n\u2022 PhÇn mÒm thiÕt kÕ m¹ch ®iÖn tö. \n\u2022 PhÇn mÒm ph©n tÝch d÷ liÖu thêi tiÕt. \n\u2022 PhÇn mÒm thiÕt kÕ h×nh ¶nh ®éng. \n\u2022 PhÇn mÒm qu¶n lý thiÕt bÞ viÔn th«ng. \n\nHÇu hÕt c¸c hÖ ®iÒu hµnh desktop hiÖn nay ®Òu  cã kh¶ n¨ng m¹ng vµ hç trî \nnhiÒu user truy cËp. ChÝnh v× vËy,viÖc ph©n lo¹i m¸y tÝnh vµ hÖ ®iÒu hµnh kh«ng \nchØ dùa trªn c¸c lo¹i tr×nh øng dông ch¹y trªn m¸y mµ cßn dùa tren vai trß cña m¸y \ntÝnh trong m¹ng, lµ m¸y tr¹m hay server. C¸c tr×nh øng dông th−êng ch¹y trªn m¸y \ntr¹m th«ng th−êng gåm cã:tr×nh sö lý v¨n b¶n, b¶ng tÝnh, qu¶n lý chi tiªu,� Nh÷ng \ntr×nh øng dông ch¹y trªn m¸y tr¹m c«ng nghÖ cao bao gåm: thiÕt kÕ ®å häa, qu¶n \nlý thiÕt bÞ vµ nh÷ng phÇn mÒm ®· ®ù¬c liÖt kª ë trªn. \n\nM¸y tr¹m kh«ng æ ®Üa lµ mét lo¹i m¸y ®Æc biÖt ®Ó thiÕt kÕ ch¹y trong m¹ng. \nM¸y tÝnh nµy kh«ng cã æ ®Üa nh−ng vÉn cã mµn h×nh, bµn phÝm, RAM, ROM vµ \nNIC. PhÇn mÒm thiÕt lËp kÕt nèi m¹ng ®−îc t¶i tõ chip ROM trªn NIC. Lo¹i m¸y \ntr¹m nµy kh«ng cã æ ®Üa nªn ph¶i chÐp mäi d÷ liÖu tõ m¸y tr¹m lªn server vµ ng−îc \nl¹i, t¶i mäi  d÷ liÖu tõ trªn server xuèng. Do ®ã, m¸y tr¹m kh«ng æ ®Üa kh«ng thÓ \nph¸t virut vµo m¹ng vµ ®ång thêi còng kh«ng thÓ l−u d÷ liÖu tõ m¹ng vµo æ ®Üa. \nChÝnh v× vËy, m¸y tr¹m kh«ng æ an toµn h¬n so víi m¸y tr¹m th«ng th−êng. Do ®ã \nlo¹i m¸y tr¹m kh«ng æ ®Üa th−êng ®ù¬c sö dông trong nh÷ng m¹ng cã yªu cÇu b¶o \nvÖ cao \n\nLaptop còng lµ mét m¸y tr¹m trong m¹ng LAN vµ ®−îc kÕt nèi m¹ng th«ng \nqua PCMCIA card. \n\n6.1.2. Server: \n\n Trong m«i tr−êng m¹ng, nhiÒu client cïng truy cËp vµ chia sÎ tµi nguyªn trªn \nmét hay nhiÒu server. M¸y client ®−îc trang bÞ bé nhí, æ ®Üa vµ c¸c thiÕt bÞ ngo¹i \nvi nh− bµn phÝm, mµn h×nh. Cßn server phaØ ®−îc trang bÞ ®Ó cã thÓ hç trî cho \nnhiÒu user, nhiÒu t¸c vô cña nhiÒu client cïng  lóc trªn server. \n\n\n\n 669\n\n NhiÒu c«ng cô qu¶n lý m¹ng ®−îc thiÕt kÕ trong NOS ®Ó hç trî cho nhiÒu \nuser cïng lóc truy cËp vµo hÖ thèng. NOS cßn ®−îc cµi ®Æt trªn server vµ c¸c client \ncïng chia sÎ nh÷ng server nµy. Server th−êngd−îc trang bÞ æ ®Üa tèc ®é cao vµ dung \nl−îng lín, bé nhí RAM lín, NIC tèc®é cao vµ trong nhiÒu tr−êng hîp cßn ®−îc \ntrng bÞ nhiÒu CPU. C¸c server ®−îc cÊu h×nh bé giao thøc TCP/IP vµ cung cÊp mét \nhä¨c nhiÒu dÞch vô TCP/IP. \n\n Server cÇn cã dung l−îng bé nhí lín h¬n nhiÒu so víi m¸y tr¹m v× server \nph¶i thùc hiÖn nhiÒu t¸c vô cïng mét lóc. Server còng cÇn dung l−îng æ ®Üa lín ®Ó \nl−u c¸c file chi sÎ vµ sö dông æ ®Üa lµm bé nhí ngoµi hç trî cho RAM. Trªn \nmainboard cña server còng cÇn nhiÒu slot h¬n ®Ó cã thÓ g¾n nhiÒu card m¹ng vµ kÕt \nnèi nhiÒu thiÕt bÞ chia sÎ nh− m¸y in� \n\nMét ®Æc ®iÓm n÷a cña hÖ thèng server lµ n¨ng lùc sö lý. Nguyªn thñy ban \n®Çu server chØ cã mét CPU ®Ó thùc hiÖn c¸c t¸c vô vµ tiÕn tr×nh trªn m¸y tÝnh. §Ó \nho¹t ®éng hiÖu qu¶ h¬n vµ ®¸p øng nhanh h¬n c¸c yªu cÇucña client, server ®ßi hái \nph¶i cã CPU m¹nh h¬n ®Ó thùc hiÖn nhiÒu t¸c vô cïng lóc. Trong mét sè tr−êng \nhîp mét CPU tèc ®é cao còng ch−a ®¸p øng ®ñ th× hÖ thèng cÇn trng bÞ thªm CPU. \nHÖ thèng nhiÒu CPU cã kh¶ n¨ng chia c¸c t¸c vô cho nhiÒu CPU kh¸c nhau. Nhê \n®ã l−îng c«ng viÖc mµ server cã thÓ xö lý trong cïng mét kho¶ng thêi gian t¨ng \nlªn rÊt nhiÒu. \n\nServerlaf trung t©m tµi nguyªn vµ còng lµ trung t©m ho¹t ®éng cña client nªn \nserver ph¶i ho¹t ®éng hiÖu qu¶ vµ bÒn v÷ng. HiÖu qña lín ë ®©y cã nghÜa lµ server \nph¶i ho¹t ®éng hiÖu qu¶ víi ¸p lùc c«ng viÖc lín vµ cã kh¶ n¨ng kh«i phôc lçi ë \nmét hay nhiÒu thµnh phÇn cña server mµ kh«ng cÇn ph¶i t¾t toµn bé hÖ thèng. §Ó \n®¸p øng nhu cÇu nµy, server ph¶i cã c¸c phÇn cøng dù phßng ®Ó ho¹t ®éng thay thÕ \nkhi mét thµnh phÇn nµo ®ã bÞ h−. ViÖc sö dông hÖ thèng dù phßng giup server vÉn \nho¹t ®éng liªn tôc khi sù cè x¶y ra vµ trong kho¶ng thêi gian chê söa ch÷a thµnh \nphÇn bÞ h− háng. \n\nMét sè dÞch vô th−êng ®−îc ch¹y trªn server lµ dÞch vô web HTTP, FTP, \nDNS, c¸c dÞch vô vÒ email nh− SMTP, POP3, IMAP, dÞch vô chia sÎ th«ng file nh− \nNFS cña Sun Microsystem, SMB cña Microsoft, dÞch vô chia sÎ m¸y in, dÞch vô \nDHCP ®Ó cugn cÊp®Þa chØ IP ®éng cho m¸y tr¹m. \n\nNgoµi ra, server cßn ®−îc cµi ®Æt lµm fierwall cho hÖ thèng m¹ng b»ng c¸ch \nsö dông proxy hoÆc NAT ®Ó che giÊu ®Þa chØ m¹ng riªng bªn trong. \n\n\n\n 670\n\nMçi server chØ cã thÓ phôc vô cho mét l−îng client nhÊt ®Þnh. Do ®ã chóng \nta cã thÓ triÓn khai nhiÒu server ®Ó t¨ng hiÖu qu¶ ho¹t ®éng. Th«ng th−êng ng−êi ta \nph©n chia c¸c dÞch vô cho mçi server, vÝ dô mét server chÞu tr¸ch nhiÖm vÒ email, \nmét server chÞu tr¸ch nhiÖm vÒ chia sÎ file vµ mét server kh¸c chÞu tr¸ch nhiÖm vÒ \nFPT. \n\nViÖc tËp chugn nguån tµi nguyªn vµ c¸c dÞch vô trªn server giópcho truy cËp, \nqu¶n lý vµ dù phßng d÷ liÖu tèt h¬n. Mçi client ®−îc cung cÊp mét t6µi kho¶n víi \nuser name/pasword vµ sÏ x¸c minh tr−íc khi truy ®ùoc phÐp truy cËp vµo server. \n\n \n\n6.1.3. Mèi quan hÖ client server: \n\n M« h×nh client server ph©n chia mät tiÕn tr×nh sö lý lªn nhiÒu maý tÝnh kh¸c \nnhau. ViÖc ph©n chia mét tiÕn tr×nh sö lý cho phÐp truy cËp hÖ thèng tõ xa ®Ó chia \nsÎ th«ng tin vµ tµi nguyªn m¹ng. Trong m«i tr−êng client server client vµ server \ncïng chia sÎ, hay nãi c¸ch kh¸c lµ ph©n chia nhau mét tiÕn tr×nh sö lý.  \n\n Mét phiªn kÕt nèi FTP lµ mét vÝ dô vÒ mèi quan hÖ client server. FTP lµ mét \nph−¬ng ph¸p ®Ó truyÒn file tõ m¸y tÝnh nµy sang m¸y tÝnh kh¸c. §Ó client cã thÓ t¶i \nfile tõ server hoÆc cho phÐp chÐp file lªn server, trªn server ph¶i cã ch¹y dÞch vô \n\n\n\n 671\n\nFTP. Khi ®ã, client yªu cÇu truyÒn file, server cung cÊp dÞch vô t−¬ng øng ®Ó \ntruyÒn hoÆc nhËn file. \n\n \n\n \n\nInternet còng lµ mét vÝ dô ®iÓn h×nh vÒ quan hÖ chia sÎ mét tiÕn tr×nh sö lý \ngi÷a client server. Client hay ®iÓm cuèi giao tiÕp víi user lµ n¬i tr×nh duþªt internet \nexplorer hay netscape tr×nh bµy d÷ liÖu víi user t×nh duyÖt web göi yªu cÇu ®Õn \nweb server. Server ch¶ lêi vµ trinh duyÖt web nhËn ®−îc d÷ liÖu HTTP tõ server vµ \ntr×nh bµy trang web ®ß cho user. \n\nMét vÝ dô n÷a cho mèt quan hÖ slient server lµ server cung øng dÞch vô vÒ c¬ \nsë dö liÖu vµ client trong LAN. Trªn client,  ch¹y mét øng dông ®−îc viÕt b»ng C \nhay Java. Trªn server, ch¹y ORACLA hay mét phÇn mÒm qu¶n lý d÷ liÖu. Trong \ntr−êng hîp nµy, client thùc hiÖn viÖc ®Þnh d¹ng vµ tr×nh bµy c¸c t¸c vô ®èi víi d÷ \nliÖu cho user, cßn server cung cÊp n¬i l−u d÷ liÖu vµ dÞch vô t×m d÷ liÖu. \n\nMét m¸y tÝnh ®«i khi phaØ truy vÊn mét d÷ liÖu cÇn thiÕt nµo ®ã trong mét c¬ \nsë d÷ liÖu rÊt lên. Víi m« h×nh client server, client chØ cÇn göi yªu cÇu t×m d÷ liÖu \ncho server. Sau ®ã server cã thÓ xö lý víi h¬n 100000 hå s¬ d÷ liÖu míi t×m ra d÷ \nliÖu tháa m·n yªu cÇu cña client. \n\nNh− vËy, viÖc l−u tr÷ mét l−îng lín d÷ liÖu vµ viÖc sö lý t×m kiÕm trªn l−îng \nd÷ liÖu ®ã ®Òu ®−îc thùc hiÖn t¹i server. Clinet chØ cÇn ph¸t ®i mét yªu cÇu nhá vµ \nchê nhËn kÕt qu¶ mong muèn. Do ®ã l−îng th«ng tin chao ®æi ®−îc truyÒn ®i qua \nm¹ng sÏ nhá ®i Ýt tèn b¨ng th«ng h¬n. \n\n\n\n 672\n\nViÖc ph©n chia sö lý mét tiÕn tr×nh gi÷a client vµ server nh− trªn ®em l¹i \nnhiÒu −u ®iÓm, nh−ng còng cã nh−îc ®iÓm vÒ mÆt chi phÝ. ViÖc tËp chung tµi \nnguyªn trªn server gióp cho viÖc truy cËp ®¬ng gi¶n, kiÓm so¸t tËp chung vµ kh¶ \nn¨ng b¶o vÖ tèt h¬n nh−ng server l¹i trë thµnh ®iÓm nh¹y c¶m duy nhÊt. Nõu server \nbÞ sù cè, kh«ng ho¹t ®éng ®−îc th× kÓ nh− toµn bé hÖ thèng còng kh«ng ho¹t ®éng \n®−îc n÷a. Ngoµi ra, ®Ó b¶o tr× vµ qu¶n trÞ server cßn ®ßi hái ph¶i cã nh÷ng phÇn \ncøng dù phßng, nh÷ng phÇn mÒm ®Æc biÖt vµ nh÷ng chuyªn gia tr×nh ®é cao trong \nlÜnh vùc nµy. TÊt c¶ nh÷ng yÕu tè ®ã lµm t¨ng thªm chi phÝ vËn hµnh m¹ng. \n\n6.1.4. Giíi thiÖu vÒ hÖ ®iÒu hµnh m¹ng, gäi t¾t lµ NOS (Netword Operating \nSystem): \n\n HÖ ®iÒu hµnh lµ mét phÇn mÒm lµm nÒn cho tÊt c¶ c¸c øng dông vµ dÞch vô \nch¹y trªn mét m¸y tÝnh. T−¬ng tù, NOS cho phÐp nhiÒu thiÕt bÞ th«ng tin liªn l¹c \nvíi nhau ®Ó chia sÎ tµi nguyªn qua m¹ng. NOS th−êng ®−îc ch¹y trªn c¸c server \nUnix, Microsoft Windows NT, Windows 2000. \n\n C¸c chøc n¨ng th«ng th−êng cña mét hÖ ®iÒu hµnh trªn m¸y tr¹m gåm ®iÒu \nkhiÓn phÇn cøng, ch¹y ch−¬ng tr×nh vµ cung cÊpgiao diÖn tiÕp víi user. NhiÒu user \ncã thÓ chia sÎ cïng mét m¸y tÝnh nh−ng kh«ng thÓ sö dông mét m¸y tÝnh cïng lóc. \nTrong khi ®ã, NOS ph©n chia chøc n¨ng trªn nhiÒu m¸y tÝnh kh¸c nhau, cho phÐp \nchia sÎ d÷ liÖu bëi nhiÒu user cïng lóc. \n\n Mét client trong m«i tr−êng NOS cã thÓ cho phÐp ng−êi sö ông truy cËp ®Õn \nnguån tµi nguyªn trªn m¸y kh¸c nh− chÝnh nguån tµi nguyªn néi bé n»m trªn m¸y \nvËy. \n\n Mét NOS server nhiÒu ng−êi dïng cã kh¶ n¨nh hç trî nhiÒu user cïng lóc. \nNhµ qu¶n trÞ m¹ng t¹o tµi kho¶n cho mçi user, cho phÐp server kiÓm tra vµ x¸c \nminh user mçi khi truy cËp, ®ång thêi tïy theo mçi tµi kho¶n mµ user cã thÓ truy \ncËp nh÷ng tµi nguyªn nµo ®−îc phÐp. \n\n NOS server lµ mét hÖ thèng ®a nhiÖm, cã kh¶ n¨ng thùc hiÖn nhiÒu nhiÖm vô \ncïng lóc. PhÇn mÒm NOS ph©n phèi thêi gian xö lý, bé nhí vµ c¸c thµnh phÇn kh¸c \ncñu hÖ thèng cho c¸c t¸c vô kh¸c nhau, cho phÐp nhiÒu t¸c vô cïng chia sÎ tµi \nnguyªn hÖ thèng. Mçi user trong hÖ thèng nhiÒu ng−êi dïng ®−îc hç trî bëi mét \ntiÕn tr×nh riªng trong server. Mçi tiÕn tr×nh nµy ®−îc t¹o ra tù ®éng bªn trong server \nmçi khi user kÕt nèi vµo hÖ thèng vµ ®ù¬c xãa ®i khi user ng¾t kÕt nèi. \n\n\n\n 673\n\n Khi chän lùa NOS chóng ta cÇn quan t©m ®Õn c¸c ®Æc ®iÓm sau: kh¶ n¨ng \nho¹t ®éng, c«ng cô qu¶n lý vµ theo dâi, kh¶ n¨ng b¶o mËt, kh¶ n¨ng më réng, ®é \nbÒn v÷ng vµ kh¶ n¨ng kh¾c phôc lçi. \n\n Kh¶ n¨ng ho¹t ®éng: NOS ph¶i thùc hiÖn ®äc vµ ghi c¸c file d−îc truyÒn \nqua m¹ng gi÷a client vµ server. Server ph¶i cã kh¶ n¨ng ho¹t ®éng tèt víi ¸p lùc \ncao khi cã nhiÒu client cïng göi yªu cÇu cïng mét lóc. Yªu cÇu ho¹t ®éng tèt d−íi \n¸p lùc cao lµ mét tiªu chuÈn hµng ®Çu cho mét NOS.  \n\n Kh¶ n¨ng qu¶n lý vµ theo dâi: Giao diÖn qu¶n lý cña NOS cung cÊp c«ng \ncô ®Ó theo dâi, qu¶n lý client vµ æ ®Üa. Giao diÖn qu¶n lý cña NOS cßn cung cÊp \nc«ng cô ®Ó cµi ®Æt vµ cÊu h×nh dÞch vô míi. Ngoµi ra, server cßn ®ßi hái ph¶i ®ù¬c \nth−êng xuyªn theo dâi vµ ®iÒu chØnh. \n\n Kh¶ n¨ng b¶o mËt: NOS ph¶i b¶o vÖ nguån tµi nguyªn chia sÎ. ViÖc b¶o \nmËt bao gåm x¸c minh user, m· hãa ®Ó b¶o vÖ th«ng tin khi truyÒn ®i gi÷a client vµ \nserver. \n\n Kh¶ n¨ng më réng: Lµ kh¶ n¨ng ph¸t triÓn m¹ng mµ kh«ng lµm gi¶m hiÖu \nqu¶ ho¹t ®éng cña NOS . NOS ph¶i cã kh¶ n¨ng chÊp nhËn thªm user vµ server \nmíi. \n\n §é bÒn v÷ng vµ kh¶ n¨ng kh¾c phôc lçi: §é bÒn ®−îc x¸c ®Þnh th«ng qua \nkh¶ n¨ng cung cÊp dÞch vô khi co sù cè x¶y ra. Chóng ta nªn sö dông æ ®Üa dù \nphßng vµ chia t¶i cho nhiÒu server ®Ó t¨ng ®é bÒn v÷ng cho NOS. \n\n \n\n6.1.5. Microsoft NT, 2000 vµ .NET: \n\n KÓ tõ khi phiªn b¶n Windows 1.0 ®−îc ph¸t hµnh th¸ng 11n¨m 1985 ®Õn \nnay, Microsoft ®· ph¸t hµnh nhiÒu phiªn b¶n hÖ ®iÒu hµnh Windows kh¸c nhau víi \nnhiÒu c¶i c¸ch vµ thay ®æi ®Ó hç trî cho nhiÒu môc ®Ých kh¸c nhau. \n\n\n\n 674\n\n Windows NT 4.0 ®−îc thiÕt kÕ ®Ó cung cÊp mét m«i tr−êng ho¹t ®éng æn \n®Þnh h¬n vµ cã Windows NT 4.0 cho desktop (NT 4.0 Workstation) vµ cho server \n(NT 4.0 Server). ¦u ®iÓmcña Windows NT 4.0 lµ DOS vµ c¸c ch−¬ng tr×nh \nWindows cò cã ch¹y trong m«i tr−êng gi¶ lËp. Lçi ch−¬ng tr×nh ®−îc c« lËp vµ \nkh«ng cÇn ph¶i khëi ®éng m¹i m¸y. \n\n Windows NT cung cÊp cÊu tróc miÒn ®Ó kiÓm so¸t user vµ client truy cËp vµo \ntµi nguyªn server. Mçi miÒn NT ph¶i cã mét primary domain controller l−u c¬ së \nd÷ liÖu qu¶n lý tµi kho¶n (SAM \u2013 Security Accounts Management Database) vµ cã \nmét hoÆc nhiÒu backup domain controller, trªn ®ã l−u b¶n copy read-only cña \nSAM. Khi user  muèn truy cËp vµo hÖ thèng, th«ng tin tµi kho¶n ®−îc göi ®Õn \nSAM. Nõu th«ng tin tµi kho¶n nµy cã l−u trong SAM th× user sÏ ®−îc x¸c minh vµo \nmiÒn NT vµ truy cËp ®−îc vµo tµi nguyªn hÖ thèng. \n\n KÕ thõa Windows NT, Windows 2000 ®−îc ph¸t triÓn cho c¶ Desktop vµ \nserver, Windows 2000 cã kü thuËt Plug-and \u2013 play, nghÜa lµ c¸c thiÕt bÞ míi ®−îc \ncµi ®Æt vµo hÖ thèng mµ kh«ng cÇn khëi ®éng l¹i. Windows2000 cßn cã hÖ thèng \nm· hãa File ®Ó b¶o mËt d÷ liÖu trªn ®Üa cøng. \n\nWindows2000 ®Æt c¸c ®èi t−îng nh− User, tµi nguyªn vµo mét ®¬n vÞ nh− lµ \nOrganizational units (Ous). ViÖc x¸c minh qu¶n trÞ trªn mçi OU ®−îc ñy th¸c cho \nmét User hoÆc mét nhãm User ®Æc ®iÓm nµy cho phÕp qu¶n lý chi tiÕt h¬n so víi \nWindows NT 4.0. \n\nWindows2000 Prossional kh«ng ®−îc thiÕt kÕ ®Ó lµm mét NOS hoµn chØnh. Nã \nkh«ng cung cÊp domain controller, DNS Server, DHCP Server hay bÊt kú dich vô \nnµo kh¸c nh− windows2000 Server. \n\nMôc ®Ých chÝnh cña windows2000 Prossional lµ tham gia vµo domain víi t− c¸ch lµ \nmét hÖ ®iÒu hµnh phÝa client. C¸c lo¹i phÇn cøng cã thÓ cµi trªn hÖ thèng còng bÞ \ngiíi h¹n windows2000 Prossional còng cã thÓ cung cÊp mét vµi kh¶ n¨ng Server \ncho m¹ng nhá hoÆc m¹ng ngang hµng, vÝ dô nh− File server, FPT server, web \nserver, print server nh−ng chØ tèi ®a 10 kÕt nèi cïng lóc. windows2000 Server bæ \nsung thªm nhiÒu chøc n¨ng server cho windows2000 Prossional. windows2000 \nServer cã thÓ ho¹t ®éng nh− mét File server, nhãm user vµ tµi nguyªn m¹ng. \n\nwindows2000 Server cã thÎ sö dông cho m¹ng cã kichs th−íc võa vµ nhá. Nã cung \ncÊp kÕt nèi t−¬ng thÝch víi hÖ thèng Novell Netware, UNIX vµ Apple. Nã cã thÓ \n®−îc cÊu h×nh lµm communication server ®Ó cung cÊp dÞch vô quay sè cho c¸c \n\n\n\n 675\n\nserver ë xa. windows2000 Advance Server hç trî thªm nhiÒu phÇn cøng vµ phÇn \nmÒm kh¸c cho c¸c m¹ng lín vµ cùc lín. \n\nMicrosoft còng ®· ph¸t triÓn windows.NET Server cung cÊp kh¶ n¨ng b¶o mËt còng \nnh− ®é tin cËy cao ®Ó ch¹y c¸c Wed vµ c¸c FPT sites cùc lín, c¹nh tranh víi linux, \nUNIX vµ novels\u2019s One NET. Windows.NET  Server cung cÊp dÞch vô XML Wed \ncho c¸c c«ng ty, tæ chøc cã møc ®é l−u l−îng web võa vµ cao. \n\n6.1.6. UNIX, Sun, HP vµ LINUX: \n\n6.1.6.1. Nguån gèc cña UNIX: \n\nUNIX lµ tªn cña mét nhãm c¸c hÖ ®iÒu hµnh cã nguån gèc tõ n¨m 1969 ë \nBell Labs. Ngay tõ ban ®Çu UNIX ®½ ®−îc thiÕt kÕ ®Ó hç trî ®a ng−êi dïng vµ ®a \nt¸c dông. UNIX lµ hÖ ®iÒu hµnh ®Çu tiªn cã hç trî c¸c giao thøc m¹ng Internet. lÞch \nsö ph¸t triÓn cã h¬n 35 n¨m cña UNIX lµ mét qu¸ tr×nh phøc t¹p, trong ®ã cã rÊt \nnhiÒu c«ng ty vµ tæ chøc ®ãng gãp vµo sù ph¸t triÓn cña nã. \n\n §Çu tiªn, UNIX ®−îc viÕt b»ng hîp ng÷ (assembly language) vµ UNIX chØ \nch¹y ®−îc trªn mét lo¹i m¸y tÝnh ®Æc biÖt. Vµo n¨m 1971, Dennis Ritchie cho ra \n®êi ng«n ng÷ lËp tr×nh C. N¨m 1973, Ritchie cïng víi mét thµnh viªn cña Bell Lasb \nlµ nhµ lËp tr×nh Fen Thompson viÕt l¹i ch−¬ng tr×nh UNIX vêi ng«n ng÷ C. C lµ \nmét ng«n ng÷ lËp tr×nh bËc cao, do ®ã UNIX ®· co thÓ chuyÓn sang ch¹y trªn c¸c \nlo¹i m¸y tÝnh kh¸c. QuyÕt ®Þnh ph¸t triÓn hÖ ®iÒu hµnh míi nµy lµ ch×a khãa thµnh \nc«ng cña UNIX. Trong suèt thËp niªn 70, UNIX ®−îc ph¸t triÓn bëi c¸c nhµ lËp \ntr×nh ë Bell Labs vµ mét sè tr−êng ®¹i häc nh− University of California ë Berkeley. \n\n Khi UNIX lÇn ®Çu tiªn trë thµnh mét th−¬ng hiÖu trªn thÞ tr−êng  trong thËp \nniªn 80, UNIX chØ ®−îc sö dông trªn c¸c server m¹ng lo¹i m¹nh chø kh«ng sö \ndông trªn m¸y tÝnh ®Ó bµn. Ngµy nay, UNIX ®· cã nhiÒu phiªn b¶n kh¸c nhau nh−: \n\n\u2022 Hewlett Packard UNIX (HP-UX). \n\u2022 Berkeley Software Design, Inc. (BSD UNIX), cã c¸c s¶n phÈm nh− \n\nFreeBSD. \n\u2022 S©nt Cruz Operation (SCO) UNIX. \n\u2022 Sun Solaris. \n\u2022 IBM UNIX (AIX). \n\n\n\n 676\n\nUNIX tiÕp tôc kh¼ng ®Þnh vÞ trÝ cña nã lµ mét hÖ ®iÒu hµnh ®¸ng tin cËy, an \ntoµn cho c¸c øng dông quan träng, then chèt cña mét doanh nghiÖp hay tæ chøc. \nUNIX còng thÝch hîp víi TCP/IP v× chóng cÇn cho LAN vµ WAN. \n\nM«i tr−êng hÖ ®iÒu hµnh Sun Microsystem Solaris lµ cèt lâi cña nã, hÖ ®iÒu \nhµnh SunOS lµ mét phiªn b¶n 64 bit, linh ho¹t vµ hiÖu suÊt ho¹t ®éng cao cña \nUNIX. Solaris cã thÓ ch¹y trªn nhiÒu lo¹i m¸y tÝnh kh¸c nhau, tõ m¸y tÝnh c¸ nh©n \nIntel cho ®Õn c¸c m¸y tÝnh cùc m¹nh. HiÖn nay Solaris lµ phiªn b¶n ®−îc sö dông \nréng r·i nhÊt cña UNIX trong c¸c hÖ thèng m¹ng lín vµ c¸c Internet website. Sun \ncßn lµ nhµ ph¸t triÓn c«ng nghÖ Java \u201cWrite Once, Run Anywhere\u201d. \n\nNÕu nh− Microsoft Windows ®−îc sö dông phæ biÕn trong LAN thi UNIX \n®−îc ch¹y rÊt nhiÒu trªn Internet. UNIX th−êng g¾n kiÒn víi nh÷ng phÇn cøng ®¨t \ntiÒn, kh«ng th©n thiÖn víi ng−êi sö dông. Tuy nhiªn trong nh÷ng ph¸t triÓn gÇn \n®©y, kÓ c¶ Linux, ng−êi ta ®ang cè g¾ng thay ®æi h×nh ¶nh nµy. \n\n6.1.6.2. Nguån gèc cña Linux: \n\n \n\n \n\n Vµo n¨m 1991, mét sinh viªn ng−êi PhÇn Lan tªn lµ Linus Torvalds b¾t tay \nnghiªn cøu hÖ ®iÒu hµnh  cho m¸y tÝnh Intel 80386. Torvalds ®· kh«ng b»ng lßng \nvíi tr¹ng th¸i ho¹t ®éng cña c¸c hÖ ®iÒu hµnh desktop, vÝ dô nh− DOS vµ sù tèn \nkÐm bëi chi phÝ b¶n quyÒn cña UNIX. Torvalds ®· ph¸t triÓn hÖ ®iÒu hµnh ho¹t \n®éng gièng UNIX nh−ng sö dông m· phÇn mÒm më hoµn toµn miÔn phÝ cho mäi \nng−êi sö dông. \n\n\n\n 677\n\n ViÖc lµm cña Torvalds ®· dÉn ®Õn mét hiÖu øng céng t¸c  toµn cÇu, cïng \nph¸t triÓn Linux lµm mét hÖ ®iÒu hµnh m· nguån më, cá h×nh thøc vµ c¸ch sö dông \nt−¬ng tù nh− UNIX. Vµo cuèi thËp niªn 90, Linux ®· trë thanh kÎ cã thÓ thay thÕ \ncho UNIX trªn server vµ cho Windows trªn desktop. \n\nC¸c phiªn b¶n cña Linux hiÖn nay cã thÓ ch¹y trªn hÇu hÕt c¸c bé xö lý 32 bit, bao \ngåm Intel 80386, Motorola 68000, Alpha vµ PowerPC. \n\n Còng nh− UNIX Linux còng cã nhiÒu phiªn b¶n kh¸c nhau. Mét sè phiªn \nb¶n cã thÓ t¶i miÔn phÝ tõ web vµ mét sè ®−îc b¸n. Sau ®©y lµ mét sè phiªn b¶n \nth«ng dông nhÊt cña Linux: \n\n\u2022 Red Hat Linux \u2013 ph©n phèi bëi Red Hat Software. \n\u2022 OpenLinux - ph©n phèi bëi Caldera. \n\u2022 Corel Linux. \n\u2022 Slackware. \n\u2022 Debian GNU/Linux. \n\u2022 SóE Linux. \n\nLinux lµ mét trong nh÷ng hÖ ®iÒu hµnh m¹nh nhÊt vµ ®¸ng tin cËy nhÊt trªn \nthÕ giíi hiÖn nay. ChÝnh v× vËy Linux còng chØ dµnh cho nh÷ng ng−êi dïng chuyªn \nnghiÖp ®−îc sö dông nhiÒu cho c¸c server m¹nh vµ Ýt ®−îc triÓn khai lµm hÖ ®iÒu \nhµnh desktop. MÆc dï Linux còng cã giao diÖn ®å häa th©n thiÖn víi ng−êi dïng \nnh−ng ng−êi dïng kh«ng chuyªn nghiÖp vÉn c¶m thÊy sö dông Linux khã h¬n so \nvíi Mac OS hay Windows. HiÖn nay mét sè c«ng ty nh− Red Hat, SuSE, Corel vµ \nCaldera còng ®ang cè g¾ng lµm cho Linux còng phæ biÕn nh− mét hÖ ®iÒu hµnh cho \ndesktop. \n\n Khi triÓn khai Linux trªn m¸y tÝnh ®Ó bµn, chóng ta cÇn quan t©m ®Õn kh¶ \nn¨ng hç trî c¸c tr×nh øng dông cña Linux. Cã mét sè ch−¬ng tr×nh øng dông chØ \nt−¬ng øng víi Windows. Tuy nhiªn mét sè h·ng nh− WABI vµ WINE chuyªn cung \ncÊp phÇn mÒm m« pháng Windows ®· gióp cho nhiÒu øng dông Windows cã thÓ \nch¹y trªn Linux. Ngoµi ra, mét sè c«ng ty nh− Corel còng ®ang lµm phiªn b¶n \nLinux phï hîp víi hÖ thèng cña hä cïng víi c¸c phÇn mÒm th«ng dông kh¸c. \n\n6.1.6.3.nèi m¹ng víi linux: \n\n HiÖn nay trong Linux ®· cã c¸c thµnh phÇn vÒ m¹ng, cho phÐp kÕt nèi LAN \nvµ thiÕt lËp kÕt nèi quay sè ra Internet� TCP/IP ®−îc tÝch hîp vµo nh©n cña Linux \nchø kh«ng triÓn khai thµnh mét hÖ thèng con riªng biÖt. \n\n\n\n 678\n\n Sau ®©y lµ mét sè −u ®iÓm cña Linux khi ®−îc sö dông trªn desktop: \n\n\u2022 Nã thùc sù lµ hÖ ®iÒu hµnh 32 bit  \n\u2022 Nã hç trî ®a t¸c vô vµ bé nhí ¶o \n\u2022 M· nguån më nªn bÊt kú ai còng cã thÓ vËn dông vµ ph¸t triÓn \n\n6.1.7 Apple: \n\nM¸y tÝnh apple macintosh ®−îc thiÕt kÕ cho m¹ng ngang hµng hay mét \nnhãm m¸y tÝnh nhá. Cæng nèi m¹ng còng ®−îc bao gåm lu«n trong phÇn cøng cña \nm¸y tÝnh, c¸c thnµh phÇn m¹ng ®−îc x©y dùng trong hÖ ®iÒu hµnh macintosh. M¸y \ntÝnh macintosh còng cã thÓ sö dông bé chuyÓn ®æi ethrnet hay token ring. \n\nM¸y tÝnh macintosh hay gäi t¾t lµ Mac, ®−îc sö dông phæ biÕn trong c¸c häc \nviÖn vµ c¸c bé phËn ®å häa. Mac cã thÓ kÕt nèi víi mét m¸y tÝnh kh¸c trong nhãm \nvµ cã thÓ truy cËp vµo file server appleshare. Mac còng cã thÓ kÕt nèi víi c¸c PC \ntrong LAN vµ c¸c server Microsft, NetWare, UNIX. \n\n \n\n \n\n \n\nMas OSX(10) \n\nHÖ ®iÒu hµnh Macintosh, Mac OSX, ®«i khi cßn ®−îc gäi lµ Apple system \n10. \n\n \n\n\n\n 679\n\n \n\nGiao diÖn ®å h¹o Aqua cña Mac OS X tËp hîp nh÷ng ®Æc ®iÓm cña Microsoft \nWindows XP vµ Linux X-Windosw. Mac OS X ®ùoc thiÕt kÕ ®Ó cung cÊp c¸c chøc \nn¨ng cho mét m¸y tÝnh gia ®×nh, vÝ dô nh−  ch×nh duyÖt Internet, biªn tËp h×nh vµ \nVideo, Game, ®ång thêi còng cung cÊp nh÷ng c«ng cô m¹nh, cÊu h×nh chuyªn \nnghiÖp mµ mét chuyªn gia IT cÇn cã trong hÖ n®iÒu hµnh. \n\nMac OS X t−¬ng thÝch hoµn toµn víi c¸c phiªn b¶n cò cña Mac. Mac OS X cßn \ncung cÊp nhiÒu chøc n¨ng míi cho phÐp kÕt nèi víi Apple talk vµ Windows. HÖ \n®iÒu hµnh x−¬ng sèng cña Mac OS X ®−îc gäi lµ Darwin. Darwwin lµ mét hÖ \nthèng m¹nh, dùa trªn c¬ së cña Unix, ho¹t ®äng æn ®Þnh vµ hiÖu suÊt cao. Mac OS \nX còng hç trî bé nhí ¶o, qu¶n lý bé nhí bËc cao, thùc hiªn da t¸c vô vµ sö lý ®ång \nbé. TÊt c¶ nh÷ng −u ®iÓm nµy lµm cho Mac OS X còng lµ mét ®èi thñ c¹nh tranh \nvíi c¸c hÖ ®iÒu hµnh kh¸c. \n\n6.1.8. Kh¸i niÖm vÒ c¸c dÞch vô trªn Server: \n\nNOS ®−îc thiÕt kÕ ®Ó cung cÊp c¸c ho¹t ®éng m¹nh cho client. C¸c dÞch vô \nm¹ng bao gåm WWW, chia sÎ tËp tin, Mail, qu¶n lý tõ xa, in tõ xa ��.qu¶n lý tõ \nxa lµ mét dÞch vô m¹nh , cho phÐp ng−êi qu¶n trÞ m¹ng cã thÓ cÊu h×nh hÖ thèng \nm¹ng tõ xa. Mçi ho¹t ®éng m¹ng trªn c¸c hÖ ®iÒu hµnh kh¸c nhau cã chøc n¨ng \ngièng nhau nh−ng c¸ch ho¹t ®éng sÏ kh¸c nhau. \n\nTïy theo tõng NOS mµ mét sè c¸c ho¹t ®éng chñ yÕu sÏ ®−îc kÝch ho¹t mÆc \n®Þnh trong qu¸ tr×nh cµi ®Æt NOS. hÇu hÕt c¸c ho¹t déng m¹ng th«ng dông ®Òu dùa \ntrªn bé giao thøc TCP/IP. Nh−ng TCP/IP lµ bé giao thøc më vµ næi tiÕng lªn c¸c \n\n\n\n 680\n\ndÞch vô dùa trªn TCP/IP còng ®−óng tr−íca c¸c nguy c¬ bÞ tÊn c«ng. t¸n c«ng DOS \n(Denian of service), virut, Worm � ®· buéc ng−êi thiÕt kÕ NOS quan t©m nhiÒu \nh¬n ®Õn viÖc khëi ®éng tù ®éng mét dÞch vô m¹ng. \n\nNh÷ng phiªn b¶n th«ng dông ngÇn ®©y cña NOS, vÝ dô nh− Windows vµ Red \nHat Linux, ®· giíi h¹n sè dÞch vô m¹ng ®−îc kÝch ho¹t mÆc ®Þnh do ®ã, khi sö \ndông NOS, chóng ta ph¶i khëi ®éng c¸c dÞch vô m¹ng b»ng tay . \n\nKhi mét urer muèn in trong m¹ng cã dÞch vô in chia sÎ, yªu cÇu in ®−îc göi \n®Ðn hµng ®îi cña m¸y in vµ m¸y in phôc vô c¸c yªu cÇu nµy theo thø tù \u201c®Õn tr−íc, \nin tr−íc\u201d. Do ®ã thêi gian chê in cã thÓ sÏ l©u, tïy theo sè l−îng cÇn in ®ang n»n \nttrong hµng ®îi. Víi dÞch vô in qua m¹ng, ng−êi qu¶n trÞ hÖ thèng cã thÓ qu¶n lý sè \nl−îng lín c«ng viÖc c«ng viÖc lín in Ên qua m¹ng, bao gåm cµi ®Æt ®é −u tiªn, thêi \ngian chê vµ xãa nh÷ng yªu cÇu in ®ang trong hµng chê.  \n\nChia sÎ tËp in  \n\nChia sÎ tËp in lµ mét dÞch vô m¹ng quan träng. HiÖn nay cã rÊt nhiÒu giao \nthøc vµ øng dông cho chia sÎ tËp tin. Trong ph¹m vi m¹ng nhá huÆc m¹ng gia ®×nh, \ntËp tin ®−îc chia sÎ b»ng Windows file sharing hay giao thøc NFS khi ®ã ng−êi sö \ndông thËm chÝ còng kh«ng nhËn thÊy sù kh¸c biÖt cña tËp tin ®ang n»m trªn ®·i \ncøng hay trªn server. Windows file sharing vµ NFS cho phÐp ng−êi sö dông dÔ \ndµng di chuyÓn, t¹o míi hay xãa tÖp tin trong th− môc hay trªn m¸y ë xa. \n\nFTP \n\nRÊt nhiÒu l¬i sö dông FTP ®Ó t¹o tÖp tin cã thÓ truy cËp tõ xa, ®iÒu chØnh vµ \nph¸t hµnh ra céng ®ång. dÞch vô FTP kÕt hîp víi dÞch vô WEB ®−îc sö dông rÊt \ndéng d·i. vÝ dô: mét User ®äc th«ng tin vÒ mét phÇn mÒm míi trªn trang Web vµ \nt¶i phÇn mÒm ®ã vÒ b»ng FTP. C¸c c«ng ty nhá cã thÓ dïng mét Server cung c¸p c¶ \nhai dÞch vô FTP vµ HTTP, cßn c¸n c«ng ty lín cã thÓ dµnh riªng mét Server cho \nFTP. \n\nFTP client ph¶i truy nhËp vµo FTP Server vµ chóng ta cã thÓ cÊu h×nh FTP \nServer cho phÐp truy nhËp v« danh. Khi User truy nhËp v¸o Server d−íi d¹ng v« \ndanh, User kh«ng b¾t buéc ph¶i cã tµi s¶n trong hÖ thèng. Giao thøc FTP cßn cho \nphÐp User chÐp tËp tin nªn Server thay ®æi tªn vµ x¸o tÖp tin. Do ®ã ng−êi qu¶n trÞ \nhÖ thèng cÇn cÈn thËn khi cÊu h×nh quyÒn truy cËp. \n\n\n\n 681\n\nFTP lµ mét giao thøc h¹ot ®éng theo phiªn truy cËp. Client ph¶i më phiªn giao tiÕp \në líp øng dông víi Server, thùc hiÖn x¸c minh vµ sau ®ã t¶i huÆc chÐp tÖp tin nªn \nServer. NÕu phiªn kÕt nèi kh«ng ho¹t ®éng trong mét kho¶ng thêi gian nhÊt ®Þnh \nth× Server sÏ ng¾t kÕt nèi ®ã. Thêi gian chê cho mçi phiªn kÕt nèi tïy thuéc tõng \nphÇn mÒm kh¸c nhau. \n\nDÞch vô Web \n\nWornd wide web lµ dÞch vô m¹ng phæ biÕn nhÊt hiÖn nay. Ötong vßng kh«ng \n®Çy mét thËp niªn Wornd wide web ®· chë thµnh m¹ng toµn cÇu cho th«ng tin, \nbu«n b¸n, gi¸o dôc vµ gi¶i trÝ. Hµng tû c¸c c«ng ty tæ chøc vµ c¸ nh©n ®Æt trang \nWeb cña m×nh trªn Internet Web site lµ mét tËp hîp c¸c trang Web víi nhau. \n\nWornd wide web dùa trªn c¸c m« h×nh client/ server. Client thiÕt lËp phiªn \nb¶n kÕt nèi TCB víi Web server. Khi kÕt nèi ®· ®−îc thiÕt lËp song, client cã thÓ \nyªu cÇu nhËn d÷ liÖu tõ server HTTP. Thùc hiÖn c¸c giao thøc truyÒn d−c liÖu gi÷a \nclient vµ server. PhÇn mÒm Web/client lµ c¸c tr×nh duyÖt Web vÝ dô Netscape, \nInternet explorer. \n\nTrang Web ®−îc trªn Server cã ch¹y phÇn mÒm dÞch vô Web. Hai phÇn mÒm \nWeb server th«ng dông nhÊt lµ ernet explorer. \n\nTrang Web ®−îc trªn Server cã ch¹y phÇn mÒm dÞch vô Web. Hai phÇn mÒm \nWeb server th«ng dông nhÊt lµ Microsoft Internet information Services (IIS) vµ \nApache Web Server. Microsoft (IIS) ch¹y trªn Windows Apache Web Server ch¹y \ntrªn UNIX vµ Linnux. \n\nDNS \n\nGiao thøc DNS dich trªn phÇn mÒm Internet, vÝ dô nh− HTUwww.cisco.comUTH, \nthµnh ®¹i chØ IP. Giao thøc DNS cho phÐp client göi yªu cÇu ®Õn DNS server ®Ó \nthùc hiÖn dÞch tªn miÒn sang ®¹i chØ IP. Sau ®ã ch−¬ng tr×nh øng dông cã thÓ sö \ndông ®Þa chØ IP nµy ®Ó göi d÷ liÖu. NÕu kh«ng cã dÞch vô nµy cã lÏ Internet ®· \nkh«ng thÓ ph¸t triÓn nh− ngµy nay. \n\nDHCP \n\nMôc ®Ých cña DHCP lµ cho phÐp mçi m¸y tÝnh trong m¹ng IP ®−îc  cÊu h×nh \nTCP/IP tõ mét hay nhiÒu DHCP server. DHCP cung cÊp ®¹i chØ IP cho mét m¸y \ntÝnh trong mét kho¶n thêi gian nhÊt ®Þnh, sau ®ã lÊy l¹i ®¹i chØ IP ®ã vµ cã thÓ cÊp \n\n\n\n 682\n\nmét ®¹i chØ IP míi. TÊt c¶ c¸c c«ng viÖc nµy ®−îc thùc hiÖn bëi mét DHCP server. \nNhê ®ã c«ng viÖc qu¶n lý m¹ng IP lín ®−îc gi¶m bít rÊt nhiÒu. \n\n \n\n6.2. Qu¶n trÞ m¹ng: \n\n6.2.1. Giíi thiÖu vÒ qu¶n trÞ m¹ng: \n\nKhi mét hÖ thèng m¹ng ngµy cµng ph¸t triÓn th× trong ®ã cµng cã nhiÒu tµi \nnguyªn quan träng h¬n. khi cµng cã nhiÒu tµi nguyªn phôc vô cho User th× m¹ng \nl¹i cµng trë nªn phøc t¹p, c«ng viÖc qu¶n trÞ m¹ng cµng trë nªn khã kh¨n h¬n. viÖc \nthiÕu hôt tµi nguyªn vµ hiÖu suÊt ho¹t ®éng kÕm lµ hËu qu¶ cña viÖc ph¸t triÓn \nkh«ng ho¹ch ®Þnh vµ c¸c User kh«ng thÓ chÊp nhËn ®iÒu nµy. do ®ã ng−êi qu¶n trÞ \nm¹ng ph¶i tù ®éng qu¶n lý hÖ thèng cña m×nh, x¸c ®Þnh sù cè vµ ng¨n ngõa sù cè \nxÈy ra, t¹o hiÖu suÊt ho¹t ®éng tèt nhÊt cho User. MÆt kh¸c khi hÖ thèng m¹ng chë \nnªn qu¸ lín, ng−êi qu¶n trÞ cã thÓ kh«ng qu¶n lý næi nÕu kh«ng cã sù trî gióp cña \nc¸c c«ng cô qu¶n lý m¹ng tù ®éng. \n\nC«ng viÖc qu¶n trÞ m¹ng bao gåm: \n\n\u2022 Theo dâi ho¹t ®éng m¹ng. \n\u2022 T¨ng c−êng kh¶ n¨ng tù ®éng. \n\u2022 Theo dâi thêi gian ®¸p øng trong m¹ng. \n\u2022 B¶o mËt. \n\u2022 ®Þnh tuyÕn l−u l−îng m¹ng. \n\u2022 Cung cÊp kh¶ n¨ng l−u tr÷ d÷ liÖu. \n\u2022 §¨ng ký user. \n\nC«ng viÖc qu¶n trÞ m¹ng chÞu nh÷ng tr¸ch nhiÖm sau: \n\n\u2022 KiÓm so¸t t¸i s¶n chung: NÕu tµi nguyªn m¹ng kh«ng ®−îc kiÓm \nso¸t hiÖu qu¶ th× ho¹t ®éng cña hÖ thèng m¹n sÏ kh«ng ®¹t nh− mong \nmuèn. \n\n\n\n 683\n\n\u2022 KiÓm so¸t ®é phøc t¹p: Sù ph¸t triÓn bïng næ sè l−îng thiÕt bÞ m¹ng, \nuser, giao thøc vµ c¸c nhµ cung cÊp dÞch vô, thiÕt bÞ� lµ nh÷ng ®iÒu \ng©y khã kh¨n cho c«ng viÖc qu¶n trÞ m¹ng \n\n\u2022 Ph¸t triÓn dÞch vô: Ng−êi sö dông lu«n mong chê nh÷ng dÞch vô míi \nh¬n, tèt h¬n khi hÖ thèng m¹ng ph¸t triÓn h¬n. \n\n\u2022 C©n b»ng c¸c nhu cÇu kh¸c nhau: Ng−êi sö dông lu«n ®ßi hái c¸c \nphÇn mÒm øng dông kh¸c nhau víi nh÷ng møc hç trî kh¸c nhau vµ \nyªu cÇu kh¸c nhau vÒ møc ®é ho¹t ®éng, kh¶ n¨ng b¶o mËt� \n\n\u2022 Gi¶m tèi ®a thêi gian ngõng ho¹t ®éng do sù cè: Sö dông c¸c biÖn \nph¸p dù phßng ®Ó ®¶m b¶o kh¶ n¨ng cung cÊp dÞch vô vµ tµi nguyªn \nm¹ng. \n\n\u2022  KiÓm so¸t chi phÝ: Theo dâi vµ kiÓm so¸t møc ®é sö dông tµi nguyªn \n®Ó phï hîp víi møc chi phÝ chÊp nhËn ®−îc. \n\n6.2.2. OSI vµ m« h×nh qu¶n trÞ m¹ng: \n\nISO (International Standards Organization) ®−a ra m« h×nh qu¶n trÞ m¹ng víi \n4 phÇn: \n\n\u2022 Tæ chøc. \n\u2022 Th«ng tin. \n\u2022 Liªn l¹c. \n\u2022 Chøc n¨ng. \n\nPhÇn tæ chøc m« t¶ c¸c thµn phÇn qu¶n trÞ m¹ng, bao gåm c¸c thµnh phÇn \nqu¶n lý, c¸c chi nh¸nh vµ mèi quan hÖ gi÷a chóng. ViÖc bè trÝ c¸c thµnh phÇn nµy \nsÏ dÉn ®Õn c¸c lo¹i cÊu tróc mµ chóng ta sÏ bµn ®Õn trong phÇn sau cña ch−¬ng. \n\nPhÇn th«ng tin liªn quan ®Õn cÊu tróc vµ l−u tr÷ th«ng tin qu¶n trÞ m¹ng. Nh÷ng \nth«ng tin nµy ®−îc l−u tr÷ trong mét c¬ së d÷ liÖu gäi lµ MIB (Management \nInformation Base). ISO ®Þnh nghÜa cÊu tróc cña th«ng tin qu¶n trÞ SMI (Structure of \nManagement Information) ®Ó ®Þnh nghÜa có ph¸p vµ th«ng tin qu¶n trÞ l−u trong \nMIB. MIB vµ SIM sÏ ®−îc ®Ò cËp trong phÇn s©u h¬n trong phÇn sau cña ch−¬ng. \n\nPhÇn liªn l¹c liªn quan ®Õn th«ng tin qu¶n trÞ ®−îc liªn l¹c nh− thÕ nµo gi÷a \ntr¹m qu¶n lý vµ c¸c chi nh¸nh. PhÇn nµy liªn quan ®Õn c¸c giao thøc vËn chuyÓn, \ngioa thøc øng dông, yªu cÇu vµ ®¸p øng gi÷a 2 bªn giao dÞch. \n\nPhÇn chøc n¨ng ph©n  chia viÖc qu¶n trÞ m¹ng theo 5 lÜnh vùc chøc n¨ng nh− \nsau: \n\n\u2022 Kh¾c phôc lçi. \n\n\n\n 684\n\n\u2022 CÊu h×nh. \n\u2022 TÝnh to¸n chi phÝ. \n\u2022 HiÖu suÊt ho¹t ®éng. \n\u2022 B¶o mËt. \n\n \n\n \n\n6.2.3. SNMP vµ CMPI: \n\n§Ó viÖc qu¶n trÞ m¹ng cã thÓ thùc hiªn liªn th«ng trªn nhiÒu hÖ thèng m¹ng \nkh¸c nhau, chóng ta cÇn ph¶i cã c¸c chuÈn vÒ qu¶n trÞ m¹ng. Sau ®©y lµ 2 chuÈn \nchÝnh næi bËt: \n\n\u2022 SNMP (Simple Network Management Protocol): chuÈn cña IÌT. \n\u2022 CIMP (Common Management Information Protocol): chuÈn cña \n\nTeltcommunications. \nSNMP lµ tËp hîp c¸c chuÈn vÒ qu¶n trÞ m¹ng, bao gåm giao thøc vµ cÊu tróc \n\nc¬ së d÷ liÖu. SNMP ®−îc c«ng nhËn lµ mét chuÈn cho TCP/IP vµo n¨m 1989 vµ \nsau ®ã trë nªn  rÊt phæ biÕn. Phiªn b¶n n©ng cÊp SNMPv2c ®−îc c«ng bè n¨m \n1993. SNMPv2c tËp chung vµ ph©n phèi viÖc qu¶n trÞ m¹ng, ph¸t triÓn SMI, ho¹t \n®éng giao thøc, cÊu tróc qu¶n lý vµ b¶o mËt. SNMP ®−îc thiÕt kÕ ®Ó ch¹y trong \nm¹ng ãI còng nh− m¹ng TCP/IP. KÓ tõ SNMPv3c, viÖc truy cËp MIB ®−îc b¶o vÖ \nb»ng viÖc x¸c minh vµ m· hãa gãi d÷ liÖu khi truyÒn qua m¹ng. \n\nCMIP lµ mét giao thøc qu¶n trÞ m¹ng OSI, do SIO t¹o ra vµ chuÈn hãa. CMIP \nthùc hiªn theo dâi vµ kiÓm so¸t hÖ thèng m¹ng. \n\n6.2.4. Ho¹t ®éng cña SNMP: \n\n\n\n 685\n\nSNMP lµ mét giao thøc líp øng dông®−îc thiÕt kÕ ®Ó thùc hiÖn c¸c th«ng tin \nqu¶n trÞ m¹ng gi÷a c¸c thiÕt bÞ m¹ng. Víi SNMP chóng ta sÏ cã ®−îc c¸c d÷ liÖu vÒ \nth«ng tin qu¶n trÞ, vÝ dô: sè l−îng gãi ®−îc göi ®i qua cæng trong mçi gi©y, sè \nl−îng kÕt nèi TCP ®ang më, qua ®ã nhµ qu¶n trÞ m¹ng cã thÓ dÔ dµng qu¶n lý ho¹t \n®éng cña hÖ thèng m¹ng,t×m vµ xö lý nã. \n\nHiÖn nay SNMP lµ giao thøc vÒ qu¶n trÞ m¹ng ®−îc sö dông phæ biÕn nhÊt trong \nm¹ng c¸c doanh nghiÖp, tr−êng ®aÞ häc� \n\nSNMP lµ mét giao thøc ®¬n gi¶n nh−ng nã cã kh¶ n¨ng xö lý hiÖu qu¶ nhiÒu \nsù cè khã kh©−n trong nh÷ng hÖ thèng m¹ng phøc t¹p. \n\nM« h×nh tæ chøc cña m¹ng qu¶n lý b»ng SNMP bao gåm 4 thµnh phÇn: \n\n\u2022 Tr¹m qu¶n lý NMS (Network Management Station). \n\u2022 Chi nh¸nh qu¶n lý (Management Agent). \n\u2022 C¬ së d÷ liÖu th«ng tin qu¶n trÞ MIB (Management Information Base). \n\u2022 Giao thøc qu¶n trÞ m¹ng. \n\nNMS th−êng lµ mét m¸y tr¹m ®éc lËp nh−ng nã thùc hiÖn nhiÖm vô cho toµn \nbé hÖ thèng. Trªn ®ã cµi ®Æt mét sè phÇn mÒm qu¶n trÞ m¹ng NMA (Network \nManagement Application). Trªn NMA cã giao diÖn giao tiÕp víi user, cho phÐp \nng−êi qu¶n trÞ cã thÓ th«ng qua ®ã ®Ó qu¶n lý m¹ng. C¸c phÇn mÒm nµy cã thÓ tr¶ \nlêi c¸c yªu cÇu cña user qua m¹ng. Chi nh¸nh qu¶n lý lµ c¸c phÇn mÒm qu¶n trÞ \nm¹ng ®−îc cµi ®Æt trªn c¸c thiÕt bÞ m¹ng then chèt nh− router, bridge, hub, host. \nC¸c phÇn mÒm nµy cung cÊp th«ng tin quan träng cho NMS. TÊt c¶ c¸c th«ng tin \nqu¶n trÞ m¹ng ®−îc l−u tr÷ trong c¬ së d÷ liÖu®Æt tÞa b¶n th©n mçi thiÕt bÞ. Mçi \nthiÕt bÞ chi nh¸nh qu¶n lý l−u c¸c th«ng tin sau: \n\n\u2022 Sè l−îng vµ tr¹ng th¸i c¸c kÕt nèi ¶o cña thiÕt bÞ ®ã. \n\u2022 Sè l−îng c¸c th«ng ®iÖp b¸o lçi mµ thiÕt bÞ ®ã nhËn ®−îc. \n\u2022 Sè l−îng bytevµ gãi d÷ liÖu ®−îc thiÕt bÞ nhËn vµo vµ chuyÓn ra. \n\u2022 ChiÒu dµi tèi ®a cña hµng ®îi chê xuÊt ra. \n\u2022 C¸c th«ng ®iÖp qu¶ng b¸ nhËn ®−îc vµ göi ®i. \n\u2022 Sè lÇn c¸c cæng bÞ t¾t vµ ho¹t ®éng trë l¹i. \n\nNMS thùc hiÖn chøc n¨ng theo dâi b»ng c¸ch nhËn c¸c th«ng tin tõ MIB. \nViÖc th«ng tin liªn l¹c gi÷a tr¹m qu¶n lý c¸c chi nhµnh ®−îc thùc hiÖn bëi giao \nthøc qu¶n trÞ m¹ng líp øng dông. SNMP sö dông UDP vµ post 161, 162. Chóng \ntrao ®æi ba lo¹i th«ng ®iÖp sau: \n\n\n\n 686\n\n\u2022 Get: Tr¹m qu¶n lý lÊy th«ng tin cña MIB trªn chi nh¸nh. \n\u2022 Set: Tr¹m qu¶n lý cµi ®Æt gi¸ trÞ th«ng tin cña MIB trªn chi nh¸nh. \n\u2022 Trap: Chi nh¸nh th«ng b¸o cho tr¹m qu¶n lý khi cã mét sù kiÖn x¶y \n\nra. \n\n \n\nM« h×nh th«ng tin liªn l¹c nh− trªn  ®−îc xem lµ m« h×nh hai tÇng, xem h×nh \n6.2.4.a. Mäi thµnh phÇn trong m¹ng ®Òu ®−îc qu¶n lý bëi SNMP. Trong mét vµi \ntr−êng hîp,","u":"http://202.191.57.85:8000/InternetData/Data/tailieu.vn/docview/tailieu/2015/20150203/anhlacnnt/ccna_giao_trinh_tieng_viet_0958.txt","sentences":[[1,"Lần xuất bản thứ nhất đã được bạn đọc nhiệt tình đón nhận"],[2,"Đây là chương trình học có tính thực tế cao"],[3,"Trong bối cảnh công nghệ phát triển liên tục nên giáo trình cần được cập nhật để bám sát thực tiễn"],[4,"Đó chính là lý do chúng tôi giới thiệuđến bạn cuốn giáo trình mới trong lần xuất bản này"],[5,"Giáo trình này tương ứg với kỳ học thứ hai trong chương trình đào tạo CCNA của Cisco"],[6,"Sách gồm có 11 chương, các chủ đề được trình bày có hệ thống và cô đọng"],[7,"Nội dung chính của tập hai là khảo sát thành phần cấu trúc và hoạt động của router, đồng thời hướng dẫn người đọc cấu hình cơ bản cho router"],[8,"So với phiên bản cũ, phiên bản mới có đề cập thêm hai phần mới là: Giao thức thông điệp điều khiển Internet (ICMP) và danh sách kiểm tra truy nhập (Access Control List)"],[9,"Bên cạnh đó, các phần về cấu trúc router, cấu hình router và xử lý sự cố cho router cũng được bổ sung thêm nhiều chi tiết mới so với phiên bản cũ"],[10,"Cuốn sách không chỉ là một giáo trình hữu ích cho các học viên mạng CCNA mà còn là tài liệu bổ ích cho các bạn đọc muốn trở thành những nhà networking chuyên nghiệp"],[11,"Mặc dù đã cố gắng sửa chữa, bổ sung cho cuốn sách được hoàn thiện hơn song chắc rằng không tránh khởi những thiếu sót, hạn chế"],[12,"Nhóm biên soạn mong nhận được cá ý kiến đóng góp quý báu của bạn đọc"],[13,"MK.PUB Mk.pub@minhkhai.com.vn www.minhkhai.com.vn mailto:Mk.pub@minhkhai.com.vn http://www.minhkhai.com.vn/"],[14,"2 LỜI NGỎ Kính thưa quý bạn đọc gần xa, Ban xuất bản MK.PUB trước hết xin bày tỏ lòng biết ơn và niềm vinh hạnh trước nhiệt tình của đông đảo Bạn đọc đối với tủ sách MK.PUB trong thời gian qua"],[15,"Khẩu hiệu chúng tôi là: * Lao động khoa học nghiêm túc"],[16,"* Chất lượng và ngày càng chất lượng hơn"],[17,"* Tất cả vì Bạn đọc"],[18,"Rất nhiều Bạn đọc đã gửi mail cho chúng tôi đóng góp nhiều ý kiến quý báu cho tủ sách"],[19,"Ban xuất bản MK.PUB xin được kính mời quý Bạn đọc tham gia cùng nâng cao chất lượng tủ sách của chúng ta"],[20,"Trong quá trình đọc, xin các Bạn ghi chú lại các sai sót (dù nhỏ, lớn) của cuốn sách hoặc các nhận xét của riêng Bạn"],[21,"Sau đó xin gửi về địa chỉ: E-mail: mk.book@minhkhai.com.vn \u2013 mk.pub@minhkhai.com.vn Hoặc gửi về: Nhà sách Minh Khai 249 Nguyễn Thị Minh Khai, Q.I, Tp"],[22,"Hồ Chí Minh Nếu Bạn ghi chú trực tiếp lên cuốn sách, rồi gửi cuốn sách đó cho chúng tôi thì chúng tôi sẽ xin hoàn lại cước phí bưu điện và gửi lại cho bạn cuốn sách khác"],[23,"Chúng tôi xin gửi tặng một cuốn sách của ủ sách MK.PUB ty chọn lựa của Bạn theo một danh mục thích hợp sẽ được gửi tới Bạn"],[24,"Với mục đích ngày càng nâng cao chất lượng của tủ sách MK.PUB, chúng tôi rất mong nhận được sự hợp tác của quý Bạn đọc gần xa"],[25,"\u201cMK.PUB và Bạn đọc cùng làm !\u201d mailto:mk.book@minhkhai.com.vn mailto:mk.pub@minhkhai.com.vn"],[26,"3 MK.PUB MỤC LỤC LỜI NÓI ĐẦU ................................................................................................"],[27,"3 MỤC LỤC........................................................................................................"],[28,"3 CHƯƠNG 1: WAN VÀ ROUTER.................................................................."],[29,"5 GIỚI THIỆU .................................................................................................."],[30,"13 1.1"],[31,"WAN..................................................................................................."],[32,"13 1.1.1"],[33,"Giới thiệu về WAN .................................................................."],[34,"13 1.1.2"],[35,"Giới thiệu về router trong mạng WAN ...................................."],[36,"15 1.1.3"],[37,"Router LAN và WAN .............................................................."],[38,"17 1.1.4"],[39,"Vai trò của router trong mạng WAN ........................................"],[40,"19 1.1.5"],[41,"Các bài thực hành mô phỏng ...................................................."],[42,"21 1.2"],[43,"Router ................................................................................................"],[44,"21 1.2.1"],[45,"Các thành phần bên trong router .............................................."],[46,"21 1.2.2"],[47,"Đặc điểm vật lý của router ........................................................"],[48,"24 1.2.3"],[49,"Các loại kết nối bên ngoài của router ......................................."],[50,"25 1.2.4"],[51,"Kết nối vào cổng quản lý trên router ........................................"],[52,"25 1.2.5"],[53,"Thiết lập kết nối vào cổng console ..........................................."],[54,"26 1.2.6"],[55,"Thực hiện kết nối với cổng LAN ............................................."],[56,"28 1.2.7"],[57,"Thực hiện kết nối với cổng WAN ............................................"],[58,"29 TỔNG KẾT ..................................................................................................."],[59,"31"],[60,"4 CHƯƠNG 2: GIỚI THIỆU VỀ ROUTER ..................................................."],[61,"33 GIỚI THIỆU ................................................................................................."],[62,"33 2.1"],[63,"Phần mềm hệ điều hành Cisco IOS ..................................................."],[64,"33 2.1.1"],[65,"Mục đích của phần mềm Cisco IOS.........................................."],[66,"33 2.1.2"],[67,"Giao diện người dùng của router .............................................."],[68,"33 2.1.3"],[69,"Các chế độ cấu hình router ......................................................."],[70,"34 2.1.4"],[71,"Các đặc điểm của phần mềm Cisco IOS .................................."],[72,"35 2.1.5"],[73,"Hoạt động của phần mềm Cisco IOS ......................................."],[74,"38 2.2"],[75,"Bắt đầu với router .............................................................................."],[76,"40 2.2.1"],[77,"Khởi động router ......................................................................"],[78,"40 2.2.2"],[79,"Đèn LED báo hiệu trên router .................................................."],[80,"42 2.2.3"],[81,"Khảo sát quá trình khởi động router ........................................."],[82,"43 2.2.4"],[83,"Thiết lập phiên kết nối bằng HyperTerminal ..........................."],[84,"45 2.2.5"],[85,"Truy cập vào router .................................................................."],[86,"45 2.2.6"],[87,"Phím trợ giúp trong router CLI ................................................"],[88,"46 2.2.7"],[89,"Mở rộng thêm về cách viết câu lệnh ........................................"],[90,"48 2.2.8"],[91,"Gọi lại các lệnh đã sử dụng ......................................................"],[92,"49 2.2.9"],[93,"Xử lý lỗi câu lệnh ......................................................................"],[94,"50 2.2.10"],[95,"Lệnh show version .................................................................."],[96,"51 TỔNG KẾT CHƯƠNG ................................................................................."],[97,"52"],[98,"5 CHƯƠNG 3: CẤU HÌNH ROUTER............................................................"],[99,"53 GIỚI THIỆU ................................................................................................."],[100,"53 3.1"],[101,"Cấu hình router .................................................................................."],[102,"54 3.1.1"],[103,"Chế độ giao tiếp dòng lệnh CLI ..............................................."],[104,"54 3.1.2"],[105,"Đặt tên cho router ....................................................................."],[106,"55 3.1.3"],[107,"Đặt mật mã cho router .............................................................."],[108,"55 3.1.4"],[109,"Kiểm tra bằng các lệnh show ..................................................."],[110,"56 3.1.5"],[111,"Cấu hình cổng serial ................................................................."],[112,"58 3.1.6"],[113,"Thêm bớt, dịch chuyển và thay đổi tập tin cấu hình ................"],[114,"59 3.1.7"],[115,"Cấu hình cổng Ethernet ............................................................"],[116,"60 3.2"],[117,"Hoàn chỉnh cấu hình router ..............................................................."],[118,"61 3.2.1"],[119,"Tầm quan trọng của việc chuẩn hoá tập tin cấu hình ..............."],[120,"61 3.2.2"],[121,"Câu chú thích cho các cổng giao tiếp ......................................."],[122,"61 3.2.3"],[123,"Cấu hình câu chú thích cho cổng giao tiếp .............................."],[124,"62 3.2.4"],[125,"Thông điệp đăng nhập ..............................................................."],[126,"63 3.2.5"],[127,"Cấu hình thông điệp đăng nhập (MOTD) ................................"],[128,"63 3.2.6"],[129,"Phân giải tên máy ....................................................................."],[130,"64 3.2.7"],[131,"Cấu hình bằng host ..................................................................."],[132,"65 3.2.8"],[133,"Lập hồ sơ và lưu dự phòng tập tin cấu hình ............................."],[134,"65 3.2.9"],[135,"Cắt, dán và chỉnh sửa tập tin cấu hình ......................................"],[136,"66"],[137,"6 TỔNG KẾT CHƯƠNG ................................................................................"],[138,"67 CHƯƠNG 4: CẬP NHẬT THÔNG TIN TỪ CÁC THIẾT BỊ KHÁC ........"],[139,"69 GIỞI THIỆU ................................................................................................."],[140,"69 4.1"],[141,"Kết nối và khám phá các thiết bị lân cận ..........................................."],[142,"70 4.1.1"],[143,"Giới thiệu về CDP ...................................................................."],[144,"70 4.1.2"],[145,"Thông tin thu nhân được từ CDP .............................................."],[146,"71 4.1.3"],[147,"Chạy CDP, kiểm tra và ghi nhận các thông tin CDP ..............."],[148,"72 4.1.4"],[149,"Xây dựng bản đồ mạng ............................................................"],[150,"76 4.1.5"],[151,"Tắt CDP ...................................................................................."],[152,"76 4.1.6"],[153,"Xử lý sự cố của CDP ................................................................"],[154,"77 4.2"],[155,"Thu thập thông tin về các thiết bị ở xa .............................................."],[156,"77 4.2.1"],[157,"Telnet ........................................................................................"],[158,"77 4.2.2"],[159,"Thiết lập và kiểm tra quá trình khởi động router ....................."],[160,"78 4.2.3"],[161,"Ngắt, tạm ngưng phiên Telnet .................................................."],[162,"79 4.2.4"],[163,"Mở rộng thêm về hoạt động Telnet .........................................."],[164,"80 4.2.5"],[165,"Các lệnh kiểm tra kết nối khác ................................................."],[166,"81 4.2.6"],[167,"Xử lý sự cố về địa chỉ IP .........................................................."],[168,"84 TỔNG KẾT ..................................................................................................."],[169,"84 CHƯƠNG 5: QUẢN LÝ PHẦN MỀM CISCO IOS ..................................."],[170,"85 GIỚI THIỆU ................................................................................................."],[171,"85 5.1"],[172,"Khảo sát và kiểm tra hoạt động router .............................................."],[173,"86"],[174,"7 5.1.1"],[175,"Các giai đoạn khởi động router khi bắt đầu bật điện ...................."],[176,"86 5.1.2"],[177,"Thiết bị Cisvo tìm và tải IOS như thế nào ...................................."],[178,"86 5.1.3"],[179,"Sử dụng lệnh boot system ............................................................."],[180,"87 5.1.4"],[181,"Thanh ghi cấu hình\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026............"],[182,"88 5.1.5"],[183,"Xử lý sự cố khi khởi động IOS\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ............."],[184,"89 5.2"],[185,"Quản lý tập tin hệ thống Cisco\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ......................"],[186,"91 5.2.1"],[187,"Khái quát về tập tin hệ thốn IOS\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ......................."],[188,"91 5.2.2"],[189,"Quy ước tên IOS\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026........................................"],[190,"94 5.2.3"],[191,"Quản lý tập tin cấu hình bằng TFTP\u2026\u2026\u2026 ................................."],[192,"95 5.2.4"],[193,"Quản lý tập tin cấu hình bằng cách cắt-dán\u2026\u2026\u2026......................."],[194,"99 5.2.5"],[195,"Quản lý Cisco IOS bằng TFTP\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 ................."],[196,"100 5.2.6"],[197,"Quản lý IOS bằng Xmodem\u2026\u2026\u2026\u2026\u2026\u2026 .................................."],[198,"103 5.2.7"],[199,"Biến môi trường\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026............................."],[200,"105 5.2.8"],[201,"Kiểm tra tập tin hệ thống\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026..."],[202,"106 TỔNG KẾT ............................................................................................"],[203,"106 CHƯƠNG 6: ĐỊNH TUYẾN VÀ CÁC GIAO THỨC ĐỊNH TUYẾN ..........."],[204,"107 GIỚI THIỆU \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026................................."],[205,"107 6.1"],[206,"Giới thiệu về định tuyến tĩnh ................................................................"],[207,"108 6.1.1"],[208,"Giới thiệu về định tuyến tĩnh........................................................."],[209,"108 6.1.2"],[210,"Hoạt động của định tuyến tĩnh......................................................."],[211,"108"],[212,"8 6.1.3"],[213,"Cấu hình đường cố định ................................................................"],[214,"110 6.1.4"],[215,"Cấu hình đường mặc định cho router chuyển gói đi ....................."],[216,"112 6.1.5"],[217,"Kiểm tra cấu hình .........................................................................."],[218,"114 6.1.6"],[219,"Xử lý sự cố....................................................................................."],[220,"114 6.2"],[221,"Tổng quát về định tuyến ........................................................................"],[222,"116 6.2.1"],[223,"Giới thiệu về giao thức định tuyến ................................................"],[224,"116 6.2.2"],[225,"Autonomous system (AS) (Hệ thống tự quản) .............................."],[226,"117 6.2.3"],[227,"Mục đích của giao thức định tuyến và hệ thống tự quản .............."],[228,"117 6.2.4"],[229,"Phân loại các giao thức định tuyến................................................"],[230,"118 6.2.5"],[231,"Đặc điểm của giao thức định tuyến theo vector khoảng cách ......"],[232,"118 6.2.6"],[233,"Đặc điểm của giao thức định tuyến theo trạng thái đường liên kết 121 6.3"],[234,"Tổng quát về giao thức định tuyến ........................................................"],[235,"121 6.3.1"],[236,"Quyết định chọn đường đi ............................................................."],[237,"123 6.3.2"],[238,"Cấu hình định tuyến......................................................................."],[239,"123 6.3.3"],[240,"Các giao thức định tuyến ..............................................................."],[241,"126 6.3.4"],[242,"Hệ tự quản, IGP và EGP................................................................"],[243,"128 6.3.5"],[244,"Trạng thái đường liên kết .............................................................."],[245,"130 TỔNG KẾT........................................................................................................"],[246,"132 CHƯƠNG 7: GIAO THỨC ĐỊNH TUYẾN THEO VECTOR KHOẢNG CÁCH ..."],[247,"133 GIỚI THIỆU ......................................................................................................"],[248,"133"],[249,"9 7.1"],[250,"Định tuyến theo vector khoảng cách ....................................................."],[251,"134 7.1.1"],[252,"Cập nhật thông tin định tuyến ......................................................"],[253,"134 7.1.2"],[254,"Lỗi định tuyến lặp.........................................................................."],[255,"135 7.1.3"],[256,"Định nghĩa giá trị tối đa................................................................."],[257,"136 7.1.4"],[258,"Tránh định tuyến lặp vòng bằng split horizon..............................."],[259,"137 7.1.5"],[260,"Router poisoning............................................................................"],[261,"138 7.1.6"],[262,"Tránh định tuyến lặp vòng bằng cơ chế cập nhật tức thời ............"],[263,"140 7.1.7"],[264,"Trành lặp vòng với thời gian holddown ........................................"],[265,"140 7.2"],[266,"RIP ........................................................................................................."],[267,"142 7.2.1"],[268,"Tiến trình của RIP.........................................................................."],[269,"142 7.2.2"],[270,"Cấu hình RIP.................................................................................."],[271,"142 7.2.3"],[272,"Sử dụng lênh ip classless ..............................................................."],[273,"144 7.2.4"],[274,"Những vấn đề thường gặp khi cấu hình RIP ................................."],[275,"146 7.2.5"],[276,"Kiểm tra cấu hình RIP ..................................................................."],[277,"149 7.2.6"],[278,"Xử lý sự cố về hoạt động cập nhật của RIP .................................."],[279,"151 7.2.7"],[280,"Ngăn không cho router gửi thông tin định tuyến ra một cổng giao tiếp ................................................................................................................."],[281,"153 7.2.8"],[282,"Chia tải với RIP ............................................................................."],[283,"154 7.2.9"],[284,"Chia tải cho nhiều đường .............................................................."],[285,"156 7.2.10"],[286,"Tích hợp đường cố định với RIP ................................................."],[287,"158"],[288,"10 7.3"],[289,"IGRP ......................................................................................................"],[290,"160 7.3.1"],[291,"Đặc điểm của IGRP ......................................................................."],[292,"160 7.3.7"],[293,"Kiểm tra cấu hình IGPR ................................................................"],[294,"171 7.3.8"],[295,"Xử lý sự cố của IGPR...................................................................."],[296,"171 TỔNG KẾT ......................................................................................................."],[297,"173 CHƯƠNG 8: THÔNG ĐIỆP ĐIỀU KHIỂN VÀ BÁO LỖI CỦA TCP/IP......."],[298,"175 GIỚI THIỆU ......................................................................................................"],[299,"175 8.1"],[300,"Tổng quát về thông điệp báo lỗi của TCP/IP ....................................."],[301,"176 8.1.1"],[302,"Giao thức Thông Điệp Điều Khiển Internet (IMCP) ..................."],[303,"176 8.1.3"],[304,"Truyền thông điệp IMCP..............................................................."],[305,"177 8.1.4"],[306,"Mạng không đến được ..................................................................."],[307,"177 8.1.5"],[308,"Sử dụng lệnh ping để kiểm tra xem địa chỉ đích có đến được hay không ......................................................................................................."],[309,"178 8.1.6"],[310,"Phát hiện đường dài quá giới hạn .................................................."],[311,"179 8.1.7"],[312,"Thông điệp echo ............................................................................"],[313,"180 8.1.8"],[314,"Thông điệp \u201cDestination Unreachable\u201d........................................."],[315,"181 8.1.9"],[316,"Thông báo các loại lỗi khác..........................................................."],[317,"182 8.2"],[318,"Thông điệp điều khiển của TCP/IP....................................................."],[319,"183 8.2.1"],[320,"Giới thiệu về thông điệp điều khiển .............................................."],[321,"183 8.2.2"],[322,"Thông điệ ICMP redirect/change request......................................"],[323,"184"],[324,"11 8.2.3"],[325,"Đồng bộ đồng hồ và ước tính thời gian truyền dữ liệu ................."],[326,"186 8.2.4"],[327,"Thông điệp Information request và reply ......................................"],[328,"187 8.2.6"],[329,"Thông điệp để tìm router ..............................................................."],[330,"189 8.2.7"],[331,"Thông điệp Router solicitation ......................................................"],[332,"189 8.2.8"],[333,"Thông điệp báo nghẽn và điều khiển luồng dữ liệu ......................"],[334,"190 TỔNG KẾT........................................................................................................"],[335,"191 CHƯƠNG 9: CƠ BẢN VỀ XỬ LÝ SỰ CỐ ROUTER ...................................."],[336,"193 GIỚI THIỆU ......................................................................................................"],[337,"193 9.1"],[338,"Kiểm tra bảng định tuyến ........................................................................."],[339,"194 9.1.1"],[340,"Lệnh show ip route ........................................................................"],[341,"194 9.1.2"],[342,"Xác định gateway .........................................................................."],[343,"196 9.1.3"],[344,"Chọn đường để chuyển gói từ nguồn đến đích.............................."],[345,"197 9.1.4"],[346,"Xác định địa lớp 2 và lớp 3 ..........................................................."],[347,"198 9.1.5"],[348,"Xác định chỉ số tincậy của các con đường ..................................."],[349,"198 9.1.6"],[350,"Xác định thông số định tuyến........................................................"],[351,"199 9.1.7"],[352,"Xác định trạm kế tiếp....................................................................."],[353,"201 9.1.8"],[354,"Kiểm tra thông tin định tuyến được cập nhật mới nhất................."],[355,"202 9.1.9"],[356,"Sử dụng nhiều đường đến cùng một đích......................................"],[357,"203 9.2"],[358,"Kiểm tra kết nối mạng .............................................................................."],[359,"205 9.2.1"],[360,"Giới thiệu về việc kiểm tra kết nối mạng ......................................"],[361,"205"],[362,"12 9.2.2"],[363,"Các bước tiến hành xử lý sự cố ....................................................."],[364,"206 9.2.3"],[365,"Xử lý sự cố theo lớp của mô hình OSI .........................................."],[366,"208 9.2.4"],[367,"Sử dụng các đèn báo hiệu để tìm sự cố của Lớp 1 ........................"],[368,"209 9.2.5"],[369,"Sử dụng lệnh ping để xử lý sự cố ở Lớp 3 ...................................."],[370,"209 9.2.6"],[371,"Sử dụng Telnet để xư lý sự cố ở Lớp 7 ........................................."],[372,"211 9.3"],[373,"Tổng quát về quá trình xử lý một số sự cố của router.............................."],[374,"212 9.3.1"],[375,"Sử dụng lệnh show interfaces để xử lý sự cố Lớp 1 ....................."],[376,"212 9.3.2"],[377,"Sử dụng lênh show interfaces để xử lý sự cố Lớp 2 ...................."],[378,"216 9.3.3"],[379,"Sử dụng lệnh show cdp để xử lý sự cố ........................................."],[380,"217 9.3.4"],[381,"Sử dụng lệnh traceroute để xử lý sự cố ........................................."],[382,"218 9.3.5"],[383,"Xử lý các sự cố về định tuyến ......................................................."],[384,"219 9.3.6"],[385,"Sử dụng lênh show controllers serial để xử lý sự cố ....................."],[386,"222 TỔNG KẾT........................................................................................................"],[387,"225 CHƯƠNG 10: TCP/IP ......................................................................................."],[388,"227 GIỚI THIỆU ......................................................................................................"],[389,"227 10.1"],[390,"Hoạt động của TCP.............................................................................."],[391,"228 10.1.1 Hoạt động của TCP......................................................................."],[392,"228 10.1.2 Quá trình động bộ hay quá trình bắt tay 3 bước..........................."],[393,"228 10.1.3 Kiểu tấn công từ chối dịch vụ DoS (Denial of Service)..............."],[394,"230 10.1.4 Cửa sổ và kích thước cửa sổ ........................................................."],[395,"231"],[396,"13 10.1.6 ACK xác nhận .............................................................................."],[397,"234 10.2"],[398,"Tổng quan về port ở lớp vận chuyển"],[399,"................................................."],[400,"236 10.2.1"],[401,"Nhiều cuộc kết nối giữa 2 host"],[402,"..................................................."],[403,"236 10.2.2"],[404,"Port dành cho các dịch vụ............................................................"],[405,"238 10.2.3"],[406,"Port dành cho client ....................................................................."],[407,"240 10.2.4"],[408,"Chỉ port và các chỉ số port nổi tiếng............................................"],[409,"240 10.2.5"],[410,"Ví dụ về trường hợp mở nhiều phiên kết nối giữa 2 host............"],[411,"240 10.2.6"],[412,"So sánh giữa địa chỉ IP, địa chỉ MAC và số port ........................"],[413,"241 TỔNG KẾT........................................................................................................"],[414,"241 CHƯƠNG 11: DANH SÁCH KIỂM TRA TRUY CẬP ACLs ........................"],[415,"243 GIỚI THIỆU ......................................................................................................"],[416,"243 11.1 Cơ bản về danh sách kiểm tra truy cập................................................."],[417,"244 11.1.1 ACLs làm việc như thế nào"],[418,"........................................................"],[419,"246 11.1.2 Kiểm tra ACLs.............................................................................."],[420,"254 11.2.1 Danh sách kiểm tra truy cập ACLs...................................................."],[421,"256 11.2.1 ACLs cơ bản ................................................................................"],[422,"256 11.2.2 ACLs mở rộng .............................................................................."],[423,"258 11.2.3 ACLs đặt tên ................................................................................."],[424,"259 11.2.4 Vị trí đặt ACLs ............................................................................."],[425,"261 11.2.5 Bức tường lửa ..............................................................................."],[426,"262"],[427,"14 11.2.6 Giới hạn truy cập vào đường vty trên router ................................"],[428,"263 TỔNG KẾT........................................................................................................"],[429,"265"],[430,"15 CHƯƠNG 1 WAN VÀ ROUTER GIỚI THIỆU Mạng diện rộng (WAN) là màng truyền dữ liệu qua những vùng địa lý rất lớn"],[431,"WAN có nhiều đặc điểm quan trọng khác với LAN"],[432,"Trong chương này, trước tiên các bạn sẽ có một cái nhìn tổng thể về các kỹ thuật và các giao thức của mạng WAN"],[433,"Đồng thời trong chương này cũng sẽ giải thích những đặc điểm giống nhau và khác nhau giữa LAN và WAN"],[434,"Bên cạnh đó, kiến thức về các thành phần vật lý của router cũng rất quan trọng"],[435,"Kiến thức này sẽ là nền tảng cho các kỹ năng và kiến thức khác khi bạn cấu hình router và quản trị mạng định tuyến"],[436,"Trong chương này, các bạn sẽ được khảo sát thành phần vật lý bên trong và bên ngoài của router và các kỹ thiật kết nối với nhiều cổng khác nhau trên router"],[437,"Sau khi hoàn tất chương này, các bạn có thể thực hiện các việc sau: \u2022 Xác định tổ chức quốc tế chịu trách nhiệm về các chuẩn của WAN"],[438,"\u2022 Giải thích sự khác nhau giữa LAN và WAN, giữa các loại địa chỉ mà mỗi mạng sử dụng"],[439,"\u2022 Mô tả vai trò của router trong WAN"],[440,"\u2022 Xác định các thành phần vật lý bên trong của router và các chức năng tương ứng"],[441,"\u2022 Mô tả các đặc điểm vật lý của router"],[442,"\u2022 Xác định các loại cổng trên router"],[443,"\u2022 Thực hiện các kết nối đến cổng Ethernet, cổng nối tiếp WAN và cổng console trên router"],[444,"1.1"],[445,"WAN 1.1.1 Giới thiệu về WAN"],[446,"16 WAN là mạngtruyền dữ liệu qua những vùng địa lý rất rộng lớn như các bang, tỉnh, quốc gia\u2026 Các phương tiện truyền dữ liệu trên WAN được cung cấp bởi các nhà cung cấp dịch vụ, ví dụ như các công ty điện thoại"],[447,"Mạng WAN có một số đặc điểm sau: WAN dùng để kết nối các thiệt bị ở cách xa nhau bởi những địa lý lớn"],[448,"WAN sử dụng dịch vụ của các công ty cung cấp dịch vụ, ví dụ như: Regional Bell Operating Conpanies (RBOCs), Sprint, MCI, VPM internet servies, Inc., Altantes.net\u2026 WAN sử dụng nhiều loại liên kết nối tiếp khác nhau"],[449,"WAN có một số điểm khác với LAN"],[450,"Ví dụ như: LAN được sử dụng để kết nối các máy tính đơn lẻ, các thiết bị ngoại vi, các thiết bị đầu cuối và nhiều loại thiết bị khác trong cung một toà nhà hay một phạm vi địa lý nhỏ"],[451,"Trong khi đó WAN được sử dụng để kết nối các chi nhánh của mình, nhờ đó mà thông tin được trao đổi dễ dàng giữa các trung tâm"],[452,"Mạng WAN hoạt động chủ yếu ở lớp Vật lý và lớp Liên kết dữ liệu mô hình OSI"],[453,"WAN kết nối các mạng LAN lại với nhau"],[454,"Do đó, WAN thực hiện chuyển đổi các gói dữ liệu giữa các router, switch và các mạng LAN mà nó kết nối"],[455,"Sau đây là các thiết bị được sử dụng trong WAN: \u2022 Router: cung cấp nhiều dịch vụ khác nhau, bao gồm Internet và các giao tiếp WAN"],[456,"\u2022 Loại switch được sử dụng trong WAN cung cấp kết nối cho hoạt động thông tin liên lạc băng thoại video và dữ liệu"],[457,"\u2022 Modem: bao gồm: giao tiếp với dịch vụ truyền thoại; CSU/DSU (Chanel service units/ Digital service units) để giao tiếp với dịch vụ T1/E1; TA/NT1 (Terminal Adapters /Network Terminal 1) để giao tiếp với dịch vụ ISDN (Integrate Services Digital Network)"],[458,"\u2022 Server thông tin liên lạc: tập trung xử lý cuộc gọi của người dùng"],[459,""],[460,"17 Hình 1.1.1: Các thiết bị WAN c vận chuyển giữa các hệ thống trên một đường truyền dữ liệu"],[461,"các giao thứ truy Các ti sau: \u2022 Liên hiệp viễn thông quốc tế - lĩnh vực tiêu chuẩn viễn thông \u2013 ITUT ctor), trước đây là Uỷ ban cố điện thoại và điện tín quốc \u2022 Tổ chứ net Engineering Task Force)"],[462,"\u2022 Liên hiệp công nghiệp điện tử - EIA (Eletronic Industries Association)"],[463,"1.1.2 Giới thiệu về router trong mạng WAN Các giao thức ở lớp Liên kết dữ liệu của mạng WAN mô tả về cách thức mà gói dữ liệu đượ c này đươc thiết kế cho các dịch vụ chuyển mạch điểm-đến-điểm, đa điểm, đa nhập, ví dụ như: FrameRelay"],[464,"êu chuẩn của mạng WAN được định nghĩa và quản lý bởi các tổ chức quốc tế (International Telecommunication Union-Telecommunication Standardization Se tế - CCITT (Consultative Committee for International Telegraph and Telephone)"],[465,"\u2022 Tổ chức quốc tế về tiêu chuẩn \u2013 ISO (International Organization for Standardization)"],[466,"c đặc trách về kỹ thuật Internet \u2013 IETF (Inter"],[467,"18 Hình 1.1.2 Router là một loại máy tính đặc biệt"],[468,"Nó cũng có các thành phần cơ bản giống như máy tính: CPU, bộ nhớ, system bus và các cổng giao tiếp"],[469,"Tuy nhiên router được a đường đi tốt nhất cho dữ liệu"],[470,"h để chạy các tập tin cấu hình"],[471,"Tập tin cấu hình o các gói dữ liệu"],[472,"Do đó, tập tin cấu hình cũng chứa các thông tin o thức định tuyến trên router"],[473,"Giá t hích rõ cách xây dựng tập tin cấu hình từ các câu lệnh IOS để router có thể thực hiện được các chức năng cơ bản"],[474,"Lúc ban đầu có thể bạn thấy tập ạn sẽ thấy nó dễ hiểu hơn h Cá h gồm: bộ nhớ RAM, NVRAM, bộ nhớ flash, ROM và các c RA , chức n kết là để thực hiện một số chức năng đặc biệt"],[475,"Ví dụ: router được thiết kế là để thực hiện một số chức năng đặc biệt"],[476,"Ví dụ: router kết nối hai hệ thống mạng với nhau và cho phép hai hệ thống này có thể liên lạc với nhau, ngoài ra router còn thực hiện việc chọn lự Cũng giống như máy tính cần phải có hệ điều hành để chạy các trình ứng dụng thì router cũng cần phải có hệ điều hàn chứa các câu lệnh và các thông số để điều khiển luồng dữ liệu ra vào trên router"],[477,"Đặc biệt là router còn sử dụng giao thức định tuyến để truyền để quyết định chọn đường đi tốt nhất ch để cài đặt và chạy các gia o rình này sẽ giải t tin cấu hình rất phức tạp nhưng đến cuối giáo trình này b n iều"],[478,"c t ành phần chính bên trong router bao ổng giao tiếp"],[479,"M hay còn gọi là RAM động (DRAM- Dynamic RAM) có các đặc điểm và ăng như sau \u2022 Lưu bảng định tuyến"],[480,""],[481,"19 \u2022 Lưu bảng ARP"],[482,"\u2022 Có vùng bộ nhớ chuyển mạch nhanh"],[483,"\u2022 Cung cấp vùng nhớ đệm cho các gói dữ liệu \u2022 Duy trì hàng đợi cho các gói dữ liệu"],[484,"\u2022 Cung cấp bộ nhớ tạm thời cho tập tin cấu hình của router khi router đang Đặc điểm và chức năng của NVRAM: \u2022 iữ tập tin cấu hình khởi động của router"],[485,"tắt điện"],[486,"Đặc i Lưu hệ điều hành IOS"],[487,"\u2022 Có thể cập nhật phần mềm lưu trong Flash mà không cần thay đổi chip trên \u2022 Nội du iữ khi router khởi động lại hoặc bị tắt điện"],[488,"\u2022 Ta có thể lư trong Flash"],[489,"hoạt động"],[490,"\u2022 Thông tin trên RAM sẽ bị xoá mất khi router khởi động lại hoặc bị tắt điện"],[491,"Lưu g \u2022 Nội dung của NVRAM vẫn được lưu giữ khi router khởi động lại hoặc bị đ ểm và chức năng của bộ nhớ flash: \u2022 bộ xử lý"],[492,"ng của Flash vẫn được lưu g u nhiều phiên bản khác nhau của phần mềm IOS \u2022 Flash là loại ROM xoá và lập trình được (EPROM)"],[493,"Đặc điểm và chức năng của các cổng giao tiếp: \u2022 Kết nối router vào hệ thống mạng để nhận và chuyển gói dữ liệu"],[494,"\u2022 Các cổng có thể gắn trực tiếp trên mainboard hoặc là dưới dạng card rời"],[495,"1.1.3 Router LAN và WAN"],[496,"20 Hình 1.1.3a: Phân đoạn mạng LAN với router Router vừa được sử dụng để phân đoạn mạng LAN vừa là thiết bị chính trong mạng WAN"],[497,"Thực chất là là: chọn đường đi tốt nhất và chuyển mạch gói dữ liệu"],[498,"Để thực hiện chức năng này, mỗi router phải xây dựng một bảng định tuyến và thực hi định tuyến với nhau"],[499,"Do đó, tên router có cả cổng giao tiếp LAN và WAN"],[500,"các kỹ thuật WAN được sử dụng để kết nối các router, router này giao tiếp với router khác qua đường liên kết WAN"],[501,"Router là thiết bị xương sống của mạng Intranet lớn và mạng Internet"],[502,"Router hoạt động ở Lớp 3 và thực hiện chuyển gói dữ liệu dựa trên địa chỉ mạng"],[503,"Router có hai chức năng chính ện trao đổi thông tin Hình 1.1.3b: Kết nối router bằng các công nghệ WAN"],[504,"21 Ng trì bảng định tuyến bằng cách cấu hình định tuyến tĩnh, nhưng thông th động nhờ các giao thức định tuyến thự r"],[505,"ười quản trị mạng có thể duy ường thi bảng định tuyến được lưu giữ c hiện trao đổi thông tin mạng giữa các route Hình 1.1.3c Ví dụ: nếu máy tính X muốn thông tin liên lạc với máy tính Y ở một châu lục khác và với máy tính Z ở một vị trí khác nữa trên thế giới, khi đó cần phải có định tuyến Mạng WAN hoạt động chủ yếu ở lớp vật lý và lớp liên kết dữ liệu"],[506,"Điều này không có nghĩa là năm lớp còn lại của mô hình OSI không có trong mạng WAN"],[507,"Điều để có thể truyền dữ liệu và đồng thời cũng cần phải có các đường dự phòng, thay thế để đảm bảo độ tin cậy"],[508,"Rất nhiều thiết kế mạng và công nghệ được đưa ra để cho các máy tính như X Y, Z có thể liên lạc với nhau"],[509,"Một hệ thống mạng được cấu hình đúng phải có đầy đủ các đặc điểm sau: \u2022 Có hệ thống địa chỉ nhất quán từ đầu cuối đến đầu cuối \u2022 Cấu trúc địa chỉ phải thể hiện được cấu trúc mạng"],[510,"\u2022 Chọn được đường đi tốt nhất"],[511,"\u2022 Định tuyến động và tĩnh"],[512,"\u2022 Thực hiện chuyển mạch"],[513,"1.1.4 Vai trò của router trong mạng WAN"],[514,"22 này đơn giản có nghĩa là mang WAN chỉ khác với mạng LAN ở lớp Vật lý và lớp Liên kết dữ liệu"],[515,"Hay nói cách khác là các tiêu chuẩn và giao thức sử dụng trong mạng WAN ở lớp 1 và lớp 2 là khác với mạng LAN"],[516,"Lớp Vật lý trong mạng WAN mô tả các giao tiếp thiết bị dữ liệu đầu cuối DTE (Data Terminal Equipment) và thiết bị đầu cuối mạch dữ liệu DCE (Data Circuit- terminal Equipment)"],[517,"Thông thường, DCE là thiết bị ở phía nhà cung cấp dịch vụ và DTE là thiết bị kết nối vào DCE"],[518,"Theo mô hình này thì DCE có thể là modem hoặc CSU/DSU"],[519,"Chức năng chủ yếu của router là định tuyến"],[520,"Hoạt động định tuyến diễn ra ở lớp 3 - lớp Mạng trong khi WAN hoạt động ở lớp 1 và 2"],[521,"Vậy router là thiết bị LAN hay WAN"],[522,"Câu trả lời là cả hai"],[523,"Router có thể là thiết bị LAN, hoặc WAN, hoặc thiết bị trung gian giữa LAN và WAN hoặc có thể là LAN và WAN cùng mộ Một trong những nhiệm vụ của router trong mạng WAN là định tuyến gói dữ liệu ở lớp 3, đây cúng là nhiệm vụ của router trong mạng LAN"],[524,"Tuy nhiên, định tuyến không phải là nhiệm vụ ch uter sử dụng các chuẩn và giao thức của lớp Vật lý và lớp Liên kết dữ liệu để kết nối các mạng WAN thì lúc này nhiệm vụ chín mạng WAN không ột giao tiếp SDN sang T1, đồng thời chuyển kiểu đóng gói eRelay"],[525,"t lúc"],[526,"ính yếu của router trong mạng WAN"],[527,"Khi ro h yêú của router trong phải là định tuyến nữa mà là cung cấp kết nối giữa các mạng WAN với các chuẩn vật lý và liên kết dữ liệu khác nhau"],[528,"Ví dụ: một router có thể có m ISDN sử dụng kiểu đóng gói PPP và một giao tiếp nối tiếp T1 sử dụng kiểu đóng gói FrameRelay"],[529,"Router phải có khả năng chuyển đổi luồng bit từ loại dịch vụ này sang dịch vụ khác"],[530,"Ví dụ: chuyển đổi từ dịch vụ I lớp Liên kết dữ liệu từ PPP sang Fram Chi tiết về các giao thức lớp 1 và 2 trong mạng WAN sẽ được đề cập ở tập sau của giáo trình này"],[531,"Sau đây chỉ liệt kê một số chuẩn và giao thức WAN chủ yếu để các bạn tham khảo:"],[532,"23 Hình 1.1.4a: Các chuẩn WAN ở lớp Vật lý Hình 1.1.4b: Các kiểu đóng gói dữ liệu WAN ở Lớp liên kết dữ liệu Các chuẩn và giao thức WAN lớp vật lý: EIA/TIA-232,449, V24, V35, X21, EIA- 530, ISDN, T1, T3, E1, E3, Xdsl, sonet (oc-3, oc-12, oc-48, oc-192)"],[533,"Các chuẩn và giao thức WAN lớp liên kết dữ liệu: HDLC, FrameRelay, PPP, SDLC, SLIP, X25, ATM, LAMB, LAPD, LAPF"],[534,""],[535,"24 1.1.5 Các bài thực hành mô phỏng Trong các bài thực hành mô phỏng trong phòng lab, các mạng được kết nối bằng c thành phần cơ bản của router"],[536,"RAM"],[537,"RAM thường được chia thành hai phần: phần bộ nhớ xử lý chính và phần bộ nhớ chia sẻ xuất/nhập"],[538,"Phần bộ nhớ chia sẻ xuất/nhập được chia cho các cổng giao tiếp làm nơi lưu trữ tạm các gói dữ liệu.Toàn bộ nội dung trên RAM sẽ bị xoá khi tắt điện"],[539,"Thông thường, RAM trên router là loại RAM động (DRAM \u2013 Dynamic RAM) và có thể nâng thêm RAM bằng cách gắn thêm DIMM (Dual In-Line Memory Module)"],[540,"Flash: Bộ nhớ Flash được sử dụng để lưu toàn bộ phần mềm hệ điều hành Cisco IOS"],[541,"Mặc định là router tìm IOS của nó trong flash"],[542,"Bạn có thể nâng cấp hệ điều hành bằng cách chép phiên bản mới hơn vào flash"],[543,"Phần mềm IOS có thể ở dưới dạng nén hoặc không nén"],[544,"Đối với hầu hết các router, IOS được chép lên RAM trong quá trình khởi động router"],[545,"Còn có một số router thì IOS có thể chạy trực tiếp cáp serial trong thực tế không kết nối trực tiếp như vậy được"],[546,"Ví dụ: trên thực tế, một router ở New York và một router ở Sydney, Australia"],[547,"Người quản trị mạng ở Australia phải kết nối vào router ở New York thông qua đám mây WAN để xử lý sự cố trên router ở New York"],[548,"Trong các bài thực hành mô phỏng, các thiết bị trong dám mây WAN được giả lập bằng cáp DTE-DCE kết nối trực tiếp từ cổng S0/0 của router này đến cổng S0/1 của router kia (nối back-to-back)"],[549,"1.2 Router 1.2.1 Các thành phần bên trong router Cấu trúc chính xác của router rất khác nhau tuỳ theo từng phiên bản router"],[550,"Trong phần này chỉ giới thiệu về cá CPU \u2013 Đơn vị xử lý trung tâm: thực thi các câu lệnh của hệ điều hành để thực hiện các nhiệm vụ sau: khởi động hệ thống, định tuyến, điều khiển các cổng giao tiếp mạng"],[551,"CPU là một bộ giao tiếp mạng"],[552,"CPU là một bộ vi xử lý"],[553,"Trong các router lớn có thể có nhiều CPU"],[554,"RAM: Được sử dụng để lưu bảng định tuyến, cung cấp bộ nhớ cho chuyển mạch nhanh, chạy tập tin cấu hình và cung cấp hàng đợi cho các gói dữ liệu"],[555,"Trong đa số router, hệ điều hành Cisco IOS chạy trên"],[556,"25 trên flash mà không cần chép lên RAM"],[557,"ạn có thể gắn thêm hoặc thay thế các thanh SIMM hay card PCMCIA để ợng flash"],[558,"VRAM (Non-volative Random-access Memory): Là bộ nhớ RAM không bị mất ông tin, được sử dụng để lưu tập tin cấu hình"],[559,"Trong một số thiết bị có NVRAM và flash"],[560,"Trong một số thiết bị, flash và us hệ thống được sử ROM (Read Only Memory): Là nơi lưu đoạn mã của chương trình kiểm tra khi khởi động"],[561,"Nhiệm vụ chính của ROM là kiểm tra phần cứng của router khi khởi động, sau đó chép phần mềm Cisco IOS từ flash vào RAM"],[562,"Một số router có thể có phiên bản IOS cũ dùng làm nguồn khởi động dự phòng"],[563,"Nội dung trong ROM không thể xoá được"],[564,"Ta chỉ có thể nâng cấp ROM bằng cách thay chip ROM mới"],[565,"Các cổng giao tiếp: Là nơi router kết nối với bên ngoài"],[566,"Router có 3 loại cổng: LAN, WAN và console/AUX"],[567,"Cổng giao tiếp LAN có thể gắn cố định trên router hoặc dưới dạng card rời"],[568,"Cổng giao tiếp WAN có thể là cổng Serial, ISDN, cổng tích hợp đơn vị dịch vụ kênh CSU (Chanel Service Unit)"],[569,"Tương tự như cổng giao tiếp LAN, các cổng giao tiếp WAN cũng có chip điều khiển đặc biệt"],[570,"Cổng giao tiếp WAN có thể định trên router hoặc ở dạ Cổng console/AUX là cổng nối tiếp, chủ yếu được dử dụng để cấu hình router"],[571,"Hai cổng này không phải là loại cổng để kết nối mạng mà là để kết nối vào máy tính thông qua mod ính thực hiện cấu uter B nâng dung lư N th riêng, NVRAM được thực thi nhờ flash NVRAM là cùng một bộ nhớ"],[572,"Trong cả hai trường hợp, nội dung của NVRAM vẫn được lưu giữ khi tắt điện"],[573,"Bus: Phần lớn các router đều có bus hệ thống và CPU bus"],[574,"B dụng để thông tin liên lạc giữa CPU với các cổng giao tiếp và các khe mở rộng"],[575,"Loại bus này vận chuyển dữ liệu và các câu lệnh đi và đến các địa chỉ của ô nhớ tương ứng"],[576,"ng card rời"],[577,"em hoặc thông qua cổng COM trên máy tính để từ máy t hình ro"],[578,"Nguồn điện: Cung cấp điện cho các thành phần của router, một số router lớn có thể sử dụng nhiều bộ nguồn hoặc nhiều card nguồn"],[579,"Còn ở một số router nhỏ, nguồn điện có thể là bộ phận nằm ngoài router"],[580,""],[581,"26 Hình 1.2.1a Hình 1.2.1b ị trí của chúng trong router rất khác nhau tuỳ theo từng loại phiên bản thiết bị"],[582,"1.2.2 Đặc điểm vật lý của router Không nhất thiết là bạn phải biết vị trí của các thành phần vật lý trong router mới có thể sử dụng được router"],[583,"Tuy nhiên trong một số trường hợp, ví dụ như nâng cấp bộ nhớ chẳng hạn, những kiến thức này lại rất hữu dụng"],[584,"Các loại thành phần và v"],[585,"27 Hình 1.2.2a: Cấu trúc bên trong của router 2600 Hình 1.2.2b: Các loại kết nối bên ngoài của router 2600 1.2.3 Các loại kết nối ngoài của router Router có ba loại kết nối cơ bản là: cổng LAN, WAN và cổng quản lý router"],[586,"Cổng giao tiếp LAN cho phép router kết nối vào môi trường mạng cục bộ LAN"],[587,"Thông g có cổng Token Ring và ATM (Asynchronous Tranfer Mode)"],[588,"Kết nối mạng WAN cung cấp kết nối thông qua các nhà cung cấp dịch vụ đến các chi nhánh xa hoặc i kết nối này có thể là nối tiếp hay bất kỳ loại gi tiếp WA êm một thiết bị ngoại vi như CSU chẳng thường, cổng giao tiếp LAN là cổng Ethernet"],[589,"Ngoài ra cũn ở kết nối vào Internet"],[590,"Loạ ao N, bạn cần phải có th"],[591,"28 hạn để nố outer đế câp dịch vụ"],[592,"Đối với một số loại giao tiếp WAN khác thì bạn có thể kết nối trực tiếp router của mình đến nhà cung cấp dịch vụ"],[593,"Chức năng của port quản lý hoàn toàn khác với ai loại trên"],[594,"kết nối LAN, WAN để kết nối router và mạ nhận và phát các gói dữ liệu"],[595,"Trong khi đó, port quản lý cung cấp ch ăn bản để bạn có thể cấu hình hoặc xử lý trên router"],[596,"Cổng quản lý thường là cổng console hoặc cổng AUX (Auxilliary)"],[597,"Đây là loại cổng nối tiếp bất đồng bộ EIA-232"],[598,"Các cổng này kết nối vào cổng COM trên máy tính"],[599,"Trên máy tính, chúng ta sử dụng chương trình mô phỏng thiết bị đầu cuối để thiết lập phiên kết nối dạng văn bản vào router"],[600,"Thông qua kiểu kết nối này, người quản trị mạng có thể quản lý thiết bị của mình"],[601,"i r n nhà cung ng để router o bạn một kết nối dạng v Hình 1.2.3 1.2.4 Kết nối vào cổng quản lý trên router Cổng console và cổng AUX là cổng quản lý trên router"],[602,"Loại cổng nối tiếp bất đồ ộ này được th"],[603,"Ta thường sử dụng cổng console để thiết lập cấu hình cho router vì không phải router nào cũng có cổng AUX"],[604,"Khi router hoạt động lần đầu tiên thì chưa có thông số mạng nào được cấu hình cả"],[605,"Do đó router ch a thể giao tiếp với bất kỳ mạng nào"],[606,"Để chuẩn bị khởi động và cấu hình router, ta dùng thiết bị đầu cuối ASCII kết nối vào cổng console trên router"],[607,"Sau đó ta có thể ệnh để cấu hình, cài đặt cho router"],[608,"Khi bạn nhập cấu hình cho router thông qua cổng console hay cổng AUX, router có thể kết nối m ng b iết kế không phải để kết nối mạng mà là để cấu hình router ư dùng l ạng để xử lý sự cố hoặc theo dõi hoạt động mạng"],[609,""],[610,"29 bạn có th a modem kết nối vào cổng ể cấu hình router từ xa bằng cách quay số qu console hay cổng AUX trên router"],[611,"Hình 1.2.4: Kết nối modem vào cổng console hay cổng AUX trọng"],[612,"1.2.5 Thiết lập kết nối và cổng console Cổng console là loại cổng quản lý, cung cấp đường kết nối riêng vào router"],[613,"Cổng này được sử dụng để thiết lập cấu hình cho router, theo dõi hoạt động mạng và khôi phục router khi gặp sự cố nghiêm trọng"],[614,"Để kết nối PC vào cổng console bạn cần có cáp rollover và bộ chuyển đổi RJ45- DB9"],[615,"Cisco có cung cấp bộ chuyển đổi này để nối PC vào cổng console"],[616,"PC hay thiết bị đầu cuối phải có chương trình mô phỏng thiết bị đầu cuối VT100"],[617,"Thông thường phần mềm này là HyperTerminal"],[618,"Sau đây là các bước thực hiện kết nối PC vào cổng console: 1"],[619,"Cấu hình phần mềm giả lập thiết bị đầu cuối như sau: Khi xử lý sự cố, bạn nên sử dụng cổng console thay vì cổng AUX"],[620,"Vì mặc định là cổng console có thể hiển thị quá trình khởi động router, thông tinhoạt động và các thông điệp báo lỗi của router"],[621,"Cổng console được sử dụng khi có một dịch vụ mạng không khởi động được hoặc bị lỗi, khi khôi phục lại mật mã hoặc khi router bị sự cố nghiêm"],[622,"30 \u2022 Chọn đúng cổn w control: None g COM"],[623,"\u2022 Tốc độ band là 9600"],[624,"\u2022 Data bits: 8 \u2022 Parity: None \u2022 Stop bits: 1 \u2022 Flo Hình1.2.5a: Kết nối PC vào cổng console trên router Cắm một đầu RJ45 của cáp rollover vào cổng console trên router"],[625,"2"],[626,"4"],[627,"3"],[628,"Cắm đầu cáp còn lại vào bộ chuyển đổi RJ45-DB9"],[629,"Gắn đầu DB9 của bộ chuyển đổi vào cổng COM trên PC"],[630,""],[631,"31 HÌnh 1.2.5b: Cấu hình hyper terminal để kết nối vào console 1.2.6 Thực hiện kết nối với cổng LAN t các môi trường mạng LAN hiện nay, router được kết nối vào LAN bằng cổng Ethernet hoặc Fast Ethernet"],[632,"Router giao tiếp với mạng LAN thông qua h"],[633,"Chúng ta sử dụng cáp thẳng để nổi router và hub/switch"],[634,"Đối với ng cáp UTP CAT5 hoặc cao hơn"],[635,"Trong một số trường hợp ta có thể kết nối trực tiếp cổng Ethernet trên router vào máy tính hoặc vào r Khi thực hiện kết nố cắp đúng cổng vì nếu cắm sai có thể gây hư h ng cho router và thi ại cổng khác nhau nh hình dạng c ernet, ISDN BRI, console, AUX, cổn ng cổng 8 chân là RJ45, RJ48 hoặc RJ49"],[636,"1.2.7 Thực hiện kết nối với cổng WAN Trong hầu hế hub hoặc switc tất cả các loại router có cổng 10/100BaseTx chúng ta đều phải sử dụ outer khác bằng cáp chéo"],[637,"i, chúng ta phải lưu ý ỏ ết bị khác"],[638,"Trên router có rất nhiều lo ưng ổng lai giống nhau"],[639,"Ví dụ như: cổng Eth g tích hợp CSU/DSU, cổng Token Ring đều sử dụ"],[640,"32 Kế ối WAN có nh ký thuật để thực hiện truyền dữ liệu qua một vùng địa lý rộng lớn"],[641,"Các dịch vụ AN thường được thuê từ nhà cung cấp dịch vụ"],[642,"Chúng ta có 3 loại kết nối WAN như sau: kết nối thuê kênh riêng, kết nối chuyển mạch - mạch, kết nối chuyển mạch gói"],[643,"t n iều dạng khác nhau"],[644,"Một kết nối WAN sử dụng nhiều khác nhau W Hình 1.2.7a Đối với từng loại dịch vụ WAN, thiết bị thuộc sở hữu của khách hàng (CPE \u2013 Customer Premises Equipment), thông thường là router, được gọi là thiết bị dữ liệu đầu cuối DTE (Data Terminal Equipment)"],[645,"Thiết bị DTE này được kết nối vào nhà cung cấp dịch vụ thông qua thiết bị kết cuối mạch dữ liệu DCE (Data Circuit- terminating Equipment), thông thường là modem hay CSU/DSU"],[646,"Thiết bị DCE này được sử dụng để chuyển đổi dữ liệu từ DTE sang dạng phù hợp với dịch vụ của nhà cung cấp dịch vụ"],[647,"Hầu hết các cổng WAN trên router đều là cổng Serial"],[648,"Công việc chọn lựa cho đúng loại cáp sẽ rất dễ dàng khi bạn trả lời được 4 câu hỏi sau: \u2022 Loại kết nối trên thiết bị Cisco là loại nào"],[649,"Cisco router sử dụng nhiều loài đầu nối khác nhau cho cổng Serial"],[650,"Như trong hình 1.2.7b, cổng bên trái là cổng Smart Serial, cổng bên phải là cổng DB-60"],[651,"Lựa chon"],[652,"33 cáp Serial để kết nối hệ thố ột phần then chốt trong qua trình ng mạng là m thiết lập WAN"],[653,"Hình 1.2.7b \u2022 Hệ thống mạng được kết nối và thiết bị DTE hay DCE"],[654,"DTE ác nhau"],[655,"Điểm khác nhau quan trọng giữa ệu xung đồng hồ cho quá trình thông khảo tài liệu của thiết bị để xác định DTE nào"],[656,"mỗi loại thiết bị khác nhau sẽ sử dụng loại chuẩn Serial khác nhau"],[657,"Mỗi chuẩn sẽ quy ước tín hiệu ên tham khảo tài liệu của uẩn tín hiệu của thiết bị"],[658,"và DCE là hai loại cổng serial kh hai loại này là: thiết bị DCE cấp tín hi tin liên lạc trên bus"],[659,"Bạn nên tham và DCE"],[660,"\u2022 Thiết bị đòi hỏi chuẩn tín hiệu truyền trên cáp và loại đầu nối ở 2 đầu cáp"],[661,"Bạn n thiết bị để xác định ch"],[662,"34 Hình 1.2.7c \u2022 Cáp có loại đầu nối đực hay cái"],[663,"Nếu đầu nối có chân cắm ra ngoài thì đó là đầu đực"],[664,"Nếu đầu nối chỉ có lỗ cắm cho các chân thì đó là đầu cái Hình 1.2.7d TỔNG KẾT"],[665,"35 Sau â \u2022 \u2022 trong WANs và LANs"],[666,"\u2022 \u2022 \u2022 \u2022 \u2022 ách kết nối vào cổng console, cổng LAN và WAN"],[667,"đ y là các điểm quan trọng bạn cần nắm được trong chương này: Khái niệm về WAN và LAN"],[668,"Vai trò của router \u2022 Các giao thức WAN"],[669,"Cấu hình kiểu đóng gói cho cổng giao tiếp"],[670,"Xác định và mô tả các thành phần bên trong router"],[671,"Đặc điểm vật lý của router"],[672,"Các loại cổng thường gặp trên router"],[673,"C"],[674,"36 CHƯƠNG phải nắm vững về IOS"],[675,"iáo trình này"],[676,"\u2022 ng lệnh với router"],[677,"\u2022 Chuyể \u2022 \u2022 hập câu lệnh"],[678,"Mục đích của phần mềm Cisco IOS switch không thể hoạt động được nếu không có ủa mình là hệ điều hành mạng Cisco hay gọi 2 GIỚI THIỆU VỀ ROUTER GIỚI THIỆU Các kỹ thuật của Cisco đều được xây dựng dựa trên hệ điều hành mạng Cisco (ISO)"],[679,"Phần mềm IOS điều khiển quá trình định tuyến và chuyển mạch trên các thiết bị kết nối liên mạng"],[680,"Do đó người quản trị mạng Trong chương này, chúng tôi sẽ giới thiệu cơ bản và khảo sát các đặc điểm của IOS"],[681,"Tất cả các công việc cấu hình mạng từ đơn giản nhất đến phức tạp nhất đều dựa trên một nền tảng cơ bản là cấu hình router"],[682,"Do đó trong chương này cũng giới thiệu về các kỹ thuật và công cụ cơ bản để cấu hình router mà chúng ta sẽ sử dụng trong suốt g Sau khi hoàn tất chương này, các bạn có thể: \u2022 Nắm được mục đích của IOS"],[683,"\u2022 Mô tả hoạt động cơ bản của IOS"],[684,"\u2022 Nắm được các đặc điểm của IOS"],[685,"Nắm được phương thức thiết lập phiên giao tiếp bằng dò n đổi giữa các chế độ cấu hình router"],[686,"Thiết lập kết nối bằng HyperTerminal vào router"],[687,"Truy cập vào router"],[688,"\u2022 Sử dụng tính năng trợ giúp trong giao tiếp bằng dòng lệnh"],[689,"\u2022 Xử lý lỗi khi n 2.1 Phần hệ điều hành Cisco IOS 2.1.1 Tương tự như máy tính, router và h isco gọi hệ điều hành chệ điều ành"],[690,"C"],[691,"37 tắt là Cis"],[692,"Hệ điều hành được cài trên các Cisco router và Catalysst Switch"],[693,"h vụ mạng như sau: ến và chuyển mạch"],[694,"ả ật cho việc truy cập vàp tài nguyên mạng"],[695,"hệ thống mạng"],[696,"outer ụng giao diện dòng lệnh (CLI \u2013 Command \u2013 line interface) môi sole truyền thống"],[697,"IOS là một kỹ thuật cơ bản, từ đó được phát ho sản phẩm khác nhau của Cisco"],[698,"Do đó hoạt động cụ thể của g IOS g loại thiết bị"],[699,"úng ta router"],[700,"Cách u tiên sole trên router"],[701,"Cách thứ hai là sử dụng đường quay số qua modem hoặc kết nối null dem ổng AUX trên router"],[702,"Cả hai cách trên đều không cần phải cấu hình ớc ch ba là telnet vào router"],[703,"Để thiết lập phiên telnet vào ter th , các ng v .3 C router o diệ sco sử dụng cấu trúc phân cấp"],[704,"Cấu trúc này đòi hỏi bạn ng ứng"],[705,"Ví dụ: nếu bạn muốn cấu hình g gia nào của router thì bạn phải vào chế đọ cấu hình cổng giao tiếp đó"],[706,"ế đ tất cả các cấu hình được nhập vào chỉ có hiệu lực đối với cổng giao ươn ôi"],[707,"Tương ứng với mỗi chế độ cấu hình có một dấu nhắc đặc p lệnh riêng"],[708,"S có"],[709,"Sau khi bạn nhập một câu lệnh thì EC sẽ ệnh đó"],[710,"mật nên Cisco IOS chia phiên bản làm việc của EXEC thành hai chế co IOS Cisco IOS cung cấp các dịc \u2022 Định tuy \u2022 B o đảm và bảo m \u2022 Mở rộng 2.1.2 Giao diện người dùng của r Phần mềm Cisco sử d cho trường con triển c nhiều dòng từn sẽ rất khác nhau tuỳ theo từn Ch có nhiều cách khác nhau để truy cập vào giao diện CLI của đầ là kết nối trực tiếp từ máy tính hoặc thiết bị đầu cuối vào cổng con mo vào c trư o router"],[711,"Cách thứ rou đườ ì trên router ít nhất phải có một cổng đã được cấu hình địa chỉ IP ty đã được cấu hình cho phép truy cập và đặt mật mã"],[712,"2.1 ác chế độ cấu hình Gia n dòng lệnh của Ci muốn cấu hình cái gì thì phải vào chế độ tươ cổn ch o tiếp Từ p t ộ này tiế g ứng mà th trưng riêng và một tậ IO một trình thông dịch gọi là EXEC EX thực thi ngay câu l Vì lý do bảo độ là: chế độ EXEC người dùng và chế độ EXEC đặc quyền"],[713,"Sau đây là các đặc điểm của chế độ EXEC người dùng và chế độ EXEC đặc quyền:"],[714,"38 \u2022 Chế độ EXEC người dùng chỉ cho phép thực thi một số câu lệnh hiển thị các thông tin cơ bản của router mà thôi"],[715,"Chế độ này chỉ để xem chứ không cho phép thực hiện các câu lệnh làm thay đổi cấu hình router"],[716,"Chế độ EXEC người dùng có dấu nhắc là \u201c>\u201d"],[717,"\u2022 Chế độ EXEC đặc quyền cho phép thực hiện tất cả các câu lệnh của router"],[718,"Bạn có thể cấu hình để người dùng phải nhập mật mã trước khi truy nhập vào chế độ này"],[719,"Ngoài ra, để tăng thêm tính bảo mật bạn có thể cấu hình ử dụng các câu lệnh để cấu hình hoặc quản lý router"],[720,"Từ chế độ ền hạn dùng nhắc \u201c>\u201d"],[721,"Nếu mật mã đã được cài đặt thì router sẽ yêu cầu bạn do bảo mật nên các thiết bị mạng Cisco không hiển thị mật mã ng"],[722,"Sau khi mật mã được nhập vào chính xác thì dấu nhắc chế độ EXEC đặc quyền"],[723,"Bạn gõ dấu ter hiển thị ra nhiều câu lệnh hơn so với ở chế độ EXEC người dùng"],[724,"thêm userID"],[725,"Điều này cho phép chỉ những người nào được phép mới có thể truy cập vào router"],[726,"Người quản trị mảng phải ở chế độ EXEC đặc quyền mới có thể s EXEC đặc quyền bạn có thể chuyển vào các chế độ đặc khác nhau như chế độ cấu hình toàn cục chẳng hạn"],[727,"Chế độ EXEC đặc quyền được xác định bởi dấu nhắc \u201c#\u201d"],[728,"Để chuyển từ chế độ EXEC người dùng sang chế độ EXEC đặc quy lệnh enable tại dấu nhập mật mã"],[729,"Vì lý trong lúc bạn nhập chú \u201c>\u201d chuyển thành \u201c#\u201d cho biết bạn đang ở chầm hỏi (?) ở dấu nhắc này thì sẽ thấy rou"],[730,"39 Hình 2.1.3 2.1.4 Các đặc điểm của phần mè ản phẩm mạng khác nhau"],[731,"iết bị, Cisco đã phát triển nhiều loại phầ ỗi loại phần mềm IOS phù hợp với từng loại thiết bị, với mứ ớ và với nhu cầu của khách hàng"],[732,"Mặ hần mềm IOS khác nhau cho nhiều loại thiết bị với nhiều đặc tính ng cấu trúc lệnh cấu hình cơ bản thì vẫn giống nhau"],[733,"Do đó kỹ năng cấu hình và xử lý sự cố của bạn có thể ứng dụng cho nhiều loại sản phẩm sau: biết phần ệ thống mạng m Cisco IOS Cisco cung cấp rất nhiều loại IOS cho các loại s Để tối ưu hoá phần mềm IOS cho nhiều loại th n mềm Cisco IOS"],[734,"M c dung lượng bộ nh c dù có nhiều p khác nhau như khác nhau"],[735,"Tên của Cisco IOS được quy ước chia ra thành ba phần như \u2022 Phần thứ nhất thể hiện loại thiết bị mà phần mềm IOS này có thể sử dụng được"],[736,"\u2022 Phần thứ hai thể hiện các đặc tính của phần mềm IOS"],[737,"\u2022 Phần thứ ba thể hiện nơi chạy phần mêm IOS trên router và cho mềm này được cung cấp dưới dạng nén hay không nén"],[738,"Bạn có thể lựa chọn các đặc tính đặc biệt của IOS nhờ phần mềm Cisco Software Advisor"],[739,"Cisco Software Advisor là một công cụ cung cấp các thông tin hiện tại và cho phép bạn chọn lựa các đặc tính cho phu hợp với yêu cầu của h The name has three parts, separated by dashes: e.g"],[740,"xxx-yyy-ww: \u2022 xxxx = Platform \u2022 yyyy = Feature \u2022 ww = Format \u2013 where It execute from if compressed Name Codes Platform (Hardware) (Partial list) C1005 1005"],[741,"40 C1600 1600 C1700 1700, 1720, 1750 C2500 25xx, 3xxx, 5100, AO (11.2 and later only) C2600 2600 C2800 Catalyst 2800 C2900 2910, 2950 C3620 3620 C3640 3640 C4000 4000 (11.2 and later only) C4500 4500, 4700 Feature (Partial list) B Appletalk Boot Boot image C Commserver file (CiscoPro) Drag IOS based diagnostic images G ISDN subnet (SNMP, IP, Bridging, ISDN, PPP, IPX, Atalk) I IP subnet (SNMP, IP, Bridging, W e Node, Terminal AN, Remot Services) N IPX Q Async T Telco return (12.0) Y Reduced IP (SNMP, IP RIP/IGRP/EIGRP, Bridging, ISDN, PPP) (C1003/4) Z Managed moderns 40 40 bit encryption 56 56 bit encryption Format (Where the image runs in the route) F Flash M Ram R Rom L Rebcatable Compression Type Z Zip compressed (note lower case) X M zip compressed W \u201cSTAC\u201d compress Hình Khi bạn chọn mua IOS mới thì một trong những điều quan trọng bạn cần phải chú là sự tương thích giữa IOS với bộ nhớ flash và RAM trong router"],[742,"Thông thường 2.1.4a ý"],[743,"41 thì các phiên bản mới có thêm nhiều đặ tính mới thì lại đòi hỏi thêm nhiều bộ nhớ"],[744,"Bạn có thể dùng lệnh show version để kiểm tra phần IOS hiện tại và dung lượng flash còn trống"],[745,"Trên trang web hỗ ợ của Cisco có một số công cụ giúp bạn xác định dung lượng flash và RAM cần th ết cho từng loại IOS"],[746,"Trước khi cài đặt phần mềm Cisco IOS mới lên router, bạn phải kiểm tra xem router có đủ dung lượng bộ nhớ hay không"],[747,"Để xem dung lượng RAM bạn dùng lệ h show version: \u2026<output omited>\u2026 cisco 1721 (68380) processor (revision c) with 3584k/512K bytes of memory"],[748,"Dòng trên cho biết dung lượng của bộ nh chính và bộ nhớ chia sẻ trên router"],[749,"Có mốt số thiết bị sử dụng một phần DRAM làm bộ nhớ chia sẻ"],[750,"Tổng hai dung lượng trên là dung lương thật sự của DRAM trên router"],[751,"Để xem dung lượng của bộ nhớ flash bạn dung lệnh show flash: GAD#show flash \u2026<output omitted>\u2026 1599897 bytes total (10889728 bytes free) c tr i n ớ"],[752,"42 Thiết bị Cisco IOS có 3 chế độ hoạt động sau: \u2022 ROM monitor \u2022 Boot ROM \u2022 Cisco IOS"],[753,"ột trong các chế độ hoạt động uản trị hệ thống có thể cài đặt giá trị cho anh ghi để điều khiển chế độ khởi động mặc định router"],[754,"Hình 2.1.4b 2.1.5 Hoạt động của phầm mềm Cisco IOS Thông thường trong quá trình khởi động router, m trên được tải lên RAM để chạy"],[755,"Người q th"],[756,"43 Chế độ ROM monitor thực hiện quá trình bootstrap và kiểm tra phần cứng"],[757,"Chế độ này được sử dụng để khôi phục lại hệ thống khi bị lỗi ngiêm trọng hoặc khi người quản trị mạng bị mất mật mã"],[758,"Chúng ta chỉ có thể truy cập vào chế độ ROM monitor bằng đường kết nối vật lý trực tiếp vào cổng console trên router"],[759,"Ngoài ra chúng ta không thể truy cập vào chế độ này bằng bất ký cổng nào khác"],[760,"Khi router ở chế độ boot ROM, chỉ có một phần chức năng của Cisco IOS là hoạt động được"],[761,"Chế độ boot ROM cho phép bạn chép được lên bộ nhớ flash, nên chế độ này thường được sử dụng để thay thế phần mềm Cisco IOS trong flash"],[762,"Bạn dùng lệnh copy tftp flash để chép phần mềm IOS trên TFTP server vào bộ nhớ flash trên router"],[763,"Hình 2 p từ flash"],[764,"Tuy nhiên, hầu hết các Cisco router đều chép phần mềm IOS lên RAM rồi chạy từ ốn xem hệ thống còn bao nhiêu dung lượng bộ nhớ để tải phần mềm Cisco IOS mới thì bạn dùng lệnh show .1.5a Router muốn hoạt động bình thường thì phải chạt được toàn bộ phần mềm IOS trong flash"],[765,"Ở một số thiết bị, phần mềm IOS được chạy trực tiế RAM"],[766,"Một số phần mềm IOS lưu trong flash dưới dạng nén và được giải nén khi chép lên RAM"],[767,"Bạn dùng lệnh show version để xem các thông tin về phần mềm IOS, trong đó có hiển thị giá trị cấu hình của thanh ghi"],[768,"Còn nếu bạn mu flash"],[769,""],[770,"44 Hình 2.1.5b 2.2 Bắt đầu với router 2.2.1 Khởi đ ng router Router khởi ếu \u2022 Kiểm tra phần cứng của router và bảo đảm là chúng hoạt động tốt"],[771,"\u2022 Tìm và tải phần mềm Cisco IOS"],[772,"\u2022 Tìm và thực thi tập tin cấu hình khởi động hoặc vào chế độ cài đặt nếu ộ động bằng cách tải bootstrap, hệ điều hành và tập tin cấu hình"],[773,"N router không tìm thấy tập tin cấu hình thí sẽ tự động vào chế độ cài đặt"],[774,"Khi bạn hoàn tất việc cấu hình trong chế độ cài đặt thì tập tin cấu hình đó sẽ được lưu trong NVRAM"],[775,"Để cho router bắt đầu hoạt động, quá trình khởi động phần mềm Cisco IOS thực hiện 3 công đoạn sau: không tìm thấy tập tin này"],[776,""],[777,"45 đầu thực hiện khởi động phần mềm"],[778,"Sau quá trình POST, router sẽ thực hiện các bước sau: Hình 2.2.1a: Các bước khởi động router Khi router mới được bật điện lên thì nó thực hiện quá trình tự kiểm tra POST (Power on self test)"],[779,"Trong quá trình này, router chạy một trình từ ROM để kiểm tra tất cả các thành phần phần cứng trên router, ví dụ như kiểm tra hoạt động của CPU, bộ nhớ và các cổng giao tiếp mạng"],[780,"Sau khi hoàn tất quá trình này, router bắt"],[781,"46 \u2022 Bước 1: Chạy chương trình nạp bootstrap từ ROM"],[782,"Bootstrap chỉ đơn giản là một tập lệnh để thực hiện kiểm tra phần cứng và khởi động IOS"],[783,"\u2022 Bước 2: Tìm IOS"],[784,"Giá trị khởi động trên thanh ghi cấu hình sẽ quyết định u hình sẽ cho biết chính xác vị \u2022 ác bạn màn hình console danh sách các thành phần phần cứng và ổng giao tiếp mạng và thiết ter"],[785,"ver nào [0] out saving this config"],[786,"[1] this config"],[787,"[2] exit"],[788,"việc tim IOS ở đâu"],[789,"Nếu giá trị này cho biết là tải IOS từ flash hay từ mạng thi các câu lệnh boot system trong tập tin cấ trí và tên của IOS"],[790,"Bước 3: Tải hệ điều hành đã được tải xuống và bắt đầu hoạt động thì c sẽ thấy hiện trên phần mềm có trên router"],[791,"\u2022 Bước 4: Tập tin cấu hình lưu trong VNRAM được chép lên bộ nhớ chính và được thực thi từng dòng lệnh một"],[792,"Các câu lệnh cấu hình thực hiện khởi động quá trình định tuyến, đặt địa chỉ cho các c lập nhiều đặc tính hoạt động khác cho rou \u2022 Bước 5: Nếu không tìm thấy tập tin cấu hình trong VNRAM thì hệ điều hành sẽ đi tìm TFTP server"],[793,"Nếu cũng không tìm thấy một TFTP ser thì chế độ cài đặt sẽ được khởi động"],[794,"Trong chế độ cài đặt, các bạn không thể cấu hình cho các giao thức phức tạp của router"],[795,"Mục đích của chế độ cài đặt chỉ là cho phép người quản trị mạng cài đặt một cấu hình tối thiểu cho router khi không thể tìm được tập tin cấu hình từ những nguồn khác"],[796,"Trong chế độ cài đặt, câu trả lời mặc định được đặt trong dấu ngoặc vuông [] ở sau mỗi câu hỏi"],[797,"Bạn có thể nhấn phím Ctrl-C bất kỳ lúc nào để kết thúc quá trình cài đặt"],[798,"Khi đó tất cả các cổng giao tiếp mạng trên router sẽ đóng lại"],[799,"Khi bạn hoàn tất cấu hình trong chế độ cài đặt, bạn sẽ gặp các dòng thông báo như sau: Go to the IOS command promt with Return back to the setup without saving Save this configuration to nvram and"],[800,"47 En ter your selection [2]: Hình 2.2.1b: Chế độ cài đặt của router 2.2.1"],[801,"Đèn LED báo hiệu trên router Hình 2.2.2 ủ dụng đèn LED để báo hiệu các trạng thái hoạt động của router"],[802,"Các loại đèn LED này sẽ khác nhau tuỳ theo các loại router khác nhau"],[803,"sẽ cho biết trạng thái hoạt động của các Cisco router s Các đèn LED của các cổng trên router cổng"],[804,"Nếu đen LED của một cổng nào đó bị tắt trong khi cổng đó đang hoạt động và được kết nối đúng thì chứng tỏ là đã có sự cố đối với cổng đó"],[805,"Nếu một cổng hoạt động liên tuc thì đèn LED của cổng đó sáng liên tục"],[806,"Còn đèn LED OK ở bên phải cổng AUX sẽ bật sáng sau khi router hoạt động tốt"],[807,""],[808,"48 2.23"],[809,"Khảo sát quá trình khởi động của router Hình 2.2.3a: Thông tin hiển thị trong quá trình khởi động router Ví dụ ở hình 2.2.3a cho thấy nội dung các thông điệp được hiển thị trên màn hình console trong suốt quá trình khởi động của router"],[810,"Các thông tin này sẽ khác nhau tuỳ theo các loại cổng có trên router và tuỳ theo từng phiên bản Cisco IOS"],[811,"Do đó hình 2.2.3a chỉ là một ví dụ để tham khảo chứ không pản ánh chính xác toàn bộ những gì được hiện thị"],[812,""],[813,"49 co IOS tải từ bộ nhớ flash và tập tin cấu hình tải từ NVRAM"],[814,"Trong hình 2.2.3b, câu \u201cVNRAM invalid, possibly due to write erase\u201d cho biết router này chưa được cấu hình hoặc là NVRAM đã bị xoá"],[815,"Thông thường khi router đã được cấu hình thì tập tin cấu hình được lưu trong NVRAM, sau đó ta phải cấu hình thanh ghi để router sử dụng tập tin cấu hình này"],[816,"Giá trị mặc định của thanh ghi cấu hình là 0x2102, khi đó router sẽ khởi động với Cis"],[817,"50 Hình 2.2.3c: Thông tin hiển thị trong quá trình khởi động router Dự iên bản của ph sử dụng trên router"],[818,"Ngoài ra bạn cũng xác địn ter, bộ xử lý là loại gì, cung lượng của bộ nhớ và một số các thông tin khác của router như: ó chạy chương trình mô phỏng HyperTerminal"],[819,"ộ chuyển đổi RJ45- DB9"],[820,"a vào thông tin như hình 2n2n3c, chúng ta có thể xác định được ph ần mềm boottrap và IOS đang được h được phiên bản của rou \u2022 Số lượng các cổng giao tiếp"],[821,"\u2022 Các loại cổng giao tiếp"],[822,"\u2022 Dung lượng NVRAM"],[823,"\u2022 Dung lượng bộ nhớ flash"],[824,"2 Thiết lập phiên kết nối bằng HyperTerminal Tất cả các Cisco router đều có cổng console nối tiếp bất đồng bộ TIA/EIA-232 (RJ45)"],[825,"Chúng ta cần phải có cáp và bộ chuyển đổi để kết nối từ thiết bị đầu cuối console vào cổng console trên router"],[826,"Thiết bị đầu cuối console có thể là một thiết bị đầu cuối ASCII hoặc là một PC c Để kết nối PC có cổng console chúng ta dùng cáp rollover và b"],[827,"51 Thông số mặc định của cổng console là: 9000 baud, 8 data bits, 1 stop bit, no flow control"],[828,"Cổng console không có hỗ trợ điều khiển luồng băng phần cứng"],[829,"Sau đây là bước thực hiện để kết nối một thiết bị đầu cuối vào cổng console trên router: router bằng cáp rollover và 5-DB9 hoặc RJ ị đầu cuối hoặc c các thông số sau: 96000 baud, 8 data bits, 1 stop bit, no flow control"],[830,"ter truy cập ng đường truy i bạn mới có thể nhập các câu lệnh cho router"],[831,"router có 2 mức truy cập: ạn sẽ gặp dâu nhắc của chế độ EXEC p lệnh bạn phải chuyển vào chế độ EXEC enable"],[832,"Ở dấu nhắc password: bạn phải router đã được cấu hình bởi enable secret sẽ được áp dụng"],[833,"Sau khi nhắc \u201c#\u201d cho biết là bạn đang ở chế độ ừ chế độ này bạn mới có thể truy cập vào chế độ cấu hình toàn \u2022 Kết nối thiết bị đầu cuối vào cổng console trên bộ chuyển đổi RJ4 45-DB25"],[834,"\u2022 Cấu hình thiết b ấu hình phần mềm mô phỏng trên PC với Truy cập vào rou Để cấu hình router bạn ph u cuối hoặc bằng ải vào giao diện người dùng của router bằ ruy cập được vào router thiết bị đầ cập từ xa"],[835,"Sau khi t th Vì lý do bảo mật nên \u2022 Mức EXEC người dùng: chỉ có một số câu lệnh dùng để xem trạng thái của router"],[836,"Ở mức này, bạn không thể thay đổi được cấu hình của router"],[837,"\u2022 Mức EXEC đặc quyền: bao gồm tất cả các câu lệnh để cấu hình router"],[838,"Ngay sau khi truy cập được vào router b tậngười dùng"],[839,"Để sử dụng được toàn bộ đặc quyền"],[840,"Ở dấu nhắc \u201c>\u201d bạn gõ lệnh nhập mật mã đúng với mật mã đã được cấu hình cho router trước đó bằng lệnh enable secret hoặc enable password"],[841,"Nếu mật mã của cả 2 lệnh trên thì mật mã của câu lệnh trên bạn sẽ gặp dấuhoàn tất các bước EXEC đặc quyền"],[842,"T cục rồi sau đó là các chế độ cấu hình riêng biệt hơn như: \u2022 Chế độ cấu hình cổng giao tiếp"],[843,"\u2022 Chế độ cấu hình cổng giao tiếp con"],[844,"\u2022 Chế độ cấu hình đường truy cập"],[845,"\u2022 Chế độ cấu hình router"],[846,""],[847,"52 \u2022 Chế độ cấu hình route-map"],[848,"n Từ chế độ EXEC đặc quyền, bạn gõ disable hoặc exit để trở về chế độ EXEC người dùng"],[849,"Để trở về chế độ EXEC đặc quyền từ chế độ cấu hình toàn cục, bạ dùng lệnh exit hoặc Ctrl-Z"],[850,"Lệnh Ctrl-Z có thể sử dùng để trở về ngay chế độ EXEC đặc quyền từ bất kỳ chế độ cấu hình riêng biệt nào"],[851,"Hình 2.2.5a ợ giúp trong router CLI ệnh ở cuối màn hình cho bi ẫn còn tiếp"],[852,"Để xem trang tiếp theo, bạn nhấn nhanh 2.2.6"],[853,"Phím tr Khi bạn gõ dấu chấm hỏi (?) ở dấu nhắc thì router sẽ hiển thị danh sách các l tương ứng với chế độ cấu hình mà bạn đang ở"],[854,"Chữ \u201c--More--\u201d ết là phần hiển thị v"],[855,"53 Spa thị tiếp từng dòng một thì bạn nhấn phím Enter hoặc Return"],[856,"Bạn có thể nhấn từng dòng một thì bạn nhấn phím bất kỳ nào khác để qu t cebar"],[857,"Còn nếu bạn muốn hiển ay rở về dấu nhắc"],[858,"Hình 2.2.6a: Danh sách l ụng ở chế độ EXEC người dung ệnh sử d Để chuyển vào chế độ EXEC đặc quyền bạn gõ enable hoặc gõ tắt là ena cũng được"],[859,"Nếu mật mã đã được cài đặt vào cho router thì router sẽ yêu cầu bạn nhập mật mã"],[860,"Sau khi bạn đã vào được chế độ này rồi thì bạn gõ dấu chấm hỏi (?), bạn"],[861,"54 sẽ thấy là danh sách các câu lệnhd EXEC đặc quyền nhiều hơn hẳn danh sách các câu lệnh mà bạ ười dùng"],[862,"Tuy nhiên các tập lệnh này sẽ khác nhau tuỳ r và tuỳ theo từng phiên bản o IOS"],[863,"ó bạn nhập lại đầy đủ câu lệnh"],[864,"ệnh đã bị nhập sai"],[865,"Vị trí của dấu (^) mà câu lệnh từ đầu cho tới vị trí mà dấu (^) chỉ sai rồi bạn ỏi (?) để thêm cú pháp đúng tiếp theo của câu lệnh"],[866,"âu lệnh theo đúng cú pháp rồi nhấn phím Enter hoặc viết câu lệnh độ hỗ trợ soạn thảo hư hình 2.2.7a để di chuyển con trỏ i bạn cần phải chỉnh sửa câu lệnh đó"],[867,"Trong các độ ếu chế độ này lèn ảnh hưởng khi bạn biết các script thị bạn có thể tắt bằng lệnh terminal no editing trong chế độ EXEC đặc quyền"],[868,"ung chó chế độ n thấy trong chế độ EXEC ng theo cấu hình của route phần mềm Cisc Bây giờ giả sử bạn muốn cài đặt đồng hồ cho router nhưng bạn lai không biết phải dùng lệnh nào thi khi đó chức năng trợ giúp của router sẽ giúp bạn tìm được câu lênh đúng"],[869,"Bạn thực hiện theo các bước sau: 1"],[870,"Dùng dấu chấm hỏi để tìm câu lệnh cài đặt đồng hồ"],[871,"Trong danh sách các câu lệnh được hiển thị bạn sẽ tìm được lệnh clock"],[872,"2"],[873,"Kiểm tra cú pháp câu lệnh để khai báo giờ"],[874,"3"],[875,"Bạn nhập giờ, phút, giây theo đúng cú pháp câu lệnh"],[876,"Bạn sẽ gặp câu thông báo là câu lệnh chưa hoàn tất như hình 2.2.6b"],[877,"4"],[878,"Bạn nhấn Ctrl-P hoặc phím mũi tên (↑) để lại lệnh vừa mới nhập"],[879,"Ở cuối câu lệnh đó bạn thêm một khoảng trắng và dấu chấm hỏi (?) để xem phần kế tiếp của câu lệnh"],[880,"Sau đ 5"],[881,"Nếu bạn gặp dấu (^) thì có nghĩa là câu l sữ cho biết vị trí sẽ nhập thêm dấu chấm h 6"],[882,"Bạn nhập lại đầy đủ c Return để thực thi câu lệnh"],[883,"2.2.7"],[884,"Mở rộng thêm về cách Trong giao diện người dùng của router, router có thể có chế câu lệnh"],[885,"Bạn có thể sử dụng các tổ hợp phím n trên dòng lệnh mà bạn đang viết kh phiên bản phần mêm hiện nay, chế độ hỗ trợ soạn thảo câu lệnh là hoàn toàn tự ng"],[886,"Tuy nhiên n Command Description Ctrl-A Moves to the beginning of the command line"],[887,"55 Esc-B Moves back one word Ctrl-B (or right arrow) Moves back one character Ctrl-E Moves to the end of the command line Ctrl-F (or left arrow) Moves forward one character Esc-F Moves forward one word hi soạn thảo câu lệnh, màn hình sẽ cuộn ngang khi câu lệnh dài quá một hang"],[888,"ỏ đến hết lề phải thì dòng lệnh sẽ dịch sang trái 10 khoảng trắng"],[889,"Khi đó 0 ký tự đầu tiên của câu lệnh sẽ không nhìn thấy được trên màn hình nữa"],[890,"Bạn có thể cuộn lại để xem bằng cách nhấn Ctrl-B hoặc nhấn phím mũi tên (←) cho tới khi màn hình cuộn tới đầu câu lệnh"],[891,"Hoặc bạn có thể nhấn Ctrl-A để chuyển ngay về đầu dòng lệnh"],[892,"Trên hình 2.2.7b là ví dụ khi một câu lệnh dài quá một hành"],[893,"Dấu ($) cho biết là câu lệnh đã được dịch sang trái"],[894,"Phím Ctrl-Z được sử dụng để quay trở về chế độ EXEC đặc quyền từ bất kỳ chế độ cấu hình riêng biệt nào"],[895,"K Khi con tr 1 Hình 2.2.7b 2.2.8"],[896,"Gọi lại các lệnh đã sử dụng"],[897,"56 Khi cấu hình router, router co lưu lại một số các lệnh bạn đã sử dụng"],[898,"Điều này đặc ại các câu lệnh dài và phức tạp"],[899,"Với cơ chế này bạn hthước vùng bộ đệm để lưu các câu lệnh đã sử dụng"],[900,"Mặ đ ệnh trong bộ đệm"],[901,"Bạn có thể thay đổi số lượ lệnh terminal history size hoặc history siz thể lưu lại được"],[902,"Nế a mới sử dụng gần nhất thì bạn nhấn Ctrl-P hoặc phí ấn thì mỗi lần nhấn như vậy bạn sẽ gọi lại àn tất câu lệnh cho bạn"],[903,"Khi bạn dùng phím Tab mà router hiển thị được đủ câu lệnh thì có nghĩa là router đã nhận biết n nhập"],[904,"y câu lệnh trước đó rồi dán hoặc chèn vào câu lệnh biệt có ích khi bạn muốn lặp l có thể thực hiện các việc sau: \u2022 Cài đặt kíc \u2022 Gọi lại các câu lệnh đã sử dụng"],[905,"\u2022 Tắt chức năng này đi"],[906,"c ịnh là router sẽ lưu lại 10 câu l ng câu lệnh mà router lưu lại bằng e"],[907,"Tối đa là 255 câu lệnh có u bạn muốn gọi lại câu lệnh vừ m mũi tên (↑)"],[908,"Nếu bạn tiếp tục nh tuần tự các câu lệnh trước đó nữa"],[909,"Nếu bạn muốn gọi lui lạ một câu lệnh sau đó thì bạn nhấn Ctrl-N hoặc nhấn phím mũi tên (↓)"],[910,"Tương tự, nếu bạn tiếp tục nhấn như vậy thi mỗi lần nhấn bạn sẽ gọi lại một lệnh đó"],[911,"Khi gõ lệnh, bạn chỉ cần gõ các ký tự đủ để router phân biệt với mọi câu kệnh khác rồi nhấn phím Tab thì router sẽ tự động ho được câu lệnh mà bạn muố Ngoài ra, hầu hết các router đều có them chức năng cho bạn đánh dấu khối và copy"],[912,"Nhờ đó bạn có thể cop hiện tại"],[913,"Lệnh Giải thích lệnh Ctrl-P or up arrow key Gọi lại lệnh ngay trước đó Ctrl-N or down arrow key Gọi lại lệnh ngay sau đó Router>show history Xem các lệnh đã sử dụng còn lưu trong bộ đệm Router>Terminal history size number-of-lines Cài đặt dung lượng bộ đệm đã lưu các lệnh đã sử dụng Router>terminal no editing Tắt chức năng soạn thảo lệnh nâng cao Router>terminal editing Mở chức năng soạn thảo lệnh nâng cao <Tab> Hoàn tất câu lệnh"],[914,"57 Xử lý lỗi câu lệnh Lỗi câu lệnh thường là do bạn gõ sai"],[915,"Sau khi bạn gõ một câu lệnh bị sai thì bạn sẽ dụng chức năng trợ giúp của hệ thống bạn sẽ tìm ra và chỉnh sửa lại lỗi i cho biết câu lệnh bị sai ở số 93"],[916,"Bạn gõ lại câu lệnh từ ruary 1993 h rồi nhấn phím Enter mà câu lệnh đó bị sai thì bạn có vừa mới nhập"],[917,"Sau đó bạn dùng các phím mũi tên sang phải, sang trái di chuyển con trỏ tới vị trí bị sai để sửa lại"],[918,"Nếu thể dùng phím <backspace>"],[919,"tin về giá trị thanh ghi cấu hình"],[920,"g tin được hiển thị do lệnh show version bao gồm: \u2022 Phiên bản IOS và một ít thông tin đặc trưng"],[921,"hương thức khởi động router lần gần đây nhất"],[922,"\u2022 Phiên bản phần cứng của router"],[923,"gặp dấu báo lỗi (^)"],[924,"Dấu báo lỗi (^) đặt ở vị trí mà câu lệnh bắt đầu bị sai"],[925,"Dựa vào đó và vận cú pháp của câu lệnh"],[926,"Router#clock set 13:32:00 February 93 % Invalid input detected at \u201c^\u201d marker Trong ví dụ trên, dấu báo lỗ đầu tới vị trí bị lỗi rồi thêm dấu chấm hỏi (?) như sau: Router # clock set 13:32:00 February"],[927,"<1993-2035>Year Sau đó bạn nhập lại câu lệnh với số năm đúng như cú pháp ở trên: Router#clock set 13:32:00 Feb Sau khi bạn gõ xong câu lện thể dùng phím mũi tên (↑) để gọi câu lệnh cần xoá các ký tự thì bạn có Lệnh show version Lệnh show version dùng để hiển thị các thông tin về phiên bản phần mềm Cisco IOS đang chạy trên router, trong đó có cả thông Trong hình dưới các bạn sẽ thấy nhung thôn \u2022 Phiên bản phần mềm Bootstrap ROM"],[928,"\u2022 Phiên bản phần mềm Boot ROM"],[929,"\u2022 Thời gian hoạt động của router"],[930,"\u2022 P \u2022 Tên và vị trí lưu phần mềm hệ điều hành"],[931,""],[932,"58 \u2022 Giá trị cài đặt của thanh ghi cấu hình"],[933,"Chúng ta thường sử dụng lệnh show version để xác định phiên bản của phần mềm IOS và xem giá trị thanh ghi cài đặt cho qua trình khởi động của router"],[934,"TỔNG KẾT Sau khi kết thúc chương này, chúng ta nắm được các ý như sau: \u2022 Mục đích của IOS"],[935,"\u2022 Hoạt động cơ bản của IOS"],[936,"\u2022 Xác định các đặc tính khác nhau của các phiên bản IOS khác nhau"],[937,""],[938,"59 \u2022 Các phương pháp thiết lập phiên kết nối CLI vào router"],[939,"\u2022 Sự khác nhau giữa 2 chế độ EXEC người dùng và EXEC đặc quyền \u2022 Thiết lập phiên kết nối vào router bằng HyperTerminal"],[940,"\u2022 Truy cập vào router"],[941,"\u2022 Sử dụng chế độ trợ giúp của router trong giao diện dòng lệnh"],[942,"\u2022 Sử dụng cơ chế hỗ trợ soạn thảo câu lệnh"],[943,"\u2022 Gọi lại các câu lệnh đã sử dụng"],[944,"\u2022 Xử lý lỗi câu lệnh"],[945,"\u2022 Sử dụng lệnh show version"],[946,""],[947,"60 CHƯƠNG 3 CẤU HÌNH ROUTER GIỚI THIỆU r thực hiện nhiều chức năng mạng phức tạp là một ành nhiều để làm quen và nắm vững đượ ế độ cấu hình của router thì công việc cấu hìn n hơn rất nhiều"],[948,"Trong chương này sẽ giới thi router và một số lệnh cấu hình đơn giản"],[949,"Kỹ trọng có cung cấp một số công cụ cho người quả ột số thông tin cần thiết vào tập tin cấu hình"],[950,"Cũng giống \u2022 Thực hiện một số thay đổi trên router"],[951,"Cấu hình router để cho route công việc đầy thử thách"],[952,"Tuy nhiên bước bắt đầu cấu hình router thì không khó lắm"],[953,"Nếu ngay từ bước này bạn cố gắng thực h c các bước di chuyển giữa các ch h phức tạp về sau sẽ trở nên đơn giả ệu về các chế độ cấu hình cơ bản của năng đọc và hiểu một cách rõ ràng các tập tin cấu hình là một ký năng rất quan của người quản trị mạng"],[954,"Cisco IOS n trị mạng để thêm m như những người lập trình phải có tài liệu của từng bước lập trình thì người quản trị mạng cũng cần được cung cấp thông tin càng nhiều càng tốt khi mà hệ thống mạng do người khác quản trị"],[955,"Khi hoàn tất chương này các bạn có thể: \u2022 Đặt tên cho router"],[956,"\u2022 Cài đặt mật mã cho router"],[957,"\u2022 Khảo sát các lệnh show"],[958,"\u2022 Cấu hình cổng Ethernet trên router"],[959,"\u2022 Lưu các thay đổi đó lại"],[960,"\u2022 Cấu hình câu chú thích cho các cổng giao tiếp trên router"],[961,"\u2022 Cấu hình thông điệp hàng ngày cho router"],[962,"\u2022 Cấu hình bảng host cho router"],[963,"\u2022 Hiểu được tầm quan trọng của việc ghi nhận lại và lưu dự phòng cấu hình của router"],[964,""],[965,"61 3.1"],[966,"Cấu hình router 3.1.1"],[967,"Chế độ giao tiếp dòng lệnh CLI Hình 3.1.1 Tất cả các câu lệnh làm thay đổi cấu hình router đều xuất phát từ chế cầu hình toàn c ỳ theo ý bạn muốn thay đổi thay đổi phần cấu hình đặc biệt nào của router thì bạn chuyển vào chế độ chuyên biệt tương ứng"],[968,"Các chế độ cấu hình chuyên biệt ế độ con của chế độ cấu hình toàn cục"],[969,"chế độ cấu hình toàn cục là những câu lệnh có tác độ ục"],[970,"Tu này đều là ch Các câu lệnh được sử dụng trong động lên toàn bộ hệ thống"],[971,"Bạn sử dụng câu lệnh sau để di chuyển vào chế cấu hình toàn cục:"],[972,"62 Chú ý: Sự thay đổi của dấu nhắc cho biết bạn đang ở chế độ cấu hình toàn cục Router # configure terminal Router(config)# Chế ừ chế độ này bạn có thể chu tiếp"],[973,"Khi bạn chuyển vào chế độ cấu hình chuyên biệt nào thì dấu nhắc sẽ thay đổi tương ứng"],[974,"Các câu lệnh trong đó chỉ có tác động đối với các cổng hay các tiến trình nào liên quan đến chế độ cấu hình đó thôi"],[975,"Bạn dùng lệnh exit để trở về chế độ cấu hình toàn cục hoặc bạn dùng phím Ctrl-Z để quay về thẳng chế độ EXEC đặc quyền"],[976,"3.1.2"],[977,"Đặt tên cho router Công việc đầu tiên khi cấu hình router là đặt tên cho router"],[978,"Trong chế độ cấu hình toàn cục, bạn dùng lệnh sau: Router(config)#hostname Tokyo Tokyo (config)# Ngay sau khi bạn nhấn phím Enter để thực thi câu lệnh bạn sẽ thấy dấu nhắc đổi từ n mặc định (Router) sang tên mà bạn vừa mới đặt (Tokyo)"],[979,"ật mã cho router ệc truy cập vào router"],[980,"Thông thường ta luôn đặt mậ n được sử dụng để kiểm soát sự truy cập vào chế độ EXEC đặc quyền trên router"],[981,"Khi đó, chỉ độ cấu hình toàn cục là chế độ cấu hình chính"],[982,"T yển vào các chế độ chuyên biệt như: \u2022 Chế độ cấu hình cổng giao \u2022 Chế độ cấu hình đường truy cập"],[983,"\u2022 Chế độ cấu hình router"],[984,"\u2022 Chế độ cấu hình cổng con"],[985,"\u2022 Chế độ cấu hình bộ điều khiển"],[986,"tê 3.1.3"],[987,"Đặt m Mật mã được sử dụng để hạn chế vi t mã cho đường vty và console trên router"],[988,"Ngoài ra mật mã cò"],[989,"63 những người nào được phép mới có thể thực hiện việc thay đổi tập tin cấu hình trên router"],[990,"Sau đây là các lệnh mà bạn cền sử dụng để thực hiện việc đặt mật mã cho đường rd <password> ho một đường để dự Mật mã enable và enable secret được sử ụng để hạn chế việc truy cập vào chế độ EXEC đặc quyền"],[991,"Mật mã enabl dụng khi chúng ta cài đặt mật mã enable secret vì mật mã này được mã hoá còn mật mã enable thì không"],[992,"Sau đây <password> ị rõ ràng khi sử dụng lệnh show running-config hoặc show startup-config"],[993,"Để tránh điều này bạn ấu hình của console: Router(config)#line console 0 Router(config-line)#passwo Router(config-line)#login Chúng ta cũng cần đặt mật mã cho một hoặc nhièu đương vty để kiểm soát các user truy nhập từ xa vào router và Telnet"],[994,"Thông thường Cisco router có 5 đường vty với thứ tự từ 0 đến 4"],[995,"Chúng ta thường sử dụng một mật mã cho tất cả các đường vty, nhưng đôi khi chúng ta nên đặt thêm mật mã riêng c phòng khi cả 4 đường kia đều đang được sủ dụng"],[996,"Sau đây là các lệnh cần sử dụng để đặt mật mã cho đường vty: Router(config)#line vty 0 4 Router(config-line)#password <password> Router(config-line)#login d e chỉ được sử là các lệnh dùng để đặt mật mã enable secret: Router(config)#enable password <password> Router(config)#enable secret Đôi khi bạn sẽ thấy là rất không an toàn khi mật mã được hiển th nên dùng lệnh sau để mã hoá tất cả các mật mã hiển thị trên tập tin c router: Router(config)#service password-encryption"],[997,"64 Lệnh service password-encryption sẽ áp dụng một cơ chế mã hoá đơn giản lên tất các mật mã chưa được mcả ã hoá"],[998,"Riêng mật má enable secret thì sử dụng một thuật toán mã hoá rất mạnh là MD5"],[999,"Hình 3.1.3 3.1.4"],[1000,"Kiểm tra băng các lệnh show ow được dùng để kiểm tra nội dung các tập tin trên g Chúng ta có rất nhiều lệnh sh router và để tìm ra sự cố"],[1001,"Trong cả hai chế độ EXEC đặc quyền và EXEC người dùng, khi bạn gõ show"],[1002,"Thì bạn sẽ xem được danh sách các lệnh show"],[1003,"Đương nhiên là số lệnh show dùng được trong chế độ EXEC đặc quyền sẽ nhiều hơn tron chế độ EXEC người dùng"],[1004,""],[1005,"65 Hình 3.1.4 \u2022 Show interface - hiển thị trạng thái của tất cả các cổng giao tiếp trên router"],[1006,"Để xem trạng thái của một cổng nào đó thì bạn thêm tên và số thứ tự của cổng đó sau lệnh show interface"],[1007,"Ví dụ như: Router#show interface serial 0/1"],[1008,"66 \u2022 Show controllers serial - hiển thị các thông tin chuyên biệt về phần cứng của t trên router"],[1009,"hỉ tương ứng"],[1010,"ang kết nối vảo router"],[1011,"\u2022 Show history - hiển thị danh sách các câu lệnh vừa mới được sử dụng"],[1012,"n bộ nhớ flash và tập tin IOS chứa trong đó"],[1013,"\u2022 Show version - hiển thị thông tin về router và IOS đang chạy trên RAM"],[1014,"ờng console hoặc vty"],[1015,"Sau đây là các ask"],[1016,"c độ clock nếu đầu cáp cắm vào cổng serial là DCE"],[1017,"Nếu đầu cáp là Ro Router(config)#ip address <ip address> <netmask> Cổ thời gian thực hiện thông tin liên lạc"],[1018,"Trong hầu hết các trường hợp, thiết bị DCE, ví dụ như CSU, sẽ là thiết bị các cổng serial"],[1019,"đặ\u2022 Show clock - hiển thị đồng hồ được cài \u2022 Show hosts - hiển thị danh sách tên và địa c \u2022 Show users - hiển thị tất cả các user đ \u2022 Show flash \u2013 hiển thị thông ti \u2022 Show ARP - hiển thị bảng ARP trên router"],[1020,"\u2022 Show protocol - hiển thị trạng thái toàn cục và trạng thái của các cổng giao tiếp đã được cấu hình giao thức lớp 3"],[1021,"\u2022 Show startup-configuration - hiển thị tập tin cấu hình đăng chạy trên RAM"],[1022,"3.1.5"],[1023,"Cấu hình cổng serial Chúng ta có thẻ cấuhình cổng serial bẳng đư bước cần thực hiện khi câu hình cỏng serial: 1"],[1024,"Vào chế độ cấu hình toàn cục"],[1025,"2"],[1026,"Vào chế độ cấu hình cổng serial"],[1027,"3"],[1028,"Khai báo địa chỉ và subnet m 4"],[1029,"Đặt tố DTE thì chúng ta có thể bỏ qua này"],[1030,"5"],[1031,"Khởi động serial"],[1032,"Mỗi một cổng serial đều phải có một địa chỉ IP và subnet mask để chúng có thể định tuyến các gói IP"],[1033,"Để cấu hình địa chỉ IP chúng ta dùng lệnh sau: uter(config)#interface serial 0/0 ng serial cần phải có tín hiệu clock để điều khiển cung cấp tín hiệu clock"],[1034,"Mặc định thì Cisco router lad thiết bị DTE nhưng chúng ta có thể cấu hình chúng thành thiết bị DCE"],[1035,""],[1036,"67 Trong môi trường làm lab thì các đường liên kết serial được kết nối trực tiếp với 00, 38400, 000, 800000, 1000000, 1300000, c tuỳ o tiếp trên router đều đóng"],[1037,"Nếu bạn muốn mở hay khởi n"],[1038,"Nếu bạn muốn đóng cổng lại để bảo trì hoặc xử lý sự cố thì bạn dùng lệnh shutdown"],[1039,"Trong môi trường làm lab, tốc độ clock thường được sử dụng là 56000"],[1040,"Sau đây là các lệnh được sử dụng để cài đặt tốc độ clock và khởi động cổng serial: Router(config)#interface serial 0/0 Router(config-if)#clock rate 56000 Router(config-if)#no shutdown 3.1.6"],[1041,"Thực hiện việc thêm bớt, dịch chuyển và thay đổi tập tin cấu hình Nếu bạn cần chỉnh sửa tập tin cấu hình thì bạn phải di chuyển vào đùng chế độ cấu hình và thực hiện cần thiết"],[1042,"Ví dụ:nếu bạn cần mở một cổng nào đó trên router thì trước hết bạn phải vào chế độ cấu hình toàn cục, sau đó vào chế độ cấ của cổng đó rồi dùng lệnh no shutdown"],[1043,"có những có những chi tiết không đúng thì bạn có thể chỉnh sửa lại bằng \u2022 \u2022 nhau"],[1044,"Do đó phải có một đầu là DCE để cấp tín hiệu clock"],[1045,"Bạn dùng lệnh clockrate để cài đặt tốc độ clock"],[1046,"Sau đây là các tốc độ clock mà bạn có thể đặt cho router (đơn vị của tốc độ clock là bit/s): 1200, 2400, 9600, 192 56000, 64000, 72000, 125000, 148000, 500 2000000, 4000000"],[1047,"Tuy nhiên sẽ có một số tốc độ bạn không sử dụng đượ theo khả năng vật lý của từng cổng serial"],[1048,"Mặc định thì các cổng gia động các cổng này thì bạn phải dùng lệnh no shutdow u Để kiểm tra những gì mà bạn vừa mới thay đổi, bạn dùng lệnh show running- config"],[1049,"Lệnh này sẽ hiển thị nội dung của tập tin cấu hình hiện tại"],[1050,"Nếu kết quả hiển thị cách thực hiện một hoặc nhiều cách sau: \u2022 Dùng dạng no của các lệnh cấu hình"],[1051,"\u2022 Khởi động lại router với tập tin cấu hình nguyên thuỷ trong NVRAM"],[1052,"Chép tập tin cấu hình dự phòng từ TFTP server"],[1053,"Xoá tập tin cấu hình khởi động bằng lệnh erase startup-config,sau đó khởi động lại router và vào chế độ cài đặt"],[1054,""],[1055,"68 Để lư NVRA Rou u tập tin, cấu hình hiện tại thành tập tin cấu hình khởi động lưu trong M, bạn dùng lệnh như sau: ter#copy running-config startup-config Hình 3.1.6"],[1056,"3.1.7"],[1057,"Cấu hình cổng Ethernet Tương tự như cổng serial, chúng ta có thể cấu hình cổng Ethernet bằng đường Mỗ có một địa chỉ IP và subnet mask để có thể thực hiệ ng đó"],[1058,"Sau â hình Ethernet: h cổng Ethernet"],[1059,"\u2022 Khai báo địa chỉ và subnet mask"],[1060,"ernet"],[1061,"Mă"],[1062,"Do đó, bạn phải dùng lệnh no shu ng"],[1063,"Nếu bạn cần đóng cổng lại để bảo trì hay xử lý sự n"],[1064,"console hoặc vty"],[1065,"i cổng Ethernet cũng cần phải n định tuyến các gói IP qua cổ đ y là các bước thực hiện cấu \u2022 Vào chế độ cấu hình toàn cục"],[1066,"\u2022 Vào chế độ cấu hìn \u2022 Khởi động cổng Eth c định là các cổng trên router đều đóng tdown để mở hay khởi động cổ cố thì bạn dùng lệnh shutdow"],[1067,"69 Hình 3.1.7 3.2"],[1068,"oàn chỉnh cấu hình router .2.1"],[1069,"Tầm quan trọng của việc chuẩn hoá tập tin cấu hình Trong một tổ chức việc phát các quy định dành cho các tập tin cấu hình là rất cần thiết"],[1070,"Từ đó ta có thể kiểm soát được các tập tin nào càn bảo trì, lưu các tập tin ở đâu và như thế nào"],[1071,"Các quy định này có thể là những quy định được ứng dụng rộng rái hoặc cũng có thể ch có giá trị trong một phạm vi nào đó"],[1072,"Nếu không có một quy định chung cho tổ chức của mình thì hệ thống mạng của bạn sẽ trở nên lộn xộn và không đảm bảo được hoạt động thông suốt"],[1073,"3.2.2"],[1074,"Câu chú thích cho các cổng giao tiếp Trên các cổng giao tiếp bạn nên ghi chú lại một số thông tin quan trọng, ví dụ như chỉ số mạch mà cổng này kết nối vào, hay thông tin vào router khác, về phân đoạn mạng mà cổng này kết nối đến"],[1075,"Dựa vào các câu chú thích này, người quản trị mạng có thể biết được là cổng giao tiếp này kết nối vào đâu"],[1076,"H 3 ỉ"],[1077,"70 Câu chú thích chỉ đơn giản là ghi ch c cổng giao tiếp, ngoài ra nó hoàn toàn khôn câu chú định dạng chung và mỗi cổng giao tiếp có một câu chú thích riêng"],[1078,"úc mạng và quy ước chung, bạn có thể quyết định là ghi chú những ú thêm cho cá g có tác động gì đối với hoạt động của router"],[1079,"Bẹn nên viết thích theo một Tuỳ theo cấu tr thông tin nào liên quan đến cổng giao tiếp để giúp cho tập tin cấu hình được rõ ràng hơn, giúp cho việc xác định sự cố được nhanh hơn"],[1080,"Hình 3.2.2 3.2.3"],[1081,"Cấu hình chú thích cho các cổng giao tiếp Trư c ục"],[1082,"Rồi từ chế độ cấu hình toàn cục bạn ại đây bạn gõ lệnh description và câu Sau đâ c để cấu hình câu chú thích cho cổng giao tiếp: 1"],[1083,"c bằng lệnh configure terminal"],[1084,"2"],[1085,"giao tiếp (ví dụ là cổng Ethernet 0): interface 3"],[1086,"là câu chú thích"],[1087,"4"],[1088,"trở về chế độ EXEC đăc quyền bằng L g lệnh copy running-config startup- dụ về cách viết câu chú thích: ớc tiên bạn phải vào hế độ cấu hình toàn c chuyển vào chế độ cấu hình cổng giao tiếp"],[1089,"T chú thích mà bạn muốn"],[1090,"y là các bướ Vào chế độ cấu hình toàn cụ Vào chế độ cấu hình cổng Ethernet 0"],[1091,"Nhập lệnh description và theo sau Thoát khỏi chế độ cấu hình giao tiếp để cách nhấn phím Ctrl-Z"],[1092,"5"],[1093,"ưu lại cấu hình vừa rồi vào NVRAM bằn config"],[1094,"Sau đây là 2 ví"],[1095,"71 Interface Ethernet 0 Description LA Interface serial Description AB N Engineering, Bldg.2 0 C network 1, circuit 1 Hình 3.2.3 3.2.4"],[1096,"Thông điệp đăng nhập Thông điệp đăng nhập được hiển thị khi bạn đăng nhập vào hệ thống"],[1097,"Loại thông điệp này rất hữu dụng khi bạn cần cảnh báo trước khi đến giờ tắt hệ thống mạng"],[1098,"Tất cả mọi người đều có thể nhìn thấy thông điệp đăng nhập"],[1099,"Cho nên bạn nên dùng các thông điệp mạng tính cảnh báo, thu hút sự chú ý"],[1100,"Còn những thông điệp để \u201cchào đón\u201d mọi người đăng nhập vào router là không thích hợp lắm"],[1101,"Ví dụ một thông điệp như sau: \u201cThis is a secure system, authorized access only!\u201d (Đây là hệ thống được bảo mật, chỉ dành cho những người có thẩm quyền!) được sử dụng để cảnh báo những vị khách viếng thăm bất hợp pháp"],[1102,"LAB_A# conf Enter configuration commands, one per line"],[1103,"End with CNTL_Z LAB_A (config)# interface Ethernet 0 LAB_A (config-if)#description LAN Engineerinng, Bldg"],[1104,"2 ig terminal"],[1105,"72 Hình 3.2.4 3.2.5"],[1106,"Cấu hình thông điệp đăng nhập (MOTD) Hình 3.2.5 Th t nối vào router"],[1107,"u thông báo, kết thúc bằng cách nhập ký tự phân cách một lần nữa"],[1108,"Sau đây là các bước thực hiện để cấu hình thông điệp MOTD: 1"],[1109,"Vào chế độ cấu hình toàn cục bằng lệnh configure terminal 2"],[1110,"Nhập lệnh như sau: banner motd # The message of the day goes here #"],[1111,"3"],[1112,"Lưu cấu hình vừa rồi bằng lệnh copy running-config startup-config"],[1113,"3.2.6"],[1114,"Phân giải tên máy ông điệp MOTD có thể hiển thị trên tất vả các thiết bị đầu cuối kế Để cấu hình thông điệp MOTD bạn vào chế độ cấu hình toàn cục"],[1115,"Tại đây bạn dùng lệnh banner motd, cách một khoảng trắng, nhập ký tự phân cách ví dụ như ký tự #, rồi viết câ"],[1116,"73 Phân giải tên máy là quá trình máy tính phân giải từ tên mày thành địa chỉ IP tương ứng"],[1117,"Để có thể liên hệ với các thiết bị IP khác bằng tên thì các thiết bị mạng như router cũng cần phải có khả năng phân giải tên máy thành địa chỉ IP"],[1118,"Danh sách giữa tên máy và điạ chỉ IP tương ứng được gọi là bảng host"],[1119,"Bảng host có thể bao gồm tất cả các thiết bị mạng trong tổ chức của mình"],[1120,"Mỗi một địa chỉ IP có một tên máy tương ứng"],[1121,"Phần mềm Cisco IOS có một vùng đệm để lưu tên máy và địa chỉ tương ứng"],[1122,"Vùng bộ đệm này giúp cho quá trình phân giải tên thành địa chỉ được nhanh hơn"],[1123,"Tuy nhiên tên máy ở đây không giống như tên DNS, nó chỉ có ý nghĩa đối với router mà nó được cấu hình mà thôi"],[1124,"Người quản trị mạng có thể c u hình bảng host trên router với bất kỳ tên nào với IP nào và các thông tin này chỉ có ý nghĩa đối với router đó mà thôi"],[1125,"he following is an exemple of the configuration of a host table on a router: ấ T Router(config)#ip host Auckland 172.16.32.1 Router(config)#ip host Beirut 192.168.53.1 Router(config)#ip host Capetown 192.168.89.1 Router(config)#ip host Denver 10.202.8.1 Hình 3.2.6 3.2.7"],[1126,"Cấu hình bảng host tên cho các địa ế đây dùng lệnh ip host, theo sau là tên của thiết bị và tất ư vậy xạ với từ t có thể dùng lệnh ping hay telnet tới thiết bị đó bằng tên địa chỉ IP c hiện cấu bảng host: 1"],[1127,"Vào chế độ cấu hình toàn cục của router"],[1128,"2"],[1129,"Nhập lệnh ip host theo sau là tên của router và tất c địa chỉ IP của các n router đó"],[1130,"3"],[1131,"Tiếp tục nhập tên và địa chỉ IP tương ứng của các rou Để khai báo chỉ IP, đầu tiên bạn vào ch độ cấu hình toàn cục"],[1132,"Tại cả các IP của nó"],[1133,"Nh tên máy này sẽ ánh ng địa chỉ IP của các cổng rên thiết bị đó"],[1134,"Khi đó bạn của thiết bị hay tương ứng đều được"],[1135,"Sau đay là các bước thự cả cá cổng trê ter khác trong mạng"],[1136,"74 4"],[1137,"Lưu cấu hình vào NVRAM"],[1138,"ự hoạt động của hệ thống"],[1139,"m các công việc sau: Hình 3.2.7 3.2.8"],[1140,"Lập hồ sơ và lưu dự phòng tập tin cấu hình Tập tin cấu hình của các thiết bị mạng sẽ quyết định s Công việc quản lý tập tin cấu hình của các thiết bị bao gồ \u2022 L p danh sách và so sánh với tập tin cấu hình trên các thiết bị đang hoạt động"],[1141,"\u2022 Lưu dự phòng các tập tin cấu hình lênh server mạng"],[1142,"\u2022 Thực hiện cài đặt và nâng cấp các phần mềm"],[1143,"Chúng ta cần lưu dự phòng các tập tin cấu hình để sử dụng trong trường hợp có sự cố"],[1144,"Tập tin cấu hình có thể được lưu trên server mạng, ví dụ như TFTP server, hoặc là lưu trên đĩa và cất ở nơi an toàn"],[1145,"Ngoài ra chúng ta cũng nên lập hồ sơ đi kèm với các tập tin này"],[1146,"3.2.9"],[1147,"Cắt, dán và chỉnh sửa tập tin cấu hình Chúng ta có thể dùng lệnh copy running-config tftp để sao chép tập tin cấu hình đang chạy trên router vào TFTP server"],[1148,"Sau đây là các bước thực hiện: Bước 1: nhập lệnh copy running-config tftp"],[1149,"Bước 2: nhập địa chỉ IP của máy mà chúng ta sẽ lưu tập tin cấu hình lên đó"],[1150,"Bước 3: nhập tên tập tin"],[1151,"ậ"],[1152,"75 Bước 4: xác nhận lại câu lệnh bằng cách trả lời \u201cyes\u201d Hình 3.2.9a Chúng ta có thể sử dụng tập tin cấu hình lưu trên server mạng để cấu hình cho router"],[1153,"Để thực hiện điều này bạn làm theo các bước sau: ing-config"],[1154,"2"],[1155,"dấu nhắc tiếp theo bạn chọn loại tập tin cấu hình máy hay tập tin cấu hình mạng"],[1156,"Tập tin cấu hình mạng có chứa các lệnh có thể thực thi cho tất cả các o mà bạn đang lưu tập tin cấu hình trên đó"],[1157,"Ví dụ như trên hình nh cho loại tập tin cấu hình máy là hostname-config, còn tên mặc định cho loại tập tin cấu hình mạng là nfig"],[1158,"Trong môi trường DOS thì tên tập tin bị giới hạn với 8 ký tự 1"],[1159,"Nhập lênh copy tftp runn Ở router và server trong mạng"],[1160,"Còn loại tập tin cấu hình máy thì cỉh s các lệnh thực thi cho một router mà thôi"],[1161,"Ở dấu nhắc kế tiếp, bạn nhập địa chỉ IP của máy nà 3.2.9b: router được cấu hình từ TFTP server có địa chỉ IP là 131.108.2.155"],[1162,"3"],[1163,"Sau đó nhập tên của tập tin hoặc là chấp nhận lấy tên mặc định"],[1164,"Tên của tập tin theo quy tắc của UNIX"],[1165,"Tên mặc đị netword-co và 3 ký tự mở rộng (ví dụ như: router.cfg)"],[1166,"Cuối cùng bạn xác nhận lại tất cả các thông tin vừa rồi"],[1167,"Bạn lưu ý trên hình thì sẽ thấy là dấu nhắc chuyển"],[1168,"76 ngay sang tên Tokyo"],[1169,"Điều này chứng tỏ là router được cấu hình lại ngay sau khi tập tin cấu hình vừa được tải xuống"],[1170,"Tập tin cấu hình trên router cũng có thể được lưu vào đĩa bằng cách sao chép dưới dạng văn bản rồi lưu vào đĩa mềm hoặc đĩa cứng"],[1171,"Khi nào cần chép trở lại rouer thì bạn dùng chức năng soạn thảo cơ bản của chương trình mô phỏng thiết bị đầu cuối để cắt dán các dòng lệnh vào router"],[1172,"H y là phần tổng kế hính mà bạn cần nắm khi cấu hình router"],[1173,"ế độ sa EC ng \u2022 Chế độ EXEC đặ t ì ng giao d thực hiện một số thay đổi cho như ho route ình 3.2.9b TỔNG KẾT CHƯƠNG Sau đâ t các ý c Router có các ch u: \u2022 Chế độ EX ười dùng"],[1174,"c quyền"],[1175,"\u2022 Chế độ cấu hình ấu h oàn cục"],[1176,"\u2022 Các chế độ c nh khác"],[1177,"Bạn có thể dù iện dòng lệnh của router để cấu hình của router : \u2022 Đặt tên c r"],[1178,""],[1179,"77 \u2022 Đặt mật mã cho r hình các cổn \u2022 Chỉnh sửa tập tin \u2022 Hiển thị tập tin cấu hình"],[1180,"trọng giúp cho người quản trị mạng nắm được cấu trúc hệ thống mạng và xử ười dùng khi họ outer"],[1181,"\u2022 Cấu g giao tiếp trên router"],[1182,"cấu hình"],[1183,"Ngoài ra, bạn cần nhớ một số điểm quan trọng sau: \u2022 Xây dựng một cấu hình chuẩn là yếu tố quan trọng để thành công trong việc bảo trì bất kỳ hệ thống mạng của một tổ chức nào"],[1184,"\u2022 Câu chú thích cho các cổng giao tiếp có thể mang một số thông tin quan lý sự cố nhanh hơn"],[1185,"\u2022 Thông điệp đăng nhập sẽ cung cấp các thông báo cho ng đăng nhập vào router"],[1186,"\u2022 Phân giải tên máy thành địa chỉ IP cho phép router có thể chuyển đổi nhanh từ máy ra địa chỉ"],[1187,"\u2022 Công việc lập hồ sơ và lưu dự phòng tập tin cấu hình là hết sức quan trọng để bảo đảm cho hệ thống mạng luôn hoạt động thông suốt"],[1188,""],[1189,"78 CHƯƠNG 4 CẬP NHẬT THÔNG TIN TỪ CÁC THIẾT BỊ KHÁC GIỚI THIỆU Đôi khi người quản trị mạng sẽ phải xử lý những hệ thống mạng mà không có hồ sơ đầy đủ và chính xác"],[1190,"Trong những tình huống như vậy thì giao thức CDP-Cisco Discovery Protocol sẽ là một công cụ rất hữu ích giúp bạn xây dựng được cấu trúc cơ bản về hệ thống mạng"],[1191,"CDP là một giao thức hoạt động không phụ thuộc vào môi trường truyền của mạng, giao thức này là độc quyền của Cisco được sử dụng để phát hiện các thiết bị xung quanh"],[1192,"CDP sẽ hiển thị thông tin về các thiết bị kết nối trực tiếp mà bạn đang xử lý"],[1193,"Tuy nhiên đây không phải là một công cụ thực sự mạng"],[1194,"Trong nhiều trường hợp, sau khi router đã được cấu hình và đi vào hoạt đông thị nhà quản trị mạng sẽ khó có thể kế vào router để cấu hình hay làm gì u mạng của các thiết bị lân cận bằng cách sử dụng CDP"],[1195,"\u2022 Thiết lập kết nối Telnet"],[1196,"\u2022 Kiểm tra kết nối Telnet"],[1197,"4.1 cận t nối trực tiếp khác"],[1198,"Khi đó, Telnet, là một ứng dụng của TCP/IP, sẽ giúp người quản trị mạng thiết lập kết nối từ xa vào chế độ giao tiếp dòng lệnh (CLI) của router để xem, cấ hình và xử lý sự cố"],[1199,"Đây là một công cụ chủ yếu của các chuyên gia mạng"],[1200,"Sau khi hoàn tất chương này, các bạn sẽ nắm được các kiến thức sau: \u2022 Bật và tắt CDP"],[1201,"\u2022 Cách sử dụng lệnh show cdp neighbors"],[1202,"\u2022 Cách xác định các thiết bị lân cận kết nối vào cổng giao tiếp"],[1203,"\u2022 Ghi nhận thông tin về địa chỉ \u2022 Kết thúc phiên Telnet"],[1204,"\u2022 Tạm ngưng một phiên Telnet"],[1205,"\u2022 Thực hiện các kiểm tra kết nối khác"],[1206,"\u2022 Xử lý sự cố với các kết nối từ xa"],[1207,""],[1208,"Kết nối và khám phá các thiết bị lân 4.1.1"],[1209,"Giới thiệu về CDP"],[1210,"79 TCP/IP Novell IPX AppleTalk Others CDP discovers and shows information about directtl connected Cisco devices LANS Frame Relay ATM Others Hình 4.1.1 CDP là giao thức lớp 2 kết nối với lớp vật lý ở dưới và lớp mạng ở trên như hình vẽ"],[1211,"CDP được sử dụng để thu thập thông tin từ các thiết bị lân cận, ví dụ như thiết mạng và có thể ập mạng con SNAP Phi từ i bản 10 hiên bản 1)"],[1212,"và cho phép thiết bị dò tìm các ệu và cho nhau cho dù 2 thiết bị này có thể chạy giao thức lớp mạng khác nhau"],[1213,"Mỗi thiết bị được cấu hình CDP sẽ gửi một thông điệp quảng cáo theo định kỳ cho các router khác"],[1214,"Mỗi thông điệp như vậy phải có ít nhất một địa chỉ mà thiết bị đó có thể nhận được thông điệp của giao thức quản lý mạng cơ bản SNMP (Simple Network Management Protocol) thông qua địa chỉ đó"],[1215,"Ngoài ra, mỗi thông điệp quảng cáo còn có \u201cthời hạn sống\u201d hoặc là thời hạn lưu giữ thông tin"],[1216,"Đây là khoảng thời gian cho các thiết bị lưu giữ thông tin nhận được trước khi xoá bỏ thông tin đó đi"],[1217,"Bên cạnh việc phát thông điệp, mỗi thiết bị cũng lắng nghe theo bị đó là loại thiết bị nào, trên thiết bị đó cổng nào là cổng kết nối và kết nối vào cổng nào trên thiết bị của chúng ta, phiên bản phần cứng của thiết bị đó là gì\u2026CDP là giao thức hoạt động độc lập với môi trường truyền chạy trên tất cả các thiết bị của Cisco trên nền giao thức truy c (Subnet Access Protocol)"],[1218,"ê ) là phiên bản mới nhất của giao thức này"],[1219,"Cisco IOS ph ên bản 12.0(3)T trở đi có hỗ trợ CDPv2"],[1220,"Mặc định thì Cisco IOS (từ phiên .3 đến 12.0(3) chạy CDP p n bản 2 của CDP (CDPv2 Khi thiết bị Cisco được bật lên, CDP tự động hoạt động thiết bị lân cận khác cùng chạy CDP"],[1221,"CDP hoạt động ở lớp liên kết dữ li phép 2 thiết bị thu thập thông tin lẫn"],[1222,"80 định kỳ để nhận thông điệp từ các thiết bị lân cận khac để thu thập thông tin về chúng"],[1223,"4.1.2"],[1224,"Thông tin thu nhận được từ CDP CDP được sử dụng chủ yếu để phát hiện tất cả các thiết bị Cisco khác kết nối trực tiếp vào thiết bị của chúng ta"],[1225,"Bạn sử dụng lênh show cdp neighbors để hiển thị thông tin về các mạng kết nối trực tiếp vào router"],[1226,"CDP cung cấp thông tin về từng thiết bị CDP láng giềng bằng cách truyền thông báo CDP mang theo cac giá trị \u201ctype length\u201d (TLVs)"],[1227,"TLVs được hiển thị bởi lệnh show cdp neighbors sẽ bao gồm các thông tin về: \u2022 Device ID: Chỉ số danh định (ID) của thiết bị láng giềng"],[1228,"al rface: Cổng trên thiết bị của chúng ta kết nối đến thiết bị l ng giềng, \u2022 Hold time: thời hạn lưu giữ th hật"],[1229,"n quản lý của VTP (chỉ có ở rên router (chỉ có ở CDPv2)"],[1230,"ng kết nối trực tiếp vàp router mà tiếp với router đó"],[1231,"\u2022 Loc inte á ông tin cập n \u2022 Capability: loại thiết bị"],[1232,"\u2022 Platform: phiên bản phần cứng của thiết bị"],[1233,"\u2022 Port ID: chỉ số danh định (ID) của cổng trên thiết bị láng giềng kết nối vào thiết bị của chúng ta"],[1234,"\u2022 VTP management domain name: tên miề CDPv2)"],[1235,"\u2022 Native VLAN: VLAN mặc định t \u2022 Half/Full duplex: chế độ hoạt động song công hay bán song công"],[1236,"Trong hình 4.1.2, router ở vị trí thấp nhất khô người quản trị mạng đang thực hiện kết nối console"],[1237,"Do đó để xem được các thông tin CDP của router này, người quản trị mạng phải Telnet vào router kết nối trực"],[1238,"81 Hình 4.1.2 4.1.3"],[1239,"Chạy CDP, kiểm tra và ghi nhận các thông tin CDP Lệnh Chế độ cấu hình của router để thực hiện câu lệnh Chức năng của câu lệnh Cdp run Chế độ cấu hình toàn cục Khởi động cdp trên router"],[1240,"Cdp enable Chệ đ cổng giao tiếp"],[1241,"Khởi động CDP trên cổng giao tiếp tương ứng ộ cấu hình Clear cdp counters Chế độ EXEC người dùng Xoá đòng hồ đếm lưu lượng trở về 0 Show cdp entry (&/device-name [*][protocol/version]) Chế độ EXEC đặc quyền Hiển thị thông tin về một thiết bị láng giềng mà ta cân"],[1242,"Thông tin hiển thị thể được giới hạn thoe có giao thức hay theo phiên bản"],[1243,"Show cdp Chế độ EXEC đặc quyền Hiển thị khoảng thời gian giữa các lần phát thông"],[1244,"82 điệp quảng cáo CDP, số phiên bản và thời gian còn hiệu lực của các thông điệp này trên từng cổng của router"],[1245,"Show cdp interface [type number] Chế độ EXEC đặc quyền Hiển thị thông tin về những cổng có chạy CDP Show cdp neighbors [type number] [detial] Chế độ EXEC đặc quyền Hiển thị các thông tin về những thiết bị mà CDP phát hiện được: loại thiết bị, tên thiết bị, thiết bị đó kết nối vào cổng nào trên thiết bị của chúng ta"],[1246,"Nếu bạn có sử dụng từ khoá công, tên miền VTP"],[1247,"detail thị ban sẽ có thêm thông tin về VLAN ID, chế độ hoạt động song"],[1248,"83 Hình 4.1.3a Hình 4.1.3b Hình 4.1.3c"],[1249,"84 Hình 4.1.3d Hình 4.1.3e 4.1.4"],[1250,"Xây dựng bản đồ mạng"],[1251,"85 CDP là một giao thức được thiết kế và hoạt động khá nhẹ, đơn giản"],[1252,"Các gói CDP có kích thước nhỏ nhưng lại mang nhiều thông tin hữu ích về các thiết bị láng giề Bạ ó ựng sơ đồ mạng của các thiết bị"],[1253,"Bạn có tiếp cá 4.1.5"],[1254,"Tắt CDP Để ắt toàn bộ CDP trên router, bạn dùng lệnh no cdp run chế độ cấu hình toàn cục"],[1255,"Khi bạn đã tắt toàn bộ CDP thì không có cổng nào trên router còn chạy được"],[1256,"Đối với Cisco IOS phiên bản 10.3 trở đi, CDP chạy mặc định trên tất cả các cổng có thể gửi và nhận thông tin CDP"],[1257,"Tuy nhiên cũng có một số cổng như cổng Asynchronous chẳng hạn thì mặc định là CDP tắt trên các cổng này"],[1258,"Nếu CDP đang bị tắt trên một cổng nào đó thì bạn có thể khởi động lại CDP bằng lệnh cdp enable trong chế độ cấu hình cổng giao tiếp tương ứng"],[1259,"Còn nếu bạn muốn tắt CD trên một cổng nào đó thì bạn dùng lệnh no cdp enable trong chế độ cấu hình cổng đó"],[1260,"ng Cisco"],[1261,"n c thể sử dụng các thông tin này để xây d thể Telnet vào các thiết bị láng giềng rồi dùng lệnh show cdp neighbors để tìm c thiết bị khác kết nối vào thiết bị này"],[1262,"t P Hình 4.1.5 4.1"],[1263,"X6"],[1264,"ử lý sự cố của CDP"],[1265,"86 Lệnh Mô tả Clear c g giềng dp table Xoá bảng thông tin của CDP về các thiết bị lán Clear cdp counters Xoá bộ đếm lưu lượng trở về 0"],[1266,"Show c dp traffic Hiển thị bộ đếm của CDP, bao gồm số lượng gói CDP gửi và nhận, số lượng lỗi checksum Show d c loại debug đang chạy trên router ebugging Hiển thị thông tin về cá Debug cdp adjacency Kiểm tra thông tin CDP về các thiết bị láng giềng Debug cdp events Kiểm tra các hoạt động của CDP Deb g cdp ip Kiểm tra thông tin CDP IP u Debug dp packets Kiểm tra thông tin về các gói CDP c Cdp timer Cài đặt thời gian định kỳ gửi gói CDP cập nhật Cdp holdtime Cài đặt thời gian lưu giữ thông tin cho các gói CDP cập nhật được phát đi Show dp Hiển thị thông tin toàn cục của CDP, bao gồm thời gian điịnh cập nhật và thời gian lưu giữ thông tin c 4.2"],[1267,"Th thập thông tin về các thiết bị ở xa 4.2.1"],[1268,"elnet Telnet là giao thức giả lập đầu cuối ảo nằm trong bộ giao thức TCP/IP"],[1269,"Nó cho phép thiết lập kết nối từ xa vào thiết bị"],[1270,"Lệnh Telnet được sử dụng để kiểm tra hoạt động p ần mềm ở lớp ứng dụng giữa 2 máy"],[1271,"Telnet hoạt động ở lớp ứng dụng của mô hình OSI"],[1272,"Telnet hoạt động dựa trên cơ chế CP để đảm bảo việc truyền dữ liệu giữa client và các server"],[1273,"ột router có thể cho phép thực hiện đồng thời nhiều phiên kết nối Telnet"],[1274,"Đường vty 0-4 trên router là đường dành cho Telnet"],[1275,"5 đường Telnet này có thể thực hiện ùng lúc"],[1276,"Chúng ta cần lưu ý rằng việc sử dụng Telnet để kiểm tra kết nối lớp ứng ụng chỉ là việc phụ"],[1277,"Telnet được sử dụng chủ yếu để thiết lập kết nối từ xa vào thiết bị"],[1278,"Telnet là một chương trình ứng dụng đơn giản và thông dụng nhất"],[1279,"u T h T M c d"],[1280,"87 Hình 4.21"],[1281,"4.2.2"],[1282,"Thiết lập và kiểm tra kết nối Telnet Lện T thiết b kết nố muốn Để thi ng các lệnh sau: Denve Denve Denve Denve h elnet cho phép người dùng thực hiện Telnet từ một thiết bị Cisco này sang ị khác"],[1283,"Chúng ta không cần phải nhập lệnh connect hay telnet để thiết lập i Telnet mà chúng ta có thể nhập tên hoặc địa chỉ IP của router mà chúng ta Telnet vào"],[1284,"Khi kết thúc phiên Telnet, bạn dùng lệnh exit hoặc logout"],[1285,"ết lập kết nối Telnet, bạn dùng một tro r>connect paris r>paris r>131.108.100.152 r>telnet paris"],[1286,"88 Hình 4.2.2a giải t buộc bạn phải dùng địa chỉ IP"],[1287,"i từ xa vào một router hay độ EXEC người dùng và ạn có thể truy cập từ xa vào router thi có nghĩa là đã có ít nhất một ứng dụng Một kết nối Telnet thành công chứng tỏ rằng Router cần phải có bảng host hoặc là trong mạng phải có dịch vụ DNS phân tên máy mà chúng ta nhập vào"],[1288,"Nếu không thì bắ Telnet được sử dụng để kiểm tra xem bạn có thể kết nố hông"],[1289,"Ví dụ như hình 4.2.2b: nếu bạn Telnet ở chế k EXEC đặc quyền đều được"],[1290,"ếu bN TCP/IP kết nối vào được router đó"],[1291,"các ứng dụng lớp trên hoạt động tốt"],[1292,""],[1293,"89 Hình 4.2.2b Nếu bạn có thể Telnet vào một router này mà không Telnet hì có thể sự cố là do sai tên, địa chỉ hoặc do cấp quyền truy c vào được router khác ập"],[1294,"Sai sót có thể nằm ằm ở router mà bạn Telnet tới"],[1295,"Trong trường hợp ày, bước tiếp theo bạn nên cố gắng ping thử"],[1296,"Lệnh ping cho phép chúng ta kiểm tra kết nối ở lớp Mạng từ đầu đến cuối"],[1297,"ngưng một phiên Telnet"],[1298,"Tuy một router khác"],[1299,"Điều này router"],[1300,"Do đó bạn cần chú ý cẩn th ng phiên Telnet trên router đó"],[1301,"Mỗ gưng trong một khoảng thời gian giới hạn"],[1302,"Để qua t n phím Enter"],[1303,"Bạn t ở router mà bạn đang xủ lý hoặc n n Khi bạn đã Telnet xong, bạn có thể ngắt kết nối"],[1304,"Mặc định thì sau 10 phút mà không có bất kỳ hoạt động nào kết nối Telnet sẽ tự động ngắt"],[1305,"Hoặc là bạn có thể ngắt kết nối Telnet bằng lệnh exit"],[1306,"4.2.3"],[1307,"Ngắt, tạm ngưng phiên Telnet Telnet có một đặc tính quan trọng là bạn có thể tạm nhiên có một rắc rối là khi bạn sử dụng phím enter sau khi tạm ngưng phiên Telnet thì phần mềm Cisco IOS sẽ tự động quay trở lại kết nối Telnet vừa mới tạm ngưng trước đó"],[1308,"Mà phím enter là phím rất hay được sử dụng"],[1309,"Do đó khi bạn tạm ngưng một phiên Telnet thì rất có thể sau đó bạn sẽ kết nối lại vào rất nguy hiểm khi bạn thực hiện thay đổi cấu hình ận cấu hình của router trước khi tạm ngư i một phiên Telnet chỉ được tạm n y rở lại kết nối Telnet mà bạn đã tạm ngưng bạn chỉ cần nhấ dùng lệnh show session để xem các kết nối Telnet đang được mở"],[1310,""],[1311,"90 Sau đây là trình tự các bước để bạn ngắt kết nối Telnet: \u2022 Nhập lệnh disconnect"],[1312,"\u2022 Tiếp theo sau lệnh này là tên hoặc địa chỉ IP của router"],[1313,"Ví dụ: Denver>disconnect paris g phiên Telnet: ng lúc, buông ra rồi nhấn tiếp chữ x"],[1314,"Sau đây là các bước thực hiện tạm ngưn \u2022 Nhấn tổ hợp phím Ctrl-Shift-6 cù \u2022 Nhập tên hoặc địa chỉ IP của router"],[1315,"Hình 4.2.3 ể mở nhiều phiên Telnet cùng lúc"],[1316,"Chúng ta có thể chuyển đổi qua 4.2.4"],[1317,"Mở rộng thêm về hoạt động Telnet Trên router có th lại giữa các phiên Telnet này"],[1318,"Bạn có thể ấn định số lượng phiên Telnet được phép mở đồng thời trên router bằng lệnh session limit"],[1319,"Để chuyển đổi qua lại giữa các phiên Telnet, bạn tạm ngưng phiên Telnet hiện tại và quay trở lại phiên mới mở trước đó"],[1320,"Nhấn tổ hợp phím Ctrl-Shift-6 cùng lúc, buông ra rồi nhấn tiếp chữ x: tạm thoát khỏi kết nối hiện tại, quay lại dấu nhắc EXEC"],[1321,""],[1322,"91 Tại dấu nhắc EXEC, bạn có thể thiết lập phiên kết nối mới"],[1323,"Router 2500 chỉ cho phép mở 5 phiên Telnet cùng lúc"],[1324,"Bạn có thể mở nhiều phiên Telnet cùng lúc và tạm ngưng bẳng tổ hợp phím Ctrl- Shift-6, x"],[1325,"Nếu bạn dùng phím Enter thì Cisco IOS sẽ tự động quay lại kết nối vừa mới tạm ngưng trước đó"],[1326,"Còn nếu bạn dùng lệnh resume thì bạn phải nhập thêm chỉ số ID bằng lệnh show session"],[1327,"Hình 4.2.4 4.2.5"],[1328,"Các lệnh kiểm tra kết nối khác Để hỗ trợ việc kiểm tra nối mạng cơ bản, nhiều giao thức mạng có hỗ trợ giao dụng để kiểm tra việc định tuyến ệu"],[1329,"n gửi đi một gói dữ liệu tới máy đích và chờ i trả lời độ tin cậy của đích có đến đượ tra kết nối ng hày EXEC uyền đều đ thức phản hồi (echo)"],[1330,"Giao thức phản hồi được sử các gói dữ li Lệnh ping thực hiệ nhận gó vè từ máy đích"],[1331,"Kết quả của giao thức phản hồi giúp bạn xác định đường truyền tới máy đích, thời gian trễ trên đường truyền, máy c hay không, có hoạt động hay không"],[1332,"Lệnh ping là lệnh cơ bản để ở chế độ EXEC người dùkiểm"],[1333,"Bạn có thể dùng lệnh này đặc q ược"],[1334,""],[1335,"92 Hình 4.2.5a Hình 4.2.5a là ví dụ cho biết phản hồi hà gói gửi đi của lệnh ping p hận được m đã et Control Message Protocol \u2013 giao t)"],[1336,"ệu trên ing thì chỉ ra kết nối từ đầu cuối đến đầu cuối, còn lệnh traceroute thì kiểm tra từng ường truyền"],[1337,"Bạn có thể thực hiện lệnh traceroute ở chế độ EXEC người dùng hay EXEC đặc q c"],[1338,"ay vì tên của router đó"],[1339,"Trong traceroute vẫn sẽ tiếp tục cố gắng gửi đến trạm kế tiếp ợp phím Ctrl-shift-6"],[1340,"nh công cho 5 172.16.1.5"],[1341,"Dấu chấm than (!) cho biết là chấ hản hồi thành công"],[1342,"Nếu bạn n nghĩa là router một hay nhiều dấu chấm thay vì dấu than (!) thì điều đó có hết thời gian chờ gói phản hồi từ máy đí (Intern ch"],[1343,"Lệnh ping sử dụng giao thức ICMP thức thông điệp điều khiển interne Lệnh traceroute là một công cụ lý tưởng để bạn tìm đường đi của gói dữ li mạng"],[1344,"Lệnh traceroute cũng tương tự như kiểm t lệnh ping, chỉ khác là lệnh p chặng một dọc theo đ uyền đều đựơ Trong ví dụ ở hình 4.2.5b, bạn thực hiện lệnh traceroute từ router York đến router Rome"],[1345,"Đường truyền này phải đi qua router London và Paris"],[1346,"Nếu có router nào không đến được thì kết quả phản hồi là dấu sao (*) th trường hợp như vậy, lệnh cho đến khi bạn nhấn tổ h"],[1347,"93 Hình 4.2.5b iểm tra cơ bản cũng tập trung chủ yếu vào lớp Mạng"],[1348,"Bạn dùng lệnh show te để kiểm tra bảng định tuyến của router cho hệ thống mạng"],[1349,"Lệnh này sẽ ề cập chi tiết h Việc k ip rou đượ đ Sau ping: hấn phím Enter"],[1350,"ề địa chỉ IP ự cố về địa chỉ là sự cố xảy ra phổ biến nhất trong mạng IP"],[1351,"Sau đây là 3 lệnh thường được sử dụng để xử lý các sự cố liên quan đến địa chỉ: \u2022 Ping: sử dụng giao thức ICMP để kiểm tra kết nối vật lý và địa chỉ IP của lớp Mạng"],[1352,"Đây là lệnh kiểm tra cơ bản"],[1353,"c ơn trong chưong sau"],[1354,"đây là các bước thực hiện \u2022 Nhập lệnh ping, theo sau là địa chỉ IP hoặc tên của máy đích"],[1355,"\u2022 Nhấn phím Enter"],[1356,"Sau đây là các bước thực hiện lệnh traceroute: \u2022 Nhập lệnh traceroute, theo sau là địa chỉ IP hoặc tên của máy đích"],[1357,"\u2022 N 4.2.6"],[1358,"Xử lý sự cố v S"],[1359,"94 \u2022 Telnet: kiểm tra kết nối phần mềm lớp Ứng dụng giữa nguồn và máy đích"],[1360,"lệnh kiểm tra kết nối hoàn chỉnh"],[1361,"cho phép xác định vị trí lỗi trên đường truyền từ máy nguồn rị Time to Live để tạo thông điệp từ bằng cách sử dụng CDP"],[1362,"\u2022 Kết thúc kết nối Telnet"],[1363,"xa"],[1364,"Đây là \u2022 Traceroute: đến máy đích"],[1365,"Lệnh trace sử dụng giá t mỗi router trên đường truyền"],[1366,"TỔNG KẾT Kết thúc chương này bạn cần nắm được những ý chính như sau: \u2022 Mở và tắt CDP \u2022 Sử dụng lệnh show cdp neighbors"],[1367,"\u2022 Xác định được các thiết bị láng giềng kết nối vào các cổng trên thiết bị của mình"],[1368,"\u2022 Thu nhập thông tin về các thiết bị láng giềng \u2022 Thiết lập kết nối Telnet"],[1369,"\u2022 Tạm ngưng kết nối Telnet"],[1370,"\u2022 Thực hiện kiểm tra kết nối"],[1371,"\u2022 Xử lý sự cố của kết nối đầu cuối từ"],[1372,"95 CHƯƠNG 5 QUẢN LÝ PHẦN MỀM CISCO IOS GIỚI THIỆU Cisco router không thể hoạt động được nếu không có hệ điều hành mạng Cisco (IOS)"],[1373,"Mỗi router trong quá trình khởi động đều có bước tìm và tải IOS"],[1374,"Chương này sẽ mô tả chi tiết các bước khởi động của router và cho bạn thấy tầm quan trọng của quá trình này"],[1375,"Các thiết bị mạng Cisco hoạt động với nhiều loại tập tin khác nhau, trong đó có hệ điều hành và tập tin cấu hình"],[1376,"Người quản trị mạng hay bất kỳ ai muốn quản trị cho hệ thống mạng hoạt động trôi chảy và tin cậy thì để phải bảo trì các tập tin này cẩn thận, bảo đảm rằng thiết bị đang chạy đúng phiên bản phần mềm và các tập tin hệ thống của Cisco và các công cụ hữu n lý các tập tin này"],[1377,"Khi hoàn tất chương này , các bạn có thể t c hiện được những việc sau: \u2022 Xác định được router đang ở của quá trình khởi động"],[1378,"IOS như thế nào"],[1379,"\u2022 Sử dụng các lệnh boot system"],[1380,"odem"],[1381,"ống bằng các lệnh show"],[1382,"hi bắt đầu bật điện ủa dụng để quả hự giai đoạn nào \u2022 Xác định được các thiết bị Cisco tìm và tải Cisco \u2022 Xác định giá trị của thanh ghi cấu hình"],[1383,"\u2022 Mô tả khái quát các tập tin mà Cisco IOS sử dụng và chức năng tương ứng của chúng"],[1384,"\u2022 Nắm được nơi mà router lưu các loại tập tin khác nhau"],[1385,"\u2022 Mô tả khái quát cấu trúc tên của IOS"],[1386,"\u2022 Lưu và khôi phục tập tin cấu hình bằng cách sử dụng TFTP và cắt \u2013 dán"],[1387,"\u2022 Tải IOS bằng TFTP"],[1388,"\u2022 Tải IOS bằng Xm \u2022 Kiểm tra tập tin hệ th 5.1"],[1389,"Khảo sát và kiểm tra quá trình khởi động router 5.1.1"],[1390,"Các giai đoạn khởi động router k Mục tiêu chính của quá trình khởi động router là khởi động các hoạt động c router"],[1391,"Router phải hoạt động với độ tin cậy cao để thực hiện kết nối cho bất kỳ"],[1392,"96 loại mạng nào"],[1393,"Do đó, quá trình khởi động router phải thực hiện các công việc như \u2022 Kiểm tra phần cứng của router i phần mềm Cisco IOS thì khác nhau tuỳ theo phiên bản phần ta có thể cấu hình hoặc router sẽ sử dụng quá trình tìm và tải phầ Giá trị OS như sau: S"],[1394,"Router sẽ sử dụng các câu lệnh này theo thứ tự khi khởi động"],[1395,"sau: \u2022 Tìm và tải phần mềm Cisco IOS"],[1396,"\u2022 Tìm và thực hiện các câu lệnh cấu hình, trong đó bao gồm các cấu hình giao thức và địa chỉ cho các cổng giao tiếp"],[1397,"ROM Bootstrap Load bootstrap Hệ điều hành mạng Cisco 5.1.2"],[1398,"Thiết bị Cisco tìm và tải như thế nào Nguồn mặc định tả cứng của thiết bị, nhưng hầu hết các router đều tìm lệnh boot system lưu trong NVRAM"],[1399,"Phần mềm Cisco IOS có thế được tải từ nhiều nguồn khác nhau"],[1400,"Những nguồn này chúng n mềm mặc định của nó"],[1401,"cài đặt cho thanh ghi cấu hình sẽ cho phép router tìm I \u2022 Lệnh boot system cấu hình cho router nơi mà router tìm để tỉa IO Flash TFTP Server ROM Tìm và tải hệ điều hành Tập tin cấu hình Tìm và tải tập tin cấu hình hoặc vào NVRAM TFTP Server chế độ cài đặt Console"],[1402,"97 \u2022 Nếu trong NVRAM không có các câu lệnh boot system thì \u2022 bộ nhớ flash cũng không có IOS thì router sẽ cố n lưu trên server mạng"],[1403,"hệ thống sẽ mặc định là sử dụng Cisco IOS trong bộ nhớ flash"],[1404,"Nếu trong gắng sử dụng TFTP để tải IOS về"],[1405,"Router sẽ sử dụng giá trị cài đặt cấu hình để biết tên tập ti Router# configure terminal Router(config)# boot system flash IOS_filename Router(config)# boot system tftp IOS_filename tftp_address Router(config)# boot system ROM [Ctrl-Z] Router# copy running-config startup-config Không tìm thấy lệnh boot system trong NVRAM"],[1406,"Tải Cisco IOS mặcđịnh trong bộ nhớ Flash"],[1407,"Bộ nhớ Flash không có IOS"],[1408,"Tải Cisco IOS mặc định từ TFTP server"],[1409,"Cài đặt thanh ghi cấu hình, lưu trong NVRAM, giá trị cài đặt cho thanh ghi cấu hình khác nhau sẽ cho phép router xác định vị trí tải IOS khác nhau"],[1410,"98 5.1.3 Sử dụng lệnh boot system 5.1.4 Hình 5.1.3Sử dụng lệnh boot system Thứ tự các vị trí mà router tìm hệ điều hành được cài đặt trong phần khởi động của thanh ghi cấu hình"],[1411,"Giá trị mặc định của thanh ghi cấu hình có thể thay đổi bằng lệnh config-register trong chế độ cấu hình toàn cục"],[1412,"Thông số của lệnh này sủ i cấu hình thể hiện cho phần khởi động router"],[1413,"Đầu tiên, ta dùng lệnh show version để xem giá trị hiện tại của thanh ghi cấu hình và cúng để đảm bảo là giá trị của 12 trên không có gì thay đổi"],[1414,"Sau đó ta dùng lệnh cònig-register để thay đổi giá trị cho thanh ghi, ta chỉ cần đổi giá trị của số hex cuối cùng mà thôi"],[1415,"Ta thay đổi giá trị phần khởi động của thanh ghi cấu hình theo hướng dẫn sau: \u2022 Để router khởi động vào chế độ ROM monitor, ta đặt giá trị cho thanh ghi cấu hình là 0xnnn0, trong đó nnn là giá trị của 12 bit trên, không thuộc phần khởi động"],[1416,"Còn 0 là gia trj của phần khởi động trên thanh ghi cấu hình, do đó 4 bit phần này có giá trị nhị phân là 0000"],[1417,"Từ chế độ ROM monitor, ta có thể khởi động hệ thống bằng lệnh b"],[1418,"\u2022 Để cấu hình cho hệ thống tự động khởi động từ ROM, ta đặt giá trị cho thanh ghi cấu hình là 0xnnn1, trong đó nnn là giá trị của 12 bit trên, không thuộc phần khởi động"],[1419,"Còn 1 a 4 bit phần khởi động trên thanh ghi cấu hình, như vậy 4 bit nà hị phân là 0001"],[1420,"\u2022 Để cấu hình cho hệ thống sử dụng cac câu lệnh boot system trong NVRAM, ấu hìnn bất kỳ giá trị nào nằm trong khỏng t trong phần khởi động của thanh ghi cấu hình đụng số hex"],[1421,"Thanh ghi cấu hình là thanh ghi 16 bi lưu trong NVRAM"],[1422,"4 bit thấp của thanh gh là giá trị củ y có giá trị n ta đặt giá trị cho thanh ghi c 0xnnn2 \u2013 0xnnnF"],[1423,"Khi đó, 4 bi sẽ có giá trị nhị phân là 0010-1111"],[1424,"Mặc định gia trị thanh ghi là 0x2102 và router sử dụng lệnh boot system trong NVRAM"],[1425,"5.1.5 Sử dụng lệnh boot system Khi router không khởi động được thì có thể là do một trong những nguyên nhân sau:"],[1426,"99 \u2022 Mất tập tin cấu hình hoặc câu lệnh boot system bị sai"],[1427,"\u2022 Giá trị thanh ghi cấu hình bị sai"],[1428,"\u2022 Bộ nhớ flash bị trục trặc"],[1429,"Sử dụng lệnh show running-config và tìm câu lệnh boot system nằm ở ngay Router#show version System image file is \u201cflash:c2600-jk8o3s-mz.122-17a.bin\u201d This product contains cryptographi subject to United States and local y laus"],[1430,"By using this product, , return this product immediately"],[1431,"\u2022 Hư hỏng phần cứng"],[1432,"Khi router khởi động, router sẽ tìm câu lệnh boot system trong tập tin cấu hình"],[1433,"Lệnh boot system có thể cài đặt cho router khởi động từ IOS khác thay vì từ IOS trong flash"],[1434,"Để xác định xem router khởi động từ IOS nào, bạn dùng lệnh show version và tìm dòng nói về phần mềm khởi động hệ thống"],[1435,"phần đầu của tập tin cấu hình"],[1436,"Nếu câu lệnh boot system chỉ sai IOS thì chúng ta xoá lệnh đó đi bằng lệnh \u201cno\u201d của câu lệnh đó"],[1437,"Cisco Interface Operating System Software IOS (tm) C2600 Software (C2600-JK803S-M), Version 12.2 (17a), RELEASE SOFTWARE (fc1) Copyright (c) 1986-2006 by Cisco System, Inc Complie Thu 19-Jun-03 16:35 by pwade Image text-base: 0x8000808C, data-base: 0x815F7B34 ROM: System Bootstrap, Version 12.2 (7r) [cmong 7r], RELEASE SOFTWARE fc1) Danang uptime is 1 hour, 2 minutes System returned to ROM by power-on c features and country laws goverining import, export, transfer and use"],[1438,"Delivery of Cisco cryptographic product does not imply third-party authority to import, export, distribute or use encryption"],[1439,"Importers, exporters, distributors and users are responsible for compliance with US and local coutr you compliance with US and local laws A summary of US laws governing Cisco cryptographic products may be found at: http://www.cisco.com/wwl/export/crypto/tool/stqrg.html"],[1440,"100 If you require further assistance please contact us by sending email to export@cisco.com Cisco 2620XM (MOC860P) professor (revision 0x100) with 59392K/6144K bytes of memory Processor board ID JAE0718065A (41148118384) M860 processor: part number 5, mask 2 Bridging software X25 software, Version 3.0.0 Super LAT software (copyright 1990 by Meridian Technology Corp) TN3270 Emulation software Basic Rae ISDN software, Version 1.1"],[1441,"1 FastEthernet/IEEE 802.3 interface(s) 2 Low-speed serial (sync/async) network interface(s) 1 ISDN Basic Rate interface(s) 32K bytes of non-voltatile configuration memory"],[1442,"16384K bytes of processor board System flash (Read/Write) Configuration register is 0x2102 Giá trị thanh ghi cấu hình không đúng cũng dẫn đến việc router không tải được IOS vì gia trị thanh ghi nà từ đâu"],[1443,"Chúng ta kiểm tra iá trị thanh ghi bằng lệnh show version và đọc dòng cuối cùng trong kết quả hiển ị của lệnh này"],[1444,"Giá trị thanh ghi cấu hình sẽ khác nhau đối với các biên bản phần ường hợp như vậy bạn sẽ gặp các thông báo lỗi trong qua trình \u201cflash:\u201d \u2022 Boot: cannot determine first file name on device \u201cflash:\u201d Nếu dùng là tập tin trong flash bị lỗi thì bạn cần chép lại IOS mới lên router"],[1445,"y sẽ cho router biết là tải IOS g th cứng khác nhau"],[1446,"Bạn có thể tham khảo giá trị thanh ghi cấu hình trên đĩa CD tài liệu của Cisco hợc trên website của Cisco"],[1447,"Sau đó bạn chỉnh sửa lại giá trị thanh ghi cấu hình rồi lưu vào tập tin cấu hình khởi động"],[1448,"Nếu sự cố vẫn tiếp tục xảy ra thì có thể là tập tin trong bộ nhớ flash bị lỗi"],[1449,"Thông thường, trong tr khởi động router"],[1450,"Ví dụ như một số câu thông báo như sau: \u2022 Open: read error\u2026requested 0x4 bytes, got 0x0 \u2022 Trouble reading device magic number \u2022 Boot: cannot open"],[1451,"101 Nếu tất cả các nguyên nhân trên vẫn không đúng thì có thể là router bị lỗi phần cứng"],[1452,"Trong trường hợp như vậy thì bạn nên liên hệ với trung tâm hỗ trợ kỹ thuật nal Assistance Centre)"],[1453,"Mặc dù lỗi hư phần cứng rất hiếm năng xảy ra"],[1454,"cấu t bị"],[1455,"Ng i h để các thiết bị Cisco thực hiện các ch g số mà bạn có thể cấu hìn yến và các mạng mà a \u2026 Thông thường, một tập tin cấu ng bộ nhớ khác nhau"],[1456,"IOS được lưu trong loại bộ nhớ được gọi là flash"],[1457,"Flash lưu giữ ổn định tập tin IOS và tập tin IOS này được lash cho phép chúng ta ập tin cấu hình được lưu trong NVRAM được gọi là tập tin cấu hình khởi động"],[1458,"Khi thiết bị khởi động, tập tin cấu hình khởi động được của Cisco (TAC \u2013 Termi gặp nhưng nó vẫn có khả Lưu ý: Bạn không thể xem giá trị thanh ghi cấu hình bằng lệnh show running- config hay show start-up config được, 5.2"],[1459,"Quản lý tập tin hệ thống Cisco 5.2.1"],[1460,"Khái quát về tập tin hệ thống Cisco Hoạt động của router và switch phụ thuộc vào phần mềm cài trên nó"],[1461,"Có 2 loại phần mềm cần phải có để thiết bị hoạt động là: hệ điều hành và tập tin cấu hình"],[1462,"Hệ điều hành được sử dụng cho hầu hết các thiết bị Cisco là hệ điều hành liên mạng Cisco, gọi tắt là Cisco IOS (Internetwork Operating System)"],[1463,"Phần mềm Cisco IOS cho phép thiết bị thực hiện các chức năng của router hay switch"],[1464,"Một tập tin IOS khoảng vài megabyte"],[1465,"Phần mềm thứ 2 được sử dụng cho router và switch là tập tin cấu hình"],[1466,"Tập tin hình chứa các hướng dẫn về hoạt động định tuyến hay chuyển mạch của thiế ườ quản trị mạng là người tạo tập tin cấu hìn ức năng theo đúng thiết kế của mình"],[1467,"Một số thôn h được là địa chỉ IP của các cổng trên router, giao thức định tu gi o thức định tuyến đó được thực hiện quảng bá hình từ vài trăm đến vài ngàn byte"],[1468,"Mỗi loại phần mềm được lưu thành từng tập tin riêng biệt trong từ sử dụng để khởi động router"],[1469,"F nâng cấp IOS và lưu được nhiều IOS khác nhau"],[1470,"Trong cấu trúc của một số loại router, IOS được copy lên RAM và chạy trên RAM"],[1471,"Tập tin cấu hình được lưu trong bộ nhớ NVRAM và tập tin này được sử dụng khi khởi động router"],[1472,"Do đó t"],[1473,"102 chép lên RAM"],[1474,"Khi đó tập tin này được chạy trên RAM và luôn được cập nhật khi đang chạy"],[1475,"Do đó tập tin đang chạy trên RAM được gọi là tập tin cấu hình hoạt động"],[1476,"Hình 5.2.1a Bắt đầu từ phiên bản 12 của IOS, hệ thống tập tin Cisco IOS, gọi tắt là IFS (IOS File System), cung cấp một giao tiếp chung cho tất cả các hệ thống tập tin mà cấu hình hoạt động, ROM)"],[1477,"IFS sử dụng các tiền tố như trong định hệ thống tập tin trên thiết bị"],[1478,"Descripton router đang sử dụng"],[1479,"IFS cung cấp một phương pháp chung để thực hiện quản lý toàn bộ hệ thống tập tin đang sử dụng cho router"],[1480,"Công việc này bao gồm tập tin trong bộ nhớ flash, hệ thống tập tin mạng (TFTP, rcp và FTP), đọc/viết dữ liệu (NVRAM, tập tin hình 5.2.1b để xác Prefix Bootflash: Bootflash memory Flash: Flash memory"],[1481,"This prefix is available on all platform"],[1482,"For form that do not have a device named flash, the prefix flash: is refix flash: can be used to refer to orage area on all platform plat allased to slot0:"],[1483,"Therefore, the p the main flash memory st Flh: Flash load helper log files ftp: File Transfer protocol (FTP) network sever Nvram: NVRAM Rcp: Remote copy protocol (rcp) network server Slot0: First Personal Computer Memory Card International Assiciontion"],[1484,"103 (PCMCIA) flash memory card Slot1: Second PCMCIA flash memory card System: Contains the system memory, including the running configuration Tftp: TFTP nework server Hình 5.2.1b ds Pre IOS Version 12.0 Commands IOS Version 12.x Comman Configure network (pre-Cisco IOs Copy ftp: system: runnig-config Copy crp: system: runnig-config Copy tftp: system: runnig-config Release 10.3) Copy rcp running \u2013config Copy tftp running-config Configure overwrite-network {pre-Cisco IOS Release 10.3} Copy crp Copy rcp stratup-config Copy tftp: system: Copy tftp satrup-config Copy ftp: system: runnig-config : system: runnig-config runnig-config Show configuration (pre-Cisco IOS release 10.3) More nvram:startup-config Write erase (pre-Cisco IOS release 10.3) Erase starup-config Erase nvram: Write erase (pre-Cisco IOS release 10.3) Copy running-config startup-config Copy system: running-config Nvram: startup-config Write network pre-Cisco IOS release 10.3) Copy running-config startup-config rcp Copy running-config startup-config tftp Copy system: runnig-config ftp: Copy system: runnig-config crp: Copy system: runnig-config tftp: Write terminal pre-Cisco IOS release 10.3) Show runnig -config More system: running-config Hình 5.2.1c IFS sử dụng quy ước URL để xác định tập tin trên thiết bị và trên mạng"],[1485,"Quy ước URl xác định vị trí của tập tin đứng sau dâu hai chấm như sau [[[//vị trí]/thư n]"],[1486,"IFS cũng hỗ truyền tải tập tin FTP"],[1487,"Cisco phát tri bản này hỗ trợ cho các h ẫn đang tiếp mục]/tên tập ti 5.2.2"],[1488,"Quy ước tên IOS ển rất nhiều phiên bản IOS khác nhau"],[1489,"Các phiên p iên bản phần cứng với nhiều đặc tính khác nhau"],[1490,"Hiện nay Cisco v tục phát triển nhiều phiên bản IOS mới"],[1491,""],[1492,"104 Để , Cisco có một quy luật đặt tên cho IOS"],[1493,"Mộ o gồm nhiều phần, mỗi phần thể hiện phiên bản phần cứng, các đặc n Phầ hiên bản phần cứn n Phầ này có hỗ trợ các đặc tính nào"],[1494,"Có rất nhi chọn lựa"],[1495,"Các đặc tính này được đóng gói trong Cis ột số đặc tính chứ không có toàn bộ tất cả các đặc n n loại như sau: \u2022 ơ bản: các đặc tính dành cho từng phiên bản phần cứng, ví dụ: IP, IP/FW"],[1496,"\u2022 ở rộng (Plus): là các đặc tính mở rộng hơn mức cơ bản, ví dụ IP Plus, IP/FW Plus, Enterprise Plus"],[1497,"\u2022 Mã hoá: vẫn là các đặc tính cơ bản hay mở rộng như trên nhưng có thêm 56 bit để mã hoá"],[1498,"Ví dụ: IP/ATM PLUS IPSEC 56, Plus 56, Enterprise Plus 56"],[1499,"Từ Cisco IOS phiên bản 12.2 trở đi, đặc tính mã hoá được thiết kế thành 2 loại là k8/k9: o K8: 64 bit mã hoa trở xuống"],[1500,"o K9: hơn 64 bit mã hoá"],[1501,"Phần thứ 3 của tên tập tin cho biết định dạng của tập tin đó"],[1502,"Phần này cho biết IOS được lưu trong flash dưới dạng nén hay không, rồi IOS sẽ được giải nén để chạy ở đâu"],[1503,"Nếu IOS lưu trong flash dưới dạng nén thì nó sẽ được giải nén, chép lên RAM trong quá trình khởi động router"],[1504,"Dạng tập tin như vậy gọi là tập tin không cố định"],[1505,"Còn loại tập tin có định thì chạy trực tiếp trên flash luôn mà không cần chép lên RAM"],[1506,"Phần thứ 4 của tập tin cho biết phiên bản của IOS"],[1507,"Phiên bản càng mới thì số trong phần này càng lớn"],[1508,"phân biệt giữa các phiên bản khác nhau t tên của IOS ba tí h hỗ trợ và sỗ phát hành"],[1509,"n đầu tiên của tập tin IOS cho biết IOS này được thiết kế cho p g ào"],[1510,"n thứ hai của tên tập tin IOS cho biết tập tin ều đặc tính khác nhau để co IOS"],[1511,"Mỗi Cisco IOS chỉ có m tí h"],[1512,"Bên cạnh đó, các đặc tính này còn được phâ C M"],[1513,"105 Hình 5.2.2 5.2.3"],[1514,"Quản lý tập tin cấu hình băng TFTP Trên Cisco router và switch, tập tin cấu hình hoạt động được để trên RAM và nơi hải có tập tin cấu ì ơi mà chúng ta có thể lưu dụ phò opy running-config tftp \u2022 nh copy running-config tftp"],[1515,"FTP server mà bạn định lưu tập tin Sa à r bằng cách chép tập tin cấu hình đã lưu \u2022 nning-config"],[1516,"chỉ IP của TFTP sever"],[1517,"ấu hình mà mình muốn chép"],[1518,"rồi"],[1519,"cấu hình khởi động là NVRAM"],[1520,"Khi bị mất tập tin cấu hình thì ta p h nh khởi động dự phòng"],[1521,"Một trong những n ng tập tin cấu hình là TFTP server"],[1522,"Chúng ta dùng lệnh c để chép tập tin cấu hình lên TFTP server"],[1523,"Sau đây là các bước thực hiện: Nhập lệ \u2022 Ở dấu nhắc kế tiếp, nhập địa chỉ IP của T cấu hình"],[1524,"\u2022 Đặt tên cho tập tin hoặc là lấy tên mặc định"],[1525,"\u2022 Xác nhận lại các chọn lựa vừa rồi bằng cách gõ yes"],[1526,"u n y bạn có thể khôi phục lại cấu hình route dự phòng trên TFTP server về router"],[1527,"Sau đ ây là các bước thực hiện: Nhập lệnh copy ru \u2022 Ở dấu nhắc kế tiếp, nhập địa \u2022 Kế tiếp, nhập tên của tập tin c \u2022 Xác nhận lại các chọn lựa"],[1528,"106 Hình 5.2.3a Hình 5.2.3b 5.2.4"],[1529,"Quản lý tập tin cấu hình bằ dán M l l ng cách cắt \u2013 ột cách khác để tạo tập tin cấu hình dự phòng là chép lại kết quả hiển thị của ệnh show running-config"],[1530,"Từ thiết bị đầu cuối kết nối vào router, chúng ta chép ại kết quả hiển thị của lệnh show running-config rồi dán vào một tập tin văn bản,"],[1531,"107 sau đó lưu lại"],[1532,"Tuy nhiên tập tin văn bản này phải chỉnh sửa lại một chút trước khi chúng ta có thể sử dụng nó để khôi phục lại cấu hình router"],[1533,"Sau đây là các bước thực hiện để bạn chép lại tập tin cấu hình khi bạn sử dụng inal: Hyper Term 1"],[1534,"Chọn Transfer"],[1535,"2"],[1536,"Chọn Capture Text"],[1537,"3"],[1538,"Đặt tên cho tập tin văn bản mà chúng ta sẽ chép tập tin cấu hình ra"],[1539,"4"],[1540,"Chọn Start để bắt đầu quá trình chép"],[1541,"5"],[1542,"Chọn hiển thị nội dung của tập tin cấu hình bằng lệnh show running-config"],[1543,"6"],[1544,"Nhấn phím space bar mỗi khi có dấu nhắc \u201c--More--\u201d xuất hiện"],[1545,"7"],[1546,"Sau khi tập tin cấu hình đã hiển thị đầy đủ, bạn kết thúc quá trình chép bằng cách: 8"],[1547,"Chọn Transfer"],[1548,"9"],[1549,"Chọn Capture"],[1550,"10"],[1551,"Chọn Stop"],[1552,"Sau khi quá trình chép hoàn tất, bạn cần xoá bớt một số hang trong tập tin cấu hình để sau này chúng ta có thể sử dụng tập tin văn bản này \u201cdán\u201d lại vào router"],[1553,"Ngoài ra, bạn có thể them một số hang chú thích vào tập tin cấu hình"],[1554,"Các hàng chú thích này được bắt đầu bằng dấu chấm th ng"],[1555,"Bạn có thể sử dụng Notepad để ch n cấu hình"],[1556,"Bạn ở Notepad, chọn File>Open \u2022 Bất kỳ hàng nào ở sau dòng \u201cEnd\u201d Bạn them lệnh no shutdown vào cuối mỗi phần cấu hình của các cổng giao tiếp"],[1557,"Sau đó chọn File>Save để lưu lại tập tin cấu hình"],[1558,"an (!) ở đầu hà ỉnh sửa tập ti"],[1559,"Chọn tên của tập tin cấu hình mà bạn vừa chép được"],[1560,"Nhấn phím Open"],[1561,"Sau đây là những hàng trong tập tin cấu hình mà bạn cần xoá: \u2022 Show running-config \u2022 Building configuration\u2026 \u2022 Current configuration: \u2022 -More-"],[1562,"108 Sau này, từ kết nối bằng HyperTerminal bạn có thể khôi phục lại tập tin cấu hình cho router"],[1563,"Trước tiên, bạn phải xoá hết tập tin cấu hình đang có trong router bằng lệnh erase startup-config ở chế độ EXEC đặc quyền"],[1564,"Sau đó khởi động lại router b"],[1565,"ép lên router"],[1566,"\u2022 Từng dòng trong tập tin cấu hình sẽ được nhập vào y như lúc bạn gõ lệnh đó \u2022 T \u2022 ạn nhân Ctrl-Z để thoát khỏi \u2022 L s ằng lệnh reload"],[1567,"Sau đây là câc bước thực hiện để chép lại tập tin cấu hình cho router từ kết nối HyperTerminal: \u2022 Chuyển vào chế độ cấu hình toàn cục"],[1568,"\u2022 Trên HyperTerminal chọn Transfer>Send Text File \u2022 Chọn tên của tập tin cấu hình mà bạn cần ch vậy"],[1569,"heo dõi quá trình chép để xem có xảy ra lỗi gì hay không"],[1570,"Sau khi tập tin cấu hình đã được chép xong, b chế độ cấu hình toàn cục"],[1571,"ưu lại thành tập tin cấu hình khởi động bằng lệnh copy running-config tartup-config"],[1572,"Hình 5.2.4a: Quá Trình chép tập tin cấu hình từ router thành tập tin văn bản bằng kết nối HyperTerminal"],[1573,"109 Hình 5.2.4b: Quá trình chép tập tin cấu hình vào router bằng kết nối HyperTerminal 5 T ấp cho các router, switch trong hệ thống mạng"],[1574,"r thường yêu cầu bạn IOS mới"],[1575,"Router sẽ c .2.5"],[1576,"Quản lý Cisco IOS bằng TFTP hỉnh thoảng router cũng cần lưu dự phòng hoặc nâng cấp IOS"],[1577,"Đầu tiên sau khi mua router, chúng ta cần lưu lại IOS để dự phòng"],[1578,"Bạn có thể đặt IOS này trên một server trung tâm chung với các IOS khác"],[1579,"Các IOS này được sử dụng để thay thế hay nâng c Server phải có chạy dịch vụ TFTP và chúng ta chép IOS từ server lên router bằng lệnh copy tftp flash ở chế độ EXEC đặc quyền"],[1580,"Sau khi nhập lệnh trên, router sẽ hiển thị dấu nhắc yêu cầu bạn nhập địa chỉ IP của TFTP server"],[1581,"Sau đó router sẽ yêu cầu bạn xoá flash"],[1582,"Route xoá flash khi bộ nhớ flash không còn đủ chỗ trống để lưu them hiển thị một chuỗi các chứ \u201ce\u201d trong suốt quá trình xoá flash"],[1583,"Sau khi xoá xong flash, router bắt đầu tải IOS mới về"],[1584,"Router sẽ hiển thị một chuỗi ác dấu chấm than (!) trong suốt quá trình chép"],[1585,"Một IOS có thể lớn khoảng vài Megabyte nên quá trình này cũng sẽ tốn một khoảng thời gian"],[1586,""],[1587,"110 Sau khi chép xong, router sẽ kiểm tra lại IOS mới trong flash"],[1588,"Sau khi kiểm tra hoàn tất thì lúc này router đã sẵn sang cho bạn khởi động lại để sử dụng IOS mới"],[1589,"Hình 5.2.5 5.2.6"],[1590,"Quản lý IOS băng Xmodem hi khởi động router mà IOS lưu trong flash bị xoá mất hoK ặc bị lỗi thì bạn phải Nếu trong flash vẫn có một IOS bình thường thì bạn thử khởi động router bằng IOS này bằng lệnh boot flash:"],[1591,"Ví dụ: nếu trong flash có rommon 1>boot flash:c2600-is-mz.121-5 Nếu router khởi động bình thường thì có 2 vấn đề bạn cần kiểm tra xem tại sao router lại khởi động vào chế độ ROMmon mà không khởi động từ IOS trong flash"],[1592,"Đầu tiên, bạn dung lệnh show version để kiểm tra giá trị của thanh ghi cấu hình xem có đúng giá trị mặc định hay không"],[1593,"Nếu giá trị thanh ghi cấu hình đúng thì khôi phục lại IOS từ chế độ ROM monitor (ROMmon)"],[1594,"Ở nhiều thiết bị Cisco, chế độ ROMmon được hiển thị bởi dấu nhắc rommon 1> Bước đầu tiên bạn cần phải xác định xem tại sao router không tải được IOS từ flash"],[1595,"Nguyên nhân là do mất IOS hay IOS bị lỗi"],[1596,"Bạn kiểm tra flash bằng lệnh dir flash:"],[1597,"111 bạn dung lệnh show startup-config để xem có lệnh boot system nào cấu hình cho router khởi động vào chế độ ROM monitor hay không"],[1598,"Nếu router vẫn không khởi động được hoặc là bạn không thấy có IOS nào trong flash thì bạn cần phải chép một IOS mới"],[1599,"Từ chế độ ROMmon, bạn có thể chép tập tin IOS bằng Xmodem qua đường console hoặc bằng TFTP"],[1600,"Chép IOS bằng Xmodem từ chế độ ROMmon"],[1601,"Trước tiên, bạn cần phải có tập tin IOS trên máy tính như HyperTerminal chẳng hạn"],[1602,"Bạn có thể chép IOS với tốc độ mặc định của đường console là 9600, hoặc là bạn có thể nâng tốc độ lên 115200"],[1603,"Trong chế độ ROMmon, bạn dùng lệnh confreg, router sẽ hiển thị các giá trị mà bạn có thể thay đổi được"],[1604,"Sau đó bạn sẽ gặp câu hỏi \u201cchange console baud rate"],[1605,"y/n [n];\u201d, nhập chữ y để xác nhận tốc độ mới"],[1606,"Sau khi thay đổi nsole và khởi động lại router vào chế độ ROMmon, bạn nên kết thúc phiên k i cũ (tốc độ 9600) và thiết lập lại phiên kết nối HyperTerminal mới với tốc độ mới là 115200 bit/s"],[1607,"tốc đường co ết nố Hình 5.2.6a ờ bạn dùng lệnh xmodeBây gi m để chép phần mềm IOS từ PC"],[1608,"Cấu trúc câu lệnh này h e_file_name"],[1609,"Ví dụ: bạn chép IOS có tên là \u201cc2 0 n ư sau: xmodem \u2013c imag 60 -is-mz.122-10a.bin\u201d thì bạn gõ lệnh như sau:"],[1610,"112 Xmodem \u2013c c2600-í-mz.122-10a.bin k S Tham số -c là để cho quá trình Xmodem sử dụng CRC (Cyclic Rađunancy Check) iểm tra lỗi trong suốt quá trình chép"],[1611,"au đó router sẽ hiển thị một dòng thông báo chưa bắt đầu quá trình chép và một thông điệp cảnh báo"],[1612,"Thông điệp này cảnh báo là nội dung bộ nhớ flash sẽ bị mất nếu chúng ta tiếp tục quá trình này và yêu cầu chúng ta xác nhận có tiếp tục hay không"],[1613,"Nếu chúng ta xác nhận cho tiếp tục thì router sẽ bắt đầu thực hiện chép IOS"],[1614,"Hình 5.2.6b: Lệnh Xmodem úc này bạn cần cho bắt đầu quá trình Xmodem từ chương trình giả lập đầu cuối"],[1615,"Trong HyperTerminal bạn chọn Transfer>Send File"],[1616,"Trong cửa sổ của Send File: bạn chọn tên và vị trí lưu tập tin IOS, chọn giao thức là Xmodem, rồi bắt đầu quá trinh truyền"],[1617,"Trong suốt quá trình truyền, ửa sổ Send File sẽ hiển thị trạng thái truyền"],[1618,"Khi quá trình truyền hoàn tất, bạn sẽ gặp một thông điệp cho biết là bộ nhớ flash đang bị xoá, sau đó IOS được chép vào flash"],[1619,"Cuối cùng bạn gặp thông điệp \u201cDowbload Complete!\u201d"],[1620,"Trước khi khởi động lại router, bạn cần phải cài đặt lại tốc L c"],[1621,"113 độ đường cốnle là 9600 và đặt lại giá trị thanh ghi cấu hình là 0x2102 bằng lệnh config-register 0x2102"],[1622,"Trong lúc router đang khởi động lại thì bạn nên kết thúc phiên kết nối 115200 và thiết lập lại phiên kết nối mới với tộc độ 9600"],[1623,"5.2.7"],[1624,"Biến môi trường Bạn có thể khôi phục IOS bằng TFTP"],[1625,"Chép IOS bằng TFTP trong chế độ ROMmon là cách nhanh nhất để khôi phục IOS cho router"],[1626,"Để thực hiện cách này, bạn cài đặt biến môi trường rồi dùng lệnh tftpdnld"],[1627,"Chế độ ROMmon có chức năng rất giới hạn vì chưa tải được tập tin cấu hình khi khởi động router"],[1628,"Do đó router không hề có IP hay cấu hình cho cổng giao tiếp nào"],[1629,"Các biến môi trường sẽ cung cấp cho router một cấu hình tối thiể cho phép chạy TFTP để chép IOS"],[1630,"TFTP tr OMmon chỉ hoạt động được với c bạn cần cài đặt các đặc tính IP cho cổng LAN này"],[1631,"ến môi trường, đầu tiên bạn nhập tên biến, ti biến đó (TÊN BIẾN = giá trị cài đ R S ld: T_GATEWAY: đường mặc định cho cổng LAN"],[1632,"\u2022 TFTP_SERVER: địa chỉ IP của TFTP server"],[1633,"server"],[1634,"Để ng, bạn dùng lệnh set"],[1635,"u ong chế độ R ổng LAN đầu tiên trên router, do đó Để cài đặt giá trị cho các bi ếp theo là dấu bằng (=) rồi đến giá trị cài đặt cho ặt)"],[1636,"Vi dụ: bạn muốn đặt địa chỉ IP là 10.0.0.1 thì ở dấu nhắc của chế độ OMmon bạn nhập câu lệnh là: IP_ADDRESS=10.0.0.1 au đây là các biến tối thiểu mà bạn cần phải đặt để sử dụng cho lệnh tfpđn \u2022 IP_ADDRESS: địa chỉ IP cho cổng LAN"],[1637,"\u2022 IP_SUBNET_MASK:subnet mask cho cổng LAN"],[1638,"\u2022 DEFAUL \u2022 TFTP_FILE: tên tập tin IOS lưu trên kiểm tra lại giá trị của các biến môi trườ"],[1639,"114 Hình 5.2.6c: Cửa sổ Send File Sau khi cài đặt xong các biến m ệnh tftpdnld, không có tham số nào tiếp theo hết"],[1640,"Router sẽ hiển thị lại giá trị các biến, theo sau là thông điệp nh báo quá trình này sẽ xoá flash và yêu cầu chúng ta xác nhận có cho tiếp tục i động lại với IOS mới trong flash"],[1641,"rsion"],[1642,"Lệnh show version có thể kiểm tra được tập tin hiện tại trong flash và tổng dung lượng của bộ nhớ flash"],[1643,"Ngoài ra lệnh này còn cung cấp ôi trường, bạn nhập l cả quá trình này hay không"],[1644,"Trong quá trình chép, router hiển thị dấu chấm than (!) cho biết đã nhận được các gói dữ liệu"],[1645,"Sau khi nhận xong tập tin IOS, router bắt đầu xoá flash rồi chép tập tin IOS mới vào flash"],[1646,"Bạn sẽ gặp một thông báo khi quá trình này hoàn tất"],[1647,"Sau đó, từ dấu nhắc của chế độ ROMmon, bạn có thể khởi động lài router bằng cách nhập chữ i"],[1648,"Router sẽ khở 5.2.8"],[1649,"Kiểm tra tập tin hệ thống Có rất nhiều lệnh để kiểm tra tập tin hệ thống của router"],[1650,"Trong đó bạn có thể sử dụng lệnh show ve thêm một số thông tin về lần tải IOS gần nhất như: trong lần khởi động gần nhất, router tải IOS nào, từ đâu; giá trị thanh ghi cấu hình hiện tại là bao nhiêu"],[1651,"Nếu vị trí mà router tải IOS trong flash đã bị mất hoặc bị lỗi, hoặc là có lệnh boot system trong tập tin cấu hình khởi động"],[1652,""],[1653,"115 Bên cạnh đó, bạn có thể dùng lênh show flash để kiểm tra tập tin hệ thống"],[1654,"Lệnh này kiểm tra được trong flash hiện đang có tập tin IOS nào, tổng dung lượng flash còn trống là bao nhiêu"],[1655,"Chúng ta thường dùng lệnh này để xem bộ nhớ flash có đủ c lệnh boot system"],[1656,"Lệnh ng"],[1657,"Chúng ta có thể cấu hình và router sẽ thực thi theo thứ tự các câu lệnh này trong tập R Router#show version C I SOFTWARE (fc1) C Complie Thu 19-Jun-03 16:35 by pwade I ROM: System f S S S C memory Processor board ID 23101339, w B X Super LAT software (copyright 1990 by Meridian Technology Corp) TN3270 Em Basic Rae ISDN software, Version 1.1"],[1658,"1 FastEthernet/IEEE 802.3 interface(s) 2 Low-speed serial (sync/async) network interface(s) 1 ISDN Basic Rate interface(s) 32K bytes of non-voltatile configuration memory"],[1659,"16384K bytes of processor board System flash (Read/Write) Configuration register is 0x2102 dung lượng cho IOS mới hay không"],[1660,"Như các phần trên đã đề cập, tập tin cấu hình có thể có cá boot system xác định cho router vị trí tải IOS khi khởi độ nhiều lệnh boot system tin cấu hình"],[1661,"outer# show version isco Interface Operating System Software OS (tm) C2600 Software (C2600-JK803S-M), Version 12.2 (17a), RELEASE opyright (c) 1986-2006 by Cisco System, Inc mage text-base: 0x8000808C, data-base: 0x815F7B34 Bootstrap, Version 12.2 (7r) [cmong 7r], RELEASE SOFTWARE c1) GCTT-HCM uptime 1 week, 1 day, 1 hour, 9 minutes ystem restarted by power-on ystem image file is \u201cflash:c2500-d-l.120-10\u201d isco 2500 (68030) processor (revision N) with 2048K/2048 K bytes of ith hardware revise 00000000 ridging software 25 software, Version 3.0.0 ulation software Hình 5.2.8a"],[1662,"116 TỔNG KẾT Sau"],[1663,"đây là các ý chính các bạn cần nắm được trong chương này: \u2022 Xác định quá trình khởi động router"],[1664,"\u2022 Nắm được các thiết bị Cisco tìm và tải IOS như thế nào"],[1665,"\u2022 Sử dụng lệnh boot system"],[1666,"\u2022 Xác định giá trị thanh ghi cấu hình \u2022 Xử lý sự cố"],[1667,"\u2022 Xác định tập tin Cisco IOS và chức năng của nó"],[1668,"\u2022 Nắm được các vị trí mà router lưu các loại tập tin khác nhau"],[1669,"\u2022 Nắm được cấu trúc tên của IOS"],[1670,"\u2022 Quản lý tập tin cấu hình bằng TFTP"],[1671,"\u2022 Quản lý tập tin cấu hình bằng cắt \u2013 dán"],[1672,"\u2022 Quản lý IOS bằng TFTP"],[1673,"\u2022 Quản lý IOS bằng Xmodem"],[1674,"\u2022 Kiểm tra tập tin hệ thồng bằng các lệnh show"],[1675,""],[1676,"117 CHƯƠ G 6 ĐỊNH TUYẾN VÀ CÁ ỨC ĐỊNH TUYẾN GIỚI THIỆU Định tuyến đơn giản chỉ là tìm đường đi từ mạng này đến mạng khác"],[1677,"Thông tin về những con đường này có thể là được cập nhật tự động từ các router khác hoặc là do người quản trị mạng chỉ định cho router"],[1678,"Chương này sẽ giới thiệu các khái niệm về định tuyến động, các loại giao thức định tuyến động và phân tích mỗi loại một giao thức tiêu biểu"],[1679,"Người quản trị mạng khi chọn lựa một giao thức định tuyến động cần cân nhắc một số yếu tố như: độ lớn của hệ thống mạng, băng thông các đường truyền, khả năng của router"],[1680,"loại router và phiên bản router, các giao thức đang chạy trong hệ thống mạng"],[1681,"Chương này mô tả chi tiết về sự khác nhau giữa các giao thức định tuyến để giúp cho nhà quản trị mạng trong việc chọn lựa một giao thức định tuyến"],[1682,"Khi hoàn tất chương này, các bạn sẽ thực hiện được những việc sau: \u2022 Giải thích được ý nghĩa của định tuyến tĩnh"],[1683,"\u2022 Nhận biết giao thức định tuyến theo vectơ khoảng cách"],[1684,"g tin định tuy 6.1 Giớ 6.11 N C GIAO TH \u2022 Cấu hình đường cố định và đường mặc định cho router"],[1685,"\u2022 Kiểm tra và xử lý sự cố liên quan đến đường cố định và đường mặc định của router"],[1686,"\u2022 Phân biệt các loại giao thức định tuyến"],[1687,"\u2022 Nhận biết giao thức định tuyến theo trạng thái đường liên kết"],[1688,"\u2022 Mô tả đặc điểm cơ bản của các giao thức định tuyến thông dụng"],[1689,"\u2022 Phân biệt giao thức định tuyến nội bộ"],[1690,"\u2022 Phân biệt giao thức định tuyến ngoại vi"],[1691,"\u2022 Cấu hình RIP (Routing Information Protocol \u2013 Giao thức thôn ến) cho router"],[1692,"i thiệu về định tuyến tĩnh .Giới thiệu về định tuyến"],[1693,"118 Định u .Tất cả a vào địa chỉ IP đích của gói dữ liệu để chuy điều này , t thì router tự động học những thông tin này từ các router khác .Còn nếu r c Đ n m đ m m t r t h tuyến động cho một số mục đích đặc biệt"],[1694,"6.1.2"],[1695,"Hoạt động của định tuyến tĩnh"],[1696,"Hoạt động của định tuyến tĩnh có thể chia ra làm 3 bước như sau: ấu hình các đường cố định cho router \u2022 Router cài đặt các đường đi này vào bảng định tuyến"],[1697,"\u2022 Gói dữ liệu được định tuyến theo các đường cố định này"],[1698,"Người quản trị mạng cấu hình đường cố định cho router bằng lệnh iproute.Cú pháp của lệnh iproute như hình 6.1.2a: t yến là quá trình mà router thực hiện để chuyển gói dữ liệu tới mạng đích các router dọc theo đường đi đều dự ển gói theo đúng hướng đến đích cuối cùng .Để thực hiện được router phải học thông tin về đường đi tới các mạng khác .Nếu router chạy định uyến động outer chạy định tuyến tĩnh thì người quản trị mạng phải cấu hình các thông tin đến ác mạng khác cho router"],[1699,"ối với định tuyến tĩnh ,các thông tin về đường đi phải do người quản trị mạng hập cho router .Khi cấu trúc mạng có bất kỳ thay đổi nào thì chính người quản trị ạng phải xoá hoặc thêm các thông tin về đường đi cho router .Những loại đường i như vậy gọi là đường đi cố định .Đối với hệ thống mạng lớn thì công việc bảo trì ạng định tuyến cho router như trên tốn rất nhiều thời gian .Còn đối với hệ thống ạng nhỏ ,ít có thay đổi thì công việc này đỡ mất công hơn .Chính vì định tuyến ĩnh đòi hỏi người quản trị mạng phải cấu hình mọi thông tin về đường đi cho outer nên nó không có được tính linh hoạt như định tuyến động .Trong những hệ hống mạng lớn ,định tuyến tĩnh thường được sử dụng kết hợp với giao thức địn \u2022 Đầu tiên ,người quản trị mạng c Hình 6.1.2a"],[1700,"119 Trong 2 hình 6.1.2.c và 6.1.2.c là 2 câu lệch mà người quản trị của router Hoboken cấu hình đường cố định cho router đến mạng 172.16.1.0/24 và 172.16.5.0/24 .Ở hình 6.1.2.b,câu lệnh này chỉ cho router biết đường đến mạng đích đi ra bằng cổng giao tiếp nào .Còn ở hình 6.1.2.c ,câu lệnh này chỉ cho router biết địa chỉ IP của router kế tiếp là gì để đến được mạng đích .Cả 2 câu lệnh đều cài đặt đường cố định vào bảng định tuyến của router Hoboken.Điểm khác nhau duy nhất giữa 2 câu lệnh này là chỉ số tin cậy của 2 đường cố định tương ứng trên bảng định tuyến của router sẽ khác nhau"],[1701,"Hình 6.1.2.b Hình 6.1.2.c Chỉ số tin cậy là một thông số đo lường độ tin cậy của một đường đi .Chỉ số này àng thấp thì độ tin cậy càng cao .Do đó ,nếu đến cùng một đích thì con đường ỉ số tin cậy thấp hơn thì đườ c nào có ch ng đó được vào bảng định tuyến của router ụng địa chỉ IP của trạm kế tiếp sẽ có chỉ số tin cậy mặc định là 1,còn đường cố định sử dụng cổng ra thì có chỉ số tin cậy trước .Trong ví dụ trên,đường cố định sử d"],[1702,"120 mặc định là 0 .Nếu bạn muốn chỉ định chỉ số tin cậy thay vì sử dụng giá trị mặc đị ố về cổng ra/địa chỉ IP trạm kế của trong khoảng từ 0 đến 255"],[1703,"Wa 6.3.0 255.255.255.0 172.16.4.1.130 Đ t đ ố tin cậy của đường cố định 6 Sau đây là các bước để cấu hình đường cố ịnh : 1"],[1704,"Xác định tất cả các mạng đ hình ,subnet mask tương ứng và gateway tương ứng .Gateway có thể là cổng giao tiếp trên router hoặc là địa chỉ của trạm kế tiếp để đến được mạng đích"],[1705,"2"],[1706,"Bạn vào chế độ cấu hình toàn cục của router"],[1707,"3"],[1708,"Nhập lệnh ip route với địa chỉ mạng đích ,subnet mask tương ứng và gateway tương ứng mà bạn đã xác định ở bước 1.Nếu cần thì bạn thêm thông số về chỉ số tin cậy"],[1709,"4"],[1710,"Lặp lại bước 3 cho những mạng đích khác 5"],[1711,"Thoát khỏi chế độ cấu hình toàn cục , 6"],[1712,"Lưu tập tin cấu hình đang hoạt động thành tập tin cấu hình khởi động bằng lệnh copy running \u2013config statup-config"],[1713,"Hình 6.1.3 là ví dụ về cấu hình đường cố định với cấu trúc mạng chỉ có 3 router kết nối đơn giản .Trên router Hoboken chúng ta phải cấu hình đường đi tới mạng 172.16.1.0 và 172.16.5.0.Cả 2 mạn subnet mask là 255.255.255.0 Khi router Hoboken định tuyến cho các g đến mạng đích là 172.16.1.0 thì nó sử dụng các đường đi cố định mà ta đã cấu hình cho router để định tuyến tới router Sterling ,còn gói nào đến mạng đích là 172.16.5.0 thì định tuyến tới router Waycross"],[1714,"nh thì bạn thêm thông số này vào sau thông s câu lệnh .Giá trị của chỉ số này nằm ycross (config)# ip router 172.1 Nếu router không chuyển được gói ra cổng giao tiếp đã được cấu hình thì có nghĩa là cổng giao tiếp đang bị đóng,đường đi tương ứng cũng sẽ không được đặt vào bảng định tuyến"],[1715,"ôi khi chúng ta sử dụng đường cố định làm đường dự phòng cho đường định uyến động .Router sẽ chỉ sử dụng đường cố định khi đường định tuyến động bị ứt .Để thực hiện điều này ,bạn chỉ cần đặt giá trị chỉ s cao hơn chỉ số tin cậy của giao thức định tuyến động đang sử dụng là được"],[1716,".1.3"],[1717,"Cấu hình đường cố định đ ích cần cấu g này đều có ói"],[1718,"121 Hình 6.1.3 Ở ng cố định cho router thông 8.1.0 có địa chỉ của router kế tiếp là 172.16.2.1,đường tới mạng 172.16.5.0 có địa chỉ của router kế tiếp là chuyển gói đi mà router sẽ sử dụng trong trường hợp router không tìm ịnh tuyến để tới đích của gói dữ liệu khung phía trên của hình 6.1.3,cả 2 câu lệnh đều chỉ đường cố định cho router thông qua cổng ra trên router .Trong câu lệnh này lại không chỉ định giá trị cho chỉ số tin cậy nên trên bảng định tuyến 2 đường cố định nay có chỉ số tin cậy mặc định là 0.Đường có chí số tin cậy bằng 0 là tương đương với mạng kết nối trực tiếp vào router"],[1719,"Ở khung bên dưới của hình 6.1.3, 2 câu lênh chỉ đườ qua địa chỉ của router kế tiếp .Đường tới mạng 172.16 172.16.4.2 .Trong 2 câu này cũng không chỉ định giá trị cho chỉ số tin cậy nên 2 đường cố định tương ứng sẽ có chỉ số tin cậy mặc định là 1"],[1720,"6.1.4 Cấu hình đường mặc định cho router Đường mặc định là đường thấy đường đi nào phù hợp trong bảng đ"],[1721,"122 .Chúng ta thường cấu hình đường mặc định cho đường ra Internet của router vì router không cần phải lưu thông tin định tuyến tới từng mạng trên Internet .Lệnh u hình đường mặc định thực chất cũng là lệnh cấu hình đường cố định ,cụ thể là ệnh như sau: ddress/outgoing interface ] rou ẽ được định tuyến tới n Sau là 0.0.0.0"],[1722,"ổng giao tiếp trên router kế tiếp .Thông thường thì chúng ta nên sử dụng địa chỉ IP của router kế tiếp làm gateway"],[1723,"lệnh copy và tới mạng 1720160.5.0 trên router Waỷcoss để chỉ đường tới từng mạng một .Nhưng cách này thì không phả Sterlin c mạng khác thông qua một cổng Serial 0 mà thôi .Tư ột kết nối đến tất cả các mạng sử dụng đường mặc định để định tuyế c tiếp vào nó"],[1724,"cấ câu l Ip route 0.0.0.0.0.0.0.0[next \u2013hop-a Subnet 0.0.0.0 khi được thực hiện phép toán AND logic với bất kỳ địa chỉ IP đích nào cũng có kết quả là mạng 0.0.0.0 .Do đó ,nếu gói dữ liệu có địa chỉ đích mà ter không tìm được đường nào phù hợp thì gói dữ liệu đó s mạ g 0.0.0.0"],[1725,"đây là các bước cấu hình đường mặc định : \u2022 Vào chế độ cấu hình toàn cục , Nhập lệnh ip route với mạng đích là 0.0.0.0 và subnet mask tương ứng Gateway của đường mặc định có thể là c \u2022 Thoát khỏi chế độ cấu hình toàn cục , \u2022 Lưu lại thành tập tin cấu hình khởi động trong NVPAM bằng running \u2013config"],[1726,"Tiếp tục xét ví dụ trong phần 6.1.3 :router Hoboken đã được cấu hình để định tuyến dữ liệu tới mạng 172.16.1.0 trên router Sterling i là một giải pháp hay cho những hệ thống mạng lớn"],[1727,"g kết nối đến tất cả cá ơng tự waycrooss cũng vậy .Waycross chỉ có m khác thông qua cổng Serial 1 mà thôi .Do đó chúng ta cấu hình đường mặc định cho Sterling và và Waycrooss thì 2 router này sẽ n cho gói dữ liệu đến tất cả các mạng nào không kết nối trự"],[1728,"123 Hình 6.1.4a Hình 6.1.4b 6.1.5.Kiểm tra cấu hình đường cố định Sau khi cấu hình đường cố định ,chúng ta phải kiểm tra xem bảng định tuyến đã có đường ,cố định mà chúng ta đã cấu hình hay chưa ,hoạt động định tuyến có đúng hay không .Bạn dùng lệnh show running \u2013config để kiểm tra nội dung tập tin"],[1729,"124 cấu hình đang chạy trên RAM xem hình đường cố định đã được nhập vào ệnh show ip route để xem có đường cố định ông"],[1730,"\u2022 Kiểm tra xem câu lệnh \u2013cấu hình đường cố định có đúng không .Nếu không eroute cho thấy router Sterling waycross.Chúng ta telnet vào router Hoboken .Từ router Hoboken chúng ta thử ping ạng 172.16.5.0 .Lệnh ping này sẽ thành công vì Hoboken kết nối trực tiếp với waycross"],[1731,"câu lệnh cấu đúng chưa .Sau đó bạn dùng l trong bảng định tuyến hay kh Sau đây là các bước kiểm tra cấu hình đường cố định : \u2022 Ở chế độ đặc quyền ,bạn nhập lệnh show running-config để xem tập tin cấu hình đang hoạt động"],[1732,"đúng thì bạn phải vào lại chế độ cấu hình toàn cục ,xoá câu lệnh sai đi và nhập lại câu lệnh mới"],[1733,"\u2022 Nhập lệnh show ip roule"],[1734,"\u2022 Kiểm tra xem đường cố định mà bạn đã cấu hình có trong bảng định tuyến hay không 6.1.6"],[1735,"Xử lý sự cố Xét ví dụ trong phần 6.1.3:router Hoboken đã được cấu hình đường cố định tới mạng 172.16.1.0 trên Sterling và tới mạng 172.16.5.0 trên waycross .Với cấu hình như vậy thì node trong mạng 172.16.1.0 ở Sterling không thể truyền dữ liệu cho node trong mạng 172.16.5.0 được .Bây giờ trên router Sterling ,bạn thực hiện lệnh ping tới một node trong mạng 172.16.5.0.Lệnh ping không thành công .Sau đó bạn dùng lệnh traceroute đến node mà bạn vừa mới ping để xem lệnh traceroute bị rớt ở đâu .Kết quả của câu lệnh trac nhận được gói ICMP trả lời từ router Hoboken mà không nhận được từ router đến node trong m"],[1736,"125 Hình 6.1.6a Hình 6.1.6b"],[1737,"126 Hình 6.1.6c 6.2 Tổng quan về định tuyến động 6.2.1 Giới thiệu về giao thức định tuyến động Giao thức định tuyến khác với giao thức được định tuyến cả về chức năng và nhiệm vụ"],[1738,"Giao thức định tuyến được sử dụng để giao tiếp giữa các router với nhau"],[1739,"Giao thức định tuyến cho phép router này chia sẻ các thông tin định tuyến mà nó biết cho các router khác .Từ đó ,các router có thể xây dựng và bảo trì bảng định tuyến của nó"],[1740,"Sau đây là một số giao thức định tu ing information Protocol(RIP) \u2022 Interior Gateway Routing Protocol(IGRP) Còn ệu của ngư chỉ lớp trúc đị yến : \u2022 Rout \u2022 Enhanced Inteior Gateway Routing Protocol(EIGRP) \u2022 Open Shortest Path First(OSPF) dữ li giao thức được định tuyến thì được sử dụng để định hướng cho ời dùng .Một giao thức được định tuyến sẽ cung cấp đầy đủ thông tin về địa mạng để gói dữ liệu có thể truyền đi từ host này đến host khác dựa trên cấu a chỉ đó"],[1741,""],[1742,"127 Sau 6.2.2.Autonmous sytem(AS) (H thống tự quản ) Hệ ới cùng một cơ chế quản trị v ột đơn vị"],[1743,"Tổ chứ Internet Num e số cho mỗi AS .Chỉ số này dài 16 bit .Một số giao th hư giao thức IRGP của Cisco,đòi hỏi phải có số AS xác n đây là các giao thức được định tuyến: \u2022 Internet Protocol (IP) \u2022 Internetwork Packet Exchange(IPX) ệ tự quản (AS) là một tập hợp các mạng hoạt động dư ề định tuyến .Từ bên ngoài nhìn vào ,một AS được xem như m c Đăng ký số Internet của Mỹ (ARIN-American Regitry of b rs)là nơi quản lý việc cấp ức định tuyến ,ví dụ n đị h khi hoạt động"],[1744,"Hình 6.2.2:Một AS là bao gồm các router hoạt động dưới cùng một cơ chế quản trị 6.2.3"],[1745,"Muc đích của giao thức định tuyến và hệ thống tự quản Múc đích của giao thức định tuyến là xây dựng và bảo trì bảng định tuyến .Bảng định tuyến này mang thông tin về các mạng khác và các cổng giao tiếp trên router đến các mạng này .Router sử dụng giao thức định tuyến để quản lý thông tin nhận được từ các router khác ,thông tin từ cấu hình của các cổng giao tiếp và thông tin cấu hình các đường cố định"],[1746,""],[1747,"128 Giao thức định tuyến cấp nhật về ng ,chọn đường tốt nhất đặt vào bảng định tuy sử dụng thức đ"],[1748,"ịnh tuyến động hoạt động trên cơ sở các thuật toán định tuyến .Khi cấu trúc mạng hức định tuyến ản sao của bảng định tuyến hông tin từ router A .Sau tăng số ho l định ảng định tuyến này cho router láng giềng khác là router C"],[1749,"Chuy ter lán giềng theo định kỳ tất cả các đườ ến và xoá đi khi đường đó không sử dụng được nữa .Còn router thì thông tin trêng bảng định tuyến để chuyển gói dữ liệu của các giao ược định tuyến Đ có bất kỳ thay đổi nào như mở rộng thêm ,cấu hình lại ,hay bị trục trặc thì khi đó ta nói hệ thống mạng đã được hội tụ .Thời gian để các router đồng bộ với nhau càng ngắn càng tốt vì khi các router chưa đồng bộ với nhau về các thông tin trên mạng thì sẽ định tuyến sai"],[1750,"Với hệ thống tự quản (AS) ,toàn bộ hệ thống mạng toàn cầu được chia ra thành nhiều mạng nhỏ, dể quản lý hơn.Mỗi AS có một số AS riêng ,không trùng lặp với bất kỳ AS khác ,và mỗi AS có cơ chế quản trị riêng của mình"],[1751,"6.2.5 Phân loại các giao t Đa số các thuật toán định tuyến được xếp vào 2 loại sau : \u2022 Vectơ khoảng cách \u2022 Trạng thái đường liên kết"],[1752,"Định tuyến theo vectơ khoảng cách thực hiện truyền b từ router này sang router khác theo định kỳ .Việc cập nhật định kỳ giữa các router giúp trao đổi thông tin khi cấu trúc mạng thay đổi .Thuật toán định tuyến theo véctơ khoảng cách còn được gọi là thuật toán Bellman-Ford"],[1753,"Mỗi router nhận được bảng định tuyến của những router láng giềng kết nối trực tiếp với nó .Ví dụ như hình 6.2.5a :router B nhận được t đó router B sẽ cộng thêm khoảng cách từ router B đến router (ví dụ như p ên )vào các thông tin định tuyến nhận được từ A.Khi đó router B sẽ có bảng tuyến mới và truyền b Quá trình này xảy ra tương tự cho tất cả các router láng giềng khác"],[1754,"ển bảng định tyến cho rou"],[1755,"129 và n h tí h lại vectơ khoảng các Hình 6.2.5.a Router thu thập thông tin về khoảng cách đến các mạng khác ,từ đó nó xây dựng và bảo trì một cơ sở dữ liệu về thông tin định tuyến trong mạng"],[1756,"Tuy nhiên , hoạt động theo thuật toán vectơ khoảng cách như vậy thì router sẽ không biết được chính xác cấu trúc của toàn bộ hệ thống mạng mà chỉ biết được các router láng giềng kết nối trực tiếp với nó mà thôi"],[1757,"Khi sử dụng định tuyến theo vectơ khoảng cách ,bước đầu tiên là router phải xác định các router láng giềng với nó .Các mạng kết nối trực tiếp vào cổng giao tiếp của router sẽ có khoảng cách là 0.Còn đường đi tới các mạng không kết nối trực tiếp vào router thì router sẽ chọn đường tốt nhất dựa trên thông tin mà nó nhận đượctừ các router láng giềng .Ví dụ như hình vẽ 6.2.5b :router A nhận được thông tin về các mạng khác từ router B .Các thông tin này được đặt trong bảng định tuyến với vectơ khoảng cách đã được tính toán lại cho biết từ router A đến mạng đích thì đi theo hướng nào ,khoảng cách bao nhiêu"],[1758,"Bảng định tuyến được cập nhật khi c ạng có sự thay đổi .Quá trình cập nhật này cũng diễn ra từng bước m này đến router khác.Khi cập nhật ộ bảng định tuyến của nó cho các router láng giềng ấu trúc m ột từ router ,mỗi router gửi đi toàn b"],[1759,"130 .Trong bảng định tuyến có thông tin về đường đi tới từng mạng đích :tổng chi phí cho đường đi ,địa chỉ của router kế tiếp"],[1760,"Hình 6.2.5b Hình 6.2.5c"],[1761,"131 Một ví dụ tương tự vectơ khoảng cách mà bạn thường thấy là bảng thông tin chỉ đường ở các giao lộ đường cao tốc .Trên bảng này có các ký hiệu cho biết hướng đi tới đích và khoảng cánh tới đó là bao xa"],[1762,"6.2.6"],[1763,"Đặc điểm của giao thức định tuyến theo trạng thái đường liên kết Thuật toán định tuyến theo trạng thái đường liên kết là thuật toán Dijkstras hay đường liên kết sử dụng những công cụ sau: \u2022 Thông điệp thông báo trạng thái đường liên kết (LSA-Link-state \u2022 Bảng định tuyến :chứa danh sách các đường đi đã được chọn lựa"],[1764,"Quá trình thu thập thông tin mạng để thực hiện định tuyến theo trạng thái đường liên kết: Mỗi router bắt đầu trao đổi LSA với tất cả các router khác, trong đó LSA mang cơ sở dữ liệu dựa trên thông tin của các LSA"],[1765,"Mỗi router tiến hành xây dựng lại cấu trúc mạng theo dạng hình cây với bản than nó là gốc ,từ đó router vẽ ra tất cả các đường đi tới tất cả các mạng trong hệ thống .Sau đó thuật toán SPF chọn đường ngắn nhất để đưa vào bảng định tuyến"],[1766,"Trên bảng định tuyến sẽ chứa thông tin về các đường đi đã được chọn với cổng ra tương ứng.Bên cạnh đó, router vẫn tiếp tục duy trì cơ sở dữ liệu về cấu trúc hệ thống mạng và trạng thái của các đường liên kết"],[1767,"Router nào phát hiện cấu trúc mạng thay đổi đầu tiên sẽ phát thông tin cập nhật cho tất cả các router khác.Router phát gói LSA, trong đó có thông tin về router mới, các thay đổi về trạng thái đường liên kết"],[1768,"Gói LSA hát đi cho tất cả các router khác"],[1769,"còn gọi là thuật toán SPF (Shortest Path First tìm đường ngắn nhất).Thuật toán định tuyến theo trạng thái đường liên kết thực hiện việc xây dựng và bảo trì một cơ sở dữ liệu đầy đủ về cấu trúc của toàn bộ hệ thống mạng"],[1770,"Định tuyến theo trạng thái Advertisement): LSA là một gói dữ liệu nhỏ mang thông tin định tuyến được truyền đi giữa các router"],[1771,"\u2022 Cơ sở dữ liệu về cấu trúc mạng :được xây dựng từ thông tin thu thập được từ các LSA"],[1772,"\u2022 Thuật toán SPF :dựa trên cơ sở dữ liệu về cấu trúc mạng ,thuật toán SPF sẽ tính toán để tìm đường ngắn nhất"],[1773,"này được p"],[1774,"132 Hình 6.2.6a outer có cơ sở dư liệu riêng về cấu trúc mạng và thuật toán SPF thực hiện án dựa trên cơ sở dữ liệu này"],[1775,"Mỗi r tính to Hinh 6.2.6b"],[1776,"133 Khi router nhận được gói LSA thì nó sẽ cập nhật lại cơ sở dữ liệu của nó với thông tin mới vừa nhận được"],[1777,"Sau đó SPF sẽ tính lại để chọn đường lại và cập nhật lại cho bảng định tuyến"],[1778,"Định tuyến theo trạng thái đường liên kết có một số nhược điểm sau: \u2022 Bộ sử lý trung tâm của router phải tính toán nhiều \u2022 Đòi hỏi dung lương bộ nhớ phải lớn \u2022 Chiếm dụng băng thông đường truyền Router sử dụng định tuyến theo trạng thái đường liên kết sẽ phải cần nhiều bộ nhớ hơn và hoạt động xử lý nhiều hơn là sử dụng định tuyến theo vectơ khoảng cách .Router phải có đủ bộ nhớ để lưu cơ sở dữ liệu về cấu trúc mạng ,bảng định tuyến .Khi khởi động việc định tuyến ,tất cả các router phải gửi gói LSA cho tất cả các g"],[1779,"Nhưng sau khi các router đã thu thập đủ thông tin để xây dựng cơ sở dữ liệu về cấu trúc mạng thì băng thông đường truyền không bị chiếm dụng nữa .Chỉ khi nào cấu trúc mạng thay đổi thì router mới phát gói LSA để cập nhật và những gói LSA này chiếm một phần băng thông rộng rất nhỏ"],[1780,"6.3 Tổng quát về giao thức định tuyến 6.3.1"],[1781,"Quyết định chọn đường đi Router có 2 chức năng chính là : \u2022 Quyết định chọn đường đi \u2022 Chuyển mạch Quá trình chọn đường đi được thự ạng.Router dựa vào bảng định tuyến để chọn đường cho gói dữ liệu ,sau khi quyết định đường ra thì router thực router khác,khi đó băng thông đường truyền sẽ bị chiếm dụng làm cho băng thông dành cho đường truyền dữ liệu của người dùng bị giảm xuốn c hiện ở lớp M hiện việc chuyển mạch để phát gói dữ liệu"],[1782,"Chuyển mạch là quá trình mà router thực hiện để chuyển gói từ cổng nhận vào ra cổng phát đi .Điểm quan trọng của quá trình này là router phải đóng gói dữ liệu cho phù hợp với đường truyền mà gói chuẩn bị đi ra Trong các hình 6.3.1a-6.3.1e cho thấy cách mà router sử dụng địa chỉ mạng để quyết định chọn đường cho gói dữ liệu"],[1783,""],[1784,"134 Hình 6.3.1a Hình 6.3.1b"],[1785,"135 Hình 6.3.1c Hình 6.3.1d Hình 6.3.1e u hình toàn nh toàn cục RIP định tuyến ,công việc ử dụng broadcst và c router .Router sẽ dựa vào thông số định tuyến để chọn đường tốt nhất tới từng mạng đích"],[1786,"6.3.2 Cấu hình định tuyến Để cấu hình giao thức định tuyến ,bạn cần cấu hình trong chế độ cấ cục và cài đặt các đặc điểm định tuyến .Bước đầu tiên ,ở chế độ cấu hì ,bạn cần khởi động giao thức định tuyến mà bạn muốn ,ví dụ như ,IRGP,EIGRP hay OSPF"],[1787,"Sau đó ,trong chế độ cấu hình chính là bạn khái báo địa chỉ IP .Định tuyến động thường s multicast để trao đổi thông tin giữa cá"],[1788,"136 Lệ Lệ th ức TCP/IP , router sử dụng một giao thức định tuyến IP thức định tuyến IP: ạng thái đường liên kết \u2022 BGP- giao thức định tuyến ngoại theo vectơ khoảng cách tion Protocol)được định nghĩa trong RPC 1058"],[1789,"a đường truyền làm thông nh router dùng để khởi động giao thức định tuyến"],[1790,"nh network dùng để khai báo các cổng giao tiếp trên router mà ta muốn giao ức định tuyến gửi và nhận các thông tin cập nhật về định tuyến"],[1791,"Sau đây là các ví dụ về cấu hình định tuyến: GAD(config)#router rip GAD(config-router)#network 172.16..0.0 Địa chỉ mạng khai báo trong câu lệnh network là địa chỉ mạng theo lớp A,B,hoặc C chứ không phải là địa chỉ mạng con (subnet)hay địa chỉ host riêng lẻ"],[1792,"6.3.3 Các giao thức định tuyến ở lớp Internet của bộ giao th để thực hiện việc định tuyến .Sau đây là một số giao \u2022 RIP \u2013 giao thức định tuyến nội theo vectơ khoảng cách \u2022 IGRP- giao thức định tuyến nội theo vectơ khoảng cách Cisco"],[1793,"OSPF \u2013 giao thức đị\u2022 nh tuyến nội theo tr \u2022 EIGRP- giao thức mở rộng của IGRP RIP (Routing informa Sau đây là các đặc điểm chính của RIP : \u2022 Là giao thức định tuyến theo vectơ khoảng cách \u2022 Sử dụng số lượng hop để làm thông số chọn đường đi \u2022 Nếu số lượng hop để tới đích lớn hơn 15 thì gói dữ liệu sẽ bị huỷ bỏ \u2022 Cập nhật theo định kỳ mặc định là 30 giây IGRP (Internet gateway routing Protocol)là giao thức được phát triển độc quyền bởi Cisco .Sau đây là một số đặc điểm mạnh của IGRP: \u2022 Là giao thức định tuyến theo vectơ khoảng cách \u2022 Sử dụng băng thông ,tải ,độ trễ và độ tin cậy củ số lựa chọn đường đi \u2022 Cập nhật theo định kỳ mặc định là 90 giây"],[1794,"137 OSPF (Open Shortest Path First)là giao thức đình tuyến theo trạng thái đường liên kết .Sau đây là các đặc điểm chinhs của OSPF : \u2022 Là giao thức định tuyến theo trạng thái đường liên kết \u2022 Được định nghĩa trong RFC 2328 , \u2022 Sử dụng thuật toán SPF để tính toán chọn đường đi tốt nhất , \u2022 Chỉ cập nhật khi cấu trúc mạng có thay đổi , EIGRP Là giao thức định tuyến nâng cao theo vectơ khoảng cách ,và là giao thức độc quyền của Ciso.Sau đây là các ính của EIGRP: \u2022 iểm của định tuyến theo vectơ khoảng cách và định tuyến theo uyến giữa các ISP hoặc giữa ISP và khách hàng , \u2022 ữa các hệ tự quản (AS)"],[1795,"6.3.4 Giao một đơn v định tuyế i là chọn thông số nào và sử dụng những thông số đó ra sao để chọn đường i Giao 2 cơ ch oại này thường được sử dụng để định tuyến ữ n IP ngoại thường yêu cầu phải có 3 thông \u2022 Danh sách các router láng giềng để trao đổi thông tin định tuyến , á thông tin \u2022 uter"],[1796,"sự đặc điểm ch \u2022 Là giao thức định tuyến nâng cao theo vectơ khoảng cách , \u2022 Có chia tải"],[1797,"Có các ưu đ trạng thái đường liên kết"],[1798,"Sử dụng thuật toá\u2022 n DUAL (Diffused Update Algorithm)để tính toán chọn đường tốt nhất"],[1799,"Cập nhật theo định kỳ mặc định là 90 gây hoặc cập nhật khi có thay đổi về cấu trúc mạng"],[1800,"BGP (Border Gateway Protocol) là giao thức định tuyến ngoại"],[1801,"Sau đây là các đặc điểm chính của BGP"],[1802,"Là giao thức định tưyến ngoại theo vectơ khoảng cách, \u2022 Được sử dụng để định t Được sử dụng để định tuyến lưu lượng Internet gi Hệ tự quản, IGP và EGP thức định tuyến nội được thiết kế để sử dụng cho hệ thống mạng của ị tổ chức mà thôi .Điều quan trọng nhất đối với việc xây dựng một giao thức n nộ đ trong hệ thống mạng"],[1803,"thức định tuyến ngoại được thiết kế để sử dụng giữa 2 hệ thống mạng có ế quản lý khác nhau .Các giao thức l gi a các ISP .Giao thức định tuyế tin trước khi hoạt động ,đó là : \u2022 Danh sách các mạng kết nối trực tiếp mà giao thức cần quảng b định tuyến"],[1804,"Chỉ số của hệ tự quản trên ro"],[1805,"138 Giao thức định tuyến ngoại vi cần phải phân biệt các hệ tự quản .Các bạn nên nhớ rằng mỗi hệ tự quản có một cơ chế quản tri riêng biệt .Giữa các hệ thống này phải có một giao thức để giao tiếp được với nhau"],[1806,"Mỗi một hệ tự quản có một con số xác định được cấp bởi tổ chức đăng ký số Internet của Mỹ (ARIN \u2013 America Registry of Internet Number) hoặc được cấp bởi nhà cung cấp dịch vụ"],[1807,"Con số này là số 16 bit"],[1808,"Các giao thức định tuyến như IGRP và EIGRP của Cisco đòi hỏi phải khai báo số AS khi cấu hình Hình 6.3.4 6.3.5"],[1809,"Vectơ khoảng cách Thuật toán vectơ khoảng cách (hay còn gọi là thuật toán Bellman-Ford)yêu cầu mỗi router gửi một phần hoặc toàn bộ bảng định tuyến cho các router láng giềng kết nối trực tiếp với nó .Dựa vào thông tin cung cấp bởi các router láng giềng ,thuật toán vectơ khoảng cách sẽ lựa chọn đường đi tốt nhất"],[1810,"Sử dụng các giao thức định tuyến theo vectơ khoảng cách thường tốn ít n router lại chậm và thông số được sử này ,các router sẽ trao đổi bảng định tuyến với nhau theo định kỳ .Do vậy ,loại tài nguyê của hệ thống nhưng tốc độ đồng bộ giữa các dụng để chọn đường đi có thể không phù hợp với những hệ thống mạng lớn .Chủ yếu các giao thức định tyến theo vectơ khoảng cách chỉ xác định đường đi bằng khoảng cách (số lượng hop) và hướng đi (vectơ) đến mạng đích.Theo thuật toán"],[1811,"139 định tuyến này chỉ đơn giản là mỗi router chỉ trao đổi bảng định tuyến với các router láng giềng của mình .Khi nhận được bảng định tuyến từ router láng giềng ,router sẽ lấy con đường nào đến mạng đích có chi phí thấp nhất rồi cộng thêm khoảng cách của mình vào đó thành một thông tin hoàn chỉnh về con đường đến mạng đích với hướng đi ,thông số đường đi từ chính nó đến đích rồi đưa vào bảng định tuyến đó gửi đi cập nhật tiếp cho các router kế cận khác .RIP và IGRP là 2 giao thức định tuyến theo vectơ khoảng cách"],[1812,"Chuyển bảng định tuyến cho router láng giềng theo định kỳ và tính lại vectơ khoảng cách Hình 6.3.5a"],[1813,"140 Hình 6.3.5b 6.3.6"],[1814,"Trạng thái đường liên kết Thuật toán chọn đường theo trạng thái đường liên kết (hay còn gọi là thuật toán chọn đường ngắn nhất )thực hiện trao đổi thông tin định tuyến cho tất cả các router khi bắt đầu chạy để xây dựng một bản đồ đầy đủ về cấu trúc hệ thống mạng er còn lại .Các gói này mang y từ ạng .Từ đó router tự tính toán và chọn đường đi tốt nhất đến mạng đích để đưa lên bảng định tuyến .Sau khi toàn bộ các router đã được hội tụ thì giao thức định tuyến theo trạng thái đường liên kết chỉ sử dụng gói thông tin nhỏ để cập nhật ,về sự thay đổi cấu trúc mạng chứ không gửi đi toàn bộ bảng định tuyến .Các gói thông tin cập nhật này được truyền đi cho tất cả router khi có sự thay đổi xảy ra ,do đó tốc độ hội tụ nhanh"],[1815,"Do tốc độ hội tụ nhanh hơn so với giao thức định tuyến theo vectơ khoảng cách ,nên giao thức định tuyến theo trạng thái đường liên kết ít bị lặp vòng hơn .Mặc dù các giao thức loại này ít bị lỗi về định tuyến hơn nhưng lại tiêu tốn nhiều tài nguyên hệ thong hơn .Do đó chúng mắc tiền hơn nhưng bù lại chúng co khả năng mở rộng hơn so với giao thức định tuyến theo vectơ khoảng cách"],[1816,".Mỗi router sẽ gửi gói thông tin tới tất cả các rout thông tin về các mạng kết nối vào router .Mỗi router thu thập các thông tin nà tất cả các router khác để xây dựng một bản đồ cấu trúc đầy đủ của hệ thống m"],[1817,"141 Khi trạng thái của một đường liên kết nào đó thay đổi thì gói quảng bá trạng thái đường liên kết LSA được truyền đi trên khắp hệ thống mạng .Tất cả các router đều nhận được gói thông tin này và dựa vào đó để điều chỉnh lại việc định tuyến của mình .Phương pháp cập nhật như vậy tin cậy hơn ,dễ kiểm tra hơn và tốn ít băng thông đường truyền hơn so với kiểu cập nhật của vectơ khoảng cách .OSPF và IS \u2013IS là 2 giao thức định tuyến theo trạng thái đường liên kết"],[1818,"Hình 6.3.6a Hình 6.3.6b"],[1819,"142 Tổng kết Sau đây là các điểm quan trọng mà các bạn cần nắm được trong chương này: \u2022 Router sẽ không chuyển gói tin nếu không tìm được đường tới đích n trị mạng cấu hình cho router ặc biệt của đường cố định .Đường mặc định er sử dụng khi không tìm được đường nào tới đích kiểm tra cấu hình của đường cố định và đường mặc định :show ip router ,ping ,traceroute"],[1820,"ến đường cố định và đường mặc định"],[1821,"và hệ tự quản \u2022 eo vectơ khoảng cách định tuyến theo trạng thái đường liên kết đi ự quản, IGP và EGP \u2022 Định tuyến theo vectơ khoảng cách \u2022 Đường cố định là do người quả \u2022 Đường mặc định là một loại đ là con đường cuối cùng cho rout \u2022 Ta có thể sử dụng các lệnh sau để \u2022 Kiểm tra và xử lý sự cố liên quan đ \u2022 Các giao thức định tuyến \u2022 Hệ tự quản \u2022 Mục đích của giao thức định tuyến Các loại giao thức định tuyến \u2022 Đặc điểm của giao thức định tuyến th \u2022 Đặc điểm của giao thức \u2022 Quyết định chọn đường \u2022 Cấu hình định tuyến \u2022 Các giao thức định tuyến: RIP, IGRP, OSPF, EIGRP, BGP \u2022 Hệ t \u2022 Định tuyến theo trạng thái đường liên kết"],[1822,"143 CHƯƠNG 7 GIAO THỨC ĐỊNH TUYẾN THEO VECTƠ KHOẢNG CÁCH GIỚI THIỆU Gia t o \u201ccuộc sống\u201c của người quản trị mạng trở nên đơn gi định tuyến động mà người quản trị mạng không còn tốn thời gian để cấu hình đường cố định và chỉnh sửa lại chúng khi có sự cố"],[1823,"Với định tuyến động, router có thể tự động cập nhật và thay đổi việc định tuyến theo sự thay đổi của hệ thống mạng"],[1824,"Tuy nhiên định tuyến động cũng có những vấn đề của nó .Trong chương này sẽ đề cập đến các vấn đề của giao thức định tuyến theo vectơ khoảng cách và các phương pháp mà những nhà thiết kế sử dụng để giải quyết những vấn đề này"],[1825,"RIP (Routing Information Protocol) là một giao thức định tuyến theo vectơ khoảng cách được sử dụng rộng rãi trên thế giới .Mặc dù RIP không có những khả năng và đặc điểm như những giao thức định tuyến khác nhưng RIP dựa trên những chuẩn mở và sử dụng đơn giản nên vẫn được các nhà quản trị mạng ưa dùng .Do đó RIP là một giao thức tốt để người học về mạng bước đầu làm quen .Trong chương này sẽ giới thiệu cấu hình RIP và xư lý sự cố đối với RIP"],[1826,"Giống như RIP, IGRP (Interior G g Protocol)cũng là một giao thức i RIP, IGRP là giao thức độc dựa trên các chuẩn mở"],[1827,"IGRP với IGRP"],[1828,"Sử dụng lệnh ip classless o hức định tuyến động giúp ch ản hơn nhiều"],[1829,"Nhờ có ateway Routin định tuyến theo vectơ khoảng cách"],[1830,"Nhưng khác vớ quyền của Cisco chứ không phải là một giao thức phức tạp hơn so với RIP, sử dụng nhiều thông số để chọn đường đi tốt nhất đến đích nhưng IGRP vẫn là một giao thức sử dụng đơn giản .Trong chương này cũng sẽ giới thiệu cấu hình IGRP và xử lý sự cố đối Sau khi hoàn tất chương trình ,các bạn sẽ thực hiện được những việc sau : \u2022 Mô tả được tai sao định tuyến lặp vòng lại xảy ra đối với định tuyến theo vectơ khoảng cách"],[1831,"\u2022 Mô tả được các phương pháp được sử dụng để đảm bảo cho các giao thức định tuyến theo vectơ khoảng cách định tuyến đúng"],[1832,"\u2022 Cấu hình RIP \u2022"],[1833,"144 \u2022 Xử lý sự cố của RIP \u2022 Cấu hình RIPđể chia tải \u2022 Cấu hình đường cố định cho 7.1.1"],[1834,"Cập nhật thông tin định tuyến Bảng định tuyến được cập nhật theo chu kỳ hoặc khi cấu trúc mạng có sự thay đổi .Điểm quan trọng đối với một giao thức định tuyến là làm sao cập nhật bảng định tuyến một cách hiệu quả .Khi cấu trúc mạng thay đổi ,thông tin cập nhật phải được xử lý trong toàn bộ hệ thống .Đối với định tuyến theo vectơ khoảng cách thì mỗi router gửi toàn bộ bảng định tuyên của mình cho các router kết nối trực tiếp với nó.Bảng định tuyến bao gồm các thông tin về đường đi tới mạng đích như:tổng chi phí (ví dụ như khoảng cách chẳng hạn )tính từ bản thân router đến mạng đích ,địa chỉ của trạm kế tiếp trên đường đi"],[1835,"RIP \u2022 Kiểm tra cấu hình RIP \u2022 Cấu hình IGRP \u2022 Kiểm tra hoạt động của IGRP \u2022 Xử lý sự cố IGRP 7.1"],[1836,"Định tuyến theo vectơ khoảng cách Hình 7.1.1 7.1.1"],[1837,"Lỗi định tuyến lặp"],[1838,"145 Hình 7.1.2 Định tuyến lặp có thể xảy ra khi bảng định tuyến trên các router chưa được cập nhật hội tụ do quá trình hội tụ chậm"],[1839,"1"],[1840,"Trước khi mạng 1 bị lỗi ,tất cả các router trong hệ thống mạng đều có thông tin đúng về cấu trúc mạng và bảng định tuyến là chính xác .Khi đó chúng ta nói các router đã hội tụ .Giả sử rằng :router C chọn đường đến Mạng 1 bằng con đường qua router Bvà khoảng cách của con đường này từ router C đến Mạng 1 và 3 (hops)(Nghĩa là nếu đi từ router C đến Mạng 1 theo con đường này thì còn cách 3 router nữa)"],[1841,"2"],[1842,"Ngay khi mạng 1 bị lỗi, router E liền gửi thông tin cập nhật cho router A"],[1843,"Router A lập tức ngưng việc định tuyến về Mạng 1"],[1844,"Nhưng router B, C và D vẫn tiếp tục việc này vì chúng vẫn chưa hay biết về việc Mạng 1 bị lỗi"],[1845,"Sau đó router A cập nhật thông tin về Mạng 1 cho router B và D"],[1846,"Router B,D lập tức ngưng định tuyến các gói dữ liệu về Mạng 1 nên nó vẫn định tuyến các gói dữ liệu đến Mạng 1 qua router B"],[1847,"3"],[1848,"Đến thời điểm cập nhật định er C, trong thông tin cập nhật của router C gửi cho router D vẫ n về đường đến Mạng 1 qua router D thấy rằng thông tin này tốt hơn thông tin báo Mạng 1 bị lỗi mà nó vừa nhận được từ router A lúc này"],[1849,"Do đó router D cập nhật lại i cập nhật xong gửi cho router A"],[1850,"Tương tự, router A cũng cập nhật lại đường đến Mạng 1 lúc này là qua kỳ của rout n có thông ti B"],[1851,"Lúc này router thông tin này vào bảng định tuyến mà không biết rằng như vậy là sai .Lúc này, trên bảng định tuyến, router D có đường tới Mạng 1 là đi qua router C"],[1852,"Sau đó router D lấy bảng định tuyến vừa mớ"],[1853,"146 router D rồi gửi cho router Bvà E"],[1854,"Quá trình tương tự tiếp tục xảy ra ở router B,E"],[1855,"Khi đó, bất kỳ gói dữ liệu nào gửi tới Mạng 1 đều bị gửi lặp vòng từ router C tới r 7.1.3"],[1856,"Định nghĩa giá trị tố outer B tới router A tới router D rồi tới router C"],[1857,"i đa Với vectơ khoảng cách sử dụng số lượng hop thì mỗi khi router chuyển thông tin cập nhật cho router khác ,chỉ số hop sẽ tăng lên 1.Nếu không có Bản thân thuật toán định tuyến theo vectơ khoảng cách có thể tự sữa lỗi được nhưng quá trình lặp vòng này có thể kéo dài đến khi nào đếm đến vô hạn"],[1858,"Do đó để tránh tình trạng lỗi này kéo dài, giao thức định tuyến theo vectơ khoảng cách đã định nghĩa giá trị tối đa"],[1859,"Bằng cách này ,giao thức định tuyến cho phép vòng lặp kéo dài đến khi thông số định tuyến vượt qua giá trị tối đa"],[1860,"Ví dụ như hình vẽ dưới, khi thông số định tuyến là 16 hop lớn hơn giá trị tối đa là 15 thì thông tin cập nhật đó sẽ bị router huỷ bỏ"],[1861,"Trong bất kỳ trường hợp nào, khi giá trị của thông số định tuyến vượt qua giá trị tối đa thì xem như mạng đó là không đến được"],[1862,"Việc cập nhật sai về Mạng 1 như trên sẽ bị lặp vòng như vậy hoài cho đến khi nào có một tiến trình khác cắt đứt được quá trình này"],[1863,"Tình trạng như vậy gọi là đếm vô hạn, gói dữ liệu sẽ bị lặp vòng trên mạng trong khi thực tế là Mạng 1 đã bị ngắt"],[1864,"thông số là biện pháp khắc phục tình trạng đếm vô hạn ,thì cứ như vậy chỉ số hop sẽ tăng lên đến vô hạn"],[1865,""],[1866,"147 Hình 7.1.3 7.1.4"],[1867,"Tránh định tuyến lặp vòng bằng split horizone Một nguyên nhân khác gây ra lặp vòng là router gửi lại những thông tin định tuyến mà nó vừa nhận được cho chính router đã gửi những thông tin đó"],[1868,"Phần sau đây sẽ phân tích cho các bạn thấy sự cố xảy ra nh thế nào: 1"],[1869,"Router A gửi một thông tin outer B và D thông báo là Mạng 1 vẫn có đường đến Mạng 1 mặc dù ng tốt bằng con đường cũ của router B lúc truớc"],[1870,"Sau đó router B cũng cập nhật cho router A về đường ng qua router B"],[1871,"Router B thì định tuyến đến Mạng 1 thông qua router C"],[1872,"qua router D"],[1873,"Kết quả là bất kỳ gói dữ liệu nào đến Mạng 1 sẽ rơi vào vòng lặp này"],[1874,"này bằng cách: Nếu router B ừ router A thì chúng sẽ o router A nữa"],[1875,"Nhờ đó, split- thông tin cập nhật"],[1876,"ư cập nhật cho r đã bị ngắt"],[1877,"Tuy nhiên router C vẫn gửi cập nhật cho router B là router C có đường đến Mạng 1 thông tin qua router D, khoảng cách của đường này là 4"],[1878,"2"],[1879,"Khi đó router B tưởng lầm là router C con đường này có thông số định tuyến khô mới đến Mạng 1 mà router B vừa mới nhận được"],[1880,"3"],[1881,"Khi đó router A sẽ cập nhật lại là nó có thể gửi dữ liệu đến Mạng 1 thô Router C lại định tuyến đến Mạng 1 thông 4"],[1882,"Cơ chế split-horizon sẽ trách được tình huống hoặc D nhận được thông tin cập nhật về Mạng 1 t không gửi lại thông tin cập nhật về Mạng 1 ch horizon làm giảm được việc cập nhật thông tin sai và giảm bớt việc xử lý"],[1883,"148 Hình 7.1.4 7.1.5"],[1884,"Route poisoning Route poisoning được sử dụng để ác vòng lặp lớn và giúp cho router thông báo thẳng là mạng đã không truy cập được nữa bằng cách đặt giá trị cho t cho router C bảng định tuyến này ,trong đó đường đến Mạng 5 có thông số hop là 16 được gọi là route poisoning .Sau khi hư vậy router sẽ thông báo về con đường đó với thông số định tuyến lớn hơn giá trị tối đa tránh xảy ra c thông số định tuyến (số lượng hop chẳng hạn )lớn hơn giá trị tối đa"],[1885,"Ví dụ như hình 7.1.5 : khi Mạng 5 bị ngắt thì trên bảng định tuyến của router E giá trị hop cho đường đến Mạng 5 là 16,giá trị này có nghĩa là Mạng 5 không truy cập được nữa .Sau đó router E cập nhậ router C nhận được cập nhật về route poisoning từ router E ,router C sẽ gửi ngược trở lại thông tin này cho router E .Lúc này ta gọi thông tin cập nhật về Mạng 5 từ router C gửi ngược lại cho router E là route poison reverse.Router C làm n để đảm bảo là nó đã gửi thông tin route poisoning ra tất cả các đường mà nó có"],[1886,"Khi route poisoning được sử dụng kết hợp với cập nhật tức thời sẽ giúp rút ngắn thời gian hội tụ giữa các router vì khi đó router không cần phải chờ hết 30 giây của chu kỳ cập nhật mới về route poisoning"],[1887,"Tóm lại ,route poisoning có nghĩa là khi có một con đường nào đó bị ngắt thì"],[1888,"149 .Cơ chế route poisoning không hề gây mâu thuẫn với cơ chế split horizon .Split horizon có nghĩa là khi router gửi thông tin cập nhật ra một đường liên kết thì router không được gửi lại những thông tin nào mà nó vừa nhận vào từ đường liên kết đó.Bây giờ ,router vẫn gửi lại những thông tin đó nhưng với thông số định tuyến lớn hơn giá trị tối đa thì kết quả vẫn như vậy .Cơ chế này gọi là split horizon kết hợp với poison reverse"],[1889,"Khi mạng 5 bị ngắt ,Router E sử dụng route poisoning bằng cách đặt giá trị 16 trên bảng định tuyến để cho biết mạng này không đến được nữa"],[1890,"Hình 7.1.5 7.1.6 Trách định tuyến lặp vòng bằng cơ chế cập nhật tức thời Hoạt động cập nhật bảng định tuyến giữa các router láng giềng được thực hiện theo chu kỳ .Ví dụ :cứ sau 30 giây RIP thực hiện cập nhật một lần .Ngoài ra còn có cơ chế cập nhật tức thời để thông báo về một thay đổi nào đó trong bảng định tuyến .Khi router phát hiện ra có một thay đổi nào đó trong cấu trúc thì nó lập tức gửi thông điệp cập nhật cho các router láng riềng để thông báo về sự thay đổi đó"],[1891,"Nhất là khi có một đường nào đó bị lỗi không truy cập được nữa thì router phải cập nhật tức thời thay vì đợi đến hết chu kỳ"],[1892,"Cơ chế cập nhật tức thời kết hợp với route poisoning sẽ đảm bảo cho tất cả các router nhận được thông tin khi có một đường nào đó bị ngắt trước khi thời gian holddown kết thúc"],[1893,"Cơ chế cập nhật tức thời cho toàn bộ mạ i có sự thay đổi trong cấu trúc mạng giúp cho các router được cập nhật kịp thờ ởi động thời gian holddown nhanh hơn"],[1894,"ng kh i và kh"],[1895,"150 Ví dụ như hình 7.1.6: router C c i ngay khi mạng 10.4.0.0 không truy cập được nữa"],[1896,"Khi nhận được thông tin này, router B cũng phát thông báo về mạng 10.4.0.0 ra cổng S0/1"],[1897,"Đến lướt router A cũng sẽ phát thông báo ra cổng Fa0/0"],[1898,"NetWordk 10.4.0.0 is unreachable Với cập nhật tức thời, router sẽ gửi thông điệp ngay để thông báo sự thay đổi trong bảng định tuyến của mình ập nhật tức thờ Hình 7.1.6 7.1.7"],[1899,"Tránh lặp vòng với thời gian holddown hạn như đã đề cập ở phần 7.1.2 có thể tránh được bằng cách sử dụng thời gian holddown như sau: uter nhận được thông tin cập nhật từ chính router láng riềng lúc nãy thông báo là mạng X đã truy cập lại được thì router mới cậ thời gian holddown"],[1900,"với thông Tình trạng lặp vòng đến vô Khi router nhận được từ router láng giềng một thông tin cho biết là một mạng X nào đó bây giờ không truy cập được nữa thì router sẽ đánh dấu vào con đường tới mạng X đó là không truy cập được nữa và khởi động thời gian holddown"],[1901,"Trong khoảng thời gian holddown này, nếu ro p nhật thông tin đó và kết thúc Trong suốt thời gian holddown nết router nhận được thông tin cập nhật từ một router láng riêng khác (không phải là router láng giềng đã phát thông tin cập nhật về mạng X lúc nãy) nhưng thông tin này cho biết có đường đến mạng X"],[1902,"151 số n cập nh t nhầm nh ết gì về việc mạng X đã hống đều đã được cập nhật là ruy cập được nữa, khi đó các router đều có thể nhận biết chính xác v ng"],[1903,"Do đó, sau khi thời gian holddown kết thúc thì các router lại cậ tin như bình thường"],[1904,"đị h tuyến tốt hơn con đường mà router trước đó thì nó sẽ bỏ qua, không ật thông tin này"],[1905,"Cơ chế naỳ giúp cho router tránh được việc cập nhậ ững thông tin cũ do các router láng giềng chưa hay bi không truy cập được nữa"],[1906,"Khỏng thời gian holddown bảo đảm cho tất cả các router trong hệ thống mạng đã được cập nhật xong về thông tin mới"],[1907,"Sau khi thời gian holddown hết thời hạn, tất cả các router trong hệ t mạng X không t c mạề cấu trú p nhật thông Hình 7.1.7 7.2 được mô tả chi tiết trong 2 văn bản"],[1908,"Văn bản đầu tiên là RFC1058 và văn ản thứ 2 là Tiêu chuẩn Internet(STD)56"],[1909,"RIP được phát triển trong nhiều năm bắt đầu từ phiên bản 1 (RIPv1) RIP chỉ là giao thức định tuyến theo lớp địa chỉ cho đến phiên bản 2(RIPv2) .RIP ến trình của RIP 7.2.1"],[1910,"Ti IP RIP b"],[1911,"152 RIP tr n vô hạn bằng cách giới hạn số lượng hop tối đa cho phép từ máy gửi đến máy nhận, số lương hop tối đa cho mỗi con đường là r nhân được từ thông tin cập nhật của router uter xem bản thân nó cũng là 1 hop trên đường đi"],[1912,"Nếu sau khi tăng chỉ số hop lên 1 mà chỉ số này lớn hơn 15 thì rou ạng đích không tương ứng với con đương này không đến đư ng có những đặc tính tương tự như các giao thức định ở thành giao thức định tuyến không theo lớp địa chỉ"],[1913,"RIPv2 có những ưu điểm hơn như sau: \u2022 Cung cấp thêm nhiều thông tin định tuyến hơn"],[1914,"\u2022 Có cơ chế xác minh giữa các router khi cập nhật để bảo mật cho bảng định tuyến"],[1915,"\u2022 Có hỗ trợ VLSM(variable Length Subnet Masking-Subnet mask có chiều dài khác nhau)"],[1916,"RIP tránh định tuyến lặp vòng đếm đế 15"],[1917,"Đối với các con đường mà route láng giềng, router sẽ tăng chỉ số hop lên 1 vì ro ter sẽ xem như m ợc"],[1918,"Ngoài ra, RIP cũ tuy : RIP cũng có horizon và thời gian holddown để tránh cập nhật thông tin định tuyến không chính xác"],[1919,"Các đặc điểm chính của RIP ến khác"],[1920,"Ví dụ như \u2022 Là giao thức định tuyến theo vectơ khoảng cách"],[1921,"\u2022 Thông số định tuyến là số lương hop"],[1922,"\u2022 Nếu gói dữ liệu đến mạng đích có số lượng hop lớn hơn 15 thì gói dữ liệu đó sẽ bị huỷ bỏ"],[1923,"\u2022 Chu kỳ cập nhật mặc định là 30 giây"],[1924,"7.2.2"],[1925,"Cấu hình RIP chỉ trạm kế tiếp RIP Lênh router rip dùng để khởi động RIP"],[1926,"Lênh network dùng để khai báo những cổng giao tiếp nào của router được phép chạy RIP trên đó"],[1927,"Từ đó RIP sẽ bắt đầu gửi và nhận thông tin cập nhật trên các cổng tương ứng RIP cập nhật thông tin định tuyến theo chu kỳ"],[1928,"Khi router nhận được thông tin cập nhật có sự thay đổi nào đó thì nó sẽ cập nhật thông tin mới vào bảng định tuyến"],[1929,"Đối với những con đường tới mạng đích mà router học được từ router láng giềng thì nó sẽ tăng chỉ số hop lên 1 địa chi nguần của thông tin cập nhật này sẽ là địa"],[1930,"153 chỉ chon một con đường tốt nhất đến mạng đích, tuy nhiên nó cũng có thể sử dụng nhiều con đường có chỉ số bằng nhau đến cùng 1 đích"],[1931,"Ch ho RIP thực hiên cập nhật tức thời khi cấu trúc mạng tha ip rip triggered"],[1932,"Lệnh này chỉ áp dụng cho cổng serial của ro r ạng thay đổi, router nào nhận biết được sự thay đổi đầu tiên o bảng định tuyến của nó trước, sau đó nó lập tức gửi thông tin cập ề cấu hình của RIP úng ta có thể cấu hình c y đổi bằng lệnh ute"],[1933,"Khi cấu trúc m sẽ cập nhật và nhật cho các router khác để thông báo về sự thay đổi đó"],[1934,"Hoạt động này là cập nhật tức thời va nó xảy ra hoàn toàn độc lập với cập nhật đinh kỳ"],[1935,"hình 7.2.2 là một ví dụ v Hình 7.2.2 hai báo mạng kết nối trực tuyến vào router"],[1936,"c phải làm, chúng ta chỉ cấu hình thêm nếu thấy cần thiết: \u2022 BHM(config)#router rip- chọn RIP làm giao thức định tuyến cho router"],[1937,"\u2022 BHM(config- router)#network10.0.0.0- k \u2022 BHM (config- router) #network 192.168.13.0-khai báo mạng kết nối trực tuyến vào router"],[1938,"Các cổng trên router kết nối vào mạng 10.0.0.0 và 192.168.13.0 sẽ thực hiện gửi và nhận thông tin cập nhật về định tuyến"],[1939,"Sau khi đã khởi động RIP trên các mạng rồi chúng ta có thể thực hiện thêm một số cấu hình khác"],[1940,"Những cấu hình này không bắt buộ"],[1941,"154 \u2022 Điều chỉnh các thông số định tuyến"],[1942,"\u2022 Điều chỉnh các thông số về thời gian hoạt động của RIP"],[1943,"\u2022 Khai báo phiên bản của RIP mà ta đang sử dụng(RIPv1 hay RIPv2)"],[1944,"\u2022 Cấu hình cho RIP chỉ gửi thông tin định tuyến rút gọn cho một cổng nào đó"],[1945,"\u2022 Kiểm tra thông tin định tuyến IP rut gọn"],[1946,"\u2022 Cấu hình cho IGRP và RIP chạy đồng thời"],[1947,"\u2022 Không cho phép RIP nhận thông tin cập nhật từ một địa chỉ IP nào đó"],[1948,"\u2022 Mở hoặc tắt chế độ split horizon"],[1949,"\u2022 Kết nối RIP vào mạng WAN"],[1950,"Tóm lại, để cấu hình RIP, chúng ta có thể bắt đầu từ chế độ cấu hình toàn cục như sau: \u2022 Router(config)# router rip \u2013 khởi động giao thức định tuyến RIP"],[1951,"\u2022 Router(config- router)#network network- number- khai báo các mạng mà RIP được phép chạy trên đó"],[1952,"7.2.3"],[1953,"Sử dụng lệnh ip classless"],[1954,"Khi router nhận được gói dữ liệu có địa chỉ đích là một subnet không có trên bảng định tuyến của router"],[1955,"Trên bảng định tuyến của router không có chính xác subnet với subnet đích của gói dữ liệu"],[1956,"Ví dụ: một tổ chức sử dụng địa chỉ mạng 10.10.0.0/16, khi đó subnet 10.10.10.0/24 có supernet là 10.10.0.0/16"],[1957,"Trong ậy, ta dung lệnh ip classless để router không hủy bỏ dữ liệu mà sẽ ờng đến địa chỉ supernet, nếu có"],[1958,"Đối với phần mền Cisco IOS hiên bản 11.3 trở về sau, mặc định là lệnh ip classlet đã được chạy trong cấu hình của router"],[1959,"Nếu bạn tắt lệnh này đi thì dùng lệnh NO của câu lệnh này"],[1960,"Tuy nhiên, nếu không có chức năng này thì tất cả các gói có địa chỉ đích là một subnet có cùng supernet với các điạ chỉ mạng khác của router nhưng lại không có trong bảng định tuyến"],[1961,"Đây chính là đặc điểm quan trọng của giao thức định tuyến theo lớp"],[1962,"Nếu một địa chỉ mạng lớn được chia thành các subnet con chứ không có toàn bộ các subnet"],[1963,"Khi đó gói dữ liệu nào có địa chỉ đích là một subnet nằm trong địa chỉ mạng lớn nhưng lại không có trên bảng định tuyến của router thì router sẽ hủy bỏ"],[1964,"trường hợp như v chuyển gói ra đư p"],[1965,"155 Hình 72.2.3a.khi không có lệnh ip classless"],[1966,"đích là một subnet không có trên bảng định tuyến nhưng lại có cùng supernet với các mạng kết nối trực tiếp vào router thì router xem như mạng đích đó ịnh tuyến của router có cấu hìn này băng cách cho phép router không c a ch a"],[1967,"khi đó router không tìm thấy được cụ thể mạng đích trên bảng định tuyến thì nó sẽ sử dụng đương mặc định để chuyển gói đi"],[1968,"Cơ chế này bị nhầm lẫn nhất khi router có cấu hình đường mặc định"],[1969,"Từ một địa chỉ mạng lớn chia thành nhiêu subnet con"],[1970,"Kết nối trực tiếp vào router chỉ có một số subnet"],[1971,"Khi router xây dựng bảng định tuyến, trên bảng định tuyến đương nhiên có các subnet của mạng kết nối trực tiếp vào router"],[1972,"Còn những subnet nào không có thì router coi như subnet đó không tồn tại"],[1973,"Do đó, khi router nhận được gói dữ liệu có địa chỉ không tồn tại và hủy bỏ gói dữ liệu cho dù trên bảng đ h đường mặc đinh"],[1974,"Lệnh ip classless sẽ giải quết vấn đề ần quan tâm đến lớp của đị ỉ đích nữ"],[1975,"156 Hình 7.2.3b: Khi có l nh ip classless"],[1976,"7.2.4"],[1977,"những vấn đề thường gặp kh P"],[1978,"Ro g giềng để học thông tin đến các mạng mà không kết nối trực tiêp vào router"],[1979,"RIP sử dụng thuật toán đinh tuyến theo vectơ khoảng cách đề có nhược điểm chính tốc độ hội tụ chậm"],[1980,"Trạng thái hội tụ là khi tất cả các router trong hệ thống mạng đều có thông tin đinh tuyến về hệ thống mạng giống nhau và chính xác"],[1981,"Các giao thức định tuyến theo vectơ khoảng cách thường gặp vấn đề về định tuyến lặp vòng và đếm đến vô hạn"],[1982,"Đây là hậu quả khi các router chưa được hội tụ nên truyền cho nhu những thông tin cũ chưa được cập nhật đúng"],[1983,"Để giải những vấn đề này RIP sử dụng những kỹ thật sau \u2022 Định nghĩa giá trị tối đa \u2022 Split horizon"],[1984,"\u2022 Poison reverse"],[1985,"\u2022 Thời gian holddown"],[1986,"\u2022 Cập nhật tức thời"],[1987,"Có một số kỹ thuật đòi hỏi bạn phải cấu hình còn một số khác thì không cần cấu hình gì cả hoặc chỉ cần cấu hình một chút thôi"],[1988,"ệ i cấu hình RI uter định tuyến theo RIP phải dựa vào các router lán"],[1989,"157 RIP giới hạn số hop tối đa là 15"],[1990,"Bất kỳ mạng đích nào có số hop lớn hơn 15 thì xem như mạng đó không đếm được"],[1991,"Điều này làm cho RIP bị hạn chế không sử dụng được cho những hệ thống mạng lớn nhưng nó giúp cho RIP tránh được lỗi đếm đến vô hạn"],[1992,"Luật split horizon la: khi gửi thông tin cập nhật ra một hướng nào đó thì không gửi lại những thông tin mà router đã nhận được từ hường đó"],[1993,"Trong một số cấu hình mạng thì bạn cần phải tắt cơ chế split horizon: GAD (config-if)#no ip split- horizon Th ột thông số mà bạn có thể thay đổi nếu cần"],[1994,"Khoảng thời gian holddown giúp cho router tránh bị lặp vòng đếm đến vô hạn nhưng đồng thời nó cũng làm tăng thời gian hội tụ giữa các router"],[1995,"Trong khoảng thời gian này, router không cập nhật những đường nào có thông số định tuyến không tốt bằng con đường mà router có trước đó, như vậy thì có khi có đường khác thay thế cho đường cũ thật nhưng router cũng không cập nhật"],[1996,"Thời gian holddown mặc định của RIP là 180 giây"],[1997,"Bạn có thể điều chỉnh thời gian holddown ngắn lại đêt tăng tốc độ hội tụ nhưng bạn nên cân nhắc kỹ"],[1998,"Thời gian holddown lý tưởng là phải dài hơn khoảng thời gian dài nhất có thể để cho toàn bộ hệ thống mạng được cập nhật song"],[1999,"Ví dụ như hình dưới, chúng ta có 4 router"],[2000,"Nếu mối router có thời gian cập nhật là 30 giây thì thời gian tối đa để cho cả 4 router cập nhật xong là 120 giây như vậy thời gian holddown phải dài hơn 120 giây"],[2001,"Đêt thay đổi thời gian holddown bạn dùng lệnh sau Router(config- router)#timers basic u holddown flush[sleeptime] ời gian holddown là m pdate invalid"],[2002,"158 Hình 7.2.4 Một lý do khác làm ảnh hưởng đến tốc độ hội tụ là chu kỳ cập nhật"],[2003,"chu kỳ cập nh ạn có thể điều chỉnh cho chu kỳ cập nhật dài hơ tăn Để ay đổi chu kỳ cập nhật, bạn dụng lệnh sau GAD(config- router)#update-timer sec Còn m gặp đối với giao thức định tuyến là ta không muốn o ập nhật về định tuyến ra một cổng nào đó địa chỉ mạng là lập tức RIP bắt đầu gử a chỉ mạng nằm trong mạng ạng có thể không cho phép gửi thông tin cập h một cổng nào đó bằng lệnh passive \u2013 interface"],[2004,"GA sive- interface Fa0/0"],[2005,"RI như lay thì ta cần phải khai báo các router RIP láng giềng bằng lệnh sau: GA ip address ật mặc định của RIP là 30 giây"],[2006,"B n để tiếp kiệm băng thông đường truyền hoặc rút ngắn chu kỳ cập nhật lại để g tốc độ hội tụ"],[2007,"th onds"],[2008,"ột vấn đề nữa mà ta thường i các thông tin cch các giao thức này gử"],[2009,"Sau khi bạn nhập lệnh network để khai báo i các thông tin định tuyến ra tất cả các cổng có đị mà bạn vừa khai báo"],[2010,"Nhà quản trị m n ật về định tuyến ra D(config- router)#pas P là giao thức broadcast"],[2011,"Do đó, khi muốn chạy RIP trong mạng non-broadcast Frame Re D(config- router) # neighbor"],[2012,"159 Phầ nh iên bản 1"],[2013,"Nhà quản trị mạng có thể cấu hình cho router chỉ gửi và nhận gói phiên bản 1 hoặc là chỉ gửi gói phiên bản 2\u2026bằng các lệnh sau: GAD(config- router) # version {1/2} GAD(config- if) # ip rip send version 1 GAD(config- if) # ip rip send version 2 GAD(config- if) # ip rip send version 1 2 GAD(config- if) # ip rip receive version 1 GAD(config- if) # ip rip receive version 2 GAD(config- if) # ip rip receive vers 7.2 Có nh để kiểm tra cấu hình RIP có đúng hay không"],[2014,"Trong đó ha ệ c sử dụng nhiều nhẩt là Show ip route và show ip proto s Lệnh protocols sẽ hiển thị các giao thức định tuyến IP đang được chạy trên ro e iển thị của lệnh này có thể giúp bạn kiểm tra được phần lớn cấu hình của RIP nhưng chưa phải là đầy đủ, toàn bộ"],[2015,"sau đây là một số điểm bạn cần chú ý kiểm tra: \u2022 Có đúng là giao thức định tuyến RIP đã được cấu hình hay không"],[2016,"\u2022 RIP được cấu hình để gửi và nhận thông tin cập nhật trên các cổng vào, có chính xác hay không"],[2017,"\u2022 Các địa chỉ mạng được khai báo trên router để chạy RIP có đúng hay không"],[2018,"n mền Cisco IOS mặc nhiên nhận gói thông tin của cả RIP phiên bản 1 và 2 ưng chỉ gửi đi gói thông tin bằng RIP ph ion 1 2 .5.kiểm tra cấu hình RIP iều lệnh có thể sử dụng i l nh thường đướ col"],[2019,"show ip ut r"],[2020,"Kết quả h"],[2021,"160 Hình 7.2.5a"],[2022,"Lện router được sử dụng để kiểm tra xem những đường đi mà router học đượ rên"],[2023,"Trê dấu bằng chữ \u201cR\u201d giềng"],[2024,"Bạ router luôn có một khoảng thời gian để hội tụ với nh , tuyến đượ số lệnh khác mà bạn có thể sử dụng để kiểm tra cấu hì \u2022 ce"],[2025,"\u2022 \u2022 h show ip c từ các router RIP láng giềng có được cài đặt vào bảng định tuyến không t n kết quả hiển thị bảng định tuyến, bạn kiểm tra các đường có đánh ở đầu dòng là những đường mà router học đựơc từ các router RIP láng n cũng nên nhớ rằng các au do đó các thông tin mới có thể chưa được hiển thị ngay trên bảng định c"],[2026,"Ngoài ra còn có một nh RIP : Show interface interfa Show ip interface interface"],[2027,"Show running \u2013config"],[2028,"161 Hình 7.2.5b"],[2029,"7.2.6"],[2030,"Xử lý sự cố về hoạt động cập nhật của RIP Hầu hết các lỗi cấu hình RIP đều do khai báo câu lệnh network sai, subnet không liên tục hoặc là do split horizon"],[2031,"Lệnh có tác dụng nhẩt trong việc tìm lỗi của RIP trong họat động cập nhật là lệnh debug ip rip Lệnh debug ip rip sẽ hiển thị tất cả các thông tin định tuyến mà RIP gửi và nhận"],[2032,"Ví dụ trong hình 7.2.6a cho thấy kết quả hiển thị của lệnh debug ip rip"],[2033,"Sau khi nhận được thông tin cập nhật , router sẽ xử lý thông tin đó rồi sau đó gửi thông tin mới vừa cập nhật ra các cổng"],[2034,"Trong hình 7.2.6a cho thấy router chạy RIP phiên bản 1 và RTP gửi cập nhật theo kiểu broadcast(địa chỉ broadcast 255.255.255.255)"],[2035,"Số trong ngoặc đơn là địa chỉ nguần của gói thông tin cập nhâth RIP"],[2036,""],[2037,"162 Hình 7.2.6a ất nhiều điểm quan trọng mà bạn cần chú ý trong kết quả hiển thị củCó r a lênh debug ip rip"],[2038,"Một số vấn đề phải ví dụ như subnet không liên tục hay trùng subnet, có th là c số ể phát hiện được nhờ lệnh này"],[2039,"Trong những trường hợp như vậy bạn sẽ thấy ùng một mạng đích nhưng router gửi thông tin đi thì mạng đích đó lại có thông đinh tuyến thấp hơn so với khi router nhận vào trước đó"],[2040,"Hình 7.2.6b"],[2041,"Subnet không liên tục"],[2042,"163 Hình 7.2.6c: Trùng Subnet Ng 7.2.7"],[2043,"Ngăn không cho router gửi thông tin định tuyến ra một cổng giao tiếp Router có thể thực hiện chọn lọc thông t ến khi cập nhật hoặc khi gửi thông tin cập nhật"],[2044,"Đối với router sử ức định tuyến theo vectơ khoảng các nhậ thứ các trạn"],[2045,"Chính vì vậy mà cách thực hiện để ngăn không cho router gửi thông tin định tuyến ra ưới đây chỉ sử dụng cho các giao thức định tuy Bạ cập về định tuyến ra một cổng nào đó"],[2046,"Làm như vậy thì bạn sẽ ngăn được hệ thố g mạng khác học được các thông tin định tuyến trong hệ thống của mình"],[2047,"oài ra còn một số lệnh có thể sử dụng để xử lý sự cố của RIP: \u2022 Show ip database"],[2048,"\u2022 Show ip protocols( summary)"],[2049,"\u2022 Show ip route"],[2050,"\u2022 Debug ip rip{ events}"],[2051,"\u2022 Show ip interface brief"],[2052,"in định tuy dụng giao th h, cơ chế này có tác dụng vì router định tuyến dựa trên các thông tin định tuyến n được từ các router láng giềng"],[2053,"Tuy nhiên, đối với các router sử dụng giao c định tuyến theo trạng thái đường liên kết thì cơ chể trên không hiệu quả vì giao thức định tuyến này quyết định chọn đường đi dựa trên cơ sở dữ liệu về g thái các đường liên kết chứ không dựa vào thông tin định tuyến nhận được một cổng giao tiếp được đề cập d ến theo vectơ khoảng cách như RIP, IGRP thôi"],[2054,"n có thể sử dụng lệnh passive interface để ngăn không cho router gửi thông tin nhật n"],[2055,"164 Đố thô vẫn i với RIP và IGRP, lênh passive interface sẽ làm cho router ngưng việc gửi ng tin cập nhật về định tuyến cho một router láng giềng nào đó, nhưng router tiếp tục lắng nghe và nhận thông tin cập nhật từ router láng giềng đó"],[2056,"Hình 7.2.7 .8"],[2057,"Chia tải với RIP uter có thể chia tải ra nhiều đường khi có nhiều đường tốt đến cùng một đích"],[2058,"n có thể cấu hình bằng tay cho router chia taỉ ra các đường hoặc là các giao c định tuyến động có thể tự tính toán để chia tải"],[2059,"có khả năng chia 7.2 Ro Bạ thứ RIP tải ra tối đa là sáu đường có chi phí bằng nhau, còn mặc định thì RIP chỉ chia ra làm 4 đường"],[2060,"RIP thực hiện chia tải bằng cách sử dụng lần lượt và luân phiên từng đường"],[2061,"Tro Đầ 3-4 hop của ng hình7.2.8a là ví dụ cho ta thấy RIP chia tải ra 4 đường có chi phí bằng nhau"],[2062,"u tiên router bẳt đầu với đường số 1 rồi sau đó lần lượt các đường 2-3-4 rồi1-2- -1 và cứ tiếp tục luân phiên như vậy"],[2063,"vì thông số định tuyến của RIP là số lượng lên các đường này được xem là như nhau, RIP không cần quan tâm đến tốc độ mỗi đường"],[2064,"Do đó đường 56kbps cũng giống như đường 155Mbps"],[2065,""],[2066,"165 Hình 7.2.8a ng hình 7.2.8b là ví dụ về kết quả hiển thị của lệnh show ip route"],[2067,"Trong đó, thấy có hai phần, mỗi phần mô tả về một đường"],[2068,"Trong phần mô tả về đường hai có dấ Tro bạn thứ u(*) ở đầu dòng"],[2069,"Dấu (*) này cho biết con đường này là con đường kế tiếp sẽ được sử dụng"],[2070,"H 7.2 ình 7.2.8b .9"],[2071,"Chia tải cho nhiều đường"],[2072,"166 Ro mụ các toá Khi router nhận được thông tin cập nhật về nhiều đường khác nhau đến cùng một đích thì router s nhấ tin thô tuyến sẽ có cách tính chi phí khác nhau và bạn cần phải cấu hình các chi phí này để router thực hiện chia tải"],[2073,"Kh đíc tải bản có Mặ địn cho tuyến 1 đường đến 1 đích"],[2074,"uter có khả năng chia tải ra nhiều đường để chuyển các gói dữ liệu đến cùng c đích"],[2075,"Chúng ta có thể cấu hình bằng tay cho router thực hiện chia tải hoặc là giao thức định tuyến động như RIP ,IGRP,EIGRP và OSPF sẽ tự động tính n"],[2076,"ẽ chọn đường nào có chỉ số tin cậy(Admintrative distance) nhỏ t để đặt vào bảng định tuyến"],[2077,"Trong trường hợp các đường này có cùng chỉ số cậy thì router sẽ chon đường nào có chi phí thấp nhất hoặc là đường nào có ng số định tuyến nhỏ nhất"],[2078,"Mỗi giao thức định i router có nhiều đường có cùng chỉ số tin cậy và cùng chi phí đến cùng một h thì router sẽ thực hiện việc chia tải"],[2079,"Thông thường thì router có khả năng chia đến 6 đừơng có cùng chi phí( giới hạn tối đa số đường chia tải là phụ thuộc vào g định tuyến của Cisco IOS), tuy nhiên một số giao thức định tuyến nội (IGP) thể có giới hạn riêng"],[2080,"Ví dụ như EIGRP chỉ cho phép tối đa là 4 đường"],[2081,"c định thì hầu hết các giao thức định tuyến IP đều chia tải ra 4 đường"],[2082,"Đường cố h thì chia tải ra 6 đường"],[2083,"Chỉ riêng BGP là ngoại lệ, mặc định của BGP là chỉ phép định Hình 7.2.9a"],[2084,"167 Số đườ Ro IGR đườ a vào băng thông để chọn đường chia tải"],[2085,"Ví dụ như hình 7.2.9a, có ba đường đến mạng X : \u2022 Từ E qua B qua A, thông số định tuyến là 30"],[2086,"\u2022 Từ E qua C qua A , thông số định tuyến là 20"],[2087,"\u2022 Từ E qua D qua A, thông số định tuyến là 45"],[2088,"Router E sẽ chọn đường thứ 2 vì đư ó thông số định tuyến 20 là nhỏ nhất"],[2089,"Khi định tuyến IP, Cisco IOS có hai c ải là: chia tải theo gói dữ liệu và chia tải theo địa chỉ đích"],[2090,"Nếu router theo tiến trình thì router sẽ chia gó eo gói dữ liệu"],[2091,"Còn nếu router chuyển mạch nhanh thì router sẽ chuyển tất cả gói dữ liệu đến cùng mục đích ra mộ tải đường tối đa mà router có thể chia tải là từ 1 đến 6 đường"],[2092,"Để thay đổi số ng tối đa cho phép bạn sử dụng lệnh sau: uter(config- router) #maximum-paths[number]"],[2093,"P có thể chia tải lên tối đa là 6 đường"],[2094,"RIP dựa vào số lượng hop để chọn ng chia tải, trong khi IGRP thì dự ờng E \u2013C-A c ơ chế chia t chuyển mạch i dữ liệu ra các đường"],[2095,"cách này gọi là chia tải th t đường"],[2096,"Các gói dữ liệu đến host khác nhưng trong cùng một mạng đich thì sẽ ra đường kế tiếp"],[2097,"Cách này gọi là chia tải theo địa chỉ đích"],[2098,"Hình 7.2.9b Đường cố định là đường do người quản trị cấu hình cho router chuyển gói tới mạng đích theo đường mà mình muốn"],[2099,"Mặt khác, lệnh để cấu hình ường cố định cũng được sử dụng để khai báo cho đường mặc định"],[2100,"Trong trường hợp router đ"],[2101,"168 không tìm thấy đường nào trên bảng chuyển gói đến mạng đích thì router sẽ sử dụng đường mặc định"],[2102,"Router chạy RIP có thể nhận được th ng mặc định từ những thông tin cập nhật của các router RIP láng giền là bản thân router được cấu hình đư Bạ cấu độn địn chỉ động có ch ọn lựa trước"],[2103,"Khi đường địn ng được nữa thì router sẽ sử dụng tới đường định tuy Nế thì Vì khô cố định nữa"],[2104,"Nếu bạn cấu hình đường cố định chỉ ra một cổng mà RIP không chạy trên cổng đó thì RIP sẽ không gửi thông tin cập nhậ ề đường cố định đó, trừ khi bạn phải cấu hình thêm lênh redistribute static cho Kh xóa ịnh tuyến"],[2105,"Tương tự như vậy khi router không còn xác định được trạm kế tiếp trên đường cố định cho gói dữ liệu tới mạng đích thì đường cố định đó cũng sẽ bị xóa khỏi bảng định tuyến"],[2106,"Trong hình 7.2.10a và 7.2.10b chúng ta thấy khi đường định tuyến ng của RIP bị sự cố thì đường cố định mà ta đã cấu hình cho router GAD được sử dụng thay thê"],[2107,"Đường cố định như vậy được gọi định dự phòng"],[2108,"Như trong ví dụ này hình với chỉ số AD là 130 lớn hơn chỉ số nhớ là trên router BHM cũng cần cấu hìn định tuyến để ông tin về đườ g khác"],[2109,"Hoặc ờng mặc định sẽ cập nhật thông tin định tuyến này cho các router khác"],[2110,"n có thể xóa đường cố định bằng lệnh no ip route"],[2111,"Người quản trị mạng có thể hình đường cố định bên cạnh định tuyến động"],[2112,"Mỗi một giao thức định tuyến g có 1 chỉ số tin cậy(AD).Người quản trị mạng có thể cấu hình một đường cố h tới cùng mạng đích với đường định tuyến động nhưng với chỉ số AD lớn hơn số AD của giao thức định tuyến động tương ứng"],[2113,"Khi đó đường định tuyến ỉ sốAD nhỏ hơn lên luôn luôn được router ch h tuyến động bị sự cố không sử dụ ến cố định để chuyển gói đến mạng đích"],[2114,"u bạn cẩu hình đường cố định chỉ ra một cổng mà RIP cũng chạy trên cổng đó RIP sẽ gửi thông tin cập nhật về đường cố định này cho toàn bộ hệ thống mạng"],[2115,"khi đó, đường cố định đó được xem như là kết nối trực tiếp vào router lên nó ng còn bản chất là một đừơng t v RIP"],[2116,"i một cổng giao tiếp bị ngắt thì tất cả các đường cố định chỉ ra cổng đó đều bị bởi bảng đ độ là đừơng cố chúng ta thấy là đường cố định được cấu AD của RIP (120)"],[2117,"Bên cạch đó, bạn nên h đường mặc định tương ứng"],[2118,""],[2119,"169 Hình 7.2.10a"],[2120,"170 H 7.3 7.3 a IGRP IGRP l thức định ảng cách chọn lựa đường đi bằng cách so sách vectơ kho hiện bả ông tin cập nhật, ro e \u2022 Xác \u2022 Cập ự cố về đường đi trên mạng ình 7.2.10b .IGRP .1"],[2121,"Đặc điểm củ à một giao thức định tuyến nội và định tuyến theo vectơ khoảng cách"],[2122,"Giao tuyến theo vectơ kho ảng cách"],[2123,"Router chạy giao thức định tuyến theo vectơ khoảng cách thực ng đinh tuyến theo định kỳ cho các router láng giềng"],[2124,"Dựa vào th ut r thực hiện 2 nhiệm vụ sau : định mạng đích mới"],[2125,"nhật s"],[2126,"171 IGRP IGRP thự trong phạm GRP: ác định"],[2127,"\u2022 Khả năng linh hoạt với các đặc tính băng thông và độ trễ khác nhau"],[2128,"Khả năng mở rộng cho hệ thống mạng lớn"],[2129,"Mặ IGR là c ng thông"],[2130,"\u2022 Độ trễ"],[2131,"\u2022 Độ tải"],[2132,"\u2022 Độ tin cậy 7.3.2 Thông số định tuyến của IGRP Bạn dùng lệnh show ip protocols để xem các thông số, các thông tin về mạng và các chính sách chọn lọc của các giao yến đang hoạt động trên router"],[2133,"Trong đó bạn sẽ thấy được cách tính toán thông số định tuyến của IGRP như trong hình 7.3.2"],[2134,"Mỗi một thông số có hệ số từ K1 \u2013 K5"],[2135,"K1 là hệ số của băng thông, K3 là hệ số của độ trễ"],[2136,"Mặc định thì K1 và K3 có giá trị là 1, còn K2 , K4 và K5 có giá trị l Việ kết Ng Sau tuyế \u2022 Băng thông :Giá trị băng thông thấp nhất của đường truyền"],[2137,"\u2022 Độ trễ :Tổng độ trễ dọc theo đường truyền"],[2138,"\u2022 là giao thức định tuyến theo vectơ khoảng cách do Cisco phát triển nên"],[2139,"c hiện cập nhật theo chu kỳ 90 giây / lần và chỉ gửi thông tin cập nhật vi một hê tự quản"],[2140,"Sau đây là các đặc điểm chính của I \u2022 Khả năng thích ứng với các cấu trúc mạng phức tạp và không x \u2022 c định thì IGRP sử dụng băng thông và độ trễ làm thông số định tuyến"],[2141,"Ngoài ra P còn có thể cấu hình để sử dụng nhiều thông số khác để định tuyến"],[2142,"Sau đây ác thông số mà IGRP có thể sử dụng để định tuyến: \u2022 Bă thức định tu à 0"],[2143,"c tính toàn thông số định tuyến từ nhiều thông số của đường đi như vậy sẽ cho quả chính xác hơn so với RIP chỉ dựa vào một thông số là số lượng hop"],[2144,"uyên tắc thì đường nào có thông số định tuyến nhở nhất là đường tốt nhất.: đây là các thông số của đường đi mà IGRP sử dụng để tính toán thông số định n : Độ tin cậy :Độ tin cậy trên một đường liên kết đến đích được xác định dựa trên hoạt động trao đổi các thông điệp keepalive"],[2145,""],[2146,"172 \u2022 Độ tải :Độ tải của đường truyền tính bằng bit/ giây"],[2147,"\u2022 MTU :Đơn vị truyền tối đa trên n"],[2148,"Thô định thì cho thôn lớn sẽ c 7.3"],[2149,"RP IGRP thực hiện quảng bá những loại đường sau : \u2022 \u2022 Đư ột cổng của router .Nếu một cổng giao tiếp của router kết nối vào một mạng không có chia thà ội bộ trong mạng đó"],[2150,"đường truyề ng số định tuyến được tính dựa vào một công thức tính từ 5 thông số trên.Mặc thì trong công thức này chỉ có băng thông và độ trễ .Còn những thông số khác chỉ được sử dụng khi được cấu hình .Bạn có thể cấu hình băng thông và độ trễ cổng giao tiếp của router.Bạn dùng lệnh show ip route sẽ xem được giá trị của g số định tuyến của IGRP đặt trong ngoặc vuông .Đường nào có băng thông hơn sẽ có thông số định tuyến nhỏ hơn , tượng tự đường nào có độ trễ ít hơn thì ó thông số định tuyến nhỏ hơn"],[2151,"3"],[2152,"Các loại đường trong IG \u2022 Đường nội bộ"],[2153,"Đường hệ thống"],[2154,"Đuờng ngoại vi"],[2155,"ờng nội bộ là những đường chỉ đi giữa các subnet kết nối vào cùng m nh nhiều subnet thỉ router không còn có đường n"],[2156,"173 Đường hệ thống là những đường đi giữ ạng trong cùng một hệ tự quản.Router hoc về đường hệ thống b n biết các mạng kết nối trực tiếp vào nó và học từ các thông tin cập nh hác .Trong IGRP ,các thôn a các m ằng cách nhậ ật từ các router IGRP k g tin về đường hệ thống không có thông tin về subnet tương ứng"],[2157,"Hình 7.3.3 ng ngoại vi là những đường đi ra ngoài hệ tự quản (autonomous Đuờ system).Thông thường thì đây là gateway của router để đi ra ngoài .Phần mềm Cisco IOS s hững đường ngoại vi của IGRP để làm gate Ro i mạng đích là một mạng không kết n ực ti c một đường nào khác để đến mạn ản có nhiều đường ngoại vi để kết nối ra ngoài thì mỗ 7.3.4"],[2158,"Tính ổ IGRP c ật để tăng tính ổn định trong hoạt động định tuyế \u2022 Holddowns : ẽ chọn một đường trong số n way"],[2159,"uter sẽ sử dụng đến đường gateway kh ối tr ếp vào router và router không tìm đượ g đích .Nếu trong một hệ tự qu i router có thể chọn cho mình một gateway khác nhau"],[2160,"n định của IGRP ũng có sử dụng một số kỹ thu n của nó như: \u2022 Thời gian holddown \u2022 Split horizon"],[2161,"Poison reverse"],[2162,"174 Thờ ho router cập nhật những thông tin đượ ưng lại là những thông tin cũ , chưa được cập nhậ Split horizo Split horizons là nguyên tắc giúp cho router tránh bị lặp vòng bằng cách ngăn khô r g tin cập nhật ra một hướng mà nó vừa nhận đượ Poi Spl pois nào rou đườ thì khi một con đường có thông số định tuyến tăng lên theo hệ số 1.1 hoặc lớn hơn nữa thì nó sẽ phát đi thông tin cập nhật poison resverse cho con đường đó"],[2163,"Ngoài ra, IGRP còn có nhiều thông số về thời gian khác như: chu kỳ cập nhật ,thời gian invalid, thời gian holddown ,thời gian xóa"],[2164,"Thông số của chu kỳ cập nhật cho b bao lâu thì router thực hiện gửi thông tin cập nhật một lần .Đối với IGRP chu kỳ mặc định là 90 gây"],[2165,"Giá t trong khoảng thời gian bao lâu thì router vẫn thực hi nhậ gian Nếu hold nhậ trướ thê trướ ến .Trong IGRP ,thời gian xóa bằng 7 lần chu kỳ cập nhật"],[2166,"i gian holddown được sử dụng để trách c c phát ra do chu kỳ cập nhật nh t mới"],[2167,"ns: ng cho outer gửi lại những thôn c tù chính hướng đó"],[2168,"son resverse: it horizons chỉ tránh được lặp vòng giữa 2 router kết nối trực tiếp với nhau ,còn on resverse có thể tránh được vòng lặp lớn hơn .Thông thường ,khi một đường đó có thông số định tuyến cứ tăng dần lên là đường đó đã bị lặp vòng .Khi đó ter phải phát ra thông tin poison resverse để xóa con đường đó và đặt con ng đó vào trạng thái holddown .Đối với IGRP iết thời gian trị của thời gian invalid cho biế ện gửi thông tin cập nhật bình thường về một đường nào đó trước khi xác n chắc chắn là con đường đó không còn sử dụng được nữa .trong IGRP , thời invalid mặc định là bằng 3 lần chu kỳ cập nhật"],[2169,"có một mạng đích bắt đầu được đặt vào trạng thái holddown thì thời gian down là khoảng thời gian mà router sẽ không cập nhật bất kỳ thông tin cập t nào về mạng đích đó nếu thông số định tuyến xấu hơn con đường router có c đó"],[2170,"Trong IGRP ,thời gian holddown mặc định bằng 3 chu kỳ cập nhật cộng m 10giây"],[2171,"Cuối cùng ,thời gian xóa là khoảng thời gian mà router phải chờ c khi thật sự xóa một con đường trong bảng định tuy"],[2172,"175 Th ieu vbản"],[2173,"Hình 7.3.5 6 Sự chuyển đổi từ RIP sang IGRP 7.3"],[2174,""],[2175,"176 Với đầu nội chọn đường dựa vào bằng thông và độ trễ của các đường liên kết mạng .IGRP hội tụ nhanh hơn RIP nên cũng trách được lặp vòng tốt hơn .Hơn nữa ,IGRP không còn bị giới hạn bởi s lượng hop như RIP nữa .Nhờ những ưu điểm trên, IGRP có thể phát triển c hệ thống mạng có cấu trúc lớn và phức tạp"],[2176,"ước để chuyển đổi từ RIP sang IGRP : sự ra đời của IGRP vào đầu thập niên 80 ,Cisco Sytems đã trở thành công ty tiên khắc phục được các nhược điểm của RIP khi định tuyến giữa các router bộ .IGRP quyết định ố được cho cá Sau đây là các b 1"],[2177,"Kểm tra xem trên router có chạy RIP hay không"],[2178,"Hình 7.3.6a Hình 7.3.6b"],[2179,"177 2"],[2180,"Cấu hình IGRP cho router A và B"],[2181,"Hình 7.3.6c 3"],[2182,"Nhập lệnh show ip protocols trên router A và B"],[2183,""],[2184,"178 Hình 7.3.6d"],[2185,"179 4"],[2186,"Nhập Hình 7.3.6e lệnh show ip route trên router A và B"],[2187,""],[2188,"180 Hình 7.3.6f Hình 7.3.6g 7.3.7 Ki Để ki g"],[2189,"Ngoài ra còn các l ểm tra cấu hình IGRP ểm tra xem IGRP đã được cấu hình đúng chưa bạn dùng lệnh show ip route và kiểm tra các đường của IGRP được đánh dấu bằng chữ \u201cI\u201d ở đầu dòn ệnh sau bạn có thể sử dụng để kiểm tra cấu hình IGRP : \u2022 Show interface interface \u2022 Show running-config"],[2190,"181 \u2022 Show running-config interface interface \u2022 Show running-config | begin interface interface \u2022 Show running-config | begin igrp \u2022 Show ip protocols kiểm tra xem cổng Ethernet đã được cấu hình đúng chưa thì bạn dùng lệnh Để sho Để p g w interface fa0/0"],[2191,"kiểm tra IGRP đã được chạy trên router chưa thì bạn dùng lệnh show i protocols"],[2192,"7.3.8 Xử lý sự cố của IGRP Phần lớn các sự cố của IGRP là do bạn khai báo sai lệnh network ,địa chỉ mạn IP không liên tục ,khai báo số AS sai"],[2193,"Hình 7.3.8a Sau \u2022 Show ip protocols \u2022 Show ip route \u2022 Debug ip igrp events \u2022 Debug ip igrp transactions \u2022 Ping \u2022 Traceroute đây là các lệnh được sử dụng để tìm sự cố của IGRP :"],[2194,"182 Hình 7.3.8b Hình 7.3.8c trì thông tin định tuyến như thế nào"],[2195,"ng lặp có thể xuất hiện như thê nào"],[2196,"Nếu chỉ số AS sai thì bạn có thể sửa lại chỉ số này như hình trên"],[2197,"Tổng kết Sau đây là các điểm quan trong bạn cần nắm được trong chương này: \u2022 Giao thức định tuyến theo vectơ khoảng cách thực hiện bảo \u2022 Trong các giao thức định tuyến theo vectơ khoảng cách ,vò"],[2198,"183 \u2022 Cơ chế định nghĩa giá trị tối đa để tránh đếm vô hạn"],[2199,"\u2022 Tránh vòng lặp bằng split horizon"],[2200,"ho router gửi thông tin cập nhật về định tuyến ra một cổng"],[2201,"u hình RIP ủa IGRP \u2022 Thông số định tuyến của IGRP \u2022 Route poisoning"],[2202,"\u2022 Tránh lặp vòng bằng cơ chế cập nhật tức thời"],[2203,"\u2022 Tránh lặp vòng bằng thời gian holddown"],[2204,"\u2022 Ngăn không c \u2022 Chia tải ra nhiều đường"],[2205,"\u2022 Tiến trình RIP \u2022 Cấ \u2022 Sử dụng lệnh ip classless"],[2206,"\u2022 Những vấn đề thường gặp khi cấu hình RIP \u2022 Chia tải với RIP \u2022 Tích hợp đường cố định vơi RIP \u2022 Kiểm tra cấu hình RIP \u2022 Đặc điểm c \u2022 Các loại đường trong IGRP \u2022 Tính ổn định của IGRP \u2022 Cấu hình của IGRP \u2022 Sự chuyển đổi từ RIP sang IGRP \u2022 Kiểm tra cấu hình IGRP \u2022 Xử lý sự cố của IGRP"],[2207,"184 CHƯƠNG 8 THÔNG ĐIỆP ĐIỀU KHIỂN VÀ BÁO LỖI CỦA TCP/IP GIỚI THIỆU IP là một giao thức tự nỗ lực tối đa (Best - effort)để chuyển gói tới đích"],[2208,"Nó không hề có cơ chế nào để xác nhận dữ liệu đã được chưyển tới đích .Dữ liệu có thể gặp sự cố trên đường đi tới đích vì rất nhiều lý do như phần cứng bị hư hỏng, cấu hình sai hoặc thông tin định tuyến không đúng"],[2209,"Để giúp xác định các sự cố xảy ra ,IP sử dụng giao thức thông điệp điều khiển Internet (ICMP - Internet Control Message Protocol) để thông báo cho máy nguồn biết là sự cố xảy ra trong quá trì ại thông điệp báo lỗi khác nh sử dụng"],[2210,"ận các thông điệp điều khiển và báo lỗi cho host trên mạng"],[2211,"Chương này sẽ tập trung nhiều vào các thông điệp điều khiển .Đây là những thông điệp cung cấp thông tin về cấu hình ,định tính cho host .Am hiểu về thông điệp điều khiển của ICMP là một phần rất quan trọng giúp bạn xử lý sự cố mạng và hiểu được một cách đầy đủ về mạng IP"],[2212,"Sau đây hoàn tất chương này ,bạn có thể thực hiện đựơc những việc sau: \u2022 Mô tả ICMP"],[2213,"\u2022 Mô tả cấu trúc của thông điệp ICMP"],[2214,"\u2022 Xác định loại thông điệp b"],[2215,"\u2022 Xác định nguyên nhân liên quan ng loại thông điệp báo lỗi ICMP"],[2216,"nh truyền dữ liệu"],[2217,"Chương này sẽ mô tả các lo au của ICMP và trường hợp nào thì chúng được Bản thân IP không có cơ chế gửi thông điệp điều khiển và báo lỗi nên nó sử dụng ICMP để thực hiện việc gửi nh áo lỗi ICMP đến từ \u2022 Mô tả thông điệp điều khiển ICMP"],[2218,"\u2022 Xác định được cácloại thông điệp điều khiển ICMP được sử dụng trong mạng ngày nay"],[2219,"\u2022 Xác định nguyên nhân liên quan đến thông điệp điều khiển ICMP"],[2220,"8.1.Tổng quát về thông điệp báo lỗi của TCP/IP"],[2221,"185 8.1.1"],[2222,"Giao thức thông điệp điều khiển Interne (ICMP) IP là một phương thức truyền dữ liệu không tin cậy trên mạng"],[2223,"Nó là một giao thức tự nỗ lực tối đa để truyền dữ liệu tới đích"],[2224,"Trong đó, IP không hề có một cơ chế nào để xác nhận là dữ liệu đã đến đích"],[2225,"Nếu một thiết bị trung gian trên đường đi như router chẳng hạn bị sự cố, hay là thiết bị đích không kết nối vào mạng nên dữ liệu không truyền tới đích thì IP không hề có cơ chế nào để thông báo cho người gửi biết là quá trình truyền dữ liệu đã bị sự cố"],[2226,"Giao thức thông điệp điều khiển Internet (ICMP) là một giao thức của bộ TCP/IP đã bổ sung cho đề về yết ở các lớp trên nếu cần thiết"],[2227,"như hình ề sự cố đã xảy ra"],[2228,"khiếm khuyết này của IP"],[2229,"ICMP không khắc phục được sự không tin cậy của IP"],[2230,"ICMP chỉ đơn giản là phát đi các thông điệp để thông báo về sự cố"],[2231,"Vấn độ tin cậy thì sẽ được giải qu 8.1.2"],[2232,"Thông báo lỗi và khắc phục lỗi"],[2233,"ICMP là một giao thức thông báo lỗi của IP"],[2234,"Khi quá trình truyền dữ liệu xảy ra lỗi thì ICMP được sử dụng để thông báo lỗi cho nơi gửi dữ liệu"],[2235,"Ví dụ 8.2.1"],[2236,"Máy 1 chuyển dữ liệu cho máy 6 nhưng cổng Fa0/0 trên Router C bị ngắt, khi đó Router C sử dụng ICMP để gửi thông báo lỗi cho Máy 1 biết là dữ liệu không truyền được tới đích"],[2237,"ICMP không khắc phục được sự cố mà nó chỉ đơn giản là thông báo v Hình 8.2.1"],[2238,"186 Router C nhận được gói dữ liệu nó chỉ biết được địa chỉ IP nguồn Thông điệp ICMP cũng được truyền ư các gói dữ liệu khác cho nên nó cũng có thể gặp sự cố"],[2239,"Điều này dẫn tới một vấn đề là nếu một thông điệp báo lỗi gặp sự cố thì sẽ làm phát sinh thêm các thông điệp báo lỗi nữa và điều này làm cho mạng càng bị nghẽn hơn khi sự cố vốn đã xảy ra và còn đang tồn tại trên mạng"],[2240,"Chính vì vậy, các thông điệp báo lỗi của ICMP sẽ không tạo thêm các thông điệp báo lỗi cho chính nó .Như vậy thì các thông điệp báo lỗi cũng có khả năng là không bao giờ đến đến được máy nguồn của gói dữ liệu"],[2241,"từ Máy 1, đích của gói dữ liệu thôi"],[2242,"Router C không thể biết chính xác con đường mà gói dữ liệu đã đi đến được Router C"],[2243,"Do đó khi gửi thông báo lỗi thì Router C chỉ có thể gửi cho Máy 1 chứ không gửi cho Router A và B"],[2244,"Như vậy là thông báo ICMP chỉ gửi cho thiết bị nguồn của gói dữ liệu chứ không gửi cho các router"],[2245,"8.1.3.Truyền thông điệp ICMP Thông điệp ICMP đựơc đóng gói giống như các dữ liệu khác khi truyền đi bằng IP"],[2246,"Hình 8.1.3 cho thấy dữ liệu của ICMP được đóng gói trong gói IP như thế nào"],[2247,"đi nh Hình 8.1.3 8.1.4"],[2248,"Mạng không đến được Để thực hiện được việc thông ti mạng thì các điều kiện cơ bản cần n liên lạc trên phải có đủ .Trước tiên là thiết bị gửi và nhận dữ liệu phải được cấu hình đúng bộ giao thức TCP/IP.Việc này bao gồm cài đặt bộ giao thức TPC/IP và cấu hình địa chỉ IP.,subnet mask cho thiết bị .Ngoài ra bạn cần phải khai báo Defoult gateway nếu thiết bị cần truyền dữ liệu ra ngoài phạm vi cục bộ .Thư hai là các thiết bị trung gian phải thực hiện việc định tuyến đúng để chuyển gói từ nguồn đến đích .Router là thiết bị thực hiện nhiệm vụ này .Do đó router phải"],[2249,"187 được cấu hình bộ TCP/IP cho các cổng giao tiếp và sử dụng giao thức định tuyến thích hợp"],[2250,"Nếu 2 điều kiện trên không được đáp ứng thì hệ thống mạng không thể thực hiện thông tin liên lạc được .Ví ột thiết bị gửi dữ liệu đến một địa Hình 8.1.4 minh họa cho trường hợp router không thể gửi gói dữ liệu đến đích do router không biết đường đến mạng đích , router gửi thông điệp ICMP về cho máy nguồn để thông báo là mạng đích không đến được"],[2251,"dụ như khi m chỉ IP không tồn tại hoặc là thiết bị đích đã bị ngắt kết nối ra khỏi mạng"],[2252,"Router cũng là nguyên nhân của sự cố nếu cổng giao tiếp trên router bị ngắt hoặc router không có thông tin cần thiết để tìm ra đường tới mạng đích .Những trường hợp như vậy đều được xem là mạng đích không đến được"],[2253,"Hình 8.1.4 8.1.5 Sử dụng lệnh ping để kiểm tra xem địa chỉ đích có đến được không Giao thức ICMP có thể được sử dụng để kiểm xem có đến được một địa chỉ nào đó hay không .ICMP sẽ gửi thông điệp echo request đến máy đích .Nếu máy đích nhận được echo request thì sẽ trả lời lại thông điệp echo reply cho máy nguồn .Nếu máy nguồn nhận được echo reply thì điều đó khặng định là máy đích có thể đến được bằng giao thức IP"],[2254,""],[2255,"188 Lệnh ping khởi tạo các thông điệp echo request .Ví dụ như hình 8.1.5a và .5b ,chúng ta sử dụng lệnh ping với địa chỉ IP đích .Lệnh ping gửi đi 4 gói o request và nhận về 4 gói echo reply xác nhận kết nối IP giữa 2 thiết bị hoạt g tốt"],[2256,"8.1 ech độn Hình 8.1.5a Hình 8.1.5b 8 6"],[2257,"Phát h đường dài quá Gói dữ liệu khi truyền đi trên mạng có thể bị truyền lòng vòng và không bao g đế ề định dụ nh 2 rout ộ ằng router kia mới là trạm kế tiếp đến đích"],[2258,".1"],[2259,"iện giới hạn iờ ư n được đích .Đi er cú gửi m u này có thể xảy ra khi thông tin t gói dữ liệu qua lại cho nhau vì router này ngh tuyến bị sai ,ví ĩ r"],[2260,"189 Giao thức định tuyến có quy trình có quy định giới hạn để xác định mạng đích không đến được .Ví dụ như RIP có số hop giới hạn là 15 .Điều này có nghĩa là gói dữ liệu chỉ được phép đi qua tối đa 15 router"],[2261,"à gói dữ liệu đi qua bị lặp vòng hoặc có quá nhiều hop thì khi m giá trị TTL đi 1 .Khi giá trị TTL b g 0 thì router sẽ hủy bỏ gói ICMP dù e e ee bá của bị hết thời gian"],[2262,"8.1.7.Thông điệp echo Như bất kỳ các loại gói dữ liệu khác ,thông điệp ICMP cũng có định dạng riêng \u2022 Type Phầ biế tro phần này được sử dụng để kiểm tra lỗi cho dư liệu"],[2263,"Trong hình 8.1.7a là cấu trúc của thông điệp ICMP echo request và echo reply .Trong đó chỉ số Type và Code tương ứng với mỗi loại thông điệp .Phần ntifier equence Numb ối với từng gói echo request và o ro c tương ứng với echo request nào.Còn phần Data chứa các thông tin bổ sung của thông điệp echo request và echo reply"],[2264,"Khi con đường m gói dữ liệu vượt qua giá trị hop tối đa ,giá trị Time-to-live (TTl)của gói dữliệu cũng hết thời gian vì giá trị TTL được cài đặt khớp với số hop tối đa đã được định nghĩa của giao thức định tuyến.Mỗi một gói dữ liệu đều có một giá trị TTL .Mỗi router sau khi xử lý gói dữ liệu sẽ giả ằn dữ liệu đó .Khi đó ng thông điệp \u201cTim xc ded\u201d để thông o cho máy nguồn biết là TTL gói dữ liệu đã .Mỗi một loại thông điệp ICMP có một đặc điểm riêng nhưng tất cả các gói ICMP đều bắt đầu bằng 3 phần : \u2022 Code \u2022 Checksum n type cho biết loại thông điệp nào của ICMP được gửi đi"],[2265,"Phần Code cho t chi tiết hơn về loại thông điệp ICMP .Phần checksum cũng tương tự như ng các loại gói dữ liệu khác , Ide và S er sẽ khác nhau đ ech reply .Chỉ số t ng 2 phần này được sử dụng để xá định echo reply"],[2266,"190 Hình 8.1.7a Hình 8.1.7b 8.1"],[2267,"ô g hỏng ần c h h không"],[2268,"\u201d"],[2269,"Giá trị 3 trong phần Type cho biết đây là thông điệp \u201cDestination Unreachable\u201d .Giá trị trong phần Code sẽ ch nhân tại sao không chuyển được 8.Thông điệp \u201cDestination Unreachable\u201d Kh ph ng phải lúc nào ứng ,cấu hình giao t ói dữ liệu cũng chuyển được đến đ hức không đúng ,cổng giao ti ích .Ví dụ như hư ếp bị ngắt ,thông tin địn tuyên sai\u2026 là n ững nguyên nhân có thể gây ra làm cho gói dữ liệu thể chuyển được tới đích .Trong những trường hợp như vậy thì ICMP gửi thông điệp \u201cDestination Unreachable\u201d cho máy gửi để thông báo là gói dữ liệu không chuyển được tới đích Trong hình 8.1.8a là cấu trúc của thông điệp \u201cDestination Unreachable o biết nguyên gói dữ liệu đến đích .Ví dụ như phần Code có giá trị 0 có nghĩa là mạng đích không đến được"],[2270,""],[2271,"191 Hình 8.1.8a Hình 8.1.8b Khi gói dữ liệu đựơc chuyển từ -ring ra mạng Ethernet thì thường ác loại lỗi khác mạng Token phải phân mảnh ra thành các gói nhỏ hơn .Nếu gói dữ liệu không cho phép phân mảnh thì gói dữ liệu không thể chuyển ra được ,khi đó thông điệp \u201cDestination Unreachable\u201d sẽ được gửi đi.Thông điệp ICMP này cũng được gửi đi khi các dịch vụ liên quan đến IP như FTP ,Web không tim thấy .Điều quan trong khi xử lý sự cố mạng IP là bạn cần phải hiểu được các nguyên nhân khác nhau tạo nên thông điệp ICMP \u201cDestination Unreachable\u201d"],[2272,"8.1.9.Thông báo c Khi thiết bị xử lý gói dữ liệu không chuyển gói dữ liệu đi được do một số lỗi ở phần Header của gói dữ liệu .Loại dữ liệu này không liên quan gì đến host đích hay mạng đích nhưng nó vẫn làm cho gói dữ liệu không thể chuyền được đến đích .Trong trường hợp này ,thông điệp ICMP \u201cParameter Problem\u201d,Type 12 sẽ được gửi về cho máy nguồn"],[2273,""],[2274,"192 Trong hình 8.1.9 là cấu trúc của thông điệp \u201cParameter Problem\u201d.Trong đó có n Pointer .Kphầ hi giá trị Code là 0 ,phần Pointer cho biết octet nào trong gói dữ liệu bị lỗi"],[2275,"Hình 8.1.9 8.2.Thông điệp điều khiển của TCP/IP 8.2.1.Giới thiệu về thông điệp điều khiển ICMP là một phần của bộ giao thức TCP/IP .Thực tế là tất cả các hệ thống IP đều phải bao gồm ICMP .Lý do của vi c này hết sức đơn giản .Trước hết là IP không có cơ chế nào để đảm bảo ã được chuyển tới đích ,hoàn toàn ì cho host biết khi sự cố xảy ra .IP không có cơ chế cung cấp hoặc điều khiển cho host .Và ICMP đã thực hiện việc này cho IP"],[2276,"ệ là dữ liệu đ không thông báo g thông điệp thông báo Hình 8.2.1 Không giống như thông điệp báo lỗi ,thông điệp điều khiển không phải được tạo ra là do mất gói dữ liệu hay do lỗi của quá trình truyền dữ liệu .Mà các thông điệp điều khiển được dùng để thông báo cho host biết về tình trạng nghẽn"],[2277,"193 mạch trên mạng hay thông báo cho host biết là có một gateway tốt hơn dẫn đến mạng đích \u2026Cũng giống như tất cả các gói ICMP khác ,thông điệp điều khiển ói IP để truyền thông điệp trên nhau .Một số loại thường p nhất là redirect/change request.Loại à thông thường đó chính là router .Tất i được cấu hình kết nối vào ,một host được nối vào router .Host B được cấu hình default gateway là địa ụng địa chỉ IP này để đến các mạng khác .Bình thường host B chỉ kết nối đến một gateway.Tuy nhiên cũng có trường hợp một host kết nối vào mạng 2 hay nhiều router.Trong trường hợp đó , default gateway của host sẽ cần dùng redirect/change request để thông báo cho host biết về một gateway khác tốt hơn để đến một mạng đích nào đó"],[2278,"được đóng gói trong gói IP .ICMD sử dụng g mạng"],[2279,"ICMP có rất nhiều loại thông điệp điều khiển khác gặp nhất được thể hiện ở hình 8.2.1"],[2280,"8.2.2.Thông điệp ICMP redirect/change request Thông điệp điều khiển ICMP thường gặ thông điệp này được tạo ra bởi gateway m cả các host khi muốn thông tin liên lạc với các mạng IP đều phả default gateway"],[2281,"Default gateway là địa chỉ của một cổng trên router cùng một mạng với host .Như trong hình 8.2.2a và router này có kết nối ra Internet chỉ IP của cổng Fa0/0trên router.Host B sẽ sử d Hình 8.2.2a"],[2282,"194 Trong hình 8.2.2b là một ví dụ cho trường hợp cần sử dụng ICMP redirect.Host H gửi dữ liệu cho Host C trong mạng 10.0.0.0/8 .Vì mạng đích không kết nối trực tiếp vào Host H nên Host H gửi gói đến default gateway của nó là Router ạng 10.0.0.0/8 thì c trở ra cổng mà vào .Khi đó router R1 sẽ chuyển gói dữ liệu đi và R1 .Router R1 tìm trên bảng định tuyến để tìm đường đến m thấy rằng để chuyển gói tới đích router phải gửi gói này ngượ nó vừa mới nhận gói dữ liệu đồng thời gửi thông điệp ICMP redirect/change request tới Host H để thông báo là Host H nên sử dụng Router R2 làm gateway cho tất cả các gói dữliệu đến mạng 10.0.0.0/8"],[2283,"Hình 8.2.2b Default gateway chỉ gửi thông điệp ICMD redirect/change request khi gặp các điều kiện sau : dữ liệu đi"],[2284,"\u2022 Địa chỉ IP của máy nguồn là cùng một mạng /subnet với địa chỉ IP của ược lại máy nguồn"],[2285,"báo cho host không phải là đường h của router và cũng không phải là của một ICMP redirect nào Bạn có thể dùng lệnh no ip redirect để tắt chức năng này trên một cổng nào đó của router )"],[2286,"\u2022 Cổng mà router nhận gói dữ liệu vào cũng chính là cổng mà router sẽ chuyển gói trạm kế tiếp"],[2287,"\u2022 Gói dữ liệu nhận được không phải gửi ng \u2022 Con đường mà router thực hiện thông mặc địn khác"],[2288,"\u2022 Router phải được cấu hình để thực hiện redirect.(Mặc định là Cisco router thực hiện gửi ICMP redirect"],[2289,""],[2290,"195 Thông điệp ICMP redirect /change request có cấu trúc như hình 8.2.2c.Trong đó phần Type có giá trị là 5 ,phần Code có giá trị là 0,1,2 hoặc 3"],[2291,"Phần Router Internet Address chứa địa chỉ IP của gateway mới .Ví dụ như trên a Router R1 gửi cho Host H ,phần Router Internet : trong thông điệp redirect củ Address sẽ có giá trị là 172.16.1.200,đây là địa chỉ IP của cổng E0 trên Router R2"],[2292,"Hình 8.2.2c Hình 8.2.2d 8.2.3.Đồng bộ đồng hồ và ước tính thời gian truyền dữ liệu Bộ giao thức TCP/IP cho phép hệ thống mạng này kết nối với hệ thống mạng iệp ICMP Timestamp được thiết kế để giải quyết vấn đề Thông điệp ICMP timestamp request cho phép một host hỏi giờ hiện tại trên một máy khác .Máy được hỏi sẽ dùng thông điệp ICMP timestamp reply để trả lời"],[2293,"khác ở cách nhau rất xa thông qua nhiều hệ thống mạng trung gian .Mỗi một hệ thống mạng có một cơ chế đồng bộ đồng hồ riêng .Do đó khi một host ở mạng khác sử dụng phần mềm cần đồng bộ thời gian để thực hiện liên lạc thì có thể sẽ gặp rắc rối .Thông đ này"],[2294,""],[2295,"196 Phần Type trong thông điệp ICMP timestamp có gi 13 (timestamp p reply ) .Ph ị là 0 vì loại thông có gì khác hơn"],[2296,"Phần Originate timestamp là thông tin về giờ y trước khi th được gửi đi .Phần Recive timestamp là thời điểm mà máy đích nhận được yêu cầu ICMP timestam á trị là request )hoặc 14(timestam điệp này không ần Code luôn có giá tr hiện tại trên máy gửi nga ông điệp ICMP timestamp request request .Phần Transmit timestamp là th máy này gửi thông điệp ời điểm trên máy trả lời ngay trước khi p reply"],[2297,"Tất cả 3 thống số về thời gian trên đều điểm nửa đêm theo giờ Quốc tế (Unive được tính bằng số mili giây tính từ thời sal Time -UT)"],[2298,"Hình 8.2.3 Tất cả các thông tin ICMP timestamp reply đều có đầy đủ 3 thông số :thời điểm điểm nhận được request và thời điểm gửi gói reply .Dựa n mp.Kết quả này cũng chỉ ại trên máy đích"],[2299,"iệp ICMP information request và reply cho phép host xác định địa chỉ mạng của nó .Hình 8.2.4 là cấu trúc của loại thông điệp này"],[2300,"gửi gói request ,thời vào 3 thông số này host có thể ước lượng được khoảng thời gian dữ liệu truyề trên mạng từ máy nguồn đến máy đích bằng cách lấy giá trị của phần Originate Timestamp trừ cho giá trị của phần Transmit timesta mang tính chất ước lượng thôi vì thời gian truyền thật sự còn phụ thuộc vào lưu lượng truyền thực tế trên mạng lúc đó .Ngoài ra ,host còn có thể ước tính được giờ hiện t Thông điệp ICMP timestamp là một cách đơn giản để uớc đoán giờ trên máy đích và ước tính tổng thời gian truyền trên mạng nhưng đây chưa phải là cách tốt nhất .Giao thức Network Time Protocol (NTP) ở lớp trên của giao thức TCP/IP thực hiện đồng bộ đồng hồ theo cách tin cậy và chính xác hơn"],[2301,"8.2.4.Thông điệp Information request và reply Thông đ"],[2302,"197 Hình 8.2.4 Phần Type có 2 giá trị :giá tr .Loại thông điệp này của ị 15 tương ứng với thông điệp Information reply ICMP được xem là đã quá lỗi thời .Hiện nay ,các giao ho host"],[2303,"Khi người quản trị mạng dùng một địa chỉ IP lớn chia ra thành nhiều subnet ,các subnet sẽ có subnet mask tương ứng .Subnet mask được sử dụng để xác nhận các bit của phần Network .Subnet và các bit của thành phần Host trong địa chỉ IP .Nếu một host biết địa chỉ IP của router thì nó gửi yêu cầu tới trực tiếp của router ,còn nếu không thì nó sẽ quảng bá yêu cầu của nó .Khi router nhận được yêu cầu này ,router sẽ dùng thông điệp Address mask reply để trả lời .Trong thông điệp Address mask reply sẽ có subnet mask chính xác cho host.Ví dụ : môt host trong mạng lớp B có địa chỉ IP là 172.16.5.2 .Host này không biết subnet mask của mình nên nó broadcast thông đ p Address mask request như sau : ress:172.16.5.2 ời bằng thông điệp Address mask reply như sau : thức BOOTP và DHCP được sử dụng nhiều để cung cấp địa chỉ mạng c 8.2.5 Thông điệp Address Mask iệ Source add Destination address:255.255.255.255 Protocol :ICMP =1 Type :Address Mask Request =AM1 Code :0 Mask:255.255.255.0 Router 172.16.5.2 nhận được thông điệp trên và trả l"],[2304,"198 Source address:172.16 pe :Address Mask Request =AM2 Cấu trúc của thông điệp Address Mask Request và reply được thể hiện ở hình 8.2.5.Thông điệp Address Mask Request và reply có cấu trúc hoàn toàn như nhau ,chỉ khác nhau giá trị phần Type .Phần Type có giá trị 17 là tương ứng với request ,còn giá trị 18 là tương ứng với reply .Phần Identifier và Sequênc Number giúp phân biệt reply nào tương ứng với request nào ,giá trị hai phần này thường là 0.Phần Checksum được dùng để kiểm tra lỗi cho thông điệp ICMP được tính bắt đầu từ phần Type trở đi"],[2305,".5.1 Destination address:172.16.5.2 Protocol :ICMP =-1 Ty Code :0 Mask:255.255.255.0 Hình 8.2.5 ưa được cấu hình Default g địa chỉ multicast là 224.0.0.2 .Thông điệp này cũng có thể được gửi broadcast để gửi đến được những router không có cấu hình multicast .Khi nhận ,nếu router không có cấu hình hỗ trợ quá trình này thì router sẽ không trả lời gì hết .Còn nếu router có hỗ trợ quá trình này thì router sẽ trả lời lại bằng thông điệp Router advertisement .Cấu trúc của thông tin điệp Router advertisement được mô tả ở hình 8.2.6"],[2306,"8.2.6"],[2307,"Thông điệp của router Khi có host trong mạng bắt đầu khởi động và host ch gateway thì nó có thể tìm gateway bằng thông điệp Router discovery.Trước tiên ,host gửi thông điệp Router solicitation cho tất cả các router bằng cách dùn được thông điệp trên"],[2308,"199 Hình 8.2.6 8.2.7"],[2309,"Thông điệp Router solicitation Host gửi thông điệp Router solicitation trong trường hợp bị mất Default gateway.Thông điệp này được gửi multicast và đây chính là bứơc đầu tiên của quá trình tìm router đã đề cập ở phần 8.2.6 .Router sẽ trả lời lại bằng thông sement,trong đó có cung cấp Default gateway cho host điệp Router Adverti .Hình 8.2.7 là cấu trúc của thông điệp Router solicitation: Hình 8.2.7 8.2.8.Thông điệp báo nghẽn và điều khiển luồng dữ liệu điệp ICMP source-quence giúp tốc độ phát gói dữ liệu .Sau khoảng thời gian ngăn ,nghẽn mạch được giải tỏa và máy gửi có thể tăng dần tốc độ truyền lên sau khi không còn nhận được thông điệp source-quence nào nữa .Mặc định là đa số các Cisco router không thực hiện gử source-quence vì có thể các thông điệp này còn làm cho tình trạng tắc nghẽn bị tăng thêm"],[2310,"Nếu có nhiều máy tính cùng lúc truy xuất vào cùng một máy đích thì máy đích có thể bị quá tải .Nghẽn mạch có thể xảy ra khi lưu lượng từ mạng LAN tốc độ cao được truyền ra kết nối WAN có tốc độ thấp hơn .Nếu mạng bị nghẽn quá mức thì các gói dữ liệu sẽ bị hủy bỏ .Thông làm giảm lượng dữ liệu bị hủy bỏ .Thông điệp này sẽ được gửi cho máy gửi để yêu cầu máy gửi giảm i thông điệp"],[2311,"200 Mô hình văn phòng nhỏ -văn phòng tại nhà (SOHO \u2013Small Office Home Office)là một trường hợp áp dụng tốt ICMP source-quence .Ví dụ một SOHO cáp Cat5 và 4 máy này úng ta thấy rằng đường ng truy cập Internet này cho các máy tính còn lại có thể dùng thông điệp có một mạng gồm 4 máy tính được nối với nhau bằng chia sẻ nhau một kêt nối Internet 56K bằng moden .Ch kết nối WAN với băng thông 56K sẽ nhanh chóng bị quá tải với mạng LAN băng thông 100Mbps của SOHO ,kết quả là dữ liệu sẽ bị mất và phải truyền lại nhiều lần .Máy tính có kêt nối ra Internet và giữ vai trò gateway để chia sẻ đườ ICMP yêu cầu các máy tính khác giảm tốc độ truyền để trách việc mất mát dữ liệu do nghẽn mạch"],[2312,"Hình 8.2.8 TỔNG KẾT Sau đây là các điểm quan trọng bạn cần nắm trong chương này : ói dữ liệu .IP sử dụng thông điệp ữ liệu đã không chuyển tới được ười quản trị mạng truyền thông điệp ICMP không tin cậy"],[2313,"\u2022 Gói ICMP có phần Header riêng đặc biệt bắt đầu bằng phần Type và Code"],[2314,"\u2022 Xác định được nguyên nhận tạo ra các thông điệp báo lỗi của ICMP"],[2315,"\u2022 IP là cơ chế tự nỗ lực tối đa để truyền g áy nguồn biết là dICMP để thông báo cho m đến đích"],[2316,"\u2022 Thông điệp ICMP echo request và echo reply cho phép ng kiểm tra kết nối IP trong quá trình xử lý sự cố mạng"],[2317,"\u2022 Thông điệp ICMP cũng được vận chuyển bằng giao thức IP nên quá trình"],[2318,"201 \u2022 Chức năng của các thông điệp điều khiển ICMP"],[2319,"\u2022 iệp ICMP redirect/change rquest"],[2320,"iệp ICMP để đồng bộ đồng hồ và ước lượng thời gian truyền dữ liệu dữ liệu"],[2321,"Thông đ \u2022 Thông đ"],[2322,"\u2022 Thông điệp ICMP information request và reply"],[2323,"\u2022 Thông điệp ICMP để tìm router"],[2324,"\u2022 Thông điệp ICMP router solicitation"],[2325,"\u2022 Thông điệp ICMP để báo nghẽn và điều khiển luồng"],[2326,"202 Lời nói đầu Nhằn đảm bảo kiến thức cần thiết cho một CCNA giáo trình hệ thống mạng máy giáo trình hệ thống mạng máy tính CCNA 2 giúp bạn tìm hiểu hoạt dộng của router và hướng dẫn cấu hình cơ bản cho router với các giao thức cách thức cấu hình cho hai giao thức OSPF và EIGRP được trình bày rất h và so sánh chi tiêt hoạt động của các loại thiết bị mạng như n VLAN về cơ chế hoạt động của switch trong VLAN và cách thức cấu hình switch, router để Nó nắm vữ ột LAN"],[2327,"Chúc cácbạn đạt đượ quan tr còn lại cho một CCNA"],[2328,"Là cáccông nghệ WAN dùng để kết nối giữa các mạ tính C Mặc d g chắc không thể tránh khỏi nhữ ọc ủng hộ và đóng góp ý kiến"],[2329,"Xin chân thành cảm n tính CCNA 1 đã giới thiệu khái quát hệ thống mạng số liệu theo mô hình phân lớp"],[2330,"Trong giáo trình này toàn bộ kiến thức cơ bản về hệ thống mạng số liệu đã được giới thiệu"],[2331,"Kế tiếp định tuyến đơn giản như RIP, IGRP"],[2332,"Như các bạn đã biết router là thiết bị quan trọng của mạng số liệu với nhiệm vụ then chốt là định tuyến"],[2333,"Nhiệm vụ định tuyến của router không dừng lại ở đó mà được phát triển tốt hơn"],[2334,"Từ đó"],[2335,"giáo trình hệ thống mạng máy tính CCNA 3 tiếp tục phân tích sâu sắc về các đặc điểm hoạt động của từng loại giao thức định tuyến phức tạp khác trong router"],[2336,"Đặc biệt hoạt động và chi tiết trong giáo trình này"],[2337,"Ngoài ra giáo trình hệ thống mạng máy tính CCNA 3 còn giúp các bạn hiểu rõ hoạt động của switch và hướng dẫn cấu hình để đưa switch vào hoạt động"],[2338,"Giáo trình này cũng phân tíc reapeater, hub, switch và router"],[2339,"Đặc biệt một số chương giúp bạn tiếp cậ tạo các VLAN i tóm lại mục tiêu của giáo trình hệ thống máy tính CCNA 3 là giúp các bạn ng toàn bộ các khía cạnh nối mạng cơ bản cho m c mục tiêu này và thực sự làm chủ được một LAN"],[2340,"Khối kiến thức và kỹ năng ọng ng LAN"],[2341,"Chủ đề này sẽ được trình bày trong giáo tình hệ thống mạng máy C NA 4 ù rất cố gắng trong quá trình biên soạn nhưn ng thiếu sót rất mong được bạn đ ơ"],[2342,"203 Lờ Kín t n MKPUB trước hết xin bày tỏ long biế n o Bạn đọc đối với tủ sách MK Kh ao động khoa học nghiêm túc i ngỏ h hưa quý bạn đọc gần xa"],[2343,"Ban xuất bả t ơ và niêm vinh hạnh trước nhiệt tình của đông đả MUB trong thời gian qua ẩu hiệu của chúng tôi là: L Chất lượng va ngày càng chất lượng hơn Tất cả vì Bạn đọc Rất nhiều bạn đọc đã gửi mail cho chúng tôi đóng góp nhiều ý kiến quý báo cho tủ sách Ban xuất bản MK MUB xin được kính mời quý bạn đọc tham gia cùng nâng cao chất lượng tủ sách của chúng ta Trong quá trình đọc, xin các bạn ghi chú lại các sai sót của cuốn sách hoặc các nhận xét của riêng bạn"],[2344,"Sau đó xin gửi về địa chỉ Emal: mkbook@minhkhai.com.vn \u2013 mk.pub@minhkhai.com.vn Hoặc gửi về : Nhà sách Minh khai 249 Nguyễn Thị Minh Khai, Q1, tp Hồ chí Minh ếp lên cuốn sá ốn sách đó cho chúng tôi thì tôi sẽ xin hoàn lại cước phí bưu điện và gửi lại cho Bạn cuốn sách khác ủ bạn n g ôi rất mong nhận đượ ủa quý bạn đọc g MK.PUB và bạn đọc cùng làm"],[2345,"Nếu bạn ghi c chúng hú trực ti ch, rồi gửi cu Chúng tôi xin theo một danh Với mục đích gửi tặng một cuốn sách củ mục thích hợp sẽ được gửi tới gày càng nâng cao chất lư c sự hợp tác c a t sách MK PUB tùy chọn lựa của bạn"],[2346,"ợn của tủ sách MK"],[2347,"PUB chúng t ần xa"],[2348,"204 Mục lụ LỜI NÓI ĐẦU ..................................................................................................."],[2349,"3 LỜI NGỎ ..........................................................................................................."],[2350,"3 MỤC LỤC.........................................................................................................."],[2351,"5 13"],[2352,"13 1.1"],[2353,"VLSM ...................."],[2354,"14 1.1.1"],[2355,"VLSM là gì và tại sao phải 14 1.1.2"],[2356,"Sự phí phạm không gian địa ch .........................."],[2357,"15 1.1.3"],[2358,"Khi nào sử dụng VLSM.............................................................."],[2359,"16 1,1.4"],[2360,"Tính toán chi subnet với SLSM 18 1.1.5"],[2361,"Tổng hợp địa chỉ với VLSM......................................................."],[2362,"23 1.1.6"],[2363,"Cấu hình VLSM..........."],[2364,"."],[2365,"24 1.2"],[2366,"RIP phiên bản2......................................................................................."],[2367,"25 1.2.1 Lịch sử của RIP............................................................................"],[2368,"25 26 TỔNG KẾT........................................................................................................"],[2369,"34 c CHƯƠNG 1: G GIỚI THIỆU"],[2370,"iới thiệu về định tuyến khô g .........................................."],[2371,".."],[2372,"..........................."],[2373,"n theo lớp địa chỉ ........................"],[2374,"..."],[2375,".................................................."],[2376,"..................................................."],[2377,"sử dụng nó......................................."],[2378,"ỉ ......................"],[2379,".................................................."],[2380,"..."],[2381,"..................................................."],[2382,"1.2.2"],[2383,"Đặc điểm của RIP phiên bản 2...................................................."],[2384,"1.2.3 So sánh RIv1 và RIv2 .................................................................."],[2385,"27 1.2.4 Cấu hình RIPv2............................................................................"],[2386,"28 1.2.5"],[2387,"Kiểm tra RIPv2 ..........................................................................."],[2388,"30 1.2.6 Xử lý sự cố RIPv2........................................................................"],[2389,"31 1.2.7 Đường mặc định......................................................................"],[2390,"32"],[2391,"205 CHƯƠNG 2: OSPF Đơn vùng..........................................................................."],[2392,"35 GIỚI THIỆU ......................................................................................................"],[2393,"35 ............................"],[2394,"37 ết."],[2395,"37 c điểm của giao thức định tuyến theo trạng thái đường liên kết"],[2396,"38 Ưu và nhược điểm của giao thức định tuyến theo trạng thái đường liên kết............................................................................................................."],[2397,"43 2.1.6 So sánh và phân biệt giữa định tuyến theo vectơ khoảng cách và định tuyến theo trạng thái đường liện kết ........................................................"],[2398,"44 2.2 Các khái niệm về OSPF đơn vùng.........................................................."],[2399,"46 2.2.1 Tổng quát về OSPF........................................................................."],[2400,"46 2.2.2 Thuật ngữ của OSPF......................................................................."],[2401,"47 2.2.3 So sánh OSPF với giao thức định tuyến theo vectơ khoảng cách.."],[2402,"51 2.2.4 Thuật toán chon đường ngắn nhất .................................................."],[2403,"53 2.2.5 Các loại mạng OSPF......................................................................."],[2404,"54 2.2.6 Giao thức OSPF Hello ...................................................................."],[2405,"56 2.2.7 Các bước hoat động của OSPF......................................................."],[2406,"58 .3 Cấu hìn OSPF đơn vùng ........................................................................."],[2407,"62 2.3.1 Cấu hình tiến trình định tuyến OSPF ............................................."],[2408,"62 2.3.2 Cấu hình địa chỉ loopback cho OSPF và quyền ưu tiên cho router 63 2..3.3 Thay đ 68 2.1 Giao thức định tuyến theo trạng thái đường liên kết ."],[2409,"2.1.1 Tổng quát về giao thức định tuyến theo trạng thái đường liên k 2.1.2 Đặ 2.1.3 Thông tin định tuyến được duy trì ................................................."],[2410,"40 2.1.4 Thuật toán định tuyến theo trạng thái của đường liên kết .............."],[2411,"41 2.1.5 2 ổi giá trị chi phí của OSPF ................................................."],[2412,""],[2413,"206 2.3.4 Cấu hình quá trình xác minh cho OSPF ........................................."],[2414,"69 2.3.5 Cấu hình các thông số thời gian của OSPF ...................................."],[2415,"70 2.3.8 Kiểm tra cấu hình OSPF................................................................."],[2416,"72 ................................"],[2417,"74 GIÓI THIỆU ......................................................................................................"],[2418,"75 .............................................."],[2419,"77 GRP và IGRP ................................................................"],[2420,"77 2.3.6 OSPF thực hiện quảng bá đường mặc định...................................."],[2421,"71 2.3.7 Những lỗi thường gặp trong cấu hình OSPF.................................."],[2422,"72 TỔNG KẾT......................................................................."],[2423,"CHƯƠNG 3: EIGRP.........................................................................................."],[2424,"75 3.1"],[2425,"Các khái niệm của EIGRP ......................"],[2426,"3.1.1 So sánh EI 3..1.2 Các khái niệm và thuật ngữ của EIGRP........................................"],[2427,"79 3.1.3 Các đặc điểm của EIGRP ..............................................................."],[2428,"85 3.1.4"],[2429,"Các kỹ thuật của EIGRP................................................................"],[2430,"86 3.1.5 Cấu trúc dữ liệu của EIGRP ..........................................................."],[2431,"89 3.1.6 Thuật toán EIGRP .........................................................................."],[2432,"91 3.2 Cấu hình EIGRP ....................................................................................."],[2433,"97 3.2.1 Cấu hình EIGRP ............................................................................."],[2434,"97 3.2.2"],[2435,"Cấu hình đường tổng hợp cho EIGRP.........................................."],[2436,"99"],[2437,"207 Chương 1: GIỚI THIỆU VỀ ĐỊNH TUYẾN KHÔNG THEO LỚP ĐỊA CHỈ GIỚI THIỆU Người quản trị mạng phải có dự kiến và quản lý sự phát triển về mặt vật lý của hệ thống mạng, ví dụ như mua hoặc thuê thêm một tầng lầu trong toà nhà, trang bị thêm các thiết bị mới như switch, router, bộ tập trung cáp kệ để các thiết bị\u2026 Khi thiết kế hệ thống mạng người thiết kế thường phải chọn một sơ đồ phân phối địa chỉa cho phép mở rộng mạng về sau"],[2438,"Phân phối địa chỉ IP không cố định chiều dài subnet mask là một kỹ thuật phân phối địa chỉ IP hiệu quả, có khả năng mở rộng nhiều hơn a Internet và TCP/IP mỗi công ty tập đoàn đều phải lựa TCP/IP là giao ưng thật không ản 6 được xem là môt không gian địa chỉ trong thế IPv4 một gia th sự thay đổi đó hơn hai th lin h In n uật tận dụng không gian địa chỉ Ip hiệu uả ó khả năng mở rộng"],[2439,"Để khắc phục những giới hạn này RIP phiên bản 2 đã được phát triển Với sụ phát triển phi thường củ triển khai sơ đồ địa chỉ IP của mình"],[2440,"Rất nhiều tổ chức chọn thức được định tuyến duy nhất trong hệ thống mạng của mìn"],[2441,"Nh may, TCP/IP đã không thể lường trước được rằng giao thức của họ được ứng dụng trong mạng toàn cầu cho thông tin thương mại giải trí Hai mươi năm trước đây,IP phiên bản 4 đưa ra một mô hình địa chỉ và cũng đáp ứng đủ"],[2442,"Trong khi đó , IP phiên b giới hạn thì được triển khai thử nghiệm chậm chạm và có thể sẽ thay o ức thống trị Internet hiện nay"],[2443,"Trong thời gian chờ đợi ập kỷ qua các kỹ sư mạng đã thành công trong việc vận dụng IPv4 một cách h oạt để hệ thống mạng của mình có thể tồn tại với sự phát triển rộng lớn của ter et"],[2444,"VLSM là một trong những kỹ th q Cùng với sự phát triển của hệ thống mạng để đáp ứng nhu cầu của người sử dụng giao thức định tuyến cũng phải mở rộng theo"],[2445,"RIP vẫn được xem là một giao thức phù hợp cho hệ thống mạng nhỏ vì một số giới hạn khiến nó không c Sauk hi hoàn tất chương này các bạn có thể thực hiện những việc sau: \u2022 Định nghĩa VLSM và mô tả khái quát các lý do để sử dụng nó"],[2446,"208 \u2022 Chia một mạng lớn thành các mạng con có kích thước khác nhau bằng cách sử dụng VLSM \u2022 Cấu hình router sử dụng VLSM \u2022 Kiểm tra và xử lý sự cố hoạt động RIPv2 \u2022 Cấu hình đường mặc định bằng lệnh ip route và ip default- network 1.1 VLSM 1.1.1 VLSM là gì và tại sao phải sử dụng nó Khi mạng IP phát triển lớn hơn, người quản trị mạng phải có cách sử dụng không gian địa chỉ của mình một cách hiệu quả hơn"],[2447,"Một trong những kỹ thuật thường được sử dụn là VLSM"],[2448,"Với VLSM người quản trị mạng có thể chia địa chỉ mạng có subnet mask dài cho mạng có ít host và địa chỉ mạng có subnet mask ngắn cho mạng nhiều host Khi sử dụng VLSM thì hệ thống mạng phải chạy giao thức định tuyến có hỗ trợ VLSM như OSPF, Intergrated IS \u2013 IS, EIGRP, RIPv2 và định tuyến cố định VLSM cho phép một tổ chức sử dụng chiều dài subnet mask khác nhau trong một địa chỉ mạng lớn"],[2449,"VLSM còn được gọi là chia subnet trong mộ subnet lớn hơn giúp tận dụng tối đa không gian địa chỉ Giao thức định tuyến theo lớp địa c hơn thành nhiều địa chỉ mạng con ước khác nhau như địa chỉ mạng có 30 bit subnet mask , 55.255.255.532 để dành cho các kết nối mạng địa chỉ mạng có 24 bit subnet \u2022 Xác định các đặc tính chủ yếu của RIPv1 hoặc RIPv2 \u2022 Xác địn những điểm khác nhau quan trọng giữa RIPv1 và RIPv2 \u2022 Cấu hình RIPv2 t hỉ mạng lớn có kích th 2 mask, 255.255.255.0 để dành cho các mạng có dưới 254 user, các địa chỉ mạng có 22 bit subnet mask, 255.255.22"],[2450,"để dành cho các mạng có tới 100 user"],[2451,""],[2452,"209 Hình 1.1.1"],[2453,"Một ví dụ về địa chỉ IP theo VLSM 1.1.2 Trước chia subnet cho địa chỉ mạng IP subnet đầu tiên và subnet cuối cùng ược khuyến cáo là không sử dụng"],[2454,"Hiện nay với VLSM chúng ta có thể tận dụng Sự phí phạm không gian địa chỉ đây khi đ subnet đầu tiên và subnet cuối cùng"],[2455,"210 Hình 1.1.2 xét ví dụ như hình 1..1.2"],[2456,"người quản trị mạng quyết định mượn 3 bit để chia net cho địa chỉ lớp C 192.168"],[2457,"Ta sub 187.0"],[2458,"Nếu sử dụng luôn subnet đầu tiên bằng các 7 s bản đượ Me ser rộn ểm - đến - điể mỗ các phạ Cá địa 1.1 Thi phạ ần này sẽ trình bày cách sử dụng VLSM Cù VL khá h thêm lệnh no ip subnet \u2013 zezo vào cấu hình router người quản trị mạng sẽ có ubnet sử dụng được mỗi subnet có 30 địa chỉ host Bắt đầu từ Cissco IOS phiên 12.0, Cissco router đã mặc định là sử dụng subnet zezo"],[2459,"Bây giờ mối subnet c phân phối cho một mạng LAN trên routerSydney, Brisbane, Perth và lbourne như hình vẽ 1.1.2.3 subnet còn lại được phân phối cho 3 đường kết nối ial giữa các router"],[2460,"Như vậy là không còn subnet nào để dự phòng cho sự mở g mạng về sau"],[2461,"Trong khi đó kết nối serial giữa 2 router là kết nối đi m nên chỉ có cần 2 địa chi host là đủ"],[2462,"Như vậy là phí mất 28 địa cỉ host trong i subnet được phân phối cho kết nối WAN của router"],[2463,"Với cách chia đều , tất cả subnet có chiều dài subnet bằng nhau như vạy 1/3 không gian địa chỉ đã bị phí m"],[2464,"ch phân phối địa chỉ như trên chỉ phù hợp với mạng nhỏ"],[2465,"Nhưng dù sao thì sơ đồ chỉ này cũng thực sự phí phạm địa chỉ cho các kết nối điểm - đến - điểm .3 Khi nào sử dụng VLSM ết kế sơ đồ địa chỉ IP sao cho đáp ứng được sự mở rộng sau này và không phí m địa chỉ là một việc hết sức quan trọng"],[2466,"Trong ph để không láng phí địa chỉ trên các kết nối điểm - nối - điểm ng với hệ thống mạng ví dụ ở phần trước"],[2467,"Lần này người quản trị mạng sử dụng SM để chia địa chỉ mạng lớp C 192.168.187.0 thành nhiều subnet có kích thước c nhau"],[2468,"211 Hình 1.1.3 Trước tiên ta xét mạng có nhiều user nhất trong hệ thống mạng"],[2469,"Mỗi mạng LAN ở Sydney, Brisbane, Pert và Melbourpe có khoảng 30 host"],[2470,"Do đó để đáp ứng cho các mạng LAN này người quản trị mạng mượn 3 bit để chia subnet cho địa chỉ mạng 192.168.187.0"],[2471,"Tương tự như ví dụ ở phần trước, người quản trị mạng có 7 subnet /27 sử dụng được"],[2472,"Lấy 4 subnet đầu tiên/ 27 để phân phối cho các mạng AN trên router"],[2473,"Sau đó người quản trị mạng lấy subnet thứ 6 mượn tiếp 3 bit nữa L"],[2474,"212 để chia thành 8 subnet/30 mỗi subnet /30 này chỉ có 2 địa chỉ host"],[2475,"Lấy 3 subnet/30 ối cho 3 kết nối serial giữa các router"],[2476,"Các subnet /27 và /30 còn lại được ể dành sử dụng về sau .1.3 Tính toán chia subnet với VLSM phân ph đ 1 Hình 1.1.4.a Xét ví dụ như hình 1.1.4.a"],[2477,"Hai mạng LAN ở Kuala Lumpur và Bankok yêu cầu tối thiểu 250 host trong mỗi tháng"],[2478,"Nếu hai router này sử dụng các giao thức tuyến theo lớp địa chỉ không hỗ trợ VLSM như RIPv1 IGRP và EGP thì phải chia subnet đều cho toàn bộ hệ thống mạng"],[2479,"Điều này có nghĩa là chúng ta mượn 8 bit để chia ại chỉ lớp B 172.160.0 thành các subnet /24 rồi phân phối cho tất cả các mạng mạng trong hệ thống đều có địa chỉ mạng với 24 bit đ trong hệ thống"],[2480,"Như vậy mỗi"],[2481,"213 mask giống nhau"],[2482,"Mặc dù hai subnet 172.16.3.0/24 và 172.16.4.0/24 đáp ứng được cho 2 mạng LAN 250 host nhưng subnet 172.16.2.0/24 phân phối cho kết nối WAN giữa hai router là quá phí"],[2483,"Một kết nối WAN chỉ cần 2 địa chỉ host còn lại 252 địa chỉ host bị bỏ phí"],[2484,"Hình 1.1.4.b ếu chúng ta sử dụng kỹ thuật VLSM chúng ta có thể lấy subnet 172.16.2.0/24 thành các subnet/30"],[2485,"Sau đó lấy một subnet 172.16.2/20 để đặt cho N chia tiếp kết nối AN thì số lượng địa chỉ bị mất cho kết nối này giảm đi rất nhiều"],[2486,"W Hình 1.1.4.c ây giờ ta xét ví dụ như hình 1.1.4.c giả sử ta có địa chỉ mạng lớp C 12.168.10.0/24 để phân phối cho hệ thống mạng này"],[2487,"B"],[2488,"214 Đầu tiên chúng ta xét mạng LAN có nhiều user nhất trong hệ thống"],[2489,"Hệ thống trên hình 1.1.4.c có mạng LAN lớn nhất là 60 host"],[2490,"Nếu chúng ta chia subnet như cách cũ chúng tá se chỉ mượn được 2 bit để chia subnet còn lại 6 bit dành cho host mới đủ đáp ứng cho mạng LAN 60 host"],[2491,"Như g như vậy chúng ta chỉ toa được 22= 4 ubnet, trong đó sử dụng được tối đa 3 subnet không đủ đáp ứng cho toàn bộ hệ ống mạng"],[2492,"Rõ rang cách chia subnet đều không thể đáp ứng được C it n s th húng ta phải sử dụng VLSM như sau: 1"],[2493,"Bước đầu tiên chúng ta cũng xét mạng LAN lớn nhất trong hệ thống là mạng LAN 60 host ở Perth"],[2494,"Để đáp ứng cho mạng LAN này chúgn ta mượn 2 b đầu tiên đẻ chia subnet cho địa chỉ 192.168.10/24"],[2495,"Chúng ta sẽ được 4 subnet /26 như sau: # ID Dải địa chỉ host Địa chỉ quảng bá 0 192.168.10.0 192.168.10.1 \u2013 192.168.10.62 192.168.10.63 1 192.168.10.64 192.168.10.65 \u2013 192.168.10.126 192.168.10.127 2 192.168.10.128 192.168.10.129 \u2013 192.168.10.190 192.168.10.191 3 192.168.10.192 192.168.10.193\u2013 192.168.10.254 192.168.10.255 Chúng ta lấy subnet đầu tiên 192.168.10.0/26 phân phối cho mạng LAN 60 host ở Perth"],[2496,"2"],[2497,"Bước thứ 2 chúng ta xét tới mạng LAN lớn thứ 2 là mạng LAN 28 host ở sau: KL"],[2498,"Để đáp ứng co mạng LAN này chúng ta lấy subnet tiếp theo là 192.168.10.64/26 mượn tiếp 1 bit nữa để tách thành 2 subnet nhỏ hơn như"],[2499,"215 # ID Dải địa chỉ host Địa chỉ quảng bá 0 192.168.10 192.168.10.95 .64 192.168.10.65 \u2013 192.168.10.94 1 192.168.10.96 192.168.10.97 \u2013 192.168.10.126 192.168.10.127 Mỗi subnet /27 có 5 bit dành cho phần host nên đáp ứng được tối đa 2+-2=30 host"],[2500,"Do đó ta lấy subnet 192.168.10.64/27 để phân phối cho mạng LAN 28 host ở Kuala Lumpur"],[2501,"2"],[2502,"Bước thứ 3 chúng ta xét tiếp đến các mạng LAN nhở hơn tiếp theo"],[2503,"Chúng ta còn lại hai mạng LAN ở Sydney và Singapore, mỗi mạng 12 host"],[2504,"Để đáp ứng cho hai mạng LAN này chúng ta lấy subnet 12.168.10.96/27 ở trên mượn tiếp 1 bit nữa để tách thành 2 subnet/28 như sau: # ID Dải địa chỉ host Địa chỉ quảng bá 0 192.168.10.0 192.168.10.1 \u2013 192.168.10.62 192.168.10.63 1 192.168.10.64 192.168.10.65 \u2013 192.168.10.126 192.168.10.127 Mỗi subnet /28 còn 4 bit dành cho host nên đáp ứng được tối đa 24+ - 2 =14 host"],[2505,"Chúng ta lấy hai subnet /28 trong bảng trên phân phối cho hai mạng LAN ở Sydney và Singapore 3"],[2506,"Bước cuối cùng bây giờ chúng ta chỉ còn lại ba đường liên kết WAN giữa đã sử chúng ta lấy tiếp subnet 192.168.10.128/26 đã tạo ra ở bước 1, mượn tiếp 4 bit để tạo thành 16 subnet/30 như sau: các router, mỗi đường liên kết cần 2 địa chỉ host"],[2507,"Từ đầu đến giờ, chúng ta dụng hết dải địa chỉ từ 192.168.10.0 192.168.10.27"],[2508,"Bây giờ"],[2509,"216 # ID Dải địa chỉ host Địa chỉ quảng bá 0 192.168.10.28 192.168.10.129 \u2013 192.168.10.130 192.168.10.131 1 192.168.10.132 192.168.10.133 \u2013 192.168.10.134 192.168.10.135 2 192.168.10.136 192.168.10.137\u2013 192.168.10.138 192.168.10.139 3 192.168.10.14 2.168.10.143 0 192.168.10.141 \u2013 192.168.10.142 19 4 192.168.10.144 192.168.10.145 \u2013 192.168.10.146 192.168.10.147 5 192.168.10.148 192.168.10.149 \u2013 192.168.10.150 192.168.10.151 6 192.168.10.152 192.168.10.153\u2013 192.168.10.154 192.168.10.155 7 192.168.10.156 192.168.10.157\u2013 192.168.10.158 192.168.10.159 8 192.168.10.160 192.168.10.161 \u2013 192.168.10.162 192.168.10.163 9 192.168.10.164 192.168.10.165 \u2013 192.168.10.166 192.168.10.167 10 192.168.10.168 192.168.10.169 \u2013 192.168.10.170 192.168.10.171 11 192.168.10.172 192.168.10.173 \u2013 192.168.10.174 192.168.10.175 12 192.168.10.176 192.168.10.177\u2013 192.168.10.178 192.168.10.179 13 192.168.10.180 192.168.10.181\u2013 192.168.10.182 192.168.10.183 14 192.168.10.184 192.168.10.185\u2013 192.168.10.186 192.168.10.187 15 192.168.10.188 192.168.10.189\u2013 192.168.10.190 192.168.10.191 Chúng ta lấy 3 subnet /30 đầu tiên trong bảng trên để phân phối cho các đường WAN giữa các router: Kết quả sơ đồ phân phối địa chỉ theo VLSM được thể hiện ở hình 1.1.4.d"],[2510,"217 Hình 1.1.4.d Quá trình địa chỉ IP theo VLSM ở trên được tóm tắt lại theo sơ đồ sau: 1.1.5 Tổng hợp địa chỉ với VLSM"],[2511,"Khi sử dụng VLSM các bạn nên cố gắng phân bố các subnet liền nhau ở gần nhau ể có thể tổng hợp địa chỉ"],[2512,"Trước 1997 không có tổng hợp địa chỉ hệ thống định tuy ần như bị sụp đổ mấy lần"],[2513,"đ ến xương sống của Internet g Hình 1.1.5"],[2514,"218 Hình 1.1.5 là một ví dụ cho thấy sự tổng hợp địa chỉ lên các router tầng trên"],[2515,"Thực chất tổng hợp địa chỉ là bài toán đi ngược lại bài toán chia địa chỉ theo VLSM"],[2516,"Nếu như ví dụ ở phần 1.1.4 là một bài toán đi từ một địa chỉ mạng lớn 192.168.1.0/24 chi thành nhiều tầng subnet nhỏ hơn thì bây giờ bài toán ở hình 1.1.5 đi ngược lại, từ các subnet con tổng hợp lại thành subnet lớn hơn"],[2517,"Tổng hợp dẫn cho đến khi thành một địa chỉ mạng lớn 200.199.48.0/22 đại diện chung cho toàn bộ các subnet bên trong hệ thống"],[2518,"Tương tự như VLSM các bạn muốn thực hiện được tổng hợp địa chỉ thì phải chạy giao thức định tuyến không theo lớp địa chỉ như OSPF EIGRP vì các giao thức này có truyền thông t in về subnet mask đi kèm với địa chỉ IP subnet trong các thông tin định tuyến"],[2519,"Mặt khác bạn muốn tổng hợp địa chỉ đúng thì khi chia địa chỉ theo VLSM để phân phối cho hệ thống mạng bạn phải chi a theo cấu trúc phân cấp như í dụ ở phần 1.1.4 và phân phối các subnet liền nhau ở cạnh tranh nhau trong cấu trúc mạng"],[2520,"Sau đây là một số nguyên tắc bạn 1"],[2521,"Mỗi router phải biết địa chỉ subnet cụ thể của tất cả các mạng kết nối trực tiếp vào nó giao tiếp của router vẫn như vậy"],[2522,"không có gì đặc biệt"],[2523,"v cần nhớ: 2"],[2524,"Mỗi router không cần phải gửi thông tin chi tiết về mỗi subne t của nó cho các router khác nếu như nó có thể tổng hợp các subnet thành một địa chỉ đại diện được 3"],[2525,"Khi tổng hợp địa chỉ như vậy bảng định tuyến của các router tầng trên sẽ được rút gọn lại 3.1.6 Cấu hình VLSM Sauk hi chia địa chỉ IP theo VLSM xong thì bước tiếp theo là bạn cung cấp địa chỉ IP cho từng thiết bị trong hệ thống"],[2526,"Việc cấu hình địa chỉ IP choa các cổng Ví dụ như hình 1.1.6 sau khi đã phân phối địa chỉ theo VLSM xong bạn cấu hình địa chỉ IP cho các cổng giao tiếp của router như sau:"],[2527,"219 Hình 1.1.6 3.2 Rip phiên bản 2 1.2.1 Lịch sử của RIP Internet là một tập hợp các hệ tự quản"],[2528,"Mỗi Á có một cơ chế quản trị, một công nghệ định tuyến riêng, khác với các AS khác"],[2529,"Các giao théc định tuyến được sử hận được"],[2530,"dụng bên trong một AS được gọi là giao thức định tuyến nội vi IGP"],[2531,"Để thực hiện định tuyến giữa các AS với nhau chúng ta phải sử dụng mọt giao thức riêng gọi la giao thức định tuyến ngoại vi EGP"],[2532,"RIP được thiết kế như là một giao thức IGP dùng cho các AS có kích thước nhỏ không sử dụng cho các hệ thống mạng lớn và phức tạp"],[2533,"RIPv1 là một giao thức định tuyến theo vectơ khoảng cách nên quảng bá toàn bộ bảng định tuyến của nó cho các router láng giềng theo định kỳ"],[2534,"Chu kỳ cập nhật của RIP là 30 giây"],[2535,"Thông số định tuyến của RIP là số lượng hop, giá trị tối đa là 15 hop"],[2536,"RIPv1 là giao thức định tuyến theo lớp địa chỉ, Khi RIP router nhận thông tin về một mạng nào đó từ một cổng, trong thông tin định tuyến này không có thông tin về subnet mask đi kèm"],[2537,"Do đó router sẽ lấy subnet mask của cổng để áp dụng cho địa chỉ mạng mà nó nhận được từ cổng này"],[2538,"Nếu subnet mask này không phù hợp thì nó sẽ lấy subnet mask mặc định theo lớp địa chỉ để áp dụng cho địa chỉ mạng mà nó n"],[2539,"220 Địa chỉ lớp A có subnetmask mặc định là 255.0.0 RIPv1 l à giao th ức đ ịnh tuyến được sử d ng phổ biến vì mọi router IP đều có hỗ trợ giao thức này"],[2540,"RIPv1 được phổ đơn giản và tính tương thích toàn cầu của nó"],[2541,"RIPv1 có thể chia tải ra tối đa là 6 đường có chi phí bằng nhau"],[2542,"Sau đây là những điểm giới hạn của RIPv1: \u2022 Không gửi thông tin subnet mask trong thông tin định tuyến \u2022 Gửi quảng bá thông tin định tuyến theo địa chỉ 255.255.255.255 \u2022 Không hỗ trợ xác minh thông tin định tuyến \u2022 Không hỗ trợ VLSM và CIDR RIPv1 được cấu hình đơn giản như trong hình 1.2.1 Địa chỉ lớp B có subnet mask mặc định là 255.255.0.0 Địa chỉ lớp c có subnet mask mặc định là 255.255.255.0 ụ biến vì tính Hình 1.2.1 1.2.2 Đặc điểm của RIP phiên bản 2 1 nên nó vẫn có các đặc điểm như RIPv1 RIPv2 được phát triển từ RIPv \u2022 Là một giao thức định tuyến theo vectơ khoảng cách sử dụng số lượng hop làm thông số định tuyến \u2022 Sử dụng thời gian holddown để chống lặp vòng, thời gian này mặc định là 180 giây \u2022 Sử dụng cơ cế split horizon để chống lặp vòng \u2022 Giá trị hop tối đa là 15 RIPv2 có gửi subnet mask đi kèm với các địa chỉ mạng trong thông tin định tuyến"],[2543,"Nhờ đó RIPv2 có thể hỗ trợ VLSM và CIDR"],[2544,"221 RIPv2 có hỗ trợ việc xác minh thông tin định tuyến"],[2545,"Bạn có thể cấu hình cho RIP gử ằng mã hoá MD hay kh g RI 2 yến theo vectơ khoảng cách"],[2546,"Nếu có nhiều đường đến cùng một đích thì RIP sẽ chọn đường có số hop ít nhất"],[2547,"Chính vì dựa vào số lượng hop để chọn đườ ọn không phải là đường nhanh nhất đến IPv1 cho phép các router cập nhật bảng định tuyến của chúng theo chu kỳ mặc đa để chuyển gói là 15hop"],[2548,"Nếu tới được và gói dữ liệu đến đó sẽ bị huỷ bỏ"],[2549,"Điều này làm giới hạn khả năng mở rộng của RIP"],[2550,"RIPv1 sử dụng cơ chế split ời gian holddown router sẽ không tuyến i và nhận thông tin xác minh trên cổng giao tiếp của router b ôn mã hoá Pv gửi thông tin định tuyến theo địa chỉ multicast 224.0.0.9 1.2.3 So sánh RIPv1 và RIPv2 RIP sử dụng thuật toán định tu ng nên đôi khi con đường mà RIP ch đích R định là 30 giây"],[2551,"Việc gửi thông tin định tuyến cập nhật liên tục như vậy giúp cho topo mạng được xây dụng nhanh chóng"],[2552,"Để tránh bí lặp vòng vô tận"],[2553,"RIP giới hạn số hop tối horizon để chống lặp vòng"],[2554,"Với cơ chế này khi gửi thông tin định tuyến ra một cổng giao tiếp RIPv1 router không gửi ngược trở lại các thông tin định tuyến mà nó học được từ chính cổng đó"],[2555,"RIPv1 còn sử dụng thời gian holddown để chống lặp vòng"],[2556,"Khi nhận được một thông báo về một mạng đích bị sự cố router sẽ khởi động thời gian holddown"],[2557,"Trong suốt khoảng th cập nhật tất cả các thong tin có thông số định tuyến xấu hơn về mạng đích đó RIPv2 được phát triển từ RIPv1 nên nó cũng có các đặc tính như trên"],[2558,"RIPv2 cũng là giao thức Là một giao thức định tuyến theo vetơ khoảng cách sử dụng số lượng hop làm thông số định Sử dụng thời gian holddown để chống lặp vòng thời gian này mặc định là 180 giây Sử dụng cơ chế spit horizon để chống lặp vòng Giá trị hop tối đa RIPv2 có gửi subnet mask đi kèm với cácđịa chỉ mạng trong thông tin định tuyến"],[2559,"Nhờ đó, RIPv2 có thể hỗ trợ VLSM và CIDR"],[2560,"222 Ripv2 có hỗ trợ việc xác minh thông tin định tuyến"],[2561,"Bạn có thể cấu hình cho RIP gửi và nhận thông tin xác minh trên cổng giao tiếp của router bằng mã hoá MD5 hay không mã hoá RIPv2 gửi thông tin định tuyến theo địa chỉ multicaskt 224.0.0.9 1.2.3 So sánh RIPv1 và RIPv2 RIP sử dụng thuật toán định tuyến theo vectơ khoảng cách"],[2562,"Nếu có nhiều đường đến cùng một đích thì RIP sẽ chọn đường có số hop ít nhất"],[2563,"Chình vì chỉ dựa vào số lượng hop để chọn đường nên đôi khi con đường mà RIP chọn không phải là đường nhanh nhất đến đích RIPv1 cho phép c theo chu kỳ mặc định là 30 giây"],[2564,"Việc gửi thông tin định tuyến cập nhật liên tục như vậy giúp cho xem như mạng đích đó không thể tới đượ và gói dữ liệu"],[2565,"đó sẽ bị huỷ bỏ"],[2566,"Điều này làm giới hạn khả năng mở rộng của RIP , RIPv1 sử dụng cơ chế split horizon để chống lặp vòng"],[2567,"Với cơ chế này g tin định tuyến ra một cổng giao ngược trở lại các thông tin định tuyến mà nó học còn sử dụng thời gian holddown để chống lặp vòng"],[2568,"ác router cập nhật bảng định tuyến của chúng topo mạng được xây dựng nhanh chóng"],[2569,"Để tránh bị lăp vòng vô tận, RIP giới hạn số hop tối đa để chuyển gói là 15 hop"],[2570,"Nếu một mạng đích xa hơn 15 router thì c khi gửi thôn tiếp , RIPv1 router khônggửi đước từ chính cổng dó, RIPv1 Khi nhận được một thông báo về một mạng đích bị sự cố, router sẽ khởi động thời gian holddown"],[2571,"Trong suốt khoảng thời gian holddown router sẽ không cập nhật tất cả các thông tin có thông số định tuyến xấu hơn về mạng đích đó RIPv2 được phát triển từ RIPv1 nên nó cũng có các đặc tính như trên RIPv2 cũng là giao thức định tuyến theo vectơ khoảng cách sử dụng số lượng hop làm thông số định tuyến duy nhất"],[2572,"RIPv2 cũng sử dụng thời gian holddown và cơ chế split horizon để tránh lặp vòng Sau đây là các điểm khác nhau giữa RIPv1 và RIPv2"],[2573,"223 RIPv1 RIPv2 Cấu hình đơn giản Cấu hình đơn giản Định tuyến theo lớp địa chỉ Định tuyến không theo lớp địa chỉ Không gửi thông tin về subnet mask trong thông tin định tuyến"],[2574,"Có gửi thông tin về subnet mask trong thông tin định tuyến"],[2575,"Không hỗ trợ VLSM"],[2576,"Do đó tất cả các mạng trong hệ thống RIPv1 phải có ùng subnet mask"],[2577,"Hỗ trợ VLSM"],[2578,"Các mạng trong hệ thống IPv2 có thể có chiều dài subnet mask khác nhau"],[2579,"c Không có cơ chế xác minh thông tin ịnh tuyến"],[2580,"Có cơ chế xác minh thông tin định tuyến"],[2581,"đ Gửi quảng bá 255.255.255.255"],[2582,"ỉ 224.0.0.9 nên hiệu quả hơn"],[2583,"theo địa chỉ Gửi multicast theo địa ch 1.2.4"],[2584,"Cấu hình RIPv2 Để cấu hình một giao thức định tuyến động, chúng ta đều thực hiện các bước sau Chọn giao thức định tuyến, ví dụ như RIPv2 chẳng hạn K su hai báo địa chỉ IP và subnet mask cho các cổng router P tham gia và tiến trình định tuyến"],[2585,"Cổng rong địa chỉ mạng được khai báo ở lệnh etwork thì cổng đó sẽ tham gia vào quá trình gửi và nhận thông tin định tuyến cập hai báo các địa chỉ mạng IP cho giao thức định tuyến không cần khai báo giá trị bnet mask K Lệnh network khai báo địa chỉ mạng I nào của router có địa chỉ IP rơi vào t n nhật"],[2586,"Mặt khác lệnh network cũng khai báo những địa chỉ mạng mà router sẽ thực hiện quảng cáo về mạng đó Lệnh router rip version 2 xác định RIPv2 được chọn làm giao thức định tuyến chạy trên router"],[2587,"224 Hình 1.2.4.a Trong ví dụ ở hình 1.2.4.a router A được cấu hình như sau router rip - chọn rip làm giao thức định tuyến Version 2 \u2013 Xác định ripv2 Network 172.16.0.0 \u2013 khai báo địa chỉ mạ g kết nối trực tiếp vào router A N Khi và 10.0.0.0 sẽ gửi và nhận thông tin v2 n etwork 10.0.0.0 \u2013 Khai báo địa chỉ mạng kết nối trực tiếp vào router A đó tất cả các cổng trên router A kết nối vào mạng hoặc subnet trong 172.16.0.0 cập nhật RIP Hình 1.2.4.b 1.2.5 Kiểm tra RIPv2"],[2588,"225 Lênh show ip protocol sẽ hiển thị các giá trị của giao thức định tuyến và các thời gian hoạt động của giao thức đó"],[2589,"Trong ví dụ ở hình 1.2.5.a lệnh này cho thấy router được cấu hình với RIP không nhận được bất kỳ thông tincập nhật nào từ một router láng giềng trong 180 giây hoặc hơn thì những con đường học được từ router ng giềng đó sẽ được xem là không còn giá trị"],[2590,"Nếu vẫn không nhận thông tin cập hật gì cả thì sau 240 giây, các con đường này sẽ bị xoá khỏi bảng định tuyến"],[2591,"lá n Trong hình router A nhận được cập nhật mới nhấttừ router B cách đây 12 giây"],[2592,"thời gian holddown 180 giây"],[2593,"Khi có một con đường được thông báo là đã b ị ngắt con đường đó sẽđược đặt vào trạng thái holddown trong 180 giây Hình 1.2.5.a ệnh show ip interface brief được sử dụng để tổng hợp thông tin trạng thái của các cổng trên router Router sẽ gửi thông tin về các đường đi trong các mạng được liệt kê sau dòng routing for networks"],[2594,"Router nhận được các thông tin cập nhật từ các router láng giềng được liệt kê sau dòng routing information sources chỉ số độ tin cậy mặc định của rip là 120 L"],[2595,"226 Hình 1.2..5.b mà router học được đồng thời cho biết các thông tin này được học như thế nào Nếu thông tin trong bảng định tuyến bị thiếu một đường đi nào thì bạn nên dùng lệnh show running \u2013 config hoặc show ip protocols để kiểm tra lại cấu hình định yến 1.2.6 Xử lý sự cố RIPv2 Sử dụng lện debug ip rip để hiển thị các thông tin định tuyến RIP khi chúng được gửi đi và nhận vào"],[2596,"Bạn dùng lệnh no debug all hoặc undebug all để tắt mọi debug đang bật Ta xét ví dụ như hnhf 1.2..6 router A nhận được thông tin về hai mạng đích trên cổng serial 2 từ router láng giềng có địa chỉ IP là 10.11.2"],[2597,"Router A cũng gửi thông tin cập nhật của nó ra hai cổng ethernel và serial 2 với địa chỉ là địa chỉ quảng bá còng địa chỉ ngoặc là địa chỉ IP nguồn Đôi khi bạn còn gặp một số câu thông báo trong lệnh debug ip rip như sau Lệnh show ip route sẽ hiển thị nội dụng bảng định tuyến Ip"],[2598,"Trong bảng định tuyến cho biết về đường đi đến các mạng đích tu"],[2599,"227 Những câu này xuất hiện khi router mới khởi động lên hoặc khi có một sự cố mới ảy ra như một cổng bị thay đổi trạng thái hay router bị xoá mất bảng định tuyến M Đường cố định \u2013 là đườ ằng tay cho router ong đó chỉ định rõ router kế tiếp để tới mạng đích"],[2600,"Đường cố định có khả năng bảo mật cao vì khong có hoạt động gửi thông tin cập nhật như đường định tuyến động"],[2601,"Đường cố định rất hữu dụng khi chỉ có một đường duy nhất đến đích không còn đường nào khác phải chọn lựa Đường mặc định cũng do người quản trị mạng cấu hình bằng tay cho router"],[2602,"Trong đó khai báo đường mặc định để sử dụng khi router không biết đường đến đích"],[2603,"Với đường mặc định định tuyến router sẽ dược ngắn gọn hơn"],[2604,"Khi gói dữ liệu có địa chỉ mạng đích mà router sẽ gửi nó ra đường mặc định Đường định tuyến động là những đường do router học được từ các router khác nhờ giao thức định tuyến động x 1.2.7 Đường mặc định ặc định router học thông tin về đường đến mạng đích bằng 3 cách sau\u2019 ng do người quản trị mạng cấu hình b tr Hình 1.2.7 g nối ra internet,kết nối n bộ hệ thống mạng bên iả sử hệ thống mạng này sử dụng giao thức định tuyến động .Router HK1 có kết ày là đuờng mặc định của toàn"],[2605,"228 trong.Những gói nào khôn gửi đến các mạng bên trong nội bộ mà gửi ra ngoài thì ng mặc định ra internet"],[2606,"Để khai báo đường mặc g lện sau :I b 2.168.20.2 ệnh trên là lệnh cấu hình đường cố định đặc biệt đại diện cho bất kì mạng đích ter: outer(config)#ip default-network 192.168.20.0 uter HK1 , với khai áo mặc định la iproute 0.0.0.0 0.0.0.0 192.168.20.2, các gói dữ liệu sẽ được TỔNG KẾT hia địa chỉ mạng IP thành các subnet có kích thước khác nhau bằng VLSM Cấu hình đường mặc định bằng lệnh ip route và ip default-network"],[2607,"mặc nhiên sẽ được gửi lên đườ định cho router HK1chúng ta dùn HongKong1(config)#ip route 0.0.0.0 0.0.0.0 19 L nào với bất kì subnetmask nào .Xin nhấn mạnh một lần nữa , lệnh trên được sử dụng để khai báo đường măc định cho router nào có kết nối đường mặc định vào nó Các router còn lại trong hệ thống, ta dùng lệnh ip default-network để khai báo mạng mặc định này cho các rou R Các router HK2,HK3,HK4 sẽ sử dụng mang 192.168.20.0 làm mạng đích mặc định .Những gói dữ liệu nào có địa chỉ đích mà các router nào không tìm thấy trên bảng định tuyến của chúng thì chúng sẽ gửi về mạng mặc định 192.168.20.0.Kết quả là các gói dữ lieu này được chuyển tớ i router HK1"],[2608,"Trên ro b truyền ra đường kết nối với Internet Sau đây là các điểm quan trọng trong chương này VLSM và lí do sử dụng nó C cấu hình router sử dụng VLSM Dặc điểm chính của RIPv1 và RIPv2 Điểm khác nhau quan trọng giữa RIP1và RIPv2 Cấu hình RTPv2 Kiểm tra và xử lí sự cố hoạt động RTPv2"],[2609,"229 Chương 2: OSPF ĐƠN VÙNG thức định tuyến này đều thực hiện định tuyến trong phạm vi một hệ tự quản"],[2610,"Chúng sử dụng 2 phương pháp khác nhau để thực hiện cùng một nhiệm vụ"],[2611,"Thuật toán định tuyến trạng thái theo đường liên kết, hay còn gọi là thuật toán chọn đường ngắn nhất (SPF \u2013 Shortest Path First), lưu giữ một cơ sở dữ liệu phức tạp các thông tin về cấu trúc hệ thống mạng"],[2612,"Thuật toán này có đầy đủ thông tin về các router trên đường đi và cấu trúc kết nối của chúng"],[2613,"Ngược lại, thuật toán định tuyến theo vectơ khoảng các không cung cấp thông tin cụ thể về cấu trúc đường đi trong mạng và hoàn toàn không có nhận biết về các router trên đường đi"],[2614,"Để có thể cấu hình, kiểm tra và xử lý sự cố của các giao thức định tuyến theo trạng thái đường liên kết thì việc hiểu các hoạt động của chúng là điều rất quan trọng"],[2615,"Chương này sẽ giải thích cách làm việc của giao thức định tuyến theo trạng thái đường liên kết, liệt kê các đặc điểm của chúng, mô tả thuật toán mà chúng sử dụng và đồng thời chỉ ra các an đầu, các giao thức định tuyến như RIPv1 đều là các giao thức định tuyến theo hoảng cách đang được sử dụng như RIPv2"],[2616,"IRGP và giao thức định tuyến lai EIGRP"],[2617,"Khi ệ thống mạng ngày càng phát triển lớn hơn và phức tạp hơn thì những điểm yếu thức định tuyến theo trạng thái đường liên kết thì khác với giao thức định yến theo vectơ khoảng cách"],[2618,"Giao thức này phát các thông tin về đường đi cho ọi router để các router trong mạng đều có cái nhìn đầy đủ về cấu trúc hệ thống GIỚI THIỆU Giao thức định tuyến nội vi (IGP) có 2 loại chính là định tuyến theo vector khoảng cách và định tuyến theo trạng thái đường liên kết"],[2619,"Cả 2 loại giao ưu nhược điểm của loại giao thức này"],[2620,"B vectơ khoảng cách"],[2621,"Ngày nay, có rất nhiều giao thức định tuyến theo vectơ k h của giao thức định tuyến theo vectơ khoảng cách lại càng bộc lộ rõ hơn"],[2622,"Router sử dụng giao thức định tuyến theo vectơ khoảng cách học thông tin định tuyến bằng cách cập nhật bảng định tuyến từ các router láng giềng kết nối trực tiếp"],[2623,"Hoạt động cập nhật theo định kỳ này chiếm băng thông cao và cách học thông tin định tuyến như vậy làm cho mạng hội tụ chậm"],[2624,"Giao tu m mạng"],[2625,"Hoạt động cập nhật chỉ được thực hiện khi có sự kiện thay đổi, do đó băng thông được sử dụng hiệu quả hơn và mạng hội tụ nhanh hơn"],[2626,"Ngay khi có sự thay"],[2627,"230 đổi trạng thái của một đường liên kết, thông tin được phát ra cho tất cả các router trong mạng"],[2628,"OSPF là một trong những giao thức quan trọng nhất của loại giao thức định tuyến eo trạng thái đường liên kết"],[2629,"OSPF dựa trên một chuẩn mở nên nó có thể được sử ấu hình Cisco router cũng tương tự như cấu hình các giao thức định tuyến khác"],[2630,"các mạng được phép hoạt động trên đó"],[2631,"Ngoài ra, OSPF cũng có một số đặc tính êng và cấu hình riêng"],[2632,"Các đặc tính riêng này đã làm cho OSPF trở thành một o nên những thách thức khi cấu hình OSPF"],[2633,"Trong hệ thống mạng lớn, OSPF có thể được cấu hình mở rộng trên nhiều vùng ng OSPF lớn thì bạn hải nắm được cấu hình OSPF trên một vùng"],[2634,"Do đó chương này sẽ mô tả cấu hình OSPF đơn vùng"],[2635,"hái đường liên kết xây dựng và duy trì thông tin định tuyến như thế nào"],[2636,"\u2022 Phân tich về thuật toán định tuyến theo trạng thái theo trạng thái đường liên kết"],[2637,"\u2022 Xác định ưu và nhược điểm cua loại giao thức định tuyến theo trạng thái đường liên kết"],[2638,"\u2022 Khởi động O \u2022 Cấu hình địa chỉ loopback để định quyền ưu tiên cho router"],[2639,"\u2022 Thay đổi thông số chi phí để thay đổi quyết định chọn đường của OSPF"],[2640,"th dụng và phát triển bởi các nhà sản xuất khác nhau"],[2641,"Đây là một giao thức phức tạp được triển khai cho các mạng lớn"],[2642,"Các vấn đề cơ bản về OSPF sẽ được đề cập đến trong chương này"],[2643,"C Đầu tiên OSPF cũng phải được khởi động trên router, sau đó khai báo mà OSPF ri giao thức định tuyến mạnh nhưng đồng thời tạ khác nhau"],[2644,"Nhưng trước khi có thể thiết kế và triển khai mạ p Sau khi hoàn tất chương này, các bạn có thể thực hiện các nhiệm vụ sau: \u2022 Xác định các đặc tính quan trọng của giao thức định tuyến theo trạng thái đường liên kết"],[2645,"\u2022 Giải thích được giao thức định tuyến theo trạng t \u2022 So sánh và phân biệt giao thức định tuyến theo trạng thái đường liên kết với giao thức định tuyến theo vectơ khoảng cách"],[2646,"SPF trên router"],[2647,"\u2022 Cấu hình cho OSPF thực hiện quá trình xác minh"],[2648,"\u2022 Thay đổi các thông số thời gian của OSPF"],[2649,""],[2650,"231 \u2022 Mô tả các bước tạo và quảng bá đường mặc định vào OSPF"],[2651,"\u2022 Sử dụng các lệnh show để kiểm tra hoạt động của OSPF"],[2652,"\u2022 Cấu hình tiến trình định tuyến OSPF"],[2653,"\u2022 Định nghĩa các thuật ngữ quan trọng của OSPF"],[2654,"\u2022 Mô tả các loại mạng OSPF"],[2655,"ức định tuyến theo trạng thái đường liên kết ần này sẽ giải thích những điểm khác Đây là những kiến thức cực kỳ quan trọng đối với 1 nhà quản trị mạng"],[2656,"ột điểm khác nhau quan trọng mà bạn cần nhớ là giao thức định tuyến theo vectơ hì thuật toán định yến theo trạng thái đường liên kết có đầy đủ thông tin về các router trên đường đi và cấu trúc kết nối của chúng"],[2657,"\u2022 Mô tả giao thức OSPF Hello"],[2658,"\u2022 Xác định các bước cơ bản trong hoạt động của OSPF"],[2659,"2.1"],[2660,"Giao th 2.1.1"],[2661,"Tổng quan về giao thức định tuyến theo trạng thái đường liên kết Giao thức định tuyến theo trạng thái đường liên kết hoạt động khác với giao thức định tuyến theo vectơ khoảng cách"],[2662,"Trong ph nhau này"],[2663,"M khoảng cách sử dụng phương pháp trao đổi thông tin định tuyến đơn giản hơn"],[2664,"Thuật toán định tuyến theo trạng thai đường liên kết xây dựng và duy trì một cơ sở dữ liệu phức tạp của thông tin về cấu trúc mạng"],[2665,"Trong khi thuật toán định tuyến theo vectơ khoảng cách không cung cấp thông tin cụ thể về đường đi trong mạng và cũng không có nhận biết về các router khác trên đường đi, t tu Loại giao thức Ví dụ Đặc điểm Định tuyến RIPv1 và RIPv2 o Gateway (IGRP)"],[2666,"\u2022 1.Copy bảng định tuyến cho router láng giềng"],[2667,"ập nhật định kì"],[2668,"\u2022 3.RIPv1 và RIPv2 sử dụng số lượng hop làm thông số định yến"],[2669,"\u2022 4.Mỗi router nhìn hệ thống mạng theo sự chi phối của các router láng giềng"],[2670,"\u2022 5.Hội tụ chậm"],[2671,"theo vectơ khoảng cách Intẻỉ Routing Protocol \u2022 2.C tu"],[2672,"232 \u2022 6.Dễ bị lặp vòng"],[2673,"\u2022 7.Dễ cấu hình và dễ quản trị"],[2674,"\u2022 8.Tốn nhiều băng thông"],[2675,"Định tuyến theo trạng thai đương liên kết Open Shortest Path First (OSPF) Intermediate \u2013 System to Intermedia \u2013 Sýtem (IS-IS) \u2022 Sử dụng đường ngắn nhất"],[2676,"\u2022 Chỉ cập nhật khi có sự kiện xảy ra"],[2677,"\u2022 Gửi gói thông tin về trạng thái các đường liên kết cho tất cả các router trong mạng"],[2678,"hệ thống mạng"],[2679,"\u2022 Hội tụ nhanh"],[2680,"Không bị lặp vòng"],[2681,"\u2022 Cấu hình phức tạp hơn"],[2682,"\u2022 Đòi hỏi nhiều bộ nhớ và năng lượng xử lý hơn so với định tuyến theo vectơ khoảng cách"],[2683,"Tốn ít băng thông hơn so với ơ khoảng \u2022 Mỗi router có cái nhìn đầy đủ về cấu trúc \u2022 \u2022 định tuyến theo vect cách"],[2684,"2.1.2"],[2685,"Đặc điểm của giao thức định tuyến theo trạng thái đường liên kết"],[2686,"Giao thức định tuyến theo trạng thái đường liên kết thu thập thông tin về đường đi từ tất cả các router khác trong cùng hệ thống mạng hay trong cùng một vùng đã được xác định"],[2687,"Khi tất cả các thông tin đã được thu thập đầy đủ thì sau đó mỗi router sẽ tự tính toán để chọn ra đường đi tốt nhất cho nó đến các mạng đích trong hệ thống"],[2688,"Như vậy mỗi router có một cái nhìn riêng và đầy đủ về hệ thông mạng,khi đó chúng sẽ không còn truyền đi các thông tin sai lệch mà chúng nhận được từ các router láng giềng"],[2689,""],[2690,"233 Sau đây là một số hoạt động của giao thức định tuyến theo trạng thái đường liên kết: \u2022 Đáp ứng nhanh theo sự thay đổi của hệ thống mạng"],[2691,"\u2022 Gửi cập nhật khi hệ thống mạng có sự thay đổi"],[2692,"\u2022 Gửi cập nhật định kỳ để kiểm tra trạng thái đường liên kết"],[2693,"\u2022 Sử dụng cơ chế hello để xác định router láng giềng có còn kết nối được hay không"],[2694,"Mỗi router gửi multicast gói hello để giữ liên lạc với các router láng giềng.Gói hello mang thông tin về các mạng kkết nối trực tiếp vào router.Ví dụ như hình 2.1.2, P4 nhận biết các láng giềng của nó trong mạng Perth3 là P1và P3"],[2695,"LSAs cung cấp thông tin cập nhật về trạng thái đường liên kết của các router trong mạng"],[2696,"Hình 2.1.2"],[2697,"Sử dụng hello để xác định router láng giềng trên từng mạng"],[2698,""],[2699,"234 Sau đây là các đặc điểm hoạt đông của router sử dụng giao thức định tuyến theo trạng thái đường liên kết: 1"],[2700,"Sử dụng thông tin từ gói hello và LSAs nhận được từ các router láng giềng để xây dựng cơ sở dữ liệu về cấu trúc hệ thống mạng"],[2701,"2"],[2702,"Sử dụng thuật toán SPF để xác tính toán ra đường ngắn nhất đến từng mạng"],[2703,"3"],[2704,"Lưu kết quả chon đường trong bảng định tuyến"],[2705,"2.1.3"],[2706,"Thông tin định tuyến được duy trì như thế nào hần này sẽ giải thích giao thức định tuyến theo trạng thái đường liên kết sử dụng các thành phần sau đây như thế nào \u2022 LSAs"],[2707,"\u2022 Cơ sở dữ liệu về cấu trúc hệ thống mạng"],[2708,"hi có một sự cố xảy ra trong mạng, ví dụ như có một router láng giềng bị mất kết liên kết lập tức phát các gói LSAs ra ằng 1 địa chỉ multicast đặc biệt"],[2709,"Tiến trình này thực hiện gửi thông n ra tất cả các cổng, trừ cổng nhận được thông tin"],[2710,"Mỗi router nhận được một P : \u2022 Thuật toán SPF \u2022 Cây SPF \u2022 Bảng định tuyến với đường đi và cổng ra tương ứng để định tuyến cho gói dữ liệu"],[2711,"Giao thức định tuyến theo trạng thái đường liên kết được thiết kế để khắc phục các nhược điểm của giao thức định tuyến theovectơ khoảng cách"],[2712,"Ví dụ như:giao thức định tuyến theo vectơ khoảng cách chỉ trao đổi thông tin định tuyến với các router kết nối trực tiếp với mình mà thôi, trong khi đó giao thức định tuyến theo trạng thái đường liên kết thực hiện trao đổi thông tin định tuyến trên một vùng rộng lớn"],[2713,"K nối , giao thức định tuyến theo trạng đường trên toàn vùng b ti LSA, cập nhật thông tin mới này vào cơ sở dữ liệu về cấu trúc hệ thống mạng"],[2714,"Sau đó router chuyển tiếp gói LSA này cho tất cả các thiết bị làng giềng khác"],[2715,"LSAs làm cho mọi router trong vùng thực hiện tính toán lại đường đi"],[2716,"Chính vì vậy số lượng router trong một vùng nên có giới hạn"],[2717,""],[2718,"235 Một kết nối tương ứng với một cổng trên router"],[2719,"Thông tin về trạng thái của một liên kết bao gồm thông tin về một cổng của router và mối quan hệ với các router ng giềng trên cổng đó"],[2720,"Ví dụ như: thông tin về một cổng trên router bao gồm địa hỉ IP, subnet mask, loại mạng kết nối vào cổng đó\u2026Tập hợp tất cả các thông tin ệu về trạng thái các đường liên kết, hay còn ọi là cơ sở dữ liệu về cấu trúc hệ thống mạng"],[2721,"Cơ sở dữ liệu này được sử dụng để nh toán chọn đường tốt nhất"],[2722,"Router áp dụng thuật toán chọn đường ngắn nhất trúc mạng, từ đó xây dựng nên cây SPF với bản thân router là gốc"],[2723,"Từ cây SPF này, router sẽ chọn ra đường ngắn nhất đến từng ạng đích"],[2724,"Kết quả chọn đường được đặt trên bảng định tuyến của router"],[2725,"lá c trên được lưu lại thành một cơ sở dữ li g tí Dijkstra vào cơ sở dữ liệu về cấu m Hình 2.1.3 úng được xem như là một tập hợp các giao thức SPF"],[2726,"2.1.4 Thuật toán định tuyến theo trạng thái đường liên kết Thuật toán định tuyến theo trạng thái đường liên kết xây dựng và duy trì một cơ sở dữ liệu phức tạp về cấu trúc hệ thống mạng bằng cách trao đổi các gói quảng cáo trạng thái đường liên kết LSAs(Link \u2013 State Advertisements) với tất cả các router khác trong mạng"],[2727,"Thuật toán định tuyến theo trạng thái đường liên kết có đặc điểm sau: \u2022 Ch"],[2728,"236 \u2022 Chúng xây dựng và duy trì một cơ sở dữ liệu phức tạp về cấu trúc hệ thống iao thức định tuyến theo trạng thái đường liên kết phát triển và duy trì đầy đủ các trúc kết nối của chúng"],[2729,"Điều này được ạng"],[2730,"Mỗi router xây dựng cơ sở dữ liệu về cấu trúc hệ thống mạng của mình nhờ các thông tin n SP để nh toán chọn đường ngắn nhất đến từng mạng đích"],[2731,"Kết quả chọn đường được a lên bảng định tuyến của router"],[2732,"Trong suốt tiến trình hoạt động, mọi sự thay h phần mạng bị đứt hay mạng phát c thực hiện theo định kìy"],[2733,"Nhờ vậy tốc độ hội tụ nhanh hơn ví không cần chờ ết thời gian định kỳ các router mới được hội tụ"],[2734,"mạng"],[2735,"\u2022 Chúng dựa trên thuật toán Dijkstra"],[2736,"G thông tin về mọi router trong mạng và cấu thực hiện nhờ quá trình trao đổi LSAs với các router khác trong m từ các LSA mà nó nhận được"],[2737,"Sau đó router sử dụng thuật toá tí đư đổi trong cấu trúc hệ thống mạng như một thàn triển thêm thành phần mới đều được phat hiện và đáp ứng theo"],[2738,"Việc trao đổi LSA được thực hiện khi có một sự kiện xảy ra trong mạng chứ không đượ h"],[2739,"237 Hình 2.1.4 Ví dụ hình 2.1.4: Tùy theo từng giao thức và thông số định tuyến tương ứng, giao thức định tuyến có thể phân biệt được hai đường đến cùng một đích và sử dụng tuyến ghi hận cả hai"],[2740,"Có một số giao thức định tuyến theo trạng thái đường liên kết có cách đánh giá khả năng hoạt động của hai đường và chon đường tốt nhất"],[2741,"Ví dụ, nếu Sau đây là các ưu điểm của giao thức định tuyến theo trạng thái đường liên kết: \u2022 Sử dụng chi phí làm thông số định tuyến để chọn đường đi trong mạng"],[2742,"i tụ nhanh hơn"],[2743,"\u2022 Mỗi router có một sơ đồ đầy đủ và đồng bộ về toàn bộ cấu trúc hệ thống mạng"],[2744,"Do đó chúng rất khó bị lặp vòng"],[2745,"đường tốt nhất"],[2746,"Trong hình 2.1.4, trên bảng định tuyến có hai đường đi từ Router A đến Router D"],[2747,"Hai đường này có chi phí bằng nhau nên giao thức định n đường đi qua Router C gặp trở ngại như bị nghẽn mạch hoặc bị hư hỏng thì giao thức định tuyến theo trạng thái đường liên kết có thể nhận biết được các thay đổi này và chuyển gói di theo đường qua Router B"],[2748,"2.1.5 Ưu và nhược điểm của giao thức định tuyến theo trạng thái đường liên kết Thông số chi phí này có thể phản ánh được dung lượng của đường truyền"],[2749,"\u2022 Thực hiện cập nhật khi có sự kiện xảy ra, phát LSAs ra cho mọi router trong hệ thống mạng"],[2750,"Điều này giúp cho thời gian hộ"],[2751,"238 \u2022 Router sử dụng thông tin mới nhất để quyết định chọn đường đi"],[2752,"\u2022 Cần thiết kế hệ thống mạng một cách cẩn thận để cơ sở dữ liệu về trạng thái các đường liên kết có thể được thu nhỏ lại"],[2753,"Nhờ đó chúng ta có thể tiết kiệm được các tính toán Dijkstra và hội tụ nhanh hơn"],[2754,"\u2022 Mọi router sử dụng sơ đồ cấu trúc mạng của riêng nó để chọn đường"],[2755,"Đặc ng liên kết: \u2022 Chúng đòi hỏi nhiều dung lượng b ớ và năng lực xử lý cao hơn so với giao thức định tuyến theo vectơ kho ng cách"],[2756,"Do đó chúng khá mắc tiền đối với cá \u2022 Chúng đòi hỏi hệ thống mạng phải được thiết kề theo mô hình phân cấp, hệ thống mạng được chia ra thành nhiều cùng nhỏ để làm giảm bớt độ lớn và độ uter gửi đi là những thông tin gì và gửi cho ai"],[2757,"Các router định tuyến theo vectơ khoảng cách thực hiện gửi toàn bộ bảng định tuyến của mình và chỉ gửi cho các router kết nối trực tiếp với mình"],[2758,"Như chúng ta đã biết ,thông ương ứng với một mạng đích là cổng nào của router , router kế tiếp có địa chỉ IP là gì, thông số định tuyến của con đường này là bao nhiêu"],[2759,"Do đó, các router định tuyến theo vectơ Do đó, khi tính này sẽ giúp chúng ta khi cần xử lý sự cố"],[2760,"\u2022 Giao thức định tuyến theo trạng thái đường liên kết có hỗ trợ CIDR và VLSM"],[2761,"Sau đây là các nhược điểm của giao thức định tuyến theo trạng thái đườ ộ nh ả c tổ chức nhỏ, chi phi hạn hẹp và thiết bị cũ"],[2762,"phức tạp của cơ sở dữ liệu về cấu trúc hệ thống mạng"],[2763,"\u2022 Chúng đòi hỏi nhà quản trị mạng phải nắm vững giao thức"],[2764,"\u2022 Trong suốt quá trình khởi động, các router thu thập thông tin về cấu trúc hệ thống mạng để xây dựng cơ sở dữ liệu, chúng phát các gói LSA ra trên toàn bộ mạng"],[2765,"Do đó tiến trình này có thể làm giảm dung lượng đường truyền dành cho dữ liệu khác"],[2766,"1.1.4"],[2767,"So sánh và phân biệt giữa định tuyến theo vectơ khoảng cách và định tuyến theo trạng thái đường liên kết Trước tiên ta xét giao thức định tuyến theo vectơ khoảng cách"],[2768,"Thông tin định tuyến mà các ro tin trên bảng định tuyến rất ngắn gọn,chỉ cho biết t khoảng cách không biết được đường đi một cách cụ thể, không biết về các router trung gian trên đường đi và cấu trúc kết nối giữa chúng"],[2769,"Các bạn có thể xem nội dung bảng định tuyến trên router bằng lệnh show ip route"],[2770,"Hơn nữa, bảng định tuyến là kết quả chọn đường tốt nhất của mỗi router"],[2771,""],[2772,"239 chúng trao đổi bảng định tuyến với nhau, các router chọn đường dựa trên kết ự thay đổi đầu tiên sẽ cập nhật bảng định tuyến của mình trước rồi chuyển bảng định tuyến bảng định tuyến cập nhật cho router láng giềng"],[2773,"Router láng giềng nhận được thông tin mới, cập nhật vào bảng định đi là gì và gửi cho ai"],[2774,"Khi bắt đầu hoạt động, mỗi router sẽ gửi thông tin cho biết nó có bao nhiếu kết nối và trạng thái của Kết quả là mỗi router sẽ có đầy đủ thông tin để xây dựng một cơ sở dữ liệu về trạng thái các đường liên kết, hay còn gọi là cơ sở dữ liệu về cấu trúc mạng"],[2775,"Như vậy, mỗi router đều có một cái nhìn đầy đủ mỗi router tự tính toán để chọn đường đi tốt nhất đến từng mạng đích"],[2776,"liên kết đã hội tụ xong, không thực hiện cập nhật định kỳ"],[2777,"Chỉ khi nào có sự thay đổi thì thông tin về sự thay đổi đó được truyền đi cho tất cả các router trong mạng"],[2778,"Do đó thời gian hội tụ nhanh và ít tốn băng thông"],[2779,"Ta thấy ưu điểm nổi trội của định tuyến theo trạng thái đường liên kết so với định tuyến theo vectơ khoảng cách là thời gian hội tụ nhanh hơn và tiết kiệm băng thông đường truyền hơn"],[2780,"Giao thức định tuyến theo trạng thái đường liên kết có hỗ trợ CIDR và VLSM"],[2781,"Do đó, chúng là một lựa chọn tốt cho mạng lớn và phức tạp"],[2782,"Thực chất giao thức định tuyến theo trạng thái đường liên kết thực hiện định tuyến tốt hơn so với giao thức định tuyến theo vectơ khoảng cách ở mọi kích cỡ mạng"],[2783,"Tuy nhiên, giao thức định tuyến theo trạng thái đường liên kết không được triển khai ở mọi ng vì chúng đòi hỏi dung lượng bộ quả đã chọn của router láng giềng"],[2784,"Mỗi router nhìn hệ thống mạng theo sự chi phối của các router láng giềng"],[2785,"Các router định tuyến theo vectơ khoảng cách thực hiện cập nhật thông tin định tuyến theo định kỳ nên tốn nhiều băng thông đường truyền"],[2786,"Khi có sự thay đổi xảy ra, router nào nhận biết s tuyến đã được cập nhật cho các router láng giềng kế tiếp"],[2787,"Quá trình cập nhật cứ lần lượt như vậy ra toàn bộ hệ thống"],[2788,"Do đó thời gian bị hội tụ chậm"],[2789,"Bây giờ ta xét đến giao thức định tuyến theo trạng thái đường liên kết"],[2790,"Thông tin định tuyến mà các router gửi mỗi đường kết nối như thế nào, và nó gửi cho mọi router khác trong mạng bằng địa chỉ multicast"],[2791,"Do đó mỗi router đều nhận được từ tất cả các router khác thông tin về các kết nối của chúng"],[2792,"và cụ thể về cấu trúc của hệ thống mạng"],[2793,"Từ đó, Khi các router định tuyến theo trạng thái đường hệ thống mạ"],[2794,"240 nhớ lớn và năng lực xử lý mạnh hơn, do đó có thể gây quá tải cho các thiết bị được triển khai rộng , đòi hỏi người quản trị mạng phải được đào tạo tốt mới có thề cấu hình đúng và vận hành được"],[2795,"độc quyền tốt ơn vì khả năng mở rộng của nó"],[2796,"RIP chỉ giới hạn trong 15 hop, hội tụ chậm và đôi khi chọn đường có tốc độ chậm vì khi quyết định chọn đường nó không quan tâm được ác nhược điểm của RIP và nó là một giao thức định tuyến mạnh, có khả năng mở rộng, phù hợp với các hệ thống mạng hiện đại"],[2797,"OSPF có thể được cấu hình đơn xử lý chậm"],[2798,"Một nguyên nhân nữa làm cho chúng không rãi là do chúng là một giao thức thực sự phức tạp 1.2"],[2799,"Các khái niệm về OSPF đơn vùng 2.2.1"],[2800,"Tổng quát về OSPF OSPF là một giao thức định tuyến theo trạng thái đường liên kết được triển khai dựa trên các chuẩn mở"],[2801,"OSPF đựơc mô tả trong nhiều chuẩn của IETF (Internet Engineering Task Force)"],[2802,"Chuẩn mở ở đây có nghĩa là OSPF hoàn toàn mở đối với công cộng, không có tính Nếu so sánh với RIPv1 và v2 thí OSPF là một giao thức định tuyến nội vi IGP h đến các yếu tố quan trọng khác như băng thông chẳng hạn"],[2803,"OSPF khắc phục c vùng để sử dụng cho các mạng nhỏ"],[2804,""],[2805,"241 gọi là vùng xương sống (backbone)"],[2806,"Kiểu thiết kế này cho phép kiểm soát hoạt độ oạt động địn t ng mạng vào từng vù v mối quan hệ với các láng giềng này"],[2807,"Hình 2.2.1"],[2808,"Mạng OSPF lớn được thiết kế phân cấp và chia thành nhiều vùng Ví dụ như hình 2.2.1, mạng OSPF lớn cần sử dụng thiết kế phân cấp và chia thành nhiều vùng"],[2809,"Các vùng này đều được kết nối vào cùng phân phối la vùng 0 hay còn ng cập nhật định tuyến"],[2810,"Việc phân vùng như vậy làm giảm tải của h h uyến, tăng tốc độ hội tụ, giới hạn sự thay đổi của hệ thố ng à tăng hiệu suất hoạt động"],[2811,"2.2.2"],[2812,"Thuật ngữ của OSPF Router định tuyến theo trạng thái đường liên kết xác định các router láng giềng và thiết lập"],[2813,"242 OSPF thực hiện thu thập thông tin về trạng thái các đường liên kết từ các router ềng"],[2814,"Mỗi router OSPF quảng cáo trạng thái các đường liên kết của nó và huyển tiếp các thông tin mà nó nhận được cho tất cả các láng giềng khác"],[2815,"láng gi c Hình 2.2.2.a ột đường liên kế r và mối q á thái n sẽ có cùng một cơ sở trạng thái của các đườ ết và láng giềng của các router khác"],[2816,""],[2817,"Link \u2013 là một cổng trên router"],[2818,"Link-state: trạng thái của m t giữa hai router, bao gồm trạng thái của một cổng trên route uan hệ giữa nó với router láng giềng kết nối vào cổng đó"],[2819,"Router xử lý c các đường liê c thông tin nhận được để xây dựng một cơ sở dữ liệu về trạng kết trong một vùng"],[2820,"Mọi router trong cùng một vùng OSPF dữ liệu này"],[2821,"Do đó mọi router sẽ có thông tin giống nhau về ng liên k"],[2822,"243 Hình 2.2.2.b."],[2823,"Link-state database (Topolo se) \u2013 danh sách các thông tin về mọi đường liên kết trong vùng"],[2824,"gical databa H h ỉ số danh định v g đườ rong vùng đó"],[2825,"Do đó, các router trong cùng một vùng sẽ có n outer nằm trong một Mỗi ro huật toán SPF và cơ sở dữ liệu của nó để tính toán chọn đường tốt nhấ Thuật toán SPF tính toàn chi phí dựa trên băng thông củ ư o có chi phí nhỏ nhất sẽ được chọn để đưa vào bảng địn tu ìn 2.2.2.c.Area - Tập hợp các mạng và các router có cùng ch ùn"],[2826,"Mỗi router trong một vùng chỉ xây dựng cơ sở dữ liệu về trạng thái các ng liên kết t thô g tin giống nhau về trạng thái các đường liên kết"],[2827,"R vùng được gọi la router nội vùng"],[2828,"uter áp dụng t t đến từng mạng đích"],[2829,"a đ ờng truyền"],[2830,"Đường nà h yến"],[2831,""],[2832,"244 Hình 2.2.2.d"],[2833,"Cost \u2013 giá trị chi phí đặt cho một đường liên kết"],[2834,"Giao thức định tuyến theo trạng thái đường liên kết tính chi phí cho một liên kết dựa trên băng thông hoặc tốc độ của đường liên kết đó"],[2835,"Hình 2.2.2.e"],[2836,"Routing table \u2013 hay còn gọi là cơ sở dữ liệu để chuyển gói"],[2837,"Bảng định tuyến là kết quả chọn đường của thuật toán chọn đường địa dựa trên cơ sở dữ liệu về trạng thái các đường liên kết"],[2838,""],[2839,"245 Mỗi router giữ một danh sách các láng giềng thân mật, danh sách này gọi là cơ sở dữ liệu các láng giềng thân mật"],[2840,"Các lán ọi là thân mật là những láng giềng mà router có thiết lập mố ột router có thể có nhiều láng ông phải láng giềng nào cũng có mối quan hệ thân mật"],[2841,"Do đó bạn g giềng được g i quan hệ hai chiều"],[2842,"M giềng nhưng kh cần lưu ý mối quan hệ láng giềng khác với mối quan hệ láng giềng thân mật, hay gọi tắt là mối quan hệ thân mật"],[2843,"Đối với mỗi router danh sách láng giềng thân mật sẽ khác nhau"],[2844,"Hình 2.2.2.f"],[2845,"Adjacency database \u2013 danh sách các router láng giềng có mối quan hệ hai chiều"],[2846,"Mỗi router sẽ có một danh sách khác nhau"],[2847,"o đổi thông tin định tuyến với nhiều roưter láng giềng trong cùng một mạng, các router OSPF bầu ra một router đại diện gọi là Để giảm bớt số lượng tra Designated router (DR) và một router đại diện dự phòng gọi là Backup Designated (BDR) làm điểm tập trung các thông tin định tuyến"],[2848,""],[2849,"246 Hình 2.2.2.g"],[2850,"Design Router (DR) và Backup Designated Router (BDR) là router đư đại diện"],[2851,"Mỗi 2.2 ến theo vectơ khoảng cách Tro i một giao thức định tuyến theo vectơ kho ng liên kết có một sơ đồ đầy thá á không phát qu vec dụng í g hơn cho hoạt động duy trì bảng định tuyến"],[2852,"RI đường tốt nhất đối với RIP là đường có số lư với mạng lớn, có khả năng mở rộng, đường đi ợc tất cả các router khác trong cùng một mạng LAN bầu ra làm một mạng sẽ có một DR va BDR riêng"],[2853,".3"],[2854,"So sánh OSPF với giao thức định tuy ng phần này chúng ta sẽ so sánh OSPF vớ ảng cách la RIP"],[2855,"Router định tuyến theo trạng thái đườ đủ về cấu trúc hệ thống mạng"],[2856,"Chúng chỉ thực hiển trao đổi thông tin về trạng i c c đường liên kết lúc khởi động và khi hệ thống mạng có sự thay đổi"],[2857,"Chúng ảng bá bảng định tuyến theo định kỳ như các router định tuyến theo tơ khoảng cách"],[2858,"Do đó, các router định tuyến theo trạng thái đường liên kết sử t băng thôn P phù hợp cho các mạng nhỏ và ợng hop ít nhất"],[2859,"OSPF thì phù hợp tốt nhất của OSPF được xác định dựa trên tốc độ của đường truyền"],[2860,"RIP cũng như các giao thức định tuyến theo vectơ khoảng cách đều sử dụng thuật toán chọn đường đơn giản"],[2861,"Còn thuật toán SPF thì rất phức tap"],[2862,"Do đó, nếu router chạy giao"],[2863,"247 thức định tuyến theo vectơ khoảng cách sẽ cần ít bộ nhớ và năng lực xử lý thấp hơn so với khi chạy OSPF"],[2864,"OSPF chọn đường dựa trên chi phí được tính từ tốc độ của đường truyền"],[2865,"Đường tru o thì chi phí OSPF tương ứng càng thấp"],[2866,"OS t nhất từ cây SPF"],[2867,"OSPF b nh tuyến lặp vòng"],[2868,"Còn giao thức định tuyến theo vectơ ệc phát liên tục các thông tin về trang nh trạng các thông tin quảng cáo không \u2022 Hỗ trợ VLSM (Variable Length Subnet Mask)"],[2869,"yền có tốc độ càng ca PF chọn đường tố ảo đảm không bị đị khoảng cách vẫn có thể bị định tuyến lặp vòng"],[2870,"Nếu một kết nối không ổn định, chập chờn, vi thái của đường liên kết này sẽ dẫn đến tì đồng bộ làm cho kết quả chọn đường của các router bị đảo lộn"],[2871,"OSPF giải quyết được các vấn đề sau: \u2022 Tốc độ hội tụ"],[2872,"\u2022 Kích cỡ mạng \u2022 Chọn đường \u2022 Nhóm các thành viên"],[2873,""],[2874,"248 Hình 2.2.3"],[2875,"Sự cố xảy ra khi một kết nối không ổn định làm cho việc cập nhật hội tụ được vì như không đến được vì RIP có số lượng hop giới hạn là 15"],[2876,"Điều này làm kích thước mạng của RIP bị giới hạn trong phạm vi nhỏ"],[2877,"OSPF thì không hề có giới hạn về kích thước mạng, OSPF hoàn toàn phù hợp cho các mạng vừa và lớn"],[2878,"Khi nhận được từ láng giềng các router bao cáo về số lượng hop đến mạng đích, RIP sẽ cộng thêm 1 vào thống số hop này và dựa vào số lượng hop đó để chọn đường đến mạng đích"],[2879,"Đường nào có khoảng cách ngắn nhất hay nói cách khác là có số lượng hop ít nhất sẽ là đường tốt nhất đối với RIP"],[2880,"Chúng ta thấy thuật toán không đồng bộ"],[2881,"Trong một hệ thống mạng lớn, RIP phải mất vài phút mới có thể mỗi router chỉ trao đổi bảng định tuyến với các router láng giềng kết nối trực tiếp với mình mà thôi"],[2882,"Còn đối với OSPF sau khi đã hội tụ vào lúc khởi động, khi có thay đổi thì việc hội tụ sẽ rất nhanh vì chỉ có thông tin về sự thay đổi được phát ra cho mọi router trong vùng"],[2883,"OSPF có hõ trợ VLSM nên nó được xem là một giao thức định tuyến không theo lớp địa chỉ"],[2884,"RIPv1 không có hỗ trợ VLSM, tuy nhiên RIPv2 có hỗ trợ VLSM"],[2885,"Đối với RIP, một mạng đích cách xa hơn 15 router xem"],[2886,"249 chọn đường như vậy rất đơn giản và không đòi hỏi nhiều bộ nhớ và năng lượng xử lý của router"],[2887,"RIP không hề quan tâm đến băng thông đường truyền khi quyết định chọn đường"],[2888,"OSPF thì chọn đường dựa vào chi phí được tính từ băng thông của đường truyền"],[2889,"Mọi OSPF router đều có thông tin đầy đủ về cấu trúc của hệ thống mạng dựa vào đó để tự tính toán chọn đường tốt nhất"],[2890,"Do đó thuật toán chọn đường này rất phức tạp, đòi hỏi nhiều bộ nhớ và năng lực xử lý của router cao hơn so với RIP"],[2891,"RIP sử dụng cấu trúc mạng dạng ngang hàng"],[2892,"Thông tin định tuyến được truyền lần lượt cho mọi router trong cùng một hệ thống RIP"],[2893,"OSPF sử dụng khái niệm về hân vùng"],[2894,"Một mạng OSPF có thể chia các router thành nhiều nhóm ằng cách ày, OSPF có thể giới hạn lưu thông trong từng vùng"],[2895,"Thay đổi trong vùng này hông ảnh hưởng đến hoạt động của các vùng khác"],[2896,"Cấu trúc phân cấp như vậy t cách hiệu quả"],[2897,"ắn nhất huật toán này, đường tốt nhất là đường có chi phí thấp nhất"],[2898,"Edsger Wybe máy tính người Hà Lan, đã phát minh thuật toán này nên ó Thuật toán này xem hệ thống mạng là một tập g kết nối điểm-đến-điểm"],[2899,"Mỗi kết nối này ó i tên"],[2900,"Mỗi node có đầy đủ cơ sở dữ liệu về p"],[2901,"B n k cho phép hệ thống mạng có khả năng mở rộng mộ 2.2.4"],[2902,"Thuật toán chọn đường ngắn nhất"],[2903,"Trong phần này sẽ giải thích cách OSPF sử dụng thuật toán chọn đường ng như thế nào"],[2904,"Theo t Dijkstra, một nhà khoa học n còn có tên là thuật toán Dijkstra"],[2905,"hợp các nodes được kết nối với nhau bằn c một chi phí"],[2906,"Mỗi node có một cá trạng thái của các đường liên kết, do đó chúng có đầy đủ thông tin về cấu trúc vật lý của hệ thống mạng"],[2907,"Tất cả các cơ sở dữ liệu này đều giống nhau cho mọi router trong cùng một vùng"],[2908,"Ví dụ như trên hình 2.2.4.a, D có các thông tin là nó kết nối tới node C bằng đường liên kết có chi phí là 4 và nó kết nối đến node E bằng đường liên kết có chi phí là 1"],[2909,"Thuật toán chọn đường ngắn nhất sẽ sữ dụng bản thân node làm điểm xuất phát và kiểm tra các thông tin mà nó có về các node kế cận"],[2910,"Trong hình 2.2.4.b, node B chọn đường đến D"],[2911,"Đường tốt nhất đến D là đi bằng đường của node E có chi phí là 4"],[2912,"Như vậy là gói dữ liệu đi từ B đến D sẽ đi theo đường từ B qua C qua E rồi đến D"],[2913,""],[2914,"250 Node B chọn đường đến node F là đường thông qua node C có chi phí là 5"],[2915,"Mọi đường khác đều có thể bị lặp vòng hoặc có chi phí cao hơn"],[2916,"Hình 2.2.4.a Hình 2.2.4.b"],[2917,"251 2.2.5"],[2918,"Các loại mạng OSPF Các OSPF router phải thiết lập mối quan hệ láng giềng để trao đổi thông tin định tuyến"],[2919,"Trong mỗi một mạng IP kết nối vao router, nó đều cố gắng ít nhất là trở thành một láng giềng hoặc là láng giềng thân mật với một router khác"],[2920,"Router OS g kết nối của nó"],[2921,"C ng thân mật với mọi router láng giềng khác"],[2922,"Có một số router khác lại có thể chỉ cố gắng trở thành láng giềng thân mật với một hoặc hai router láng giềng thôi"],[2923,"Một khi mối quan hệ láng giềng thân mật đã được thiết lập giữa hai láng giềng với nhau thì thông tin về trạng thái đường liên kết mới được trao đổi"],[2924,"Giao tiếp OSPF nhận biết ba loại mạng sau: \u2022 Mạng quảng bá đa truy cập, ví dụ như mạng Ethernet"],[2925,"\u2022 Mạng điểm-nối-điểm"],[2926,"\u2022 Mạng không quảng bá đa truy cập (NBMA \u2013 Nonbroadcast multi-access), ví dụ như Frame Relay"],[2927,"Loại mạng thứ 4 là mạng điểm-đ hể được nhà quản tr ạng cấu PF quyết định thuộc vào mạn chọn router nào làm láng giềng thân mật là tuỳ ó một số router có thể cố gắng trở thành láng giề ến-nhiều điểm có t ị m hình cho một cổng của router"],[2928,"Hình 2.2.5.a"],[2929,"Ba loại mạng của OSPF"],[2930,""],[2931,"252 Trong mạng đa truy cập không thể biết được là có bao nhiêu router sẽ có thể kết nối được kết nối vào mạng"],[2932,"Trong mạng điểm-đến-điểm chỉ có hai router kết nối với nhau"],[2933,"Trong mạng quảng bá đa truy cập có rất nhiều router kết nối vào"],[2934,"Nếu mỗi router đều thiết lập mối quan hệ thân mật với mọi router khác và thực hiện trao đổi thông tin về trạng thái đường liên kết với mọi router láng giềng thì sẽ quá tải"],[2935,"Nếu có 10 router thì sẽ cần 45 mối liên hệ thân mật, nếu có n router thì sẽ có n*(n-1)/2 mối quan hệ láng giềng thân mật cần được thiết lập"],[2936,"Giải pháp cho vấn đề quá tải trên là bầu ra một router làm đại diện (DR \u2013 Designated Router)"],[2937,"Router này sẽ thiết lập mối quan hệ thân mật với mọi router khác trong mạng quảng bá"],[2938,"Mọi router còn lại sẽ chỉ gửi thông tin về trạng thái R sẽ gửi các thông tin này cho mọi router khác up Designated Router), router này sẽ đảm trách vai trò của DR nếu DR bị sự cố"],[2939,"Để đảm bảo cả DR và BDR đều nhận đượ hái đường liên kết từ mọi router khác trong cùng một mạn ast 224.0.0.6 cho các router đại diện"],[2940,"đường liên kết cho DR"],[2941,"Sau đó D trong mạng bằng địa chỉ mutlticast 224.0.0.5"],[2942,"DR đóng vai trò như một người phát ngôn chung"],[2943,"Việc bầu DR rất có hiệu quả nhưng cũng có một số nhược điểm"],[2944,"DR trở thành một tâm điểm nhạy cảm đối với sự cố"],[2945,"Do đó, cần có một router thứ hai được bầu ra để làm router đại diện dự phòng (BDR \u2013 Back c các thông tin về trạng t g, chúng ta sử dụng địa chỉ multic Hình 2.2.5.b"],[2946,"DR và BDR nhận các gói LSAs"],[2947,""],[2948,"253 Trong mạng điểm-nối-điểm chỉ có 2 router kết nối với nhau nên không cần bầu ra DR và BDR"],[2949,"Hai router này sẽ thiết lập mối quan hệ láng giềng thân mật với nhau"],[2950,"Hình 2.2.5.c 2.2.6"],[2951,"Giao thức OSPF Hello Khi router bắt đầu khởi động tiến trình định tuyến OSPF trên một cổng nào đó thì nó sẽ gửi một gói hello ra cổng đó và tiếp tục gửi hello theo định kỳ"],[2952,"Giao thức Hello đưa ra các nguyên tắc quản lý việc trao đổi các gói OSPF Hello"],[2953,"Ở Lớp 3 của mô hình OSI, gói hello mang địa chỉ multicast 224.0.0.5"],[2954,"Địa chỉ này chỉ đến tất cả các OSPF router"],[2955,"OSPF router sử dụng gói hello để thiết lập một quan hệ láng giềng thân mật mới để xác định là router láng giềng có còn hoạt động hay không"],[2956,"Mặc định, hello được gửi đi 10 giây 1 lần trong mạng quảng bá đa truy cập và mạng điểm-nối-điểm"],[2957,"Trên cổng nối vào mạng NBMA, ví dụ như Frame Relay, chu kỳ mặc định của hello là 30 giây"],[2958,"Trong mạng đa truy cập, giao thức hello tiến hành bầu DR và BDR"],[2959,"Mặc dù gói hello rất nhỏ nhưng nó cũng bao gồm cả phần header của gói OSPF"],[2960,"Cấu trúc của phần header trong gói OSPF được thể hiện trên hình 2.2.6.a"],[2961,"Nếu là gói hello thì trường Type sẽ có giá trị là 1"],[2962,""],[2963,"254 ể thống nhất giữa mọi láng giềng với nhau trước khi có thể thiết lập mối quan hệ láng giềng thân mật và trao đổi thông tin về trạng thái các đường liên kết"],[2964,"Hình 2.2.6.a"],[2965,"Phần header của gói OSPF"],[2966,"Gói hello mang những thông tin đ Hình 2.2.6.b"],[2967,"Phần header của gói OSPF Hello"],[2968,"Các thông tin trong phần Hello Interval, Đea Interval và Router ID phải đồng nhất thì các router mới có thể thiết lập mối quan hệ láng giềng thân mật"],[2969,"2.2.7"],[2970,"Các bước hoạt động của OSPF"],[2971,"255 Khi bắt đầu khởi động tiến trình định tuyến OSPF trên một cổng nào đó, nó sẽ gửi ột DR và BDR"],[2972,"DR và BDR duy trì mối quan hệ thân mật với mọi router OSPF còn lại trong cùng một mạng"],[2973,"gói Hello ra cổng đó và tiếp tục gửi hello theo định kỳ"],[2974,"Giao thức Hello là một tập hợp các nguyên tắc quản lý việc trao đổi gói Hello"],[2975,"Gói Hello mang các thông tin cần thống nhất giữa mọi router láng giềng trước khi có thể thiết lập mối quan hệ thân mật và trao đổi thông tin về trạng thái các đường liên kết"],[2976,"Trong mạng đa truy cập, giao thức Hello sẽ bầu ra m Hình 2.2.7.a"],[2977,"Bước 1: phát hiện các router láng giềng"],[2978,"Trong từng mạng IP kết nối vào router, router cố gắng thiết lập mối quan hệ thân mật với ít nhất một láng giềng"],[2979,""],[2980,"256 Hình 2.2.7.b"],[2981,"Bước 2: bầu ra DR và BDR"],[2982,"Quá trình này chỉ được thực hiện trong mạng đa truy cập"],[2983,"Các router đã có mối quan hệ thân mật lần lượt thực hiên các bước trao đổi thông ọi router trong mạng OSPF"],[2984,"ter áp dụng thuậ ựa trên cơ sở dữ liệu mà nó có"],[2985,"Đường ngắn nhất là đường có chi phí thấp nhất đến mạng đích"],[2986,"tin về trạng thái các đường liên kết"],[2987,"Sau khi hoàn tất quá trình này các ở trạng thái gọi la full state"],[2988,"Mỗi router gửi thông tin quảng cáo về trạng thái các đường liên kết trong gói LSAs (Link-State Advertisements) và gửi thông tin cập nhật các trạng thái này trong gói LSUs (Link-State Updates)"],[2989,"Mỗi router nhận các gói LSAs này từ láng giềng rồi ghi nhận thông tin vào cơ sở dữl iệu của nó"],[2990,"Tiến trình này được lặp lại trên m Khi cơ sở dữ liệu về trạng thái các đường liên kết đã đáy đủ, mỗi rou t toán SPF để tự tính toán chọn đường tốt nhất d"],[2991,"257 Hình 2.2.7.c"],[2992,"Bước 3: áp dụng thuật toán SPF vào cơ sở dữ liệu về trạng thái liên kết để chọn đường tốt nhất đưa lên bảng định tuyến"],[2993,"ập tức phát thông báo cho mọi router khác trong mạng"],[2994,"Thời gian Dead interval trong giao thức Hello là một thông số đơn các đường Sau đó các thông tin định tuyến cần phải được bảo trì"],[2995,"Khi có một sự thay đổi nào về trạng thái của đường liên kết, router l giản để xác định một router láng giềng thân mật còn hoạt động hay không"],[2996,""],[2997,"258"],[2998,"259 Hình 2.2.7.d"],[2999,"R1 phát hiện một liên kết bị đứt và gửi LSU cho DR bằng địa chỉ multicast 224.0.0.6"],[3000,"DR gửi báo nhận cho R1"],[3001,"Hình 2 DR gửi LSU mới nhận cho tất cả các router còn lại trong cùng một mạng bằng địa chỉ multicast 224.0.0.5"],[3002,"Sau khi nhận được LSU, các .2.7.e"],[3003,"Tiếp theo router gửi báo nhận lại cho DR"],[3004,""],[3005,"260 Hình 2.2.7.f"],[3006,"Nếu router OSPF nào còn có kết nối đến mạng khác thì nó sẽ chuyển tiếp LSU ra mạng đó"],[3007,""],[3008,"261 H h n mới, router OSPF sẽ cập nh ới này 2.3.1"],[3009,"Cấu hình tiến trình định tuyến OSPF ệm về vùng"],[3010,"Mỗi router xây dựng một cơ sở dữ ng liên kết trong một vùng"],[3011,"Một vùng trong mạng OSPF ó là vùng 0"],[3012,"Trong mạng OSPF đa vùng, tất cả các vùng đều phải kết nối vào vùng 0"],[3013,"Do đó vùng 0 đượ n khởi động tiến trình định tuyến OSPF trên router, khai báo địa chỉ mạng và chỉ số vùng"],[3014,"Địa chỉ mạng được khai báo kèm theo wilđcard mask chứ khô D) của vùng được viết dưới dạng số ho c d u chấm tượng tự như IP"],[3015,"ể khởi động định tuyến OSPF bạn dùng lệnh sau trong chế độ cấu hình toàn cục: Router (config)#router ospf process-id Process-id là chỉ số xác định tiến trình địng tuyến OSPF trên router"],[3016,"Bạn có thể khởi động nhiều tiến trình OSPF trên cùng một router"],[3017,"Chỉ số này có thể là bất kỳ giá trị nào trong khoảng từ 1 đến 65.535"],[3018,"Đa số các nhà quản trị mạng thường giữ chỉ số process-id này giống nhau trong cùng một hệ tự quản, nhưng điều này là không bắt buộc"],[3019,"Rất hiếm khi nào bạn cần chạy nhiều hơn một tiến trình OSPF trên một router"],[3020,"Bạn khai báo địa chỉ mạng cho OSPF như sau: ìn 2.2.7.g"],[3021,"Sau khi nhận được LSU với thông ti ật vào cơ sở dữ liệu của nó rồi áp dụng thuật toán SPF với thông tin m để tính toán lại bảng định tuyến"],[3022,"2.3"],[3023,"Cấu hình OSPF đơn vùng Định tuyến OSPF sử dụng khái ni liệu đầy đủ về trạng thái các đườ được cấp số từ 0 đến 65.535"],[3024,"Nếu OSPF đơn vùng thì đ c gọi là vùng xương sống"],[3025,"Trước tiên, bạn cầ ng phải là subnet mask"],[3026,"Chỉ số danh định (I ặ ưới dạng số thập phân có dấ Đ"],[3027,"262 Router(config-router)#network address wildcard-mask area area-id Mỗi mạng được quy ước thuộc về một vùng"],[3028,"Adress có thể là địa chỉ của toàn mạng, hoặc là một subnet hoặc là địa chỉ của một cổng giao tiếp"],[3029,"Wildcard-mask sẽ xác định chuỗi địa chỉ host nằm trong mạng mà bạn cần khai báo"],[3030,"Hình 2.3.1"],[3031,"Cấu hình OSPF cơ bản"],[3032,"2.3"],[3033,"C yền ưu tiên cho router F bắt đầu hoạt động, Cisco IOS sử dụng địa chỉ IP lớn nhất đang hoạt động trên router làm router ID"],[3034,"Nều không có cổng nào đang hoạt động thì tiến ì ã chọn địa chỉ IP của một cổn à tiến trình sẽ bị mất router ID"],[3035,"Khi đó tiến trình OSPF sẽ bịi ngưng hoạt động cho đến khi cổng đó hoạt động trở lại"],[3036,"2"],[3037,"ấu hình địa chỉ loopback cho OSPF và qu Khi tiến trình OSP tr nh OSPF không thể bắt đầu được"],[3038,"Khi router đ g l m router ID và sau đó cổng này bị sự cố thì"],[3039,"263 Để tồn tại ậy cần cấu hình một cổng loopback là một ổng luận lý chứ không phải cổng vật lý"],[3040,"Nếu có một cổng loopback được cấu hình ẽ sử dụng địa chỉ của cổng loopback làm router ID mà không quan tâm ến giá trị của địa chỉ này"],[3041,"Nếu trên router có nhiều hơn một thì OSPF sẽ chọn địa chỉ IP lớn nhất trong các địa chỉ IP của các cổng loopback làm router ID"],[3042,"Để tạ ổng loopback và đặt địa chỉ IP cho nó bạn sử dụng các lệnh sau: Router (config)#interface loopback number Router (config-if)#ip address ip-address subnet-mask Bạn nê ack cho mọi router chạy OSPF"],[3043,"Cổng loopback này nên 5.255.255.255"],[3044,"Địa chỉ 32-bit ậy gọi là host mask vì subnet mask này xác định một địa chỉ ảng cáo về mạng loopback, OSPF sẽ luôn luôn u đảm bảo cho OSPF hoạt động ổn định chúng ta cần phải có một cổng luôn luôn cho tiến trình OSPF"],[3045,"Chính vì v c thì OSPF s đ cổng loopback o c n sử dụng cổng loopb được cấu hình với địa chỉ có subnet mask là 25 subnet mask như v mạng chỉ có một host"],[3046,"Khi OSPF phát qu q ảng cáo loopback như là một host với 32-bit mask"],[3047,""],[3048,"264 Hình 2.3.2.a"],[3049,"Cổng loopback chỉ là một cổng phần mềm"],[3050,"Để xoá cổng loopback bạn dùng dạng no của câu lệnh tạo cổng"],[3051,"ể có nhiều hơn hai router"],[3052,"Do đó, OSPF bầu ra m t router đại diện (DR \u2013 Designated Router) làm điểm tập trung tất cả các thôn t ì vai trò của DR t Router ay thế khi DR bị sự cố"],[3053,"Đối vớ cổng đ bầu DR trên router ID"],[3054,"Router ID nào lớn nhất sẽ được chọn"],[3055,"Bạn có thể quyết định kết quả bầu chọn DR bằng cách đặt giá trị ưu tiên cho cổng cua router kết nối vào mạng đó"],[3056,"Cổ nào có giá trị ưu tiên cao nhất thì router đó chắc chắn là DR"],[3057,"Giá tr thể đặt bất kỳ giá trị nào nằm trong khoảng từ 0 đến 255"],[3058,"Giá trị 0 sẽ làm cho router đó không bao giờ được bầu chọn"],[3059,"Router nào có giá trị ưu tiên Trong mạng quảng bá đa truy cập có th ộ g in quảng cáo và cập nhật về trạng thái của các đường liên kết"],[3060,"V rấ quan trọng nên một router đại diện dự phòng (BDR \u2013 Backup Designated ) cũng được bầu ra để th i cổng kết nối vào mạng quảng bá, giá trị ưu tiên mặc định của OSPF trên ó là 1"],[3061,"Khi giá trị OSPF ưu tiên của các router đều bằng nhau thì OSPF sẽ dựa ng của router ị ưu tiên có"],[3062,"265 OSPF cao nhất sẽ được chọn làm DR"],[3063,"Router nào có vị trí ưu tiên thứ 2 sẽ là BDR"],[3064,"Sau khi bầu chọn xong, DR và BDR sẽ giữ luôn vai trò của nó cho dù chúng ta có đặt ê Để a ip ospf priority cần thay của cổ Router(config-if)#ip ospf priority number Router#show ip ospf interfacetype number th m router mới vào mạng với giá trị ưu tiên OSPF cao hơn"],[3065,"th y đổi giá trị ưu tiên OSPF, bạn dùng lệnh trên cổng nào đổi"],[3066,"Bạn dùng lệnh showip ospf interface có thể xem được giá trị ưu tiên ng và nhiều thông tin quan trọng khác"],[3067,"Hình 2.3.2.b"],[3068,"Trong gói hello phát ra cổng Fast Ethernet 0/0, trường Router Priority sẽ có giá trị là 50"],[3069,""],[3070,"266 Hình 2.3.2.c"],[3071,"Gói OSPF Hello"],[3072,"Hình 2.3.2.d"],[3073,"267 Ta xét ví dụ trong hình 2.3.2.d"],[3074,"RTA va RTB sẽ thực hiện bầu DR và BDR trong hai m C là mạng điểm-nối-điểm nên không thực hiện bầu DR và BDR"],[3075,"Trong mạng Ethernet TA là ậy RTB làm DR và RTA làm BDR"],[3076,"Khong tim thay hinh Hình 2.3 Ta xét ví dụ hình 2.3.2.f"],[3077,"Hai mạng 10.2.0.0/30 va 10.2.0.4/30 giữa hai kết nối s điể ữa chúng"],[3078,"Tương tự cho mạng 10.5.0.0/16 giữa router A và router Remote"],[3079,"Giả sử giá Hình 2.3.2.e"],[3080,"Bầu DR và BDR trong mạng quảng bá đa truy cập"],[3081,"ạng Ethernet quảng bá đa truy cập"],[3082,"Còn mạng PPP giữa RTB và RT 10.4.0.0/16 kết nối giữa RTA và RTB giả sử giá trị ưu tiên trên 2 cổng Ethernet của RTA và RTB đều bằng nhau và bằng giá trị mặc định là 1"],[3083,"Khi đó router nào có router ID lớn nhất trong mạng này sẽ được bầu làm DR"],[3084,"Router ID của R 10.5.0.1, router ID của RTB là 10.6.0.1"],[3085,"V .2.f erial của router HQ \u2013 router B, router B \u2013 router Remote là hai mạng điểm-nối- m nên không bầu DR và BDR trong mạng Ethernet 10.4.0.0/16 kết nối gi"],[3086,"268 trị ưu tiên trên cổng fa0 của router HQ và trên cổng fa1 của router A đều bằng giá trị mặc định là 1"],[3087,"Router HQ có router ID là 10.4.0.2, router A có router ID là 10.5.0.1, router Remote có router ID là 10.5.0.2"],[3088,"Vậy router A sẽ là DR trong mạng này vì router A có router ID lớn hơn router ID của router HQ"],[3089,"Tương tự, router Remote sẽ là DR trong mạng 10.5.0.0/16 và router A làm BDR trong mạng này"],[3090,"Hình 2.3.2.g ện bầu DR và BDR cho hai cổng serial của chúng"],[3091,"R1, R2 và R3 sẽ tiến hành bầu DR và BDR cho mạng Ethernet kết nối giữa chúng"],[3092,"Giả sử giá trị ưu tiên 1 có cổng Loopback0 nên nó sẽ lấy địa cỉ er ID"],[3093,"R2 không có cấu hình cổng Loopback nên nó lấy địa chỉ IP lớn nhất mà nó có để làm router ID"],[3094,"Do đó, router ID của R2 là Như vậy R3 có router ID lớn nhất nên nó được bầu làm DR trong mạng Ethernet 192.1.1.0/24, R2 có router ID Ta xét ví dụ trong hình 2.3.2.g"],[3095,"R2 và R3 không thực hi mạng điểm-nối-điểm kết nối giữa của cổng e0 trên các router đều bằng 1"],[3096,"R IP của cổng này làm rout 192.1.1.2"],[3097,"Tương tự, router ID của R3 là 201.1.1.1"],[3098,"lớn thứ 2 nên nó được bầu làm BDR trong mạng này"],[3099,""],[3100,"269 2.3.3"],[3101,"Thay đổi giá trị chi phí của OSPF"],[3102,"OSPF sử dụng chi phí làm thông số chọn đường tốt nhất"],[3103,"Giá trị chi phí này liên quan đến đường truyền và dữ liệu nhận vào của một cổng trên router"],[3104,"Nói tóm lại, chi phí của một kết nối được tính theo công thức 108/băng thông, trong đó băng thông được tính theo đơn vị bit/s"],[3105,"Người quản trị mạng có thể cấu hình giá trị chi phí bằng nhiều cách"],[3106,"Cổng nào có chi phí thấp thì cổng đó sẽ được chọn để chuyển nfig-if)#bandwidth 64 Giá trị băng thông mặc định của cổng Serial Cisco là 1,544Mbps hay 1544kbs dữ liệu"],[3107,"Cisco IOS tự động tính chi phí dựa trên băng thông của cổng tương ứng"],[3108,"Do đó, để OSPF hoạt động đúng bạn cần cấu hình băng thông đúng cho cổng của router"],[3109,"Router (config)#interface serial 0/0 Router(co Hình 2.3.3.a"],[3110,"Giá trị chi phí OSPF mặc định của Cisco IOS"],[3111,""],[3112,"270 Giá trị chi phí thay trường định tuyến có n a i sử dụng Gigabit Ethernet"],[3113,"Giá trị chi ất, giá trị 1, là tương ứng với kết nối 100Mbs"],[3114,"Do đó, khi trong mạng vừa co 100Mbs va Gigabit Ethernet thì giá trị chi phí mặc định sẽ làm uyến c Bạn sử dụng câu lệnh sau trong chế độ cấu hình cổng tương ứng để cài đặt giá trị g đó: fig-if)#ip ospf cost number đổi sẽ ảnh hưởng đến kết quả tính toán của OSPF"],[3115,"Trong môi nhiều hãng khác nhau, bạn sẽ phải thay đổi giá trị chi phí để g này tương thích với giá trị chi phí của hãng kia"],[3116,"Một trường y đổi giá trị chi phí kh giá trị chi phí của hã hợp khác bạn cần th phí mặc định thấp nh cho việc định t ó thể không tối ưu"],[3117,"Giá trị chi phi nằm trong khoảng từ 1 đến 65.535"],[3118,"chi phí cho cổn Router (con Hình 2.3.3.b"],[3119,"Cấu hình giá trị chi ph ng của router"],[3120,"2.3.4"],[3121,"Cấu hình quá tr Các router mặc nhiên uyến mà nó nhận được là do đúng router tin cậy phát ra và những thông tin này không bị can thiệp dọc đường đi"],[3122,"í cho một cổ ình xác minh cho OSPF"],[3123,"tin rằng những thông tin định t"],[3124,"271 Để đảm bảo điều này xác minh với nhau"],[3125,"Mỗi một cổng OSPF tr nh để sử dụng khi gửi các thông tin OSPF cho các router khác cùng kết nối với cổng đó"],[3126,"Chìa khóa xác chia sẻ giữa hai router"],[3127,"Chìa khoá này sử dụng để tạo ra dữ liệu xác minh (trường Authentication data) đặt trong phần header của config-if)#ip ospf authentication-keypassword , các router trong một vùng cần được cấu hình để thực hiện ên router cần có một chìa khoá xác mi minh, hay còn gọi là mật mã, được gói OSPF"],[3128,"Mật mã này có thể dài đến 8 ký tự"],[3129,"Bạn sử dụng câu lệnh sau để cấu hình mật mã xác minh cho một cổng OSPF: Router ( Sau khi cấu hình mật mã xong, bạn cần bật chế độ xác minh cho OSPF: Router(config-router)#areaarea-number authentication Hình 2.3.4.a"],[3130,"Phần header của gói OSPF"],[3131,""],[3132,"272 Với cơ chế xác minh đơn giản trên, mật mà được gửi đi dưới dạn văn bản"],[3133,"Do đó nó dễ dàng được giải mã nếu gói OSPF bị những kẻ tấn công bắt được"],[3134,"Chính vì vậy các thông tin xác minh nên được mật mã lại"],[3135,"Để đảm bảo an toàn hơn n cấu hình mật mã message-digest bằn của router: Router key MD5 l encryption-type giá trị 0 có nghĩa là không thự hiện mật mã, còn giá trị 7 có nghĩa là th Tham s số key là phầ buộc p Sau khi c trong OSPF: Router và thực hiện mật mã thông tin xác minh, bạn nê g câu lệnh sau trên cổng tương ứng ( config-ì)#ip ospf message-digest-key key-id encryption-type md5 à một thuật toán mật mã thông điệp message-digist"],[3136,"Nếu bạn đặt tham số ực hiện mật mã theo cách độc quyền của Cisco"],[3137,"ố key-id là một con số danh định có giá trị từ 1 đến 255"],[3138,"Tham n cho bạn khai báo mật mã, có thể dài đến 16 ký tự"],[3139,"Các router láng giềng bắt hải có cùng số key-id cà cùng giá trị key"],[3140,"ấu hình mật mã MD5 xong bạn cần bật chế độ xác minh message-digest (config-router)#areaarea-id authentication message-digest"],[3141,"273 Hình 2.3.4.b"],[3142,"Cấu hình cơ chế xác minh MD5 cho OSPF"],[3143,"Từ mật mã và nội dung của gói dữ liệu, thuật toán mẫt mã MD5 sẽ tạo ra một thông điệp gắn thêm vào gói d ói dữ liệu sẽ dùng mật mã mà ới gói dữ liệu nhận được để tạo ra một thông điệp"],[3144,"Nếu kết quả hai thông điệp này giống nhau thì có nghĩa là là router đã nhận được gói dữ nào"],[3145,"Nếu cơ chế xác minh là message-digest thì trường authentication data sẽ có chứa key-id và thông số cho biết chiều dài của phần thông hời gian của OSPF nh, khoảng thời gian bất động bằng bốn lần khoảng thời gian hello"],[3146,"Điều này có nghĩa là một i để gửi gói hello trước khi nó xác định là đã chết"],[3147,"ữ liệu"],[3148,"Router nhận g bản thân router có kết hợp v liệu từ đúng nguồn và nội dung gói dữ liệu đã không bị can thiệp"],[3149,"Cấu trúc phần header của gói OSPF như trên hình 2.3.4.a"],[3150,"Trường authentication type cho biết cơ chế xác minh là cơ chế điệp gắn thêm vào gói dữ liệu"],[3151,"Phần thông điệp này giống như một con dấu không thể làm giả được"],[3152,"2.3.5"],[3153,"Cấu hình các thông số t Các router OSPF bắt buộc phải có khoảng thời gian hello và khoảng thời gian bất động với nhau mới có thể thực hiện trao đổi thông tin với nhau"],[3154,"Mặc đị router có đến 4 cơ hộ"],[3155,"274 Trong mạng OSPF quảng bá, khoảng thời gian hello mặc định là 10 giây, khoảng thời gian bất động mặc định là 40 giây"],[3156,"Trong mạng không quảng bá, khoảng thời gian hello mặc định là 30 giây và khoảng thời gian bất động mặc định là 120 giây"],[3157,"Các giá trị mặc định này có ảnh hưởng đến hiệu quả hoạt động của OSPF và đôi khi bạn cần phải thay đổi chúng"],[3158,"Người quản trị mạng được phép lựa chọn giá trị cho hai khoảng thời gian này"],[3159,"Để tăng hiệu quả hoạt động của mạng bạn cần ưu tiên thay đổi giá trị của hai khoảng thời gian này"],[3160,"Tuy nhiên, các giá trị này phải được cấu hình giống nhau cho mọi router láng giềng kết nối với nhau"],[3161,"Để cấu hình khoảng thời gian hello và khoảng thời gian bất động trên một cổng outer (config-if)#ip ospf hello-interval seconds Router (config-if)#ip ospf dead-interval seconds của router, bạn sử dụng câu lệnh sau: R Hình 2.3.5"],[3162,"275 2"],[3163,"on đường đến tất cả các mạng đích trong hệ thống đường đi cho mọi mạng đích trên thế giới thì sẽ ồ"],[3164,", chúng ta khai báo đường mặc định cho router OSPF nào kết nối ra ngoài"],[3165,"Sau đó thông tin về đường mặc định này được phân phối vào cho các router Mọi router trong hệ thống OSPF sẽ nhận biết được là có đường mặc định trên 3.6"],[3166,"OSPF thực hiện quảng bá đường mặc định Định tuyến OSPF đảm bảo các c không bị lặp vòng"],[3167,"Để đến được các mạng nằm ngoài hệ thống thì OSPF cần phải biết về mạng đó hoặc là phải có đường mặc định"],[3168,"Tốt nhất là sử dụng đường mặc định vì nều router phải lưu lại từng tốn một lượng tài nguyên khổng l Trên thực tế khác trong hệ tự quản (AS \u2013 autonomous system) thông qua hoạt động cập nhật bình thường của OSPF"],[3169,"Trên router có cổng kết nối ra ngoài, bạn cấu hình mặc định bằng câu lệnh sau: Router (config)#ip route 0.0.0.0 0.0.0.0 [interface | next-hop address ] Mạng tám số 0 như vậy tương ứng với bất kỳ địa chỉ mạng nào"],[3170,"Sau khi cấu hình đường mặc định xong, bạn cấu hình cho OSPF chuyển thông tin về đường mặc định cho mọi router khác trong vùng OSPF: Router (config-router) #default \u2013 information originate router biên giới kết nối ra ngoài"],[3171,""],[3172,"276 Hìn 2 trong bảng định tuyến"],[3173,"2.3.7"],[3174,"N OSPF giềng hoặc thân mật với OSPF router khác để trao đổi thông tin định tuyến"],[3175,"Mối quan hệ này không thiết lập được có thể do \u2022 C \u2022 \u2022 L \u2022 M Trong c cũng vô cùng quan t \u2022 Tất cả các cổng giao tiếp phải có địa chỉ và subnet mask chính xác"],[3176,"h .3.6"],[3177,"Đường mặc định chỉ được sử dụng khi không tìm thấy đường nào khác hững lỗi thường gặp trong cấu hình OSPF router phải thiết lập mối quan hệ láng những nguyên nhân sau: ả hai bên láng giềng với nhau đều không gửi Hello"],[3178,"Khoảng thời gian Hello và khoảng thời gian bất động không giống nhau giữa các router láng giềng"],[3179,"oại cổng giao tiếp khác nhau giữa các router láng giềng"],[3180,"ật mã xác minh và chìa khoá khác nhau giữa các router láng giềng"],[3181,"ấu hình định tuyến OSPF việc đảm bảo tính chính xác của các thông tin sau rọng:"],[3182,"277 \u2022 C \u2022 C 2.3"],[3183,"K Để kiểm tra cấu hình OSPF bạn có thể dùng các lệnh show được liệt kê trong bảng 2.3"],[3184,"OSPF"],[3185,"Bảng 2 Lệ Giải thích âu lệnh network area phải có wildcard mask chính xác"],[3186,"âu lệnh network area phải khai báo đúng area mà network đó thuộc về"],[3187,"8"],[3188,"iểm tra cấu hình OSPF 8.a"],[3189,"Bảng 2.3.8.b liệt kê các lệnh show hữu dụng cho bạn khi tìm sự cố của .3.8.a"],[3190,"Các lệnh show dùng để kiểm tra cấu hình OSPF nh Show pro thông số định ip Hiển thị các thông tin về thông số thời gian, tocol tuyến, mạng định tuyến và nhiều thông tin khác của tất cả các giao thức định tuyến đang hoạt động trên router"],[3191,"Sh route c được các đường đi này bằng cách nào"],[3192,"ow ip Hiển thị bảng định tuyến của router, trong đó là danh sách các đường tốt nhất đến các mạng đích của bản thân router và cho biết router họ Sh inte ợc cấu hình thì ghi địa chỉ IP của cổng vật lý nào có giá trị lớn nhất sẽ được chọn làm router ID"],[3193,"Lệnh này cũng ng thời cho biết các router ow ip ospf Lệnh này cho biết cổng của router đã được cấu hình đúng rface với vùng mà nó thuộc về hay không"],[3194,"Nếu cổng loopback không đư hiển thị các thông số của khoảng thời gian hello và khoảng thời gian bất động trên cổng đó, đồ láng giềng thân mật kết nối vào cổng"],[3195,"Show i ày cho biết số lần đã sử dụng thuật toán SPF, đồng thời cho biết khoảng thời gian cập nhật khi mạng không có gì p ospf Lệnh n"],[3196,"278 thay đổi"],[3197,"Show ip ospf neig detail Liệt kê chi tiết các láng giềng, giá trị ưu tiên của chúng và hbor trạng thái của chúng"],[3198,"Sho databa mạng trên router, đồng thời cho biết router ID, ID của tiến w ip ospf se Hiển thị nội dung của cơ sở dữ liệu về cấu trúc hệ thống trình OSPF"],[3199,"Bảng 2.3.8.b"],[3200,"Các lệnh clear và debug dùng để kiểm tra hoạt động OSPF"],[3201,"Lệnh Giải thích Clear ip route * Xoá toàn bộ bảng định tuyến"],[3202,"Clear ip route a.b.c.d Xoá đường a.b.c.d trong bảng định tuyến"],[3203,"Debug ip ospf events Báo cáo mọi sự kiện của OSPF"],[3204,"Debug ip ospf adj Báo cáo mọi sự kiện về hoạt động quan hệ thân mật của OSPF"],[3205,"TỔ ẾT Sau được trong chương này: \u2022 C \u2022 Thông tin định tuyến theo trạng thái đường liên kết được xây dựng và bảo trì như thế nào"],[3206,"ạng thái đường liên kết"],[3207,"nh tuyến theo trạng thái đường liên kết"],[3208,"NG K đây là các điểm quan trọng bạn cầm nắm ác đặc điểm của định tuyến theo trạng thái đường liên kết"],[3209,"\u2022 Thuật toán định tuyến theo tr \u2022 Ưu và nhược điểm của đị"],[3210,"279 \u2022 S n theo vectơ khoảng cách"],[3211,"\u2022 C \u2022 C \u2022 H ủa thuật toán chọn đường ngắn nhất SPF"],[3212,"\u2022 Giao thức OSPF Hello"],[3213,"\u2022 C \u2022 K outer"],[3214,"\u2022 Cấu hình cổng loopback để đặt quyền ưu tiên cho router"],[3215,"ng của OSPF bằng cách thay đổi thông số chi phí"],[3216,"để kiểm tra hoạt động của OSPF"],[3217,"o sánh định tuyến theo trạng thái đường liên kết với định tuyế ác thuật ngữ OSPF"],[3218,"ác loại mạng OSPF"],[3219,"oạt động c ác bước cơ bản trong hoạt động của OSPF"],[3220,"hởi động OSPF trên r \u2022 Thay đổi quyết định chọn đườ \u2022 Cấu hình quá trình xác minh cho OSPF"],[3221,"\u2022 Thay đổi các thông số thời gian của OSPF"],[3222,"\u2022 Tạo và quảng bá đường mặc định"],[3223,"\u2022 Sử dụng các lệnh show"],[3224,"280 Chương 3: EIGRP GIỚI THIỆU Enhanced Interior Gateway Routing Protocol (EIGRP) là một giao thức định tuyến độc quyền của Cisco được phát triển từ Interior Gateway Routing Protocol (IGRP)"],[3225,"Không giống như IGRP là một giao thức định tuyến theo lớp địa chỉ, EIGRP có hỗ trợ định tuyến liên miền không theo lớp địa chỉ (CIDR \u2013 Classless Interdomain Routing) và cho phép người thiết kế mạng tối ưu không gian sử dụng địa chỉ bằng VLSM"],[3226,"So với IGRP, EIGRP có thời gian hội tụ nhanh hơn, khả năng mở rộng tốt hơn và khả năng chống lặp vòng cao hơn"],[3227,"Hơn nữa, EIGRP còn thay thế được cho giao thức Novell Routing Information Protocol (Novell RIP) và Apple Talk Routing Table Maintenance Protocol (RTMP) để phục vụ hiệu quả cho cả hai mạng IPX và Apple Talk"],[3228,"EIGRP th ả giao thức định tuyến theo vectơ khoảng cách và giao thức định tuyến theo trạng thái đường liên kết"],[3229,"EIGRP là một g c điểm cả giao ụ cấu hình EIGRP, đặc biết tập trung vào ng dự phòng khi cần thiết, cácg đáp ứng với sự cố của một đường đi nào đó"],[3230,"Một hệ thống mạng được xây dựng bởi nhiều thiết bị, nhiều giao thức và nhiều loại đó của mạng không hoạt động đúng thì sẽ có một vài người dùng không truy cập được hoặc có thể cả hệ thống mạng cũng không họat động được"],[3231,"Cho dù trong trường hợp nào thì khi sự cố xảy ra người ường được xem là giao thức lai vì nó kết hợp các ưu điểm của c iao thức định tuyến nâng cao hơn dựa trên các đặ thức định tuyến theo trạng thái đường liên kết"],[3232,"Những ưu điểm tốt nhất của OSPF như thông tin cập nhật một phần, phát hiện router láng giềng\u2026được đưa vào EIGRP"],[3233,"Tuy nhiên, cấu hình EIGRP dễ hơn cấu hình OSPF"],[3234,"EIGRP là một lựa chọn lý tưởng cho các mạng lớn, đa giao thức được xây dựng dựa trên các Cisco router"],[3235,"Chương này sẽ đề cập đến các nhiệm v cách EIGRP thiết lập mối quan hệ với các router thân mật, cách tính toán đường chính và đườ môi trường truyền"],[3236,"Khi một bộ phận nào"],[3237,"281 quản trị mạng phải nhanh chóng xác định được sự cố và xử lí chúng"],[3238,"Sự cố mạng thường do những nguyên nhân sau: \u2022 Gõ sai câu lệnh \u2022 Cấu hình danh sách kiểm tra truy cập ACL không đúng hoặc đặt ACL không đúng chỗ ấu hình cho router, switch và các thiết bị mạng khác \u2022 Kết nối vật lý không tốt N đ d các lớp trên"],[3239,"Mặ ý sự cố các họat động của giao thức định tuyến ở Lớp 3 nhưng cũng rất quan trong cho các bạn khi cần l Sau khi hoàn tất chương \u2022 Mô tả sự khác nh \u2022 Mô tả các khái ni \u2022 Hiểu được quá trình h thuật toán DUAL \u2022 Thực hiện cấu hìn \u2022 Cấu hình đường t \u2022 Mô tả quá trình EIGRP xây dựng và bảo trì bảng định tuyến ô tả 8 bước để x \u2022 Áp dụng tiến trình \u2022 Xử lý sự cố của h debug"],[3240,"\u2022 Xử lý sự cố của họ debug \u2022 Xử lý sự cố của họat động định tuyến EIGRP bằng cách sử dụng lệnh show và debug \u2022 Xử lý sự cố của họat động định tuyến OSPF bằng cách sử dụng lệnh show EIGRP GRP Cisco đưa ra giao thức EIGRP vào năm 1994 như là một phiên bản mới mở rộng oảng cách trong IGRP vẫn được sử dụng cho EIGRP \u2022 Các c gười quản trị mạng cầ ồ xử lý sự cố tổng quát ần lên n tiếp cận với sự cố một cách có phương pháp, sử dụng sơ"],[3241,"Trước tiên là kiểm tra sự cố ở lớp vật lý trước rồi mới đi dù chương này chỉ tập trung vào xử l oại trừ sự cố ở các lớp dưới"],[3242,"này, các bạn sẽ thực hiện được những việc sau: au giữa EIGRP và IGRP ệm, kĩ thuật và cấu trúc dữ liệu của EIGRP ội tụ của EIGRP và các bước họat động cơ bản của (Diffusing Update Algorithm) h EIGRP cơ bản ổng hợp cho EIGRP \u2022 Kiểm tra hoạt độn \u2022 M g của EIGRP ử lý sự cố tổng quát logic để xử lý sự cố định tuyến"],[3243,"ọat động định tuyến RIP bằng cách sử dụng lệnh show và at động định tuyến IGRP bằng cách sử dụng lệnh show và và debug 3.1"],[3244,"Các khái niệm của 3.1.1"],[3245,"So sánh EIGRP và I và nâng cao hơn của giao thức IGRP"],[3246,"Kĩ thuật vectơ kh"],[3247,"282 EIGRP cải tiến các đặc tính của quá trình hội tụ, họat động hiệu quả hơn IGRP"],[3248,"ẫn giữ nguyên những gì đã xây dựng trong IGRP Chúng ta sẽ tập trung so sánh EIGRP và IGRP trong các lĩnh vực sau: ích \u2022 Cách tính thông số định tuyến \u2022 Số lượng hop \u2022 Họat động phân phối thộng tin tự động \u2022 Đánh dấu đường đi IGRP và EIGRP hoàn toàn tương thích với nhau"],[3249,"EIGRP router không có ranh giới khi họat động chung với IGRP router"],[3250,"Đặc điểm này rất quan trọng khi người sử dụng muốn tận dụng ưu điểm của cả hai giao thức"],[3251,"EIGRP có thể hỗ trợ nhiều lọai giao thức khác nhau còn IGRP thì không"],[3252,"EIGRP và IGRP có cách tính thông số định tuyến khác nhau"],[3253,"EIGRP tăng thông số định tuyến của IGRP sử dụng thông số 24 bit"],[3254,"Bằng cách nhân lên hoặc chia đi 256 lần, EIGRP có thể dễ dàng chuyển đổi thông số định tuyến của IGRP EIGRP và IGRP đều sử dụng công th ố định tuyến như sau: Thông số định tuyến = [K1 * băng thông + (K2 * băng thông/(256 \u2013 độ tải) độ trễ)] * [K5/(độ tin cậy + K4)] ặc định: K1=1, K2=0, K3=1, K4=0, K5=0"],[3255,"Khi K4=K5=0 thì phần [K5/ (độ tin cậy + K4)]trong công thức không còn là một nhân tố khi tính thông số định đó, công thức tính còn lại như sau: độ trễ Điều này cho phép chúng ta mở rộng, cải tiến cấu trúc trong khi v \u2022 Tính tương th ức tính thông s + (K3 * M tuyến nữa"],[3256,"Do Thông số định tuyến = băng thông + IGRP và EIGRP sử dụng các biến đổi sau để tính toán thông sô định tuyến: Băng thông trong công thức trên áp dụng cho IGRP = 10 000 000 / băng"],[3257,"283 thông thực sự Băng thông trong công thức trên áp dụng cho EIGRP = (10 000 000 / băng thông thực sự) * 256 Độ trễ trong công thức trên áp dụng cho IGRP = độ trễ thực sự/10 Độ trễ trong công thức trên áp dụng cho EIGRP = (độ trễ thực sự/10) * 256 IGRP có số lượng hop tối đa là 255"],[3258,"EIGRP có số lượng hop tối đa là 224"],[3259,"Con số này dư sức đáp ứng cho một mạng được thiết kế hợp lí lớn nhất"],[3260,"n với nhau thì cần phải cấu hình nâng cao hơn"],[3261,"Trong khi đó a hệ tự quản sẽ tự động phân phối và chia sẻ hau"],[3262,"Trong ví dụ ở hình 3.1.1, RTB tự động phân phối à EIGRP học được cho IGRP AS và ngược lại"],[3263,"được từ IGRP hay từ bất kì nguồn bên ngoài nào khác là đường ngoại vi vì những con đường này không xuất phát từ như hình 3.1.1, trong kết quả hiển thị của lệnh show ip route, đường EIGRP t này"],[3264,"RTC chỉ nhận biêt tất cả các đường đều là đường IGRP mặc dù 2 Để các giao thức định tuyến khác nhau như OSPF và RIP chẳng hạn thực hiện chia sẻ thông tin định tuyế IGRP và EIGRP có cùng số AS củ thông tin về đường đi với n các thông tin về đường đi m EIGRP đánh dấu những đường mà nó học EIGRP router"],[3265,"IGRP thì không phân biệt đường ngoại vi và nội vi"],[3266,"Ví dụ được đánh dấu bằng chữ D, đường ngoại vi được đánh dấu bằng chữ EX"],[3267,"RTA phân biệt giữa mạng học được từ EIGRP (172.16.0.0) và mạng được phân phối từ IGRP (192.168.1.0)"],[3268,"Trong bảng định tuyến của RTC, giao thức IGRP không có sự phân biệ mạng 10.1.1.0 và 172.16.0.0 là được phân phối từ EIGRP"],[3269,""],[3270,"284 3.1 ữ của EIGRP EIGRP router lưu giữ các thông tin về đường đi và cấu trúc mạng trên RAM, nhờ đó đổi"],[3271,"Giống như OSPF, EIGRP cũng lưu nh ệu khác nhau"],[3272,"EIG ặc biệt"],[3273,"Mỗi con đường có dấu để cung cấp thêm nhiều thông tin hữu dụng khác"],[3274,"EIG \u2022 Bảng láng giềng (Neighbor table) Bả RP lưu giữ mộ Bảng này tươ ức mà EIG Khi phát hiện một láng giềng mới, router sẽ ghi lại địa chỉ và cổng kết nối của láng giề ông số về khoảng thời gian lưu giữ"],[3275,"Nếu router không nhận được gói hello khi đến định kì thì kho ng thời gian lưu giữ là khoảng thời gian mà router chờ và vẫn xem là router láng giềng còn kết nối được và còn họat động"],[3276,"Khi khoảng thời gian lưu giữ đã hết mà vẫn không còn kết nối được và còn hoạt động"],[3277,"Khi khoảng thời gian lưu giữ đã hết mà vẫn không nhận được hello từ router láng giềng đó, thì xem như router láng giềng đã không còn kết nối được hoặc không còn hoạt động, thuật toán DUAL .2"],[3278,"Các khái niệm và thuật ng chúng đáp ứng nhanh chóng theo sự thay ững thông tin này thành từng bảng và từng cơ sở dữ li RP lưu các con đường mà nó học được theo một cách đ trạng thái riêng và có đánh RP có ba lọai bảng sau: \u2022 Bảng cấu trúc mạng (Topology table) \u2022 Bảng định tuyến (Routing table) ng láng giềng là bảng quan trọng nhất trong EIGRP"],[3279,"Mỗi router EIG t bảng láng giềng, trong đó là danh sách các router thân mật với nó"],[3280,"ng tự như cơ sở dữ liệu về các láng giềng của OSPF"],[3281,"Đối với mỗi giao th RP hỗ trợ, EIGRP có một bảng láng giềng riêng tương ứng"],[3282,"ng đó vào bảng láng giềng"],[3283,"Khi láng giềng gửi gói hello trong đó có th ả"],[3284,"285 (Difusing Up tính toán lại theo mạng mới"],[3285,"Bả cấu trúc mạng là bảng cung cấp dũ liệu để xây dưngj lên mạng định tuyến của EIGRP"],[3286,"DUAL lấy thông tin từ bảng láng giềng và bảng cấu trúc mạng để tính toá ó chi phí thấp nhất đến từng mạng đích"],[3287,"Mỗ thứ mà khá nhấ Sau là những thông tin chứa trong bảng cấu trúc mạng: \u2022 Thông tin về cổng giao tiếp mà router sử dụng để đi đến mạng đích"],[3288,"Bả Nh Ro Co tin và ạng đích có thể có đến 4 successor"],[3289,"Những đườ cũn Đư này với đường successor nhưng chúng chỉ được lưu trong bảng c Ro nó"],[3290,"với cố bắt đư iện tại"],[3291,"Nếu trong bảng cấu trúc mạng không có sẵn đường Feasible successor thì con đường đến mạng đích tương ứng được đưa vào trạng date Algorithm) sẽ thông báo sự thay đổi này và thực hiện ng n chọn đường c i EIGRP router lưu một bảng cấu trúc mạng riêng tương ứng với từng loại giao c mạng khác nhau"],[3292,"Bảng cấu trúc mạng chứa thông tin về tất cả các con đường router học được"],[3293,"Nhờ những thông tin này mà router có thể xác định đường đi c để thay thế nhanh chóng khi cần thiết"],[3294,"Thuật tóan DUAL chọn ra đường tốt t đến mạng đích gọi là đường kính (successor router)"],[3295,"đây \u2022 Feasible distance (FD): là thông tin định tuyến nhỏ nhất mà EIGRP tính được cho từng mạng đích"],[3296,"\u2022 Route source: là nguồn khởi phát thông tin về một con đường nào đó"],[3297,"Phần thông tin này chỉ có với những đường được học từ ngoài mạng EIGRP"],[3298,"\u2022 Reported disdiance (RD): là thông số định tuyến đến một router láng giềng thân mật thông báo qua"],[3299,"\u2022 Trạng thái đường đi: Trạng thái không tác động (P \u2013 passive) là trạng thái ổn định, sẵn sàng sử dụng được, trạng thái tác động (A \u2013 active) là trạng thái đang trong tiến trình tính toán lại của DUAL"],[3300,"ng định tuyến EIGRP lưu giữ danh sách các đường tốt nhất đến các mạng đích"],[3301,"ững thông tin trong bảng định tuyến được rút ra từ bảng từ cấu trúc mạng"],[3302,"uter EIGRP có bảng định tuyến riêng cho từng giao thức mạng khác nhau"],[3303,"n đường được chọn làm đường chính đến mạng đích gọi là successor"],[3304,"Từ thông trong bảng láng giềng và bảng cấu trúc mạng, DUAL chọn ra một đường chính đưa lên mạng định tuyến"],[3305,"Đến một m ng này có chi phí bằng nhau hoặc không bằng nhau"],[3306,"Thông tin về successor g được đạt trong bảng cấu trúc mạng"],[3307,"ờng Feasible successor (FS) là đường dự phòng cho đường successor"],[3308,"Đường cũng được chọn ra cùng ấu trúc mạng nhưng điều này không bắt buộc"],[3309,"uter xem hop kế tiếp của đường Feasible successor dưới nó gần mạng đích hơn Do đó, chi phí của Feasible successor được tính bằng chi phí của chính nó cộng chi phí vào router láng giềng thông báo qua"],[3310,"Trong trường hợp successor bị sự thì router sẽ tìm Feasible successor để thay thế"],[3311,"Một đường Feasible successor buộc phải có chi phí mà router láng giềng thông báo qua thấp hơn chi phí của ờng successor h"],[3312,"286 thái Active và router bắt đầu gửi các gói yêu cầu đến tất cả các láng giềng để tính toán lại cấu trúc mạng"],[3313,"Sau đó với các thông tin mới nhận được, router có thể sẽ chọ i được chọn xon n ra được successor mới hoặc Feasible successor mới"],[3314,"Đường mớ g sẽ có trạng thái là Passive"],[3315,"Hình 3.1.2.a"],[3316,"RTA có thể có nhiều successor đến mạng Z nếu RTB và RTC o về chi phí đến mạng Z như nhau gửi thông bá Hình vẽ 3.1.2.b"],[3317,"Bả u thông tin khác về các đường đi"],[3318,"EIGRP phân loạ ại vi"],[3319,"Đường nội vi là đường xuất phát từ bên tro hãn (Administrator tag) với giá trị từ 0 đến 255 để phân biệt đường thuộc loại nào"],[3320,"Đư EIGRP"],[3321,"Các đường ngoại vi là nh ức định tuyến khác như RIP, OSPF và IGR đường ngoại vi"],[3322,"ng cấu trúc mạng còn lưu nhiè i ra đường nôi vi và đường ngo ng hệ tự quản (Á \u2013Autonomous system) của EIGRP"],[3323,"EIGRP có dán n ờng ngoại vi là đường xuất phát từ bên ngoài Á của ững đường được học từ các giao th P"],[3324,"Đường cố định cũng được xem là"],[3325,"287 3.1 EIG the vµ c gièng nh− mét giao thøc ®Þnh tuyÕn theo tr¹ng th¸i ®−êng liªn kÕt"],[3326,"Sau ®©y lµ c¸c −u ®iÓm cña EIGRP so víi giao thøc ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch th«ng th−êng: \u2022 Tèc ®é héi tô nhanh"],[3327,"\u2022 Sö dông b¨ng th«ng hiÖu qu¶"],[3328,".3"],[3329,"C¸c ®Æc ®iÓm cña EIGRP RP ho¹t ®éng kh¸c víi IGRP"],[3330,"VÒ b¶n chÊt EIGRP lµ mét giao thøc ®Þnh tuyÕn o vect¬ kho¶ng c¸ch n©ng cao nh−ng khi cËp nhËt vµ b¶o tr× th«ng tin l¸ng giÒng th«ng tin ®Þnh tuyÕn th× nã lµm viÖ"],[3331,"288 \u2022 Cã hç trî VLSM (Variable \u2013 Length Subnet Mask) vµ CIDR (Classless Interdomain Routing)"],[3332,"Kh«ng gièng nh− IGRP, EIGRP cã trao ®æi th«ng tin vÒ subnet mask nªn nã hç trî ®−îc cho hÖ thèng IP kh«ng theo líp"],[3333,"\u2022 Hç trî nhiÒu giao thøc m¹ng kh¸c nhau"],[3334,"\u2022 Kh«ng phô thuéc vµo giao thøc ®Þnh tuyÕn"],[3335,"Nhê cÊu tróc tõng phÇn riªng biÖt t−¬ng øng víi tõng giao thøc mµ EIGRP kh«ng cÇn ph¶i chØnh söa l©u"],[3336,"VÝ dô nh− khi ph¸t triÓn ®Ó hç trî mét giao thøc míi nh− IP ch¼ng h¹n, EIGRP cÇn ph¶i cã thªm phÇn míi t−¬ng øng cho IP nh−ng hoµn toµn kh«ng cÇn ph¶i viÕt l¹i EIGRP"],[3337,"EIG kh« thùc h EIGRP sö dông b¨ng th«ng hiÖu qu¶ v× nã chØ göi th«ng tin cËp nhËt mét phÇn vµ gií b¨n ®én gö gö cña router EIGRP gi÷ liªn l¹c víi nhau b»ng c¸c gãi hello rÊt nhá"],[3338,"ViÖc trao ®æi c¸c gãi hel EIGRP cã thÓ hç trî cho IP, IPX vµ Apple Talk nhê cã cÊu tróc tõng phÇn theo giao thøc (PDMs \u2013 Protocol-dependent modules)"],[3339,"EIGRP cã thÓ ph©n phèi th«ng tin cña ®iÒ chØ tha EIG Pro ®−ê l¾m"],[3340,"Do ®ã, EIGRP sö dông th«ng sè ®Þnh tuyÕn tæng hîp RP router héi tô nhanh v× chóng sö dông DUAL"],[3341,"DUAL b¶o ®¶m ho¹t ®éng ng bÞ lÆp vßng khi tÝnh to¸n ®−êng ®i, cho phÐp mäi router trong hÖ thèng m¹ng iÖn ®ång bé cïng lóc khi cã sù thay ®æi x¶y ra"],[3342,"i h¹n chø kh«ng göi toµn bé b¶ng ®Þnh tuyÕn"],[3343,"Nhê vËy nã chØ tèn mét l−îng g th«ng tèi thiÓu khi hÖ thèng m¹ng ®· æn ®Þnh"],[3344,"§iÒu nµy t−¬ng tù nh− ho¹t g cËp nhËt cña OSPF, nh−ng kh«ng gièng nh− router OSPF, router EIGRP chØ i th«ng tin cËp nhËt mét phÇn cho router nµo cÇn th«ng tin ®ã mµ th«i, chø kh«ng i cho mäi router kh¸c trong vïng nh− OSPF"],[3345,"ChÝnh v× vËy mµ ho¹t ®éng cËp nhËt EIGRP gäi lµ cËp nhËt giíi h¹n"],[3346,"Thay v× ho¹t ®éng cËp nhËt theo chu kú, c¸c lo theo ®Þnh kú kh«ng chiÕm nhiÒu b¨ng th«ng ®−êng truyÒn"],[3347,"IPX RIP vµ SAP ®Ó c¶i tiÕn ho¹t ®éng toµn diÖn"],[3348,"Trªn thùc tÕ, EIGRP cã thÓ u khiÓn hai giao thøc nµy"],[3349,"Router EIGRP nhËn th«ng tin ®Þnh tuyÕn vµ dÞch vô, cËp nhËt cho c¸c router kh¸c khi th«ng tin trong b¶ng ®Þnh tuyÕn hay b¶ng SAP y ®æi"],[3350,"RP cßn cã thÓ ®iÒu khiÓn giao thøc Apple Talk Routing Table Maintenance tocol (RTMP)"],[3351,"RTMP sö dông sè l−îng hop ®Ó chän ®−êng nªn kh¶ n¨ng chän ng kh«ng ®−îc tèt"],[3352,"289 cÊu tuy tuy tin ®Þnh tuyÕn Apple Talk khi cã sù kiÖn thay ®æi mµ th«i"],[3353,"Tuy nhiªn, Apple Talk cli cho WA 3.1 EIG c¸c chøc n¨ng so víi IGRP vµ c¸c giao thøc ®Þnh tuyÕn kh¸c"],[3354,"C¸c kü thuËt nµy ®−îc tËp trung thµnh 4 lo¹i nh− sau: \u2022 T \u2022 CÊu tróc tõng phÇn theo giao thøc (PDMs \u2013 Protocol-dependent modules)"],[3355,"Ro hÖ multicast c¸c th«ng tin cËp nhË −îc cÊu h×nh"],[3356,"Ng−îc l¹i, EIG tù n h×nh ®−îc ®Ó chän ®−êng tèt nhÊt cho m¹ng Apple Talk"],[3357,"Lµ mét giao thøc ®Þnh Õn theo vect¬ kho¶ng c¸ch, RTMP thùc hiÖn trao ®æi toµn bé th«ng tin ®Þnh Õn theo chu kú"],[3358,"§Ó gi¶m bít sù qu¸ t¶i nµy, EIGRP thùc hiÖn ph©n phèi th«ng ent còng muèn nhËn th«ng tin RTMP tõ c¸c router néi bé, do ®ã EIGRP dïng Apple Talk chØ nªn ch¹y trong m¹ng kh«ng cã client, vÝ dô nh− c¸c liªn kÕt N ch¼ng h¹n"],[3359,".4"],[3360,"C¸c kü thuËt cña EIGRP RP cã rÊt nhiÒu kü thuËt míi ®Ó c¶i tiÕn hiÖu qu¶ ho¹t ®éng, tèc ®é héi tô vµ \u2022 Sù ph¸t hiÖn vµ t¸i ph¸t hiÖn c¸c router l¸ng giÒng"],[3361,"\u2022 Giao thøc truyÒn t¶i tin cËy (RTD \u2013 Reliable Transport Protocol)"],[3362,"huËt to¸n DUAL finite \u2013 state machine"],[3363,"uter ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch d¹ng ®¬n gi¶n kh«ng thiÕt lËp mèi quan víi c¸c l¸ng giÒng cña nã"],[3364,"RIP vµ IGRP router chØ ®¬n gi¶n lµ ph¸t qu¶ng b¸ hay t cña nã ra mäi cæng ®· ® RP router chñ ®éng thiÕt lËp mèi quan hÖ víi c¸c l¸ng giÒng cña chóng, t−¬ng h− c¸ch lµm cña OSPF router"],[3365,""],[3366,"290"],[3367,"291 H×nh 3.1.4 Qu¸ tr×nh EIGRP router thiÕt lËp mèi quan hÖ th©n mËt ®−îc m« t¶ trong h×nh 3.1 Sö c¸c router l¸ng giÒng"],[3368,"MÆc ®Þnh, hello ®−îc göi ®i theo chu kú lµ 5 gi©y"],[3369,"NÕu router vÉn ®i thùc hiÖn ®−îc nh÷ng viÖc sau: .4"],[3370,"EIGRP router dông c¸c gãi hello rÊt nhá ®Ó thùc hiÖn viÖc thiÕt lËp mèi quan hÖ th©n mËt víi nhËn ®−îc hello tõ l¸ng giÒng th× nã sÏ xem nh− l¸ng giÒng nµy vµ c¸c ®−êng cña nã vÉn ho¹t ®éng"],[3371,"B»ng c¸ch thiÕt lËp mèi quan hÖ nµy, EIGRP router cã thÓ"],[3372,"292 \u2022 Tù ®éng häc ®−îc ®−êng míi khi chóng kÕt nèi vµo hÖ thèng m¹ng"],[3373,"\u2022 X¸c ®Þnh mét router kh«ng cßn kÕt nèi hoÆc kh«ng cßn ho¹t ®éng n÷a"],[3374,"\u2022 Ph¸t hiÖn sù ho¹t ®éng trë l¹i cña c¸c router"],[3375,"Giao thøc vËn chuyÓn tin cËy RTP (Reliable Transport Protocol) lµ giao thøc ë líp vËn chuyÓn, thùc hiÖn viÖc chuyÓn gãi EIGRP mét c¸ch tin cËy vµ cã thø tù ®Õn tÊt c¶ c¸c l¸ng giÒng"],[3376,"Trong m¹ng IP, host sö dông TCP ®Ó vËn chuyÓn c¸c gãi mét c¸ch tuÇn tù vµ tin cËy"],[3377,"Tuy nhiªn, EIGRP lµ mét giao thøc ®éc lËp víi giao thøc m¹ng, do ®ã nã kh«ng dùa vµo TCP/IP ®Ó thùc hiÖn trao ®æi th«ng tin ®Þnh tuyÕn gièng nh− RIP, IGRP vµ OSPF ®· lµm"],[3378,"§Ó kh«ng bÞ phô thuéc vµo IP, EIGRP sö dông RTP lµm giao thøc vËn chuyÓn riªng ®éc quyÒn cña nã ®Ó ®¶m b¶o viÖc truyÒn tin ®Þnh tuyÕn"],[3379,"EIGRP cã thÓ yªu cÇu RTP cung cÊp dÞch vô truyÒn tin cËy hoÆc kh«ng tin cËy tuú theo yªu cÇu cña tõng tr−êng hîp"],[3380,"VÝ dô, c¸c gãi hello ®−îc truyÒn theo ®Þnh kú vµ cÇn ph¶i cµng nhá cµng tèt nªn chón h¶i dïng chÕ ®é truyÒn tin cËy"],[3381,"Ng îc l¹i, viÖc truyÒn tin cËy c¸c th«ng tin ®Þnh tuyÕn sÏ cã thÓ lµm t¨ng tèc ®é héi tô v× EIGRP router kh«ng cÇn chê hÕt thêi h¹n míi truyÒn l¹i"],[3382,"Ví mé Th (DU DU ph¶ Ý cã c¸c thµnh phÇn di chuyÓn ®−îc"],[3383,"FSM ®Þnh nghÜa mét tËp hîp c¸c tr¹ng th¸i cã thÕ tr¶i qua, sù kiÖn nµo g©y ra tr¹ng th¸i nµo vµ sÏ cã kÕt qu¶ g×"],[3384,"Ng−êi thiÕt kÕ sö dông FSM ®Ó lËp tr×nh c¸ch mµ mét thiÕt bÞ, mét ch−¬ng tr×nh m¸y tÝnh hay mét thuËt to¸n ®Þnh tuyÕn sÏ xö lý nh− thÕ nµo víi mét tËp hîp c¸c d÷ liÖu ®Çu vµo"],[3385,"DUAL FSM chøa tÊt c¶ c¸c logic ®−îc sö dông ®Ó tÝnh to¸n vµ so GRP"],[3386,"DU ®Þn thÊ g kh«ng cÇn p − i RTP, EIGRP cã thÓ gñi multicast vµ trùc tiÕp cho c¸c ®èi t¸c kh¸c nhau cïng t lóc, gióp tèi −u hiÖu qu¶ ho¹t ®éng"],[3387,"µnh phÇn trung t©m cña EIGRP lµ thuËt to¸n Diffusing Update Algorithm AL), lµ bé m¸y tÝnh to¸n ®−êng ®i cña EIGRP"],[3388,"Tªn ®Çy ®ñ cña kü thuËt nµy lµ AL finite-state machine (FSM)"],[3389,"FSM lµ mét bé m¸y thuËt to¸n nh−ng kh«ng i lµ mét thiÕt bÞ c¬ kh s¸nh ®−êng ®i trong m¹ng EI AL l−u tÊt c¶ c¸c ®−êng ®i mµ l¸ng giÒng th«ng b¸o qua"],[3390,"Dùa trªn th«ng sè h tuyÕn tæng hîp cña mçi ®−êng, DUAL so s¸nh vµ chän ra ®−êng cã chi phÝ p nhÊt ®Õn ®Ých"],[3391,"DUAL ®¶m b¶o mçi mét ®−êng nµy lµ kh«ng cã lÆp vßng"],[3392,""],[3393,"293 §− b¨n EIG giÒ ®−ê thÕ Mé riªn µy, nã cã kh¶ n¨ng më réng vµ t−¬ng thÝch tèt EIG tuy c¸ch thªm PDM vµo"],[3394,"Mçi PDM chÞu tr¸ch nhiÖm thùc hiÖn mäi chøc n¨ng liªn quan ®Õn mét giao thøc ®−îc ®Þnh tuyÕn"],[3395,"VÝ dô phÇn IP- EIGRP chÞu tr¸ch nhiÖm c¸c viÖc sau: \u2022 Göi vµ nhËn c¸c gãi EIGRP chøa d÷ liÖu IP"],[3396,"\u2022 Th«ng b¸o cho DUAL khi nhËn ®−îc th«ng tin ®Þnh tuyÕn IP míi"],[3397,"\u2022 Duy tr× kÕt qu¶ chän ®−êng cña DUAL trong b¶ng ®Þnh tuyÕn IP"],[3398,"\u2022 Ph©n phèi th«ng tin ®Þnh tuyÕn mµ nã häc ®−îc tõ c¸c giao thøc ®Þnh tuyÕn IP kh¸c"],[3399,"3.1.5"],[3400,"CÊu tróc d÷ liÖu cña EIGRP Giè lo¹ Cã \u2022 Yªu cÇu"],[3401,"êng chÝnh ®−îc chän ra gäi lµ ®−êng successor"],[3402,"§−êng successor ®−îc l−u trªn g ®Þnh tuyÕn vµ ®ång thêi còng ®−îc l−u trong b¶ng cÊu tróc m¹ng"],[3403,"RP gi÷ c¸c th«ng tin quan träng vÒ ®−êng ®i vµ cÊu tróc m¹ng trong b¶ng l¸ng ng vµ b¶ng cÊu tróc m¹ng"],[3404,"Hai b¶ng nµy cung cÊp cho DUAL c¸c th«ng tin vÒ ng ®i khi cÇn thiÕt"],[3405,"NÕu cã mét ®−êng liªn kÕt bÞ ®øt, DUAL sÏ t×m ®−êng thay hoÆc mét feasible successor trong b¶ng cÊu tróc mang"],[3406,"t trong nh÷ng −u ®iÓm næi bËt cña EIGRP lµ nã ®−îc thiÕt kÕ thµnh tõng phÇn g biÖt theo giao thøc"],[3407,"Nhê cÊu tróc n nhÊt"],[3408,"C¸c giao thøc ®−îc ®Þnh tuyÕn nh− IP, IPX vµ Apple Talk ®−îc ®−a vµo RP th«ng qua c¸c PDM"],[3409,"EIGRP cã thÓ dÔ dµng t−¬ng thÝch víi giao thøc dÞnh Õn míi hoÆc c¸c phiªn b¶n míi cña chóng nh− IPv6 ch¼ng h¹n b»ng ng nh− OSPF, EIGRP dùa vµo nhiÒu lo¹i gãi d÷ liÖu kh¸c nhau ®Ó duy tr× c¸c i b¶ng cña nã vµ thiÕt lËp mèi quan hÖ phøc t¹p víi router l¸ng giÒng"],[3410,"5 lo¹i gãi EIGRP: \u2022 Hello"],[3411,"\u2022 B¸o nhËn"],[3412,"\u2022 CËp nhËt"],[3413,""],[3414,"294 \u2022 §¸p øng"],[3415,"EIG giÒ l¸n l¹i Ch hêi gian hello mÆ b¨ng th«ng trªn tõng cæng cña router"],[3416,"Trong m¹ng IP, EIGRP router göi hello theo ®Þa multicast 224.0.0.10"],[3417,"EIGRP router l−u th«ng tin vÒ c¸c l¸ng giÒng trong b¶ng l¸ng giÒng"],[3418,"B¶ng l¸ng giÒ tù (Seq No) vµ thêi gian l−u gi÷ cña gãi EIGRP cuèi cïng nhË giÒng"],[3419,"Theo ®Þnh kú vµ trong giíi h¹n cña kho¶ng thêi gian l−u gi÷, router ph¶i nhËn ®−îc gãi EIGRP th× nh÷ng ®−êng t−¬ng øng míi cã NÕ gia to¸ hel hîp RP dùa vµo c¸c gãi hello ®Ó ph¸t hiÖn, kiÓm tra vµ t¸i ph¸t hiÖn c¸c router l¸ng ng"],[3420,"T¸i ph¸t hiÖn cã nghÜa lµ router EIGRP kh«ng nhËn ®−îc hello tõ mét router g giÒng trong suèt kho¶ng thêi gian l−u gi÷ nh−ng sau ®ã router l¸ng giÒng nµy t¸i lËp l¹i th«ng tin liªn l¹c"],[3421,"u kú göi hello cña EIGRP router cã thÓ cÊu h×nh ®−îc"],[3422,"Kho¶ng t c ®Þnh phô thuéc vµo ng nµy cã l−u sè thø n ®−îc tõ mçi router l¸ng tr¹ng th¸i Passive"],[3423,"Tr¹ng th¸i Passive cã nghÜa lµ tr¹ng th¸i ho¹t ®éng æn ®Þnh"],[3424,"u router kh«ng nghe ngãng ®−îc g× vÒ router l¸ng giÒng trong suèt kho¶ng thêi n l−u gi÷ th× EIGRP sÏ xem nh− l¸ng giÒng ®ã ®· bÞ sù cè vµ DUAL ph¶i tÝnh n l¹i b¶ng ®Þnh tuyÕn"],[3425,"MÆc ®Þnh, kho¶ng thêi gian l−u gi÷ gÊp 3 lÇn chu kú lo"],[3426,"Ng−êi qu¶n trÞ m¹ng cã thÓ cÊu h×nh gi¸ trÞ cho 2 kho¶ng thêi gian nµy phï h¬n víi hÖ thèng cña m×nh"],[3427,"H×nh 3.1.5 OSPF b¾t buéc c¸c router l¸ng giÒng víi nhau ph¶i cã cïng kho¶ng thêi gian hello vµ kho¶ng thêi gian bÊt ®éng th× míi cã thÓ th«ng tin liªn l¹c víi nhau ®−îc"],[3428,"EIGRP th× kh«ng yªu cÇu nh− vËy"],[3429,"Router sÏ häc c¸c kho¶ng thêi gian cña router l¸ng giÒng th«ng qua viÖc trao ®æi gãi hello"],[3430,"Chóng sÏ dïng th«ng tin trong ®ã ®Ó"],[3431,"295 thiÕt lËp mèi quan hÖ æn ®Þnh mµ kh«ng cÇn c¸c kho¶ng thêi gian nµy ph¶i gièng nhau gi÷a chóng"],[3432,"Gãi hello th−êng ®−îc göi theo chÕ ®é kh«ng b¶o ®¶m tin cËy"],[3433,"§iÒu nµy cã nghÜa lµ kh«ng cã b¸o nhËn cho c¸c gãi hello"],[3434,"EIGRP router sö dông gãi b¸o nhËn ®Ó x¸c nhËn lµ ®· nhËn ®−îc gãi EIGRP trong qu¸ tr×nh trao ®æi tin cËy"],[3435,"Giao thøc vËn chuyÓn tin cËy (RTP \u2013 Reliable Transport Protocol) cung cÊp dÞch vô liªn l¹c tin cËy gi÷a hai host EIGRP"],[3436,"Gãi b¸o nhËn chÝnh lµ gãi hello mµ kh«ng cã d÷ liÖu"],[3437,"Kh«ng gièng nh− hello ®−îc göi multicast, c¸c gãi b¸o nhËn chØ göi trùc tiÕp cho mét m¸y nhËn"],[3438,"B¸o nhËn cã thÓ ®−îc kÕt hîp vµo lo¹i gãi EIGRP kh¸c nh− gãi tr¶ lêi ch¼ng h¹n"],[3439,"Gãi cËp nhËt ®−îc sö dông khi router ph¸t hiÖn mét l¸ng giÒng míi"],[3440,"Router EIGRP sÏ göi gãi g cÊu tróc m¹ng"],[3441,"Cã thÓ sÏ cÇn nhiÒu gãi cËp nhËt míi cã thÓ truyÒn t¶i hÕt c¸c th«ng tin cÊu tróc m¹ng cho router l¸ng giÒng míi nµy"],[3442,"Gã hi router ph¸t hiÖn sù thay ®æi trong cÊu tróc m¹ rou göi EIGRP router sö dông gãi yªu cÇu khi nã cÇn hay nhiÒu l¸ng giÒng cña nã"],[3443,"Gãi ®¸p øng ®−îc sö dông ®Ó tr¶ lêi cho c¸c gãi yªu cÇu NÕ tha ®ã ng t×m suc ®Ó Gã hØ göi cho mét m¸y, cßn gãi ®¸p øng th× chØ göi ®¶m 3.1.6"],[3444,"ThuËt to¸n EIGRP cËp nhËt cho router l¸ng giÒng míi nµy ®Ó nã cã thÓ x©y dùng b¶n i cËp nhËt cßn ®−îc sö dông k ng"],[3445,"Trong tr−êng hîp nµy, EIGRP router sÏ göi multicast gãi cËp nhËt cho mäi ter l¸ng giÒng cña nã ®Ó th«ng b¸o vÒ sù thay ®æi"],[3446,"Mäi gãi cËp nhËt ®Òu ®−îc b¶o ®¶m"],[3447,"mét th«ng tin ®Æc biÖt nµo ®ã tõ mét"],[3448,"u mét EIGRP router mÊt successor vµ nã kh«ng t×m ®−îc feasible successor ®Ó y thÕ th× DUAL sÏ ®Æt con ®−êng ®Õn m¹ng ®Ých ®ã vµo tr¹ng th¸i Active"],[3449,"Sau router göi multicast gãi yªu cÇu ®Õn tÊt c¶ c¸c l¸ng giÒng ®Ó cè g¾ cessor míi cho m¹ng ®Ých nµy"],[3450,"Router l¸ng giÒng ph¶i tr¶ lêi b»ng gãi ®¸p øng cung cÊp th«ng tin hoÆc cho biÕt lµ kh«ng cã th«ng tin nµo kh¸c cã thÓ kh¶ thi"],[3451,"i yªu cÇu cã thÓ ®−îc göi multicast hoÆc c cho m¸y nµo göi yªu cÇu mµ th«i"],[3452,"C¶ hai lo¹i gãi nµy ®Òu ®−îc göi b¶o"],[3453,""],[3454,"296 Th tr×n cÊu Mç th«ng tin sau: Nguyªn t¾c chän ®−êng Feasible successor: a mét ®−êng ®Õn mét ®Ých nµo ®ã lµ chi phÝ n thiÕt"],[3455,"−êng lín h¬n hoÆc b»ng FD cña successor hiÖn t¹i th× îc chän lµm feasible successor"],[3456,"g c¸ch thu nh©p th«ng tin tõ tÊt c¶ l¸ng giÒng ®Ó t×m th«ng tin vÒ ®−êng ®i vµ chi phÝ cña ®−êng ®ã ®Õn m¹ng ®Ých mµ router ®ang cÇn"],[3457,"uËt to¸n DUAL phøc t¹p gióp cho EIGRP héi tô nhanh"],[3458,"§Ó hiÓu râ h¬n vÒ qu¸ h héi tô víi DUAL, ta xÐt vÝ dô ë h×nh 3.1.6a"],[3459,"Mçi router x©y dùng mét b¶ng tróc m¹ng chøa c¸c th«ng tin vÒ ®−êng ®i ®Õn m¹ng A"],[3460,"i b¶ng cÊu tróc m¹ng trong vÝ dô ë c¸c h×nh 3.1.6.a-f cã c¸c \u2022 Giao thøc ®Þnh tuyÕn lµ giao thøc EIGRP"],[3461,"\u2022 Chi phÝ thÊp nhÊt cña ®−êng ®Õn mét m¹ng ®Ých gäi lµ Feasible Distance (FD)"],[3462,"\u2022 Chi phÝ cña mét ®−êng ®Õn mét m¹ng ®Ých do router l¸ng giÒng th«ng b¸o qua gäi lµ Reported Distance (RD)"],[3463,"1"],[3464,"§−êng feasible successor lµ ®−êng dù phßng, thay thÕ cho ®−êng successor khi ®−êng nµy bÞ sù cè"],[3465,"2"],[3466,"Reported Distance (RD) cñ ®−îc th«ng b¸o tõ mét router l¸ng giÒng"],[3467,"Chi phÝ nµy ph¶i nhá h¬n Feasible Distance (FD) cña ®−êng successor hiÖn t¹i"],[3468,"3"],[3469,"NÕu tho¶ m·n ®iÒu kiÖn trªn th× cã nghÜa lµ kh«ng cã vßng lÆp, ®−êng ®ã sÏ ®−îc chän lµm feasible successor 4"],[3470,"§−êng feasible succesor cã thÓ thay thÕ cho ®−êng successor khi cÇ 5"],[3471,"NÕu RD cña mét ® ®−êng ®ã kh«ng ®− 6"],[3472,"Router ph¶i tÝnh to¸n cÊu tróc m¹ng b»n c¸c l¸ng giÒng"],[3473,"7"],[3474,"Router göi gãi yªu cÇu ®Õn tÊt c¶ c¸c 8"],[3475,"TÊt c¶ c¸c l¸ng giÒng ph¶i göi gãi ®¸p øng ®Ó tr¶ lêi cho gãi yªu cÇu"],[3476,"9"],[3477,"Router ghi nhËn gi÷ liÖu míi nhËn ®−îc vµo b¶ng cÊu tróc m¹ng cña m×nh"],[3478,"10"],[3479,"B©y giê DUAL ®· cã thÓ x¸c ®Þnh ®−êng successor míi vµ feasible"],[3480,"297 successor míi nÕu cã dùa vµo th«ng tin míi"],[3481,"H×nh 3.1.6.a Cé y trong h×nh cho biÕt ®−êng nµo lµ ®−êng chÝnh hay cßn gäi lµ successor, ® Tu îc feasible suc M¹ng E i÷a c¸c router"],[3482,"HiÖn t¹i c¸c router cã c¸c th«ng tin vÒ ®−êng ®Õn m¹ng A nh− sau: cã ®−êng feasible successor"],[3483,"t Topolog −êng nµo lµ ®−êng dù phßng hay cßn gäi lµ feasible successor (FS)"],[3484,"y nhiªn, b¹n cÇn l−u ý lµ kh«ng nhÊt thiÕt lóc nµo còng ph¶i t×m ®− cessor"],[3485,"IGRP sÏ ho¹t ®éng theo c¸c b−íc m« t¶ bªn d−íi ®Ó tiÕn hµnh héi tô g \u2022 Router C cã mét ®−êng successor lµ ®−êng qua Router B"],[3486,"\u2022 Router C cã mét ®−êng feasible successor lµ ®−êng qua Router D"],[3487,"\u2022 Router D cã mét ®−êng successor lµ ®−êng qua Router B"],[3488,"\u2022 Router D kh«ng cã ®−êng feasible successor"],[3489,"\u2022 Router E cã mét ®−êng successor lµ ®−êng qua Router D"],[3490,"\u2022 Router E kh«ng"],[3491,"298 Sau nµo ®©y sÏ m« t¶ mçi router thùc hiÖn nguyªn t¾c chän feasible successor nh− thÕ khi ®−êng liªn kÕt gi÷a Router D vµ Router B bÞ ®øt: H×nh 3.1.6b Trong Router D (h×nh 3.1.6b): \u2022 §−êng ®i qua Router B bÞ xo¸ khái b¶ng cÊu tróc m¹ng"],[3492,"\u2022 §−êng nµy lµ ®−êng successor"],[3493,"Router kh«ng x¸c ®Þnh ®−îc feasible successor tr−íc ®ã"],[3494,"\u2022 Router D ph¶i tÝnh to¸n l¹i ®−êng míi"],[3495,"Trong Router C: \u2022 §−êng ®Õn M¹ng A qua Router D bÞ ®øt"],[3496,"\u2022 §−êng nµy bÞ xo¸ khái b¶ng"],[3497,"\u2022 §−êng nµy lµ successor cña Router C"],[3498,""],[3499,"299 H×nh 3.1.6.c sible successor"],[3500,"Do ®ã, nã kh«ng thÓ chuyÓn qua ªu cÇu cho tÊt c¶ c¸c l¸ng giÒng kÕt nèi víi nã lµ Router Trong Router E: \u2022 §−êng ®Õn M¹ng A th«ng qua Router D bÞ ®øt"],[3501,"\u2022 §−êng nµy lµ ®−êng successor cña Router E"],[3502,"\u2022 Router E kh«ng cã feasible successor"],[3503,"Trong router D (h×nh 3.1.6.c): \u2022 Router D kh«ng cã fea ®−êng dù phßng ®−îc"],[3504,"\u2022 Router D ph¶i tÝnh to¸n l¹i cÊu tróc m¹ng"],[3505,"Con ®−êng ®Õn M¹ng A ®−îc ®Æt voµ tr¹ng th¸i Active"],[3506,"\u2022 Router D göi gãi y C vµ Router E ®Ó yªu cÇu göi th«ng tin vÒ m¹ng"],[3507,"\u2022 Tr−íc ®ã, Router C cã ®−êng qua Router D"],[3508,"\u2022 Tr−íc ®ã, Router D kh«ng cã ®−êng qua Router E"],[3509,""],[3510,"300 \u2022 L−u ý r»ng RD cña ®−êng th«ng qua Router C lµ 3, b»ng víi chi phÝ cña ®−êng successor qua Router D"],[3511,"H×nh 3.1.6.d Trong Router C (h×nh 3.1.6.d): \u2022 Router E göi gãi yªu cÇu cho Router C"],[3512,"\u2022 r¶ lêi cho Router D ®Ó x¸c nhËn lµ ®−êng ®Õn M¹ng A ®ang ho¹t ®éng víi chi phÝ lµ 5"],[3513,"\u2022 Router D vÉn ®ang chê ®¸p øng tõ Router E"],[3514,"Router C xo¸ ®−êng qua Router E khái b¶ng"],[3515,"\u2022 Router C tr¶ lêi cho Router D víi th«ng tin vÒ ®−êng míi ®Õn M¹ng A"],[3516,"Trong Router D: \u2022 Tr¹ng th¸i cña ®−êng ®Õn M¹ng A vÉn lµ Active v× c«ng viÖc tÝnh to¸n ch−a hoµn tÊt"],[3517,"\u2022 Router C t"],[3518,"301 Trong Router E: \u2022 Router E kh«ng cã feasible successor ®Õn m¹ng A"],[3519,"\u2022 Do ®ã, Router E ®¸nh dÊu tr¹ng th¸i con ®−êng ®Õn M¹ng A lµ Active"],[3520,"\u2022 Router E ph¶i tÝnh to¸n l¹i cÊu tróc m¹ng"],[3521,"\u2022 Router E xo¸ ®−êng ®i qua Router D ra khái b¶ng"],[3522,"\u2022 Router E göi gãi yªu cÇu cho Router C ®Ó yªu cÇu th«ng tin vÒ m¹ng"],[3523,"\u2022 Tr−íc ®ã, Router E ®· cã th«ng tin vÒ ®−êng ®i qua Router C"],[3524,"§−êng nµy cã chi phÝ lµ 3, b»ng víi chi phÝ cña ®−êng successor"],[3525,"H×nh 3.1.6.e Trong Router E (h×nh 3.1.6.e): \u2022 Router C tr¶ lêi l¹i th«ng tin vÒ ®−êng ®Õn M¹ng A cã RD lµ 3"],[3526,"\u2022 B©y giê Router E cã thÓ chän ®−êng th«ng qua Router C lµm successor míi ng th¸i cña ®−êng ®Õn M¹ng A ®−îc ®æi tõ Active sang Passive"],[3527,"L−u ý: llo víi FD lµ 4 vµ RD lµ 3"],[3528,"\u2022 Tr¹ tr¹ng th¸i Passive lµ tr¹ng th¸i mÆc ®Þnh khi router vÉn nhËn ®−îc gãi he"],[3529,"302 tõ tr¹ng th¸i ®ã"],[3530,"Do ®ã trong vÝ dô nµy chØ cÇn ®¸nh dÊu tr¹ng th¸i Active th«i"],[3531,"H×nh 3.1.6.f Trong Router E (h×nh 3.1.6.f): cña \u2022 Router D nhËn ®−îc gãi håi ®¸p tõ Router E víi nh÷ng th«ng tin vÒ m¹ng cña Router E"],[3532,"\u2022 Router D ghi nhËn con ®−êng ®Õn M¹ng A th«ng qua Router E"],[3533,"\u2022 Con ®−êng nµy trë thµnh mét ®−êng successor n÷a v× nã cã chi phÝ b»ng víi ®−êng th«ng qua Router C vµ nã cã RD nhá h¬n FD cña ®−êng th«ng qua Router C"],[3534,"Qu¸ tr×nh héi tô x¶y ra gi÷a mäi router EIGRP sö dông thuËt to¸n DUAL"],[3535,"\u2022 Router E göi ®¸p øng cho Router D ®Ó cung cÊp th«ng tin vÒ m¹ng Router E"],[3536,"Trong Router D:"],[3537,"303 3.2"],[3538,"CÊu h×nh EIGRP 3.2.1"],[3539,"CÊu h×nh EIGRP Trõ thuËt to¸n DUAL lµ phøc t¹p, cßn cÊu h×nh EIGRP th× kh¸ ®¬n gi¶n"],[3540,"Tuú theo giao thøc ®−îc ®Þnh tuyÕn lµ IP, IPX hay Apple Talk mµ c©u lÖnh cÊu h×nh EIGRP sÏ kh¸c nhau"],[3541,"PhÇn sau ®©y chØ ®Ò cËp ®Õn cÊu h×nh EIGRP cho giao thøc IP"],[3542,"H×nh 3.2.1 Sau ®©y lµ c¸c b−íc cÊu h×nh EIGRP cho IP: 1"],[3543,"Sö dông lÖnh sau ®Ó khëi ®éng EIGRP vµ x¸c ®Þnh con sè cña hÖ tù qu¶n: router(config)#router eigrp autonomous-system-number Th«ng sè autonomous-system-number x¸c ®Þnh c¸c router trong mét hÖ tù qu¶n"],[3544,"Nh÷ng router nµo trong cïng mét hÖ thèng m¹ng th× ph¶i cã con sè nµy gièng nhau"],[3545,""],[3546,"304 2"],[3547,"Khai b¸o nh÷ng m¹ng nµo cña router mµ b¹n ®ang cÊu h×nh thuéc vÒ hÖ tù qu¶n EIGRP: router(config-router)#network network-number Th«ng sè network-number lµ ®Þa chØ m¹ng cña c¸c cæng giao tiÕp trªn router thuéc vÒ hÖ thèng m¹ng EIGRP"],[3548,"Router sÏ thùc hiÖn qu¶ng c¸o th«ng tin vÒ nh÷ng m¹ng ®−îc khai b¸o trong c©u lÖnh network nµy"],[3549,"B¹n chØ khai b¸o nh÷ng m¹ng nµo kÕt nèi trùc tiÕp vµo router mµ th«i"],[3550,"VÝ dô trªn h×nh 3.2.1, m¹ng 3.1.0.0 kh«ng kÕt nèi vµo Router A nªn khi cÊu h×nh EIGRP cho Router A chóng ta kh«ng khai b¸o m¹ng 3.1.0.0"],[3551,"3"],[3552,"Khi cÊu h×nh cæng serial ®Ó sö dông trong EIGRP, viÖc quan träng lµ cÇn ®Æt b¨ng th«ng cho cæng nµy"],[3553,"NÕu chóng ta kh«ng thay ®æi b»ng th«ng cña cæng, EIGRP sÏ sö dông b¨ng th«ng mÆc ®Þnh cña cæng thay v× b¨ng th«ng thùc sù"],[3554,"NÕu ®−êng kÕt nèi thùc sù chËm h¬n, router cã thÓ kh«ng héi tô ®−îc, th«ng tin ®Þnh tuyÕn cËp nhËt cã thÓ bÞ mÊt hoÆc lµ kÕt qu¶ chän ®−êng kh«ng tèi −u"],[3555,"§Ó ®Æt b¨ng th«ng cho mét cæng serial trªn router, b¹n dïng c©u lÖnh sau trong chÕ ®é cÊu h×nh n óng víi tèc ®é cña cæng"],[3556,"ã sù thay ®æi cña c¸c router l¸ng giÒng th©n mËt gióp chóng ta theo dâi sù æn ®Þnh cña hÖ thèng sù cè nÕu cã"],[3557,"3.2.2"],[3558,"CÊu h×nh ®−êng tæng hîp cho EIGRP EIGRP tù ®éng tæng hîp c¸c ®−êng l¹i theo líp ®Þa chØ"],[3559,"VÝ dô nh− h×nh 3.2.2a, RTC chØ kÕt nèi vµo m¹ng con 2.1.1.0 nh−ng nã sÏ ph¸t qu¶ng c¸o lµ nã kÕt nèi cña cæng ®ã: router(config-if)#bandwidth kilobits Gi¸ trÞ b¨ng th«ng khai trong lÖnh bandwidth chØ ®−îc sö dông tÝnh to¸n cho tiÕ tr×nh ®Þnh tuyÕn, gi¸ trÞ nµy nªn khai ® 4"],[3560,"Cisco cßn khuyÕn c¸o nªn thªm c©u lÖnh sau trong cÊu h×nh EIGRP: router(config-if)#eigrp log-neighbor-changes C©u lÖnh nµy sÏ lµm cho router xuÊt ra c¸c c©u th«ng b¸o mçi khi c ®Þnh tuyÕn vµ ph¸t hiÖn ®−îc"],[3561,"305 vµo m¹ng líp A 2.0.0.0"],[3562,"Trong hÇu hÕt c¸c tr−êng hîp, viÖc tù ®éng tæng hîp nµy cã −u ®iÓm lµ gióp cho b¶ng ®Þnh tuyÕn ng¾n gän"],[3563,"H×nh 3.2.2.a"],[3564,"EIGRP tù ®éng tæng hîp ®−êng ®i theo líp cña ®Þa chØ IP uy nhiªn, trong mét sè tr−êng hîp b¹n kh«ng nªn sö dông chÕ ®é tù ®éng tæng Ý dô trong m¹ng cã s¬ ®å ®Þa chØ kh«ng liªn tôc th× chÕ ®é nµy ph¶i t¾t ®i"],[3565,"§Ó t¾t chÕ ®é tù ®éng tæng hîp ®−êng ®i, b¹n dïng c©u lÖnh sau: outer(config-router)#no auto-summary T hîp ®−êng ®i nµy"],[3566,"V r H×n iªn tôc (hai subnet/24 bÞ ng¾t chÝnh h 3.2.2.b"],[3567,"M¹ng cã s¬ ®å ®Þa chØ kh«ng l gi÷a bëi mét subnet/30) víi chÕ ®é tæng hîp ®−êng ®i H×nh 3.2.2.c"],[3568,"M¹ng cã s¬ ®å ®Þa chØ kh«ng liªn tôc cã c©u lÖnh no auto-summary"],[3569,"Khi chÕ ®é tù ®éng tæng hîp ®−êng ®i bÞ t¾t, router sÏ qu¶ng c¸o tõng subnet"],[3570,"306 H×nh 3.2.2.d"],[3571,"ViÖc tæng hîp ®−êng ®i cña EIGRP cã thÓ ®−îc cÊu h×nh trªn tõng cæng cña router cña router víi giíi h¹n tæ ®éng tæng hîp theo líp cña ®Þa chØ IP"],[3572,"Sau khi khai b¸o ®Þa chØ tæng hîp cho mét cæng cña router, router sÏ h¸t qu¶ng c¸o ra cæng ®ã c¸c ®Þa chØ ®−îc tæng hîp nh− mét c©u lÖnh ®· cµi ®Æt"],[3573,"Þa chØ tæng hîp ®−îc khai b¸o b»ng lÖnh ip summary-address eigrp nh− sau: Router(config-if)#ip summary-address eigrp autonomous-system-number ip- address mask administrative-distance §−êng tæng hîp cña EIGRP cã chØ sè mÆc ®Þnh cña ®é tin cËy (administrative- distance) lµ 5"],[3574,"Tuy nhiªn, b¹n cã thÓ khai b¸o gi¸ trÞ cho chØ sè nµy trong kho¶ng tõ 1 ®Õn 255"],[3575,"XÐt vÝ dô nh− h×nh 3.2.2.d, RTC ®−îc cÊu h×nh nh− sau: RTC(config)#router eigrp 2446 RTC(config-route TC(config)#interface serial 0/0 RTC(config-if)#ip simmary-address Îigp 2446 2.1.0.0 255.255.0.0 Víi EIGRP, viÖc tæng hîp ®−êng ®i cã thÓ ®−îc cÊu h×nh b»ng tay trªn tõng cæng ng hîp mµ b¹n muèn chø kh«ng tù p § RTC(config-router)#no auto-summary r)#exit R"],[3576,"307 Khi ®ã, RTC sÏ thªm vµo b¶ng ®Þnh tuyÕn cña nã mét ®−êng tæng hîp nh− sau: D 2.1.0.0/16 is a summary, 00:00:22, Null0 L−u ý r»ng ®−êng tæng hîp cã nguån lµ Null0 chø kh«ng ph¶i lµ tõ mét cæng cô thÓ v× ®−êng nµy chØ cã môc ®Ých ®Ó qu¶ng c¸o chø kh«ng ph¶i lµ ®¹i diÖn cho mét ®−êng cô thÓ ®Õn m¹ng ®Ých"],[3577,"Trªn RTC, ®−êng tæng hîp nµy cã chØ sè ®é tin cËy (administrative distance) lµ 5"],[3578,"RTD kh«ng hÒ biÕt ®©y lµ ®−êng tæng hîp nªn nã ghi nhËn th«ng tin vÒ ®−êng nµy tõ RTC nh− mét ®−êng EIGRP b×nh th−êng víi chØ sè tin cËy mÆc ®Þnh cña EIGRP 90"],[3579,"rong cÊu h×nh cña RTC, chÕ ®é tù ®éng tæng hîp ®−êng ®i ®−îc t¾t ®i b»ng lÖnh o auto-summary"],[3580,"NÕu b¹n kh«ng t¾t chÕ ®é tù ®éng tæng hîp nµy th× RTD sÏ hËn ®−îc ®ång thêi 2 th«ng tin, mét lµ ®Þa chØ m¹ng tæng hîp theo lÖnh cµi ®Æt ë trª P 2 Trong ®a g tay th× ¹n nªn t¾t chÕ ®é tù ®éng tæng hîp b»ng lÖnh no auto-summary"],[3581,"3.2.3"],[3582,"KiÓm tra ho¹t ®éng cña EIGRP B¹n sö dông c¸c lÖnh show nh− trong b¶ng 3.2.3.a ®Ó kiÓm tra c¸c ho¹t ®éng cña EIGRP"],[3583,"Ngoµi ra, c¸c lÖnh debug lµ nh÷ng lÖnh gióp b¹n theo dâi ho¹t ®éng EIGRP khi cÇn thiÕt"],[3584,"LÖnh Gi¶i thÝch lµ T n n n 2.1.0.0/16 vµ mét lµ ®Þa chØ m¹ng tæng hîp tù ®éng theo líp cña ®Þa chØ I .0.0.0/8"],[3585,"sè c¸c tr−êng hîp, khi b¹n muèn cÊu h×nh tæng hîp ®Þa chØ b»n b Show ip eigrp neighbors [type ] [details] HiÓn thÞ b¶ng l¸ng giÒng cña EIGRP"],[3586,"Sö dông tham sè type phÐp hiÓn thÞ t h¬n"],[3587,"number number ®Ó x¸c ®Þnh cô thÓ cæng cÇn xem"],[3588,"Tõ kho¸ details cho th«ng tin chi tiÕ"],[3589,"308 Show ip eigrp interfaces [type number] [as- number] [details] HiÓn thÞ th«ng tin EIGRP cña c¸c cæng"],[3590,"Sö dông c¸c tham sè in nghiªng cho phÐp giíi h¹n phÇn th«ng tin hiÓn thÞ cho tõng cæng hoÆc trong tõng AS"],[3591,"Tõ kho¸ details cho phÐp hiÓn thÞ th«ng tin chi tiÕt h¬n"],[3592,"Show ip eigrp topology [as- number] [[ip- address] mask] HiÓn thÞ tÊt c¶ c¸c feasible successor trong b¶ng cÊu tróc m¹ng cña EIGRP"],[3593,"Sö dông c¸c tham sè in nghiªng ®Ó giíi h¹n th«ng tin hiÓn thÞ theo sè AS hay theo ®Þa chØ m¹ng cô thÓ"],[3594,"Show ip eigrp topology [active | pending | zero- successors] Tuú theo b¹n sö dông tõ kho¸ nµo, router sÏ hiÓn thÞ th«ng tin vÒ c¸c ®−êng ®i ®ang ho¹t ®éng, ®ang chê xö lý hay kh«ng cã successor"],[3595,"Show ip eigrp HiÓn thÞ th«ng tin vÒ m topology all-links äi ®−êng ®i chø kh«ng chØ cã feasible successor trong b¶ng cÊu tróc EIGRP"],[3596,"Show ip eigrp HiÓn thÞ sè gãi EIGRP ®· göi ® traffic [as-number] B¹n sö dông tham sè as-number ®Ó giíi h¹n th«ng tin hiÓn thÞ trong mét AS cô thÓ"],[3597,"i vµ nhËn ®−îc"],[3598,"B¶ng 3.2.3a"],[3599,"C¸c lÖnh show dïng cho EIGRP LÖnh Gi¶i thÝch Debug eigrp fsm HiÓn thÞ ho¹t ®éng cña c¸c EIGRP feasible successor gióp chóng ta x¸c ®Þnh khi nµo tiÕn tr×nh ®Þnh tuyÕn cµi ®Æt vµ xo¸ th«ng tin cËp nhËt vÒ ®−êng ®i"],[3600,""],[3601,"309 Debug eigrp packet HiÓn thÞ c¸c gãi EIGRP göi ®i vµ nhËn ®−îc"],[3602,"C¸c gãi nµy cã thÓ lµ gãi hello, cËp nhËt, b¸o nhËn, yªu cÇu hoÆc håi ®¸p"],[3603,"Sè thø tù cña gãi vµ chØ sè b¸o nhËn ®−îc sö dông ®Ó göi b¶o ®¶m c¸c gãi EIGRP còng ®−îc hiÓn thÞ"],[3604,"B¶ng 3.2.3.b"],[3605,"C¸c lÖnh EIGRP debug èi quan Ö víi c¸c l¸ng giÒng cña nã"],[3606,"RIP vµ IGRP chØ ®¬n gi¶n lµ ph¸t qu¶ng b¸ hoÆc multicast th«ng tin cËp nhËt ra c¸c cæng ®· ®−îc cÊu h×nh"],[3607,"Ng−îc l¹i, EIGRP router chñ ®éng thiÕt lËp mèi quan hÖ víi c¸c l¸ng giÒng cña nã gièng nh− router OSPF ®· lµm"],[3608,"B¶ng l¸ng giÒng lµ b¶ng quan träng nhÊt trong EIGRP"],[3609,"Mçi EIGRP l−u mét b¶ng l¸ng giÒng, trong ®ã lµ danh s¸ch c¸c router l¸ng giÒng th©n mËt"],[3610,"B¶ng nµy t−¬ng tù nh− c¬ së d÷ liÖu vÒ l¸ng giÒng cña OSPF"],[3611,"EIGRP cã riªng tõng b¶ng l¸ng giÒng cho mçi giao thøc mµ EIGRP hç trî"],[3612,"EIGRP router sö dông c¸c gãi hello rÊt nhá ®Ó thiÕt lËp mèi quan hÖ th©n mËt víi c¸c router l¸ng giÒng"],[3613,"MÆc ®Þnh, hello ®−îc göi ®i theo chu kú 5 gi©y/lÇn"],[3614,"NÕu router vÉn nhËn ®−îc ®Òu ®Æn c¸c gãi hello tõ mét router l¸ng giÒng th× nã vÉn sÏ hiÓu r»ng router l¸ng giÒng ®ã cïng víi c¸c ®−êng ®i cña nã vÉn cßn ho¹t ®éng"],[3615,"B»ng c¸ch thiÕt lËp mèi quan hÖ th©n mËt nh− vËy, EIGRP router thùc hiÖn ®−îc nh÷ng viÖc sau: \u2022 Tù ®éng häc ®−îc ®−êng míi khi ®−êng nµy kÕt nèi vµo m¹ng"],[3616,"\u2022 X¸c ®Þnh router l¸ng giÒng bÞ ®øt kÕt nèi hay kh«ng cßn ho¹t ®éng n÷a"],[3617,"\u2022 T¸i ph¸t hiÖn c¸c router vèn tr−íc ®ã bÞ xem lµ ®øt kÕt nèi"],[3618,"3.2.4"],[3619,"X©y dùng b¶ng l¸ng giÒng"],[3620,"Router ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch d¹ng ®¬n gi¶n kh«ng thiÕt lËp m h"],[3621,"310 H×nh 3.2.4.a"],[3622,"B¶ng l¸ng giÒng cña EIGRP Sau ®©y lµ c¸c th«ng tin trong b¶ng l¸ng giÒng: \u2022 §Þa chØ cña router l¸ng giÒng"],[3623,"\u2022 Hold time: Lµ kho¶ng thêi gian l−u gi÷"],[3624,"NÕu kh«ng nhËn ®−îc bÊt kú c¸i g× −u gi÷ th× khi kho¶ng thêi nèi ®Õn l¸ng giÒng ®ã kh«ng cßn l¹i (RTO)"],[3625,"\u2022 −îc chuyÓn ®i"],[3626,"NÕu phÇn nµy lu«n cã gi¸ trÞ kh«ng ®æi lín h¬n 0 th× cã IGRP nµo trong hµng ®îi"],[3627,"tõ router l¸ng giÒng trong suèt kho¶ng thêi gian l gian nµy hÕt thêi h¹n, router míi xem kÕt ho¹t ®éng"],[3628,"Ban ®Çu, kho¶ng thêi gian nµy chØ ¸p dông cho c¸c gãi hello, nh−ng ë c¸c phiªn b¶n Cisco IOS hiÖn nay, bÊt kú gãi EIGRP nµo nhËn ®−îc sau gãi hello ®Çu tiªn ®Òu khëi ®éng l¹i ®ång hå ®o kho¶ng thêi gian nµy"],[3629,"\u2022 Smooth Round � Trip Timer (SRTT): Lµ kho¶ng thêi gian trung b×nh mµ router göi ®i mét gãi vµ nhËn vÒ mét gãi tõ mét router l¸ng giÒng"],[3630,"Kho¶ng thêi gian nµy ®−îc dïng ®Ó x¸c ®Þnh thêi gian truyÒn Queue count (QCnt): Lµ sè l−îng gãi d÷ liÖu ®ang xÕp trong hµng ®îi ®Ó chê ® thÓ lµ router ®ang bÞ nghÏn m¹ch"],[3631,"NÕu phÇn nµy cã gi¸ trÞ 0 cã nghÜa lµ kh«ng cã gãi E"],[3632,"311 \u2022 Sequence number (Seq No): Lµ sè thø tù cña gãi nhËn ®−îc míi nhÊt tõ router l¸ng giÒng"],[3633,"EIGRP sö dông chØ sè nµy ®Ó x¸c ®Þnh gãi cÇn truyÒn l¹i víi router l¸ng giÒng"],[3634,"B¶ng l¸ng giÒng nµy ®−îc sö dông ®Ó hç trî cho viÖc göi ®¶m b¶o tin cËy vµ tuÇn tù cho c¸c gãi d÷ liÖu EIGRP, t−¬ng tù nh− TCP thùc hiÖn göi b¶o ®¶m cho c¸c gãi IP vËy"],[3635,"H×nh 3.2.4.b"],[3636,"Qu¸ tr×nh trao ®æi th«ng tin ®Þnh tuyÕn gi÷a hai router l¸ng giÒng víi nhau 3.2.5"],[3637,"Ph¸t hiÖn ®−êng ®i C¸c router ch¹y EIGRP gi÷ c¸c th«ng tin vÒ ®−êng ®i trªn RAM, do ®ã cã thÓ ®¸p øng nhanh chãng"],[3638,"Gièng nh− OSPF, EIGRP l−u c¸c th«ng tin nµy thµnh tõng b¶ng hay tõng c¬ së d÷ liÖu"],[3639,"DUAL lµ thuËt to¸n vect¬ kho¶ng c¸ch cña EIGRP, nã sö dông th«ng tin trong b¶ng l¸ng giÒng vµ b¶ng cÊu tróc m¹ng ®Ó tÝnh to¸n ®−êng cã chi phÝ thÊp nhÊt ®Õn m¹ng ®Ých"],[3640,"§−êng chÝnh ®−îc chän ra ®−îc gäi lµ ®−êng successor"],[3641,"Sau khi tÝnh"],[3642,"312 to¸n, DUAL ®Æt ®−êng successor lªn b¶ng ®Þnh tuyÕn vµ ®ång thêi còng l−u ®−êng g feasible successor"],[3643,"DUAL chØ l−u ®−êng −îc feasible successor th× on ®− n, ®−êng successor ®−îc ®−a lªn b¶ng ®Þnh nµy trong b¶ng cÊu tróc m¹ng"],[3644,"DUAL cßn cè g¾ng tÝnh ®−êng dù phßng cho tr−êng hîp ®−êng successor bÞ ®øt"],[3645,"§−êng dù phßng nµy ®−îc gäi lµ ®−ên feasible successor trong b¶ng cÊu tróc m¹ng"],[3646,"§−êng nµy sÏ ®−îc sö dông thay thÕ khi ®−êng successor ®Õn m¹ng ®Ých bÞ ®øt hoÆc kh«ng b¶o ®¶m tin cËy"],[3647,"3.2.6"],[3648,"Chän ®−êng NÕu cã mét ®−êng ®i ®Õn mét m¹ng ®Ých bÞ ®øt, DUAL sÏ t×m feasible succesor trong b¶ng cÊu tróc m¹ng ®Ó thay thÕ"],[3649,"NÕu kh«ng t×m ® c êng ®Õn m¹ng ®Ých ®ã ®−îc ®¸nh dÊu tr¹ng th¸i Active"],[3650,"Sau ®ã, router göi gãi yªu cÇu ®Õn tÊt c¶ c¸c router l¸ng giÒng ®Ó yªu cÇu cung cÊp th«ng tin vÒ m¹ng ®Ých ®ang cÇn xö lý"],[3651,"DUAL sö dông c¸c th«ng tin míi nhËn ®−îc ®Ó tÝnh to¸n l¹i successor vµ feasible successor míi"],[3652,"Sau khi DUAL hoµn tÊt viÖc tÝnh to¸ tuyÕn"],[3653,"§−êng successor vµ feasible successor ®−îc l−u trong b¶ng cÊu tróc m¹ng"],[3654,"Con ®−êng ®Õn m¹ng ®Ých trªn ®−îc chuyÓn tõ tr¹ng th¸i Active sang tr¹ng th¸i Pasive"],[3655,"Tr¹ng th¸i nµy cã nghÜa lµ con ®−êng ®Õn m¹ng ®Ých ®ã ®· ho¹t ®éng vµ b¶o ®¶m tin cËy"],[3656,"H×nh 3.2.6a"],[3657,"§−êng successor lµ ®−êng cã chi phÝ thÊp nhÊt ®Õn mét m¹ng ®Ých"],[3658,"Successor lµ router kÕ tiÕp trªn ®−êng ®i nµy"],[3659,"313 H×nh 3.2.6.b"],[3660,"RTA cã thÓ cµi ®Æt nhiÒu ®−êng successor nÕu chóng cã cïng chi phÝ H×nh 3.2.6.c"],[3661,"B»ng c¸ch x¸c ®Þnh ®−êng feasible succesor, EIGRP router cã thÓ t×m ®−îc ®−êng thay thÕ ngay khi ®−êng successor bÞ ®øt"],[3662,"Õn UAL còng ®¶m b¶o mçi ®−êng ®i nµy kh«ng bÞ lÆp vßng"],[3663,"3.2.7"],[3664,"B¶o tr× b¶ng ®Þnh tuy DUAL ghi nhËn tÊt c¶ c¸c ®−êng do l¸ng giÒng qu¶ng c¸o vµ sö dông th«ng sè ®Þnh tuyÕn tæng hîp ®Ó so s¸nh gi÷a chóng"],[3665,"§ång thêi D"],[3666,"314 § ®Õn mét ®Ých cã chi phÝ thÊp nhÊt sÏ ®−îc DUAL ®−a lªn b¶ng ®Þnh tuyÕn"],[3667,"§−êng nµy gäi lµ ®−êng successor"],[3668,"§−êng successor còng ®−îc l−u trong b¶ng cÊu tróc m¹ng"],[3669,"EIGRP l−u c¸c th«ng tin quan träng vÒ ®−êng ®i trong b¶ng l¸ng giÒng vµ b¶ng cÊu tróc m¹ng"],[3670,"Hai b¶ng nµy cung cÊp th«ng tin ®Çy ®ñ cho DUAL"],[3671,"Dùa vµo ®ã DUAL cã thÓ chän ®−êng thay thÕ nhanh chãng khi cÇn thiÕt"],[3672,"Khi mét ®−êng liªn kÕt bÞ ®øt, DUAL t×m feasible successor trong b¶ng cÊu tróc m¹ng"],[3673,"NÕu kh«ng t×m thÊy feasible successor th× ®−êng ®i ®Õn m¹ng ®Ých nµy ®−îc ®¸nh dÊu tr¹ng th¸i Active"],[3674,"Sau ®ã router göi gãi yªu cÇu ®Õn tÊt c¶ c¸c router l¸ng giÒng cña nã ®Ó yªu cÇu cung cÊp th«ng tin m¹ng"],[3675,"Víi th«ng tin míi nhËn ®−îc, DUAL sÏ tÝnh to¸n l¹i ®−êng successor vµ feasible successor míi"],[3676,"−êng ong b¶ng cÊu tróc m¹ng"],[3677,"Tr¹ng router vÉn nhËn ®−îc ®Òu ®Æn c¸c gãi hello theo ®Þnh kú th× cã nghÜa lµ Th«ng tin nµy ®−îc l−u trong b¶ng l¸ng giÒng"],[3678,"Khi router l¸ng giÒng «ng nhËn ®−îc gãi hello trong suèt kho¶ng uter l¸ng giÒng xem nh− kh«ng kÕt nèi ®−îc n÷a hoÆc kh«ng cßn ho¹t ®éng n÷a"],[3679,"DUAL sÏ th«ng b¸o sù ao thøc ®Þnh tuyÕn Sau khi DUAL ®· tÝnh to¸n xong, ®−êng successor ®−îc ®−a vµo b¶ng ®Þnh tuyÕn"],[3680,"§−êng successor vµ feasible successor ®−îc ®Æt tr th¸i cña con ®−êng ®Õn m¹ng ®Ých nµy ®−îc chuyÓn tõ Active sang Passive"],[3681,"Tr¹ng th¸i nµy cã nghÜa lµ con ®−êng ®· ho¹t ®éng tin cËy"],[3682,"EIGRP router sö dông c¸c gãi hello rÊt nhá ®Ó thiÕt lËp mèi quan hÖ th©n mËt víi c¸c router l¸ng giÒng"],[3683,"MÆc ®Þnh, gãi hello ®−îc göi theo chu kú 5 gi©y/lÇn"],[3684,"NÕu EIGRP l¸ng giÒng ®ã cïng víi c¸c con ®−êng cña nã vÉn cßn ho¹t ®éng b×nh th−êng"],[3685,"Khi ph¸t hiÖn mét l¸ng giÒng míi, router sÏ ghi nhËn l¹i ®Þa chØ vµ cæng kÕt nèi cña l¸ng giÒng ®ã"],[3686,"göi gãi hello, trong ®ã cã th«ng sè vÒ kho¶ng thêi gian l−u gi÷"],[3687,"§©y lµ kho¶ng thêi gian mµ router vÉn chê vµ xem lµ router l¸ng giÒng vÉn cßn ho¹t ®éng vµ kÕt nèi l¹i ®−îc"],[3688,"Hay nãi c¸ch kh¸c, nÕu router kh thêi gian l−u gi÷ th× khi kho¶ng thêi gian nµy kÕt thóc, ro thay ®æ nµy vµ thùc hiÖn tÝnh to¸n l¹i víi cÊu tróc m¹ng míi"],[3689,"3.3"],[3690,"Xö lý sù cè gi 3.3.1"],[3691,"Qu¸ tr×nh xö lý sù cè giao thøc ®Þnh tuyÕn"],[3692,"315 TÊt c¶ c¸c qu¸ tr×nh xö lý sù cè giao thøc ®Þnh tuyÕn ®Òu nªn tu©n theo mét s¬ ®å logic tuÇn tù"],[3693,"S¬ ®å nµy kh«ng ph¶i lµ mét tiÕn tr×nh b¾t buéc cøng nh¾c khi xö lý \u2022 gióp cho b¹n x¸c ®Þnh nguyªn nh©n cã thÓ ng bÞ ¶nh h−ëng bëi sù cè, hái ng−êi qu¶n 3"],[3694,"\u2022 l¹i"],[3695,"\u2022 sù cè m¹ng"],[3696,"Tuy nhiªn, nã lµ mét s¬ ®å c¬ b¶n ®Ó tõ ®ã ng−êi qu¶n trÞ m¹ng cã thÓ x©y dùng mét s¬ ®å xö lý sù cè phï hîp cho m«i tr−êng m¹ng cña m×nh"],[3697,"1"],[3698,"Khi kh¶o s¸t sù cè m¹ng, cè g»ng lµm râ nh÷ng m« t¶ vÒ sù cè"],[3699,"X¸c ®Þnh sù cè dùa trªn mét lo¹t c¸c hiÖn t−îng vµ c¸c nguyªn nh©n cã thÓ g©y ra"],[3700,"\u2022 §Ó ph©n tÝch ®óng sù cè, b¹n x¸c ®Þnh c¸c dÊu hiÖn chung vµ sau ®ã x¸c ®Þnh xem nguyªn nh©n nµo cã thÓ g©y ra c¸c hiÖn t−îng nh− vËy"],[3701,"VÝ dô: host kh«ng tr¶ lêi dÞch vô khi ®−îc yªu cÇu tõ client, ®ã lµ mét hiÖn t−îng"],[3702,"\u2022 Nh÷ng nguyªn nh©n cã thÓ lµ cÊu h×nh host bÞ thiÕu, giao tiÕp card bÞ háng hoÆc thiÕu lÖnh cÊu h×nh trªn router"],[3703,"2"],[3704,"X¸c ®Þnh nguyªn nh©n g©y ra sù cè \u2022 Thu nhËp c¸c sù kiÖn cÇn thiÕt ®Ó g©y ra sù cè"],[3705,"Hái nh÷ng ng−êi dï lý, ng−êi qu¶n trÞ m¹ng vµ mét sè ng−êi quan träng kh¸c"],[3706,"\u2022 Thu nhËp th«ng tin tõ nhiÒu nguån, vÝ dô nh− hÖ thèng qu¶n lý m¹ng giao thøc ph©n tÝch m¹ng, kÕt qu¶ hiÓn thÞ cña mét sè lÖnh kh¶o s¸t router hoÆc tõ c¸c ghi chó cña phiªn b¶n phÇn mÒm ®ang sö dông"],[3707,"Dùa trªn nh÷ng th«ng tin ®· thu thËp ®−îc, chóng ta tËp trung chó ý vµo c¸c nguyªn nh©n cã thÓ"],[3708,"\u2022 Víi c¸c th«ng tin thu thËp ®−îc b¹n cã thÓ lo¹i trõ mét sè nguyªn nh©n"],[3709,"VÝ dô: dùa trªn c¸c th«ng tin nµy, b¹n cã thÓ lo¹i trõ sù cè phÇn cøng ®Ó tËp trung vµo sù cè phÇn mÒm"],[3710,"Trong mäi tr−êng hîp, cè g¾ng thu nhá sè l−îng nguyªn nh©n cã kh¶ n¨ng g©y ra sù cè ®Ó chóng ta cã thÓ lªn mét ph−¬ng ¸n xö lý hiÖu qu¶"],[3711,"4"],[3712,"Lªn ph−¬ng ¸n hµnh ®éng theo c¸c nguyªn nh©n cã kh¶ n¨ng cßn B¾t ®Çu víi nguyªn nh©n cã kh¶ n¨ng nhiÒu nhÊt, b¹n ®Æt ra mét ph−¬ng ¸n trong ®ã chØ thay ®æi mét th«ng sè m¹ng"],[3713,""],[3714,"316 \u2022 ChØ thay ®æi mét th«ng sè t¹i mét thêi ®iÓm"],[3715,"§iÒu nµy gióp cho b¹n x¸c ®Þnh ®−îc gi¶i ph¸p cho tõng sù cè cô thÓ"],[3716,"Kh«ng nªn cè thay ®æi nhiÒu h¬n mét th«ng sè t¹i mét thêi ®iÓm"],[3717,"Lµm nh− vËy cã thÓ sÏ gi¶i quyÕt ®−îc sù cè i kh«ng thÓ biÕt ®−îc c¸i nµo b¹n thay ®æi ®· gi¶i quyÕt ®−îc hiÖn t−îng nµo vµ nh− vËy b¹n sÏ kh«ng rót ®−îc kinh nghiÖm cho nh÷ng lÇn x¶y ra sù cè t−¬ng tù vÒ sau"],[3718,"5"],[3719,"Thùc hiÖn ph−¬ng ¸n ®· ®−a ra, thùc hiÖn tõng b−íc mét c¸ch cÈn thËn ®ång thêi kiÓm tra xem c¸c hiÖn t−îng cña sù cè ®· hÕt ch−a"],[3720,"6"],[3721,"Kh¶o s¸t kÕt qu¶ ®Ó x¸c nhËn lµ sù cè ®· ®−îc gi¶i quyÕt hay ch−a"],[3722,"NÕu sù cè ®· ®−îc gi¶i quyÕt xong th× qu¸ tr×nh cña chóng ta chÊm døt"],[3723,"7"],[3724,"NÕu sù cè vÉn cßn, b¹n lªn ph−¬ng ¸n cho nguyªn nh©n cã kh¶ n¨ng cao thø hai"],[3725,"Quay l¹i b−íc 4, thay ®æi mét th«ng sè kh¸c vµ lÆp l¹i qu¸ tr×nh cho ®Õn khi gi¶i quyÕt ®−îc sù cè"],[3726,"8"],[3727,"Mét khi nguyªn nh©n thËt sù cña sù cè ®· ®−îc x¸c ®Þnh, cè g¾ng xö lý nã"],[3728,"\u2022 §iÒu quan träng ë b−íc nµy lµ ghi l¹i sù cè vµ gi¶i ph¸p t−¬ng øng ®Ó cã thÓ sö dông sau nµy"],[3729,"\u2022 NÕu ®Õn b−íc nµy mµ mäi cè g¾ng vÉn kh«ng thµnh c«ng th× b¹n nªn yªu cÇu hç trî kü thuËt tõ nhµ s¶n xuÊt thiÕt bÞ"],[3730,"\u2022 Mét sè nguån hç trî kh¸c cã thÓ gióp cho b¹n lµ c¸c chuyªn gia hoÆc c¸c kü \u2022 Cisco router cã mét sè tËp lÖnh hç trî cho b¹n theo dâi vµ x¸c ®Þnh sù cè n khoanh vïng khu vùc x¶y ra sù cè"],[3731,"\u2022 nh−ng b¹n l¹ s− vÒ kü thuËt"],[3732,"m¹ng: \u2022 TËp lÖnh show cho phÐp b¹n theo dâi c¸c ho¹t ®éng b×nh th−êng cña m¹ng, gióp b¹ TËp lÖnh debug hç trî cho b¹n x¸c ®Þnh sù cè cña giao thøc vµ cña cÊu h×nh router"],[3733,"\u2022 C¸c c«ng cô TCP/IP nh− ping, traceroute vµ telnet"],[3734,""],[3735,"317 TËp lÖnh show lµ c«ng cô quan träng nhÊt gióp b¹n hiÓu ®−îc tr¹ng th¸i ho¹t ®éng cña router, x¸c ®Þnh c¸c router l¸ng giÒng, theo dâi ho¹t ®éng tæng qu¸t vµ khoanh vïng sù cè m¹ng"],[3736,"TËp lÖnh debug cung cÊp c¸c th«ng tin sèng vÒ giao th«ng trªn mét cæng, c¸c th«ng giao thøc nµo ®ã vµ nhiÒu th«ng tin kh¸c cã Ých"],[3737,"Chóng ta chØ dïng lÖnh debug ®Ó x¸c ®Þnh sù cè chø kh«ng mét sù cè nµo ®ã"],[3738,"B¹n nªn thu hÑp c¸c nguyªn nh©n g©y ra sù cè tr debugging ®Ó xem nh÷ng debug nµo ®ang ®−îc bËt lªn trong router"],[3739,"OS cho c¸c c«ng viÖc sau: \u2022 \u2022 \u2022 X¸c ®Þnh sù cè trªn cæng giao tiÕp, trªn m¸y tinh hay trªn mét øng dông \u2022 ®iÖp b¸o lçi bªn trong, ph©n tÝch c¸c gãi d÷ liÖu cña mét dïng nã ®Ó xem c¸c ho¹t ®éngb×nh th−êng cña m¹ng"],[3740,"ChØ sö dông debug ®Ó t×m mét giao th«ng ®Æc biÖt nµo ®ã hay −íc khi sö dông lÖnh debug"],[3741,"B¹n dïng lÖnh show Sö dông tËp lÖnh show cña Cisco I Xem c¸c ®¸p øng cña router trong qu¸ tr×nh cµi ®Æt"],[3742,"Xem ho¹t ®éng b×nh th−êng cña m¹ng"],[3743,"nµo"],[3744,"X¸c ®Þnh khi nµo m¹ng nghÏn m¹ch"],[3745,"\u2022 X¸c ®Þnh tr¹ng th¸i cña server, client hoÆc c¸c l¸ng giÒng"],[3746,"C¸c c«ng cô m¹ng TCP/IP: \u2022 cuèi - ®Õn - ®Çu cuèi"],[3747,"\u2022 LÖnh ping më réng cã thÓ ®iÒu khiÓn tèt h¬n lÖnh ping c¬ b¶n"],[3748,"\u2022 Ping kiÓm tra nhanh tÝnh kÕt nèi tõ ®Çu cuèi - ®Õn \u2013 ®Çu cuèi"],[3749,"\u2022 Traceroute cã thÓ ®−îc sö dông ®Ó x¸c ®Þnh kÕt nèi nµo bÞ nghÏn m¹ch hay bÞ ®øt"],[3750,"Telnet ®−îc sö dông ®Ó kiÓm tra mét kÕt nèi ho¹t ®éng hoµn chØnh tõ ®Çu 3.3.2"],[3751,"Xö lý sù cè cÊu h×nh RIP"],[3752,"318 Sù cè th−êng gÆp nhÊt cña RIP lµm cho RIP kh«ng thùc hiÖn qu¶ng c¸o vÒ mét ®−êng nµo ®ã lµ do VLSM (Variable \u2013 length subnet mask)"],[3753,"RIP phiªn b¶n 1 kh«ng hç trî VLSM"],[3754,"Do ®ã khi RIP kh«ng qu¶ng c¸o vÒ mét ®−êng nµo ®ã, b¹n nªn ki \u2022 ng"],[3755,"VLSM kh«ng thÓ sö dông ®−îc víi RIPv1"],[3756,"LÖ protocols cung cÊp c¸c th«ng tin vÒ ®Æc ®iÓm vµ tr¹ng th¸i hiÖn t¹i cña c¸ therrnet 0/1 nh−ng b¹n kh«ng khai b¸o ®Þa chØ m¹ng cña cæng nµy cho RIP b»ng lÖnh network th× RI thÓ dïng lÖnh debug ip rip ®Ó xem c¸c th«ng tin tøc thêi vÒ ho¹t ®éng cña RIP"],[3757,"Sau ®ã b¹n dïng lÖnh no debug ip rip, no debug all hoÆc undebug all ®Ó t¾t debug"],[3758,"Óm tra nh÷ng ®iÒu sau: Cã sù cè vÒ kÕt nèi ë Líp 1 hoÆc Líp 2 hay kh«ng"],[3759,"\u2022 Cã cÊu h×nh ®Þa chØ IP theo s¬ ®å VLSM hay kh« \u2022 CÊu h×nh RIPv1 vµ RIPv2 cã phï hîp víi nhau hay kh«ng"],[3760,"\u2022 C©u lÖnh network cã bÞ thiÕu hay bÞ sai kh«ng"],[3761,"\u2022 Cæng giao tiÕp trªn router cã ho¹t ®éng tèt kh«ng"],[3762,"nh show ip c giao thøc ®Þnh tuyÕn ®ang ho¹t ®éng trªn router"],[3763,"RIP göi th«ng tin ®Þnh tuyÕn ra c¸c cæng giao tiÕp cã ®Þa chØ IP n»m trong ®Þa chØ m¹ng ®−îc khai b¸o trong c©u lÖnh network"],[3764,"VÝ dô: nÕu b¹n ®· cÊu h×nh xong cæng FastE P sÏ kh«ng göi th«ng tin ®Þnh tuyÕn ra cæng ®ã vµ ®ång thêi còng kh«ng nhËn th«ng b¸o nµy tõ cæng nµy"],[3765,"B¹n cã"],[3766,"319 H×nh 3.3.2.a"],[3767,"VÝ dô kÕt qu¶ hiÓn thÞ cña lÖnh show ip protocols H×nh 3.3.2.b"],[3768,"VÝ dô hiÓn thÞ cña lÖnh debug ip rip th«ng tin vÒ hai m¹ng ®Ých lµ 172.30.0.0 vµ 172.16.0.0"],[3769,"Router R1 còng göi th«ng tin cËp nhËt cña nã ra cæng FastEthernet 0/0"],[3770,"C VÝ dô trong h×nh 3.3.2.b, router R1 ®ang nhËn th«ng tin cËp nhËt tõ mét router kh¸c cã ®Þa chØ lµ 192.168.3.1"],[3771,"Router nµy göi ¶ hai router ®Òu sö dông ®Þa chØ qu¶ng b¸ 255.255.255.255 lµm ®Þa chØ ®Ých"],[3772,"320 cho c¸c gãi th«ng tin ®Þnh tuyÕn cña m×nh"],[3773,"ChØ sè trong ngoÆc () lµ ®Þa chØ nguån ®−îc ®ãng gãi trong phÇn IP header"],[3774,"B¹n cã thÓ sÏ gÆp c©u th«ng b¸o nh− sau khi router nhËn ®−îc mét gãi kh«ng ®óng d¹ng chuÈn: RIP: bad version 128 from 160.89.80.43 3.3.3"],[3775,"Xö lý sù cè cÊu h×nh IGRP IGRP lµ mét giao thøc ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch ®−îc ph¸t triÓn bëi Cisco tõ gi÷ §Æc ®iÓm Gi¶i thÝch a thËp niªn 80"],[3776,"IGRP cã nhiÒu ®Æc ®iÓm kh¸c víi c¸c giao thøc ®Þnh tuyÕn theo vect¬ kho¶ng c¸ch nh− RIP ch¼ng h¹n"],[3777,"C¸c ®Æc ®iÓm nµy ®−îc liÖt kª trong b¶ng 3.3.3"],[3778,"Kh¶ n¨ng më réng t¨ng IGRP cã kh¶ n¨ng ®Þnh tuyÕn cho m¹ng cã kÝch th−íc lín h¬n nhiÒu s¬ víi m¹ng sö dông RIP"],[3779,"Th«ng sè ®Þnh tuyÕn phøc t¹p IGRP sö dông th«ng sè ®Þnh tuyÕn tæng hîp ®Ó chän ®−êng linh ho¹t h¬n"],[3780,"C¸c yÕu tè t¸c ®éng vµo viÖc chän ®−êng lµ b¨ng th«ng, ®é trÔ, ®é t¶i vµ ®é tin cËy"],[3781,"MÆc trÔ"],[3782,"IGRP kh¾c p ®Þnh, th«ng sè ®Þnh tuyÕn chØ bao gåm b¨ng th«ng vµ ®é hôc ®−îc giíi h¹n 15 hop cña RIP"],[3783,"IGRP cã gi¸ trÞ hop tèi ®a mÆc ®Þnh lµ 100 nh−ng b¹n cã thÓ cÊu h×nh cho gi¸ trÞ nµy lªn tíi 255"],[3784,"Chia t¶i ra nhiÒu ®−êng IGRP cã thÓ duy tr× tíi 6 ®−êng kh¸c nhau gi÷a mét cÆp nguån vµ ®Ých"],[3785,"Nh÷ng ®−êng nµy gi÷a mét cÆp nguån vµ ®Ých"],[3786,"Nh÷ng ®−êng nµy kh«ng b¾t buéc ph¶i cã chi phÝ b»ng nhau nh− ®èi víi RIP"],[3787,"ViÖc sö dông nhiÒu ®−êng cho cïng mét ®Ých nh− vËy sÏ t¨ng ®−îc b¨ng th«ng ®−êng truyÒn hoÆc cã thÓ ®Ó dù phßng B¶ng 3.3.3"],[3788,"321 B¹n dïng lÖnh router igrp autonomous-system ®Ó khëi ®éng tiÕn tr×nh ®Þnh tuyÕn IGRP trªn router nh− sau: R1 (config)#router igrp 100 Sau ®ã, b¹n dïng lÖnh network network-number ®Ó khai b¸o c¸c ®Þa chØ cña c¸c cæng trªn router tham gia vµo qu¸ tr×nh cËp nhËt IGRP"],[3789,"R1 (config-router)#network 172.30.0.0 R1 (config-router)#network 192.168.3.0 B¹n dïng c¸c lÖnh sau ®Ó kiÓm tra cÊu h×nh vµ ho¹t ®éng cña IGRP: R1#show ip protocols R1#show ip route H×nh 3.3.3.a"],[3790,"322 H×nh 3.3.3.b 3.3.5.Xử lý sự cố cấu hình OSPF OSPF là 1 giao thức định tuyến theo trạng thái đường liên kết.Một liên kết tương ứng với một cổng giao tiếp trên một router.Trạng thái của một đường liên kết bao gồm thông tin về cổng giao tiếp và mối quan hệ với các router láng giềng kết nối vào cổng đó.Ví dụ : thông tin về một cổng giao tiếp bao gồm địa chỉ IP ,subnet mask và loại mạng kết nối vào cổng đó cũng như các router kết nối vào cổng này.Tập hợp các thông tin như vậy tạo thành cơ sở dữ liệu về trạng thái các đường liên kết"],[3791,"-Sự cố thường xảy ra với OSPF có liên quan tới quan hệ với các láng giềng thân mật và việc đồng bộ cơ sở dữ liệu về trạng thái các đường liên kết.Lệnh show ip ospf neighbors sẽ cung cấp nhiều thông tin hữu ích cho việc xử lý sự cố liên quan đến việc quan hệ với các router láng giềng thân mật"],[3792,"-Bạn sử dụng lệnh debug ip ospf events để hiển thị thông tin về các sự kiện liên quan đến OSPF như: +Mối quan hệ láng giềng thân mật"],[3793,"+Gửi thông tin định tuyến +Bầu router đại diện(DR)"],[3794,"323 +Tính toán chọn đường ngắn nhất(OSPF) -Nếu router đã được cấu hình định tuyến OSPF mà không thấy được các láng giềng OSPF trên những mạng kết nối trực tuyến của nó thì bạn nên thực hiện các việc sau: +Kiểm tra xem cả hai router láng giềng với nhau đã được cấu hình IP có cùng subnet mask ,cùng khoảng thời gian hello và khoảng thời gian bất động hay chưa"],[3795,"+Kiểm tra xem cả hai router láng giềng của nhau có nằm trong cùng một vùng hay không"],[3796,"Để hiển thị thông tin về mỗi gói OSPF nhận được ,bạn dùng lệnh debug ip ospf packet.Dùng dạng no của câu lệnh này để tắt debug"],[3797,"Lệnh debug ip ospf packet sẽ hiển thị các thông tin của từng gói OSPF mà router nhận được.Thông tin hiển thị thay đổi một chút tuỳ theo loại cơ chế xác minh đang được sử dụng"],[3798,"TỔNG KẾT Sau khi đọc xong chương này ,bạn phải trả lời được các câu hỏi sau: 1"],[3799,"EIGRP là một giao thức lai,kết hợp các ưu điểm của giao thức định tuyến theo vectơ khoảng cách và giao thức định tuyến theo trạng thái đường liên kết.Vậy EIGRP giống giao thức định tuyến theo vectơ khoảng cách ở những điểm nào"],[3800,"Và giống giao thức định tuyến theo trạng thái đường liên kết ở những điểm nào"],[3801,"2"],[3802,"Bảng cấu trúc mạng của EIGRP và cơ sở dữ liệu về cấu trúc mạng của OSPF khác nhau như thế nào"],[3803,"Sau đây là những điểm quan trọng trong chương này: +Điểm khác nhau giữa EIGRP và IGRP +Các khái niệm chính,kỹ thuật chính và cấu trúc dữ liệu của EIGRP +Hoạt động hội tụ của EIGRP và hoạt động cơ bản của DUAL +Cấu hình IEGRP cơ bản"],[3804,"324 +Cấu hình tổng hợp đường đi cho IEGRP +Quá trình EIGRP xây dựng và bảo trì bảng định tuyến +Kiểm tra hoạt động EIGRP +Tám bước cho quá trình xử lý sự cố nói chung +Áp dụng sơ đồ logic trên vào quá trình xử lý sự cố định tuyến +Xử lý sự cố tiến trình định tuyến RIP sử dụng lệnh show và debug"],[3805,"+Xử lý sự cố tiến trình định tuyến IGRP sử dụng lệnh show và debug +Xử lý sự cố tiến trình định tuyến EIGRP sử dụng lệnh show và debug +Xử lý sự cố tiến trình định tuyến OSPF sử dụng lệnh show và debug"],[3806,"325 CHƯƠNG 4: CÁC KHÁI NIỆM VỀ CHUYỂN MẠCH GIỚI THIỆU Việc thiết kế LAN đuợc phát triển và thay đổi nhiều theo thời gian.Cho đến gần đây các nhà thiết kế mạng vẫn còn sử dụng hub,bridge để xây dựng hệ thống mạng.Còn hiện nay ,switch và router là hai thiết bị quan trọng nhất trong LAN,khả năng và hoạt động của hai loại thiết bị này không ngừng được năng cao"],[3807,"Chương này sẽ quay lại một số nguồn gốc của các phiên bản Ethernet LA ểu rõ hơn tại sao các thiết bị mạng đã được phát triển như vậy"],[3808,"Cho đến gần đây hầu hết các mạng Ethernet vẫn còn được sử dụng Repeater"],[3809,"Kh g dựa trên Switch và router, thậm chí có thiết bị bao gồm cả hai chức năng định tuyến và chuyển mạch"],[3810,"Switch hiện đại có khả năng thực hiện nhiều nhiệm vụ phức tạp khác nhau trong mạng"],[3811,"Chương này sẽ giới thiệu về cách phân đoạn mạng và mô tả hoạt động cơ bản của Switch"],[3812,"Switch là thiết bị Lớp 2 đuợc sử dụng để tăng băng thông và giảm nghẽn mạch"],[3813,"Một Switch có thể phân mạng LAN thành các đoạn siêu nhỏ, là những đoạn mạng chỉ có Host"],[3814,"Nhờ vậy một miền lớn được chia thành nhiều miền nhỏ ko có đụng độ.Là một thiết bị ở lớp 2 nên LAN Switch có thể tạo đuợc nhiều miền đụng độ nhưng tất cả các Host kết nối vào Switch vẫn nằm trong cùng một miề ảng bá"],[3815,"N,thảo luận về sự phát triển của Ethernet/802.3 và cấu trúc phát triển nhất của LAN.Một cái nhìn về hoàn cảnh lịch sử của sự phát triển LAN và các thiết bị mạng khác nhau làm việc ở lớp 1, lớp 2, lớp 3 của mô hình OSI sẽ giúp chúng ta hi i hiệu quả hoạt động của các mạng này trở nên xấu đi vì có quá nhiều thiết bị cùng chia sẻ một môi trường truyền thì các kỹ sư mạng mới lắp thêm Bridge để chia mạng thành nhiều miền đụng độ mạng nhỏ hơn"],[3816,"Khi hệ thống mạng càng phát triển lớn hơn và phức tạp hơn, Bridge được phát triển thành Switch như bây giờ, cho phép phân đoạn cực nhỏ hệ thống mạng"],[3817,"Các mạng ngày nay được xây dựn n qu"],[3818,"326 Sau + Định nghĩa phân đoạn cực nhỏ (microsegment) + Định nghĩa CSMA/CD + Mô tả một số thành phần quan trọng ảnh hưởng đến hiệu quả hoạt động của + Mô tả chức năng của Repeater nh nghĩa độ trễ mạng + Định nghĩa thời gian truyền + M + Định nghĩa chuyển mạch đối xứng và bất đối xứng hàng đợi + So sánh và phân biệt giữa chuyển mạch store-and-forward và cut-through + Hiểu được sự khác nhau giữa Hub,Bridge,Switch + Mô tả chức năng chính của Switch + Xác định đoạn mạng LAN khi hoàn tất chương này các bạn có thể thực hiện các việc sau: + Mô tả lịch sử và chức năng của Ethernet chia sẻ,bán song công + Định nghĩa đụng độ trong mạng Ethernet mạng + Đị + Mô tả chức năng cơ bản của Fast Ethernet + Xác định đoạn mạng sử dụng Router,Switch và Bridge ô tả hoạt động cơ bản của Switch + Định nghĩa độ trễ của Ethernet Switch + Giải thích sự khác nhau giữa chuyển mạch lớp 2 và lớp 3 + Định nghĩa bộ nhớ + Liệt kê các chế độ chuyển gói chính của Switch"],[3819,"327 + Xác định đoạn mạng cực nhỏ sử dụng Switch + Mô tả tiến trình lọc tải + So sánh và phân biệt miền đụng độ và miền quảng bá + X 4.1.1"],[3820,"Sự phát triển của Ethernet/802.3 LAN - Kỹ thuật LAN đầu tiên sử dụng cấu trúc \u201cthick Ethernet\u201d và \u201cThin Ethernet\u201d"],[3821,"Nắ được các giới hạn của 2 loại cấu trúc này là rất quan trọng để thấy được vị trí của chuyển mạch LAN ngày nay"],[3822,"- Thêm HUB hay còn gọi là bộ tập trung vào mạng là một cải tiến dựa trên kỹ thuật \u201cthick\u201d và \u201cthin\u201d Ethernet"],[3823,"Hub là thiết bị lớp 1 và đôi khi đuợc coi là một bộ tập trung Ethernet hay Repeater đa port"],[3824,"Sử dụng Hub trong mạng cho phép kết nối được nhiều user hơn"],[3825,"Loại Hub chủ động còn cho phép mở rộng khoảng cách của mạng vì nó thực hiện tái tạo lại tín hiệu dữ liệu.Hub ko hề có quyết định gì đối với tín hiệu dữ liệu mà nó nhận đuợc"],[3826,"Nó chỉ đơn giản là khuếch đại và tái tạo lại tín hiệu mà nó nhận được và chuyển ra cho tất cả các thiết bị nối vào nó"],[3827,"- Ethernet cơ bản là kỹ thuật chia sẻ cùng 1 băng thông cho mọi người dùng trong 1 phân đoạn LAN"],[3828,"Điều này giống như một xe hơi cùng chạy vào một làn đường vậy"],[3829,"Con đường này chỉ có một làn đường nên tại một thời điểm chỉ có 1 xe hơi chạy trên đó mà thôi"],[3830,"Các user kết nối và cùng một Hub chia sẻ băng thông trên cùng một đường truyền"],[3831,"ác định loại cáp cần thiết để kết nối máy trạm vào Switch + Xác định loại cáp cần thiết để kết nối Switch vào Switch 4.1"],[3832,"Giới thiệu Ethernet/802.3 LAN m"],[3833,"328 Hình 4.1.1.a.Kết nối user dùng Hub.Các user trên cùng một Hub truy suất cùng một băng thông đường truyền cũng giống như nhiều xe hơi cùng rẽ vào một làn đường vậy.Con đường này chỉ có một làn đường nên tại một thời điểm chỉ - Đụng độ là một hậu quả tất yếu của mạng Ethernet"],[3834,"Nếu có hai hay nhiều thiết bị cùng truyền cùng một lúc thì đụng độ sẽ xảy ra"],[3835,"Điều này cũng giống như 2 xe cùng tranh giành một làn đường và xảy ra đụng độ"],[3836,"Khi đụng độ xảy ra mọi giao thông trên đường truyền đó sẽ bị ngưng lại cho đến khi sự đụng độ đã được vãn hồi"],[3837,"Khi số lượng đụng độ quá lớn, thời gian đáp ứng của hệ thống mạng sẽ rất chậm"],[3838,"Tình trạng này cho thấy mạng bị nghẽn mạch hoặc có quá nhiều user truy cập cùng lúc vào mạng"],[3839,"- Thiết bị lớp 2 thông minh hơn thiết bị lớp 1"],[3840,"Thiết bị lớp 2 có quyết định chuyển gói dựa trên địa chỉ MAC (Media access Control) được ghi trong phần đầu của gói"],[3841,"- Bridge là 1 thiết bị lớp 2 được sử dụng để phân đoạn mạng"],[3842,"Bridge thu thập và chon lựa dữ liệu để chuyển mạch giữa hai đoạn mạng bằng cách h c địa chỉ MAC của tất cả các thiết bị nằm trong từng đoạn mạng kết nối vào nó"],[3843,"Dựa vào dựng thành bảng chuyển mạch và theo đó để chuyển hoặc chặn gói lại"],[3844,"Nhờ vậy Bridge tách 1 mạng thành nhiều miền đụng độ cũng điều khiển lưu lượng mạng tốt hơn Hub"],[3845,"được một xe rẽ mà thôi"],[3846,"ọ các địa chỉ MAC, Bridge xây nhỏ hơn,làm tăng hiệu quả hoạt động của mạng"],[3847,"Tuy nhiên Bridge ko chặn các lưu lượng quảng bá nhưng dù sao thì Bridge"],[3848,"329 - S ó"],[3849,"Switch học địa chỉ MAC của các thiết bị kết nối trên từng port của nó và xây dựng thà itch có khả năng phân đoạn mạng cực nhỏ, nghĩa là tạo ra môi trường ko đụng độ giữ ều làn đường và mỗi xe có riêng một làn đường cho mình"],[3850,"witch cũng là 1 thiết bị lớp 2 và được xem là Bridge đa port"],[3851,"Switch có thể quyết định chuyển 1 gói dựa trên địa chỉ MAC được ghi trong gói đ nh bảng chuyển mạch -Khi hai thiết bị kết nối vào Switch thực hiện trao đổi với nhau, Switch sẽ thiết lập một mạch ảo cung cấp một đường liên lạc riêng giữa hai thiết bị này"],[3852,"Sw a nguồn và đích,nhờ đó tối đa hoá lượng băng thông khả dụng"],[3853,"Switch có thể tạo nhiều mạch ảo đồng thời giữa các cặp thiết bị khác nhau"],[3854,"Hình ảnh này tương tự như đường cao tốc có thể chia thành nhi Hình 4.1.1.b Kết nối user bằng Switch.Có bao nhiêu thiết bị kết nối vào Switch thf Switch có thể tạo ra bấy nhiêu mạch ảo cho từng thiết bị"],[3855,"Điều này giống như hình minh hoạ về đường cao tốc ở bên trái"],[3856,"Đường cao tốc này có đủ 3 làn đường dành cho 3 nhánh đổ vào nó,mỗi nhánh một làn đường riêng"],[3857,"bị trong mạng kết nối vào nó.Khi số lượng quảng bá quá nhiều sẽ làm cho thời của mạng rất chậm"],[3858,"- R - Khuyết điểm của thiết bị lớp 2 là nó chuyển gói quảng bá cho tất cả các thiết gian đáp ứng outer là một thiết bị ở lớp 3.Router quyết định chuyển gói dựa trên địa chỉ mạng của gói dữ liệu.Router sử dụng bảng định tuyến để ghi lại địa chỉ lớp 3"],[3859,"330 của các mạng kết nối trực tiếp vào router và các mạng mà router học được từ các router láng riềng"],[3860,"- M ra cổng tương ứng - R uter là thiết bị phân luồng lưu lượng quan trọng nhất trong hệ thống mạng lớn"],[3861,"Chúng giúp cho bất kỳ máy tính nào cũng có thể thông tin liên lạc với bất kỳ máy tính nào khác ở bất cứ đâu trên thế giới"],[3862,"- LAN kết hợp hoạt động của cả hai thiết bị lớp 1 và lớp 2 và lớp 3"],[3863,"Việc triển khai các thiết bị này như thế nào phụ thuộc vào điều kiện và hoàn cảnh đặc biệt của từng đơn vị tổ chức"],[3864,"ục tiêu của router là thực hiện các việc sau: + Kiểm tra dữ liệu lớp 3 của gói nhận được + Chọn đường tốt nhất cho gói dữ liệu + Chuyển mạch gói outer ko bị bắt buộc phải chuyển các gói quảng bá"],[3865,"Do đó router có thể làm giảm kích thước miền đụng độ và miền quảng bá trong mạng"],[3866,"Ro Hinh 4.1.1.c 4.1.2"],[3867,"Các yếu tố ảnh hưởng đến hiệu quả hoạt động của mạng - Mạng LAN ngày nay ngày càng trở nên quá tải và tình trạng nghẽn mạch gia tăng"],[3868,"Thêm vào đó số lượng người dùng mạng tăng lên nhanh chóng cùng với"],[3869,"331 nhiều yếu tố khác kết hợp lại tạo thành nhiều thử tháchđối với mạng LAN truyền thống"],[3870,"+Môi trường đa nhiệm hiện nay của các hệ điều hành máy tính như Window, Unix/Linux và MAC cho phép thực hiện đồng thời nhiều phiên giao dịch mạng.Khả năng này càng tăng lên thì yêu cầu về tài nguyên mạng càng tăng"],[3871,"+Việc sử dụng các ứng dụng chuyên sâu như World Wide Web chẳng hạn gia tăng.Các ứng dụng dạng client/server này cho phép người quản trị mạng có thể tập trung thông tin,dữ liệu lại để dễ bảo trì và bảo vệ dữ liệu"],[3872,"+Các ứng dụng dạng client/server giải phóng cho các máy trạm gánh nặng của việc lưu trữ dữ liệu và chi phí trang bị đĩa cứng để lưu trữ"],[3873,"Chính vì những ưu điểm này mà việc sử dụng các ứng dụng dạng client/server sẽ càng được sử dụng rộng rãi trong tương lai"],[3874,"Hình vẽ 4.1.2 +Quá nhiều người trong 1 phân đoạn mạng 10Mbps dữ liệu"],[3875,"+Hầu hết mọi người dùng đều truy cập vào 1 hoặc 2 server +Các ứng dụng chuyên ngành như tạo màu, CAD/CAM,xử lý ảnh ,và cơ sở"],[3876,"332 4.1.3"],[3877,"Các thành phần của mạng Ethernet/802.3 - Các c để tru g thiết bị này có thể là máy tính máy in, file server\u2026Tất cả các máy trong cùng một môi trường Eth theo phương pháp quảng bá"],[3878,"Một số yếu tố sau có thể tác động đến hiệu quả hoạt động của mạng Ethernet/802.3 chia sẻ: +Việc truyền gói trong mạng Ethernet/802.3 là quảng bá +P a truy cập cảm nhận sóng mạng phát hiện đụng độ CSMA/CD (ca ỉ cho phép một máy trạm được truyền tại một thời điểm"],[3879,"+N thông có yêu cầu băng thông cao như video và int chất quảng bá của Ethernet sẽ làm cho mạng nghẽn mạch"],[3880,"+T ển trên môi trường mạng lớp 1 và đi qua +Sử dụng Repeater để mở rộng khoảng cách và đồng thời cũng làm tăng thời gia AN ấu trúc thông dụng nhất của LAN là Ethernet"],[3881,"Ethernet được dùng yền dữ liệu giữa 2 thiết bị trong cùng một mạng nội bộ.Nhữn ernet sẽ truyền và nhận dữ liệu hương pháp đ rrier sense multiple access/collision detect) ch hiều ứng dụng đa truyền ernet, cộng với tính hời gian trễ mặc nhiên khi gói di chuy các thiết bị mạng lớp 1 lớp 2 lớp 3"],[3882,"n trễ của mạng Ethernet/802.3 L Hình 4.1.3.a"],[3883,"333 -Et /CD và môi trường truyền chia sẻ có thể truyền dữ liệu với tốc độ lên đến 100 Mb/s.CSMA/CD là một phương pháp truy cập cho phé ữ liệu tại một thời điểm.Thành công của Ethernet là cung cấp một dịch vụ truyền tổng lực(best-effort) để truyền dữ liệu và cho phép mọi thiết bị trong cùng một môi trường chia sẻ có cơ hội truyền dữ liệu ngang nhau.Tuy nhiên đụng độ là một điều tất yếu trong mạng Ethernet,CSMA/CD hernet sử dụng CSMA p chỉ một máy trạm được truyền d Hình 4.1.3.b 4.1.4.Mạng bán song công -Ethernet khởi đầu là một kỹ thuật bán song công.Với chế độ truyền bán song công ,host chỉ có thể truyền hoặc nhận tại một thời điểm chứ không thể thực hiện cả hai đồng thời.Mỗi một Ethernet host phải kiểm tra xem có dữ liệu đang truyền trên mạng hay không trước khi thực hiện phát dữ liệu của mình.Nếu mạng đang có người sử dụng thì host phải hoãn lại thì cả hai hay nhiều Ethernet host sẽ có thể truyền dữ liệu cùng một lúc và kết quả là xảy ra đụng độ.Khi đụng độ xảy ra,host nào phát hiện ra đụng độ đầu tiên sẽ phát ra tín hiệu báo"],[3884,"334 nghẽn cho các host khác.Khi nhận được tín hiệu báo nghẽn ,mỗi host sẽ ngừng ại và chờ một thời gian ngẫu nhiên trước khi bắt đầu thực ền lại.Khoảng thời gian chờ ngẫu nhiên này do thuật toán back-off(vãn hồi đụng độ)tính toán.Càng có nhiều host kết nối vào mạng và bắt đầu truyền dữ liệu thì đụng độ càng nhiều hơn"],[3885,"-Et việc truyền dữ liệu l hiện truy hernet LAN ngày càng trở nên bão hoà vì ngwoif dùng sử dụng nhiều phần mềm chuyên sâu,các ứng dụng client/server\u2026 là những loại phần mềm yêu cầu host phải thực hiện truyền thường xuyên hơn với thời gian lâu hơn"],[3886,"Hình 4.1.4:Cấu trúc mạch của card mạng Ta o môi trường truyền chia sẻ.Do đó chân Rx của card bên trái cũng đồng thời nhận được tín hiệu của chính nó từ đường truyền lên.Khi đó nó sẽ so sánh giữ và một tín hiệu đi từ chân Tx theo mạch hồi tiếp vòng về Rx.Nếu hai tín hiệu giống nhau nghĩa là bìn với tín hiệu hồi tiếp từ Tx.Nhờ đó nó phát hiện được đụng độ xảy ra 4.1.5.Sự nghẽn mạch trong mạng -Kỹ thuật phát triển tạo ra các máy tính ngày càng nhanh hơn và thông minh xét card bên trái ,tín hiệu được phát ra chân Tx(transmit) xuống đường truyền, đồng thời theo mạch hồi tiếp(loopback) đi vào chân Rx(Receive).Tín hiệu xuống đường truyền và được truyền quảng bá đến mọi máy trạm cùng kết nối và a hai tín hiệu,một tín hiệu nhận được từ đường truyền h thường.Nếu có đụng độ xảy ra,tín hiệu nhận được từ đường truyền lên sẽ bị khác hơn.Khả năng của máy trạm và các ứng dụng mạng chuyên sâu ngày càng phát"],[3887,"335 triển thì yêu cầu về băng thông của mạng ngày càng tăng.Nhu cầu đã vượt mức 10Mb/s trên mạng chia sẻ Ethernet/802.3 -N in hình ảnh lớn +H +H +Ứ -Ngoài ra số lượng người dùng trong mạng cũng tăng lên nhanh chóng.Tất cả b/s.Khi có quá nhi ập tin,truy cập file server và kết nối Internet thì tình tr ng của mạng chậ ủa người sử dụ ơn hoặc là phải sử dụng lượng băng thông đang có một cách hiệu quả gày nay ,mạng thực hiện truyền rất nhiều các loại dữ liệu như: +Tập t ình ảnh ình động(video) ng dụng đa phương tiện các yếu tố trên đã đặt một sức ép rất lớn đối với băng thông 10M ều người cùng thực hiện chia sẻ t ạng nghẽn mạch sẽ xảy ra.Hậu quả là thời gian đáp ứ m,thời gian tải tập tin lâu hơn và làm giảm năng suất làm việc c ng"],[3888,"Để giải quyết tình trạng nghẽn mạch này,bạn cần phải có nhiều băng thông h hơn"],[3889,"Hình 4.1.5.a.Cán cân phải cân bằng giữa băng thông mạng và nhu cầu của người dùng cùng với các ứng dụng chạy trên mạng"],[3890,"336 Hình 4.1.5.b.Băng thông và các nhu cầu của các ứng dụng khác 4.1.6.Th -Thời gian trễ là khoảng thời gian gói dữ liệu di chuyển từ máy nguồn tới máy đín đường đi giữa nguồn và đính trong LAN và WAN là rất quan trọng.Trong mạng Ethernet LAN ,nắm được thời gian trễ và các trọng để quyết định thời gian CSMA/CD phát hiệ ận truyền lại"],[3891,"-Có ít nhất 3 nguồn gây ra trễ: ời gian trễ trên mạng h.Việc xác định thời gian trễ của tác đọng của nó là rất quan n đụng độ và thoả thu"],[3892,"337 -Đầ 556 us trên 100m cáp UTP CAT5.Cáp càng dài và vận tốc truyền ậm thì thời gian trễ này càng lớn"],[3893,"-Th dữ liệu ở lớp 3 chứ không phải dữ liệu ở lớp 2 như Switch 4.1.7.Thời gian truyền của Ethernet 10Base-T -Tất cả các mạng đều có một thời bit hay còn gọi là một khe thời gian.Nhiều kỹ ng.Hay nói cách khác,thời gian truyền là khoảng thời gian truyền hết một gói dữ liệu.Do đó gói dữ liệu càng dài thì kh ng thời gian này càng dài"],[3894,"-M i một bít trong mạng Ethernet 10Mb/s có thời gian truyền là 100ns"],[3895,"Đây chính là thời bit.Một byte bằng 8 bit .Do đó,một byte cần tối thiểu 800ns để truyền hết.Một frame có 64 byte là frame nhỏ nhất hợp lệ của 10Base-T càn 51.200 ns(51,2us) Như vậy ,nếu truyền một frame có 1000 byte thì máy nguồn cần 800us mới phát xong frame này.Tổng thời gian thực sự để frame đi được tới máy đích còn phụ thuộc vào nhiều nguồn gây trễ khác trên mạng như: +thơi gian trễ của NIC u tiên là thời gian mà NIC ở máy nguồn phát tín hiệu điện xuống đường dây và thời gian để NIC ở máy thu nhận biết được các xung điện.Khoảng thời gian này gọi là khoảng thời gian của NIC,khoảng us đối với 10BASE-T NIC"],[3896,"-Thứ hai là khoảng thời gian tín hiệu lan truyền trên đường dây.Thời gian này khoảng 0, càng ch ứ ba là thời gian trễ do các thiết bị mạng lớp 1 lớp 2 lớp 3 dọc trên đường đi giữa hai máy nguồn và đích"],[3897,"-Thời gian trễ không phụ thuộc hoàn toàn vào khoảng cách và số lượng thiết bị mạng.Ví dụ :Nếu 3 Switch giữa 3 máy trạm được cấu hình đúng thì thời gian trễ giữa hai máy trạm sẽ ít hơn là nếu giữa chúng đặt một Router vì router thực hiện chức năng phức tạp hơn,cần nhiều thơi gian xử lý hơn.Router phải xử lý thuật LAN như Ethernet chẳng hạn, định nghĩa thời bit là một đơn vị thời gian để truyền đi một bit"],[3898,"Để cho một thiết bị điện hay quang nhận ra được tín hiệu là bit 0 hay bit 1 thì phải có một khoảng thời gian tối thiểu là khoảng thời gian của một bit"],[3899,"-Thời gian truyền được tính bằng số lượng bit gửi đi nhân với thời bit tương ứng của kỹ thuật mà bạn đang sử dụ oả ỗ"],[3900,"338 +Thời gian trễ do lan truyền trên đường cáp +Thời gian trễ do các thiết bị lớp 1,lớp 2 và lớp 3 dọc trên đường đi 4.1.8"],[3901,"Ích lợi của việc sử dụng Repeater -Khoảng cách mà một mạng LAN có thể bao phủ bị giới hạn và sự suy hao của tín hiệu.Khi tín hiệu di chuyển trên mạng nó sẽ bị suy hao do trở kháng của cáp hay của môi trường truyền làm tiêu hao năng lượng tín hiệu"],[3902,"Ethernet Repeater là một thiết bị hoạt động ở lớp vật lý,nó khuếch đại và tái tạo lại tín hiệu trong Ethernet LAN.Khi bạn sử dụng repeater để mở rộng khoảng cách của một LAN,mạng LAN này có thể bao phủ lênmột phạm vi lớn hơn và có nhiều người dùng hơn cùng chia sẻ mạng này.Tuy nhiên,việc sử dụng repeater và hub lại tạo ra một vấn đề về quảng bá và đụng độ làm giảm hiệu quả hoạt động của mạng LAN có môi trường truyền chia sẻ"],[3903,""],[3904,"339 +Repeater là một thiết bị lớp 1 thực hiện khuếch đại,tái tạo lại tín hiệu và truyền đi +Repeater cho phép kéo dài khoảng cách từ đầu cuối -đến -đầu cuối +Repeater làm tăng kích thước của miền đụng độ và miền quảng bá Hình:4.1.8.b.Mở rộng môi trường chia sẻ mạng LAN bằng repeater 4.1.9.Truyền song công -Ethernet song công cho phép truyền một gói dữ liệu đồng thời nhận một gói dữ liệu khác tại cùng một thời điểm.Việc truyền và nhận song song đồng thời này yêu cầu sử dụng hai cặp dây khác nhau trong cáp và chuyển mạch kết nối giữa hai máy.Kết nối này phải được xem như kết nối điểm -nối -điểm và hoàn toàn khô Ethernet tối thiểu"],[3905,"truyền và nhận đồng thời, mỗi node phải kết nối vào một port riêng trên switch"],[3906,"Kết nối song công có thể sử dụng chuẩn môi trường truyền của 10B ây riêng rẽ trong cáp để tạo kết nối trực tiếp giữa chân truyền (Tx) ở một đầu với chân thu (Rx0 ở đầu kia"],[3907,"Khi hai máy được kết nối như vậy sẽ tạo ra môi trường truyền không có đụng độ, việc truyền và nhận dữ kiệu được thực hiện trên hai mạc điện của hai cặp dây riêng biệt trong sơi cáp"],[3908,"Trong mạng băng thông 10Mb/s trước đây, Ethernet chỉ sử dụng khoảng 50% - 60% lượng băng thông do đụng độ và thời gian trễ"],[3909,"Ethernet song công có thể sử dụng 100% băng thông trên cả hai chiều, mỗi chiều Tx và Rx bạn có 10Mb/s, tổng cộng là bạn có thông lượng 20Mb/s"],[3910,"ng có đụng độ.Vì cả hai node có thể truyền và nhận đồng thời nên không còn việc thỏa thuận sủ dụng băng thông"],[3911,"Ethernet song công có thể sử dụng cấu trúc cáp đax có nếu như môi trường truyền thỏa mãn được những tiêu chuẩn Để ASE-T, 100BASE-T hoặc 100BASE-FX để tạo kết nối điiểm-nối-điểm"],[3912,"NIC trên tất cả thiết kế nối vào mạng phải có khả năng song công"],[3913,"Ethernet switch song công vận dụng ưu điểm của hai cặp d"],[3914,"340 4.2"],[3915,"G 4.2.1"],[3916,"Ph©n ®o¹n m¹ng LAN mét miÒn ®ông ®é riªng"],[3917,"ViÖc ph©n ®o¹n m¹ng cho phÐp ph¹m vi nghÏn m¹ch ®−îc thu nhá trong ph¹m ong mét segment, c¸c thiÕt bÞ iíi thiÖu vÒ chuyÓn m¹ch LAN Mét hÖ thèng m¹ng cã thÓ chia thµnh nhiÒu ®¬n vÞ nhá h¬n gäi lµ segmnet"],[3918,"H×nh 4.2.1"],[3919,"lµ mét vÝ dô vÒ ph©n ®o¹n M¹ng Ethernet"],[3920,"Toµn bé hÖ thèng m¹ng cã 15 m¸y tÝnh, trong ®ã cã 6 server vµ 9 m¸y tr¹m"],[3921,"Mçi segment sö dông ph−¬ng ph¸p truy cËp CSMA/CD vµ duy tr× l−u l−îng trong segment ®ã"],[3922,"Mçi segment lµ vi tõng segment"],[3923,"Khi d÷ liÖu ®−îc truyÒn ®i tr \u2022 Gấp đôi băng thông giữa hai node"],[3924,"đụng độ"],[3925,"\u2022 Hai đường 10Mb/s hay 100Mb/s"],[3926,"\u2022 Truyền không có"],[3927,"341 trong cïng segment ®ã chia sÎ toµn bé b¨ng th«ng cña segment ®ã"],[3928,"D÷ liÖu ®−îc truyÒn gi÷a c¸c segment sÏ ®−îc truyÒn lªn ®−êng trôc chÝnh cña m¹ng"],[3929,"4.2.2"],[3930,"ng cÇn chuyÓn ra segment th× bridge sÏ chÆn c¸c gãi ®ã l¹i"],[3931,"MÆc dï ho¹t ®éng cña bridge lµ trong suèt ®èi víi c¸c thiÕt bÞ m¹ng kh¸c nh−ng uyÓn gãi"],[3932,"Bridge lµ mét thiÕt bÞ chuyÓn m¹ch d¹ng store \u2013and-forward"],[3933,"Víi kiÓu chuyÓn m¹ch nµy, bridge ph¶i kiÓm tra ®Þa chØ ®Ých vµ tÝnh to¸n CRC (Cyclic Redundancy Check) ®Ó kiÓm tra lçi frame råi míi chuyÓn frame ®i"],[3934,"NÕu port ®Ých ®ang bËn th× bridge cã thÓ t¹m thêi l©u frame cho ®Õn khi port ®Ých ®−îc g Ph©n ®o¹n cña m¹ng bridge Bridge lµ mét thiÕt bÞ Líp 2 thùc hiÖn chuyÓn gãi dùa trªn ®Þa chØ MAC"],[3935,"Khi bridge nhËn frame vµo tõ mét port, bridge sÏ ®äc ®Þa chØ MAC, cña m¸y göi ®Ó nhËn biÕt ®−îc thiÕt bÞ nµop kÕt nèi víi port ®ã"],[3936,"Tõ ®ã bridge x©y dùng ®−îc b¶ng chuyÓn m¹ch, trÓn ®ã ¸nh x¹ tõ ®Þa chØ MAC ra port t−¬ng øng"],[3937,"Nh÷ng gãi d÷ liÖu nµo kh« thêi gian trÔ v©n t¨ng lªn kho¶ng 10% ®Õn 30% khi sö dông bridge"],[3938,"Thêi gian trÔ nµy lµ thêi gian ®Ó bridge xö lý vµ quyÕt ®Þnh ch i¶i phãng"],[3939,""],[3940,"342 Ph©n ®o¹n m¹ng b»ng bridge gióp gi¶m sè l−îng ng−êi dïng trªn mét segment"],[3941,"bridge nhËn frame, gi÷ frame råi chuyÓn frame ®i dùa theo ®Þa chØ Líp 2"],[3942,""],[3943,"343 Kh«ng phô thuéc vµo giao thøc Líp 3 T¨ng thêi gian trÔ trªn m¹ng"],[3944,"4.2.3"],[3945,"Ph©n ®o¹n m¹ng b»ng router"],[3946,"Ph©n ®o¹n m¹ng b»ng router sÏ lµm t¨ng thêi gian trÔ cña m¹ng lªn 20% ®Õn 30%"],[3947,"Thêi gian trÔ nµy cao h¬n bridge v× router ho¹t ®éng ë líp M¹ng vµ sö dông ®Þa chØ IP ®Ó quyÕt ®Þnh chän ®−êng tèt nhÊt ®Õn m¸y ®Ých"],[3948,"i h©n ®o¹n m¹ng trong mét m¹ng ®¬n nay trong mét subnet th«i"],[3949,"Cßn router cung cÊp kÕt nèi gi÷a c¸c m¹ng vµ c¸c subnet víi nhau"],[3950,"Router kh«ng chuyÓn gãi qu¶ng b¸ trong khi swich vµ bridge b¾t buéc ph¶i chuyÓ Br dge vµ switch chØ p n gãi qu¶ng c¸o"],[3951,""],[3952,"344 - DÔ qu¶n lý h¬n, chøc n¨ng nhiÒu h¬n, nhiÒu ®−êng ®i h¬n - Thu nhá khÝch th−íc miÒn qu¶ng b¸ - Ho¹t ®éng ë líp 3 4.2.4"],[3953,"Ph©n ®o¹n m¹ng b»ng switch ChuyÓn m¹ch LAN gióp gi¶m ®i t×nh tr¹ng thiÕu hôt b¨ng th«ng vµ nghÏn m¹ch"],[3954,"SwitchsÏ ph©n ®o¹n m¹ng LAN thµnh c¸c vi ®o¹n (microsegment), thu nhá tèi ®a kÝch th−íc miÒn ®ông ®é"],[3955,"Tuy nhiªn tÊt c¶ c¸c host kÕt nèi vµo mét switch vÉn n»m trong cïng mét miÒn qu¶ng b¸"],[3956,""],[3957,"345 Trong m¹ng Ethernet LAN thuÇn chuyÓn m¹ch, c¸c node thùc hiÖn chøc n¨ng truyÒn vµ nhËn giãng nh− lµ trong m¹ng chØ cã duy nhÊt m×nh nã vËy"],[3958,"Khi hai node thiÕt lËp kÕ nèi, mét m¹ch ¶o ®−îc thiÕt lËp gi÷a chóng vµ cuing cÊp toµn bé b¨ng th«ng m¹ng"],[3959,"M¹ch ¶o nµy chØ tån t¹i trong switch khi c¸c node cÇn trao ®æi"],[3960,"C¸c kÕt nèi b»ng switch cung cÊp nhiÒu th«ng l−îng h¬ so víi Ethernet LAN kÕt nèi b»ng bridge hay hub"],[3961,"- Swithc lo¹i trõ ®ông ®é b»ng c¸ch ph©n ®o¹n cùc nhá (microsegement)"],[3962,"- Têi gian trÔ thÊp vµ tèc ®é chuyÓn trang frame cao trªn mçi port"],[3963,"- Ho¹t ®éng tèt víi card m¹ng vµ c¸p cã s½n cña chuÈn 802.3 (CSMA/CD)"],[3964,".2.5"],[3965,"Ho¹t ®éng c¬ b¶n cña switch"],[3966,"ChuyÓn m¹ch lµ mét kü thuËt gióp gi¶m t¾c nghÏn träng m¹ng Ethernet, oken Ring vµ FDDI (Fiber Distributed Data Inteface)"],[3967,"ChuyÓn m¹ch thùc hiÖn ®−îc viÖc nµy b»ng c¸ch gi¶m giao th ®−îc sö dông ®Ó thay thÕ cho hub vµ vÉn ho¹t ®éng tèt víi c¸c cÊu tróc c¸p cã s½n"],[3968,"4 T «ng vµ t¨ng b¨ng th«ng"],[3969,"LAN switch th−êng Switch thùc hiÖn ho¹t ®éng chÝnh sau: - ChuyÓn m¹ch frame - B¶o tr× ho¹t ®éng chuyÓn m¹ch"],[3970,""],[3971,"346 h¶ n¨ng truy cËp riªng biÖt trªn port Lo¹i trõ ®−îc ®ông ®é vµ t¨ng th«ng l−îng ®−êng truyÒn - Hç trî ®−îc nhiÒu phiªn giao dÞch cïng mét lóc - ChuyÓn frame dùa trªn b¶ng chuyÓn m¹ch + ChuyÓn frame dùa theo ®Þa chØ MAC (Líp 2)"],[3972,"- Ho¹t ®éng ë Líp 2 cña m« h×nh OSI"],[3973,"- Häc vÞ trÝ kÕt nèi cña tõng m¸y tr¹m b»ng c¸ch ghi nhËn ®Þa chØ nguån trªn frame nhËn vµo"],[3974,"+ ChuyÓn frame ra tÊt c¶ c¸c port khi ®Þa chØ ®Ých lµ qu¶ng b¸, multicast hoÆc lµ mét ®Þa chØ mµ switch kh«ng biÕt"],[3975,"+ ChØ chuyÓn frame ra port kh¸c khi ®Þa chØ ®Ých n»m ë port kh¸c víi port nhËn vµo"],[3976,"- K -"],[3977,"347 H×nh 4.2.5.b"],[3978,"Ho¹t ®éng c¬ b¶n cña switch"],[3979,"Ta xÐt ho¹t ®éng cña switch tõ lóc ng b¶ng chuyÓn m¹ch"],[3980,"ë h×nh nµy, m¸y A thùc ban ®Çu ch−a cã th«ng tin g× tro hiÖn göi gãi d÷ liÖu cho m¸y B"],[3981,"H×nh 4.2.5.c"],[3982,"Switch nhËn ®−îc frame tõ m¸y A vµo port sè 3"],[3983,"Switch kiÓm tra ®Þa chØ nguån trong frame nh©n ®−îc vµ ghi nhËn vµo b¶ng chuyÓn m¹ch: ®Þa chØ MAC cña m¸y A t−¬ng øng víi port sè 3"],[3984,""],[3985,"348 H×nh 4.2.5.d"],[3986,"ë thêi ®iÓm nµy, trªn b¶ng chuyÓn m¹ch cña switch ch−a cã th«ng tin g× vÒ ®Þa chØ ®Ých lµ ®Þa chØ MAC cña m¸y B"],[3987,"Do ®ã, switch chuyÓn frame ra tÊt c¶ c¸c port tõ port sè 3 lµ port nhËn frame vµo"],[3988,"H×nh 4.2.5.e"],[3989,"M¸y B nhËn ®−îc d÷ liÖu m¸y A göi cho nã, nã göi d÷ liÖu cña nã l¹i cho m¸y A"],[3990,"349 Lóc nµy, switch nhËn vµo tõ port sè 4 gãi d÷ liÖu cña m¸y B göi cho m¸y A"],[3991,"Còng b»ng c¸ch häc ®Þa chØ nguån trong frame nhËn vµo, switch sÏ ghi nhËn ®−îc vµo b¶ng chuyÓn m¹ch: ®Þa chØ MAC cña m¸y B lµ t−¬ng øng víi port sè 4"],[3992,"§Þa chØ ®Ých cña frame nµy lµ ®Þa chØ MAC cña m¸y A mµ swithc ®· häc tr−íc ®ã"],[3993,"Do ®ã, switch chØ chuyÓn frame ra port sè 3"],[3994,"4.2.6"],[3995,"Thêi gian trÔ cña Ethernet switch"],[3996,"Thêi gian trÔ lµ kho¶ng thêi gian tõ lóc switch b¾t ®Çu nhËn frame cho ®Õn khi switch ®· chuyÓn hÕt frame ra port ®Ých"],[3997,"Thêi gian trÔ nµy phô thuéc vµo cÊu h×nh chuyÓn m¹ch vµ l−îng giao th«ng qua switch"],[3998,"Thêi gian trÔ ®−îc ®o ®¬n vÞ nhá h¬n gi©y"],[3999,"§èi víi thiÕt bÞ m¹ng ho¹t ®éng víi tèc ®é cao th× mçi mét nano gi©y (ns) trÔ h¬n lµ mét ¶nh h−ëng lín ®Õn ho¹t ®éng m¹ng"],[4000,"4.2.7"],[4001,"ChuyÓn m¹ch Líp 2 vµ Líp 3"],[4002,"ChuyÓn m¹ch lµ tiÕn tr×nh nhËn frame vµo tõ mét cæng vµ chuyÓn frame ra mét cæng kh¸c"],[4003,"Router sö dông chuyÓn m¹ch Líp 3 ®Ó chuyÓn m¹ch c¸c gãi ®· ®−îc ®Þnh tuyÕn xong"],[4004,"Switch sö dông chuyÓn m¹ch Líp 2 ®Ó chuyÓn frame"],[4005,"ù kh¸c nhau gi÷a chuyÓn m¹ch Líp 2 vµ Líp 3 lµ lo¹i th«ng tin n»m trong frame ®−îc sö dông ®Ó quyÕt ®Þnh chän cæng ra lµ kh¸c nhau"],[4006,"ChuyÓn m¹ch Líp 2 dùa trªn th«ng tin vÒ ®Þa chØ MAC"],[4007,"Cßn chuyÓn m¹ch Líp 3 th× dùa vµ ®Þa chØ líp M¹ng vÝ dô nh− ®Þa chØ IP"],[4008,"ChuyÓn m¹ch Líp 2 nh×n vµo ®Þa chØ MAC ®Ých trong phÇn header cña frame vµ chuyÓn frame ra ®óng port dùa theo th«ng tin vÒ ®Þa chØ MAC trªn b¶ng chuyÓn S"],[4009,"350 m¹ch"],[4010,"B¶ng chuyÓn m¹ch ®−îc l−u trong bé nhí ®Þa chØ CAM (Content Addressable Memory)"],[4011,"NÕu switch Líp 2 kh«ng biÕt ph¶i göi frame ra port nµo cô thÓ th× ®¬n gi¶n lµ nã qu¶ng b¸ frame ra tÊt c¶ c¸c port cña nã"],[4012,"Khi nhËn ®−îc gãi tr¶ lêi vÒ, switch sÏ ghi nhËn ®Þa chØ míi vµo CAM"],[4013,"ChuyÓn m¹ch Líp 3 lµ mét chøc n¨ng cña Líp M¹ng"],[4014,"ChuyÓn m¹ch Líp 3 kiÓm tra th«ng tin n»m trong phÇn header cña Líp 3 vµ dùa vµo ®Þa chØ IP trong ®ã ®Ó chuyÓn gãi"],[4015,"Dßng giao th«ng trong m¹ng chuyÓn m¹ch hay m¹ng ngang hµng hoµn toµn kh¸c víi dßng giao th«ng trong m¹ng ®Þnh tuyÕn hay m¹ng ph©n cÊp"],[4016,"Trong m¹ng ph©n cÊp, dßng giao th«ng ®−îc uyÓn chuyÓn h¬n trong m¹ng ngang hµng"],[4017,"H×nh 4.2.7.a"],[4018,"ChuyÓn m¹ch líp 2"],[4019,"351 H×nh 4.2.7.b"],[4020,"ChuyÓn m¹ch líp 3 4.2.8"],[4021,"ChuyÓn m¹ch ®èi xøng vµ bÊt ®èi xøng"],[4022,"ChuyÓn m¹ch LAN ®−îc ph©n lo¹i thµnh ®èi xøng vµ bÊt ®èi xøng dùa trªn b¶ng th«ng cña mçi Port trªn switch"],[4023,"ChuyÓn m¹ch ®èi xøng lµ chuyÓn m¹ch gi÷a c¸c port cã cïng b¨ng th«ng"],[4024,"ChuyÓn m¹ch bÊt ®èi xøng lµ chuyÓn m¹ch gi÷a c¸c port cã b¨ng th«ng kh¸c nhau, vÝ dô nh− gi÷a c¸c port 10 Mb/s vµ port 100 Mb/s"],[4025,"ChuyÓn m¹ch bÊt ®èi xøng cho phÐp dµnh nhiÒu b¨ng th«ng h¬n cho port nèi vµo server ®Ó tr¸nh nghÏn m¹ch trªn ®−êng nµy khi cã nhiÒu client cïng truy cËp vµo server cïng mét lóc"],[4026,"ChuyÓn m¹ch bÊt ®èi xøng cÇn ph¶i cã bé nhí ®Öm ®Ó gi÷ frame ®−îc liªn tôc gi÷a hai tèc ®é kh¸c nhau cña hai port"],[4027,"- ChuyÓn m¹ch gi÷a hai port cã cïng b¨ng th«ng (10/10 Mb/s hay 100/100 Mb/s)"],[4028,"- Th«ng l−îng cµng t¨ng khi sè l−îng th«ng tin liªn l¹c ®ång thêi t¹i mét thêi ®iÓm cµng t¨ng"],[4029,""],[4030,"352 H×nh 4.2.8.a"],[4031,"ChuyÓn m¹ch ®èi xøng"],[4032,"- ChuyÓn m¹ch gi÷a hai port kh«ng cïng b¨ng th«ng (10/100 Mb/s) - §ßi hái ph¶i cã bé nhí ®Öm"],[4033,"H×nh 4.2.8.b"],[4034,"ChuyÓn m¹ch bÊt ®èi xøng"],[4035,""],[4036,"353 4.2.9"],[4037,"Bé ®Öm"],[4038,"Ethernet switch sö dông bé ®Öm ®Ó gi÷ vµ chuyÓn frame"],[4039,"Bé ®Öm cßn ®−îc sö dông khi port ®Ých ®ang bËn"],[4040,"Cã hai lo¹i bé ®Öm cã thÓ sö dông ®Ó chuyÓn frame lµ bé ®Öm theo port vµ bé ®Öm chia sÎ"],[4041,"Trong bé ®Öm theo port, frame ®−îc l−u thµnh tõng hµng ®îi t−¬ng øng víi tõng port nhËn vµo"],[4042,"Sau ®ã frame chØ ®−îc chuyÓn sang hµng ®îi cña port ®Ých khi tÊt c¶ c¸c frame tr−íc nã trong hµng ®îi ®· ®−îc chuyÓn hÕt"],[4043,"Nh− vËy mét frame cã thÓ lµm cho tÊt c¶ c¸c frame cßn l¹i trong hµng ®îi ph¶i ho·n l¹i v× port ®Ých cña frame nµy ®ang bËn"],[4044,"Ngay c¶ khi port ®Ých ®ang trèng th× còng vÉn ph¶i chê mét kho¶ng thêi gian ®Ó chuyÓn hÕt frame ®ã"],[4045,"Bé ®Öm ®−îc chia sÎ ®Ó tÊt c¶ c¸c frame vµo chung mét bé nhí"],[4046,"TÊt c¶ c¸c port cña switch chia sÎ cïng mét bé ®Öm"],[4047,"Dung l−îng bé ®Öm ®−îc tù ®éng ph©n bæ theo nhu cÇu cña mçi port ë mçi thêi ®iÓm"],[4048,"Frame ®−îc tù ®éng ph©n bæ theo nhu c Switch gi÷ mét s¬ ®å cho biÕt frame nµo t−¬ng øng víi port nµo vµ s¬ ®å nµy i ®−îc vµ Ýt bÞ rít gãi h¬n"],[4049,"§iÒu nµy rÊt quan träng ®èi víi chuyÓn m¹ch bÊt ®ång bé v× frame ®−îc chuyÓn m¹ch gi÷a hai port cã g toµn bé frame råi míi b¾t ®Çu tiÕn tr×nh chuyÓn Çu cña mçi port ë mçi thêi ®iÓm"],[4050,"Frame trong bé ®Öm ®−îc tù ®éng ®−a ra port ph¸t"],[4051,"Nhê c¬ chÕ chia sÎ nµy, mét frame nhËn ®−îc tõ port nµy kh«ng cÇn ph¶i chuyÓn hµng ®îi ®Ó ph¸t ra port kh¸c"],[4052,"sÏ ®−îc xo¸ ®i sau khi ®· truyÒn frame thµnh c«ng"],[4053,"Bé ®Öm ®−îc sö dông theo d¹ng chia sÎ"],[4054,"Do ®ã l−îng frame l−u trong bé ®Öm bÞ giíi h¹n bëi tæng dung l−îng cña bé cña bé ®Öm chø kh«ng phô thuéc vµo vïng ®Öm cña tõng port nh− d¹ng bé ®Öm theo port"],[4055,"Do ®ã frame lín cã thÓ chuyÓn ® tèc ®é kh¸c nhau"],[4056,"- Bé ®Öm theo port l−u c¸c frame theo hµng ®îi t−¬ng øng víi tõng port nhËn vµo"],[4057,"- Bé ®Öm chia sÎ l−u tÊt c¶ c¸c frame vµo chung mét bé nhí"],[4058,"TÊt c¶ c¸c port trªn switch chia sÎ cïng mét vïng nhí nµy"],[4059,"4.2.10"],[4060,"Hai ph−¬ng ph¸p chuyÓn m¹ch"],[4061,"Sau ®©y lµ hai ph−¬ng ph¸p chuyÓn m¹ch dµnh cho frame: - Store-and-forwad: NhËn vµo toµn bé frame xong råi míi b¾t ®Çu chuyÓn ®i"],[4062,"Switch ®äc ®Þa chØ nguån, ®Ých vµ läc frame nÕu cÇn tr−íc khi quyÕt ®Þnh chuyÓn frame ra"],[4063,"V× switch ph¶i nhËn xon"],[4064,"354 m¹ch frame nªn thêi gian trÔ sÏ cµng lín ®èi víi frame cµng lín"],[4065,"Tuy nhiªn nhê vËy switch míi cã thÓ kiÓm tra lçi cho toµn bé frame gióp kh¶ n¨ng ph¸t hiÖn lçi cao h¬n"],[4066,"- Cut-through: Frame ®−îc chuyÓn ®i tr−íc khi nhËn xong toµn bé frame"],[4067,"ChØ cÇn ®Þa chØ ®Ých cã thÓ ®äc ®−îc råi lµ ®· cã thÓ chuyÓn frame ra"],[4068,"Ph−¬ng ph¸p nµy lµm gi¶m thêi gian trÔ nh−ng ®ång thêi còng lµm gi¶m kh¶ n¨ng ph¸t hiÖn lçi frame"],[4069,"Sau ®©y lµ hai chÕ ®é chuyÓn m¹ch cô thÓ theo ph−¬ng ph¸p cut-through: - Fast-forward: ChuyÓn m¹ch nhanh cã thêi gian trÔ thÊp nhÊt"],[4070,"ChuyÓn m¹ch nhanh sÏ chuyÓn frame ra ngay sau khi ®äc ®−îc ®Þa chØ ®Ých cña frame mµ kh«ng cÇn ph¶i chê nhËn hÕt frame"],[4071,"Do ®ã c¬ chÕ nµy kh«ng kiÓm tra ®−îc frame nhËn vµo cã bÞ lçi hay kh«ng mÆc dï ®iÒu nµy kh«ng x¶y ra th−êng xuyªn vµ m¸y ®Ých sÏ huû gãi nÕu gãi bÞ lçi"],[4072,"Trong chÕ ®é chuyÓn m¹ch nhanh, thêi gian trÔ ®−îc tÝnh tõ lóc switch nhËn vµo bit ®Çu tiªn cho ®Õn khi switch ph¸t ra bit ®Çu tiªn"],[4073,"- Fragment-free: C¬ chÕ chuyÓn m¹ch nµy sÏ läc bá c¸ch m¶nh g·ydo ®ông ®é g©y ra tr−íc khi b¾t ®Çu chuyÓn gãi"],[4074,"HÇu hÕt nh÷ng frame bÞ lçi trong m¹ng lµ nh÷ng m¶nh g·y cña frame do bÞ ®ông ®é"],[4075,"Trong m¹n ho¹t ®éng b×nh th−êng, mét m¶nh frame g·y do ®ông ®é g©y ra nhÊt ph¶i nhá h¬n 64 byte"],[4076,"BÊt kú frame nµo lín h¬n 64 byte ®Òu ®−îc xem lµ hîp lÖ vµ th−êng kh«ng cã lçi"],[4077,"Do c¬ chÕ chuyÓn m¹ch khi«ng m¶nh g·y sÏ chê nhËn ®ñ 64 byte ®Çu tiªn cña frame ®Ó ®¶m b¶o frame nhËn ®−îc kh«ng ph¶i lµ mét m¶nh g·y do bÞ ®ông ®é råi míi b¾t ®Çu chuyÓn frame ®i"],[4078,"Trong chÕ ®é chuyÓn m¹ch nµy, thêi gian trÔ còng ®−îc tÝnh tõ lóc switch nhËn ®−îc bit ®Çu tiªn cho ®Õn khi switch ph¸t ®i bit ®Çu tiªn ®ã"],[4079,"Thêi gian trÔ cña mçi chÕ ®é chuyÓn m¹ch phô thuéc vµo c¸ch mµ switch chuyÒn frame nh− thÕ nµo"],[4080,"§Î chuyÓn frame ®−îc nhanh h¬n, switch ®· bít thêi gian kiÓm tra lçi frame ®i nh−ng lµm nh− vËy l¹i lµm t¨ng l−îng d÷ liÖu cÇn truyÒn l¹i"],[4081,"4.3"],[4082,"Ho¹t ®éng cña switch"],[4083,"4.3.1"],[4084,"Chøc n¨ng cña Ethernet switch"],[4085,"Switch lµ mét thiÕt bÞ m¹ng chän lùa ®−êng d·n ®Ó göi frame ®Õn ®Ých, C¶ switch vµ bridge ®Òu ho¹t ®éng ë Líp 2 cña m« h×nh OSI"],[4086,""],[4087,"355 Ó quyÕt ®Þnh chuyÓn frame nªn m¹ng Lan cã thÎ ho¹t ®éng hiÖu qu¶ h¬n"],[4088,"Switch nhËn biÕt host nµo kÕt nèi vµo port cña nã b»ng c¸ch ®äca ®Þa chØ MAC nguån trong frame mµ nã nhËn ®−îc"],[4089,"Khi hai host thùc hiÖn liªn l¹c víi nhau, switch chØ thiÕt lËp mét m¹ch ¶o gi÷a hai port t−¬ng øng vµ kh«ng lµm ¶nh h−ëng ®Õn l−u th«ng trªn c¸c port kh¸c"],[4090,"Trong khi ®ã, hub chuyÓn d÷ liÖu ra tÊt c¶ c¸c port cña nã nªn mäi host ®Òu nhËn ®−îc d÷ liÖu vµ ph¶i xö lý d÷ liÖu cho dï nh÷ng d÷ liÖu nµy kh«ng ph¶i göi cho chóng"],[4091,"Do ®ã, m¹ng Lan cã hiÖu suÊt ho¹t ®éng cao th−êng sö dông chuyÓn m¹ch toµn bé"],[4092,"- Switch tËp trung c¸c kÕt nèi vµ quyÕt ®Þnh chän ®−êng dÉn ®Ó chuyÓn d÷ liÖu hiÖu qu¶"],[4093,"Frame ®−îc chuyÓn m¹ch tõ port nhËn vµo ®Õn port ph¸t ra"],[4094,"Mçi port lµ mét kÕt nèi cung cÊp chän b¨ng th«ng cho host"],[4095,"- Trong Ethernet hub, tÊt c¶ c¸c port kÕt nèi vµo mét m¹ch chÝnh, hay nãi c¸ch kh¸c, tÊt c¶ c¸c thiÕt bÞ kÕt nèi hub sÏ cïng chia sÎ b¨ng th«ng m¹ng"],[4096,"NÕu cã hai m¸y tr¹m ®−îc thiÕt lËp phiªn kÕt nèi th× chóng sÏ sö dông mét l−îng b¨ng th«ng ®¸ng kÓ vµ ho¹t ®éng cña c¸c thiÕt bÞ cßn l¹i kÕt nèi vµo hub sÏ bÞ gi¶m xuèng"],[4097,"- §Ó gi¶i quyÕt t×nh tr¹ng trªn, switch xö lý mçi port lµ mét segment riªng biÖt"],[4098,"Khi c¸c m¸y ë c¸c port kh¸c nhau cÇn liªn l¹c víi nhau, switch sÏ chuyÓn tõ frame tõ port nµy sang port kia vµ ®¶m b¶o cung cÊp chon b¨ng th«ng cho mçi phiªn kÕt nèi"],[4099,"§Ó chuyÓn frame hiÖu qu¶ gi÷a c¸c port, switch l−u gi÷ mét b¶ng ®Þa chØ"],[4100,"Khi switch nhËn vµo mét frame, nã sÏ ghi nhËn ®Þa chØ MAC cña m¸y göi t−¬ng øng víi port mµ nã nhËn frame ®ã vµo"],[4101,"Sau ®©y lµ c¸c ®Æc ®iÓm chÝnh cña Ethernet switch - T¸ch biÖt giao th«ng trªn tõng segment - T¨ng nhiÒu h¬n l−îng b¨ng th«ng dµnh cho mçi user b»ng c¸ch t¹o miÒn ®ông ®é nhá h¬n"],[4102,"§Æc ®iÓm ®Çu tiªn: T¸ch biÖt giao th«ng trªn tõng segment"],[4103,"Ethernet switch chia hÖ thèng m¹ng thµnh c¸c ®¬n vÞ cùc nhá gäi lµ microsegment"],[4104,"C¸c segment §«i khi switch cßn ®−îc gäi lµ bridge ®a port hay hub chuyÓn m¹ch"],[4105,"Swich quyÕt ®Þnh chuyÓn frame dùa trªn ®Þa chØ MAC, do ®ã nã ®−îc xÕp µo thiÕt bÞ Líp 2"],[4106,"Ng−îc l¹i, hub chØ t¸i t¹o l¹i tÝn hiÖu Líp 1 vµ ph¸t tÝn hiÖu ®ã ra tÊt c¶ c¸c port cña nã mµ kh«ng hÒ thùc hiÖn mét sù chän lùa nµo"],[4107,"ChÝnh nhê switch cã kh¶ n¨ng chän lùa d−êng dÉn ®"],[4108,"356 nh− vËy cho phÐp c¸c user trªn segment kh¸c nhau cã thÓ göi d÷ liÖu cïng mét lóc mµ kh«ng lµm chËm l¹i c¸c ho¹t ®éng cña m¹ng"],[4109,"»ng c¸ch chia nhá hÖ thèng m¹ng, b¹n sÏ lµm gi¶m l−îng user vµ thiÕt bÞ cïng chia sÎ mét b¨ng th«ng"],[4110,"Mçi segment lµ mét miÒn ®ông ®é riªng biÖt"],[4111,"Ethernet switch giíi h¹n l−u th«ng b»ng chØ chuyÓn gãi ®Õn ®óng port cÇn thiÕt dùa trªn ®Þ ai cña Ethernet switch lµ ®¶m b¶o cung cÊp b¨ng th«ng nhiÒu h¬n cho user b»ng c¸ch t¹o c¸c miÒn ®ông ®é nhá h¬n"],[4112,"Ethernet vµ Fast Ethernet switch tÝnh"],[4113,"Khi c¸c øng dông míi nh nªn phæ bi µ kh«ng cÇn chê nhËn ®−îc hÕt frame"],[4114,"Nh− vËy, frame ®−îc chuyÓn ®i tr−íc khi nhËn hÕt toµn bé frame."],[4115,"Do ®ã, thêi gian trÔ gi¶m xuèng nh−ng kh¶ n¨ng ph¸t hiÖn lç frame ®i"],[4116,"Switch ®äc ®Þa chØ nguån, ®Ých vµ thùc hiÖn läc bá frame nÕu cÇn råi míi ®Çu tiªn cña Ethernet frame råi míi ment-free lµ mét thuËt ng÷ ®−îc sö dông ®Ó chØ switch ®ang sö dông mét d¹ng c¶i biªn cña chuyÓn m¹ch cut-through"],[4117,"Mét chÕ ®é chuyÓn m¹ch kh¸c ®−îc kÕt hîp gi÷a cut-through vµ store-and- forward"],[4118,"KiÓu kÕt hîp nµy gäi lµ cut-through thÝch nghi (adaptive cut-through)"],[4119,"B a chØa MAC Líp 2"],[4120,"§Æc ®iÓm thø h chia nhá m¹ng LAN thµnh nhiÒu segment nhá"],[4121,"Mçi segment nµy lµ mét kÕt nèi riªng gièng nh− lµ mét lµn ®−êng riªng 100 Mb/s vËy"],[4122,"Mçi serer cã thÓ ®Æt trªn mét kÕt nèi 100 Mb/s riªng"],[4123,"Trong c¸c hÖ thèng mang hiÖn nay, Fast Ethernet switch ®−îc sö dông lµm ®−êng trôc chÝnh cho LAN, cßn Ethernet hub, Ethernet switch hoÆc Fast Ethernet hub ®−îc sö dông ®Ó kÕt nèi xuèng c¸c m¸y − truyÒn th«ng ®a ph−¬ng tiÖn, video héi nghÞ .."],[4124,"ngµy cµng trë Õn h¬n th× mçi m¸y tÝnh sÏ ®−îc mét kÕt nèi 100 Mb/s riªng vµo switch"],[4125,"4.3.2"],[4126,"C¸c chÕ ®é chuyÓn m¹ch frame Cã 3 chÕ ®é chuyÓn m¹ch frame: - Fast-forwad: switch ®äc ®−îc ®Þa chØ cña frame lµ b¾t ®Çu chuyÓn frame ®i lu«n m i kÐm"],[4127,"Fast-forward lµ mét thuËt ng÷ ®−îc sö dông ®Ó chØ switch ®ang ë chÕ ®é chuyÓn m¹ch cut-through"],[4128,"- Store \u2013and-forward: NhËn vµo toµn bé frame råi míi b¾t ®Çu chuyÓn quyÕt ®Þnh chuyÓn frame ®i"],[4129,"Thêi gian switch nhËn frame vµo sÏ g©y ra thêi gian trÔ"],[4130,"Frame cµng lín th× thêi gian trÔ cµng v× switch ph¶i nhËn xong toµn bé frame råi míi tiÕn hµnh chuyÓn m¹ch cho frame"],[4131,"Nh−ng nh− vËy th× switch míi cã ®ñ thêi gian vµ d÷ liÖu ®Ó kiÓm tra lçi frame, nªn kh¶ n¨ng ph¸t hiÖn lçi cao h¬n"],[4132,"- Fragment-free: NhËn vµo hÕt 64 byte b¾t ®Çu chuyÓn frame ®i"],[4133,"Frage"],[4134,"357 Trong chÕ ®é nµy, switch sÏ sö dông chuyÓn m¹ch cut-through cho ®Õn khi nµo nã ph¸t hiÖn ra mét l−îng frame bÞ lçi nhÊt ®Þnh"],[4135,"Khi sè l−îng frame bÞ lçi v−ît qu¸ møc ng−ìng th× khi ®ã switch sÏ chuyÓn dïng chuyÓn m¹ch store-and-forwad"],[4136,"Bridge ®−îc xem lµ mét thiÕt bÞ th«ng minh v× nã cã thÓ quyÕt ®Þnh chuyÓn frame dùa trªn ®Þa chØ MAC"],[4137,"§Ó thùc hiÖn c«ng viÖc nµy, bridge x©y dùng mét b¶ng ®Þa chØ"],[4138,"Khi bridge b¾t ®Çu ®−îc bËt lªn, nã sÏ qu¶ng b¸ mét th«ng ®iÖp cho mäi m¸y tr¹m trong segment kÕt nèi vµo nã ®Ó yªu cÇu c¸c m¸y nµy tr¶ lêi"],[4139,"Khi 4.3.3"],[4140,"Bridge vµ switch häc ®Þa chØ nh− thÕ nµo Bridge vµ switch chØ chuyÓn tõ segment nµy sang segment kh¸c khi cÇn thiÕt"],[4141,"§Ó thùc hiÖn nhiÖm vô nµy, bridge vµ switch ph¶i biÕt thiÕt bÞ nµo kÕt nèi vµo segment nµo"],[4142,""],[4143,"358 c¸c m¸y tr¹m tr¶ lêi cho th«ng ®iÖp qu¶ng b¸, bridge sÏ ghi nhËn l¹i ®Þa chØ cña c¸c m¸y vµo b¶ng ®Þa chØ cña m×nh"],[4144,"Qu¸ tr×nh nµy ®−îc gäi lµ qu¸ tr×nh häc ®Þa chØ"],[4145,"Bridge vµ switch häc ®Þa chØ theo c¸c c¸ch sau: * §äc ®Þa chØ MAC nguån trong mçi frame nhËn ®−îc"],[4146,"Ghi nhËn l¹i sè port mµ switch sÏ häc ®−îc ®Þa chØ nµo thuéc vÒ thiÕt bÞ kÕt nèi vµo port nµo cña bridge hoÆc switch"],[4147,"* §Þa chØ häc ®−îc vµ sè port t−¬ng øng sÏ l−u trong b¶ng ®Þa chØ"],[4148,"Bridge sÏ kiÓm tra ®Þa chØ ®Ých n»m trong frame nhËn ®−îc råi dß t×m ®Þa chØ ®Ých nµy trong b¶ng ®Þa chØ ®Ó t×m port t−¬ng øng"],[4149,"CAM (Content Addressable Memory) ®−îc sö dông cho c¸c ho¹t ®éng sau: * LÊy ra th«ng tin ®Þa chØ trong gãi d÷ liÖu nhËn ®−îc vµ xö lý chóng * So s¸nh ®Þa chØ ®Ých cña frame víi c¸c ®Þa chØ trong b¶ng cña nã CAM l−u gi÷ b¶ng ®Þa chØ MAC vµ sè port t−¬ng øng"],[4150,"CAM sÏ so s¸nh ®Þa chØ MAC nhËn ®−îc víi néi dung cña b¶ng CAM"],[4151,"NÕu t×m thÊy ®óng ®Þa chØ ®Ých th× sè port t−¬ng øng sÏ ®−îc chän ®Ó chuyÓn gãi ra"],[4152,"Ethernet switch häc ®Þa chØ cña tõng thiÕt bÞ trong m¹ng kÕt nèi vµo nã b»ng c¸ch ®äc ®Þa chØ nguån cña tõng frame mµ nã nhËn ®−îc vµ ghi nhí sè port mµ nã võa nhËn frame ®ã vµo"],[4153,"Nh÷ng th«ng tin häc ®−îc sÏ l−u trong CAM"],[4154,"Mçi khi nã ®äc ®−îc mét ®Þa chØ míi ch−a cã trong CAM th× nã sÏ tù ®éng häc vµ l−u l¹i ®Þa chØ ®ã ®Ó sö dông cho lÇn sau"],[4155,"Mçi ®Þa chØ nh− vËy ®−îc ®¸nh dÊu thêi gian cho phÐp ®Þa chØ cã ®−îc l−u gi÷ trong mét kho¶ng thêi gian"],[4156,"Sau ®ã mçi khi switch ®äc mét ®Þa chØ nguån trong frame, ®Þa chØ t−¬ng øng trong CAM sÏ ®−îc ®¸nh dÊu thêi gian míi"],[4157,"NÕu trong suèt kho¶ng thêi gian ®¸nh *"],[4158,"359 dÊu mµ switch kh«ng cã ghi nhËn g× n÷a vÒ ®Þa chØ ®ã th× nã sÏ xo¸ ®Þa chØ ®ã ra khái b¶ng"],[4159,"Nhê vËy CAM lu«n gi÷ ®−îc th«ng tin cña m×nh chÝnh x¸c vµ kÞp thêi"],[4160,"Sau ®©y lµ qu¸ tr×nh xö lý cña CAM: 1"],[4161,"NÕu bridge kh«ng t×m thÊy ®Þa chØ ®Ých trong b¶ng cña nã th× nã sÏ chuyÓn frame ra tÊt c¶ c¸c port trõ port nhËn frame vµo"],[4162,"2"],[4163,"B¶ng ®Þa chØ cña bridge cã thÓ bÞ xo¸ do bridge khëi ®éng l¹i hoÆc mét ®Þa chØ nµo ®ã ®· bÞ xo¸ v× ®· hÕt thêi gian ®¸nh dÊu mµ bridge vÉn kh«ng nhËn ®−îc th«ng tin nµo vÒ ®Þa chØ ®ã n÷a"],[4164,"Khi bridge kh«ng biÕt chän port nµo ®Ó chuyÓn frame th× nã göi frame ra tÊt c¶ c¸c port tõ port nhËn frame vµo"],[4165,"§−¬ng nhiªn lµ kh«ng cÇn ph¶i göi l¹i frame ra port mµ nã võa ®−îc nhËn vµo n÷a vi c¸c thiÕt bÞ kh¸c n»m trong segment kÕt nèi vµo port ®ã còng ®· nhËn ®−îc frame råi"],[4166,""],[4167,"NÕu bridge t×m thÊy ®Þa chØ trong b¶ng nh−ng port t−¬ng øng còng chÝnh lµ port mµ nã võa nhËn frame vµo, lóc nµ rt t−¬ng øng lµ port kh¸c víi port nhËn frame vµo th× bridge sÏ chuyÓn frame ra ®óng port t−¬ng øng víi ®i¹ chØ ®Ých"],[4168,"3 y bridge sÏ huû bá gãi d÷ liÖu ®ã v× m¸y ®Ých n»m cïng segment víi m¸y nguån vµ nã ®· nhËn ®−îc frame råi"],[4169,"4"],[4170,"NÕu bridge t×m thÊy ®Þa chØ trong b¶ng vµ po"],[4171,"360 4.3.4"],[4172,"Bridge cã kh¶ n¨ng läc frame dùa trªn bÊt kú th«ng tin Líp 2 nµo trong frame"],[4173,"dge cã thÓ läc frame dùa vµo ®Æc ®iÓm nµy"],[4174,"H¬n n÷a viÖc cã Ých ®èi víi c¸c gãi qu¶ng b¸ vµ multicast kh«ng cÇn thiÕt"],[4175,"Mét khi bridge ®· x©y dùng xong b¶ng ®Þa chØ cña nã th× cã nghÜa lµ nã ®· s½n sµng ho¹t ®éng"],[4176,"Khi nã nhËn vµo frame, nã kiÓm tra ®Þa chØ ®Ých"],[4177,"NÕu ®Þa chØ ®Ých n»m cïng phÝa víi port nhËn frame th× bridge sÏ huû frame ®i"],[4178,"§éng t¸c nµy ®−îc gäi lµ läc frame"],[4179,"NÕu ®i¹ chØ ®Ých n»m trªn segment kh¸c th× bridge sÏ chuyÓn frame ra segment ®ã"],[4180,"VÒ c¬ b¶n, bridge chØ läc bá nh÷ng frame ®−îc göi trong néi bé mét segment vµ chØ chuyÓn c¸c frame göi sang segment kh¸c"],[4181,"Cßn läc frame ®Æc biÖt theo ®Þa chØ nguån vµ ®Ých th× cã c¸c d¹ng sau: o mét m¸y nµo ®ã ®−îc göi frame ra ngoµi segment cña m¸y ®ã"],[4182,"me ®Õn mét m¸y nµo ®ã"],[4183,"Nhê vËy cã thÓ ng¨n kh«ng cho c¸c m¸y kh¸c cã thÓ th«ng tin liªn l¹c víi mét m¸y nµo ®ã ulticast"],[4184,"§«i khi cã mét qu¶ng b¸ ®i kh¾p m¹ng"],[4185,"Mét c¬n b·o qu¶ng b¸ cã thÓ lµm cho ho¹t ®éng m¹ng trë thµnh con sè 0"],[4186,"Do ®ã nÕu bridge kh«ng thÓ läc bá c¸c gãi qu¶ng b¸ th× c¬n b·o Ngµy nay, bridge cßn cã thÓ läc frame tuú theo giao thøc líp m¹ng ë trªn"],[4187,"§iÒu nµy lµm gi¶m ®i ranh giíi gi÷a bridge vµ router"],[4188,"Router ho¹t ®éng ë líp Bridge vµ switch thùc hiÖn läc frame nh− thÕ nµo VÝ dô: bridge cã thÓ ®−îc cÊu h×nh ®Ó tõ chèi kh«ng chuyÓn tÊt c¶ c¸c frame cã ®Þa chØ nguån tõ mét m¹ng nµo ®ã"],[4189,"C¸c th«ng tin líp 2 th−êng cã ph¶n ¸nh giao thøc líp trªn nªn bri läc frame còng rÊt * Kh«ng ch * Kh«ng cho tÊt c¶ c¸c frame tõ bªn ngoµi göi fra"],[4190,"C¶ hai lo¹i läc frame trªn ®Òu gióp kiÓm so¸t giao th«ng m¹ng vµ t¨ng kh¶ n¨ng b¶o mËt"],[4191,"HÇu hÕt Ethernet bridge ®Òu cã kh¶ n¨ng läc gãi qu¶ng b¸ vµ m thiÕt bÞ nµo ®ã ho¹t ®éng kh«ng b×nh th−êng vµ liªn tôc ph¸t ra c¸c gãi qu¶ng b¸ sÏ cã kh¶ n¨ng x¶y ra"],[4192,""],[4193,"361 m¹ng, sö dông giao thøc ®Þnh tuyÕn ®Ó ph©n luång giao th«ng trªn m¹ng"],[4194,"Cßn bridge sö dông kü thuËt läc c¶i tiÕn dùa trªn th«ng tin líp m¹ng ®−îc gäi lµ brouter"],[4195,"Brouter kh¸c víi router ë chç lµ kh«ng sö dông giao thøc ®Þnh tuyÕn"],[4196,"4.3.5"],[4197,"Ph©n ®o¹n m¹ng LAN b»ng bridge M¹ng Ethernet LAN ®−îc ph©n ®o¹n b»ng bridge lµm gi¶m sè l−îng user trªn mçi segment, do ®ã sÏ t¨ng ®−îc l−îng b¨ng th«ng dµnh cho mçi user"],[4198,"Bridge chia m¹ng ra b»ng c¸ch x©y dùng b¶ng ®i¹ chØ trong ®ã cho biÕt ®Þa chØ cña tõng thiÕt bÞ m¹ng n»m trong segment nµo"],[4199,"Khi ®ã, dùa vµo ®Þa chØ MAC cña frame bridge sÏ cã thÓ quyÕt ®Þnh chuyÓn frame hay kh«ng"],[4200,"Ngoµi ra, bridge thêi gian trÔ trong m¹ng lªn kho¶ng 10% ®Õn 30%, thêi gian trÔ nµy lµ thêi gian ®Ó bridge quyÕt ®Þnh vµ thùc hiÖn chuyÓn m¹ch d÷ liÖu"],[4201,"Bridge chuyÓn m¹ch theo d¹ng nhËn \u2013 råi chuyÓn nªn nã ph¶i nhËn hÕt toµn bé frame, frame cßn ®−îc xem lµ trong suèt ®èi víi c¸c thiÕt bÞ kh¸c trong m¹ng"],[4202,"Bridge lµm t¨ng kiÓm tra ®Þa chØ nguån vµ ®Ých, tÝnh to¸n CRC ®Ó kiÓm tra lçi frame råi míi chuyÓn ®i"],[4203,"NÕu port ®Ých ®ang bËn th× bridge sÏ t¹m thêi l−u frame l¹i cho ®Õn khi port ®Ých ®−îc gi¶i phãng"],[4204,"ChÝnh nh÷ng kho¶ng thêi gian nµy lµm t¨ng thêi gian trÔ vµ lµm chËm qu¸ tr×nh truyÒn trªn m¹ng"],[4205,""],[4206,"362 * Chia nhá m¹ng lµm gi¶m sè l−îng user trªn mét segment"],[4207,"* Bridge nhËn råi chuyÓn frame dùa trªn ®Þa chØ líp 2"],[4208,"363 * §éc lËp víi giao thøc líp 3 * Lµm t¨ng thêi gian trÔ trong m¹ng"],[4209,""],[4210,"364"],[4211,"365 4.3.6"],[4212,"T¹i sao ph¶i ph©n ®o¹n m¹ng LAN Cã hai nguyªn nh©n chÝnh ®Ó chóng ta ph©n ®o¹n m¹ng LAN, thø nhÊt lµ ®Ó ph©n luång giao th«ng gi÷a c¸c segment"],[4213,"Thø hai lµ ®Ó t¨ng l−îng b¨ng th«ng cho mçi user b»ng c¸ch t¹o miÒn ®ông ®é nhá h¬n"],[4214,"NÕu kh«ng ph©n ®o¹n m¹ng LAN, m¹ng LAN lín nhanh chãng bÞ nghÏn m¹ch v× mËt ®é giao th«ng vµ ®ông ®é qu¸ nhiÒu"],[4215,"B¹n cã thÓ sö dông bridge, switch vµ router ®Ó chia nhá m¹ng LAN thµnh nhiÒu segment"],[4216,"Mçi segment lµ mét miÒn ®ông ®é riªng biÖt"],[4217,"Bridge vµ switch cã nhiÒu −u ®iÓm khi sö dông ®Ó chia mét m¹ng lín thµnh nhiÒu ®¬n vÞ ®éc lËp"],[4218,"Bridge vµ switch sÏ gi¶m bít l−îng giao th«ng trªn tÊt c¶ c¸c segment v× chóng chØ chuyÓn mét tØ lÖ giao th«ng nhÊt ®Þnh ra ngoµi mét segment chø kh«ng ph¶i toµn bé"],[4219,"Tuy bridge vµ switch cã thÓ thu hÑp miÒn ®ông ®é nh−ng l¹i kh«ng thu hÑp ®−îc miÒn qu¶ng b¸"],[4220,""],[4221,"366 Mçi mét cæng trªn router kÕt nèi vµo mét m¹ng riªng"],[4222,"Do ®ã, router sÏ chia mét m¹ng LAN thµnh nhiÒu miÒn ®ông ®é nhá h¬n vµ ®ång thêi thµnh nhiÒu miÒn qu¶ng b¸ nhá h¬n v× router kh«ng chuyÓn gãi qu¶ng b¸ trõ phi nã ®−îc cÊu h×nh ®Ó lµm nh− vËy"],[4223,"seg liª m¹ nh Switch chia m¹ng LAN thµnh c¸c miÒn cùc nhá gäi lµ microsegment"],[4224,"Mçi ment nh− vËy lµ mét kÕt nèi ®iÓm - ®Õn - ®iÓm riªng biÖt"],[4225,"Khi cã hai m¸y cÇn n l¹c víi nhau, switch sÏ thiÕt lËp mét m¹ch ¶o gi÷a hai port cña hai m¸y ®ã vµ ch ¶o nµy chØ tån t¹i trong kho¶ng thêi gian cÇn thiÕt cho hai m¸y liªn l¹c víi au th«i"],[4226,""],[4227,"367 4.3.7"],[4228,"Thùc hiÖn ph©n ®o¹n cùc nhá (microsegment) ã thÓ ph©n ®o¹n cùc nhá"],[4229,"B»ng c¸ch ®äc ®Þa chØ MAC ®Ých, switch cã thÓ chuyÓn m¹ch frame ridge"],[4230,"Tuy nhiªn switch cã thÓ chuyÓn m¹ch frame ra port ®Ých tr−íc khi nhËn hÕt toµn bé frame gióp gi¶m thêi gian trÔ vµ t¨ng tèc ®é chuyÓn frame"],[4231,"Ethernet switch chia m¹ng LAN thµnh nhiÒu segment, mçi segment lµ mét kÕt nèi ®iÓm - ®Õn - ®iÓm vµ switch kÕt nèi c¸c segment nµy b»ng m¹ch ¶o"],[4232,"M¹ch ¶o chØ ®−îc thiÕt lËp bªn trong switch vµ tån t¹i khi hai m¸y cÇn liªn l¹c víi nhau th«i"],[4233,"Nhê vËy chuyÓn m¹ch Ethernet cã thÓ lµm t¨ng b¨ng th«ng kh¶ dông trªn m¹ng"],[4234,"MÆc dï LAN switch cã thÓ thu nhá kÝch th−íc miÒn ®ông ®é nh−ng tÊt c¶ c¸c host kÕt nèi vµo switch vÉn n»m trong cïng mét miÒn qu¶ng b¸"],[4235,"Do ®ã, mét gãi qu¶ng b¸ tõ mét m¸y vÉn ®−îc göi ®Õn tÊt c¶ c¸c m¸y kh¸c th«ng qua switch"],[4236,"Switch lµ mét thiÕt bÞ lín liªn kÕt d÷ liÖu gièng nh− brige, cho phÐp kÕt nèi nhiÒu segment LAN vËt lý víi nhau thµnh mét m¹ng lín"],[4237,"T−¬ng tù nh− bridge, switch còng chuyÓn gãi dùa trªn ®Þa chØ MAC"],[4238,"Nh−ng switch chuyÓn m¹ch phÇn cøng chø kh«ng chuyÓn m¹ch b»ng phÇn mÒm nªn nã cã tèc ®é nhanh h¬n"],[4239,"Mçi mét port cña switch cã thÓ ®−îc xem lµ mét brige riªng biÖt víi trän b¨ng th«ng dµnh cho mçi port ®ã"],[4240,"4.3.8"],[4241,"Switch vµ miÒn ®ông ®é Nh−îc ®iÓm lín nhÊt cña m¹ng Ethernet 802.3 lµ ®ông ®é"],[4242,"§ông ®é x¶y ra khi cã hai m¸y truyÒn d÷ liÖu ®ång thêi"],[4243,"Khi ®ông ®é x¶y ra, mäi frame ®ang ®−îc truyÒn ®Òu bÞ ph¸ huû"],[4244,"C¸c m¸y ®ang truyÒn sÏ ng−ng viÖc truyÒn d÷ liÖu l¹i vµ chê LAN switch ®−îc xem lµ bridge ®a port kh«ng cã miÒn ®ông ®é v× nã c víi tèc ®é cao nh− b"],[4245,"368 mét kho¶ng thêi gian ngÉu nhiªn theo quy luËt cña CSMA/CD"],[4246,"NÕu ®ông ®é nhiÒu qu¸ møc sÏ lµm cho m¹ng kh«ng ho¹t ®éng ®−îc"],[4247,"MiÒn ®ông ®é lµ khu vùc mµ frame ®−îc ph¸t ra cã thÓ bÞ ®ông ®é"],[4248,"TÊt c¶ c¸c m«i tr−êng m¹ng chia sÎ víi nhau lµ c¸c miÒn ®ông ®é"],[4249,"Khi kÕt nèi mét m¸y vµo mét port cña switch, switch sÏ t¹o mét kÕt nèi riªng biÖt b¨ng th«ng 10Mb/s cho m¸y ®ã"],[4250,"KÕt nèi nµy lµ mét miÒn ®ông ®é riªng"],[4251,"VÝ dô: nÕu ta kÕt nèi m¸y vµo mét port cña mét switch 12 port th× ta sÏ t¹o ra 12 miÒn ®ông ®é riªng biÖt"],[4252,""],[4253,"369 Switch x©y dùng b¶ng chuyÓn m¹ch b»ng c¸ch ®Þa chØ MAC cña c¸c host kÕt nèi trªn mçi port cña switch"],[4254,"Khi hai host kÕt nèi vµo switch muèn liªn l¹c víi nh p kÕt nèi ¶o gi÷a hai por ªn giao dÞch kÕt thóc"],[4255,""],[4256,"c, Host B vµ Host C muèn liªn l¹c víi nhau switch sÏ thiÕt lËp mét kÕt nèi ¶o gi÷a hai port cña Host B vµ Host C t¹o thµnh mét mic s ét m¹ng chØ cã hai host duy nhÊt, mé do ®ã nã sö dông ®−îc toµn bé b¨ng th«ng kh¶ ông trong m¹ng"],[4257,"®é vµ t¨ng b¨ng th«ng m¹ng v× nã cung cÊp b¨ng th«ng au, switch sÏ t×m trong b¶ng chuyÓn m¹ch cña nã vµ thiÕt lË t cña hai host ®ã"],[4258,"KÕt nèi ¶o nµy ®−îc duy tr× cho ®Õn khi phi Trong vÝ dô h×nh 4.3.8 ro egment"],[4259,"Microsegment ho¹t ®éng nh− m t host göi vµ mét host nhËn, d Switch gi¶m ®ông dµnh riªng cho mçi segment"],[4260,"4.3.9"],[4261,"Switch vµ miÒn qu¶ng b¸ Th«ng tin liªn l¹c trong m¹ng ®−îc thùc hiÖn theo 3 c¸ch"],[4262,"C¸ch th«ng dông nhÊt lµ göi trùc tiÕp tõ mét m¸y ph¸t ®Õn mét m¸y thu"],[4263,""],[4264,"370 C¸ch thø 2 lµ truyÒn multicast"],[4265,"TruyÒn multicast ®−îc thùc hiÖn khi mét m¸y o mét nhãm n»m trong segment"],[4266,"C¸ch thø 3 lµ truyÒn qu¶ng b¸"],[4267,"TruyÒn qu¶ng b¸ ®−îc thùc hiÖn khi mét m¸y nt ®Òu nhËn ®−îc th«ng ®iÖp nµy"],[4268,"t gãi qu¶ng b¸ líp 2 th× ®Þa chØ MAC ®Ých cña fra Víi ®Þa chØ ®Ých nh− vËy muèn göi gãi cho mét m¹ng con, hay ch muèn göi cho tÊt c¶ c¸c m¸y kh¸c trong m¹ng"],[4269,"VÝ dô nh− server giö ®i mét th«ng ®iÖp vµ tÊt c¶ c¸c m¸y kh¸c trong cïng segme Khi mét thiÕt bÞ muèn göi mé me ®ã sÏ lµ FF:FF:FF:FF:FF:FF theo sè thËp lôc ph©n"],[4270,", mäi thiÕt bÞ ®Òu ph¶i nhËn vµ xö lý gãi qu¶ng b¸"],[4271,"MiÒn g líp 2 cßn ®−îc xem miÒn qu¶ng b¸ MAC"],[4272,"MiÒn qu¶ng b¸ MAC tÊt c¶ c¸c thiÕt bÞ trong ame qu¶ng b¸ tõ mét host ®"],[4273,"Switc 2 b¸ th× nã sÏ göi ra tÊt c¶ c¸c port cña nã trõ port nhËn gãi vµo"],[4274,"Mçi thiÕt bÞ nhËn ®−îc gãi qu¶ng b¸ qu¶n bao gåm trong LAN LAN cã thÓ nhËn ®−îc fr ã h lµ mét thiÕt bÞ líp"],[4275,"Khi switch nhËn ®−îc gãi qu¶ng"],[4276,"371 ®Òu ph¶i xö ý th«ng tin n»m trong ®ã"],[4277,"§iÒu nµy lµm gi¶m hiÖu qu¶ ho¹t ®éng cña m¹ng v× tèn ¨ng th«ng cho môc Khi hai switch kÕt nèi víi nhau, kÝch th−íc miÒn qu¶ng b¸ ®−îc t¨ng lªn"],[4278,"VÝ dô nh− h×nh 4.3.9.b-c, gãi qu¶ng b¸ ®−îc göi ra tÊt c¶ c¸c port cña Switch"],[4279,"1 Switch 1 kÕt nèi víi Switch 2"],[4280,"Do ®ã gã kÕt nèi vµo Switch 2"],[4281,"HËu qu¶ lµ l−îng b¨ng th«ng kh¶ dông gi¶m xuèng v× tÊt c¶ c¸c thiÕt bÞ ïng m iÒn qu¶ng b¸ ® l b ®Ých qu¶ng b¸"],[4282,"i qu¶ng b¸ còng ®−îc truyÒn cho tÊt c¶ c¸c thiÕt bÞ trong c ét m Òu ph¶i nhËn vµ xö lý gãi qu¶ng b¸"],[4283,""],[4284,"372 Router lµ thiÕt bÞ líp 3"],[4285,"Router kh«ng chuyÓn tiÕp c¸c gãi qu¶ng b¸"],[4286,"Do ®ã Ro b¸"],[4287,"4.3 c¸c thiÕt bÞ kh¸c cïng kÕt nèi vµo LAN ®ã"],[4288,"M¸y tr¹m chØ ®¬n gi¶n lµ sö dông NIC ®Ó hoÆ Switch lµ thiÕt bÞ líp 2 th«ng minh, cã thÓ häc ®Þa chØ MAC cña c¸c thiÕt bÞ kÕt nèi vµo port cña nã"],[4289,"ChØ ®Õn khi thiÕt bÞ b¾t ®Çu truyÒn d÷ liÖu ®Õn switch th× nã míi häc ®−îc ®Þa chØ MAC cña thiÕt bÞ vµo b¶ng chuyÓn m¹ch"],[4290,"Cßn tr−íc ®ã nÕu thiÕt bÞ ch−a hÒ göi d÷ liÖu g× ®Õn switch th× switch ch−a nhËn biÕt g× vÒ thiÕt bÞ nµy"],[4291,"uter ®−îc sö dông ®Ó chia m¹ng thµnh nhiÒu miÒn ®ông ®é vµ nhiÒu miÒn qu¶ng .10"],[4292,"Th«ng tin liªn l¹c gi÷a Switch vµ m¸y tr¹m Khi mét m¸y tr¹m ®−îc kÕt nèi vµo mét LAN, nã kh«ng cÇn quan t©m ®Õn truyÒn d÷ liÖu xuèng m«i tr−êng truyÒn"],[4293,"M¸y tr¹m cã thÓ ®−îc kÕt nèi trùc tiÕp víi mét m¸y tr¹m kh¸c b»ng c¸p chÐo c lµ kÕt nèi vµo mét thiÕt bÞ m¹ng nh− hub, switch hoÆc router b»ng c¸p th¼ng"],[4294,""],[4295,"373 Tæng kÕt Sau khi kÕt thóc ch−¬ng nµy, b¹n cÇn n¾m ®−îc c¸c ý quan träng sau: * LÞch sö vµ chøc n¨ng cña Ethernet chia sÎ, b¸n song c«ng"],[4296,"* §ông ®é trong m¹ng Ethernet * Microsegment"],[4297,"* CSMA/CD * C¸c yÕu tè ¶nh h−ëng ®Õn ho¹t ®éng m¹ng * Chøc n¨ng cña repeater * Thêi * Chøc n¨ng c¬ b¶n cña Fast Ethernet * Ph©n ®o¹n m¹ng b»ng router, switch, vµ bridge * Ho¹t ®éng c¬ b¶n cña switch * Thêi gian trÔ cña Ethernet switch * Sù kh¸c nhau gi÷a chuyÓn m¹ch líp 2 vµ líp 3 * ChuyÓn m¹ch ®èi xøng vµ bÊt ®èi xøng * Bé ®Öm * ChuyÓn m¹ch kiÓu store \u2013 and \u2013 forward vµ kiÓu cut \u2013 through"],[4298,"* Sù kh¸c nhau gi÷a hub, bridge vµ switch * Chøc n¨ng chÝnh cña switch * C¸c chÕ ®é chuyÓn m¹ch chÝnh cña switch gian truyÒn"],[4299,"374 * TiÕn tr×nh häc ®Þa chØ cña switch * TiÕn tr×nh läc frame * MiÒn ®ông ®é va miÒn qu¶ng b¸"],[4300,""],[4301,"375 CHƯƠNG 5: Switch Giíi thiÖu ThiÕt kÕ m¹ng lµ mét c«ng viÖc ®Çy th¸ch thøc chø kh«ng chØ ®¬n gi¶n lµ kÕt nèi c¸c m¸y tÝnh l¹i víi nhau"],[4302,"Mét hÖ thèng m¹ng ph¶i cã nhiÒu ®Æc ®iÓm nh− ®é tin cËy cao, dÔ dµng qu¶n lý vµ cã kh¶ n¨ng më réng"],[4303,"§Ó thiÕt kÕ mét hÖ thèng m¹ng víi ®Çy ®ñ nh÷ng ®Æc ®iÓm nh− vËy th× ng−êi thiÕt kÕ m¹ng cÇn ph¶i biÕt ®−îc r»ng mçi thµnh phÇn chÝnh trong m¹ng cã mét yªu cÇu thiÕt kÕ riªng biÖt"],[4304,"Sù c¶i tiÕn ho¹t ®éng cña c¸c thiÕt bÞ m¹ng vµ kh¶ n¨ng cña m«i tr−êng m¹ng ®· lµm cho c«ng viÖc thiÕt kÕ m¹ng ngµy cµng trë nªn khã kh¨n h¬n"],[4305,"ViÖc sö dông nhiÒu lo¹i m«i tr−êng truyÒn kh¸c nhau vµ kÕt nèi LAN víi nhiÒu m¹ng bªn ngoµi ®· lµm cho m«i tr−êng m¹ng trë nªn phøc t¹p"],[4306,"Mét m¹ng ®−îc thiÕt kÕ tèt lµ m¹ng ®ã ph¶i t¨ng hiÖu qu¶ ho¹t ®éng h¬n vµ Ýt cã trë ng¹i khi m¹ng ph¸t triÓn lín h¬n"],[4307,"Mét m¹ng LAN cã thÓ tr¶i réng trong mét phßng, trong mét toµ nhµ hay trªn nhiÒu toµ nhµ"],[4308,"Mét nhãm c¸c toµ nhµ thuéc vÒ mét tc, mét ®¬n vÞ th× ®−îc xem nh− lµ mét tr−êng ®¹i häc vËy"],[4309,"ViÖc thiÕt kÕ c¸c m¹ng LAN lín cÇn x¸c ®Þnh c¸c tÇng nh− sau: * TÇng truy cËp: kÕt nèi ng−êi dïng ®Çu cuèi vµo LAN * TÇng ph© −êi dïng ®Çu cuèi LAN cã thÓ Öm vô ®Æc biÖt cña tÇng ®ã"],[4310,"C¸c ®Æc ®iÓm, chøc n¨ng vµ yªu n phèi: cung cÊp c¸c chÝnh s¸ch kÕt nèi gi÷a c¸c ng * TÇng trôc chÝnh: cung cÊp kÕt nèi nhanh nhÊt gi÷a c¸c ®iÓm ph©n phèi"],[4311,"Mçi mét tÇng trªn khi thiÕt kÕ cÇn ph¶i chän lùa switch phï hîp nhÊt ®Ó thùc hiÖn nh÷ng nhi"],[4312,"376 cÇu kü thuËt cña mçi switch tuú thuéc vµo thiÕt kÕ cña mçi tÇng trong LAN"],[4313,"Do ®ã b¹n cÇn n¾m ®−îc vai trß cña mçi tÇng vµ chän lùa switch nh− thÕ nµo cho phï hîp víi tõng tÇng ®Ó b¶o ®¶m ho¹t ®éng tèi −u cho ng−êi dïng trong LAN"],[4314,"Sau khi hoµn tÊt ch−¬ng tr×nh nµy, c¸c b¹n cã thÓ thùc hiÖn ®−îc nh÷ng viÖc sau: * M« t¶ 4 môc tiªu chÝnh trong thiÕt kÕ LAN"],[4315,"* LiÖt kª c¸c ®iÓm quan träng cÇn l−u ý khi thiÕt kÕ LAN"],[4316,"* HiÓu ®−îc c¸c b−íc thiÕt kÕ hÖ thèng LAN * HiÓu ®−îc c¸c vÊn ®Ò n¶y sinh trong thiÕt kÕ cÊu tróc 1,2 vµ 3"],[4317,"* M« t¶ m« h×nh thiÕt kÕ 3 tÇng"],[4318,"* X¸c ®Þnh chøc n¨ng cña tõng tÇng trong m« h×nh 3 tÇng nµy"],[4319,"* LiÖt kª c¸c Cisco switch sö dông cho tÇng truy cËp vµ c¸c ®Æc ®iÓm cña chóng"],[4320,"* LiÖt kª c¸c Cisco switch sö dông cho tÇng ph©n phèi vµ c¸c ®Æc ®iÓm cña chóng"],[4321,"* LiÖt kª c¸c Cisco switch sö dông cho tÇng trôc chÝnh vµ c¸c ®Æc ®iÓm cña chóng"],[4322,"5.1"],[4323,"ThiÕt kÕ LAN 5.1.1"],[4324,"C¸c môc tiªu khi thiÕt kÕ LAN B−íc ®Çu tiªn trong thiÕt kÕ LAN lµ thiÕt lËp vµ ghi l¹i c¸c môc tiªu cña viÖc thiÕt kÕ"],[4325,"Mçi mét tr−êng hîp hay mçi mét tæ chøc sÏ cã nh÷ng môc tiªu riªng"],[4326,"Cßn nh÷ng yªu cÇu sau lµ nh÷ng yªu cÇu th−êng gÆp trong hÇu hÕt c¸c thiÕt kÕ m¹ng:"],[4327,"377 * Kh¶ n¨ng ho¹t ®éng ®−îc: ®−¬ng nhiªn yªu cÇu tr−íc nhÊt lµ m¹ng ph¶i ho¹t ®éng ®−îc"],[4328,"M¹ng ph¶i ®¸p øng ®−îc nh÷ng yªu cÇu c«ng viÖc cña ng−êi dïng, cung cÊp kÕt nèi gi÷a user vµ user, gi÷a user víi c¸c øng dông * Kh¶ n¨ng më réng: m¹ng ph¶i cã kh¶ n¨ng lín h¬n n÷a"],[4329,"ThiÕt kÕ ban ®Çu cã thÓ ph¸t triÓn lín h¬n n÷a mµ kh«ng cÇn nh÷ng thay ®æi c¬ b¶n cña toµn bé thiÕt kÕ"],[4330,"* Kh¶ n¨ng thÝch øng: m¹ng ph¶i ®−îc thiÕt kÕ víi mét c¸i nh×n vÒ nh÷ng kü thuËt ph¸t triÓn trong t−¬ng lai"],[4331,"M¹ng kh«ng nªn cã nh÷ng thµnh phÇn lµm giíi h¹n viÖc triÓn khai c¸c c«ng nghÖ kü thuËt míi vÒ sau nµy"],[4332,"* Kh¶ n¨ng qu¶n lý: m¹ng ph¶i ®−îc thiÕt kÕ ®Ó dÔ dµng qu¶n lý vµ theo dâi nh»m ®¶m b¶o ho¹t ®éng æn ®Þnh cña hÖ thèng"],[4333,"5.1 ng LAN ®· cã cña m×nh hoÆc lËp kÕ ho¹ sù Asynchoronous"],[4334,"Transfer Mode (ATM) ch¼ng h¹n, sù më réng nµy cßn lµ do cÊu tróc phøc t¹p cña LAN khi sö dông chuyÓn m¹ch LAN vµ m¹ng LAN ¶o (VLAN)"],[4335,"g, bµn cÇn quan t©m nh÷ng vÊn ®Ò sau khi thiÕt kÕ LAN: * MiÒn qu¶ng b¸ .2"],[4336,"Nh÷ng ®iÒu cÇn quan t©m khi thiÕt kÕ LAN Cã nhiÒu tæ chøc muèn n©ng cÊp m¹ ch thiÕt kÕ vµ triÓn khai m¹ng LAN míi"],[4337,"Sù më réng trong thiÕt kÕ LAN lµ do ph¸t triÓn víi mét tèc ®é nhanh chãng cña c¸c c«ng nghÖ míi nh− §Ó tèi ®a hiÖu qu¶ ho¹t ®éng vµ l−îng b¨ng th«ng kh¶ dôn * Chøc n¨ng vµ vÞ trÝ ®Æt server * VÊn ®Ò ph¸t hiÖn ®ông ®é * Ph©n ®o¹n m¹ng"],[4338,"378 Server cung cÊp dÞch vô chia sÎ tËp tin, m¸y in, th«ng tin liªn l¹c vµ nhiÒu h vô øng dông kh¸c, server kh«ng thùc hiÖn chøc n¨ng nh− mét m¸y tr¹m th«ng êng"],[4339,"Server ch¹y c¸c hÖ ®iÒu hµnh ®Æc biÖt nh− NetWare, Windows NT, UNIX, dÞc th− vµ Linux"],[4340,"Mçi server th−êng giµnh cho mét chøc n¨ng riªng nh− Emai hoÆc chia sÎ tËp Ser thè hay DNS lµ nh÷ng dÞch vô mµ mäi ng−êi trong tæ chø nhã nh− dïn dis th« ãm lµ ë tr¹m ph©n phèi trung gian gÇn nhãm ng−êi dïng mµ nã phôc vô nhÊt"],[4341,"Nh− vËy giao −ëng ®Õn c¸c m¹ng kh¸c"],[4342,"LAN switch líp 2 ®Æt trong MDF vµ c¸c IDF nªn cã ®−êng h¬n dµnh cho c¸c tin"],[4343,"Server cã thÓ ®−îc ph©n thµnh hai lo¹i: Server toµn hÖ thèng vµ server nhãm"],[4344,"ver toµn hÖ thèng cung cÊp dÞch vô cña nã ®Ó dïng cho mäi ng−êi dïng trong hÖ ng m¹ng"],[4345,"VÝ dô nh− Email c ®Òu cÇn sö dông v× tÝnh chÊt tËp trung cña nh÷ng dÞch vô nµy"],[4346,"Cßn server m th× chØ cung cÊp dÞch vô ®Ó phôc vô cho mét nhãm ng−êi dïng cô thÓ"],[4347,"VÝ dô nh÷ng dÞch vô xö lý vµ chia sÎ tËp tin cã thÓ chØ phôc vô cho mét nhãm ng−êi g nµo ®ã th«i"],[4348,"Server toµn hÖ thèng nªn ®Æt ë tr¹m ph©n phèi chÝnh (MDF \u2013 Main tribution facility)"],[4349,"Giao th«ng h−íng ®Õn server toµn hÖ thèng chØ ®i qua MDF i chø kh«ng ®i qua c¸c m¹ng kh¸c"],[4350,"N¬i ®Æt lý t−ëng cho c¸c server nh th«ng ®Õn c¸c server nµy chØ ®i trong m¹ng riªng cña IDF ®ã mµ kh«ng ¶nh h 100 Mb/s hoÆc server"],[4351,""],[4352,"379 Ethernet node sö dông CSMA/CD"],[4353,"Mçi node ®Òu ph¶i chó ý ®Õn tÊt c¶ c¸c node kh¸c khi truy cËp vµo m«i tr−êng chia sÎ hay cßn gäi lµ miÒn ®ông ®é"],[4354,"NÕu hai node truyÒn d÷ liÖu cïng mét lóc th× ®ông ®é sÏ x¶y ra"],[4355,"Khi ®ông ®é x¶y ra, nh÷ng d÷ liÖu ®ang trªn ®−êng truyÒn sÏ bÞ huû bá vµ mét tÝn hiÖu b¸o nghÏn ®−îc ph¸t ra trong mäi m¸y trong miÒn ®ông ®é"],[4356,"Sau ®ã c¸c node ph¶i chê trong mét kho¶ng thêi gian ngÉu nhiªn råi míi truyÒn l¹i d÷ liÖu cña m×nh"],[4357,"§ông ®é x¶y ra nhiÒu qu¸ cã thÓ gi¶m l−îng b¨ng th«ng kh¶ dung trong m¹ng xuèng kho¶ng 35 \u2013 40%"],[4358,"Do ®ã chóng ta cÇn chia nhá mét miÒn ®ông ®é thµnh nhiÒu miÒn ®ông ®é nhá h¬n, gióp gi¶m miÒn ®ông ®é trªn mçi miÒn vµ t¨ng l−îng b¨ng th«ng kh¶ dông cho mçi user"],[4359,"B¹n cã thÓ sö dông c¸c thiÕt bÞ líp 2 nh− brigde vµ switch ®Ó chia 1 LAN thµnh nhiÒu miÒn ®ông ®é nhá, cßn router ®−îc sö dông ®Ó chia nhá m¹ng ë líp 3"],[4360,""],[4361,"380 Gãi qu¶ng b¸ lµ gãi d÷ liÖu cã ®Þa chØ MAC ®Ých lµ: FF: FF: FF:FF:FF:FF"],[4362,"MiÒn qu¶ng b¸ lµ tËp hîp c¸c thiÕt bÞ cã thÓ nhËn ®−îc gãi qu¶ng b¸ xuÊt ph¸t tõ bÊt kú thiÕt bÞ nµo trong tËp hîp ®ã"],[4363,"TÊt c¶ c¸c thiÕt bÞ nhËn ®−îc ®Òu ph¶i xö lý th«ng tin trong ®ã, viÖc xö lý gãi qu¶ng b¸ nµy lµm gi¶m l−îng b¨ng th«ng cña mçi host"],[4364,"ThiÕt bÞ líp 2 cã thÓ thu nhá kÝch th−íc miÒn ®ông ®é nh−ng kh«ngthÓ thu nhá kÝch th−íc cña miÒn qu¶ng b¸"],[4365,"ChØ cã router míi cã thÓ võa thu nhá kÝch th−íc miÒn ®ông ®é võa thu nhá kÝch th−íc miÒn qu¶ng b¸ ë líp 3"],[4366,""],[4367,"381 5.1.3"],[4368,"Ph−¬ng ph¸p t §Ó cã 1 m¹ng LAN ho¹t ®éng hiÖu qu¶ vµ ®¸p øng ®−îc nhu cÇu cña ng−êi sö dông, LAN cÇn ®−îc thiÕt kÕ vµ triÓn khai theo 1 kÕ ho¹ch víi ®Çy ®ñ hÖ thèng c¸c b−íc sau: * Thu thËp c¸c yªu cÇu vµ mong ®îi cña ng−êi sö dông m¹ng * Ph©n tÝch c¸c d÷ liÖu vµ c¸c yªu cÇu thu thËp ®−îc * ThiÕt kÕ cÊu tróc LAN líp 1, 2 vµ 3 * Ghi nhËn l¹i c¸c b−íc triÓn khai m¹ng vËt lý vµ logic Qu¸ tr×nh thu thËp th«ng tin sÏ gióp cho b¹n x¸c ®Þnh vµ lµm s¸ng tá nh÷ng vÊn ®Ò hiÖn t¹i cña hÖ thèng m¹ng"],[4369,"Nh÷ng th«ng tin nµy cã thÓ bao gåm lÞch sö ph¸t triÓn tæ chøc, t×nh tr¹ng hiÖn t¹i, dù ¸n ph¸t triÓn, chÝnh s¸ch ho¹t ®éng vµ qu¶n lý, hÖ thèng v¨n phßng vµ ph−¬ng thøc lµm viÖc, quan ®iÓm cña nh÷ng ng−êi sÏ sö dông m¹ng LAN"],[4370,"Sau ®©y lµ nh÷ng c©u b¹n nªn hái khi thu thËp th«ng tin: * Nh÷ng ng−êi nµo sÏ sö dông hÖ thèng m¹ng hiÕt kÕ LAN"],[4371,"382 * Kü n¨ng cña hä ë møc nµo"],[4372,"* Quan ®iÓm cña hä vÒ m¸y tÝnh vµ c¸c øng dông m¸y tÝnh lµ g×"],[4373,"* C¸c v¨n b¶n chÝnh s¸ch vÒ tæ chøc ®−îc ph¸t triÓn nh− thÕ nµo"],[4374,"* Cã d÷ liÖu nµo cÇn c«ng bè trong ph¹m vi giíi h¹n kh«ng"],[4375,"* Cã ho¹t ®éng nµo cÇn giíi h¹n kh«ng"],[4376,"* Nh÷ng giao thøc nµo ®−îc phÐp ch¹y trªn m¹ng"],[4377,"* CÇn hç trîc c¸c m¸y tÝnh ®Ó bµn kh«ng"],[4378,"* Ai lµ ng−êi chÞu tr¸ch nhiÖm vÒ ®Þa chØ LAN"],[4379,"§Æt tªn, thiÕt kÕ cÊu tróc vµ cÊu h×nh"],[4380,"n vÒ nh©n lùc, phÇn cøng vµ phÇn mÒm cña tæ chøc lµ nh÷ng g×"],[4381,"Nh÷ng nguån tµi nguyªn nµy hiÖn ®ang ®−îc liªn kÕt vµ chia sÎ nh− thÕ nµo"],[4382,"phÝ vµ kho¶ng thêi gi n thiÕt kÕ LAN"],[4383,"Mét ®iÓm rÊt quan träng mµ b¹n cÇn n¾m ®−îc lµ nh÷ng vÊn ®Ò ho¹t ®éng ®ang tån t¹i trong hÖ thèng m¹ng ®· cã"],[4384,"TÝnh kh¶ dông ®o l−êng møc ®é h÷u Ých cña hÖ thèng m¹ng, cã nhiÒu yÕu tè ¶nh h−ëng ®Õn tÝnh kh¶ dông, bao gåm nh÷ng yÕu tè sau: * Th«ng l−îng * Thêi gian ®¸p øng * Kh¶ n¨ng truy cËp vµo tµi nguyªn m¹ng * Tµi nguyª Nguån tµi chÝnh mµ tæ chøc cã thÓ dµnh cho m¹ng lµ bao nhiªu"],[4385,"Ghi nhËn l¹i toµn bé c¸c yªu cÇu trªn cho phÐp chóng ta −íc l−îng ®−îc chi an ®Ó triÓn khai dù ¸"],[4386,"383 Mçi kh¸ch hµng ®Òu cã ®Þnh nghÜa kh¸c nhau vÒ tÝnh kh¶ dông cña m¹ng"],[4387,"VÝ dô: kh¸ch hµng cÇn truyÒn tho¹i vµ video trªn m¹ng"],[4388,"Nh÷ng dÞch vô nµy ®ßi hái nhiÒu b¨ng th«ng h¬n l−îng b¨ng th«ng ®ang cã trªn m¹ng"],[4389,"§Ó t¨ng l−îng b¨ng th«ng kh¶ dông, cÇn ph¶i thªm nhiÒu tµi nguyªn vµo m¹ng nh−ng nh− vËy th× chi phÝ sÏ t¨ng theo"],[4390,"Do ®ã thiÕt kÕ m¹ng ph¶i lµm sao cung cÊp ®−îc kh¶ n¨ng sö dông lín nhÊt víi chi phÝ thÊp nhÊt"],[4391,"Sau khi ph©n tÝch vÒ tÝnh kh¶ dông, b−íc tiÕp theo lµ ph©n tÝch c¸c yªu cÇu cña hÖ thèng m¹ng vµ ng−êi sö dông m¹ng ®ã"],[4392,"VÝ dô khi cµng cã nhiÒu øng dông m¹ng vÒ tho¹i vµ video th× nhu cÇu vÒ b¨ng th«ng m¹ng cµng t¨ng lªn nhiÒu h¬n"],[4393,"Mét thµnh phÇn n÷a trong b−íc ph©n tÝch nµy lµ ®¸nh gi¸ yªu cÇu cña ng−êi dïng"],[4394,"Mét m¹ng LAN mµ kh«ng thÓ cung cÊp th«ng tin nhanh chãng vµ chÝnh x¸c cho ng−êi sö dông lµ mét m¹ng LAN v« dông"],[4395,"Do ®ã yªu cÇu cña tæ chøc vµ yªu cÇu cña c¸c nh©n viªn trong tæ chøc ®ã ph¶i gÆp nhau"],[4396,"B−íc kÕ tiÕp lµ quyÕt ®Þnh cÊu tróc tæng thÓ cña LAN thÓ tho¶ m·n mäi yªu cÇu cña ng−êi sö dông"],[4397,"Trong gi¸o ng ta chØ tËp trung vµo cÊu tróc h×nh Sao vµ h×nh sao më réng"],[4398,"CÊu tróc h×nh Sao vµ h×nh sao më réng sö dông kü thu thè ThiÕt kÕ cÊu tróc LAN cã thÓ ®−îc ph©n thµnh 3 b−íc theo 3 m« h×nh OSI nh vËt lý vµ luËn lý cña hÖ thèng m¹ng"],[4399,"CÊu tróc vËt lý cña m¹ng lµ s¬ ®å kÕt nèi vËt lý cña c¸c tr×nh nµy, chó Ët Ethernet 802,3 CSMA/CD"],[4400,"CÊu tróc h×nh Sao CSMA/CD ®ang lµ cÊu h×nh ng trÞ hiÖn nay"],[4401,"− sau: \u2022 Líp M¹ng \u2022 Líp liªn kÕt d÷ liÖu \u2022 Líp vËt lý B−íc cuèi cïng trong thiÕt kÕ LAN lµ ghi nhËn l¹i c¸c cÊu tróc"],[4402,"384 thµ m¹ng"],[4403,"Nã còng bao gåm c¶ s¬ ®å tªn vµ ®Þa chØ ®−îc sö dông trong thiÕt kÕ LAN"],[4404,"nh phÇn trong m¹ng LAN"],[4405,"Cßn thiÕt kÕ luËn lý lµ c¸ch ph©n dßng d÷ liÖu trong S¬ ®å thiÕt kÕ LAN Hå s¬ thiÕt kÕ LAN bao gåm nh÷ng thµnh phÇn quan träng sau: \u2022 S¬ ®å cÊu tróc theo líp OSI \u2022 S¬ ®å LAN luËn lý \u2022 S¬ ®å LAN vËt lý \u2022 B¶ng ¸nh x¹ vÞ trÝ, ®Þa chØ vµ t×nh tr¹ng sö dông cña tõng thiÕt bÞ trong LAN (cut - sheet) \u2022 S¬ ®å VLAN luËn lý \u2022 S¬ ®å luËn lý líp 3 \u2022 S¬ ®å ®Þa chØ"],[4406,"385"],[4407,"386 Mét trong nh÷ng phÇn quan träng nhÊt mµ b¹n cÇn quan t©m khi thiÕt kÕ m¹ng lµ c¸p vËt lý"],[4408,"HiÖn nay, hÇu hÕt c¸p sö dông cho LAN ®Òu dùa trªn c«ng nghÖ Fast Ethernet"],[4409,"Fast Ethernet lµ Ethernet ®−îc n©ng cÊp tõ 10Mb/s lªn 100 Mb/s vµ cã kh¶ n¨ng ho¹t ®éng song c«ng"],[4410,"Fast Ethernet vÉn sö dông cÊu tróc luËn lý h×nh bus h−íng qu¶ng b¸ chuÈn Ethernet cña 10BASE \u2013 T vµ ph−¬ng ph¸p CSMA/CD cho ®Þa chØ MAC"],[4411,""],[4412,"387 Nh÷ng vÊn ®Ò trong thiÕt kÕ líp 1 bao gåm lo¹i c¸p sö dông, th−êng lµ c¸p ®ång hay c¸p quang vµ cÊu tróc tæng thÓ cña hÖ thèng c¸p"],[4413,"Mçi tr−êng c¸p líp 1 cã nhiÒu lo¹i nh− 10/100 BASE \u2013 TX CAT5, 5e hoÆc 6 UTP, STP, 100 BASE \u2013 FX c¸p quang vµ chuÈn TIA/EIA \u2013 568 \u2013 A vÒ c¸ch bè trÝ vµ kÕt nèi d©y"],[4414,"B¹n nªn ®¸nh gi¸ cÈn thËn ®iÓm m¹nh ®iÓm m¹nh vµ yÕu cña cÊu tróc m¹ng v× mét hÖ thèng m¹ng tån t¹i víi chÝnh hÖ thèng c¸p bªn d−íi cña nã"],[4415,"HÇu hÕt c¸c sù cè m¹ng ®Òu x¶y ra ë líp 1"],[4416,"Do ®ã khi cã bÊt kú dù ®Þnh thay ®æi quan träng nµo th× b¹n cÇn kiÓm tra toµn bé hÖ thèng c¸p ®Ó x¸c ®Þnh khu vùc cÇn n©ng cÊp hoÆc ®i d©y l¹i"],[4417,""],[4418,"388 B¹n nªn sö dông c¸p quang cho c¸c ®−êng trôc chÝnh trong thiÕt kÕ c¸p UTP CAT 5e nªn sö dông cho ®−êng c¸p horizotal, lµ nh÷ng ®−êng c¸p nèi tõ hép c¾m d©y cña mçi host kÐo vÒ tr¹m tËp trung d©y"],[4419,"ViÖc n©ng cÊp c¸p cÇn ph¶i ®−îc thùc hiÖn −u tiªn so víi c¸c thay ®æi cÇn thiÕt kh¸c"],[4420,"Ngoµi ra b¹n cÇn ®¶m b¶o lµ toµn bé hÖ thèng c¸p t−¬ng thÝch víi chuÈn c«ng nghiÖp nh− chuÈn TIA/EIA \u2013 568 \u2013 A ch¼ng h¹n"],[4421,"ChuÈn TIA/EIA \u2013 568 \u2013 A quy ®Þnh r»ng mäi thiÕt bÞ trong m¹ng cÇn ®−îc kÕt nèi vµo mét vÞ trÝ trung t©m b»ng c¸p horizontal"],[4422,"Kho¶ng c¸ch giíi h¹n cña c¸p CAT 5e lµ UTP lµ 100m"],[4423,"Trong cÊu tróc h×nh sao ®¬n chØ cã mét tñ nèi d©y lµ MDF"],[4424,"Tõ hép c¾m d©y cña mçi host (Outlet) Õt nèi vµo c¸c bé tËp onnect patch panel) ®Æt trong MDF"],[4425,"Patch cord ta kÐp c¸p horizaontal vÒ MDF råi k trung d©y HCC (Horizontal Cross C lµ nh÷ng sîi c¸p ng¾n ®−îc sö dông ®Ó kÕt nèi c¸p horizontal vµo por cña switch líp 2"],[4426,"Tuú theo phiªn b¶n switch, ®−êng uplink sÏ kÕt nèi tõ switch vµo cæng Ethernet cña router líp 3 b»ng c¸p patch cord"],[4427,"Nh− vËy lµ host ®Çu cuèi ®· cã kÕt nèi vËt lý hoµn chØnh vµo cæng cña router"],[4428,""],[4429,"389 Khi hÖ thèng m¹ng lín, cã nhiÒu host n»m ngoµi giíi h¹n 100m cña c¸p hñ"],[4430,"Tñ nèi d©y thø hai ®−îc gäi lµ tr¹m ph©n n 10 m cña c¸p CAT 5e UTP"],[4431,"CAT 5e UTP th× b¹n cÇn cã nhiÒu h¬n mét tñ nèi d©y"],[4432,"B»ng c¸ch thiÕt lËp nhiÒu tñ nèi d©y b¹n sÏ t¹o ra nhiÒu vïng bao p phèi trung gian IDF (Intermediate distribution facilities)"],[4433,"ChuÈn TIA/EIA \u2013 568 \u2013 A quy ®Þnh r»ng IDF ®−îc kÕt nèi vµo MDF b»ng c¸p vertical hay cßn gäi lµ c¸p trôc chÝnh (backbone)"],[4434,"C¸p vertical ®−îc kÐo tõ IDF ®Õn MDF vµ ®−îc kÕt nèi vµo bé tËp trung c¸p VCC (Vertical Cros Connect patch panel) ®Æt trong MDF"],[4435,"Chóng ta th−êng sö dông c¸p quang cho ®−êng c¸p vertical v× ®−êng c¸p nµy th−êng dµi h¬n giíi h¹"],[4436,"390"],[4437,"391 S¬ ®å luËn lý lµ s¬ ®å cÊu tróc m¹ng nh−ng kh«ng m« t¶ chÝnh x¸c c¸c chi tiÕt å ®−êng ®i c¬ b¶n cña LAN bao gåm vÞ trÝ ®Æt MDF vµ IDF \u2022 dô: thª \u2022 vµ l¾p ®Æt ®−êng c¸p"],[4438,"S¬ ®å luËn lý chØ lµ s¬ ® nh÷ng thµnh phÇn sau: \u2022 X¸c ®Þnh \u2022 Ghi l¹i lo¹i c¸p vµ sè l−îng sö dông ®Ó kÕt nèi c¸c IDF vµ MDF Ghi l¹i sè l−îng c¸p ®Ó dµnh ®Ó t¨ng b¨ng th«ng gi÷a c¸c tñ nèi d©y"],[4439,"VÝ nÕu c¸p vertical gi÷a IDF 1 vµ MDF ch¹y hÕt 80% th× sÏ sö dông m 2 cÆp c¸p n÷a ®Ó t¨ng gÊp ®«i b»ng th«ng"],[4440,"Cung cÊp hå s¬ chi tiÕt vÒ tÊt c¶ c¸c c¸p trong hÖ thèng, chØ sè danh ®Þnh sè port cña chóng trªn HCC hoÆc VCC"],[4441,""],[4442,"392 S¬ h×nh 5.1.4.h- chó nèi vµ ®Þn thÓ 3 ®Ó thiÕt lËp l¹i kÕt nèi 5.1 khiÓn luång, ph¸t hiÖn lçi, söa lçi vµ gi¶m nghÏn m¹ch"],[4443,"Hai thiÕt bÞ líp 2 phæ biÕn nhÊt lµ bridge vµ switch"],[4444,"ThiÕt bÞ l ®ông ®é"],[4445,"®å luËn lý rÊt quan träng khi xö lý sù cè vÒ kÕt nèi m¹ng"],[4446,"VÝ dô nh− trªn i: nÕu phßng 203 bÞ mÊt kÕt nèi th× b»ng c¸ch kiÓm tra trong cut sheet ng ta sÏ x¸c ®Þnh ®−îc c¸p nèi tõ phßng nay ®Õn IDF lµ c¸p sè 203 \u2013 1 vµ kÕt o port sè 13 trªn HCC trong IDF"],[4447,"Sö dông ®ång hå ®o c¸p chóng ta sÏ x¸c h ®o¹n c¸p nµy cã bÞ h− háng vÒ mÆt vËt lý hay kh«ng"],[4448,"NÕu cã th× chóng ta cã sö dông 2 s¬i c¸p dù phßng cßn l¹i lµ 203 \u2013 2 hoÆc 203 \u2013 trong thêi gian chê söa ch÷a c¸p 203 \u2013 1"],[4449,".5"],[4450,"ThiÕt kÕ líp 2"],[4451,"Môc ®Ých cña thiÕt bÞ líp 2 trong m¹ng lµ ®iÒu íp 2 sÏ quyÕt ®Þnh kÝch th−íc miÒn §ông ®é vµ kÝch th−íc miÒn ®ông ®é lµ hai yÕu tè ¶nh h−ëng xÊu ®Õn hiÖu qu¶ nªn chia nhá m¹ng thµnh c¸c miÒn ®ông ®é (microsegment) b»ng switch vµ bridge ®Ó gi¶m ®ông ®é vµ kÝch th−íc miÒn ®ông ®é"],[4452,"Chóng ta cã thÓ sö dông switch kÕt hîp víi hub ®Ó cung cÊp møc ®é ho¹t ®éng hîp lý ho¹t ®éng cña m¹ng"],[4453,"Do ®ã chóng ta cña m¹ng"],[4454,"Do ®ã chóng ta nªn chia nhá m¹ng thµnh c¸c miÒn ®ông ®é cùc nhá cho mçi nhãm user vµ server kh¸c nhau"],[4455,""],[4456,"393 M t ®Æc ®iÓm quan träng cña LAN switch é lµ nã cã thÓ ph©n bæ b¨ng th«ng t 100Mb/s"],[4457,"trªn tõng port"],[4458,"Nhê ®ã nã cã thÓ dµnh nhiÒu b¨ng th«ng h¬n cho ®−êng vertical, uplink hoÆc ®−êng kÕt nèi vµo server"],[4459,"Lo¹i chuyÓn m¹ch nh− vËy gäi lµ chuyÓn m¹ch bÊt ®èi xøng"],[4460,"ChuyÓn m¹ch bÊt ®èi xøng thùc hiÖn chuyÓn m¹ch gi÷a c¸c port cã b¨ng th«ng kh«ng b»ng nhau, vÝ dô tõ port 10Mb/s sang por §−êng vertical kÕt nèi tõ IDF ®Õn MDF ®Ó truyÒn d÷ liÖu gi÷a MDF vµ IDF"],[4461,"Dung l−îng ®−êng vertical th−êng lín h¬n ®−êng horizontal"],[4462,"§−êng horizontal nèi gi÷a IDF vµ m¸y tr¹m th−êng sö dông c¸p CAT 5e UTP vµ dµi kh«ng qu¸ 100mÐt"],[4463,"Trong m«i tr−êng m¹ng th«ng th−êng, ®−êng horizontal cã b¨ng th«ng 10 Mb/s vµ sö dông switch chuyÓn m¹ch bÊt ®èi xøng ®Ó kÕt hîp port 10 Mb/s vµ 100 Mb/s"],[4464,""],[4465,"394 NhiÖm vô tiÕp theo lµ quyÕt ®Þnh sè l−îng port 10Mb/s vµ 100 Mb/s cÇn sö dông trong MDF vµ mçi IDF"],[4466,"Ta cã thÓ quyÕt ®Þnh sè l−îng nµy dùa vµo yªu cÇu cña user vÒ sè l−îng c¸p horizontal ®i vµo mçi phßng vµ tæng sè l−îng c¸p ®æ vµo mçi vïng bao phñ"],[4467,"§ång thêi chóng ta còng tÝnh lu«n sè l−îng ®−êng vertical cÇn thiÕ IDF phôc vô cho mét vïng bao phñ gåm 18 phßng"],[4468,"Nh− vËy cÇn tæng céng lµ 4* 18 = 72 port trªn LAN switch trong mçi IDF"],[4469,"−íc miÒn ®ông ®é x¸c ®Þnh bëi sè l−îng host ®−îc kÕt nèi vËt lý vµo cïn tõng host"],[4470,"Trong ®iÒu kiÖn lý t−ëng lµ ta kÕt nèi mét host vµo mét port cña switch t¹o hos microsegment"],[4471,"NÕu kh«ng ®ñ ®iÒu kiÖn ®Ó lµm vËy th× b¹n cã thÓ sö dông hub ®Ó kÕt c¸c host kÕt nèi vµo hub trªn t b¨ng th«ng vµ cïng mét miÒn ®ông ®é"],[4472,"t"],[4473,"VÝ dô: user yªu cÇu ph¶i cã 4 ®−êng horizontal ®i vµo mçi phßng"],[4474,"Mçi mét KÝch th g mét port cña switch"],[4475,"Tõ ®ã ta cã thÓ x¸c ®Þnh l−îng b¨ng th«ng kh¶ dông cho thµnh mét microsegment chØ bao gåm host nguån vµ host ®Ých khi cã bÊt kú hai t nµo thùc hiÖn th«ng tin liªn l¹c víi nhau"],[4476,"Do ®ã, kh«ng cã ®ông ®é trong nèi nhiÒu host vµo mét port cña switch"],[4477,"Nh− vËy tÊt c¶ cïng mét port cña switch chia sÎ cïng mé Do ®ã ®ông ®é cã thÓ x¶y ra"],[4478,""],[4479,"395 − Catalyst 1700 ch¼ng h¹n kh«ng hç trî chia sÎ b¨ng th«ng vµ miÒn ®ông ®é"],[4480,"Switch ®êi cò kh«ng l−u ®−îc nhiÒu ®Þa chØ MAC cho mét port nªn hËu qu¶ lµ sinh ra nhiÒu qu¶ng b¸ vµ c¸c yªu cÇu ARP"],[4481,"Mét sè switch ®êi cò nh"],[4482,"396 Ta th−êng sö dông hub ®Ó t¹o nhiÒu ®iÓm kÕt nèi ®Çu cuèi vµo mét ®−êng c¸p ®ông ® o yªu horizontal"],[4483,"BiÖn ph¸p nµy cã thÓ chÊp nhËn ®−îc nh−ng nªn cÈn thËn v× miÒn é nªn gi÷ æ kÝch th−íc nhá ®Ó cung cÊp ®ñ l−îng b¨ng th«ng cho host the cÇu cña thiÕt kÕ"],[4484,""],[4485,"397 t bÞ m¹nh nhÊt trong cÊu tróc m¹ng"],[4486,"kh¸c"],[4487,"chia hÖ thèng m¹ng thµnh c¸c subnet theo ®Þa chØ líp 3"],[4488,"Router lµ thiÕt bÞ líp 3 vµ ®−îc coi lµ mét trong nh÷ng thiÕ ThiÕt bÞ líp 3 ®−îc sö dông ®Ó chia m¹ng LAN thµnh nhiÒu m¹ng riªng biÖt"],[4489,"ThiÕt bÞ líp 3 cho phÐp th«ng tin liªn l¹c gi÷a 2 m¹ng th«ng qua ®Þa chØ líp 3, vÝ dô nh− ®Þa chØ IP"],[4490,"TriÓn khai thiÕt bÞ líp 3 cho phÐp chia nhá m¹ng LAN vÒ mÆt vËt lý vµ luËn lý"],[4491,"Router cßn cã thÓ kÕt nèi WAN nh− nèi ra Internet ch¼ng h¹n"],[4492,"§Þnh tuyÕn líp 3 ph©n luång giao th«ng gi÷a c¸c m¹ng vËt lý dùa trªn ®Þa chØ líp 3"],[4493,"Router kh«ng chuyÓn tiÕp c¸c gãi qu¶ng b¸ vÝ dô nh− gãi yªu cÇu ARP ch¼ng h¹n"],[4494,"Do ®ã mçi cæng trªn router ®−îc xem lµ cöa vµo vµ cöa ra cña mét miÒn qu¶ng b¸, lµ n¬i kÕt thóc cña qu¶ng b¸, ng¨n kh«ng cho qu¶ng b¸ sang c¸c m¹ng Router ®−îc xem lµ bøc t−êng löa ®èi víi gãi qu¶ng b¸"],[4495,"Ngoµi ra router cßn Khi b¹n muèn quyÕt ®Þnh sö dông router hay switch ë ®©u th× b¹n nªn nhí c©u hái sau: \u201cVÊn ®Ò mµ b¹n ®ang cÇn gi¶i quyÕt ë ®ã lµ g×?\u201d NÕu vÊn ®Ò liªn quan ®Õn giao thøc h¬n lµ sù tranh chÊp th× router lµ gi¶i ph¸p phï hîp"],[4496,"Router cã thÓ gi¶i quyÕt c¸c vÊn ®Ò liªn quan ®Õn møc ®é qu¶ng b¸ qu¸ nhiÒu, giao thøc kh«ng c©n ®èi, c¸c vÊn ®Ò vÒ b¶o mËt vµ ®Þa chØ líp m¹ng"],[4497,"Router m¾c tiÒn h¬n vµ khã cÊu h×nh h¬n so víi switch"],[4498,""],[4499,"398 H×nh 5.1.5.b lµ mét vÝ dô vÒ hÖ thèng m¹ng cã nhiÒu m¹ng vËt lý kh¸c nhau"],[4500,"n M¹ng 2 ®Òu ph¶i ®i qua router"],[4501,"Trong h×nh nµy, chóng s¬ ®å ®Þa chØ líp 3 riªng biÖt"],[4502,"Trong s¬ ®å ®i d©y c¸c líp 1, mçi m¹ng vËt lý ®−îc t¹o ra dÔ dµng b»ng c¸ch kÕt nèi c¸p tæng qu¸t vÒ hÖ thèng m¹ng vµ ¸nh x¹ chóng vµo s¬ ®å vËt lý ®Ó sö dông khi xö lý cè"],[4503,"Mäi d÷ liÖu tõ M¹ng 1 ®Õ ta cã hai miÒn qu¶ng b¸"],[4504,"Mçi miÒn cã mét horizontal vµ vertical vµo switch líp 2"],[4505,"Sau ®ã c¸c m¹ng vËt lý nµy ®−îc kÕt nèi vµo router lµm t¨ng kh¶ n¨ng b¶o mËt h¬n v× mäi giao th«ng ®i vµo hoÆc ®i ra mét LAN ®Òu ph¶i qua router"],[4506,"Sau khi b¹n ®· chia s¬ ®å IP cho client xong th× b¹n nªn lËp hå s¬ ®Ó ghi nhËn l¹i mét c¸ch râ rµng vµ ®Çy ®ñ"],[4507,"B¹n nªn ®Æt mét sè quy −íc chung cho nh÷ng ®Þa chØ cña c¸c host quan träng trong m¹ng"],[4508,"S¬ ®å ®Þa chØ cÇn ®−îc thèng nhÊt vµ hoµ hîp trªn toµn bé hÖ thèng m¹ng"],[4509,"B¹n nªn lËp hå s¬ ®Þa chØ ®Ó cã mét c¸i nh×n sù"],[4510,"399"],[4511,"400 VLAN lµ mét kü thuËt kÕt hîp chuyÓn m¹ch líp 2 vµ ®Þnh tuyÕn líp 3 ®Ó giíi h¹n miÒn ®ông ®é vµ miÒn qu¶ng b¸"],[4512,"VLAN cßn ®−îc sö dông ®Ó b¶o mËt gi÷a c¸c nhãm VLAN theo chøc n¨ng cña mçi nhãm"],[4513,"\u2022 Ph©n nhãm user theo phßng ban, ®éi nhãm vµ c¸c øng dông th−êng dïng"],[4514,"\u2022 Router cung cÊp th«ng tin liªn l¹c gi÷a c¸c VLAN víi nhau"],[4515,""],[4516,"401 C¸c port vËt lý ®−îc nhãm vµo mét VLAN"],[4517,"VÝ dô nh− h×nh 5.1.5.h, port P1, P4, P5 ®−îc nhãm vµo VLAN.1"],[4518,"VLAN.2 cã c¸c port P2, P3, P5"],[4519,"Th«ng tin liªn l¹c gi÷a VLAN.1"],[4520,"VLAN.2 b¾t buéc ph¶i th«ng qua router"],[4521,"Nhê vËy kÝch th−íc miÒn ®ông ®é gi¶m xuèng vµ router lµ n¬i quyÕt ®Þnh cho VLAN.1"],[4522,"vµ VLAN.2 cã thÓ nãi chuyÖn víi nhau"],[4523,"5.2"],[4524,"LAN switch 5.2.1"],[4525,"ChuyÓn −îc c¸c yªu cÇu cña mét tæ chøc èi m¹ch LAN vµ tæng qu¸t vÒ tÇng truy cËp §Ó x©y dùng mét m¹ng LAN tho¶ m·n ® võa vµ lín, b¹n cÇn sö dông m« h×nh thiÕt kÕ ph©n cÊp"],[4526,"M« h×nh thiÕt kÕ ph©n cÊp sÏ lµm cho thiÕt kÕ m¹ng thay ®æi dÔ dµng khi tæ chøc ph¸t triÓn lín h¬n n÷a"],[4527,"M« h×nh nµy cã 3 tÇng nh− sau: \u2022 TÇn truy cËp: Cung cÊp kÕt nèi vµo hÖ thèng m¹ng cho user \u2022 TÇng ph©n phèi: Cung cÊp chÝnh s¸ch kÕt n \u2022 TÇng trôc chÝnh: Cung cÊp vËn chuyÓn tèi −u gi÷a c¸c site"],[4528,"402 M« h×nh ph©n cÊp nµy cã thÓ ¸p dông cho bÊt kú thiÕt kÕ m¹ng nµo"],[4529,"§iÒu quan träng lµm b¹n cÇn thÊy r»ng 3 tÇng nµy tån t¹i víi thµnh phÇn vËt lý riªng biÖt, râ rµng"],[4530,"Mçi tÇng ®−îc ®Þnh nghÜa ®Ó ®¹i diÖn cho nh÷ng chøc n¨ng mµ chóng t erver m¸y tÝnh ®ã sÏ ®−îc dµnh trän b¨ng th«ng trªn nèi vµo hub ®ã"],[4531,"Chøc n¨ng cña tÇng truy cËp cßn bao gåm c¶ läc líp MAC vµ thùc hiÖn ph©n ®o¹n cùc nhá"],[4532,"Läc líp MAC cã nghÜa lµ switch chØ chuyÓn frame ra ®óng port kÕt nèi vµo thiÕt bÞ ®Ých mµ th«i"],[4533,"Switch cßn cã thÓ t¹o ra c¸c segment líp 2 rÊt nhá gäi lµ microsegment"],[4534,"Mçi segment nh− vËy chØ cã 2 thiÕt bÞ"],[4535,"§©y lµ kÝch th−íc nhá nhÊt cã thÓ ®−îc cña mét miÒn ®ông ®é"],[4536,"thùc hiÖn trong m¹ng"],[4537,"TÇng truy cËp lµ ®iÓm kÕt nèi vµo m¹ng cña m¸y tr¹m vµ server"],[4538,"Trong LAN, thiÕt bÞ ®−îc sö dông ë tÇng truy cËp cã thÓ lµ switch hoÆc hub"],[4539,"NÕu sö dông hub th× b¨ng th«ng sÏ bÞ chia sÎ"],[4540,"NÕu sö dông switch th× b¨ng th«ng sÏ ®−îc dµnh riªng cho mçi port"],[4541,"NÕu chóng ta nèi mét m¸y tr¹m hoÆc mé s vµo mét port cña switch th× kÕt nèi cña port ®ã"],[4542,"NÕu kÕt nèi hub vµo mét port cña switch th× b¨ng th«ng trªn port ®ã sÏ chia sÎ cho mäi thiÕt bÞ kÕt"],[4543,"403 5.2.2"],[4544,"Switch sö dông ë tÇng truy cËp Switch tÇng truy cËp ho¹t ®éng ë líp 2 cña m« h×nh OSI vµ cung cÊp mét sè Þch vô nh− VLAN ch¼ng h¹n"],[4545,"Môc tiªu chÝnh cña switch tÇng truy cËp lµ cho phÐp ng−êi dïng ®Çu cuèi truy cËp vµo m¹ng"],[4546,"B¹n nªn chän switch tÇng truy cËp thùc hiÖn chøc n¨ng nµy víi chi phÝ thÊp vµ ®é c¶m nhËn trªn port cao"],[4547,"Sau ®©y lµ mét sè dßng switch cña Cisco th−êng ®−îc dïng ë tÇng truy cËp: \u2022 Catalyst 1900 \u2022 Catalyst 2820 \u2022 Catalyst 2950 \u2022 Catalyst 4000 \u2022 Catalyst 5000 Dßng Catalyst 1900 vµ 2820 lµ nh÷ng thiÕt bÞ truy cËp hiÖu qu¶ cho hÖ thèng m¹ng võa vµ nhá"],[4548,"Dßng switch Catalyst 2950 cung cÊp ®−êng truy cËp hiÖu qu¶ ¬n cho server vµ nhiÒu b¨ng th«ng h¬n cho ng−êi dïng nhê c¸c port Fast Ethernet"],[4549,"ßng Catalyst 4000 vµ 5000 cã port Gigabit Ethernet lµ thiÕt bÞ ®Ó truy cËp hiÖu qu¶ cho c¸c m¹ng lín"],[4550,"d h D"],[4551,"404"],[4552,"405 TÇng ph©n phèi n»m gi÷a tÇng truy cËp vµ tÇng trôc chÝnh gióp x¸c ®Þnh vµ cho phÐp c¸c gãi d÷ liÖu ®−îc di chuyÓn trong ®ã"],[4553,"ë tÇng nµy, hÖ thèng m¹ng ®−îc \u2022 X¸c ®Þnh miÒn qu¶ng b¸ hay miÒn multicast ph©n biÖt víi hÖ thèng trôc chÝnh"],[4554,"Môc tiªu cña tÇng ph©n phèi lµ cung cÊp giíi h¹n chia thµnh nhiÒu miÒn qu¶ng b¸, ®ång thêi ¸p dông c¸c chÝnh s¸ch vÒ truy cËp, läc gãi d÷ liÖu t¹i ®©y"],[4555,"TÇng ph©n phèi gióp c« lËp sù cè trong ph¹m vi mét nhãm vµ ng¨n kh«ng cho sù cè t¸c ®éng vµo tÇng trôc chÝnh"],[4556,"Switch trong tÇng nµy ho¹t ®éng ë líp 2 vµ 3 cña m« h×nh OSI"],[4557,"Tãm l¹i, tÇng ph©n phèi thùc hiÖn c¸c chøc n¨ng sau: \u2022 §Þnh tuyÕn VLAN"],[4558,"406 \u2022 ChuyÓn ®æi m«i tr−êng m¹ng nÕu cÇn \u2022 B¶o mËt"],[4559,"5.2.4"],[4560,"Switch sö dông ë tÇng ph©n phèi: Switch tÇng ph©n phèi lµ ®iÓm tËp trung cho c¸c switch tÇng truy cËp"],[4561,"Do ®ã, c¸c switch tÇng nµy ph¶i g¸nh toµn bé l−îng giao th«ng tõ c¸c thiÕt bÞ tÇng truy cËp nªn chóng ph¶i cã n¨ng lùc ho¹t ®éng cao"],[4562,"Switch tÇng ph©n phèi lµ ®iÓm kÕt thóc cho miÒn qu¶ng b¸"],[4563,"TÇng nµy tËp trung giao th«ng cña VLAN vµ c¸c chÝnh s¸ch ®Ó quyÕt ®Þnh dßng ch¶y cña giao th«ng"],[4564,"Do ®ã, switch cña tÇng ph©n phèi ho¹t ®éng ë c¶ líp 2 vµ 3 trong m« h×nh OSI"],[4565,"Switch trong tÇng nµy th−êng lµ switch ®a líp"],[4566,"Switch ®a líp lµ sù kÕt hîp chøc n¨ng cña router vµ switch vµo chung trong mét thiÕt bÞ"],[4567,"Chóng ®−îc thiÕt kÕ ®Ó chuyÓn m¹ch giao th«ng víi hiÖu suÊt ho¹t ®éng cao h¬n mét router th«ng th−êng"],[4568,"NÕu c¸c switch nµy kh«ng cã router module g¾n trong nã th× b¹n cã c hiÖn chøc n¨ng p 3"],[4569,"i: thÓ sö dông mét router riªng bªn ngoµi ®Ó thù lí Sau ®©y lµ c¸c dßng switch cña Cisco phï hîp víi tÇng ph©n phè \u2022 Catalyst 2926G \u2022 Catalyst 5000 \u2022 Catalyst 6000"],[4570,"407 4.1.1"],[4571,"Tæng qu¸t vÒ tÇng trôc chÝnh: TÇng trôc chÝnh ®−îc chuyÓn m¹ch tèc ®é cao"],[4572,"NÕu switch tÇng nµy kh«ng cã router module g¾n trong th× b¹n cã thÓ sö dông router riªng bªn ngoµi ®Ó thùc hiÖn c¸c chøc n¨ng líp 3"],[4573,"TÇng nµy ®−îc thiÕt kÕ lµ kh«ng thùc hiÖn bÊt kú ho¹t ®éng c¶n trë gãi nµo v× nh÷ng ho¹t ®éng c¶n trë gãi d÷ liÖu nh− danh s¸ch kiÓm tra truy cËp ch¼ng h¹n sÏ lµm chËm tèc ®é chuyÓn m¹ch gãi"],[4574,"CÊu tróc tÇng trôc chÝnh nªn cã c¸c ®−êng dù phßng ®Ó æn ®Þnh ho¹t ®éng m¹ng, tr¸nh t×nh tr¹ng chØ cã mét ®iÓm trung t©m duy nhÊt"],[4575,"TÇng trôc chÝnh ®−îc thiÕt kÕ sö dông chuyÓn m¹ch líp 2 hoÆc líp 3"],[4576,"B¹n cã thÓ sö dông switch ATM hoÆc Ethernet cho tÇng nµy"],[4577,"5.2.6"],[4578,"Switch sö dông ë tÇng trôc chÝnh"],[4579,"TÇng trôc chÝnh lµ x−¬ng sèng cña hÖ thèng m¹ng"],[4580,"Switch trong tÇng nµy cã thÓ sö dông mét sè c«ng nghÖ líp 2"],[4581,"NÕu kho¶ng c¸ch gi÷a c¸c switch cã thÓ sö dông c«ng nghÖ Ethernet"],[4582,"Mét sè c«ng nghÖ líp 2 kh¸c nh− chuyÓn m¹ch tÕ bµo ATM (Asynchoronous Transfer Mode) còng cã thÓ ®−îc sö dông"],[4583,"Trong thiÕt kÕ m¹ng, tÇng trôc chÝnh còng cã thÓ ®Þnh tuyÕn líp 3 nÕu cÇn thiÕt"],[4584,"Khi chän lùa ¶ switch cho tÇng nµy b¹n cÇn quan t©m ®Õn nh÷ng yÕu tè nh− sù cÇn thiÕt, gi¸ c vµ kh¶ n¨ng ho¹t ®éng"],[4585,"Sau ®©y lµ mét sè dßng Switch cña Cosco phï hîp cho tÇng trôc chÝnh:"],[4586,"408 \u2022 Catalyst 6500 \u2022 Catalyst 8500 \u2022 IGX 8400 \u2022 Lighstream 1010"],[4587,"409 Tæng kÕt Sau khi kÕt thóc ch−¬ng tr×nh nµy, b¹n cÇn n¾m ®−îc c¸c ®iÓm quan träng sau: \u2022 Bèn môc tiªu chÝnh trong thiÕt kÕ LAN \u2022 C¸c vÊn ®Ò cÇn quan t©m chÝnh yÕu trong thiÕt kÕ LAN"],[4588,"\u2022 Nh÷ng vÊn ®Ò trong thiÕt kÕ Líp 1, 2 vµ 3"],[4589,"\u2022 M« h×nh thiÕt kÕ 3 tÇng \u2022 Chøc n¨ng cña mçi tÇng trong m« h×nh 3 tÇng nµy \u2022 Cisco switch trong tÇng truy cËp vµ c¸c ®Æc ®iÓm cña chóng"],[4590,"\u2022 Cisco switch trong tÇng ph©n phèi vµ c¸c ®Æc ®iÓm cña chóng \u2022 Cisco switch trong tÇng trôc chÝnh vµ c¸c ®Æc ®iÓm cña chóng - Kiểm tra các hiển thị của quá trình khởi động switch bằng HyperTerminal"],[4591,"- Sử dụng tính năng trợ giúp của giao tiếp dòng lệnh"],[4592,"- Liệt kê các ch - Kiểm tra cấu hình mặc định của Catalyst switch"],[4593,"\u2022 C¸c b−íc trong thiÕt kÕ LAN ế độ dòng lệnh cơ bản của switch"],[4594,""],[4595,"410 - Đặt địa chỉ IP và cổng mặc định cho switch để cho phép kết nối và quản lý switch qua mạng"],[4596,"- Xem các cài đặt trên switch bằng một trình duyệt Web"],[4597,"- Cài đặt tốc độ và hoạt động song công trên port của switch"],[4598,"- Kiểm tra và quản lý bảng địa chỉ MAC của switch - Cấu hình bảo vệ port"],[4599,"- Quản lý tập tin cấu hình và IOS"],[4600,"- Thực hiện khôi phục mật mã trên switch - Nâng cấp IOS của switch"],[4601,"6 6.1.1"],[4602,"Bắt đầu với phần vật lý của switch .1"],[4603,"Bắt đầu với switch Switch là một máy tính đặc biệt cũng có bộ xử lý trung tâm (CPU), RAM (Random access memory), và hệ điều hành"],[4604,"Switch có các port dành cho mục đích kết nối host và có một số port đặc biệt chỉ dành cho mục đích quản lý switch"],[4605,"Bạn có thể xem và thay đổi cấu hình switch bằng cách kết nối vào cổng console"],[4606,"Switch thường không có công tắc điện để bật tắt mà nó chỉ có cắm dây điện hay không cắm dây điện mà thôi"],[4607,""],[4608,"411 6 Đèn báo hiệu LED trên switch .1.2"],[4609,"ặt tr theo dõi switchự hoạt động của switch : \u2022 \u2022 \u2022 Port Mode LED: LED chế độ port"],[4610,"\u2022 rt, hiển thị trạng thái của port đó tùy theo chế độ hiển thị LE c cấp nguồn và hoạt động tốt, RP ạng thái port"],[4611,"Để chọn các chế độ hiển thị trạng thái khác nhau, bạn nhấn nút Mode một hoặc LED chế độ port Màu của các LED trạng thái trên từng port Mô tả M ước của switch có một sô đèn báo hiệu LED ( Light-Emitting Diode) giúp bạn System LED: LED hệ thống"],[4612,"Remote Power Supply (RPS): LED nguồn điện từ xa"],[4613,"Port Status LED: LED trạng thái port"],[4614,"Mỗi port của switch có một đèn LED nằm ở phía trên po được cài đặt ở nút Mode"],[4615,"D hệ thống cho biết hệ thống đã đượ S LED cho biết switch có sử dụng bộ nguồn bên ngoài hay không"],[4616,"LED chế độ port cho biết chế độ hiển thị hiện tại của các LED tr nhiều lần cho đến khi LED chế độ port hiển thị đúng chế độ mà bạn muốn"],[4617,"LED trạng thái port hiển thị các giá trị khác nhau tùy theo chế độ được cài đặt trên nút Mode"],[4618,"Tắt Không có kết nối Màu xanh Kết nối đang hoạt động STAT (Trạng thái hoạt động) Màu xanh nhấp nháy Port đang truyền và nhận dữ liệu"],[4619,"412 Lúc màu xanh lúc màu cam Kết nối đang bị lỗi Màu cam Port không thực hiện chuyển gói vì nó đã bị tắt chức năng này, hoặc có địa chỉ bị vi phạm cấu hình, hoặc bị khóa do giao thức Spanning Tree"],[4620,"Tắt Cứ mỗi một LED trên mỗi port bị tắt có nghĩa là tổng băng thông sử dụng giảm xuống một nửa"],[4621,"Các đèn LED sẽ được tắt lần lượt từ phải sang trái"],[4622,"Nếu một LED đầu tiên bên phải bị tắt có nghĩa là switch đang sử dụng dưới 50% tổng băng thông"],[4623,"Nếu 2 LED đầu tiên bên phải bị tắt có nghĩa là switch đang sử dụng dưới 25% tổng băng thông"],[4624,"UTL (mức độ oạt đ Màu xanh Nếu tất cả các LED trên port đều xanh có nghĩa là switch đang sử dụng >= 50% tổng băng thông h ộng của switch ) Tắt Port tương ứng đang ở chế độ bán song công ( half-dupplex) FDUP (Full- duplex) Màu xanh Port tương ứng đang ở chế độ song công Tắt Port tương ứng đang hoạt động ở tốc độ 0Mb/s 1100 (Tốc độ) Màu xanh Port tương ứng đang hoạt động ở tốc độ 100Mb/s"],[4625,"413 6.1.3"],[4626,"Kiểm tra LED trong suốt quá trình khởi động switch Khi bắt đầu cắm điện, switch sẽ tiến hành một loạt các bước kiểm tra gọi là tự kiểm tra khi bật nguồn POST ( Power-On Self Test)"],[4627,"POST tự động kiểm tra các thành phần phần cứng để đảm bảo switch hoạt động đúng"],[4628,"LED hệ thống sẽ cho biết quá trình POST kết thúc thành công hay bị lỗi"],[4629,"Khi switch mới được cắm điện, quá trình POST đang chạy thì LED hệ thống còn tắt"],[4630,"Nếu sau đó LED hệ thống bật lên màu xanh có nghĩa là quá trình POST đã kết thúc thành công"],[4631,"Nếu LED hệ thống bật lên màu vàng có nghĩa là quá trình POST đã gặp lỗi"],[4632,"POST gặp lỗi thường là những lỗi vật lý nghiêm trọng"],[4633,"switch không thể hoạt động tin cậy nếu POST bị lỗi"],[4634,"trạng thái trên mỗi 30 giây là quá trinhd switch đang phát hiện cấu trúc mạng và dò tìm vòng lặp"],[4635,"Nếu sau đó LED trạng thái trên port chuyển sang màu xanh có nghĩa switch đã thiết lập được kết nối trê thái trên port tắt có nghĩa là sw switch, bạn cần kết nối một máy tính vào switch để thiết lập phiên giao tiếp"],[4636,"Bạn có thể dùng cáp rollover để nối từ cổn LED trạng thái của các port cũng thay đổi trong suốt quá trình POST"],[4637,"LED port sẽ bật lên màu cam trong khoảng n port đó với hệ thống mạng"],[4638,"Nếu LED trạng itch nhận thấy không có gì cắm vào port này cả"],[4639,"6.1.4"],[4640,"Xem các thông tin hiển thị trong quá trình khởi động switch Để cấu hình hoặc kiểm tra trạng thái của g console ở mặt sau của switch vào cổng COM trên máy tính"],[4641,""],[4642,"414 Hình 6.1.4.a"],[4643,"Kết nối máy tính vào cổng console của switch Hình 6.1.4.b"],[4644,"415 Sau mà bạn kết nối máy tính vào đó bạn chạy HyperTerminal trên máy tính"],[4645,"Trước tiên, bạn phải đặt tên cho kết nối để bắt đầu cấu hình phiên giao tiếp HyperTerminal với switch"],[4646,"Sau đó bạn gặp hộp thoại như hình 6.1.4.b, chọn cổng COM switch rồi nhấn nút OK"],[4647,"Bạn gặp một hộp thoại tiếp theo như hình 6.1.4.c, chọn các thông số như trên hình rồi ấn nút OK"],[4648,""],[4649,"416 Hình 6.1.4.c"],[4650,"Cài đặt thông số cho HyperTerminal Cắm điện cho switch"],[4651,"Các thông tin về quá trình khởi động switch sẽ hiện ra trên màn hình HyperTerminal"],[4652,"Những thông tin này bao gồm thông tin về switch, chi tiết về trạng thái POST và dữ liệu về phần cứng của switch"],[4653,""],[4654,"417 Sau khi switch hoàn tất quá trình POST và khởi động xong, dấu nhắc của phần đối thoại cấu hình hệ thông sẽ xuất hiện"],[4655,"Bạn có thể cấu hình switch bằng tay hoặc với sự trợ giúp của phần đối thoại cấu hình"],[4656,"Phần đối thoại cấu hình trên switch đơn giản hơn trên router"],[4657,""],[4658,"418 Hình 6.1.4.d"],[4659,"Thông tin hiển thị của quá trình khởi động switch"],[4660,"6.1.5"],[4661,"Chức năng trợ giúp của giao tiếp CLI trên switch Giao tiếp dòng lệnh (CLI-Command-Line Interface) của Cisco switch rất giống với giao tiếp dòng lệnh của Cisco router"],[4662,"Lệnh help có thể được gọi một cách ngắn gọn bằng dấu chấm hỏi (?)"],[4663,"Khi bạn nhập dấu chấm hỏi tại dấu nhắc của hệ thống, switch sẽ hiển thị danh sách các lện Hình 6.1.5"],[4664,"Lệnh help trong chế độ EXEC người dùng"],[4665,"Lệnh help có thể được sử dụng một cách linh hoạt"],[4666,"Để tìm danh sách các lệnh bắt đầu với các ký tự mà bạn cần, bạn nhập các ký tự đó rồi liền tiêp sau đó là dấu chấm hỏi (?), không chừa khoảng trắng giữa các ký tự với dấu chấm hỏi"],[4667,"Khi đó bạn sẽ có kết quả hiển thị là danh sách các câu lệnh bắt đầu bằng các ký tự mà bạn vừa mới nhập vào"],[4668,"h mà bạn có thể sử dụng trong chế độ dòng lệnh hiện tại bạn đang ở"],[4669,""],[4670,"419 Để hiện thị các từ khóa hoặc các tham số của một lệnh nào đó, bạn nhập câu lệnh đó, cách một khoảng trắng rồi điền dấu chấm hỏi (?)"],[4671,"switch sẽ hiện thị các từ khóa hoặc tham số được sử dụng tại vị trí của dấu chấm hỏi trong câu lệnh đó"],[4672,"6.1.6"],[4673,"Các chế độ dòng lệnh của switch Switch có một chế độ dòng lệnh"],[4674,"Chế độ mặc định là chế độ EXEC người dùng"],[4675,"Chế độ này có dấu nhắc đại diện lớn hơn (>)"],[4676,"Các lệnh trong chế độ EXEC người dùng rất giới hạn trong việc thay đổi cài đặt đầu cuối, kiểm tra cơ bản và hiện thị thông tin hệ thống"],[4677,"Lệnh enable được sử dụng để di chuyển từ chế độ EXEC người dùng sang chế độ EXEC đặc quyền"],[4678,"Chế độ EXEC đặc quyền có dấu nhắc là dấu thăng (#)"],[4679,"Các lệnh sử dụng được trong chế độ này cũng bao gồm tất cả các lệ h của chế độ EXEC e cho phép bạn truy cập vào các chế độ cấu hình sâu hơn"],[4680,"Bắt đầu từ chế độ EXEC đặc ạn có thể cấu hình switch , do đó chế độ này cần được bảo vệ bằng đặt mật mã thì bạn sẽ được yêu cầu nhập mật mã trước khi vào được chế độ EXEC đặc qu Lệnh Giải thích n người dùng và còn có thêm lệnh configure"],[4681,"Lệnh configur quyền là b mật mã để cấm việc sử dụng ngoài ý muốn"],[4682,"Nếu người quản trị mạng yền"],[4683,"Khi bạn nhập mật mã, mật mã se không hiển thị trên màn hình"],[4684,"Show version Xem các thông tin về phần cứng và phần xác ule nào, phần mềm nào"],[4685,"mềm"],[4686,"Được sử dụng để xác định chính switch đang sử dụng mod Show running-config Hiển thị tập tin cấu hình đang chạy của switch Show interfaces Hiển thị trạng thái hoạt động của mỗi port, số lượng gói vào/ra và bị lỗi trên port đó"],[4687,"Show interface status Hiển thị chế độ hoạt động của port"],[4688,"420 Show controllers ethernet- Xem số lượng frame bị hủy bỏ, bị controller trì hoãn, bị lỗi, bị đụng độ\u2026 Show port Xem thông tin về quá trình tự kiểm tra khi t nguồn của switch (POST) bậ 6.2 u hình mặc định của Catalyst switch Khi mới cắm điện lần đầu tiên, switch chỉ có tập tin cấu hình mặc định"],[4689,"Tên mặc định của switch là Switch"],[4690,"Không mật mã nào được cài đặt ở đường console và vty"],[4691,""],[4692,"Cấu hình switch 6.2.1"],[4693,"Kiểm tra cấ Hình 6.2.1.a"],[4694,"Cấu hình mặc định của switch"],[4695,"421 Bạn nên đặt mộ trên cổng giả lập VLAN 1 để quản lý ặc định là switch không có địa chỉ IP nào cả"],[4696,"Tất cả các port của switch được đặt ở chế độ tự động và đều nằm trong VLAN 1"],[4697,"t địa chỉ IP cho switch switch"],[4698,"M VLAN 1 và VLAN quản lý theo mặc định của switch"],[4699,"Mặc định, trong thư mục flash lưu IOS, có một file tên là env_vars và một thư mục con tên là html"],[4700,"Sau khi switch đã được cấu hình, trong thư mục này sẽ có thêm tập tin config.text và vlan.dat là tập tin cơ sở dữ liệu của VLAN"],[4701,"Hình 6.2.1.b"],[4702,"Đặc điểm mặc định của các port trên switch"],[4703,"422 Hình 6.2.1.c"],[4704,"Cấu hình mặc định của VLAN"],[4705,"423 Hình 6.2.1.d"],[4706,"Nội dung mặc định của thư mục flash"],[4707,"Bạn có thể kiểm tra phiên bản IOS và giá trị cho thanh ghi cấu hình bằng lệnh sho ặc nhiên chạy tự động trên switch cho phép switch xây dựng cấu trúc không vòng lặp trên toàn bộ mạng LAN"],[4708,"w version"],[4709,"Mặc định, switch chỉ có một miền quảng bá và chúng ta chỉ có thể quản lý và cấu hình switch thông qua cổng console"],[4710,"Giao thức Spanning-Tree cũng m"],[4711,"424 Hình 6.2.1.e Đối với mạng nhỏ thì cấu hình mặc đinh là đủ"],[4712,"Switch vẫn thực hiện microsegment ngay, không cần cấu hình gì thêm"],[4713,"6.2 hế đô EXEC người dùng hoặc chế độ EXEC đặc quyền"],[4714,"Để có thể Tro đặc quyền là Switch#, còn của chế độ EXEC người dùng là Switch>"],[4715,".2"],[4716,"Cấu hình Catalyst switch Switch có thể đã được cấu hình trước đó và chúng ta có thể cần phải có mật mã để vào được c cấu hình switch chúng ta phải bắt đầu từ chế độ EXEC đặc quyền"],[4717,"ng giao tiếp dòng lệnh (CLI), dấu nhắc mặc định của chế độ EXEC"],[4718,"425 Sa \u2022 Xóa mọi thông tin về cơ sở dữ liệu đang có của VLAN bằng các xóa tập tin startup- config"],[4719,"u đây là các bứớc bạn cần thực hiện để đảm bảo là cấu hình mới sẽ được thay thế cho cấu hình cũ: tin vlan.dat trong thư mục flash"],[4720,"\u2022 Xóa tập tin cấu hình dự phòng của switch bằng cách xóa tập \u2022 Khởi động lại switch"],[4721,"Hình 6.2.2.a Xóa mọi cấu hình cũ trên switch Ghi hồ sơ, bảo mật và quản lý là những công việc hết sức quan trọng đối với mọi thiết bị mạng"],[4722,"Chúng ta nên đặt tên cho switch và đặt mật mã cho đường console và vty"],[4723,"Để có thể truy cập vào switch bằng Telnet hay bằng các ứng dụng TCP/IP khác thì bạn cần đặt một địa chỉ IP và kh witch"],[4724,"VLAN 1 là VLAN quản lý mặc định của switch"],[4725,"Tất cả các thiết bị mạng đều được đặt trong ai báodefault gateway cho s VLAN quản lý"],[4726,"Nhờ đó, từ một máy trạm quản lý bạn có thể truy cập, cấu hình và quản lý tất cả các thiết bị liên mạng"],[4727,""],[4728,"426 Hì Mặc định, Fast Ethernet Port được đặt ở chế độ tự động về tốc độ và song công"],[4729,"Do đó các nh 6.2.2.b"],[4730,"Đặt tên và mật mã trên đường console và vty, đặt địa chỉ IP và default gateway"],[4731,"port này sẽ tự động thỏa thuận các thông số với thiết bị kết nối vào nó"],[4732,"Nếu người quản trị mạng muốn chắc chắn một port nào đó có tốc độ và chế độ song công như ý mình muốn thì có thể cấu hình bằng tay cho port đó"],[4733,""],[4734,"427 Các thiết bị mạng thông minh có thể giao tiếp được bằng Web để cấu hình và quản lý chúng"],[4735,"Sau khi switch đã được cấu hình địa chỉ IP và gateway, chúng ta có thể truy c ch bằng địa chỉ IP của switch và port 80 là port mặc định của HTTP"],[4736,"Bạn có thể mở ập vào switch bằng web"],[4737,"Trình duyệt web truy cập và dịch vụ này trên swit hoặc tắt dịch vụ HTTP trên switch và có thể chọn port khác cho dịch vụ này"],[4738,"Hình 6.2.2.c"],[4739,"Cấu hình tốc độ và chế độ song công cho port cho Hình 6.2.2.d"],[4740,"Mở dịch vụ HTTP và chọn port cho dịch vụ này trên switch"],[4741,""],[4742,"428 Hình 6.2.2.e"],[4743,"Giao diện web của switch"],[4744,""],[4745,"429 Hình 6.2.2.f"],[4746,"Giao diện quản lý web"],[4747,"6.2.3"],[4748,"Switch n vào từ mỗi port"],[4749,"Các địa chỉ MAC học đư ỉ MAC"],[4750,"Những gói dữ liệu nào có địa chỉ MAC đích nằm trong bảng này sẽ được chuyển mạch ra đúng port đích"],[4751,"Quản lý bằng địa chỉ MAC học địa chỉ MAC của các thiết bị kết nối vào port của nó bằng cách kiểm tra địa chỉ nguồn của gói dữ liệu mà nó nhậ ợc sẽ được ghi vào bảng địa ch Hình 6.2.3.a"],[4752,"430 Để kiểm tra các địa chỉ mà switch đã học được, bạn dùng lệnh show mac-address- table trong chế độ EXEC đặc quyền"],[4753,"Switch có thể tự động học vào bảo trì hàng ngàn địa chỉ MAC"],[4754,"Để tiết kiệm bộ nhớ giúp tối ưu hóa hoạt đ óa đi khi thiết bị tương ứng đã bị ngắt kết nối khỏi port, hoặc bị tắt điện hoặc đã được huyển sang port khác trên cùng switch đó hoặc trên switch khác"],[4755,"Cho dù vì lý do gì đi n được gói dữ liệu nào có địa chỉ MAC đó nữa thì switch sẽ tự động xóa địa chỉ đó sau 300 gi Thay vì chờ bảng địa chỉ tự động bị xóa vì hết thời hạn thì người quản trị mạng có thể xó cấu hình trước ộng của switch, các địa chỉ MAC học được nên x c ữa, nếu có một địa chỉ MAC nào đó trong bảng mà switch không nhận ây"],[4756,"a bảng địa chỉ MAC bằng lệnh clear mac-address-table trong chế độ EXEC đặc quyền"],[4757,"Ngay cả những địa chỉ MAC do chính người quản trị mạng đó cũng bị xóa bằng lệnh này"],[4758,"Hình 6.2.3.b 6.2.4"],[4759,"Cấu hình địa chỉ MAC cố định Bạn có thể quy đó của switch"],[4760,"Lý d một trong ết đinh gán một địa chỉ MAC cố định cho một port nào o để gán cố định một địa chỉ MAC cho một port có thể là những lý do sau:"],[4761,"431 \u2022 AC không bị xóa tự động do hết thời hạn trên bằng địa \u2022 ột máy trạm đặc biệt nào đó của user đựơc kết nối vào một địa chỉ MAC của máy này không đổi"],[4762,"\u2022 Tăng khả năng bảo mật"],[4763,"Để kh ỉ MAC cố định cho switch, bạn dùng lệnh sau: umber> vlan Giúp cho địa chỉ M chỉ Một server hay m port trên switch và ai báo một địa ch Switch ( config)#mac-address-table static <mac-address of host> interface FastEthernet <Ethernet n Để xóa một địa chỉ MAC cố định đã được khai báo bạn dùng dạng no của câu lênh trên 6.2.5"],[4764,"Cấu hình port bảo vệ Bảo vệ hệ thống mạng là một trách nhiệm quan trọng của người quản trị mạng"],[4765,"vào m switch tầng truy cập là có khả năng truy cập dễ dàng nhất từ các ổ cắm dây đặt ở các phòng"],[4766,"Bất kỳ người nào cũng có thể cắm PC hoặc máy tính xách tay của mình ột trong những ổ cắm dây này"],[4767,"Do đó trên switch có một đặc tính gọi là port bảo vệ giúp giới hạn số lượng địa chỉ mà switch có thể học trên một port"],[4768,"Bạn có thể cấu hình cho switch thực hiện một động tác nào đó khi số lượng địa chỉ học được trên port đó vượt quá giới hạn cho phép"],[4769,"Địa chỉ MAC bảo vệ có thể được khai báo cố định"],[4770,"Tuy nhiên việc khai báo cố định điạ chỉ MAC bảo vệ rất phức tạp và dễ gây ra lỗi"],[4771,""],[4772,"432 Thay vì khai báo địa chỉ MAC bảo vệ cố định thì bạn có thể thực hiện như sau"],[4773,"Trước tiên là bật chế độ port bảo vệ trên port mà bạn muốn"],[4774,"Số lượng địa chỉ MAC trên port đó giới hạn là 1 thôi"],[4775,"Như vậy địa chỉ MAC đầu tiên mà switch tự động học được sẽ trở thành địa chỉ cần bảo vệ"],[4776,"Để kiểm tra mạng trạng thái của port bảo vệ, bạn dùng lệnh show port security"],[4777,"Hình 6.2.5 Các bước cơ bản để cấu hình port bảo vệ: 1"],[4778,"Vào chế độ cấu hình của port mà bạn cần"],[4779,"2"],[4780,"mở chế độ truy cập cho port đó"],[4781,"3"],[4782,"mở chế độ port bảo vệ"],[4783,"4"],[4784,"Giới hạn số lượng địa chỉ MAC bảo vệ trên port đó (thường giới hạn 1 địa chỉ MAC ) 5"],[4785,"Chỉ định loại địa chỉ MAC bảo vệ là địa chỉ cố định (static), học tự động (dynamic) hay sticky"],[4786,"\u2022 Static: là địa chỉ MAC do người quản trị mạng khai báo cố định bằng tay"],[4787,"Sau khi khai báo xong, địa chỉ này được lưu cố định trong bảng địa chỉ và không có giới hạn về thời hạn lưu giữ"],[4788,"Ngay cả khi switch bị mất điện, khởi động lại cũng không xóa mất địa chỉ cố định"],[4789,"\u2022 Dynamic: là địa chỉ MAC do switch tư động học được"],[4790,"Loại địa chỉ động này được lưu có thời hạn trên switch"],[4791,"Nếu trong một khoảng thời gian nhất định mà switch không nhận được gói dữ liệu nào có địa chỉ MAC đó nữa thì nó sẽ xóa địa chỉ này ra khỏi bảng"],[4792,""],[4793,"433 \u2022 Sticky: là địa chỉ MAC c được tự động nhưng sau khi học xong thì switch ghi địa chỉ này cố đinh vào bảng luôn và không xóa c hiện động tác đóng port (Shutdown) hoặc treo port hể để cấu hình port bảo vệ trên mỗi dòng switch khác nhau sẽ khác nhau nhưng nhìn chung đều theo các bước cơ bản như trên"],[4794,"Sau đây là ví dụ về cấu hình port bảo vệ trên switch 2950: ALSwitch (config)#interface fastethernet 0/4 ALSwitch (config-if)# switchport port-security"],[4795,"Aging Port-security aging commands Mac-address Secure mac address Maximum Max secure addrs Violation Security Violation Mode <cr> ALSwitch (config-if)# switchport mode access ALSwitch (config-if)# switchport port-security ximum 1 AL Thêm, bớt, chuyển đổi switch Kh au cho switch : \u2022 Default gateway"],[4796,"do switch họ điạ chỉ đó nữa ngay cả khi switch bị tắt điện và khởi động lại"],[4797,"6"],[4798,"Cấu hình cho switch thự (Restrict) khi số lượng địa chỉ MAC học được trên port đó vượt quá giới hạn cho phép"],[4799,"Câu lệnh cụ t ALSwitch (config-if)# switchport port-security ma Switch (config-if)# switchport port-security mac-address sticky ALSwitch (config-if)# switchport port-security violation shutdown 6.2.6"],[4800,"i thêm một switch mới vào hệ thống mạng, bạn cần cấu hình các thông tin s \u2022 Tên switch \u2022 Địa chỉ IP của switch trong VLAN quản lý"],[4801,""],[4802,"434 \u2022 Mật mã cho các đường truy cập switch"],[4803,"Khi chuyển một host từ port này sang port khác hoặc sang switch khác, bạn cũng hình port bảo vệ và cấu hình port bảo vệ cho port mới của host đó"],[4804,"ủa S c ng trên một server nội bộ để sau đó có thể tải về bộ nhớ flash khi cần thiết"],[4805,"ủa chế độ EXEC đặc quyền được cài đặt bằng lênh ạn truy cập về mặt vật lý được nhưng lại không thể vào được chế độ EXEC người dùng hoặc đặc uyền Sau đây là các bước thực hiện để khôi phục mật mã trên switch 2900: xong màn hình HyperTerminal"],[4806,"2"],[4807,"Tắt điện của switch đi"],[4808,"Sau đó bạn vừa nhấn nút Mode ở mặt trước của switch vừa cắm điện lại cho switch"],[4809,"Khi nào LED STAT trên switch tắt đi thì bạn mới buông nút Mode ra"],[4810,"3"],[4811,"Khi đó trên màn hình HyperTerminal sẽ có hiện thị như sau: C2950 Boot Loader (C2950-HBOOT-MAC) Version nên xóa một số cấu hình có thể gây tác động không tốt ở vị trí cũ và thêm cấu hình mới cho vi trí mới của host"],[4812,"Ví dụ khi chuyển một host đang kết nối vào một port có chế độ bảo vệ sang port khác hoặc switch khác, thì ở port cũ bạn nên xóa cấu 6.2.7"],[4813,"Quản lý tập tin hoạt động hệ thống của switch Nhà quản trị mạng luôn phải lập hồ sơ và bảo trì các tập tin hoạt động hệ thống c các thiết bị mạng"],[4814,"Tập tin cấu hình hoạt động mới nhất nên được lưu dự phòng ra server hoặc ra đĩa"],[4815,"Tập tin này không chỉ là thông tin nhạy cảm mà còn rất hữu dụng khi cần khôi phục lại cấu hình cho thiết bị mạng"],[4816,"IO ũng nên được lưu dự phò 6.2.8"],[4817,"Khôi phục mật mã trên switch 1900/2950 Vì lý do quản lý và bảo mật, switch thường được đặt mật mã trên đường console và vty"],[4818,"Ngoài ra còn có mật mã c enable password hoặc enable secret password"],[4819,"Mật mã này giúp đảm bảo chỉ có nhưng user được phép mới có thể truy cập vào chế độ EXEC người dùng và đặc quyền trên switch"],[4820,"Tuy nhiên có một số tình huống bạn cần truy cập vào switch nhưng b q vì không biết hoặc quên mật mã"],[4821,"Trong những trường hợp như vậy bạn cần phải khôi phục lại mật mã trên switch"],[4822,"1"],[4823,"Đảm bảo rằng bạn đã kết nối PC của mình vào cổng console trên switch và đã mở"],[4824,"435 12.1 (11r) EA1, RELEASE SOFT (fc1) Compiled Mon 22-Jul-02 18:57 by antonio WS-C2950-24 starting\u2026 Base ethernet MAC Address: 00:0a:b7:72:2b:40 Xmodem file system is available"],[4825,"The system has been interrupted prior to initializing the flash files System"],[4826,"The following commands will initialize the flash files system"],[4827,"And finish loading the operating system software: Flash_init Lo Bo r Di Ch câu lệnh thứ lash: sẽ cho biết nội dung của thư mục flash"],[4828,"Mặc định, tên c ục flash sẽ có tên là config.text 5"],[4829,"Bạn đổi định dạng tên của tập tin cấu hình như sau: Re 6"],[4830,"ad_helper ot 4"],[4831,"Để khởi động tập tin hệ thống và kết thúc quá trình tải hệ điều hành, bạn nhập các lệnh sau theo thứ tự như sau: Flash_init Load_helpe r flash: ú ý: Không được quên dấu hai chấm (:) ở liền sau chữ flash trong 3 ở trên"],[4832,"Kết quả hiện thị của lệnh dir f ủa tập tin cấu hình switch lưu trong thư m"],[4833,"name flash:config.text flash:config.old Sau đó bạn gõ lệnh boot để khởi động lại switch"],[4834,"436 Lú i định dạng nên switch không tải được tập tin cấu hình"],[4835,"Do đó sau khi khởi động xong bạn sẽ gặp câu thoại cấu hìn Continue with the configuration dialog"],[4836,"[yes/no] : N Sau đó bạn sẽ vào được chế độ EXEC người dùng và đặc quyền mà không gặp mậ 7"],[4837,"8"],[4838,"Sau đó cho switch chạy tập tin cấu hình này bằng cách copy tập tin cấu hình Switch#copy flash:config.text system Source filename [config.text]?[enter] Destination filenam c náy switch sẽ tải tập tin cấu hình xuống RAM để chạy"],[4839,"Khi đó bạn có Al isco AlSwitch (config-l AlSwitch (config-line)#exit config)#exit Al Destination filename [startup-config]?[enter] Building configuration\u2026"],[4840,"[OK] c này tập tin cấu hình của switch đã bị đổ h của switch như sau, bạn nhập ký tự N cho câu hỏi này: t mã nữa"],[4841,"Bạn trả lại tên cũ cho tập tin cấu hình bằng lệnh như sau: Rename flash:config.old flash:config.text này lên RAM: :ruinning-config e [ruinning-config] [enter] 9"],[4842,"Lú thể thay đổi mật mã nếu muốn: Switch#configure terminal AlSwitch (config)#no enable secret AlSwitch (config)#enable password c AlSwitch (config)#line console 0 ine)#password cisco AlSwitch ( Switch#copy ruinning-config startup-config"],[4843,"437 AlSwitch# 10"],[4844,"Bạn tắt điện cho switch rồi bật lại để kiểm tra xem mật mã mới đã được áp dụng đúng chưa"],[4845,"Nếu chưa đúng thì bạn thực hiện quá trình trên lại từ đầu"],[4846,"6.2.9"],[4847,"Nâng cấp firmware 1900/2950 IOS và firmware thường xuyên được phát hành phiên bản mới với các khắc phục lỗ hổng cũ, thêm các đặc tính mới và tăng khả năng hoạt động"],[4848,"Nếu bạn muốn hệ thống mạng được bảo vệ tốt hơn, hoạt động hiệu quả hơn với phiên bản mới hơn của IOS thì bạn nên nâng cấp IOS"],[4849,"Bạn có thể tải phiên bản IOS về server nội bộ của mình từ Trung tâm phần mềm kết nối trực tuyến Cisco (CCO- Cisco Connection Online)"],[4850,"TỔNG KẾT Sau khi hoàn tất chương này, bạn cần nắm được các ý chính sau: \u2022 Thành phần cơ bản của Catalyst switch"],[4851,"\u2022 Theo dõi trạng thái và hoạt động cảu switch thông qua đèn báo hiệu LED \u2022 Kiểm tra thông tin xuất ra của quá trình khởi động switch bằng HyperTerminal"],[4852,"\u2022 Sử dụng tính năng trợ giúp của giao tiếp dòng lệnh"],[4853,"\u2022 Các chế độ mặc định của switch \u2022 Đặt địa chỉ IP và default gateway cho switch để có thể kết nối và quản lý switch qua mạng"],[4854,"\u2022 Xem cấu hình switch với trình duyệt Web"],[4855,"\u2022 Cài đặt tốc độ và chế độ song công cho port của switch"],[4856,"\u2022 Kiểm tra và quản lý bảng địa chỉ MAC của switch"],[4857,"\u2022 Cấu hình port bảo vệ"],[4858,"\u2022 Quản lý tập tin cấu hình IOS"],[4859,"\u2022 Thực hiện khôi phục mật mã cho switch \u2022 Nâng cấp IOS cho switch"],[4860,"438 CHƯƠNG 6: CÊu h×nh switch Giíi thiÖu Switch lµ mét thiÕt bÞ m¹ng Líp 2 ho¹t ®éng nh− mét ®iÓm tËp trung kÕt nèi cña m¸y tr¹m, server, router, hub vµ c¸c switch kh¸c"],[4861,"Hub lµ mét thiÕt bÞ tËp trung kÕt nèi lo¹i cò, cÊp thÊp h¬n switch v× tÊt c¶ c¸c thiÕt bÞ kÕt nèi vµo hub chia sÎ cïng mét b¨ng th«ng vµ cã thÓ x¶y ra tranh chÊp"],[4862,"Hub chØ cã thÓ ch¹y b¸n song c«ng, nghÜa lµ t¹i mét thêi ®iÓm hub hoÆc truyÒn hoÆc nhËn d÷ liÖu chø kh«ng thÓ thùc hiÖn ®ång thêi c¶ hai"],[4863,"Cßn switch th× cã thÓ ch¹y song c«ng, truyÒn vµ nhËn d÷ liÖu song song ®ång thêi"],[4864,"Switch lµ mét brigde ®a port: ChuyÓn m¹ch ®ang lµ mét c«ng nghÖ chuÈn hiÖn nay trong cÊu tróc h×nh sao cña Ethernet LAN"],[4865,"Khi hai thiÕt bÞ kÕt nèi vµo switch muèn liªn l¹c víi nhau th× switch thiÕt lËp mét m¹ch ¶o ®iÓm ®Õn - ®iÓm µnh r ®ã nªn kh«ng cã kh¶ n¨ng x¶y ra ®ông ®é"],[4866,"lµ rÊt quan träng ®èi víi ng−êi lµm vÒ m¹ng"],[4867,"switch"],[4868,"Mét trong nh÷ng t¸c vô nµy lµ b¶o tr× switch vµ hÖ ®iÒu hµnh IOS (Internetworking Oprating System) cña nã"],[4869,"Mét sè t¸c vô kh¸c liªn quan ®Õn viÖc qu¶n lý c¸c cæng giao tiÕp cña switch, tèi −u ho¸ b¶ng ho¹t ®éng cña switch ®Ó ®¶m b¶o ®é tin cËy vµ b¶o mËt"],[4870,"Nh÷ng kü n¨ng vÒ cÊu h×nh switch, n©ng cÊp IOS, kh«i phôc mËt m· lµ nh÷ng kü n¨ng rÊt quan träng cña ng−êi qu¶n trÞ m¹ng"],[4871,"d iªng cho hai thiÕt bÞ ChÝnh v× vai trß quan träng cña switch trong hÖ thèng m¹ng hiÖn nay nªn viÖc t×m hiÓu vµ cÊu h×nh switch Mét switch hoµn toµn míi lu«n cã mét cÊu h×nh mÆc ®Þnh cña nhµ s¶n xuÊt"],[4872,"CÊu h×nh nµy th−êng kh«ng ®¸p øng ®ñ c¸c yªu cÇu cña nhµ qu¶n trÞ m¹ng víi"],[4873,"439 Sau khi hoµn tÊt ch−¬ng nµy, b¹n cã thÓ thùc hiÖn nh÷ng c«ng viÖc sau: Çn chÝnh cña Catalyst switch"],[4874,"ning \u2013 Tree"],[4875,"n¨ng suÊt gi¶m vµ kh¸ch hµng kh«ng hµi lßng"],[4876,"Do ®ã c¸c c«ng ty lu«n mong muèn hÖ thèng m¹ng may tÝnh cña hä lu«n ian ho¹t ®éng −îc 99,999% thêi ian h hÜa lµ chØ cho phÐp m¹ng ng−ng ho¹t ®éng trung ×nh m y 1 giê trong 4000 ngµy, hay 5,25 phót trong mét n¨m"],[4877,"NÕu cã thÓ thùc hiÖn ®−îc môc tiªu trªn th× hÖ thèng m¹ng sÏ thùc sù ho¹t \u2022 X¸c ®Þnh c¸c thµnh ph \u2022 Theo dâi ho¹t ®éng vµ tr¹ng th¸i cña switch th«ng qua c¸c b¸o c¸o hiÖu LED"],[4878,"\u2022 X¸c ®Þnh lîi Ých vµ nh÷ng nguy c¬ cña cÊu tróc dù phßng"],[4879,"\u2022 M« t¶ vai tro cña Spanning - Tree trong m¹ng chuyÓn m¹ch cã dù phßng"],[4880,"\u2022 X¸c ®Þnh c¸c thµnh phÇn quan träng trong ho¹t ®éng cña Span \u2022 M« t¶ qu¸ tr×nh bÇu bridge gèc"],[4881,"\u2022 LiÖt kª c¸c tr¹ng th¸i Spanning \u2013 Tree"],[4882,"\u2022 So s¸nh giao thøc Spanning \u2013 Tree"],[4883,"7.1"],[4884,"CÊu tróc dù phßng"],[4885,"7.1.1"],[4886,"Sù dù phßng"],[4887,"RÊt nhiÒu c«ng ty vµ tæ chøc ®· ph¸t triÓn ho¹t ®éng cña hä dùa trªn m¹ng m¸y tÝnh"],[4888,"ViÖc truy cËp vµo file server, c¬ së d÷ liÖu, Internet, Intranet vµ Extranet ®ãng vai trß quan träng cho sù thµnh c«ng trong kinh doanh v× nÕu m¹ng bÞ ®øt, ho¹t ®éng suèt 24 giê, 7 ngµy mét tuÇn"],[4889,"ViÖc thùc hiÖn 100% thêi g th× cã thÓ kh«ng kh¶ thi nh−ng môc tiªu ®Æt ra lµ ph¶i b¶o ®¶m ® g o¹t ®éng"],[4890,"TØ lÖ nµy cã ng b ét ngµy trong 30 n¨m, ha ®éng rÊt tin cËy"],[4891,"§é tin cËy cña hÖ thèng m¹ng ®−îc ®¶m b¶o tõ viÖc trang bÞ c¸c thiÕt bÞ cã ®é tin cËy cao ®Õn viÖc thiÕt kÕ hÖ thèng m¹ng cã dù phßng, cã kh¶ n¨ng chÞu ®−îc lçi, héi tô nhanh ®Ó v−ît qua sù cè"],[4892,""],[4893,"440 M¹ng cã kh¶ n¨ng chÞu ®−îc lçi nhê cã sù dù phßng"],[4894,"Dù phßng ë ®©y cã nghÜa lµ chuÈn bÞ nh÷ng g× nhiÒu h¬n møc cÇn thiÕt b×nh th−êng"],[4895,"Nh−ng dù phßng gióp t¨ng ®é tin cËy cña m¹ng nh− thÕ nµo"],[4896,"Gi¶ sö nh− b¹n chØ cã mét c¸ch duy nhÊt ®Ó ®i lµm lµ ®i lµm b»ng xe h¬i cña b¹n, vËy nÕu chiÕc xe h¬i nµy bÞ h− cã nghÜa lµ b¹n kh«ng thÓ ®i lµm cho ®Õn khi chiÕc xe h¬i nµy ®−îc söa ch÷a xong"],[4897,"NÕu chiÕc xe nµy cø trung binh 10 ngµy l¹i h− mÊt 1 ngµy th× kh¶ n¨ng sö dông cña nã lµ 90%"],[4898,"§iÒu nµy cã nghÜa lµ cø 10 ngµy th× b¹n chØ ®i lµm ®−îc 9 ngµy"],[4899,"Do ®ã ®é tin cËy ®¹t ®−îc 90%"],[4900,"NÕu b¹n mua thªm mét xe h¬i n÷a ®Ó ®i lµ"],[4901,"§óng lµ kh«ng cÇn thiÕt ph¶i cã ®Õn 2 chiÕc xe h¬i chØ ®Ó ®i lµm nh−ng b¹n l¹i cã xe dù phßng khi chiÕc xe chÝnh bÞ h−"],[4902,"Nh− vËy viÖc ®i lµm cña b¹n sÏ kh«ng cßn bÞ phô thuéc vµo mét chiÕc xe n÷a"],[4903,"C¶ hai chiÕc xe còng cã thÓ bÞ h− cïng mét lóc, kho¶ng 100 ngµy th× cã mét ngµy nh− thÕ"],[4904,"Nh− vËy b¹n mua thªm chiÕc xe thø 2 ®Ó dù phßng, ®é tin cËy ®· t¨ng lªn 99%"],[4905,"H×nh 7.1.1 7.1.2"],[4906,"CÊu tróc dù phßng"],[4907,""],[4908,"441 Môc tiªu cña cÊu tróc dù phßng lµ lo¹i bá ®iÓm tËp trung cña sù cè"],[4909,"TÊt c¶ c¸c hÖ thèng m¹ng cÇn ph¶i cã dù phßng ®Ó n©ng møc ®é b¶o ®¶m"],[4910,"HÖ thèng ®−êng giao th«ng lµ mét vÝ dô vÒ cÊu tróc cã tÝnh dù phßng"],[4911,"NÕu cã mét con ®−êng bÞ ®ãng l¹i ®Ó söa ch÷a th× sÏ lu«n cã ®−êng kh¸c ®Ó ®i ®Õn ®Ých"],[4912,"−êng ®i vµo thÞ VÝ dô cã mét c«ng ®ång c¸ch trung t©m thÞ trÊn bëi cã mét con s«ng"],[4913,"NÕu chØ b¾c mét chiÕc cÇu qua s«ng ®ã th× cã nghÜa lµ chØ cã mét con ® trÊn"],[4914,"CÊu tróc nh− vËy lµ kh«ng cã sù dù phßng"],[4915,"NÕu c©y cÇu nµy bÞ ngËp hoÆc bÞ h− háng do tai n¹n th× sÏ kh«ng thÓ ®i vµo thÞ trÊn b»ng chiÕc cÇu nµy ®−îc n÷a"],[4916,"B¾c thªm mét chiÕc cÇu thø hai qua s«ng ®Ó t¹o cÊu tróc cã dù phßng"],[4917,"Khi ®ã ng−êi d©n ë ngo¹i « sÏ kh«ng cßn bÞ c¾t ®øt víi trung t©m thÞ trÊn khi mét c©y cÇu bÞ h− háng n÷a"],[4918,""],[4919,"442 H×nh 7.1.2"],[4920,"m« h×nh cã dù phßng vµ kh«ng cã dù phßng"],[4921,"7.1.3"],[4922,"CÊu tróc chuyÓn m¹ch dù phßng"],[4923,"HÖ thèng m¹ng cã thiÕt bÞ vµ ®−êng dù phßng sÏ cã kh¶ n¨ng tån t¹i cao h¬n, tr¸nh ®−îc m« h×nh chØ cã mét ®iÓm trung t©m cña sù cè v× nÕu mét ®−êng kÕt nèi hoÆc mét thiÕt bÞ gÆp sù cè th× ®−êng dù phßng hoÆc thiÕt bÞ dù phßng sÏ l·nh tr¸ch nhiÖm thay thÕ"],[4924,"VÝ dô nh− h×nh 7.1.3, nÕu Switch A bÞ h−, l−u l−îng tõ segment 2 sang segment 1 vµ sang router vÉn cã thÓ ®i qua Switch B"],[4925,"Switch B"],[4926,"NÕu port 1 trªn Switch A bÞ h− thi giao th«ng vÉn cã thÓ ®i qua port 1 trªn"],[4927,"443 H×nh 7.1.3 ã, nhê ®ã nã cã thÓ «ng biÕt g× vÒ ®Þa chØ cña m¸y ®Ých th× nµo nã häc ®−îc ®Þa chØ MA ®−îc chuyÓn ra tÊt c¶ c¸c por ñ − h×nh 7.1.3 cã thÓ sÏ g©y ra trËn · g ®Þa chØ MAC kh«ng æn ®Þnh"],[4928,"¸"],[4929,"−îc switch sö lý gièng nh− gãi qu¶ng b¸ lµ chuyÓn ra tÊt Switch häc ®Þa chØ MAC cña thiÕt bÞ kÕt nèi vµo port cña n chuyÓn d÷ liÖu ®Õn ®óng ®Ých"],[4930,"NÕu switch kh nã sÏ chuyÓn gãi ra tÊt c¶ c¸c port cho ®Õn khi C cña thiÕt bÞ nµy"],[4931,"Gãi qu¶ng b¸ vµ multicast còng t c a switch"],[4932,"ChÝnh v× vËy, cÊu tróc chuyÓn m¹ch dù phßng nh b o qu¶ng b¸, chuyÓn nhiÒu l−ît frame vµ b¶n 7.1.4"],[4933,"TrËn b·o qu¶ng b Gãi multicast còng ® c¶ c¸c port trõ port nhËn gãi vµo"],[4934,""],[4935,"444 H×nh 7.1.4.a H×nh 7.1.4.b"],[4936,"HËu qu¶ lµ g©y ra mét trËn b·o qu¶ng b¸ trªn m¹ng"],[4937,""],[4938,"445 Ta xÐt vÝ dô trªn h×nh 7.1.4.a: gi¶ sö Host X göi mét gãi qu¶ng b¸ vµ gãi yªu cÇu ARP ®Ó hái ®Þa chØ líp 2 cña router ch¼ng h¹n"],[4939,"KhÝ ®ã switch A nhËn ®−îc gãi qu¶ng b¸ nµy sÏ chuyÓn gãi qu¶ng b¸ nµy sÏ chuyÓn gãi ra tÊt c¶ c¸c port"],[4940,"Switch B còng thùc hiÖn nh− vËy"],[4941,"KÕt qu¶ lµ Switch B sÏ nhËn l¹i c¸c gãi qu¶ng b¸ ®−îc göi tõ Switch A vµ ng−îc l¹i, Switch A còng nhËn l¹i c¸c gãi qu¶ng b¸ ®−îc göi tõ ¸ cña nhau vµ l¹i chuyÓn tiÕp ra tÊt c¶ c¸c port"],[4942,"Cø nh− vËy, mçi mét gãi qu¶ng b¸ mµ switch nhËn vµo sÏ ®−îc nh©n ra tÊt c¶ c¸c port g©y lªn trËn b·o qu¶ng b¸ trªn m¹ng"],[4943,"TrËn b·o qu¶ng b¸ nµy sÏ ®−îc tiÕp tôc cho ®Õn khi nµo mét trong hai switch bÞ ng¾t kÕt nèi ra"],[4944,"Switch vµ c¸c thiÕt bÞ ®Çu cuèi sÏ bÞ qu¸ t¶i v× ph¶i sö lý qu¸ nhiÒu c¸c gãi qu¶ng b¸ vµ kh«ng thÓ sö lý ®−îc c¸c gãi d÷ liÖu kh¸c cña user"],[4945,"Khi ®ã hÖ thèng m¹ng xem nh− bÞ tª liÖt"],[4946,"7.1.5"],[4947,"TruyÒn nhiÒu l−ît frame"],[4948,"CÊu tróc m¹ng chuyÓn m¹ch dù phßng cã thÓ lµm cho thiÕt bÞ ®Çu cuèi nhËn ®−îc nhiÒu frame trung lÆp nhau"],[4949,"Switch B"],[4950,"C¶ hai Switch nµy nhËn ®−îc gãi qu¶ng b H×nh 7.1.5 Ta xÐt vÝ dô trªn h×nh 7.1.5: gi¶ sö r»ng c¶ hai switch võa míi xo¸ ®Þa chØ chØ MAC cña router Y trong b¶ng ARP cña m×nh lªn nã göi mét frame trùc i Route MAC cña Router Y trªn b¶ng ®Þa chØ v× hÕt thêi h¹n vµ gi¶ sö r»ng Host X vÉn cßn gi÷ ®Þa tiÕp tí r Y"],[4951,"Router Y nhËn ®−îc gãi gi÷ liÖu nµy v× nã n»m trong cïng segment víi Host X"],[4952,""],[4953,"446 Router Y trªn b¶ng ®Þa chØ nªn nã chuyÓn frame ra tÊt c¶ c¸c port cña nã"],[4954,"T−¬ng tù trªn switch B còng vËy"],[4955,"KÕ −îc nhiÒu frame trïng nhau"],[4956,"§i n h"],[4957,"CÊu tróc m¹ng chuyÓn m¹ch dù phong cã thÓ lµm cho c¸c switch häc ®−îc th«ng tin sai vÒ ®Þa chØ, switch sÏ häc ®−îc mét ®Þa chØ MAC trªn mét port mµ trong khi ®Þa chØ MAC nµy thËt sù n»m trªn port kh¸c"],[4958,"Switch A còng nhËn ®−îc frame nµy nh−ng kh«ng cã ®Þa chØ MAC cña t qu¶ lµ Router Y nhËn ® Òu µy lµm cho c¸c thiÕt bÞ tèn tµi nguyªn ®Ó xö lý nhiÒu frame kh«ng cÇn thiÕt"],[4959,"7.1.6"],[4960,"C¬ së d÷ liÖu ®Þa chØ MAC kh«ng æn ®Þn H×nh 7.1.6 Ta xÐt vÝ dô nh− trªn h×nh 7.1.6: gi¶ sö ®Þa chØ MAC cña Router Y kh«ng cã trong b¶ng ®Þa chØ cña c¶ hai switch"],[4961,"Gi¶ sö host X göi mét gãi d÷ liÖu trùc tiÕp ®Õn Router Y"],[4962,"Switch A vµ B ®Òu nhËn ®−îc gãi g÷i liÖu nµy vµ häc ®−îc ®Þa chØ MAC cña Host X lµ n»m trªn port 0"],[4963,"Sau khi ®ã d÷ liÖu nµy ®−îc hai switch chuyÓn ra tÊt c¶ c¸c port v× trªn hai switch ®Òu ch−a cã ®Þa chØ MAC cña Router Y"],[4964,"KÕt qu¶ lµ switch A nhËn l¹i gãi d÷ liÖ õ Switch A vµo port 1"],[4965,"trª 7.2"],[4966,"Giao thøc Spanning � Tree (Giao thøc ph©n nh¸nh c©y)"],[4967,"7.2.1"],[4968,"CÊu tróc dù phßng vµ Spanning � Tree"],[4969,"u nµy tõ switch B vµo port 1 vµ ng−îc l¹i, Switch B còng nhËn l¹i d÷ liÖu t Khi ®ã Switch A vµ B häc l¹i lµ ®Þa chØ MAC cña Host X n»m n port 1, kÕ tiÕp, khi Router Y göi mét gãi d÷ liÖu cho Host X, Switch Avµ B còng ®Òu nhËn ®−îc gãi d÷ liÖu tõ Router Y ®Õn Host X sÏ bÞ r¬i vµo vßng lÆp"],[4970,""],[4971,"447 CÊu tróc m¹ng dù phßng ®−îc thiÕt kÕ ®Ó b¶o ®¶m m¹ng tiÕp ho¹t ®éng khi cã mét sù cè x¶y ra, user sÏ Ýt bÞ gi¸n ®o¹n c«ng viÖc cña hä h¬n"],[4972,"Mäi sù gi¸n ®o¹n do sù cè g©y ra cµng ng½n cµng tèt"],[4973,"H×nh 7.2.1.a"],[4974,"Mét vÝ dô vÒ cÊu tróc dù phßng"],[4975,"Trong hÖ thèng m¹ng, chóng ta t¹o nhiÒu kÕt nèi gi÷a c¸c switch vµ bridge ®Ó dù phßng"],[4976,"C¸c kÕt nåi nµy sÏ t¹o ra c¸c vßng lÆp vËt lý trong m¹ng nh−ng nÕu cã mét kÕt nèi bÞ ®øt thi l−u l−îng cã thÓ ®−îc chuyÒn sang kÕt nèi kh¸c"],[4977,"Switch ho¹t ®éng ë líp 2 cña m«i h×nh OSI vµ thùc hiÖn quyÕt ®Þnh chuyÓn gãi ë líp nµy"],[4978,"Khi Switch kh«ng x¸c ®Þnh ®−îc port ®Ých th× nã sÏ chuyÓn gãi ra tÊt c¶ rt nhËn gãi vµo"],[4979,"Do ®ã, To L «ng tin líp 2 trong gãi d÷ liÖu kh«ng cã µo vßng lÆp líp 2 cña cÊu tróc m¹ng chuyÓn m¹ch, nã sÏ bÞ lÆp vßng ®Õn v« tËn v× kh« rong frame gióp lo¹i bá èng m¹ng tiªu tèn b¨ng th«ng vµ cã thÓ dÉn Õ c¸c port"],[4980,"Gãi qu¶ng b¸ vµ multicast còng ®−îc göi ra tÊt c¶ c¸c port trõ po m¹ng chuyÓn m¹ch kh«ng ®−îc cã vßng lÆp, v× nh− vËy sÏ g©y ra nhiÒu sù cè nh− ®· ph©n tÝch ë c¸c phÇn trªn"],[4981,"ë líp 3, mçi khi gãi d÷ liÖu ®i qua mét Router, tr−êng thêi gian sèng (Time Live \u2013 TTL) sÏ gi¶m ®i mét gi¸ trÞ vµ gãi d÷ liÖu sÏ bÞ huû bá khi tr−êng TT ®¹t ®Õn gi¸ trÞ 0"],[4982,"Trong khi ®ã, phÇn th tr−¬ng TTL"],[4983,"Do ®ã, nÕu frame bÞ r¬i v ng cã th«ng tin nµo t frame khi bÞ lÆp vßng"],[4984,"§iÒu ®ã lµm hÖ th ® n bÞ tª liÖt"],[4985,""],[4986,"448 Tãm l¹i, m¹ng chuyÓn m¹ch víi switch vµ bridge kh«ng thÓ cã vßng lÆp nh−ng chóng ta vÉn cÇn x©y dùng cÊu tróc m¹ng vËt lý cã vßng l¾p ®Ó dù phßng khi spanning - tree"],[4987,"ThuËt to¸n nµy tån t¹i kh¸ nhiÒu thêi x¶y ra sù cè, nh»m ®¶m b¶o ho¹t ®éng cña hÖ thèng m¹ng"],[4988,"VËy gi¶i ph¸p lµ vÉn cho phÐp cÊu tróc vËt lý cã vßng lÆp nh−ng chóng ta sÏ t¹o cÊu tróc luËn lý kh«ng cã vßng lÆp"],[4989,"VÝ dô nh− trªn h×nh 7.2.1.a, giao th«ng tõ c¸c user kÕt nèi vµo Cat - 4 ®Õn server Farm kÕt nèi vµo Cat - 5 sÏ ®i qua ®−êng kÕt nèi gi÷a Cat - 1 vµ Cat - 2 mÆc dï cã tån t¹i ®−êng kÕt nèi vËt lý gi÷a Cat - 4 vµ Cat - 5"],[4990,"CÊu tróc luËn lý kh«ng vßng lÆp lµ mét cÊu tróc d¹ng ph©n nh¸nh c©y, t−¬ng tù nh− cÊu tróc luËn lý h×nh sao hay h×nh sao më réng"],[4991,"ThuËt to¸n ®−îc sö dông ®Ó t¹o cÊu tróc luËn lý kh«ng vßng lÆp lµ thuËt to¸n gian ®Ó héi tô"],[4992,"Do ®ã cã mét thuËt to¸n míi h¬i gäi lµ rapid spanning - tree víi thêi gian tinh to¸n cÊu tróc luËn lý kh«ng vßng lÆp rót ng¾n h¬n"],[4993,"H×nh 7.2.1.b"],[4994,"CÊu tróc luËn lý kh«ng vßng lÆp ®−îc t¹o ra bëi Spanning - Tree"],[4995,"CÊu tróc nµy theo d¹ng ph©n nh¸nh h×nh c©y, t−¬ng tù nh− cÊu tróc luËn lý h×nh sao më réng"],[4996,""],[4997,"449 7.2.2"],[4998,"Giao thøc Spanning - Tree"],[4999,"Ethernet bridge vµ switch cã thÓ triÓn khai giao thøc Spanning - Tree IEEE802.1D vµ sö dông thuËt to¸n spanning - tree ®Ó x©y dùng cÊu tróc m¹ng ng¾n nhÊt kh«ng vßng lÆp"],[5000,"§Ó x©y dùng m¹ng theo d¹ng ph©n nh¸nh h×nh c©y, tr−íc tiªn giao thøc Spanning - Tree ph¶i chän mét ®iÓm lµm gèc (root bridge)"],[5001,"XuÊt ph¸t tõ mét bridge gèc nµy, c¸c ®−êng liªn kÕt ®−îc xem xÐt vµ tÝnh to¸n ®Ó ph©n nh¸nh ra t¹o cÊu tróc m¹ng theo d¹ng h×nh c©y, b¶o ®¶m r»ng chØ cã mét ®−êng duy nhÊt ®i tõ gèc ®Õn tõng node trong m¹ng"],[5002,"Nh÷ng ®−êng kÕt nèi nµo d− thõa trong cÊu tróc h×nh c©y sÏ bÞ kho¸ l¹i"],[5003,"TÊt c¶ c¸c gãi d÷ liÖu nhËn ®−îc tõ ®−êng liªn kÕt bÞ kho¸ nµy sÏ bÞ huû bá"],[5004,"H×nh 7.2.2.a"],[5005,"Giao thøc Spanning - Tree x©y dùng m¹ng h×nh luËn lý h×nh c©y"],[5006,"KÕt nèi nµo d− thõa, t¹o thµnh vßng lÆp sÏ bÞ kho¸ l¹i"],[5007,"Giao thøc Spanning - Tree ®ßi hái thiÕt bÞ m¹ng ph¶i trao ®æi th«ng tin víi nhau ®Ó cã thÓ ph¸t hiÖn ra vßng lÆp trong m¹ng"],[5008,"Th«ng ®iÖp trao ®æi nµy ®−îc gäi lµ Bridge Protocol Data Unit (BPDU)"],[5009,"KÕt nèi nµo t¹o thµnh vßng lÆp sÏ bÞ ®Æt vµo tr¹ng th¸i kho¸"],[5010,"Trªn kÕt nèi nµy kh«ng nhËn gãi d÷ liÖu nh−ng vÉn nhËn c¸c gãi BPDU ®Ó x¸c ®Þnh kÕt nèi ®ã cßn ho¹t ®éng hay kh«ng"],[5011,"NÕu cã mét kÕt nèi bÞ ®øt hay mét thiÕt bÞ h− háng th× mét cÊu tróc h×nh c©y míi sÏ ®−îc tÝnh to¸n l¹i"],[5012,"BPDU chøa ®Çy ®ñ c¸c th«ng tin gióp cho switch thùc hiÖn ®−îc c¸c viÖc sau:"],[5013,"450 \u2022 Chän mét switch lµm gèc cho cÊu tróc h×nh c©y"],[5014,"\u2022 TÝnh to¸n ®−êng ng¾n nhÊt tõ mçi node ®Õn switch gèc"],[5015,"§−êng ng¾n nhÊt ®−êng cã chi phÝ thÊp nhÊt"],[5016,"Chi phÝ cña ®−êng kÕt nèi ®−îc tÝnh to¸n dùa trªn tèc é cña ®−êng kÕt nèi ®ã"],[5017,"\u2022 Trong tõng LAN segment, chØ ®Þnh ra mét switch gÇn nhÊt víi switch gèc"],[5018,"Switch ®−îc chØ ®Þnh (designated switch) sÏ l¾m gi÷ mäi th«ng tin liªn l¹c gi÷a LAN vµ switch gèc"],[5019,"\u2022 Trªn mçi switch kh«ng ph¶i lµ gèc chän mét port lµm port gèc (root port) lµ port cã ®−êng kÕt nèi ng¾n nhÊt vÒ gèc"],[5020,"\u2022 C¸c port cßn l¹i ®−îc xem xÐt ®Ó lµm port chØ ®Þnh (designated port)"],[5021,"Nh÷ng port nµo kh«ng ®−îc chØ ®Þnh ®Òu bÞ kho¸ l¹i"],[5022,"lµ ® H×nh 7.2.2.b"],[5023,"Gi¸ trÞ chi phÝ mÆc ®inh t−¬ng øng víi tèc ®é cña ®−êng kÕt nèi"],[5024,"7.2.2.c"],[5025,"C¸c th«ng tin n»m trong gãi BPH×nh DU"],[5026,""],[5027,"451 H×n hi t qu¸ tr×nh bÇu chän bridge gèc Tõ bridge gèc, hai nh¸nh tõ port 1/1, 1/2 ®−îc më lªn −îc chän lµm port −îc chän lµm port gèc ®Ó nèi vÒ gèc"],[5028,"Sau khi ®· x¸c ®Þnh xong port gèc ®Ó xem segme t LAN chØ cã mét sw vµ Cat - C sÏ chØ ®Þnh ra mét switch ® Cat - B Cat - C ning - tree"],[5029,"ng m¹ng tu©n theo c¸c nguyªn t¾c h 7.2.2.d"],[5030,"Mét vÝ dô ®Ó kÕt qu¶ tÝnh to¸n cña giao thøc Spanning - Tree"],[5031,"Sau k Ýnh to¸n xong, vÒ mÆt luËn lý, cÊu tróc m¹ng sÏ cã d¹ng rÏ nh¸nh c©y, kh«ng cßn vßng lÆp n÷a"],[5032,"Ta xÐt vÝ dô nh− h×nh 7.2.2.c"],[5033,"Ba switch Cat - A, Cat - B vµ Cat - C ®−îc nèi thµnh vßng trßn víi nhau"],[5034,"Nh− vËy lµ tån t¹i mét vßng lÆp vÒ mÆt vËt lý"],[5035,"§Çu tiªn, ®· chän Cat - A lµm gèc"],[5036,"®Ó kÕt nèi xuèng hai switch Cat - B vµ Cat - C"],[5037,"Trªn Cat - B, port 1/1 cã chi phÝ nèi vÒ gèc thÊp nhÊt nªn port nµy ® gèc"],[5038,"T−¬ng tù trªn Cat - C, port 1/1 ® thiÕt lËp kÕt nèi vÒ bridge gèc, Cat - B vµ Cat - C sÏ xÐt c¸c port cßn l¹i"],[5039,"Chóng nhËn thÊy port 1/2 cña chóng cïng nèi vµo mét nt LAN"],[5040,"§Ó t¹o cÊu tróc h×nh c©y, trong mçi segmen itch ®−îc më mét ®−êng ®Ó kÕt nèi tõ gèc vµo segment LAN ®ã"],[5041,"Do ®ã, Cat - B −îc truy xuÊt vµo segment LAN nµy"],[5042,"KÕt qu¶, ®−îc chän vµ port 1/2 cña nã ®−îc chØ ®Þnh më kÕt nèi vµo segment LAN"],[5043,"kh«ng ®−îc chØ ®inh nªn port 1/2 cña nã bÞ kho¸ l¹i"],[5044,"7.2.3"],[5045,"Ho¹t ®éng cña span Khi m¹ng ®· æn ®Þnh vµ héi tô chØ cã mét c©y duy nhÊt trong mét m¹ng"],[5046,"§Ó ®¹t ®−îc kÕt qu¶ nµy, c¸c switch tro sau:"],[5047,"452 \u2022 ChØ cã mét bridge gèc duy nhÊt cho mét m¹ng"],[5048,"\u2022 Trong tõng segment LAN, chØ ®−îc duy nhÊt mét port ®i vµo segment LAN \u2022 Po C¸c port kh«ng ®−îc chØ ®Þnh sÏ huû bá d÷ port kho¸ (B - Bloking)"],[5049,"7.2.4"],[5050,"Qu¸ tr×nh chän bridge gèc"],[5051,"Muèn x©y dùng cÊu tróc h×nh c©y th× tr−íc tiªn ph¶i cã mét ®iÓm lµm gèc ®Ó ®ã ph chän ra mét bridge gèc sÏ t¸c ®éng ®Õn dßng giao th«ng trong m¹ng"],[5052,"Khi c¸c switch míi ®−îc bËt ®iÖn, chóng sÏ tr vµ dùa gã Tr−êng BID bao gåm gi¸ trÞ ®é −u tiªn cña switch vµ ®Þa chØ MAC cña switch ®ã"],[5053,"Gi¸ trÞ −u tiªn mÆc ®Þnh cña switch lµ 32768"],[5054,"MÆc ®Þnh, c¸c gãi BPDU ®−îc g−i ®i i©y/lÇ \u2022 Trªn mçi bridge kh«ng ph¶i lµ gèc chØ cã mét port duy nhÊt lµm port gèc lµ port kÕt nèi vÒ gèc ng¾n nhÊt"],[5055,"®ã"],[5056,"Kh«ng sö dông c¸c port nµo kh«ng ®−îc chØ rt gèc vµ port ®−îc chØ ®Þnh lµm c¸c port ®− ®Þnh"],[5057,"îc sö dông ®Ó chuyÓn d÷ liÖu"],[5058,"liÖu"],[5059,"C¸c port nµy ®−îc gäi lµ tõ ©n nh¸nh cho c©y"],[5060,"Do ®ã viÖc ®Çu tiªn lµ tÊt c¶ c¸c switch trong m¹ng ph¶i ao ®æi c¸c gãi BPDU víi nhau i nµy ®Ó chän ra bridge gèc"],[5061,"vµo th«ng tin bridge ID (BID) trong c¸c 2 g n"],[5062,"H×nh 7.2.4.a"],[5063,"Néi dung gãi BPDU"],[5064,""],[5065,"453 H×nh 7.2.4.b"],[5066,"CÊu tróc cña tr−êng BID"],[5067,"2 byte ®Çu lµ gi¸ trÞ −u tiªn cña switch"],[5068,"Gi¸ trÞ nµy n»m trong kho¶ng tõ 0 - 65535, gi¸ trÞ mÆc ®Þnh lµ 32768"],[5069,"6 byte sau lµ ®Þa chØ MAC cña switch"],[5070,"§Çu tiªn mçi switch ®Òu tù cho nã lµ gèc"],[5071,"Do ®ã trong gãi BPDU ®Çu tiªn mµ mçi switch göi ®i, tr−êng Root BID vµ sender BID ®Òu cã gi¸ trÞ −u tiªn vµ ®Þa chØ MAC cña chÝnh nã"],[5072,"Sau ®ã mçi switch sÏ lÇn l−ît nhËn ®−îc c¸c goi BPDU tõ nh÷ng switch kh¸c"],[5073,"Mçi khi switch nhËn ®−îc mét gãi BPDU cã tr−êng Root BID thÊp h¬n Root BID nã ®ang cã th× nã sÏ thay thÕ Root BID thÊp h¬n vµo gãi BPDU råi göi ®i"],[5074,"Cø nh− vËy, cuèi cïng c¸c switch sÏ thèng nhÊt ®−îc víi nhau switch nµo cã BID thÊp nhÊt lµm bridge gèc"],[5075,"H×nh 7.2.4.c"],[5076,"Mét vÝ dô vÒ néi dung gãi BPDU ®Çu tiªn cña Cat - A göi ®i"],[5077,"NÕu kh«ng cÊu h×nh g× c¶, gi¸ trÞ mÆc ®Þnh trªn c¸c switch ®Òu b»ng nhau vµ b»ng 32768"],[5078,"Do vËy switch nµo nµo cã ®Þa chØ MAC nhá nhÊt (®Þa chØ MAC th× kh«ng bao giê trïng nhau gi÷a c¸c switch) sÏ cã BID nhá nhÊt vµ switch ®ã sÏ lµm gèc"],[5079,"Ng−êi qu¶n trÞ m¹ng muèn t¸c ®éng vµo viÖc quyÕt ®Þnh chän bridge gèc th×"],[5080,"454 cã thÓ cµi ®Æt gi¸ trÞ −u tiªn cña switch nhá h¬n gi¸ trÞ mÆc ®Þnh, khi ®ã BID cña switch sÏ cã gi¸ trÞ nhá h¬n"],[5081,"Tuy nhiªn b¹n chØ lªn lµm ®iÒu nµy khi b¹n n¾m râ luång giao th«ng trong m¹ng cña m×nh"],[5082,"H×nh 7.2.4.d"],[5083,"Sau mét qu¸ trinh trao ®æi gãi BPDU, c¸c switch sÏ chän ra ®−îc switch nµo cã BID nhá nhÊt lµm gèc"],[5084,"7.2.5"],[5085,"C¸c tr¹ng th¸i port Spanning - Tree"],[5086,"Th«ng tin trao ®æi cña c¸c giao thøc ph¶i mÊt mét kho¶ng thêi gian míi truyÒn ®i hÕt cho toµn bé hÖ thèng m¹ng"],[5087,"Khi mét ph©n nµo ®ã cña cÊu tróc m¹ng bÞ thay ®æi th× c¶ hÖ thèng kh«ng thÓ nhËn biÕt ®−îc ®iÒu nµy cïng mét lóc vµ ngay lËp tøc mµ ph¶i lÇn l−ît sau ®ã mét kho¶ng thêi gian"],[5088,"§ã chÝnh lµ thêi gian trÔ lan truyÒn"],[5089,"ChÝnh v× vËy, nÕu switch ®æi tr¹ng th¸i cña mét port tõ thô ®éng sang ho¹t ®éng ngay lËp tøc cã thÓ sÏ g©y ra vßng lÆp"],[5090,"Trªn switch sö dông giao thøc Spanning - Tree, mçi port sÏ ë mét trong n¨m tr¹ng th¸i nh− h×nh 7.2.5.a"],[5091,"ë tr¹ng th¸i kho¸, port chØ nhËn gãi BPDU"],[5092,"C¸c gãi d÷ liÖu kh¸c sÏ bÞ huû bá vµ kh«ng hÒ cã häc ®Þa chØ ë tr¹ng th¸i nµy"],[5093,"MÊt kho¶ng 20 gi©y ®Ó chuyÓn tõ tr¹ng th¸i nµy sang tr¹ng th¸i kÕ tiÕp lµ tr¹ng th¸i nghe"],[5094,""],[5095,"455 H×nh 7.2.5.a"],[5096,"C¸c tr¹ng th¸i port Spanning - Tree"],[5097,"Khi kÕt nèi b¾t ®Çu ®−îc më lªn, tr¹ng th¸i ®Çu tiªn cña port lµ tr¹ng th¸i kho¸ (Blocking)"],[5098,"Sau khi thuËt to¸n Spanning - Tree tÝnh to¸n xong vµ chän port ®ã lµ port gèc hay lµ port chØ ®Þnh cña mét segment LAN th× port sÏ ®−îc lÇn l−ît chuyÓn sang tr¹ng th¸i nghe (Listenning), tr¹ng th¸i häc (Learning) vµ cuèi cïng tr¹ng th¸i truyÒn d÷ liÖu (Forwarding)"],[5099,"ë tr¹ng th¸i nghe, switch chØ x¸c ®Þnh xem port nµy cã kÕt nèi vÒ gèc víi chi phÝ thÊp nhÊt hay kh«ng, cã t¹o vßng lÆp hay kh«ng"],[5100,"NÕu kÕt qu¶ port nµy kh«ng ®−îc chän lµm port gèc vµ còng kh«ng ®−îc chØ ®Þnh lµm port nèi vµo mét segment LAN nµo th× port sÏ ®−îc ®−a trë vÒ tr¹ng th¸i kho¸"],[5101,"Tr¹ng th¸i nghe kÐo dµi kho¶ng 15 gi©y, kho¶ng thêi gian nµy gäi lµ thêi gian chê chuyÓn tr¹ng th¸i (Forward delay)"],[5102,"Trong tr¹ng th¸i nghe, port vÉn kh«ng chuyÓn gãi d÷ liÖu, ch−a häc ®Þa chØ MAC, vÉn chØ xö lý gãi BPDU th«i"],[5103,"Sau ®ã, port chuyÓn tõ tr¹ng th¸i nghe sang tr¹ng th¸i häc"],[5104,"ë tr¹ng th¸i nµy, port ch−a chuyÓn d÷ liÖu cña user nh−ng ®· b¾t ®Çu häc ®Þa chØ MAC tõ c¸c gãi d÷ liÖu nhËn ®−îc vµ vÉn xö lý gãi BPDU"],[5105,"Tr¹ng th¸i häc kÐo dµi kho¶ng 15 gi©y vµ kho¶ng thêi gian nµy còng ®−îc gäi thêi gian chê chuyÓn tr¹ng th¸i (Forward delay)"],[5106,"Sau cïng, port chuyÓn tõ tr¹ng th¸i häc sang tr¹ng th¸i truyÒn d÷ liÖu"],[5107,"ë tr¹ng th¸i nµy, port thùc hiÖn truyÒn d÷ liÖu cña user, häc ®Þa chØ MAC ®ång thêi vÉn xö lý gäi BPDU"],[5108,""],[5109,"456 Mét port cã thÓ r¬i vµo tr¹ng th¸i kh«ng ho¹t ®éng (disable)"],[5110,"Tr¹ng th¸i nµy lµ do ng−êi qu¶n trÞ cµi ®Æt cho port b»ng lÖnh shutdown hoÆc do chÝnh b¶n th©n port kh«ng cã kÕt nèi hoÆc bÞ h−, kh«ng ho¹t ®éng ®−îc"],[5111,"Kho¶ng thêi gian cña mçi tr¹ng th¸i nh− ®· nªu ë trªn lµ kho¶ng thêi gian mÆc ®Þnh ®−îc tÝnh cho mét hÖ thèng m¹ng cã tèi ®a 7 switch trªn mét nh¸nh tÝnh tõ gèc"],[5112,"7.2.6"],[5113,"Spanning - Tree tÝnh to¸n l¹i"],[5114,"Sau khi hÖ thèng m¹ng chuyÓn m¹ch ®· héi tô, tÊt c¶ c¸c port trªn mäi switch vµ bridge ®Òu ë tr¹ng th¸i truyÒn d÷ liÖu hoÆc tr¹ng th¸i kho¸"],[5115,"Port truyÒn d÷ liÖu lµ port cã thÓ truyÒn , nhËn d÷ liÖu vµ BPDU"],[5116,"Port kho¸ lµ port chØ nhËn gãi BPDU mµ th«i"],[5117,"Khi cÊu tróc m¹ng cã sù thay ®æi, switch vµ bridge sÏ tÝnh to¸n l¹i cÊu tróc h×nh c©y vµ cã thÓ g©y c¶n trë cho giao th«ng m¹ng cña user khi ®ang trong qu¸ tr×nh tÝnh to¸n"],[5118,"Thêi gian héi tô theo chuÈn IEEE 801.1D cho cÊu tróc h×nh c©y míi lµ kho¶ng 50 gi©y"],[5119,"Khi cÊu tróc m¹ng cã sù thay ®æi x¶y ra, sau thêi gian chê tèi ®a (max - age) lµ 20 gi©y ®Ó x¸c ®Þnh sù thay ®æi ®ã, Spanning - Tree míi b¾t ®Çu tÝnh l¹i vµ chuyÓn tr¹ng th¸i cho port"],[5120,"Tõ tr¹ng th¸i kho¸, port ®−îc chuyÓn sang tr¹ng th¸i nghe"],[5121,"Sau ®ã ë tr¹ng th¸i nghe 15 gi©y råi míi chuyÓn sang tr¹ng th¸i häc vµ ë tr¹ng th¸i häc 15 gi©y råi míi chuyÓn sang tr¹ng th¸i truyÒn d÷ liÖu"],[5122,"Nh− vËy tæng céng lµ 50 gi©y ®Ó cÊu tróc m¹ng chuyÓn sang cÊu h×nh c©y míi ®¸p øng theo sù thay ®æi"],[5123,""],[5124,"457 H×nh 7.2.6.a VÝ dô mét cÊu tróc m¹ng chuyÓn m¹ch ®· héi tô nh− trªn"],[5125,"Theo chu kú mÆc ®Þnh, cø 20 gi©y c¸c switch l¹i thùc hiÖn trao ®æi gãi BPDU mét lÇn"],[5126,"Gi¶ sö kÕt nèi trªn port 1/1 cña Cat - B bÞ ®øt"],[5127,"Khi ®ã Cat - B kh«ng cßn nhËn ®−îc gãi BPDU theo ®Þnh kú trªn port 1/1 n÷a"],[5128,"Trong khi ®ã Cat - B vÉn nhËn ®−îc gãi BPDU ®Òu ®Æn trªn port 1/2"],[5129,"Cat - B ®îi hÕt thêi gian chê tèi ®a (max - age) lµ 20 gi©y míi x¸c ®Þnh kÕt nèi trªn port 1/1 ®· chÕt vµ b¾t ®Çu chuyÓn sang tr¹ng th¸i cho port 1/2"],[5130,"Port 1/2 kh«ng thÓ chuyÓn ngay tõ tr¹ng th¸i kho¸ sang tr¹ng th¸i chuyÒn d÷ liÖu ®−îc mµ ph¶i tr¶i qua 2 tr¹ng th¸i trung gian lµ tr¹ng th¸i nghe vµ tr¹ng th¸i häc, mçi tr¹ng th¸i trung gian nµy kÐo dµi 15 gi©y"],[5131,"Nh− vËy tæng céng lµ 50 gi©y kÓ tõ lóc kÕt nèi trªn port 1/1 cña Cat - B bÞ ®øt, m¹ng míi chuyÓn xong sang cÊu tróc míi ®Ó ®¸p øng theo sù cè nµy"],[5132,""],[5133,"458 H×nh 7.2.6.b"],[5134,"KÕt qu¶ tÝnh l¹i lµ cÊu tróc míi nh− h×nh vÏ"],[5135,"7.2.7"],[5136,"Giao thøc Rapid Spanning - Tree"],[5137,"Giao thøc Rapid Spanning - Tree ®−îc ®Þnh nghÜa trong chuÈn IEEE 802.1w"],[5138,"Giao thøc nµy giíi thiÖu c¸c vÊn ®Ò míi sau: \u2022 Lµm râ h¬n vai trß vµ tr¹ng th¸i cña port"],[5139,"\u2022 §Þnh nghÜa c¸c lo¹i kÕt nèi cã thÓ chuyÓn nhanh sang tr¹ng th¸i truyÒn d÷ liÖu"],[5140,"\u2022 Cho phÐp c¸c switch trong m¹ng ®· héi tô tù göi c¸c gãi BPDU cña nã chø kh«ng chØ riªng gãi BPDU cña bridge gèc"],[5141,"Tr¹ng th¸i kho¸ (bloocking) ®−îc ®æi tªn thµnh tr¹ng lo¹i bá (discarding)"],[5142,"Port lo¹i bá ®ãng vai trß lµ mét port dù phßng"],[5143,"Trong mçi segment cã mét port ®−îc chØ ®Þnh (designated port) ®Ó kÕt nèi vµo segment ®ã"],[5144,"NÕu port chØ ®Þnh nµy bÞ sù cè th× port lo¹i bá t−¬ng øng sÏ ®−îc thay thÕ ngay cho port ®ã"],[5145,""],[5146,"459 H×nh 7.2.7.a"],[5147,"Port 1 trªn Switch Y lµ port thay thÕ cho port 1 trªn Switch X"],[5148,"C¸c kÕt nèi ®−îc ph©n thµnh c¸c lo¹i nh− kÕt nèi ®iÓm - ®Õn - ®iÓm, kÕt nèi chia sÎ vµ kÕt nèi biªn cuèi (edge - link)"],[5149,"KÕt nèi ®iÓm - ®Õn - ®iÓm lµ kÕt nèi gi÷a hai switch"],[5150,"KÕt nèi chia sÎ lµ kÕt nèi cã nhiÒu switch cïng kÕt nèi vµo"],[5151,"KÕt nèi biªn cuèi lµ kÕt nèi tõ switch xuèng host, kh«ng cßn switch nµo kh¸c xen gi÷a"],[5152,"Ph©n biÖt thµnh nhiÒu lo¹i kÕt nèi cô thÓ nh− vËy, viÖc nhËn biÕt sù thay ®æi cÊu tróc m¹ng sÏ nhanh h¬n"],[5153,"KÕt nèi ®iÓm - ®Õn - ®iÓm vµ kÕt nèi biªn cuèi sÏ ®−îc chuyÓn vµo tr¹ng th¸i truyÒn d÷ liÖu ngay lËp tøc v× kh«ng hÒ cã vßng lÆp trªn nh÷ng kÕt nèi d¹ng nµy"],[5154,""],[5155,"460 H×nh 7.2.7.b"],[5156,"C¸c lo¹i kÕt nèi trong Rapid Spanning - Tree"],[5157,"Thêi gian héi tô sÏ kh«ng l©u h¬n 15 gi©y kÓ tõ khi cã sù thay ®æi"],[5158,"Giao thøc Rapid Spanning - Tree, hay IEEE 802.1w sÏ thùc sù thay thÕ cho giao thøc Spanning - Tree, hay IEEE 802.1D"],[5159,"TæNG kÕt Sau khi hoµn tÊt ch−¬ng nµy, b¹n cÇn n¾m ®−îc c¸c ý quan träng sau: \u2022 Sù dù phßng vµ vai trß quan träng cña nã trong hÖ thèng m¹ng"],[5160,"\u2022 C¸c thµnh phÇn chÝnh trong cÊu tróc m¹ng dù phßng"],[5161,"\u2022 TrËn b·o qu¶ng b¸ vµ t¸c h¹i cña nã trong m¹ng chuyÓn m¹ch"],[5162,"\u2022 TruyÒn nhiÒu l−ît frame vµ t¸c h¹i cña nã lªn m¹ng chuyÓn m¹ch"],[5163,"\u2022 Nguyªn nh©n vµ hËu qu¶ cña viÖc c¬ së d÷ liÖu ®Þa chØ MAC kh«ng æn ®Þnh"],[5164,"\u2022 Lîi Ých vµ nguy c¬ cña cÊu tróc m¹ng dù phßng"],[5165,""],[5166,"461 \u2022 Vai trß cña Spanning - Tree trong cÊu tróc m¹ng dù phßng"],[5167,"\u2022 C¸c ho¹t ®éng c¬ b¶n cña Spanning - Tree"],[5168,"\u2022 Qu¸ tr×nh bÇu bridge gèc"],[5169,"\u2022 C¸c tr¹ng th¸i Spanning - Tree"],[5170,"\u2022 So s¸nh giao thøc Spanning - Tree vµ giao thøc Rapid Spanning - Tree"],[5171,""],[5172,"462 CHƯƠNG 8 : VLAN GIỚI THIỆU Mét ®Æc tÝnh quan träng cña m¹ng chuyÓn m¹ch Ethernet lµ m¹ng LAN ¶o(VLAN).VLAN lµ mét nhãm l«gic c¸c thiÕt bÞ m¹ng hoÆc c¸c usur"],[5173,"C¸c thiÕt bÞ m¹ng hoÆc user ®−îc nhãm l¹i theo chøc n¨ng, phßng ban hoÆc theo øng dông chø kh«ng theo vÞ trÝ vËt lý n÷a"],[5174,"C¸c thiÕt bÞ trong mét VLAN ®−îc giíi h¹n chØ th«ng tin liªn l¹c víi c¸c thiÕt bÞ trong cïng VLAN"],[5175,"ChØ cã router míi cung cÊp kÕt nèi gi÷a c¸c VLAN kh¸c nhau"],[5176,"Cisco ®ang cè g¾ng h−íng tíi sù t−¬ng thÝch víi c¸c nhµ s¶n xuÊt kh¸c nhau nh−ng mçi nhµ s¶n xuÊt ®· ph¸t triÓn s¶n phÈm VLAN riªng ®éc quyÒn cña hä cho nªn chóng cã thÓ kh«ng hoµn toµn t−¬ng thÝch víi nhau"],[5177,"VLAN víi c¸ch ph©n nguån tµi nguyªn vµ user theo l«gic ®· lµm t¨ng hiÖu qu¶ ho¹t ®éng cña toµn bé hÖ thèng m¹ng"],[5178,"C¸c c«ng ty, tæ chøc th−êng sö dông VLAN ®Ó ph©n nhãm user theo l«gic mµ kh«ng cÇn quan t©m ®Õn vÞ trÝ vËt lý cña hä"],[5179,"Nhê ®ã, user trong phßng Maketing sÏ ®−îc nhãm vµo Maketing VLAN, user trong phßng KÜ thuËt ®−îc ®Æt vµo VLAN kÜ thuËt"],[5180,"Víi VLAN,m¹ng cã kh¶ n¨ng ph¸t triÓn, b¶o mËt vµ qu¶n lý tèt h¬n v× router trong cÊu tróc VLAN cã thÓ ng¨n gãi qu¶ng b¸, b¶o mËt vµ qu¶n lý dßng l−u l−îng m¹ng"],[5181,"VLAN lµ mét c«ng cô m¹nh trong thiÕt kÕ vµ cÊu h×nh m¹ng"],[5182,"Víi VLAN c¸c c«ng viÖc thªm bít, chuyÓn ®æi trong cÊu tróc m¹ng khi cÇn thiÕt trë nªn ®¬n gi¶n h¬n rÊt nhiÒu"],[5183,"VLAN cßn gióp gia t¨ng b¶o mËt vµ kiÓm so¸t qu¶ng b¸ Líp 3"],[5184,"Tuy nhiªn nÕuVLAN ®−îc cÊu h×nh kh«ng ®óng sÏ lµm cho m¹ng ho¹t ®éng kÐm hoÆc cã khi kh«ng ho¹t ®éng ®−îc"],[5185,"Do ®ã, khi thiÕt kÕ m¹ng, viÖc n¾m ®−îc c¸ch triÓn khai VLAN trªn nhiÒu switch kh¸c nhau lµ rÊt quan träng"],[5186,"Sau khi hoµn tÊt ch−¬ng tr×nh nµy, c¸c b¹n cã thÓ thùc hiÖn ®−îc nh÷ng viÖc sau: +§Þnh nghÜa VLAN +LiÖt kª c¸c Ých lîi cña VLAN +Gi¶i thÝch VLAN ®−îc sö dông ®Ó t¹o miÒn qu¶ng b¸ nh− thÕ nµo"],[5187,""],[5188,"463 +Gi¶i thÝch router ®−îc sö dông ®Ó th«ng tin liªn l¹c gi÷a c¸c VLAN nh− thÕ nµo"],[5189,"+LiÖt kª c¸c lo¹i VLAN +§Þnh nghÜa ISL vµ 802.1Q +Gi¶i thÝch c¸c kh¸i niÖm VLAN theo ®Þa lý"],[5190,"+CÊu h×nh VLAN cã cè ®Þnh trªn dßng Catalyst 29xx switch"],[5191,"+KiÓm tra vµ l−u cÊu h×nh VLAN +Xo¸ VLAN khái cÊu h×nh switch"],[5192,"8.1 Kh¸i niÖm vÒ VLAN 8.1.1 Giíi thiÖu vÒ VLAN VLAN lµ mét nhãm c¸c thiÕt bÞ m¹ng kh«ng bÞ giíi h¹n theo vÞ trÝ vËt lý hoÆc theo LAN switch mµ chóng kÕt nèi vµo"],[5193,"VLAN lµ mét segment m¹ng theo l«gic dùa trªn chøc n¨ng, ®éi nhãm hoÆc øng dông cña mét tæ chøc chø kh«ng phô thuéc vÞ trÝ vËt lý hay kÕt nèi vËt lý trong m¹ng"],[5194,"TÊt c¶ c¸c m¸y tr¹m vµ server ®−îc sö dông bëi cïng mét nhãm lµm viÖc sÏ ®−îc ®Æt trong cïng VLAN bÊt kÓ vÞ trÝ hay kÕt nèi vËt lý cña chóng"],[5195,"Mäi c«ng viÖc cÊu h×nh VLAN hoÆc thay ®æi cÊu h×nh VLAN ®Òu ®−îc thùc hiÖn trªn phÇn mÒm mµ kh«ng cÇn thay ®æi c¸p vµ thiÕt bÞ vËt lý"],[5196,"Mét m¸y tr¹m trong mét VLAN chØ ®−îc liªn l¹c víi file server trong cïng VLAN víi nã"],[5197,"VLAN ®−îc nhãm theo chøc n¨ng l«gic vµ mçi VLAN lµ mét miÒn qu¶ng b¸, do ®ã gãi d÷ liÖu chØ ®−îc chuyÓn m¹ch trong cïng mét VLAN"],[5198,"VLAN cã kh¶ n¨ng më réng, b¶o mËt vµ qu¶n lý m¹ng tèt h¬n"],[5199,"Router trong cÊu tróc VLAN thùc hiÖn ng¨n chÆn qu¶ng b¸, b¶o mËt vµ qu¶n lý nguån giao th«ng m¹ng"],[5200,"Switch kh«ng thÓ chuyÓn m¹ch giao th«ng gi÷a c¸c VLAN kh¸c nhau"],[5201,"Giao th«ng gi÷a c¸c VLAN ph¶i ®−îc ®Þnh tuyÕn qua router"],[5202,""],[5203,"464 H×nh 8.1.1 Ph©n ®o¹n m¹ng LAN theo kiÓu truyÒn thèng vµ theo VLAN"],[5204,"8.2.1 MiÒn qu¶ng b¸ víi VLAN vµ router Mét VLAN lµ mét miÒn qu¶ng b¸ ®−îc t¹o nªn bëi mét hay nhiÒu switch"],[5205,"H×nh 8.1.2.a cho thÊy t¹o 3 miÒn qu¶ng b¸ riªng biÖt trªn ba switch nh− thÕ nµo"],[5206,"§Þnh tuyÕn Líp 3 cho phÐp router chuyÓn gãi gi÷a c¸c miÒn qu¶ng b¸ víi nhau"],[5207,"H×nh 8.1.2.a.3 miÒn qu¶ng b¸ trªn 3 switch kh¸c nhau"],[5208,"Trong h×nh 8.1.2.b chóng ta thÊy 3 VLAN tøc lµ 3 miÒn qu¶ng b¸ kh¸c nhau ®−îc t¹o ra trªn mét switch vµ mét router"],[5209,"Router sÏ sö dông ®Þnh tuyÕn Líp 3 ®Ó chuyÓn giao th«ng gi÷a 3 VLAN"],[5210,""],[5211,"465 H×nh 8.1.2.b"],[5212,"3 VLAN � 3 miÒn qu¶ng b¸ trªn mét switch"],[5213,"Switch trong h×nh 8.1.2.b sÏ truyÒn frame lªn cæng giao tiÕp cña router khi: +Gãi d÷ liÖu lµ gãi qu¶ng b¸"],[5214,"+Gãi d÷ liÖu cã ®Þa chØ MAC ®Ých lµ mét trong c¸c ®Þa chØ MAC cña router"],[5215,"NÕu m¸y tr¹m 1 trong VLAN kÜ thuËt muèn göi d÷ liÖu cho m¸y tr¹m 2 trong VLAN B¸n hµng, hai m¸y nµy n»m trong hai miÒn qu¶ng b¸ kh¸c nhau, thuéc hai m¹ng kh¸c nhau, do ®ã ®Þa chØ MAC ®Ých trong gãi d÷ liÖu sÏ lµ ®Þa chØ MAC cña default gateway cña m¸y tr¹m 1"],[5216,"V× vËy ®Þa chØ MAC ®Ých cña gãi d÷ liÖu nµy sÏ lµ ®Þa chØ MAC cña tæng Fa0/0 trªn router"],[5217,"Gãi d÷ liÖu ®−îc chuyÓn ®Õn router, b»ng ®Þnh tuyÕn IP, router sÏ chuyÓn gãi ®Õn ®óng VLAN B¸n hµng"],[5218,"NÕu m¸y tr¹m 1 trong VLAN kÜ thuËt muèn göi gãi d÷ liÖu cho m¸y tr¹m 2 trong cïng VLAN th× ®Þa chØ MAC ®Ých cña gãi d÷ liÖu sÏ chÝnh lµ ®Þa chØ MAC cña m¸y tr¹m 2"],[5219,"Tãm l¹i, switch sÏ xö lý chuyÓn m¹ch gãi d÷ liÖu khi cã chia VLAN nh− sau: +§èi víi mçi VLAN switch cã mét b¶ng chuyÓn m¹ch riªng t−¬ng øng"],[5220,"466 +NÕu switch nhËn ®−îc gãi d÷ liÖu tõ mét port n»m trong VLAN 1 ch¼ng h¹n, th× switch sÏ chØ t×m ®Þa chØ MAC ®Ých trong b¶ng chuyÓn m¹ch cña VLAN 1 mµ th«i"],[5221,"+§ång thíi switch sÏ häc ®Þa chØ MAC nguån trong gãi d÷ liÖu vµ ghi vµo b¶ng chuyÓn m¹ch cña VLAN 1 nÕu ®Þa chØ MAC nµy ch−a ®−îc biÕt"],[5222,"+Sau ®ã switch quyÕt ®Þnh chuyÓn gãi d÷ liÖu"],[5223,"+Switch nhËn frame vµo tõ VLAN nµo th× switch chØ häc ®Þa chØ nguån cña frame vµ t×m ®Þa chØ ®Ých cho frame trong mét b¶ng chuyÓn m¹ch t−¬ng øng víi VLAN ®ã"],[5224,"8.1.3 Ho¹t ®éng cña VLAN Mçi port trªn switch cã thÓ g¸n cho mét VLAN kh¸c nhau"],[5225,"C¸c port n»m trong cïng mét VLAN sÏ chia sÎ gãi qu¶ng b¸ víi nhau"],[5226,"C¸c port kh«ng n»m trong cïng VLAN sÏ kh«ng chia sÎ gãi qu¶ng b¸ víi nhau"],[5227,"Nhê ®ã m¹ng LAN ho¹t ®éng hiÖu qu¶ h¬n"],[5228,"H×nh 8.1.3.a VLAN cè ®Þnh"],[5229,"Thµnh viªn cè ®Þnh cña VLAN ®−îc x¸c ®Þnh theo port"],[5230,"Khi thiÕt bÞ kÕt nèi vµo mét port cña switch, tuú theo port thuéc lo¹i VLAN nµo th× thiÕt bÞ sÏ n»m trong VLAN ®ã"],[5231,"MÆc ®Þnh, tÊt c¶ c¸c port trªn mét switch ®Òu n»m trong VLAN qu¶n lý"],[5232,"VLAN qu¶n lý lu«n lu«n lµ VLAN 1 vµ chóng ta kh«ng thÓ xo¸ VLAN nµy ®−îc"],[5233,""],[5234,"467 Sau ®ã chóng ta cã thÓ cÊu h×nh g¸n port vµo c¸c VLAN kh¸c"],[5235,"VLAN cung cÊp b¨ng th«ng tin nhiÒu h¬n cho user so víi m¹ng chia sÎ"],[5236,"Trong m¹ng chia sÎ, c¸c user cïng chia sÎ mét b¨ng th«ng trong m¹ng ®ã, cµng nhiÒu user trong mét m¹ng chia sÎ th× l−îng b¨ng th«ng cµng thÊp h¬n vµ hiÖu suÊt ho¹t ®éng cµng gi¶m ®i"],[5237,"Thµnh viªn ®éng cña VLAN ®−îc cÊu h×nh b»ng phÇn mÒm qu¶n lý m¹ng"],[5238,"B¹n cã thÓ sö dông CiscoWorks 2000 hoÆc CiscoWorks for Switch Internetworks ®Ó t¹o VLAN ®éng"],[5239,"VLAN ®éng cho phÐp c¸c ®Þnh thµnh viªn dùa theo ®Þa chØ MAC cña thiÕt bÞ kÕt nèi vµo switch chø kh«ng cßn x¸c ®Þnh theo port n÷a"],[5240,"Khi thiÕt bÞ kÕt nèi vµo switch, switch sÏ t×m trong c¬ së d÷ liÖu cña nã ®Ó x¸c ®Þnh thiÕt bÞ nµy thuéc lo¹i VLAN nµo"],[5241,"H×nh 8.1.3.b VLAN ®éng *CÊu h×nh VLAN b»ng c¸c phÇn mÒm VLAN qu¶n lý tËp trung"],[5242,"*Cã thÓ chia VLAN theo ®Þa chØ MAC, ®Þa chØ l«gic hoÆc theo lo¹i giao thøc"],[5243,"*Kh«ng cÇn qu¶n lý nhiÒu ë c¸c tñ nèi d©y n÷a v× thiÕt bÞ kÕt nèi vµo m¹ng thuéc VLAN nµo lµ tuú theo ®Þa chØ cña thiÕt bÞ ®ã ®· ®−îc g¸n vµo VLAN"],[5244,"*Cã kh¶ n¨ng th«ng b¸o cho qu¶n trÞ m¹ng khi cã mét user l¹, kh«ng cã trong c¬ së d÷ liÖu kÕt nèi vµo m¹ng"],[5245,"X¸c ®Þnh thµnh viªn VLAN theo port tøc lµ port ®· ®−îc g¸n vµo VLAN nµo th× thiÕt bÞ kÕt nèi vµo port ®ã thuéc VLAN ®ã, kh«ng phô thuéc vµo thiÕt bÞ kÕt nèi lµ thiÕt bÞ g×, ®Þa chØ bao nhiªu"],[5246,"Víi c¸ch chia VLAN theo port nh− vËy, tÊt c¶ c¸c user kÕt nèi vµo cïng mét port sÏ n»m trong cïng mét VLAN"],[5247,"Mét user hay nhiÒu user cã thÓ kÕt nèi vµo mét port vµ sÏ kh«ng nhËn thÊy lµ cã sù tån t¹i cña"],[5248,"468 VLAN"],[5249,"C¸ch chia VLAN nµy gióp viÖc qu¶n lý ®¬n gi¶n h¬n v× kh«ng cÇn t×m trong c¬ së d÷ liÖu phøc t¹p ®Ó x¸c ®Þnh thµnh viªn cña mçi VLAN"],[5250,"Ng−êi qu¶n trÞ m¹ng cã tr¸ch nhiÖm cÊu h×nh VLAN b»ng tay vµ cè ®Þnh"],[5251,"Mçi mét port trªn switch còng ho¹t ®éng gièng nh− mét port trªn bridge"],[5252,"Bridge sÏ chÆn luång l−u l−îng nÕu nã kh«ng cÇn thiÕt ph¶i ®i ra ngoµi segment"],[5253,"NÕu gãi d÷ liÖu cÇn ph¶i chuyÓn qua bridge vµ switch kh«ng biÕt ®Þa chØ ®Ých hoÆc gãi nhËn ®−îc lµ gãi qu¶ng b¸ th× míi chuyÓn ra tÊt c¶ c¸c port n»m trong cïng miÒn qu¶ng b¸ víi port nhËn gãi d÷ liÖu vµo"],[5254,"H×nh 8.1.3.c"],[5255,"Chia VLAN theo port"],[5256,"8.1.4 Ých lîi cña VLAN Lîi Ých cña VLAN lµ cho phÐp ng−êi qu¶n trÞ m¹ng tæ chøc m¹ng theo l«gÝc chø kh«ng theo vËt lý n÷a"],[5257,"Nhê ®ã nh÷ng c«ng viÖc sau cã thÓ thùc hiÖn dÔ dµng h¬n: *Di chuyÓn m¸y tr¹m trong LAN dÔ dµng"],[5258,"* Thªm m¸y tr¹m vµo LAN dÔ dµng"],[5259,"*Thay ®æi cÊu h×nh LAN dÔ dµng"],[5260,""],[5261,"469 *KiÓm so¸t giao th«ng m¹ng dÔ dµng"],[5262,"*Gia t¨ng kh¶ n¨ng b¶o mËt"],[5263,"TÊt c¶ c¸c user ®−îc g¾n vµo cïng port lµ cïng mét VLAN"],[5264,"H×nh 8.1.4 8.1.5 C¸c lo¹i VLAN Cã 3 lo¹i thµnh viªn VLAN ®Ó x¸c ®Þnh vµ kiÓm so¸t viÖc sö lý c¸c gãi d÷ liÖu: *VLAN theo port *VLAN theo ®Þa chØ MAC *VLAN theo giao thøc"],[5265,"470 H×nh 8.1.5.1"],[5266,"3 lo¹i thµnh viªn VLAN *User thuéc lo¹i VLAN nµo lµ tuú thuéc vµo port kÕt nèi cña user ®ã"],[5267,"*Kh«ng cÇn t×m trong c¬ së d÷ liÖu khi x¸c ®Þnh thµnh viªn VLAN *DÔ dµng qu¶n lý b»ng giao diÖn ®å ho¹(GUIs)"],[5268,"Qu¶n lý thµnh viªn cña VLAN theo port còng dÔ dµng vµ ®¬n gi¶n"],[5269,"*B¶o mËt tèi ®a gi÷a c¸c VLAN *Gãi d÷ liÖu kh«ng bÞ \u201crß rØ\u201d sang c¸c miÒn kh¸c"],[5270,"*DÔ dµng kiÓm so¸t qua m¹ng"],[5271,"471 H×nh 8.1.5.b.X¸c ®Þnh thµnh viªn VLAN theo port"],[5272,"*User thuéc lo¹i VLAN nµo lµ tuú thuéc vµo ®Þa chØ MAC cña user ®ã *Linh ho¹t h¬n nh−ng t¨ng ®é t¶i lªn giao th«ng m¹ng vµ c«ng viÖc qu¶n trÞ m¹ng"],[5273,"*¶nh h−ëng ®Õn hiÖu suÊt ho¹t ®éng, kh¶ n¨ng më réng vµ kh¶ n¨ng qu¶n trÞ v× qu¶n lý thµnh viªn cña VLAN theo ®Þa chØ MAC lµ mét viÖc phøc t¹p"],[5274,"*TiÕn tr×nh xö lý gÇn gièng nh− c¸c líp trªn"],[5275,"H×nh 8.1.5.c X¸c ®Þnh thµnh viªn VLAN theo ®Þa chØ MAC"],[5276,"Sè l−îng VLAN trªn mét switch phô thuéc vµo c¸c yÕu tè sau:"],[5277,"472 +Dßng giao th«ng +Lo¹i øng dông +Sù qu¶n lý m¹ng +Sù ph©n nhãm Ngoµi ra mét yÕu tè quan träng mµ chóng ta cÇn quan t©m lµ kÝch th−íc cña switch vµ s¬ ®å chia ®Þa chØ IP VÝ dô: Mét m¹ng sö dông ®Þa chØ m¹ng cã 24 bÝt subnet mask, nh− vËy mçi subnet cã tæng céng 254 ®Þa chØ host"],[5278,"Chóng ta nªn sö dông mèi t−¬ng quan mét- mét gi÷a VLAN vµ IP subnet"],[5279,"Do ®ã, mçi VLAN t−¬ng øng víi mét IP subnet, cã tèi ®a 254 thiÕt bÞ"],[5280,"Thieu hinh ve ko co hinh PhÇn header cña frame sÏ ®−îc ®ãng gãi l¹i vµ ®iÒu chØnh ®Ó cã thªm th«ng tin vÒ VLAN ID tr−íc khi frame ®−îc truyÒn lªn ®−êng truyÒn kÕt nèi gi÷a c¸c switch"],[5281,"C«ng viÖc nµy gäi lµ d¸n nh·n cho frame"],[5282,"Sau ®ã, phÇn header cña frame ®−îc tr¶ l¹i nh− cò tr−íc khi truyÒn xuèng cho thiÕt bÞ ®Ých"],[5283,"Cã hai ph−¬ng ph¸p chñ yÕu ®Ó d¸n nh·n frame lµ Intr \u2013 Switch Link(ISL) vµ 802.1Q.ISL tõng ®−îc sö dông phæ biÕn nh−ng b©y giê ®ang thay thÕ bëi 802.1Q"],[5284,"XÐt vÝ dô trªn h×nh 8.1.5.d: Switch l−u riªng tõng b¶ng chuyÓn m¹ch t−¬ng øng víi mçi VLAN"],[5285,"Switch nhËn frame vµo tõ VLAN nµo th× chØ häc ®Þa chØ nguån vµ t×m ®Þa chØ ®Ých trong b¶ng chuyÓn m¹ch cña VLAN ®ã"],[5286,"Nhê ®ã switch b¶o ®¶m chØ thùc hiÖn chuyÓn m¹ch trong cïng mét VLAN"],[5287,"B©y giê gi¶ sö m¸y tr¹m trong VLAN1 cña switch A göi gãi d÷ liÖu cho m¸y tr¹m trong VLAN 1 cña switch B"],[5288,"Switch A nhËn ®−îc gãi d÷ liÖu nµy vµo tõ port n»m trong VLAN1, do ®ã nã t×m ®Þa chØ ®Ých trong b¶ng chuyÓn m¹ch cña VLAN1"],[5289,"Sau ®ã switch x¸c ®Þnh lµ ph¶i chuyÓn frame nµy lªn ®−êng backbone"],[5290,"Tr−íc khi chuyÓn frame lªn ®−êng"],[5291,"473 backbone th× Switch A sÏ ®ãng gãi l¹i cho frame, trong ®ã phÇn header cña frame cã thªm th«ng tin vÒ VLAN ID cho biÕt gãi d÷ liÖu nµy thuéc VLAN1"],[5292,"C«ng viÖc nµy gäi lµ d¸n nh·n frame"],[5293,"Sau ®ã Switch B nhËn ®−îc gãi d÷ liÖu tõ ®−êng backbone xuèng, dùa vµo VLAN ID trong gãi, Switch x¸c ®Þnh gãi d÷ liÖu nµy tõ VLAN1 nªn nã t×m ®Þa chØ ®Ých trong b¶ng chuyÓn m¹ch cña VLAN1"],[5294,"Switch B t×m ®−îc port ®Ých cña gãi d÷ liÖu"],[5295,"Tr−íc khi chuyÓn gãi xuèng m¸y ®Ých, Switch t×m ®−îc port ®Ých cña gãi d÷ liÖu"],[5296,"Tr−íc khi chuyÓn gãi xuèng m¸y ®Ých, Switch B tr¶ l¹i ®Þnh d¹ng ban ®Çu cña phÇn header trong gãi d÷ liÖu, hay cßn gäi lµ gì nh·n frame"],[5297,"M« pháng LAN (LANE \u2013 LAN Emulation) lµm cho m¹ng ATM(Asynchronous Transfer Mode) b¾t ch−íc gièng m¹ng Ethernet"],[5298,"Trong LANE, kh«ng cã d¸n nh·n frame mµ sö dông kÕt nèi ¶o ®Ó biÓu thÞ choVLAN ID"],[5299,"8.2 CÊu h×nh VLAN 8.2.1"],[5300,"CÊu h×nh VLAN c¬ b¶n Trong m«i tr−êng chuyÓn m¹ch, mét m¸y tr¹m chØ nhËn ®−îc giao th«ng nµo göi ®Õn nã"],[5301,"Nhê ®ã, mçi m¸y tr¹m ®−îc dµnh riªng vµ trän vÑn b¨ng th«ng cho ®−êng truyÒn vµ nhËn"],[5302,"Kh«ng gièng nh− hÖ thèng hus chia sÎ chØ cã mét m¸y tr¹m ®−îc phÐp truyÒn t¹i mét thêi ®iÓm, m¹ng chuyÓn m¹ch cã thÓ cho phÐp nhiÒu phiªn giao dÞch cïng mét lóc trong mét miÒn qu¶ng b¸ mµ kh«ng lµm ¶nh h−ëng ®Õn c¸c m¸y tr¹m kh¸c bªn trong còng nh− bªn ngoµi miÒn qu¶ng b¸"],[5303,"VÝ dô nh− trªn h×nh 8.2.1.a, cÆp A/B, C/D, E/F cã thÓ ®ång thêi liªn l¹c víi nhau mµ kh«ng ¶nh h−ëng ®Õn c¸c cÆp m¸y kh¸c"],[5304,""],[5305,"474 H×nh 8.2.1.a Mçi VLAN cã mét ®Þa chØ m¹ng Líp 3 riªng: Nhê ®ã router cã thÓ chuyÓn gãi gi÷a c¸c VLAN víi nhau"],[5306,"Chóng ta cã thÓ x©y dùng VLAN cho m¹ng tõ ®Çu cuèi - ®Õn - ®Çu cuèi hoÆc theo giíi h¹n ®Þa lý"],[5307,"H×nh 8.2.1.b VLAN tõ ®Çu cuèi- ®Õn - ®Çu cuèi"],[5308,"Mét m¹ng VLAN tõ ®Çu cuèi - ®Õn - ®Çu cuèi cã c¸c ®Æc ®iÓm nh− sau: *User ®−îc ph©n nhãm vµo VLAN hoµn toµn kh«ng phô thuéc vµo vÞ trÝ vËt lý, chØ phô thuéc vµo chøc n¨ng c«ng viÖc cña nhãm"],[5309,"*Mäi user trong cïng mét VLAN ®Òu cã chung tØ lÖ giao th«ng 80/20(80% giao th«ng trong VLAN, 20% giao th«ng ra ngoµi VLAN) *Khi user di chuyÓn trong hÖ thèng m¹ng vÉn kh«ng thay ®æi VLAN cña user ®ã"],[5310,"*Mçi VLAN cã nh÷ng yªu cÇu b¶o mËt riªng cho mäi thµnh viªn cña VLAN ®ã"],[5311,"B¾t ®Çu tõ tÇng truy cËp, port trªn switch ®−îc cÊp xuèng cho mçi user"],[5312,"Ng−êi sö dông di chuyÓn trong toµn bé hÖ thèng m¹ng ë mäi thêi ®iÓm nªn mçi switch ®Òu"],[5313,"475 lµ thµnh viªn cña mäi VLAN"],[5314,"Switch ph¶i d¸n nh·n frame khi chuyÓn frame gi÷a c¸c switch tÇng truy cËp víi switch ph©n phèi"],[5315,"ISL lµ giao thøc ®éc quyÒn cña Cisco ®Ó d¸n nh·n cho frame khi truyÒn frame gi÷a c¸c switch víi nhau vµ víi router"],[5316,"CßnIEEE802.1Q lµ mét chuÈn ®Ó d¸n nh·n frame"],[5317,"Catalyst 2950 kh«ng hç trî ISL trunking"],[5318,"C¸c server ho¹t ®éng theo chÕ ®é client/server"],[5319,"Do ®ã c¸c server theo nhãm nªn ®Æt trong cïng VLAN víi nhãm user mµ server ®ã phôc vô, nh− vËy sÏ gi÷ cho dßng l−u l−îng tËp trung trong VLAN, gióp tèi −u ho¸ ho¹t ®éng chuyÓn m¹ch líp 2"],[5320,"Router ë tÇng trôc chÝnh ®−îc sö dông ®Ó ®Þnh tuyÕn gi÷a c¸c subnet"],[5321,"Toµn bé hÖ thèng nµy cã tØ lÖ l−u l−îng lµ 80% l−u l−îng trong néi bé mçi VLAN, 20% giao th«ng ®i qua router ®Õn c¸c server toµn bé hÖ thèng vµ ®i ra internet, WAN"],[5322,"8.2.2"],[5323,"Vlan theo ®Þa lý"],[5324,"VLAN tõ ®Çu cuèi - ®Õn - ®Çu cuèi cho phÐp ph©n nhãm nguån tµi nguyªn sö dông, vÝ dô nh− ph©n nhãm user theo server sö dông, nhãm dù ¸n vµ theo phßng ban.."],[5325,"Môc tiªu cña VLAN tõ ®Çu ®Õn cuèi - ®Õn - ®Çu cuèi lµ gi÷ 80% giao th«ng trong néi bé cña VLAN"],[5326,"Khi c¸c hÖ thèng m¹ng tËp ®oµn thùc hiÖn tËp trung tµi nguyªn m¹ng th× VLAN tõ ®Çu cuèi - ®Õn - ®Çu cuèi rÊt khã thùc hiÖn môc tiªu cña m×nh"],[5327,"Khi ®ã user cÇn ph¶i sö dông nhiÒu nguån tµi nguyªn kh¸c nhau kh«ng n»m trong cïng VLAN víi user"],[5328,"ChÝnh v× xu h−íng sö dông vµ ph©n bè tµi nguyªn m¹ng kh¸c ®i nªn hiÖn nay VLAN th−êng ®−îc t¹o ra theo giíi h¹n cña ®Þa lý"],[5329,"Ph¹m vi ®Þa lý cã thÓ lín b»ng c¶ mét toµ nhµ hoÆc còng cã thÓ chØ nhá víi mét switch"],[5330,"Trong cÊu tróc VLAN nµy"],[5331,"Tû lÖ l−u l−îng sÏ lµ 20/80, 20% giao th«ng trong néi bé VLAN vµ 80% giao th«ng ®i ra ngoµi VLAN"],[5332,"§iÓm nµy cã nghÜa lµ l−u l−îng ph¶i ®i qua thiÕt bÞ líp 3 míi ®Õn ®−îc 80% nguån tµi nguyªn"],[5333,"KiÓu thiÕt kÕ nµy cho phÐp viÖc truy cËp nguån tµi nguyªn ®−îc thèng nhÊt"],[5334,""],[5335,"476 H×nh 8.2.2 8.2.3 CÊu hinh VLAN cè ®Þnh"],[5336,"VLAN cè ®Þnh lµ VLAN ®−îc cÊu h×nh theo port trªn switch b»ng c¸c phÇn mÒm qu¶n lý hoÆc cÊu h×nh trùc tiÕp trªn switch"],[5337,"C¸c port ®· ®−îc g¸n vµo VLAN nµo th× nã sÏ gi÷ nguyªn cÊu h×nh VLAN ®ã cho ®Õn khi ®−îc thay ®æi b»ng lÖnh"],[5338,"§©y lµ cÊu tróc VLAN theo ®Þa lý, c¸c user ph¶i ®i qua thiÕt bÞ líp 3 míi truy cËp 80% tµi nguyªn m¹ng"],[5339,"Lo¹i VLAN cè ®Þnh ho¹t ®éng tèt trong nh÷ng m¹ng cã ®Æc ®iÓm nh− sau: \u2022 Sù di chuyÓn trong m¹ng ®−îc qu¶n lý vµ kiÓm so¸t"],[5340,"\u2022 Cã phÇn mÒm qu¶n lý VLAN m¹nh ®Ó cÊu h×nh port trªn switch"],[5341,"\u2022 Kh«ng dµnh nhiÒu t¶i cho ho¹t ®éng duy tri ®Þa chØ MAC cña thiÕt bÞ ®Çu cuèi vµ ®iÒu chØnh b¶ng ®Þa chØ"],[5342,"VLAN ®éng th× kh«ng phô thuéc vµo port trªn switch"],[5343,"Sau ®©y lµ c¸c h−íng dÉn khi b¹n cÊu h×nh VLAN trªn Cisco 29xx switch: \u2022 Sè l−îng VLAN tèi ®a phô thuéc vµo switch"],[5344,"\u2022 VLAN 1 lµ VLAN mÆc ®Þnh cña nhµ s¶n xuÊt"],[5345,""],[5346,"477 \u2022 VLAN 1 lµ VLAN Ethernet mÆc ®Þnh"],[5347,"\u2022 Giao thøc ph¸t hiÖn thiÕt bÞ Cisco (Cisco Discovery Protocol \u2013 CDP) vµ giao thøc VLAN Trunking (VTP) ®Òu giö gãi qu¶ng b¸ cña m×nh trong VLAN 1"],[5348,"\u2022 §Þa chØ IP cña Catalyst 29xx mÆc ®Þnh n»m trong miÒn qu¶ng b¸ VLAN 1"],[5349,"\u2022 Switch ph¶i ë chÕ ®é VTP server ®Ó t¹o, thªm hoÆc xo¸ VLAN"],[5350,"ViÖc t¹o VLAN trªn switch rÊt ®¬n gi¶n vµ râ rµng"],[5351,"NÕu b¹n sö dông switch víi cisco IOS, b¹n vµo chÕ ®é cÊu h×nh VLAN b»ng lÖnh vlan database ë chÕ ®é EXEC ®Æc quyÒn, sau ®ã b¹n t¹o VLAN: Switch # vlan database"],[5352,"Switch (vlan) # vlan vlan_number"],[5353,"Switch (vlan) # exit"],[5354,"Sau khi ®· cã VLAN trªn switch, b−íc tiÕp theo lµ c¸c b¹n g¸n port vµo VLAN: Switch (config) # interfase fastethernet 0/9"],[5355,"Switch (config-if)#switchport access vlan vlan_number"],[5356,"8.2.4"],[5357,"Kiểm tra cÊu h×nh VLAN"],[5358,"B¹n dïng c¸c lÖnh sau ®Ó kiÓm tra cÊu h×nh VLAN: show vlan, show vlan brief, show vlan id id_number"],[5359,"B¹n nªn nhí 2 ®iÒu kiÖn sau: \u2022 TÊt c¶ c¸c VLAN ®−îc t¹o ra chØ b¾t ®Çu ®−îc sö dông khi ®· cã port ®−îc ph©n cho nã"],[5360,"\u2022 MÆc ®Þnh, tÊt c¶ c¸c port ethernet ®Òu n»m trong VLAN 1"],[5361,""],[5362,"478 H×nh 8.2.4.a H×nh 8.2.4.b 8.2.5"],[5363,"L−u cÊu h×nh VLAN"],[5364,"B¹n nªn l−u cÊu h×nh VLAN thµnh mét tËp tin v¨n b¶n ®Ó cã thÓ biªn tËp l¹i hoÆc ®Ó dù phßng"],[5365,""],[5366,"479 B¹n cã thÓ l−u cÊu h×nh switch b»ng lÖnh copy running-config tftp hoÆc b»ng chøc n¨ng ghi l¹i v¨n b¶n (capture text) cña HyperTerminal"],[5367,"H×nh 8.2.5 8.2.6"],[5368,"Xo¸ VLAN"],[5369,"Xo¸ mét VLAN trªn switch còng gièng nh− mét dßng lÖnh xo¸ trong cÊu h×nh router vËy"],[5370,"§¬n gi¶n lµ b¹n t¹o VLAN b»ng lÖnh nµo th× b¹n dïng d¹ng ®ã cña c©u lÖnh ®ã ®Ó xo¸ VLAN"],[5371,"Khi mét VLAN ®· bÞ xo¸ ®i th× tÊt c¶ c¸c port cña VLAN ®ã sÏ ë tr¹ng th¸i kh«ng ho¹t ®éng nh−ng vÉn thuéc vÒ VLAN ®· bÞ xo¸ cho ®Õn khi nµo c¸c port nµy ®−îc cÊu h×nh sang VLAN kh¸c"],[5372,"H×nh 8.2.6"],[5373,"Xo¸ port 0/9 khái VLAN 300"],[5374,""],[5375,"480 8.3"],[5376,"Xö lý sù cè VLAN"],[5377,"8.3.1"],[5378,"Giíi thiÖu chung"],[5379,"HiÖn nay VLAN ®−îc sö dông phæ biÕn"],[5380,"Víi VLAN, ng−êi kü s− m¹ng cã thÓ linh ho¹t h¬n trong thiÕt kÕ vµ triÓn khai hÖ thèng m¹ng"],[5381,"VLAN gióp giíi h¹n miÒn qu¶ng b¸, gia t¨ng kh¶ n¨ng b¶o mËt vµ ph©n nhãm theo logic"],[5382,"Tuy nhiªn, víi c¬ b¶n chuyÓn m¹ch LAN, sù cè cã thÓ xay ra khi chóng ta triÓn khai VLAN"],[5383,"Trong bµi nµy sÏ cho thÊy mét vµi sù cè cã thÓ x¶y ra víi VLAN vµ cung cÊp cho c¸c b¹n mét sè c«ng cô vµ kü thuËt sö lý sù cè"],[5384,"Sau khi hoµn tÊt bµi nµy c¸c b¹n cã thÓ thùc hiÖn c¸c viÖc sau: \u2022 Ph©n tÝch hÖ thèng ®Ó tiÕp xóc víi sù cè cña VLAN"],[5385,"\u2022 Gi¶i thÝch c¸c b−íc xö lý sù cè nãi chung trong m¹ng chuyÓn m¹ch"],[5386,"\u2022 M« t¶ sù cè Spanning \u2013 Tree dÉn ®Õn trËn b·o qu¶ng b¸ nh− thÕ nµo"],[5387,"\u2022 Sö dông lÖnh show vµ debug ®Ó xö lý sù cè VLAN"],[5388,"8.3.2"],[5389,"TiÕn tr×nh xö lý sù cè VLAN"],[5390,"§iÒu quan träng lµ b¹n ph¶i ph¸t triÓn c¸c b−íc xö lý sù cè trªn switch mét c¸ch cã hÖ thèng"],[5391,"Sau ®©y lµ c¸c b−íc cã thÓ gióp cho b¹n x¸c ®Þnh sù cè trong m¹ng chuyÓn m¹ch: 1"],[5392,"KiÓm tra c¸c biÓu hiÖn vËt lý, nh− tr¹ng th¸i LED"],[5393,"2"],[5394,"B¾t ®Çu tõ mét cÊu h×nh trªn mét switch vµ kiªm tra dÇn ra"],[5395,"3"],[5396,"KiÓm tra kÕt nèi líp 1"],[5397,"4"],[5398,"KiÓm tra kÕt nèi líp 2"],[5399,"5"],[5400,"Xö lý sù cè VLAN x¶y ra trªn nhiÒu switch"],[5401,"Khi xay ra sù cè, b¹n nªn kiÓm tra xem ®©y lµ mét sù cè lÆp ®i lÆp l¹i hay lµ sù cè biÖt lËp"],[5402,"Mét sè sù cè lÆp ®i lÆp l¹i cã thÓ lµ do sù gia t¨ng cña c¸c dÞch vô phôc vô cho m¸y tr¹m, lµm v−ît qua kh¶ n¨ng cÊu h×nh, kh¶ n¨ng ®−êng trunking vµ kh¶ n¨ng truy cËp tµi nguyªn trªn server"],[5403,""],[5404,"481 VÝ dô: ViÖc sö dông c¸c c«ng nghÖ web vµ c¸c øng dông truyÒn thèng nh− truyÒn t¶i file, email...sÏ lµm gia t¨ng mËt ®é giao th«ng lµm cho toµn bé hÖ thèng bÞ tr× trÖ"],[5405,"H×nh 8.3.1 HiÖn nay rÊt nhiÒu m¹ng LAN ph¶i ®èi mÆt víi m« h×nh giao th«ng ch−a ®−îc tÝnh tr−íc, lµ kÕt qu¶ cña sù gia t¨ng giao th«ng trong intranet, Ýt ph©n nhãm server h¬n vµ t¨ng sö dông multicast"],[5406,"Nguyªn t¾c 80/20 víi chØ cã 20% giao th«ng ®i lªn c¸c ®−êng trôc chÝnh ®· trë lªn l¹c hËu"],[5407,"Ngµy nay, c¸c tr×nh duyÖt web néi bé cã thÓ cho phÐp user x¸c ®Þnh vµ truy cËp th«ng tin ë bÊt kú ®©u trong m¹ng néi bé cña tËp ®oµn"],[5408,"NÕu m¹ng th−êng xuyªn bÞ nghÏn m¹ch, qu¸ t¶i, rít gãi vµ truyÒn l¹i nhiÒu lÇn th× nghÜa lµ cã qu¸ nhiÒu port cho mét ®−¬ng trunk hoÆc cã qu¸ nhiÒu yªu cÇu truy suÊt vµo c¸c nguån tµi nguyªn cña toµn hÖ th«ng vµ c¸c server intranet"],[5409,"NghÏn m¹ch còng cã thÓ do phÇn lín giao th«ng ®Òu ®−îc truyÒn lªn ®−êng trôc chÝnh, hoÆc lµ do user më ra nhiÒu tµi nguyªn vµ nhiªu øng dông ®a ph−¬ng tiÖn"],[5410,"Trong tr−êng hîp nµy thÞ hÖ thèng m¹ng nªn n©ng cÊp ®Ó ®¸p øng nhu cÇu ph¸t triÓn"],[5411,"8.3.3"],[5412,"Ng¨n trÆn c¬n b·o qu¶ng b¸"],[5413,""],[5414,"482 TrËn b·o qu¶ng b¸ x¶y ra khi cã qu¸ nhiÒu gãi qu¶ng b¸ ®−îc nhËn vµo trªn mét port"],[5415,"ViÖc sö lý chuyÓn m¹ch c¸c gãi nµy cho hÖ thèng m¹ng ch©m ®i"],[5416,"Chóng ta cã thÓ cÊu h×nh cho switch kiÓm so¸t b·o trªn tõng port"],[5417,"MÆc ®Þnh, chÕ ®é kiÓm so¸t b·o trªn switch bÞ t¾t ®i"],[5418,"§Ó ng¨n chÆn b·o qu¶ng b¸, chóng ta ®Æt mét gi¸ trÞ ng−ìng cho port ®Ó huû gãi d÷ liÖu vµ ®ãng port khi gi¸ trÞ ng−ìng nµy bÞ v−ít qua"],[5419,"STP (Spanning - Tree Protocol) cã mét sè sù cè bao gåm trËn b·o qu¶ng b¸, lÆp vßng, rít gãi BPDU va gãi d÷ liÖu"],[5420,"Chøc n¨ng cña STP lµ b¶o ®¶m kh«ng cã vßng lÆp tån t¹i trong m¹ng b»ng c¸ch chän ra mét bridge gèc"],[5421,"Bridge gèc nµy lµ ®iÓm gèc cña cÊu tróc h×nh c©y vµ n¬i kiÓm so¸t ho¹t ®éng cña giao thøc STP"],[5422,"NÕu cÇn ph¶i gi¶m l−îng giao th«ng BPDU th× b¹n sÏ cµi ®Æt gi¸ trÞ tèi ®a cho c¸c kho¶ng thêi gian ho¹t ®éng cña bridge gèc"],[5423,"§Æc biÖt lµ b¹n nªn ®Æt gi¸ trÞ tèi ®a 30 gi©y cho kho¶ng thêi gian chuyÓn tr¹ng th¸i (Forward delay) vµ thêi gian chê tèi ®a (max - age) lµ 40 gi©y"],[5424,"Mét port vËt lý trªn router hoÆc switch cã thÓ lµ thµnh viªn cña mét hoÆc nhiÒu cÊu tróc h×nh c©y nÕu port nµy kÕt nèi vµo ®−êng trunk"],[5425,"L−u ý: VTP chØ ch¹y trªn Catalyst switch chø kh«ng ch¹y trªn router"],[5426,"Trªn switch kÕt nèi vµo router, b¹n nªn cÊu h×nh cho switch ®ã ch¹y ë chÕ ®é VTP transparent cho ®Õn khi nµo Cisco hç trî VTP trªn router cña hä"],[5427,"Giao thøc Spanning - Tree ®−îc xem lµ mét trong nh÷ng giao thøc líp 2 quan träng nhÊt trªn Catalyst switch"],[5428,"b»ng c¸ch ng¨n chÆn c¸c vßng luËn lý trong m¹ng chuyÓn m¹ch, STP cho phÐp cÊu tróc líp 2 vÉn cã c¸c ®−êng d− ®Ó dù phßng mµ kh«ng g©y ra tr©n b·o qu¶ng b¸"],[5429,""],[5430,"483 TẬP 4 CHƯƠNG I:PHÂN CHIA ĐỊA CHỈ IP GIỚI THIỆU Sự phát triển không ngừng của Internet đã làm cho những nhà nghiên cứu bất ngờ"],[5431,"Một trong những nguyên nhân làm cho Internet phát triển nhanh chóng như vậy là do sự linh hoạt, uyển chuyển của thiết kế ban đầu"],[5432,"Nếu chúng ta không có các biện pháp phân phối địa chỉ IP thì sự phát triển của Internet sẽ làm cạn kiệt nguồn địa chỉ IP"],[5433,"Để giải quyết vấn đề thiếu hụt địa chỉ IP, nhiều biện pháp đã được triển khai"],[5434,"Trong đó, một biện pháp đã được triển khai rộng rãi là chuyển đổi địa chỉ mạng (Network Address Translation \u2013 NAT)"],[5435,"NAT là một cơ chế để tiết kiệm địa chỉ IP đăng kí trong một mạng lớn và giúp đơn giản hóa việc quản lý địa chỉ IP"],[5436,"Khi một gói dữ liệu được định tuyến trong một thiết bị mạng, thường là firewall hoặc các router biên, địa chỉ IP nguồn sẽ được chuyển đổi từ địa chỉ mạng riêng thành địa chỉ IP công cộng định tuyến được"],[5437,"Điều này cho phép gói dữ liệu được truyền đi trong trong mạng công cộng, ví dụ như Internet"],[5438,"Sau đó, địa chỉ công cộng trong gói trả lời lại được chuyển đổi thành địa chỉ riêng để phát vào trong mạng nội bộ"],[5439,"Một dạng của NAT, được gọi là PAT (Port Address Translation), cho phép nhiều địa chỉ riêng được dịch sang một địa chỉ công cộng duy nhất"],[5440,"Router, server và các thiết bị quan trọng khác trong mạng thường đòi hỏi phải được cấu hình bằng tay địa chỉ IP cố định"],[5441,"Trong khi đó, các máy tính client không cần thiết phải đặt cố định một địa chỉ mà chỉ cần xác định một dải địa chỉ cho nó"],[5442,"Dải địa chỉ này thường là một subnet IP"],[5443,"Một máy tính nằm trong subnet có thể được phân phối bất kì địa chỉ nào nằm trong subnet đó"],[5444,""],[5445,"484 Giao thức DHCP (Dynamic Host Configuration Protocol) được thiết kế để phân phối địa chỉ IP và đồng thời cung cấp các thông tin cấu hình mạng quan trọng một cách tự động cho máy tính"],[5446,"Số lượng máy client chiếm phần lớn trong hệ thống mạng, do đó DHCP thực sự là công cụ tiết kiệm thời gian cho người quản trị mạng"],[5447,"Sau khi hoàn tất chương này, các bạn có thể: \u2022 Xác định địa chỉ IP riêng được mô tả trong RFC 1918"],[5448,"\u2022 Nắm được các đặc điểm của NAT và PAT"],[5449,"\u2022 Phân tích các lợi điểm của NAT"],[5450,"\u2022 Phân tích cách cấu hình NAT và PAT, bao gồm cả chuyển đổi cố định, chuyển đổi động và chuyển đổi overloading"],[5451,"\u2022 Xác định các lệnh dùng để kiệm tra cấu hình NAT và PAT"],[5452,"\u2022 Liệt kê các bước xử lý sự cố NAT và PAT"],[5453,"\u2022 Nắm được các ưu điểm và nhược điểm của NAT"],[5454,"\u2022 Mô tả các đặc điểm của DHCP"],[5455,"\u2022 Phân tích sự khác nhau giữa BOOTP và DHCP"],[5456,"\u2022 Phân tích quá trình cấu hình DHCP client"],[5457,"\u2022 Cấu hình DHCP server"],[5458,"\u2022 Xử lý sự cố DHCP"],[5459,"\u2022 Phân tích yêu cầu đặt lại DHCP"],[5460,"1.1"],[5461,"Chia địa chỉ mạng với NAT và PAT 1.1.1"],[5462,"Địa chỉ riêng RFC 1918 dành riêng 3 dải địa chỉ IP sau: \u2022 1 địa chỉ lớp A: 10.0.0.0/8"],[5463,"\u2022 16 địa chỉ lớp B: 172.16.0.0 \u2013 172.31.255.255 (172.16.0.0/12)"],[5464,""],[5465,"485 \u2022 256 địa chỉ lớp C: 192.168.0.0-192.168.255.255 (192.168.0.0/16)"],[5466,"Những địa chỉ trên chỉ dùng cho mạng riêng, mạng nội bộ"],[5467,"Các gói dữ liệu có địa chỉ như trên sẽ không định tuyến được trên Internet"],[5468,"Địa chỉ Internet công cộng phải được đăng ký với một công ty có thẩm quyền Internet, ví dụ như American Registry for Internet Numbers (ARIN) hoặc Réseaux IP Européens (RIPE) và The Regional Internet Registry phụ trách khu vực Châu Âu và Bắc Phi"],[5469,"Địa chỉ IP công cộng còn có thể được thuê từ một nhà cung cấp dịch vụ Internet (ISP)"],[5470,"Địa chỉ IP riêng được dành riêng và có thể được sử dụng bởi bất kỳ ai"],[5471,"Điều này có nghĩa là có thể có 2 mạng hoặc 2 triệu mạng sử dụng cùng một địa chỉ mạng riêng"],[5472,"Router trên Internet sẽ không định tuyến các địa chỉ RFC 1918.ISP cấu hình Router biên ngăn không cho các lưu lượng của địa chỉ riêng được phát ra ngoài"],[5473,"NAT mang đến rất nhiều lợi ích cho các công ty và Internet"],[5474,"Trước đây, khi không có NAT, một máy tính không thể truy cập Internet với địa chỉ riêng"],[5475,"Bây giờ, sau khi có NAT, các công ty có thể cấu hình địa chỉ riêng cho một hoặc tất cả các máy tính và sử dụng NAT để truy cập Internet"],[5476,"1.1.2"],[5477,"Giới thiệu NAT và PAT NAT được thiết kế để tiết kiệm địa chỉ IP và cho phép mạng nội bộ sử dụng địa chỉ IP riêng"],[5478,"Các địa chỉ IP riêng sẽ được chuyển đổi sang địa chỉ công cộng định tuyến được bằng cách chạy phần mềm NAT đặc biệt trên thiết bị mạng"],[5479,"Điều này giúp cho mạng riêng càng được tách biệt và giấu được địa chỉ IP nội bộ"],[5480,"NAT thường được sử dụng trên Router biên của mạng một cửa"],[5481,"Mạng một cửa là mạng chỉ có một kết nối duy nhất ra bên ngoài"],[5482,"Khi một host nằm trong mạng một cửa muốn truyền dữ liệu cho một host nằm bên ngoài nó sẽ truyền gói dữ liệu đến Router biên giới"],[5483,"Router biên giới sẽ thực hiện tiến trình NAT, chuyển đổi địa chỉ"],[5484,"486 riêng của host nguồn sang một địa chỉ công cộng định tuyến được"],[5485,"Trong thuật ngữ NAT, mạng nội bộ có nghĩa là tập hợp các địa chỉ mạng cần chuyển đổi địa chỉ"],[5486,"Mạng bên ngoài là tất cả các địa chỉ khác còn lai"],[5487,"Mạng cục bộ chỉ có một cửa ra mạng bên ngoài"],[5488,"Hình 1.1.2.a"],[5489,"Mạng một cửa Cisco định nghĩa các thuật ngữ NAT như sau: \u2022 Địa chỉ cục bộ bên trong (Inside local address): là địa chỉ được phân phối cho các host bên trong mạng nội bộ"],[5490,"Các địa chỉ này thường không phải là địa chỉ được cung cấp bởi InterNIC (Internet Network Information Center) hoặc bởi nhà cung cấp dịch vụ Internet"],[5491,"Địa chỉ này thường là địa chỉ riêng RFC 1918"],[5492,"\u2022 Địa chỉ toàn cục bên trong (Inside global address): là địa chỉ IP hợp pháp được cung cấp bởi InterNIC hoặc bởi nhà cung cấp dịch vụ Internet"],[5493,"Địa chỉ này đại diện cho một hoặc nhiều địa chỉ nội bộ bên trong đối với thế giới bên ngoài"],[5494,""],[5495,"487 \u2022 Địa chỉ cục bộ bên ngoài (Outside local address): là địa chỉ riêng của host nằm bên ngoài mạng nội bộ"],[5496,"\u2022 Địa chỉ toàn cục bên ngoài (Outside global address): là địa chỉ công cộng hợp pháp của host nằm bên ngoài mạng nội bộ"],[5497,"Hình 1.1.2.b"],[5498,"Host nội bộ 10.0.0.3 muốn gửi gói dữ liệu cho một host nằm ngoài 128.23.2.2"],[5499,"Gói dữ liệu được gửi tới router biên giới RTA"],[5500,"Hình 1.1.2.c"],[5501,"RTA nhận thấy gói dữ liệu này đươc gửi ra ngoài internet nên nó thực hiên tiến trình NAT, chuyến đổi địa chỉ nguồn 10.0.0.3 thành địa chỉ công cộng là 179.9.8.80"],[5502,"Sauk hi thực hiện NAT xong, gói dữ liệu từ RTA đi ra sẽ có địa chỉ nguồn là một địa chỉ công cộng hợp pháp 179.9.8.80"],[5503,""],[5504,"488 Hình 1.1.2.d"],[5505,"Sau đó server 128..23.2.2 có thể gửi lại một gói trả lời"],[5506,"Khi đó gói trả lời sẽ có địa chỉ đích là 179.9.8.80"],[5507,"Hình 1.1.2.e"],[5508,"RTA nhận thấy gói dữ liệu này được gửi từ bên ngoài vào trong mạng nội bộ"],[5509,"RTA sẽ tìm trong bảng NAT để ánh xạ từ địa chỉ đích công cộng sang địa chỉ riêng tương ứng"],[5510,"Sau khi thực hiên NAT xong, gói dữ liệu từ RTA phát vào trong mạng nội bộ sẽ có địa chỉ đích là địa chỉ riêng của host đích 10.0.0.3"],[5511,"Xét ví dụ hình 1.1.2.b, đối với RTA: \u2022 Địa chỉ nội bộ bên trong là 10.0.0.3"],[5512,"\u2022 Địa chỉ toàn cục bên trong là: 179.9.8.80"],[5513,"\u2022 Địa chỉ toàn cục bên ngoài là: 128.23.2.2"],[5514,""],[5515,"489 1.1.3"],[5516,"Các đặc điểm của NAT và PAT Chuyển đổi NAT rất hữu ích cho nhiều mục đích khác nhau và có thể chuyển đổi động hoặc cố định"],[5517,"NAT cố định được thiết kế để ánh xạ một-một, từ một địa chỉ nội bộ sang một địa chỉ công cộng tương ứng duy nhất"],[5518,"Điều này rất tốt đối với những host cần phải có địa chỉ nhất định để truy cập từ Internet"],[5519,"Những host này có thể là các server toàn hệ thống hoặc các thiết bị mạng"],[5520,"NAT động được thiết kế để ánh xạ một địa chỉ IP riêng sang một địa chỉ công cộng một cách tự động"],[5521,"Bất kỳ địa chỉ IP nào nằm trong dải địa chỉ IP công cộng đã được định trước đều có thể được gán cho một host bên trong mạng"],[5522,"Overloading hoặc PAT có thể ánh xạ nhiều địa chỉ IP riêng sang một địa chỉ IP công cộng vì mỗi địa chỉ riêng được phân biệt bằng số port"],[5523,"PAT sử dụng số port nguồn cùng với địa chỉ IP riêng bên trong để phân biệt khi chuyển đổi"],[5524,"Số port được mã hóa 16 bit"],[5525,"Do đó có tới 65.536 địa chỉ nội bộ có thể được chuyển đổi sang một địa chỉ công cộng"],[5526,"Thực tế thì số lượng port có thể gán cho một địa chỉ IP là khoảng 4000 port"],[5527,"PAT sẽ cố gắng giữ nguyên số port nguồn ban đầu"],[5528,"Nhưng nếu số port này đã bị sử dụng thi PAT sẽ lấy số port còn trống đầu tiên trong các nhóm port 0-511, 512-1023, 1024-65535"],[5529,"Khi không còn số port nào còn trống và vẫn còn địa chỉ IP công cộng khác đã được cấu hình thì PAT sẽ chuyển sang địa chỉ IP công cộng kế tiếp và bắt đàu xác định số port nguồn như trên"],[5530,"Quá trình này sẽ được thực hiện cho đến khi nào hết số port và địa chỉ IP công cộng còn trống"],[5531,""],[5532,"490 Hình 1.1.3.a"],[5533,""],[5534,"Hình 1.1.3.b"],[5535,""],[5536,"491 Hình 1.1.3.c"],[5537,"Host 10.0.0.3 gửi gói dữ liệu ra internet"],[5538,"Trong gói dữ liệu này, địa chỉ IP nguồn là 10.0.0.3, port là 1444 Hình 1.1.3.d"],[5539,"Router thực hiện chuyển đổi địa chỉ IP nguồn từ 10.0.0.3 sang địa chỉ 179.9.8.80, port nguồn vẫn giữ nguyên là 1444"],[5540,"Hình 1.1.3.e"],[5541,"Bây giờ Host 10.0.0.4 cũng gửi gói dữ liệu ra internet với địa chỉ nguồn là 10.0.0.4, port nguồn là 1444"],[5542,"492 Hình 1.1.3.f"],[5543,"Router thực hiện chuyển đổi địa chỉ IP nguồn từ 10.0.0.4 sang 179.9.8.80"],[5544,"Port nguồn là 1444 lúc này phải đổi sang 1445"],[5545,"Như vậy theo như bảng NAT trong hình ta thấy địa chỉ công cộng 179.9.8.80: 1444 là tương ứng với 10.0.0.3:1444, 179.9.8.80:1445 tương ứng với 10.0.0.4:1444"],[5546,"Bằng cách sử dụng kết hợp với số port như vậy, PAT có thể ánh xạ một địa chỉ IP công cộng cho nhiều địa chỉ riêng bên trong"],[5547,"NAT cung cấp những lợi điểm sau: \u2022 Không cần phải gán địa chỉ IP mới cho từng host khi thay đổi sang một ISP mới"],[5548,"Nhờ đó có thể tiết kiệm được thời gian và tiền bạc"],[5549,"\u2022 Tiết kiệm địa chỉ thông qua ứng dụng ghép kênh cấp độ port"],[5550,"Với PAT, các host bên trong có thể chia sẻ một địa chỉ IP công cộng để giao tiếp với bên ngoài"],[5551,"Với cách cấu hình này, chúng ta cần rất ít địa chỉ công cộng, nhờ đó có thể tiết kiệm địa chỉ IP"],[5552,"\u2022 Bảo vệ mạng an toàn vì mạng nội bộ không để lộ địa chỉ và cấu trúc bên trong ra ngoài"],[5553,"1.1.4"],[5554,"Cấu hình NAT và PAT"],[5555,"493 1.1.4.1"],[5556,"Chuyển đổi cố định Để cấu hình chuyển đổi cố định địa chỉ nguồn bên trong, chúng ta cấu hình các bước như sau: Bước Thực hiện Ghi chú 1 Thiết lập mối quan hệ chuyển đổi giữa địa chỉ nội bộ bên trong và địa chỉ đại diện bên ngoài Router (config) # ip nat inside source static local-ip global-ip Trong chế độ cấu hình toàn cục, bạn dùng câu lệnh no ip nat inside source static để xóa sụ chuyển đổi địa chỉ cố định"],[5557,"2 Xác định cổng kết nối vòa mạng bên trong"],[5558,"Router (config) # interface type number Sau khi gõ lệnh interface, dấu nhắc của dòng lệnh sẽ chuyển từ (config) # sang (config-if) # 3 Đánh dấu cổng này là cổng kết nối vào mạng nội bộ bên trong"],[5559,"Router (config-if) # ip nat inside 4 Thóat khỏi chế độ cấu hình cổng hiện tại"],[5560,"Router (config-if) # exit 5 Xác định cổng kết nối ra mạng công cộng bên ngoài"],[5561,"Router (config) # interface type number"],[5562,"494 6 Đánh dấu cổng này là cổng kết nối ra mạng công cộng bên ngoài"],[5563,"Router (config-if) # ip nat outside Hình vẽ - 2 hình Hình 1.1.4.a Sự chuyển đổi địa chỉ sẽ được thưc hiện giữa hai cổng inside và outside"],[5564,"495 Hình 1.1.4.b"],[5565,"Cấu hình NAT chuyển đổi cố định từ địa chỉ 10.1.1.2 sang 192.168.1.2"],[5566,"Khi có một gói dữ liệu từ host 10.1.1.2 được gửi ra ngoài internet, router GW sẽ chuyển đổi địa chỉ nguồn 10.1.1.2 của gói dữ liệu sang địa chỉ 192.168.1.2 trước khi phát gói ra cổng s0"],[5567,"1.1.4.2"],[5568,"Chuyển đổi động Để Chuyển đổi động địa chỉ nguồn bên trong, chúng ta cấu hình theo các bước như sau: Bước Thực hiện Ghi chú 1 Xác định dải địa chỉ đại diện bên ngoài Rourter (config) # ip nat pool name start-ip end-ip [netmask netmask /prefix-length prefix-length] Trong chế độ cấu hình toàn cục, gõ lệnh no ip nat pool name để xóa dải địa chỉ đại diên bên ngoài"],[5569,"2 Thiết lập ACL cơ bản cho phép những địa chỉ nội bộ bên trong nào được chuyển đổi"],[5570,"Router (config) # access-list access-list- number permit source [source-wildcard] Trong chế độ cấu hình toàn cục, gõ lệnh no access-list access-list- number để xóa ACL đó"],[5571,"3 Thiết lập mối liên quan giữa địa chỉ nguồn đã được xác định trong ACL ở bước trên với dải địa chỉ đại diện bên ngoài: Router (config) # ip nat inside source list access-list-number pool name Trong chế độ cấu hình toàn cục, gõ lênh no ip nat inside source để xóa sự chuyển đổi động này 4 Xác định cổng kết nối vào mạng nội bộ Sau khi gõ xong lệnh"],[5572,"496 Router (config) # interface type number interface, dấu nhắc của dòng lệnh sẽ chuyển đổi từ config sang (config-if)# 5 Đánh dấu cổng này là cổng kết nối vào mạng nội bộ"],[5573,"Router (config-if) # ip nat inside 6 Thóat khỏi chế độ cổng hiện tại"],[5574,"Router (config) # exit 7 Xác định cổng kết nối ra bên ngoài"],[5575,"Router (config) # interface type number 8 Đánh dấu cổng này là cổng kết nối ra bên ngoài"],[5576,"Router (config) # ip nat outside Danh sách điều khiển truy cập (ACL \u2013 Access Control List) cho phép khai báo những địa chỉ nào được chuyển đổi"],[5577,"Bạn nên nhớ là kết thúc một ACL luôn có câu lệnh ẩn cấm tuyệt đối để tránh những kết quả không dự tính được khi một ACL có quá nhiều điều kiện cho phép"],[5578,"Cisco khuyến cáo là không nên dùng điều kiện cho phép tất cả permit any trong ACL sử dụng cho NAT vì câu lệnh này làm hao tốn quá nhiều tài nguyên của Router và do đó có thể gây ra sự cố mạng"],[5579,""],[5580,"497 Hình 1.1.4.c Xét ví dụ hình 1.1.4.c: Dải địa chỉ công cộng đại diện ben ngoài có tên là nat- pool1, bao gồm các địa chỉ từ 179.9.8.80 đến 179.9.95"],[5581,"Địa chỉ nội bộ bên trong được phép chuyển đổi được định nghĩa trong access-list 1 là 10.1.0.0 \u2013 10.1.0.255"],[5582,"Như vậy, gói dữ liệu nào trong mạng nội bộ đi ra ngoài Internet có địa chỉ nguồn nằm trong dải địa chỉ 10.1.0.0 \u2013 10.1.0.255 sẽ được chuyển đổi địa chỉ nguồn sang một trong bất kỳ địa chỉ nào còn trống trong dải địa chỉ công cộng 179.9.8.80 \u2013 179.9.8.95"],[5583,"Host 10.1.1.2 sẽ không được chuyển đổi địa chỉ vì địa chỉ của nó không được cho phép trong acces-list 1, do đó nó không truy cập được Internet"],[5584,"Overloading hay PAT Overloading được cấu hình theo hai cách tùy theo địa chỉ IP công cộng được cấp phát như thể nào"],[5585,"Một ISP có thể cho một hệ thống mạng của khách hàng sử dụng chung một địa chỉ IP công cộng duy nhất, đia jchỉ IP công cộng này chính là địa chỉ của cổng giao tiểp trên Router nối về ISP"],[5586,"Sau đây là ví dụ cấu hình cho tình huống này:"],[5587,"498 Router (config) # access-list 1 permit 10.0.0.0 0.0.255.255 Router (config) ip nat inside source list 1 interface serial0/0 overload Bước Thực hiện Ghi chú 1 Tạo ACL để cho phép những địa chỉ nội bộ nào được chuyển đổi"],[5588,"Router(config) # access-list acl-number permit source [source-wildcard] Trong chế độ cấu hình toàn cục, gõ lệnh no access-list access-list- number để xóa access-list tương ứng"],[5589,"2A Thiết lập mối liên quan giữa địa chỉ nguồn đã được xác định trong access-list ở bước trên với địa chỉ đại diện là địa chỉ của cổng kết nối với bên ngoài"],[5590,"Router (config) # ip nat inside source list acl- number interface interface overload Trong chế độ cấu hình toàn cục, gõ lệnh no ip nat inside source để xóa sự chuyển đổi động này"],[5591,"Từ khóa overload để cho phép chạy PAT Hoặc 2B Khai báo dải địa chỉ đại diện bên ngoài dùng overload"],[5592,"Router (config) ip nat pool name start-ip end- ip [netmask netmask / prefix-length prefix- length] Thiết lập chuyển đổi overload giữa địa chỉ nội bộ đã được xác định trong ACL ở bước 1 với dải địa chỉ đại diện bên ngoài mới khai báo ở"],[5593,"499 trên"],[5594,"Router (config) # ip nat inside source list acl- number pool name overload 3 Xác định cổng kết nối với mạng nội bộ"],[5595,"Router (config) # interface type number Router (config-if) # ip nat inside Sau khi gõ lệnh interface, dấu nhắc của dòng lệnh sẽ được đổi từ (config)# sang (config-if)# 4 Xác định cổng kết nối với bên ngoài"],[5596,"Router (config) # interface type number Router (config-if) # ip nat outside"],[5597,"Một cách khác để cấu hình Overload là khi ISP cung cấp một hoặc nhiều địa chỉ IP công cộng để cho hệ thống mạng khách hàng sử dụng làm dải địa chỉ chuyển đổi PAT"],[5598,"Cấu hình ví dụ cho tình huống này như sau: \u2022 Xác định địa chỉ nội bộ được phép chuyển đổi là 10.0.0.0/16:"],[5599,"500 Router (config) # access-list 1 permit 10.0.0.0.0.0.255.255 \u2022 Khai báo dải địa chỉ đại diện bên ngoài với tên là nat-pool2, bao gồm các địa chỉ trong subnet 179.9.8.20/28: Router (config) # ip nat pool nat-pool2 179.9.8.20 netmask 255.255.255.240 \u2022 Thiết lập sự chuyển đổi Overload địa chỉ nội bộ được xác định trong access- list 1 với dải địa chỉ đại diện nat pool2: Router (config) # ip nat inside source list 1 pool nat-pool2 overload Hình 1.1.4.d"],[5600,"Xét ví dụ hình 1.1.4.d: địa chỉ nội bộ bên trong được phép chuyển đổi được xác định trong access-list 1 là 192.168.2.0/24 và 192.168.3.0/24"],[5601,"Địa chỉ đại diện bên ngoài là địa chỉ của cổng serial 0, cổng kết nối ra Internet"],[5602,"Như vậy phải toàn bộ địa chỉ bên trong được chuyển đổi PAT với một địa chỉ IP đại diện duy nhất là địa chỉ của cổng kết nối ra Internet, cổng serial 0"],[5603,""],[5604,"501 1.1.5"],[5605,"Kiểm tra cấu hình PAT Sau khi NAT đã được cấu hình, chúng ta có thể dùng lệnh clear và show để kiểm tra hoạt động của NAT"],[5606,"Mặc định, trong bảng chuyển đổi NAT động, mỗi một cặp chuyển đổi địa chỉ sẽ bị xóa đi sau một khoảng thời gian không sử dụng"],[5607,"Với chuyển đổi không sử dụng chỉ số Port thì khoảng thời gian mặc định là 24 giờ"],[5608,"Chúng ta có thể thay đổi khoảng thời gian này bằng lệnh ip nat translation timeout timeout_seconds trong chế độ cấu hình toàn cục"],[5609,"Các thông tin về sự chuyển đổi có thể được hiển thị bằng các lệnh sau: Lệnh Giải Thích Clear ip nat translation * Xóa mọi cặp chuyển đổi địa chỉ động trong bảng NAT"],[5610,"Clear ip nat translation inside global- ip local-ip [outside local-ip global-ip] Xóa một cặp chuyển đổi địa chỉ động bên trong hoặc cả bên trong và bên ngoài tương ứng với địa chỉ cụ thể được khai báo trong câu lệnh"],[5611,"Clear ip nat translation protocol inside global-ip global-port local-ip local-port [outside local-ip local-port global-ip global-port] Xóa một cặp chuyển đổi địa chỉ động mở rộng"],[5612,"Show ip nat translations Hiển thị bảng NAT đang hoạt động"],[5613,"Show ip nat statistics Hiển thị trạng thái hoạt động của NAT"],[5614,""],[5615,"502 Hình 1.1.5.a Hình 1.1.5.b Chúng ta có thể dùng lệnh show run để kiểm tra lại các giá trị cần khai báo trong các câu lệnh cấu hình NAT, access-list, interface"],[5616,"1.1.6"],[5617,"Xử lý sự cố cấu hình NAT và PAT Thường rất khó xác định nguyên nhân của sự cố khi kết nối IP bị sự cố trong môi trường NAT"],[5618,"Nhiều khi chúng ta nhầm lẫn là do NAT gây ra nhưng thực sự nguyên nhân lại nằm ở chỗ khác"],[5619,"Khi cố gắng xác định nguyên nhân sự cố của một kết nối IP, chung ta nên cố gắng xác định loại trừ khả năng từ NAT trước"],[5620,"Sau đay là các bước để kiểm tra hoạt động của NAT: 1"],[5621,"Dựa vào tập tin cấu hình, xác định rõ ràng NAT thực hiện những gì"],[5622,"2"],[5623,"Kiểm tra bảng NAT xem các chuyển đổi địa chỉ có đúng không"],[5624,"3"],[5625,"Kiểm tra hoạt động NAT xảy ra như thế nào bằng các lệnh show và debug"],[5626,"4"],[5627,"Xem chi tiết những gì xảy ra cho một gói dữ liệu và kiểm tra xem router có định tuyến đúng cho gói dữ liệu hay không"],[5628,""],[5629,"503 Sử dụng lệnh debug ip nat để kiểm tra hoạt động của NAT, hiển thị các thông tin về mỗi gói được chuyển đổi NAT bởi router"],[5630,"Lệnh debug ip nat detal còn cung cấp thêm một số thông tin liên quan đến sự chuyển của mỗi gói giúp chúng ta xác định lỗi, ví dụ như lỗi không xác định được địa chỉ đại diện bên ngoài"],[5631,"Hình 1.1.6 Xét ví dụ hình 1.1.6"],[5632,"Hai dòng đầu tiên cho thấy các gói yêu cầu và trả lời DNS được phát đi"],[5633,"Những dòng còn lại cho biết về một kết nối Telnet từ một host bên trong tới một host bên ngoài mạng"],[5634,"Để giải mã những thông tin hiển thị của lệnh debug, chúng ta dựa vào những điểm mấu chốt sau: \u2022 Dấu * kế bên từ NAT cho biết sự chuyển đổi đang được thực hiện trên đường chuyển mạch nhanh"],[5635,"Gói dữ liệu đầu tiên của một phiên đối thoại luôn được xử lý chuyển mạch nên chuyển mạch chậm"],[5636,"Các gói dữ liệu tiếp theo được truyền chuyển mạch nhanh với bộ đệm, không cần xử lý nhiều như gói đầu tiên"],[5637,""],[5638,"504 \u2022 S= a.b.c.d là địa chỉ nguồn"],[5639,"\u2022 Địa chỉ nguồn a.b.c.d được dịch sang w.x.y.z"],[5640,"\u2022 D=e.f.g.h là địa chỉ đích"],[5641,"\u2022 Giá trị trong giấu ngoặc vuông là chỉ số danh đinh IP"],[5642,"Thông tin này có thể sẽ hữu dụng vì dựa vào đó chúng ta sẽ tìm được những gói dữ liệu tương ứng được phân tích từ những phần mền phân tích giao thức khác"],[5643,"1.1.7"],[5644,"Những vấn đề của NAT NAT có những ưu điểm sau: \u2022 Tiết kiệm địa chỉ đăng ký hợp pháp bằng cách cho phép sử dụng địa chỉ riêng"],[5645,"\u2022 Tăng tính linh hoạt của các kết nối ra mạng công cộng"],[5646,"Chúng ta có thể triển khai nhiều dải địa chỉ chia tải để đảm bảo độ tin cậy của kết nối mạng công cộng"],[5647,"\u2022 Nhất quán hồ sơ địa chỉ mạng nội bộ"],[5648,"Nếu mạng không sử dụng địa chỉ IP riêng và NAT mà sử dụng địa chỉ công cộng thì khi thay đổi địa chỉ công cộng, toàn bộ hệ thống mạng phải đặt lại địa chỉ"],[5649,"Chi phí cho việc đặt lại địa chỉ toàn bộ các thiết bịi mạng nội bộ được giữ nguyên khi thay đổi địa chỉ công cộng"],[5650,"NAT cũng không phải là không có nhược điểm"],[5651,"Khi chuyển đổi địa chỉ như vậy sẽ làm mất đi một số chức năng đặc biệt của giao thức và ứng dụng có cần đến các thông tin địa chỉ IP trong gói IP"],[5652,"Do đó cần phải có thêm các hỗ trợ khác cho thiết bị NAT"],[5653,"NAT làm tăng thời gian trễ"],[5654,"Thời gian trễ chuyển mạch sẽ lớn hưon do đó phải chuyển đổi từng địa chỉ IP trong mỗi dữ liệu"],[5655,"Gói dữ liệu đầu tiên luôn phải sử lý chuyển mạch nên thời gian chuyển mạch nhanh hơnnếu có bộ đệm"],[5656,""],[5657,"505 Hiệu suất hoạt động cũng là một vấn đề cần được quan tâm vì NAT được thực hiện trong tiến trình chuyển mạch"],[5658,"CPU phải được kiểm tra từng gói dữ liệu để quyết định gói dữ liệu đó có cần chuyển đổiđịa chỉ hay không"],[5659,"CPU phải thay đổi phần gói IP của gói dữ liệu và cũng có htể phải thay cả phần đóng gói TCP hoặc UDP"],[5660,"Một nhược điểm đáng kể khi sử dụng NAT là sự mất đi khả nặng truy tìm địa chỉ IP đầu cuối-đến-đầu cuối"],[5661,"Việc truy theo gói dữ liệu sẽ trở nên khó hơn do gói dữ liệu thay đổi địa chỉ nhiều lần qua nhiều trạm NAT"],[5662,"Hacker sẽ rất khó khăn khi muốn xác định địa chỉ nguồn hoặc đích của gói dữ liệu"],[5663,"NAT cũng làm cho một số ứng dụng sử dụng địa chỉ IP không hoạt động được vì nó giấu địa chỉ IP đầu cuối-đến-đầu cuối"],[5664,"Những ứng dụng sử dụng địa chỉ vật lý thay vì sử dụng tên miền sẽ không đến được đích nằm sau router NAT"],[5665,"Đôi khi, sự cố này có thể tránh được bằng cách ánh xạ NAT cố định"],[5666,"Cisco IOS NAT hỗ trợ các loại lưu lượng sau: \u2022 ICMP \u2022 File Transfer Protocol (FTP), bao gồm lệnh PPRRT và PÁV"],[5667,"\u2022 Dịch vụ NetBIOS qua TCP/IP, gói dự liệu, tên và phiên giao tiếp"],[5668,"\u2022 RealNetworks\u2019 RealAudio \u2022 White Pines\u2019 CUSeeMe \u2022 Xing Technologies\u2019 StreamWorks \u2022 DNS \u201cA\u201d and \u201cPTR\u201d queries \u2022 H.323/Microsoft NetMeeting, IOS versions 12.0(1)/ 12.0(1) T và sau đó"],[5669,"\u2022 VDOnet\u2019s VDOLive, IOS version 11.3(4)11.3(4)T và sau đó"],[5670,"\u2022 VXtreme\u2019s Web Theater, IOS versions 11.3(4)11.3(4)T và sau đó"],[5671,"\u2022 IP Multicast, IOS version 12.0(1)T chỉ chuyển đổi địa chỉ nguồn"],[5672,"Cisco IOS NAT không hỗ trợ các loại giao thức sau:"],[5673,"506 \u2022 Thông tin cập nhật bảng định tuyến"],[5674,"\u2022 Chuyển đổi vùng DNS"],[5675,"\u2022 BOOTP \u2022 Giao thức talk and ntalk"],[5676,"\u2022 Giao thức quản lý mạng đơn giản \u2013 Simple Network Management Protocol (SNMP) 1.2"],[5677,"DHCP 1.2.1"],[5678,"Giới thiệu DHCP Giao thức cấu hình họat động (DHCP \u2013 Dynamic Host Configuration Protocol) làm việc theo chế độ client-server"],[5679,"DHCP cho phép các DHCP client trong một mạng IP nhận cấu hình IP của mình từ một DHCP server"],[5680,"Khi sử dụng DHCP thì công việc quản lý mạng IP sẽ ít hơn vì phần lớn cấu hình IP của client được lấy về từ server"],[5681,"Giao thức DHCP được mô tả trong RFC 2131"],[5682,"Một DHCP client có thể chạy hầu hết các hệ điều hành Windows, Netvell Netửae, Sun Solaris, Linux và MAC OS"],[5683,"Client yêu cầu server DHCP cấp một địa chỉ cho nó"],[5684,"Server này quản lý việc cấp phát địa chỉ IP, sẽ gửi trả lời cấu hình IP cho client"],[5685,"Một DHCP có thể phục vụ cho nhiều subnet khác nhau nhưng không phục vụ cho cấu hình router, switch và các server khác vì những thiết bị này cần phải có địa chỉ IP cố định"],[5686,""],[5687,"507 Hình 1.2.1.a"],[5688,"Client gửi trực tiếp quảng bá một yêu cầu DHCP"],[5689,"Trường hợp đơn giản nhất là có DHCP server nằm trong cùng subnet với client, server DHCP này sẽ nhận được gói yêu cầu"],[5690,"Server thấy phần GIADDR bỏ trống thì biết client nằm trong cùng subnet với server"],[5691,"Đồng thời server sẽ đọc địa chỉ vật lý (địa chỉ MAC) của client"],[5692,"Hình 1.2.1.b"],[5693,"Server sẽ lấy một địa chỉ IP trong dải địa chỉ tương ứng để cấp cho client"],[5694,"Sau đó server dùng địa chỉ của vật lý của client để gửi gói trả lời lại cho client"],[5695,""],[5696,"508 Hình 1.2.1.c"],[5697,"Hệ điều hành trên DHCP client sẽ dùng những thông tin nhận được trong gói trả lời server để cấu hình IP cho client đó"],[5698,"Server chạy DHCP thực hiện tiến trình xác định địa chỉ IP cấp cho client"],[5699,"Client sử dụng địa chỉ được cấp từ server trong một khoảng thời gian nhất định do người quản trị mạng quy định"],[5700,"Khi thời này hết hạn thì client phải yêu cầu cấp lại địa chỉ mới mặc dù thông thường client sẽ vẫn được cấp lại địa chỉ cũ"],[5701,"Các nhà quản trị mạng thường sử dụng dịch vụ DHCP vì giải pháp này giúp quản lý hệ thống mạng dễ và có khả năng mở rộng"],[5702,"Cisco router có thể sử dụng Cisco IOS có hỗ trợ Easy IP để làm DHCP server"],[5703,"Mặc định , Easy IP cấp cấu hình IP cho client sử dụng trong 24 tiếng"],[5704,"Cơ chế này rất tiện lợi cho các văn phòng nhỏ hoặc những văn phòng tại nhà, người sử dụgn tại nhà có thể tận dụng diạhc vụ DHCP và NAT của router mà không cần phải có thêm một server NT hoặc UNIX"],[5705,"Người quản trị mạng cài đặt dải địa chỉ cho DHCP server còn có thể cung cấp nhiều thông tin khác như địa chỉ DNS server, địa chỉ WINS server và tên miền"],[5706,"Hầu hết các DHCP server đều cho phép người quản trị mạng khai báo những địa chỉ MAC nào cần phục vụ và tự động cấp cho những địa chỉ MAC này địa chỉ IP không thay đổi mỗi lần chúng yêu cầu"],[5707,"DHCP sử dụng giao thức UDP (User Datagram Protocol) làm giao thức vận chuyển của nó"],[5708,"Client gửi thông điệp cho server trên port 67"],[5709,"Server gửi thông điệp cho client trên port 68"],[5710,""],[5711,"509 1.2.2"],[5712,"Những điểm khác nhau giữa BOOTP và DHCP Đầu tiên cộng đồng Internet phát triển giao thức BOOTP để cấu hình cho máy trạm không có ổ đĩa"],[5713,"BOOTP được định nghĩa trong RFC 951 vào năm 1985"],[5714,"Là một phiên bản đi trước của DHCP nên BOOTP cũng có nhiều đặc điểm họat động tương tự như DHCP"],[5715,"Cả hai giao thức này đêgu dựa trên cơ sở client-server và sử dụng port UDP 67, 68"],[5716,"Hai port này hiện vẫn được biết đến như là port BOOTP"],[5717,"Một cấu hình IP cơ bản bao gồm 4 thông tin sau: \u2022 Địa chỉ IP"],[5718,"\u2022 Địa chỉ Gateway"],[5719,"\u2022 Subnet mask"],[5720,"\u2022 Địa chỉ DNS server"],[5721,"BOOTP không tự động cấp phát địa chỉ IP cho một host"],[5722,"Khi client yêu cầu một địa chỉ IP, BOOTP server tìm trong bảng đã được cấu hình trước xem có hàng nào tương ứng với địa chỉ MAC của client hay không.Nếu có thì địa chỉ IP tương ứng sẽ được cung cấp cho client"],[5723,"Điều này có nghĩa là địa chỉ MAC và địa chỉ IP tương ứng phải được cấu hình trước trên BOOTP server"],[5724,"Sau đây là hai điểm khác nhau cơ bản giữa BOOTP và DHCP: \u2022 DHCP cấp một địa chỉ IP cho một client trong một khoảng thời gian nhất định"],[5725,"Hết khoảng thời gian này địa chỉ IP có thể được cấp cho client khác"],[5726,"Client có thể lấy địa chỉ mới hoặc vẫn có thể tiếp tục giữ địa chỉ cũ"],[5727,"\u2022 DHCP cung cấp cho client nhiều thông tin cấu hình IP khác như địa chỉ WINS server, tên miền"],[5728,""],[5729,"510 BOOTP DHCP Ánh xạ cố định giữ địa chỉ MAC và địa chỉ IP Ánh xạ tự động giữa địa chỉ MAC và dải địa chỉ IP tương ứng"],[5730,"Cấp cố định Cấp trong một khoảng thời gian nhất định Chỉ cung cấp 4 thông tin cơ bản của cấu hình IP Có thể cung cấp hơn 30 thông tin cấu hình IP 1.2.3"],[5731,"Những đỉểm chính của DHCP Có 3 cơ chế dùng để cấp phaqst một địa chỉ IP cho client: \u2022 Cấp phát tự động \u2013 DHCP tự động chọn một địa chỉ IP trong dải địachỉ được cấu hình và cấp địa chỉ IP đó cố định, không thay đổi cho một client"],[5732,"\u2022 Cấp phát cố định \u2013 Địa chỉ IP của một client do người quản trị mạng quyết định"],[5733,"DHCP chỉ truyền địa chỉ này cho client đó"],[5734,"\u2022 Cấp phát động \u2013 DHCP cấp và thu hồi lại một địa chỉ IP của client theo một khoảng thời gian giới hạn"],[5735,"Trong phần này chúng ta tập trung vào cơ chế cấp phát động"],[5736,"Một số thông số cấu hình được liệt kê trong IÈT RFC 1533 là: \u2022 Subnet mask \u2022 Router \u2022 Tên miền \u2022 Server DNS \u2022 WINS server Chúng ta có thể tạo trên DHCP server nhiều dải địa chỉ IP và thông số như trên tương ứng"],[5737,"Mỗi một dải địa chỉ dành riêng cho một subnet IP"],[5738,"Điều này cho phép"],[5739,"511 có thể có nhiều DHCP cùng trả lời và IP client có thể di động"],[5740,"Nếu có nhiều server cùng trả lời thì client có thể chọn một trả lời duy nhất"],[5741,"Hình 1.2.3 1.2.4"],[5742,"Họat động của DHCP Quá trình DHCP client lấy cấu hình DHCP diễn ra theo các bước sau: 1"],[5743,"Client phải có cấu hình DHCP khi bắt đầu tiến trình tìm các thành viên trong mạng"],[5744,"Client gửi một yêu cầu cho server để yêu cầu cấu hình IP"],[5745,"Đôi khi client có thể đề nghị trước địa chỉ IP mà nó muốn, ví dụ như khi nó hết thời gian sử dụng địa chỉ IP hiện tại và muốn gia hạn thêm thời gian"],[5746,"Client sẽ xác định được DHCP server bằng cách gửi gói quảng bá gọi là DHCPDISCOVER"],[5747,"2"],[5748,"Khi server nhận được gói quảng bá, nó sẽ tìm trong cơ sở dữ liệu của nó và quyết định là có trả lời được yêu cầu này không"],[5749,"Nếu server không trả lời yêu cầu thì nó sẽ gửi gói trả lời trực tiếp bằng DHCPOFFER về cho client, trong đó mời client sử dụng cấu hình IP của server"],[5750,"Trong DHCPOFER có"],[5751,"512 thể có các thôngtin cho client về địa chỉ IP, địa chỉ DNS server và thời gian sử dụng địa chỉ này"],[5752,"3"],[5753,"Nếu client nhận thấy lời mời của server phù hợp thì nó sẽ gửi quảng bá một DHCPREQUEST để yêu cầu cung cấp những thông cố cụ thể của cấu hình IP"],[5754,"Tại sao lúc này client lại gửi quảng bá mà nó không gửi trực tiếp cho server"],[5755,"Do thông điệp đầu tiên là DHCPDISCOVER đã được gửi quảng bá nên thông điệp này có thể sẽ đến được nhiều server DHCP khác nhau"],[5756,"Khi đó, có thể sẽ có nhiều server cùng mời một client chấp nhận"],[5757,"Thông thường lời mời mà client nhận được đầu tiên sẽ được chấp nhận"],[5758,"4"],[5759,"Server nào nhận được DHCPREQUEST cho biết client đã chấp nhận sử dụng cấu hình IP mà server đã mời thì server đó sẽ gửi trả lời trực tiếp cho client một gói DHCPACK"],[5760,"Rất hiếm khi nhưng cũng có thể server sẽ không gửi DHCPACK vì có thể cấu hình IP đó đã được cấp cho client khác rồi"],[5761,"5"],[5762,"Sau khi client nhận được DHCPACK thì có thể bắt đầu sử dụng địa chỉ IP ngay"],[5763,"6"],[5764,"Nếu client phát hiện rằng địa chỉ IP này đã được sử dụng trong cùng mạng nội bộ với nó thì client sẽ gửi thông điệp DHCPDECLINE và bắt đầu tiến trình DHCP lại từ đầu"],[5765,"Hoặc nếu client nhận được thông điệp DHCPNAK từ server trả lời cho thông điệp DHCPREQUEST thì sau đso client cũng bắt đầu tiến trình lại từ đầu"],[5766,"7"],[5767,"Nếu client không cần sủ dụng địa chỉ IP này nữa thì client guiử thống điệp DHCPRELEASE cho server"],[5768,""],[5769,"513 Hình 1.2.4.a"],[5770,"Tiến trình hoạt động DHCP Tùy theo quy định của mỗi tổ chức, công ty, người quản trị mạng có thể cấp cố định cho một địa chỉ IP nằm trong dải địa chỉ của một DHCP server"],[5771,"Cisco IOS DHCP server luôn luôn phải kiểm tra một địa chỉ IP đã được sử dụng trong mạng hay chưa trước khi mời client sử dụng địa chỉ IP đó"],[5772,"Server sẽ phát một yêu cầu ICMP echo, hay còn gọi là ping, đến các địa chỉ IP nằm trong dải địa chỉ của mình trước khi gửi DHCPOFFER cho client"],[5773,"Số lượng ping mặc định được sủ dụng để kiểm tra một địa chỉ IP là 2 gói và chúng ta có thể cấu hình con số này được"],[5774,"Hình 1.2.4.b"],[5775,"Thứ tự các thông điệp DHCP được gửi đi trong tiến trình DHCP"],[5776,""],[5777,"514 1.2.5"],[5778,"Cấu hình DHCP Tương tự như NAT, DHCP server cũng yêu cầu người quản trị mạng phải khai báo trước dải địa chỉ"],[5779,"Câu lệnh ip dhcp pool dùng để khai báo dải địa chỉ mà server có thể cấp pháp cho host"],[5780,"Câu lệnh đầu tiên, ip dhcp pool, tạo dải địa chỉ với một tên cụ thể và đặt router vào chế độ cấu hình DHCP"],[5781,"Trong chế độ cấu hình DHCP, lệnh network được dùng để xác định dải địa chỉ được cấp phát"],[5782,"Nếu trong mạng đã có sử dụng cố định một số địa chỉ IP nằm trong dải đã khai báo thì chúng ra quay trở lại chế độ cấu hình toàn cục"],[5783,"Chúng ra sử dụng lệnh ip dhcp excluded-address để cấu hình cho Router loại trừ một số hoặc một dải địa chỉ khi phân phối địa chỉ cho client"],[5784,"Những địa chỉ dành riêng này thường được cấu hình cố định cho những host quan trọng và cho các cổng của Router"],[5785,"Hình 1.2.5"],[5786,"Cấu hình ví dụ một DHCP server trên router Thông thường, chúng ta còn có thể cấu hình thêm nhiều thông tin khác ngoài thông tin về địa chỉ IP cho một DHCP server"],[5787,"Trong chế độ cấu hình DHCP, chúng ta dùng lệnh default-router để khai báo cổng mặc định gateway, lệnh dns-server để khai báo địa chỉ của DNS server, lệnh netbios-name-server dùng để khai báo cho WINS server"],[5788,""],[5789,"515 Dịch vụ DHCP được chạy mặc định trên các phiên bản Cisco IOS có hỗ trợ dịch vụ này"],[5790,"Để tẳt dịch vụ này, chúng ta dùng lệnh no service dhcp và dùng lệnh ip service dhcp để chạy lại dịch vụ này"],[5791,"Lệnh Giải thích network network-number [mask / /prefix-length] Khai báo địa chỉ mạng và subnet mask tương ứung cho dải địa chỉ DHCP"],[5792,"Chiều dài bit thuộc phần network có thể được khai báo bằng subnet mask hoặc bằng con số thể hiện số lượng bit, con số này luôn có dấu xổ phải (/) đứng trước"],[5793,"Default-router Addresss [address2 \u2026 Address8] Khai báo địa chỉ của cổng mặc định gateway cho DHCP client"],[5794,"Mặc dù chỉ cần một địa chỉ những trong cấu lệnh này bạn có thể khai báo tới 8 địa chỉ"],[5795,"Dns-server Address [address2 \u2026 Address8] Khai báo địa chỉ của DNS server cho DHCP client"],[5796,"Mặc dù chỉ cần một địa chỉ những trong câu lệnh này bạn có thể khai báo tối đa 8 địa chỉ"],[5797,"Netbios-name- Server address [address2\u2026 Khai báo địa chỉ NetBios WINS server cho các Microsoft DHCP client"],[5798,"Mặc dù chỉ cần một địa chỉ những trong câu lệnh này bạn có thể khai báo tới 8 địa chỉ"],[5799,""],[5800,"516 Address8] Domain-name Name Khai báo tên miền cho client"],[5801,"Lease [days [hours} [minutes] / infinite] Khai báo khoảng thời gian cho phép client được sử dụng một địa chỉ IP"],[5802,"Thời gian mặc định là một ngày"],[5803,"1.2.6"],[5804,"Kiểm tra hoạt động DHCP Để kiểm tra họat động DHCP, bạn dùng lệnh show ip dhcp binding"],[5805,"Lệnh này sẽ hiển thị danh sách các địa chỉ IP đã được dịch vụ DHCP cấp phát cho các host nào tương ứng"],[5806,"Để xem các thông điệp DHCP mà router đã gửi đi và nhận vào, chúng ta dùng lệnh show ip dhcp server statistics"],[5807,"Lệnh này sẽ hiển thị các thông tin về số lượng các thông điệp DHCP mà Router đã gửi đi và nhận vào"],[5808,"Hình 1.2.6 1.2.7"],[5809,"Xử lý sự cố DHCP"],[5810,"517 Để xử lý sự cố của họat động DHCP server chúng ta có thể dùng lệnh debug ig dhcp server events"],[5811,"Lệnh này sẽ cho biết chu kỳ kiểm tra của server để xem địa chỉ IP nào đã hết thời hạn được sử dụng và tiến trình lấy lại hoặc cấp phát một địa chỉ IP"],[5812,"Hình 1.2.7"],[5813,"1.2.8"],[5814,"Chuyển tiếp DHCP DHCP client sử dụng IP quảng bá để tìm DHCP server trong mạng nội bộ"],[5815,"Điều gì sẽ xảy ra khi server và client không nằm trong cùng một mạng và bị ngăn cách nhau bởi Router"],[5816,"Router không hề chuyển tiếp gói quảng bá"],[5817,"DHCP không phải là một dịch vụ quan trọng duy nhất sử dụng quảng bá Cisco router và các thiết bị khác cũng sử dụng quảng bá để tìm TFTP server"],[5818,"Một số client cần sử dụng quảng bá để tìm TACACS server"],[5819,"TACACS server là một server bảo vệ"],[5820,"Thông thường, trong cấu trúc mạng phân cấp phức tạp, client này phát quảng bá để tim server thì mặc định là router sẽ không chuyển các gói quảng bá ra ngoài subnet của client"],[5821,"Tuy nhiên có nhiều client sẽ không thể hoạt động được nếu không có những dịc vụ như DHCP chẳng hạn, khi đó phải chon lựa một trong hai giải pháp"],[5822,"Người quả trị mạng có thể đặt server cho mọi subnet trong mạng hoặc là sử dụng đặc tính giúp"],[5823,"518 đỡ địa chỉ của Cisco IOS"],[5824,"Việc chạy các dich vụ như DHCP hay DNS trên nhiều máy tính sẽ tạo sự quá tải và khó quản trị nên giải pháp đầu không hiệu quả"],[5825,"Nếu có thể thì người quản trị mạng nên sử dụng giải pháp thứ hai là dùng lệnh ip helper-address để chuyển tiếp yêu cầu quảng bá cho những dịch vụ UDP quan trọng này"],[5826,"Khi sử dụng đặc tính giúp đỡ địa chỉ, router sẽ có thể được cấu hình để tiếp nhận yêu cầu quảng bá của một dịch vụ UDP và sau đó chuyển tiếp yêu cầu đó một cách trực tiếp đến một địa chỉ IP cụ thể"],[5827,"Mặc định, lệnh ip helper-address có thể cho phép chuyển tiếp yêu cầu của 8 dịch vụ UDP sau: \u2022 Time \u2022 TACES \u2022 DNS \u2022 BOOTP/DHCP server \u2022 BOOTP/DHCP client \u2022 TFTP \u2022 Dịch vụ NetBIOS name \u2022 Dịch vụ NetBIOS datagram Chúng ta xét cụ thể dịch vụ DHCP, client phát quảng bá gói DHCPDISCOVER ra mạng nội bộ của nó"],[5828,"Gói quảng bá này sẽ đến được Gateway chính là router"],[5829,"Nếu trên router có cấu hình lệnh ip helper-address thì gói DHCP này sẽ dược chuyển tiếp cho một địa chỉ IP xác định"],[5830,"Trước khi chuyển tiếp gói yêu cầu này, Router sẽ điền địa chỉ của cổng Router kết nối với client vào phần GIADDR của gói DHCPDISCOVER"],[5831,"Địa chỉ này sẽ là địa chỉ Gateway cho DHCP client sau khi client lấy được địa chỉ IP"],[5832,""],[5833,"519 DHCP server nhận được gói DHCPDISCOVER"],[5834,"Đựa vào địa chỉ nằm trong phần GIADDR server sẽ xác định được Gateway này tương ứng với dải địa chỉ nào"],[5835,"Sau đó server sẽ lấy một địa chỉ IP còn trống trong dải để cấp cho client"],[5836,"Hình 1.2.8.a"],[5837,"Cấu trúc gói DHCP Hình 1.2.8.b"],[5838,"Chuyển tiếp DHCP"],[5839,"520 Hình 1.2.8.c"],[5840,"Client A gửi quảng bá DHCPDISCOVER và router chuyển tiếp yêu cầu này cho server DHCP 192.168.2.254"],[5841,"Trước khi chuyển tiếp yêu cầu này router điền địa chỉ của cổng kết nối với client A là 192.168.1.1 vào phần GIADDP của gói DHCPDISCOVER"],[5842,"Hình 1.2.8.d"],[5843,"DHCP server nhận được gói yêu cầu DHCP từ router"],[5844,"Dựa vào địa chỉ 192.168.1.1 trong phần GIADDR, server sẽ xác định được client A nằm trong subnet nào và chọn một địa chỉ IP còn trống trong giải địa chỉ tương ứng để cấp cho client A."],[5845,"Trong gói trả lời của DHCP server chúng ta thấy client A được cấp địa chỉ 192.168.1.10"],[5846,""],[5847,"521 TỔNG KẾT Sau đây là những điểm quan trọng cần nắm trong chương này: \u2022 Địa chỉ riêng được sử dụng cho các mạng riêng, nội bộ và không bao giờ được định tuyến trên các Router Internet công cộng"],[5848,"\u2022 NAT thay đổi phần IP header của gói dữ liệu để chuyển đổi địa chỉ nguồn hoặc đích hoặc cả hai"],[5849,"\u2022 PAT sử dụng một địa chỉ IP công cộng duy nhất cùng với số port để ánh xạ cho nhiều địa chỉ nội bộ bên trong"],[5850,"\u2022 Chuyển đổi NAT có thể được thực hiện cố định hoặc tự động tùy theo mục đích sử dụng"],[5851,"\u2022 NAT và PAT có thể được cấu hình để chuyển đổi cố định, chuyển đổi động và chuyển đổi overloading"],[5852,"\u2022 Lệnh clear và show được sử dụng để kiểm tra họat động của NAT và PAT"],[5853,"\u2022 Lệnh debug ip nat được sử dụng để tìm sự cố của cấu hình NAT và PAT"],[5854,"\u2022 Những ưu điểm và nhược điểm của NAT \u2022 DHCP làm việc theo chế độ client-server, cho phép client lấy cấu hình IP từ một DHCP server"],[5855,"\u2022 BOOTP là một phiên bản trước của DHCP và cũng có nhiều đặc điểm họat động giống DHCP nhưng BOOTP chỉ cấp phát địa chỉ cố định"],[5856,"\u2022 DHCP server quản lý dải địa chỉ IP và các thông số tương ứng kèm theo"],[5857,"Mỗi một dải địa chỉ tương ứng với một subnet IP"],[5858,"\u2022 DHCP client thực hiện 4 bước để lấy cấu hình IP từ server"],[5859,"\u2022 DHCP server thường được cấu hình để phân phối nhiều địa chỉ IP"],[5860,"\u2022 Lệnh show ip dhcp binding dùng để kiểm tra họat động của DHCP"],[5861,""],[5862,"522 \u2022 Lệnh debug ip dhcp server events được dùng để tìm sự cố của DHCP"],[5863,"\u2022 Khi DHCP server và client không nằm trong cùng một mạng và bị ngăn cách bởi Router, chúng ta dùng lệnh ip helper-address để router chuyển tiếp yêu cầu DHCP"],[5864,"2.2"],[5865,"Các công nghệ WAN 2.2.1.Kênh quay số (dial-up) Hình 2.2.1"],[5866,"Kết nối WAN thông qua modem và mạng điện thoại"],[5867,"Modem và đường điện thoại quay số dùng tín hiệu tương tự cung cấp kết nối chuyển mạch, dung lượng thấp, phù hợp cho nhu cầu truyền dữ liệu tốc độ thấp, rẻ tiền"],[5868,"Điện thoại truyền thống sử dụng cáp đồng kết nối từ máy điện thoại của thuê bao đến tổng đài mạng điện thoại chuyển mạch công cộng (PSTN \u2013 Public switched telephone network)"],[5869,"Tín hiệu truyền đi trên đường truyền này là tín hiệu tương tự biến đổi liên tục để truyền tiếng nói"],[5870,"Do đó, đường truyền này không phù hợp với tín hiệu số nhị phân của máy tính"],[5871,"Modem tại đầu phát phải thực hiện điều chế tín nhị phân sang tính hiệu tương tự rồi mới đưa tín hiệu xuống đường truyền"],[5872,"Modem tại đầu thu giải điều chế tín hiệu tương tự thành tín hiệu nhị phân như ban đầu"],[5873,""],[5874,"523 Đặc điểm vật lý của đường truyền và kết nối PSTN khiến tốc độ của tín hiệu bị hạn chế"],[5875,"Giới hạn trên khoảng 33 kb/giây"],[5876,"Tốc độ này có thể tăng lên khoảng 56 kb/giây nếu tín hiệu được truyền trực tiếp qua một kết nối số"],[5877,"Đối với nhưng doanh nhiệp nhỏ thì đường truyền này phù hợp vì họ chỉ cần trao đổi các thông tin về bảng lương, giá cả, các báo cáo thông thường và email"],[5878,"Hơn nữa, họ có thể sử dụng cách quay số tự động vào ban đêm hoặc vào ngày nghỉ cuối tuần để truyền tải dữ liệu có dung lượng lớn và lưu dữ liệu dự phòng, vì trong nhưng khoảng thời gian này mức giá cước thấp hơn bình thường"],[5879,"Tổng chi phí cước phụ thuộc và khoảng cách giữa các điểm kết nối, thời gian trễ và thời gian thực hiện cuộc gọi"],[5880,"Ưu điểm của modem và đường truyền tương tự là thực hiện đơn giản ở mọi nơi, chi phí thấp"],[5881,"Nhược điểm là tốc độ thấp, thời gian thực hiện kết nối lâu, có thời gian trễ và nghẽn mạch, việc truyền thoại và video không được tốt với tốc độ thấp như vậy"],[5882,"2.2.2"],[5883,"ISDN Các đường trung kế của PSTN được thay đổi từ tín hiệu tương tự phân kênh theo tần số sang tín hiệu số phân kênh theo thời gian (TDM)"],[5884,"Bước tiếp theo là mạch vọng nội bộ kết nối từ tổng đài đến thuê bao cũng truyền tín hiệu số"],[5885,"Do đó, đường truyền này có dung lượng cao hơn"],[5886,"ISDN (Integrated Services Digital Network) là kết nối số TDM"],[5887,"Kết nối này sử dụng các kênh B (Bearer) 64 Kb/giây để truyền thoại hoặc dữ liệu và một kênh báo hiệu D (Delta) dùng để thiết lập cuộc gọi và nhiều mục đích khác"],[5888,""],[5889,"524 Giao tiếp tốc độ cơ bản BRI ISDN cung cấp hai kênh B 64 Kb/giây và một kênh D 16 Kb/giây phù hợp cho cá nhân, gia đình và các công ty nhỏ"],[5890,"Nếu nhu cầu lớn hơn nữa thì chúng ta có giao tiếp PRI ISDN"],[5891,"PRI cung cấp 23 kênh B 64 Kb/giây và một kenh Điểm 64 Kb/giây ở Bắc Mỹ, tổng tốc độ bit lên tới 1.544 Mb/giây"],[5892,"Ở Châu Âu, Australia và nhiều nơi khác trên thế giới, ISDN PRI cung cấp 30 kênh B và một kênh D, tổng tốc độ bit lên tới 2,048 Mb/giây"],[5893,"Kết nối T1 có tốc độ PRI ở Bắc Mỹ, kết nối E1 có tốc độ PRI quốc tế"],[5894,"Kênh Điểm BRI không được tận dụng hết khả năng vì nó chỉ được sử dụng để điều khiển cho 2 kênh B"],[5895,"Một số nhà cung cấp dịch vụ cho phép kênk D truyền dữ liệu ở tốc độ thấp, ví dụ như kết nối X.25 với tốc độ 9,6 kb/giây"],[5896,"Đối với mạng WAN nhỏ thì kết nối BRI ISDN là một kết nối lý tưởng"],[5897,"BRI có thời gian thiết lập cuộc gọi nhỏ hơn một giây, kênh B 64 kb/giây cung cấy dung lượng lớn hơn một kết nối tương tự với modem"],[5898,"Nếu nhu cầu dung lương cao hơn thì kênh B thứ 2 sẽ được kích hoạt để cung cấp tốc độ 128 kb/giây"],[5899,"Mặc dù như vậy vẫn chưa phù hợp cho truyền video nhưng cũng đã cho phép thực hiện cùng lúc nhiều cuộc đối thoại cùng với các luồng lưu lượng khác"],[5900,"Hình 2.2.a"],[5901,"ISDN"],[5902,"525 Một ứng dụng thông thường của ISDN là cung cấp thêm dung lượng truyền cho đường truyền thuê riêng"],[5903,"Đường truyền thuê riêng được sử dụng chính, trong những thời điểm nhu cầu dung lượng tăng cao thì ISDN được kích hoạt để hỗ trợ thêm"],[5904,"Ngoài ra, ISDN còn được sử dụng làm đường truyền dự phòng trong trường hợp đường truyền thuê riêng gặp sự cố"],[5905,"Chi phí cước của ISDN được tính trên từng kênh B và cũng tương tự như kết nối thoại quay số"],[5906,"Với PRI ISDN, ta có thể kết nối hai điểm với nhau bằng nhiều kênh B"],[5907,"Do đó, ta có thể thực hiện được hội nghị truyền hình (video conference), kết nối dữ liệu tốc độ cao, không có thời gian trễ và nghẽn mạch, nhưng chi phí sẽ cao khi khoảng cách giữa các điểm khá lớn Hình 2.2.2.b"],[5908,"Cấu trúc chung của mạng WAN với ISDN, Router cần phải có cổng giao tiếp ISDN hoặc phải kết nối thông qua bộ chuyển đổi giao tiếp"],[5909,"2.2.3.Đường truyền thuê riêng (leased line) Khi cần phải có một kết nối dành riêng cố định thì sử dụng đường truyền thuê riêng với dung lượng có thể lên tới 2,5 Gb/giây"],[5910,""],[5911,"526 Loại Chuẩn Dung lượng 56 DS0 56 Kbps 64 DS0 64 Kbps T1 DS1 1.544 Mbps E1 ZM 2.048 Mbps E3 M3 34.064 Mbps J1 Y1 2.048 Mbps T3 DS3 44.736 Mbps OC-1 SONET 51.84 Mbps OC-3 SONET 155.54 Mbps OC-9 SONET 466.56 Mbps OC-12 SONET 622.08 Mbps OC-18 SONET 933.12 Mbps OC-24 SONET 1244.16 Mbps OC-36 SONET 1866.24 Mbps OC-48 SONET 2488.32 Mbps Hình 2.2.3.a"],[5912,"Các đường truyền WAN và băng thông tương ứng"],[5913,"Một kết nối điểm-đến-điểm thiết lập một đường truyền WAN từ vị trí của thuê bao thông qua mạng của nhà cung cấp dịch vụ đến điểm đích"],[5914,"Đườn truyền điểm-đến- điểm này thườn được thuê từ nhà cung cấp dịch vụ nên được gọi là đường truyền thuê riêng"],[5915,"Đường truyền thuê riêng có thể được cung cấp với nhiều mức dung"],[5916,"527 lượng khác nhau"],[5917,"Giá cả phụ thuộc vào mức băng thông yêu cầu và khoảng cách giữa hai điểm kết nối"],[5918,"Đương nhiên, giá thuê một đường truyền riêng điểm-đến- điểm sẽ cao hơn nhiều so với các đường chia sẻ khác như Frame Relay"],[5919,"Đôi khi chi phí cho đường thuê riêng quá cao so với nhu cầu mà ta sử dụng được"],[5920,"Chi phí này sẽ hiệu quả hơn nếu các kết nối này được sử dụng để nối nhiều vị trí trung tâm"],[5921,"Dung lượng cố định có ưu điểm là không có thời gian trễ và nghẽn mạch giữa hai điểm cuối, phù hợp cho nhiều ứng dụng như thương mại điện tử"],[5922,"Để thực hiện kết nối thuê riêng ta cần phải có CSU/DSU và đường truyền từ nhà cung cấp dịch vụ, router phải có cổng Serial, mỗi cổng tương ứng với một kết nối"],[5923,"Hình 2.3.b"],[5924,"Mạng WAN với đường truyền thuê riêng"],[5925,"Đường kết nối trực tiếp thường được sử dụng để kết nối giữa các toà nhà, cung cấp dung lượng truyền cố định"],[5926,"Đường truyền thuê riêng là một chọn lựa truyền thống từ trước tới nay, tuy nhiên nó cũng có nhiều nhược điểm"],[5927,"Lưu lượng WAN luôn biến đổi nhưng dung lượng đường truyền cố định"],[5928,"Do đó, băng thông đường truyền ít khi nào bằng với lưu lượng thực tế"],[5929,"Mỗi router tại mỗi điểm cuối cần phải có một"],[5930,"528 cổng Serial cho một kết nối, do đó chi phí cho thiết bị sẽ tăng thêm"],[5931,"Mỗi lần muốn thay đổi dung lượng đường truyền ta cần phải liên hệ với nhà cung cấp dịch vụ"],[5932,"Đường truyền thuê riêng cung cấp kết nối trực tiếp điểm-đến-điểm giữa các LAN và kết nối nhiều chi nhánh riêng lẻ vào mạng chuyển mạch gói"],[5933,"2.2.4.X.25 Do đường truyền thuê riêng có chi phí cao nên các nhà cung cấp dịch vụ đã giới thiệu mạng chuyển mạch gói sử dụng đường truyền chia sẻ để giảm bớt chi phí"],[5934,"Mạng chuyển mạch gói đầu tiên là mạng X.25"],[5935,"X.25 cung cấp tốc độ bit thấp, dung lượng chia sẻ qua dịch vụ chuyển mạch hoặc cố định"],[5936,"X.25 là một giao thức lớp Mạng và các thuê bao được cung cấp một địa chỉ mạng"],[5937,"Khi có yêu cầu từ một tập hợp các địa chỉ, mạch ảo SVC sẽ được thiết lập, mỗi SVC được phân biệt bằng một địa chỉ số kênh"],[5938,"Các gói dữ liệu được dán nhãn theo chỉ số kênh này, dựa vào đó các gói dữ liệu được truyền đến đúng địa chỉ mạng đích"],[5939,"Trên một kết nối vật lý có thể thiết lập nhiều kênh truyền"],[5940,"Thuê bao có thể kết nối vào mạng X.25 bằng kết nối thuê riêng hoặc bằng kết nối quay số"],[5941,"Mạng X.25 cũng có thể cung cấp kênh truyền cố định PVC cho các thuê bao"],[5942,""],[5943,"529 Hình 2.2.4"],[5944,"Mạng X25 X.25 có chi phí thấp và hiệu quả vì chi phí cước được tính theo lưu lượng dữ liệu chứ không tính theo thời gian kết nối và khoảng cách của kết nối"],[5945,"Dữ liệu được truyền đi với bất kỳ tốc độ nào lên tới mức độ tối đa của đường truyền"],[5946,"Nhưng mạng X.25 thường có dung lượng thấp, tối đa là 48 Kb/giây"],[5947,"Ngoài ra thời gian truyền gói dữ liệu cũng bị trễ do đặc trưng của mạng chia sẻ"],[5948,"Công nghệ X.25 từ lâu đã không còn được sử dụng rộng rãi"],[5949,"Frame Relay đã thay thế cho X.25 Ứng dụng thường thấy của X.25 là trên các máy đọc thẻ tín dụng"],[5950,"Tại các trung tâm thương mại, siêu thị, khi khach hàng sử dụng thẻ để thanh toán thì các máy đọc thẻ sẽ sử dụng X.25 để liên hệ với máy tính trung tâm xác định giá trị của thẻ, thực hiện giao dịch thanh toán"],[5951,"Một số công ty còn sử dụng X.25 trên mạng VAN ( Value-add network)"],[5952,"VAN là một mạng riêng được các công ty thuê từ nhà cung cấp dịch vụ để thực hiện trao đổi dữ liệu về tài chính và nhiều thông tin thương mại"],[5953,"530 khác"],[5954,"Đối với những ứng dụng này, băng thông thấp và thời gian trễ cao không phải là vấn đề lớn, trong khi đó chi phí thấp lại là một ưu điểm của X.25"],[5955,"2.2.5"],[5956,"Frame Relay"],[5957,"Do nhu cầu băng thông ngày càng cao và yêu cầu thời gian chuyển mạch gói nhanh hơn, nhà cung cấp dịch vụ đã giới thiệu Frame Relay, Frame Relay cũng hoạt động như X.25 nhưng có tốc độ cao hơn, lên đến 4 Mb/giây hoặc hơn nữa"],[5958,"Frame Relay có một số đặc điểm khác với X.25"],[5959,"Trong đó, điểm khác biệt quan trọng nhất là: Frame Relay là giao thức đơn giản hơn, hoạt động ở lớp liên kết dữ liệu thay vì ở lớp Mạng"],[5960,"Frame Relay không thực hiện điều khiển luồng và kiểm tra lỗi"],[5961,"Do đó, thời gian trễ do chuyển mạch frame giảm đi"],[5962,"Hình 2.2.5"],[5963,"Mạng Frame Relay Hầu hết các kết nối Frame Relay đều là kết nối PVC, chứ không phải là SVC"],[5964,"Kết nối từ mạng của khách hàng vào mạng của nhà cung cấp dịch vụ thường là kết nối thuê riêng hoặc cũng có thể là kết nối quay số nếu nhà cung cấp dịch vụ có sử dụng đường ISDN, Kênh D ISDN được sử dụng để thiết lập kết nối SVC trên một hay"],[5965,"531 nhiều kênh B"],[5966,"Giá cước Frame Relay được tính theo dung lượng kết nối và dung lượng thoả thuận trên các PVC> Frame Relay cung cấp kết nối chia sẻ có băng thông truyền cố định, có thể truyền được cả tiếng nói"],[5967,"Frame Relay là một chọn lựa lý tưởng cho kết nối giữa các LAN"],[5968,"Router trong LAN chỉ cần một cổng vật lý, trên đó cầu hình nhiều kết nối ảo VC"],[5969,"Kết nối thuê riêng để kết nối vào mạng Frame Relay khá ngắn nên chi phí cũng tương đối hiệu quả khi nối giữa các LAN"],[5970,"2.2.6"],[5971,"ATM Các nhà cung cấp dịch vụ đã nhìn thấy nhu cầu cần phải có công nghệ cung cấp mạng chi sẻ cố định với thời gian trễ thấp, ít nghẽn mạch và băng thông cao"],[5972,"Giải pháp của họ chính là ATM (Asychronous Transfer Mode) với tốc độ 155 Mb/giây"],[5973,"So với các công nghệ chia sẻ khác như X.25, Frame Relay thì sơ đồ mạng WAN ATM cũng tương tự"],[5974,"Hình 2.2.6"],[5975,"ATM"],[5976,"ATM là một công nghệ có khả năng truyền thoại, video và dữ liệu thông qua mạng riêng và mạng công cộng"],[5977,"ATM được xây dựng dựa trên cấu trúc tế bào (cell) chứ không dựa trên cấu trúc frame"],[5978,"Gói dữ liệu được truyền đi trên mạng ATM không được gọi là frame mà gọi là tế bào (cell)"],[5979,"Mỗi tế bào ATM luôn có chiều dài cố định là 53 byte"],[5980,"Tế bào ATM 53 byte này chứa 5 byte phần ATM header, tiếp theo"],[5981,"532 sau là 48 byte của phần dữ liệu"],[5982,"Tất cả các tế bào ATM đều có kích thước nhỏ, cố định như nhau"],[5983,"Do đó, không có các gói dữ liệu khác lơn hơn trên đường truyền, mọi tế bào đều không phải chờ lâu"],[5984,"Thời gian truyền của mỗi gói là như nhau"],[5985,"Do đó, các gói đến đích cách nhau đều đặn, không có gói nào đến quá chậm so với gói trước"],[5986,"Cơ chế này rất phù hợp cho truyền thoại và video vì những tín hiệu này vốn rất nhạy cảm với vấn đề thời gian trễ"],[5987,"So với các frame lơn hơn của Frame Relay và X.25 thì tế bào ATM 53 byte không được hiệu quả bằng"],[5988,"Khi có một packet lớn của lớp Mạng cần phải phân đoạn nhỏ hơn thì cữ mỗi 48 byte phải có 5 byte cho phần ATM header"],[5989,"Công việc ráp các phân đoạn lại thành packet ban đầu ở ATM switch đầu thu sẽ phức tạp hơn"],[5990,"Hơn nữa, việc đóng gói như vậy làm cho đường truyền ATM phải tốn nhiều hơn 20% băng thông so với Frame Relay để truyền cùng một lượng dữ liệu lớp Mạng"],[5991,"ATM cung cấp cả kết nối PVC và SVC mặc dù PVC được sử dụng nhiều hơn trong WAN"],[5992,"Cũng như các công nghệ chia sẻ khác, ATM cho phép thiết lập kết nối ảo trên một kết nối vật lí"],[5993,"2.2.7"],[5994,"DSL Digital Subscriber Line \u2013 DSL là một công nghệ truyền băng rộng sử dụng đường truyền hai dây xoắn của hệ thống điện thoại để truyền dữ liệu với băng thông lớn đến thuê bao dùng dịch vụ"],[5995,"Kỹ thuật truyền băng rộng ghép nhiều dải tần số khác nhau trên cùng một đường truyền vật lý để truyền dữ liệu xDSL bao gồm các công nghệ DSL như sau: Asymmetric DSL (ADSL) Symmetric DSL (SDSL) High Bit Rate DSL (HDSL) ISDN DSL (IDSL) Consumer DSL (CDSL), cũng được gọi là DSL-lite hay G.lite"],[5996,"533 Hình 2.2.7.a"],[5997,"Với công nghệ DSL, các nhà cung cấp dịch vụ có thế cung cấp cho khách hàng dịch vụ mạng tốc độ cao trên đường dây thoại cáp đồng"],[5998,"Công nghệ DSL cho phép đường dây này thực hiện song song đồng thời chức năng của một kết nối điện thoại và một kết nối mạng thường trực cố định"],[5999,"Nhiều kết nối của thuê bao DSL được ghép kênh vào một đường kết nối có dung lượng cao tại trung tâm cung cấp dịch vụ thông qua thiết bị ghép kênh truy cập DSL (DSLAM \u2013 DSL Access Multiplexer)"],[6000,"Nhiều kết nối DSL của thuê bao được DSLAM tích hợp vào một kết nối T3/DS3 duy nhất"],[6001,"Các công nghệ DSL hiện nay sử dụng nhiều kỹ thuật mã hoá và điều chế phức tạp để đạt được tốc độ dữ liệu lên đến 8,192 Mb/giây"],[6002,"Kênh truyền thoại chuẩn trên đường dây điện thoại nằm trong dải tần 300 Hz đến 3,3 KHz"],[6003,"Như vậy, dải tần số 4 KHz được dành để truyền thoại trên đường dây điện thoại"],[6004,"Công nghệ DSL sử dụng dải tần cao hơn 4 KHz để truyền tải dữ liệu"],[6005,"Bằng cách này thoại và dữ liệu có thể được truyền tải song song đồng thời trên cùng một đường truyền"],[6006,""],[6007,"534 Hình 2.2.7.b"],[6008,"Mạch vòng nội bộ của hệ thống điện thoại kết nối modem DSL của từng thuê bao đến DSLAM đặt tại trung tâm cung cấp dịch vụ"],[6009,"Thoại và dữ liệu sử dụng hai dải tần số riêng biệt"],[6010,"Có 2 loại công nghệ DSL cơ bản là ADSL (Asymmetric DSL \u2013 DSL bất đối xứng) và SDSL (Symmetric DSL \u2013 DSL đối xứng)"],[6011,"Dịch vụ bất đối xứng cung cấp kênh tải dữ liệu (download) lớn hơn kênh truyền dữ liệu (upload)"],[6012,"Dịch vụ đối xứng cung cấp cả hai kênh truyền này có dung lượng như nhau"],[6013,"Không phải tất cả các công nghệ DSL đều cho phép sử dụng đường dây điện thoại"],[6014,"Ví dụ SDSL không cung cấp dịch vụ điện thoại trên cùng một đường truyền"],[6015,"Do đó phải có riêng một đường truyền cho SDSL"],[6016,"Các loại DSL khác nhau cung cấp băng thông khác nhau với dung lượng có thể vượt qua đường thuê riêng T1 hoặc E1"],[6017,"Tốc độ truyền phụ thuộc vào chiều dài thực tế của mạch vòng nội bộ, loại cáp và điều kiện đi dây cáp"],[6018,"Để dịch vụ được cung cấp tốt thì mạch vòng nội bộ nên ngắn hơn 5,5 km"],[6019,"DSL thường không được chọn làm kết nối giữa nhà riêng và hệ thống mạng trong công ty vì thuê bao không thể từ nhà riêng kết nối trực tiếp vào mạng trung tâm của công ty, mà phải thông qua một nhà cung cấp dịch vụ Internet (ISP \u2013 Internet Service Provider)"],[6020,"Từ đây, một kết nối IP mới được thực hiện thông qua Internet để đến mạng trung tâm của công ty"],[6021,"Như vậy rất nguy hiêm về mặt bảo mật"],[6022,"Để đảm bảo tính an toàn, dịch vụ DSL có cung cấp khả năng sử dụng mạng riêng ảo VPN (Virtual Private Network) để kết nối vào server VPN đặt tại công ty"],[6023,"2.2.8"],[6024,"Cable modem Cáp đồng trục được sử dụng rộng rãi trong các thành phố để truyền tín hiệu truyền hình"],[6025,"Hệ thống mạng được xây dựng dựa trên hệ thống cáp đồng trục này có băng thông cao hơn so với hệ thống mạng trên cáp đồng điện thoại"],[6026,""],[6027,"535 Hình 2.2.8.a"],[6028,"Cable modem Cable modem thực hiện truyền dữ liệu hai chiều tốc độ cao, sử dụng cáp đồng trục trong hệ thống mạng cáp truyền hình"],[6029,"Một số nhà cung cấp dịch vụ còn cam kết tốc độ truyền dữ liệu cao gấp 6,5 lần đường thuê riêng T1"],[6030,"Tốc độ này cho phép truyền được nhanh chóng một lượng lớn thông tin số bao gồm video clip, audio\u2026 Lượng thông tin cần phải mất 2 phút nếu tải bằng đường truyền ISDN BRI thì bây giờ chỉ mất 2 giây thông qua kết nối cable modem"],[6031,"Cable modem cũng cung cấp kết nối thường trực và lắp đặt kết nối này đơn giản"],[6032,"Một kết nối thường trực cũng có nghĩa là máy tính luôn luôn đứng trước mối nguy hiểm về mặt bảo mật, do đó cần phải được bảo vệ bằng bức tường lửa (firewalls)"],[6033,"Để đảm bảo về mặt an toàn, dịch vụ cable modem cũng cho phép sử dụng mạng riêng ảo VPN để kết nối vào VPN server đặt tại mạng trung tâm của một công ty"],[6034,"Một kết nối cable modem có dung lượng có thể lên đến 30 \u2013 40 Mb/giây trên kênh truyền 6 MHz"],[6035,"Đường truyền này nhanh gần gấp 500 lần so với đường truyền modem thường (56 Kb/giây)"],[6036,""],[6037,"536 Với cable modem, thuê bao vẫn có thể nhận song song đồng thời dịch vụ truyền hình cáp và dữ liệu cho máy tính thông qua một bộ phân giải 1-2 đơn giản"],[6038,"Hình 2.2.8.b"],[6039,"Cấu trúc bộ phân giải 1-2"],[6040,"Thuê bao cable modem phải sử dụng ISP liên kết với nhà cung cấp dịch vụ truyền hình cáp"],[6041,"Tất cả các thuê bao nội bộ đều chia sẻ cùng một băng thông cáp"],[6042,"Do đó càng nhiều người tham gia vào dịch vụ thì lượng băng thông cho mỗi người sẽ giảm xuống"],[6043,""],[6044,"537"],[6045,"538 Hình 2.2.8.c"],[6046,"Cấu trúc mạng cable modem"],[6047,"2.3"],[6048,"Thiết kế WAN 2.3.1"],[6049,"Thông tin liên lạc bằng WAN WAN là một tập hợp các đường liên kết dữ liệu kết nối các router trong các LAN khác nhau"],[6050,"Vì lý do chi phí và pháp định nên chỉ có các nhà cung cấp dịch vụ thông tin liên lạc - viễn thông mới sở hữu các đường truyền dữ liệu của WAN"],[6051,"Khách hàng thuê các đường liên kết này để kết nối các mạng LAN của mình hoặc kết nối đến các mạng ở xa"],[6052,"Tốc độ truyền dữ liệu trong WAN thường thấp hơn tốc độ 100 Mb/giây trong LAN"],[6053,"Chi phí thuê bao đường truyền là chi phí lớn nhất cho một mạng WAN"],[6054,"Do đó, việc thiết kế WAN phải đảm bảo cung cấp băng thông lớn nhất trong khả năng chi trả chấp nhận được"],[6055,"Đối với người sử dụng, việc cân đối giữa chi phí và nhu cầu dịch vụ tốc độ cao là một điều không dễ dàng"],[6056,"WAN truyền tải rất nhiều loại lưu lượng khác nhau như dữ liệu, thoại và video"],[6057,"Do đó thiết kế được đưa ra phải cung cấp đủ dung lượng, thời gian truyền đáp ứng được với yêu cầu của toàn bộ hệ thống"],[6058,"Ngoài ra, người thiết kế còn phải quan tâm đến cấu trúc của mạng nối giữa các trung tâm với nhau, về đặc tính tự nhiên, về băng thông và khả năng của các kết nối này"],[6059,""],[6060,"539 Mạng WAN cũ trước đây thường bao gồm các đường kết nối giữa các máy tính lớn (mainframe) ở cách xa nhau"],[6061,"Mạng WAN ngày nay kết nối các LAN ở xa lại với nhau"],[6062,"Tất cả các máy tính đầu cuối, server và router nằm trong cùng một phạm vi được kết nối với nhau thông qua LAN và WAN kết nối các router của từng LAN lại với nhau"],[6063,"Thông qua sự trao đổi thông tin địa chỉ lớp 3 router có thể định tuyến cho mọi luồng dữ liệu"],[6064,"Ngoài ra, router còn cung cấp chế độ quản lý chất lượng dịch vụ (QoS) cho phép định tuyến và chuyển mạch các luồng dữ liệu khác nhau với các mức ưu tiên khác nhau"],[6065,"WAN thường chỉ là tập hợp các kết nối giữa các router để liên kết các LAN với nhau, do đó không có dịch vụ nào thực hiện trên WAN"],[6066,"WAN hoạt động ở 3 lớp dưới của mô hình OSI"],[6067,"Router quyết định chọn đường đến đích cho dữ liệu từ thông tin lớp Mạng nằm trong gói dữ liệu rồi sau đó chuyển gói dữ liệu xuống kết nối vật lý tương ứng"],[6068,""],[6069,"540 Hình 2.3.1.a"],[6070,"Mạng WAN trước đây và hiện nay"],[6071,"Hình 2.3.1.b"],[6072,"Các công nghệ WAN hoạt động ở 3 lớp dưới của mô hình OSI"],[6073,"2.3.2"],[6074,"Các bước trong thiết kế WAN Thiết kế WAN là một công việc đầy thử thách, nhưng nếu thiết kế theo một cách có hệ thống thì chúng ta sẽ xây dựng được một mạng WAN có hiệu suất hoạt động cao với chi phí thấp"],[6075,"Mỗi khi cần thay đổi một mạng WAN đã có sẵn thì chũng ta nên đi theo các bước được đề nghị dưới đây trong phần này"],[6076,""],[6077,"541 Chúng ta thường phải thay đổi mạng WAN mỗi khi cần mở rộng server WAN, công việc kinh doanh thực tế có sự thay đổi\u2026 Các công ty lắp đặt mạng WAN để thực hiện trao đổi dữ liệu giữa các chi nhánh"],[6078,"Mạng WAN này phục vụ cho toàn bộ hệ thống mạng của công ty"],[6079,"Chi phí bao gồm nhiều phần, ví dụ trong đó có chi phí cho thiết bị và cho việc quản lý đường truyền"],[6080,"Trong thiết kế WAN, chúng ta cần biết trong mạng WAN đó truyền những loại lưu lượng nào, từ đâu đến đâu"],[6081,"WAN có thể truyền tải nhiều loại dữ liệu khác nhau với yêu cầu băng thông, độ trễ và nghẽ mạch khác nhau"],[6082,"Hình 2.3.2.a"],[6083,"So sánh giữa các loại lưu lượng trong WAN"],[6084,"n biết thông tin về các đặc ỗi loại lưu lượng trên mỗi hướng"],[6085,"Quyết định về những đặc điểm này uỳ thuộc vào sự sử dụng của user"],[6086,"Việc thiết kế WAN thường là nâng cấp, mở rộ g hoặc thay đổi một mạng WAN đã có mạng cũ"],[6087,"ng"],[6088,"\u2022 Dữ liệu Client/Server"],[6089,"\u2022 Hướng kết nối hay không hướng kết nối"],[6090,"\u2022 Khả năng kéo dài thời gian trễ"],[6091,"\u2022 Khả năng hoạt động của mạng"],[6092,"Chúng ta cà điểm của m t n sẵn"],[6093,"Do đó, có rất nhiều dữ liệu mà chúng ta cần đã có trong hồ sơ quản lý của Các đặc điểm của lưu lượng mạng: \u2022 Kết nối và mức độ dòng lưu lượ"],[6094,"542 \u2022 Tỉ lệ lỗi"],[6095,"\u2022 Mức độ ưu tiên"],[6096,"\u2022 Loại giao thức"],[6097,"\u2022 Chiều dài trung bình của gói dữ liệu"],[6098,"Việc xác định vị trí các điểm cuối của kết nối sẽ giúp chúng ta xây dựng sơ đồ cấu trúc WAN"],[6099,"Cấu trúc này phải thoả mãn các điều kiện về địa lý cũng như các điều kiện hoạt động"],[6100,"Nếu điều kiện hoạt động đòi hỏi cao thì cần phải có thêm các kết nối để dự phòng và chia sẻ tải"],[6101,"Cuối cung, chúng ta phải quyết đình chi phí lắp đặt và hoạt động cho WAN, so sánh chi phí đó với những lợi ích mà WAN mang lại"],[6102,"Trong thực tế các bước được đưa ra dưới đây rất ít khi là một quá trình xuyên suốt liên tục"],[6103,"Sẽ có thể có nhiều thay đổi cần thiết trước khi kết thúc thiết kế"],[6104,"Sau khi lắp đặt WAN xong chúng ta cũng luôn phả theo dõi và đánh giá lại mạng WAN để đảm bảo hiệu quả hoạt động của nó"],[6105,"Hình 2.3.2.b"],[6106,"Các bước trong thiết kế WAN Xác định và lựa chọn dung lượng mạng như thế nào"],[6107,"543 Thiết kế WAN thực chất bao gồm các công việc sau: Lựa chọn cấu trúc kết nối giữa các vị trí khác nhau"],[6108,"Lựa chọn công nghệ cho các kết nối này sao cho phù hợp với yêu cầu của toàn bộ hệ thống và chi phí chấp nhận được"],[6109,"Có rất nhiều mạng WAN sử dụng cấu trúc hình sao"],[6110,"Khi tổ chức phát triển hơn, thêm một chi nhánh cần kết nối vào trung tâm thì khi đó triển khai thêm một nhánh cho cấu trúc hình sao"],[6111,"Đôi khi các điểm cuối của hình sao được kết nối chéo với nhau để tạo thành mạng lưới, tạo thêm nhiều khả năng kết nối"],[6112,"Khi thiết kế, đánh giá lại hoặc thay đổi mạng WAN chúng ta cần chọn ra một cấu trúc phù hợp với yêu cầu"],[6113,"Hình 2.3.3.a"],[6114,"Cấu trúc hình sao"],[6115,""],[6116,"544 Hình 2.3.3.b"],[6117,"Cấu trúc hình lưới toàn phần"],[6118,"Hình 2.3.3.c"],[6119,"Cấu trúc hình lưới một phần"],[6120,"Khi lựa chọn cấu trúc, chúng ta cần quan tâm đến một số yếu tố"],[6121,"Càng nhiều kết nối thì chi phí càng tăng cao, nhưng càng có nhiều đường kết nối giữa các điểm thì độ tin cậy của mạng càng cao"],[6122,"Càng đặt thêm nhiều thiết bị trên đường truyền dữ liệu càng làm tăng thêm thời gian trễ và làm giảm độ tin cậy"],[6123,"Chúng ta có rất nhiều"],[6124,"545 công nghệ khác nhau với những đặc điểm khác nhau để chọn lựa cho kết nối dữ liệu"],[6125,"Công nghệ Yếu tố tính cước phí Tốc độ bit tối đa Đặc điểm khác Đường thuê riêng Khoảng cách, dung lượng Không giới hạn Dung lượng cố định"],[6126,"Đường điện thoại Khoảng cách, thời gian 33 \u2013 56 kb/giây Quay số, kết nối chậm"],[6127,"ISDN Khoảng cách, dung lượng 64 hoặc 128 Kb/giây <2 Mb/giây PRI Quay số, kết nối nhanh"],[6128,"X.25 Dung lượng"],[6129,"<48 Kb/giây Dung lượng cố định ATM Dung lượng"],[6130,">155 Mb/giây Dung lượng thay đổi"],[6131,"Những công nghệ đòi hỏi phải thiết lập kết nối trước khi truyền dữ liệu, ví dụ như đường điện thoại, ISDN, X.25, không phù hợp cho mạng WAN cần thời gian đáp ứng nhanh hoặc thời gian trễ thấp"],[6132,"Một khi đã được thiết lập kết nối thì ISDN và các dịch vụ quay số khác có thời gian trễ thấp, ít nghẽn mạch"],[6133,"ISDN thường được chọn để kết nối các văn phòng nhỏ vào mạng trung tâm vì nó cung cấp kết nối tin cậy, băng thông phù hợp"],[6134,"ISDN còn được sử dụng làm đường dự phòng cho đường kết nối chính và là kết nối được thiết lập theo yêu cầu để chia sẻ tải với đường kết nối chính"],[6135,"Một ưu điểm của công nghệ này là thuê bao chỉ phải trả cước phí cho thời gian đường truyền được thiết lập"],[6136,"Các chi nhánh của một công ty có thể kết nối trực tiếp với nhau bằng đường thuê riêng hoặc kết nối vào mạng chia sẻ như X.25, Frame Relay và ATM"],[6137,"Đường truyền thuê kênh riêng kéo được xa hơn và đương nhiên cũng đắt hơn nhưng nó có thể cung cấp mọi băng thông chúng ta muốn, thời gian trễ và nghẽn mạch rất thấp"],[6138,""],[6139,"546 Mạng ATM, Frame Relay và X.25 truyền lưu lượng của nhiều khách hàng khác nhau trong cùng một kết nối"],[6140,"Khách hàng không kiểm soát được số lượng đường kết nối, số lượng trạm trung gian mà dữ liệu phải đi qua trong mạng chia sẻ, cũng như không thể điều khiển được thời gian chờ tại mỗi trạm"],[6141,"Chính vì nhược điểm về thời gian trễ và nghẽn mạch mà các công nghệ này không phù hợp với một số loại lưu lượng mạng"],[6142,"Tuy nhiên, nhược điểm này vẫn thường được chấp nhận vì các mạng chia sẻ này lại có ưu điểm lớn là chi phí rẻ"],[6143,"Khi có nhiều khách hàng cùng chia sẻ một đường kết nối thì đương nhiên chi phí sẽ thấp hơn nhiều so với chi phí cho một đường thuê kênh riêng có cùng dung lượng"],[6144,"Mặc dù ATM cũng là một mạng chia sẻ nhưng nó được thiết kế để giảm thiểu tối đa thời gian trễ và nghẽn mạch bằng cách sử dụng các kết nối tốc độ cao với một đơn vị dữ liệu thống nhất, dễ quản lý, gọi là tế bào"],[6145,"Mỗi một tế bào ATM ( chính là mỗi gói dữ liệu trong mạng ATM) có chiều dài cố định là 53 byte, trong đó 48 byte dữ liệu và 5 byte cho phần Header"],[6146,"Các tế bào có chiều dài nhỏ và như nhau, không có gói nào khác lớn hơn trong mạng ATM nên không có thời gian trễ lớn hơn giữa các gói"],[6147,"Do đó, ATM được sử dụng rộng rãi cho các loại lưu lượng nhạy cảm với thời gian trễ"],[6148,"Frame Relay cũng có thể được sử dụng cho những loại lưu lượng nhạy cảm với thời gian trễ nhưng thường phải sử dụng thêm cơ chế QoS để cấu hình độ ưu tiên cho những loại dữ liệu này"],[6149,"Việc chọn lựa các công nghệ cho WAN thường dựa trên loại lưu lượng và dung lượng của chúng"],[6150,"ISDN, DSL, Frame Relay hoặc đường thuê riêng thường được sử dụng để kết nối các chi nhánh vào một trung tâm"],[6151,"Frame Relay, ATM hoặc đường thuê riêng thường được sử dụng để kết nối các vùng mở rộng vào đường trục chính"],[6152,"ATM hoặc đường thuê kênh riêng được sử dụng làm đường trục chính cho WAN"],[6153,"2.3.4"],[6154,"Mô hình thiết kế 3 lớp Việc kết hợp một cách có hệ thống là rất cần thiết khi chúng ta cần liên kết nhiều vị trí lại với nhau"],[6155,"Giải pháp phân cấp với mô hình 3 lớp cho chúng ta rất nhiều ưu điểm được nêu trong bảng sau"],[6156,""],[6157,"547 Khả năng mở rộng Mạng được thiết kế theo mô hình phân cấp có thể mở rộng hơn nhiều mà không hề làm giảm bớt mức độ kiểm soát và quản lý hệ thống"],[6158,"Các chức năng của hệ thống đã mang tính tập trung và các lỗi tiềm ẩn sẽ được phát hiện dễ dàng hơn"],[6159,"Hệ thống mạng chuyển mạch điện thoại là một ví dụ cho kiểu cấu trúc mạng phân cấp lớn"],[6160,"Dễ triển khai Cấu trúc phân cấp có chức năng rõ ràng cho từng lớp nên công việc triển khai cũng được thực hiện dễ dàng hơn"],[6161,"Dễ dàng xử lý sự cố Việc phân chi chức năng rõ ràng cho mỗi lớp cho phép việc xác định sự cố dễ dàng hơn"],[6162,"Việc chia hệ thống mạng ra thành nhiều phân đoạn giúp giảm thiểu phạm vi ảnh hưởng của sự cố"],[6163,"Khả năng dự đoán Phản ứng của hệ thống mạng có cấu trúc phân lớp hoàn toàn có thể dự đoán được, do đó việc nâng cấp hệ thống cũng sẽ tạo được thuận lợi hơn"],[6164,"Khả năng hỗ trợ các giao thức Đối với cấu trúc mạng có phân cấp thì việc tích hợp các ứng dụng và giao thức hiện tại với tương lai có thể thực hiện dễ dàng vì cơ sở hạ tầng mạng được tổ chức theo logic"],[6165,"Khả năng quản lý Tất cả các ưu điểm được liệt kê ở trên đều nhằm cung cấp khả năng quản lý tốt hơn cho hệ thống mạng"],[6166,"Chúng ta thử tưởng tượng một công ty lớn hoạt động trên mọi quốc gia ở Châu Âu và có chi nhán ở mọi thành phố có dân số hơn 10.000 người"],[6167,"Mỗi chi nhánh là một LAN và chúng ta cần liên kết các chi nhánh với nhau"],[6168,"Mạng hình lưới rõ ràng là không khả thi vì chúng ta cần tới gần 500.000 liên kết cho 900 điểm"],[6169,"Mạng hình sao đơn cũng không thực hiện được vì chúng ta cần phải có một router tại vị trí trung tâm hình sao với 900 cống hoặc 1 cổng vật lý có khả năng thiết lập 900 giao tiếp ảo"],[6170,""],[6171,"548 Thay vào đó chúng ta sẽ thiết kết theo mô hình phân cấp"],[6172,"Các mạng LAN trong cùng một vùng địa lý sẽ được liên kết lại với nhau thành một vùng"],[6173,"Các vùng sẽ được kết nối với nhau tạo thành một khu vực"],[6174,"Các khu vực kết nối với nhau và đóng vai trò là trục chính của mạng WAN"],[6175,"Hình 2.3.4.a"],[6176,"Các LAN trong một vùng được kết nối lại theo hình sao và từ router ở trung tâm hình sao kết nối ra khu vực"],[6177,"Hình 2.3.4.b"],[6178,"Một mạng khu vực"],[6179,""],[6180,"549 Hình 2.3.4.c"],[6181,"Kết nối mạng khu vực vào đường trục chính"],[6182,"Số lượng các địa điểm được kết nối với nhau trong một vùng được giới hạn trong khoảng từ 30 đến 50"],[6183,"Mỗi vùng có cấu trúc hình sao, thiết bị tại trung tâm hình sao sẽ kết nối ra khu vực"],[6184,"Mạng khu vực có phạm vi địa lý lớn, kết nối khoảng 3 đến 10 vùng với nhau"],[6185,"Thiết bị trung tâm của mạng khu vực sẽ kết nối ra trục chính, các kết nối này có thể là kết nối điểm-đến-điểm"],[6186,"Mô hình 3 lớp này dựa theo thiết kế phân cấp được sử dụng trong hệ thống điện thoại"],[6187,"Lớp truy cập là lớp kết nối các điểm trong cùng một vùng và đây là điểm truy cập vào hệ thống mạng"],[6188,"Lưu lượng giữa các vùng được phân phối bởi các kết nối trong lớp phân phối và chỉ được chuyển lên đường trục chính sang khu vực khác khi cần thiết"],[6189,"Cấu trúc này rất hữu dụng khi công ty có cấu trúc chi nhánh và được chia thành khu vực, vùng, chi nhánh"],[6190,"Cấu trúc này cũng rất phù hợp khi có một trung tâm dịch vụ mà tất cả các chi nhánh đều cần phải truy cập vào nhưng cấp độ lưu lượng không đủ để phân phối trực tiếp cho từng kết nối của từng chi nhánh"],[6191,""],[6192,"550 Trong mạng LAN ở trung tâm của mỗi vùng, chúng ta có thể đặt các server để cung cấp dịch vụ nội bộ"],[6193,"Tuỳ theo mức độ và loại lưu lượng mà kết nối truy cập có thể là quay số, thuê riêng hoặc Frame Relay"],[6194,"Cấu trúc Frame Relay cho phép thực hiên dạng mạng lưới để dự phòng mà không cần phải thêm kết nối vật lý"],[6195,"Các kết nối ở lớp Phân phối (Distribution Layer) có thể là Frame Relay hoặc ATM và kết nối trục chính ( Core Layer) có thể là ATM hoặc đường thuê riêng"],[6196,"2.3.5"],[6197,"Các mô hình phân lớp khác Có nhiều hệ thống mạng lại không đòi hỏi phải có cấu trúc phân cấp phức tạp đủ 3 lớp"],[6198,"Do đó, chúng ta có thể sử dụng dạng phân cấp đơn giản hơn"],[6199,"Hình 2.3.5.a"],[6200,"Mô hình phân cấp 3 lớp"],[6201,"Một công ty có một số chi nhánh nhỏ với mức độ lưu lượng thấp thì có thể thiết kết theo một lớp"],[6202,"Trước đây, mô hình này không được phổ biến vì chiều dài của đường thuê riêng là một yếu tố đáng kể"],[6203,"Ngày nay, với Frame Relay chúng ta không trả cước phí theo chiều dài thì giải pháp thiết kế này có thể thực hiện được"],[6204,""],[6205,"551 Hình 2.3.5.b"],[6206,"Mô hình phân cấp một lớp"],[6207,"Nếu do yêu cầu địa lý cần phải tập trung thành một số điểm thì chúng ta có thể áp dụng mô hình thiết kế 2 lớp"],[6208,"Khi thiết kế mạng đơn giản chúng ta vẫn dựa theo mô hình ba lớp để mạng có khả năng mở rộng về sau"],[6209,"Các thiết bị tại trung tâm của lớp 2 được coi là trục chính mặc dù không có router nào ở lớp trục chính (core layer) kết nối vào nó"],[6210,"Tương tự, trong thiết kế một lớp, thiết bị trung tâm cũng đồng thời là thiết bị khu vực và thiết bị trục chính"],[6211,"Với cách thiết kế phân lớp như vậy hệ thống có thể được mở rộng dễ dàng sau này"],[6212,"2.3.6"],[6213,"Một số điểm cần lưu ý khác khi thiết kế WAN"],[6214,"Nhiều mạng WAN có kết nối ra Internet"],[6215,"Đây là một giải pháp có nhiều vấn đề về bảo mật nhưng lại là một cách tốt để kết nối các chi nhánh ở nhiều quốc gia khác nhau"],[6216,"Trong quá trình thiết kế, chúng ta phải quant tâm đến thành phần đi ra và đi vào từ Internet"],[6217,"Từ khi Internet được triển khai khắp nơi, các mạng LAN của công ty có thể trao đổi dữ liệu theo hai cách"],[6218,"Mỗi LAN có một kết nối đến ISP trong vùng của nó hoặc là từ router trung tâm củ vùng thực hiện một kết nối đến một ISP"],[6219,"Cách thứ nhất có ưu điểm là luồng lưu lượng được truyền đi trong mạng Internet chứ"],[6220,"552 không phải trong mạng của công ty, do đó kết nối WAN có thể có dung lượng nhỏ hơn"],[6221,"Nhưng cách này có một nhược điểm là cả hệ thống mạng công ty được phơi ra cho các tấn công từ Internet"],[6222,"Khi có nhiều kết nối như vậy thì việc theo dõi và quản lý cũng gặp khó khăn"],[6223,"Một kết nối đơn từ router trung tâm của vùng ra Internet sẽ dễ dàng theo dõi và bảo vệ hơn và như vậy mạng WAN của công ty sẽ phải thực hiện truyền tải lưu lượng nhiều hơn"],[6224,"Hình 2.3.6"],[6225,"Sử dụng Internet như mạng WAN của công ty"],[6226,"Nếu mỗi LAN trong mạng có một kết nối Internet riêng thì Internet có thể được sử dụng như mạng WAN của công ty đó, trong đó lưu lượng giữa các chi nhánh được truyền đi trong Internet"],[6227,"Việc bảo vệ các mạng LAN sẽ là một vấn đề nhưng chi phí tiết kiêm được do không phải xây dựng mạng WAN riêng sẽ được dành để chi trả cho vấn đề bảo mật"],[6228,"Server nên được đặt ở gần nơi thường xuyên truy cập vào nó nhất"],[6229,"Các thông tin trả lời, cập nhật của server sẽ làm giảm dung lượng hiệu dụng của đường truyền"],[6230,"Vị trí đặt dịch vụ truy cập Internet phụ thuộc vào đặc tính của bản thân mỗi dịch vụ, mỗi loại lưu lượng và yêu cầu về bảo mật"],[6231,"Lĩnh vực này là một chủ đề đặc biệt nằm ngoài phạm vi của giáo trình này"],[6232,""],[6233,"553 TỔNG KẾT Sau đay là các điểm chính của chương này: \u2022 Sự khác nhau về phạm vi địa lý giữa WAN và LAN"],[6234,"\u2022 Các lớp hoạt động của WAN và LAN trong mô hình OSI"],[6235,""],[6236,"554 CHƯƠNG 3: GIAO THỨC ĐIỂM NỐI ĐIỂM (Point \u2013 to \u2013 Point Protocol) GIỚI THIỆU Chương này cung cấp cho bạn đọc một cái nhìn tổng quát về công nghệ WAN"],[6237,"Trong đó chúng tôi giới thiệu và giải thích các thuật ngữ WAN như truyền nối tiếp, phân kênh theo thời gian (TDM \u2013 Time Division Multiplexing), điểm ranh giới, DTE \u2013Data Terminal Equipment, DCE \u2013 Data Circuit \u2013 terminating Equipment"],[6238,"Sự phát triển và ứng dụng của giao thức đóng gói HDLC (High-level Data Link Control) cũng như phương pháp cấu hình và xử lý sự cố cổng Serial trên router được trình bày trong chương trình này"],[6239,"PPP (Point \u2013 to \u2013 Point Protcol) là một giao thức thường được chọn để triển khai trên một kết nối WAN nối tiếp"],[6240,"PPP có thể thực hiện được Thong tin lien lien lạc thông tin liên lạc đồng bộ, bất đồng bộ và phát hiện lỗi"],[6241,"Quan trọng nhất là PPP có quá trình xác minh sử dụng CHAP hoặc PAP"],[6242,"PPP có thể sử dụng được trên nhiều môi trường vật lý khác nhau bao gồm cáp xoắn, cáp quan và truyền qua vệ tinh"],[6243,"Trong chương này chúng ta sẽ tìm hiểu về quá trình cấu hình và xử lý sự cố cho PPP Sau khi hoàn t ất ch ương n ày các b ạn c ó th ể th ực hi ện đ ư ợc: Gi ải th ích s ự truy ền n ối ti ếp M ô t ả v à cho v í d ụ v ề TDM x ác định đi ểm ranh giới trong mạng WAN M ô t ả ch ức n ăng c ủa DTE v à DCE Tr ình b ày s ự ph át tri ển c ủa giao th ức đ óng g ói HDLC S ử d ụng s ự ph át tri ển c ủa giao th ức đ óng g ói HDLC S ử d ụng l ệnh encapsulation hdlc đ ể c ấu h ình HDLC X ử l ý s ự c ố tr ên c ổng S erial b ằng l ệnh sh ow int erface v à sh ow c ontroller"],[6244,"555 X ác đ ịnh nh ững ưu đi ểm khi s ử d ụng PPP \u2022 Gi ải th ích ch ức n ăng c ủa hai th ành ph ần trong PPP :LCP ( Link C ontrol Protocol ) v à NCP (Net work C ontrol Protocol) \u2022 M ô t ả c ấu tr úc frame PPP \u2022 X ác đ ịnh 3 qu á tr ình c ủa m ột phi ên giao ti ếp PPP \u2022 Gi ải th ích s ự kh ác nhau gi ữa PAP v à CHAP \u2022 Li ệt k ê c ác b ư ớc c ủa qu á tr ình x ác minh PPP \u2022 C ấu h ình PPP v ới nhi ều ch ọn l ựa kh ác nhau \u2022 C ấu h ình ki ểu đ óng g ói PPP \u2022 C ấu h ình qu á tr ình x ác minh Chap va PAP \u2022 S ử d ụng l ệnh Sh ow int erface đ ể ki ểm tra ki ểu đ óng g ói tr ên c ổng S erial \u2022 X ử l ý c ác sự cố liên quan đến cấu hình PPP bằng lệnh debug PPP 3.1"],[6245,"Liên kết nối tiếp điểm-đến-điểệ 3.1.1.Giới thiệu về truyền nối tiếp Các công nghệ WAN đều dựa trên cơ sở truyền nối tiếp ở lớp Vật lý"],[6246,"Điều này có ý nghĩa là các bit trong một frame được truyền lần lượt trên đường truyền vật lý \u2022 Mỗi bit trong frame Lớp 2 được mã hoá thành tín hiệu và được truyền lần lượt xuống môi trường tryền vật lý"],[6247,"Các phương pháp mã hoá ín hiệu lớp Vật lý bao gồm NRZ-L (Nonreturn to Zezo Level), HDB3(High Density Binary) và AMI ( các phương pháp mã hoá tín hiệu khác nhau"],[6248,"Sau đây là một số các chuẩn truyền nối tiếp khác nhau"],[6249,"556 \u2022 RS-232-E \u2022 V.35 \u2022 High Speed Serial Interface (HSSI) 3.1.2 Phân kênh theo thời gian (TDM- Time Division Multiplexing) Phân kênh theo thời gian TDM là truyền nhiều nguồn thong tin trên cùng một tín hiệu, sau đó lại tách ra thành các nguồn riêng biệt như ban đầu tại điểm cuối Ví dụ như hình 3.1.2.a chúng ta có 3 nguồn thong tin khác nhau đưa vào cùng một kênh"],[6250,"Mỗi nguồn thông tin được truyền luân phiên, đơn vị dữ liệu"],[6251,"Đơn vị dữ liệu này có thể là một bit hoặc một byte"],[6252,"Tuỳ theo đơn vị là bit hay byte mà loại TDM này được gọi là chèn bit hay chèn byte"],[6253,"Mỗi nguồn thông tin ở đầu vào có một dung ượng riêng của nó"],[6254,"Để có thể truyền thông tin cho cả 3 nguồn thì dung lượng của kênh truyền không được thấp hơn tổng dung lượng của 3 đầu vào"],[6255,"Trong TDM các khe thời gian luôn luôn tồn tại cho dù không có dữ liệu truyền vào"],[6256,"TDM có thể được ví như một xe lửa có 3 toa xe"],[6257,"mỗi toa xe thuộc sở hữu của một công ty và mỗi ngày xe lửa đều cạy với 32 toa"],[6258,"Nêu công ty nào có hang gởi đi thì toa xe của công ty đó đầy"],[6259,"Nếu công ty nào không có gì gởi đi thì toa xe đó để trống nhưng vẫn hiện diện trong đoàn tàu"],[6260,"557 TDM là một khái niệm ở lớp Vật lý, nó không phụ thuộc vào bản chất của thông tin được ghép vào kênh truyền và cũng không phụ thuộc vào các giao thức lớp 2 được sử dụng trên các đầu vào"],[6261,"Một ví dụ cho TDM là ISDN (Integrated Services Digital Network)"],[6262,"ISDN BRI có 3 kênh truyền, bao gồm 2 kênh B 64Kb/giây và một kênh D 16Kb/giây"],[6263,"TDM có 9 khe thời gian được chia ra như trong hình3.1.2b"],[6264,"3.1.3 Điểm ranh giới Điểm ranh giới là điểm mà trách nhiệm của nhà cung cấp dịch vụ trong mạng kết thúc"],[6265,"Ở Mỹ nhà cung cấp dịch vụ cung cấp mạng vòng nội bộ đến vị trí của khách hang và khách hang kết nối thiết bị của mình như CSU/DSU vào điểm cuối của mạch vòng dữ liệu này"],[6266,"Khách hang phải chịu trách nhiệm bảo trì, thay thể hay sửa chữa thiết bị của mình Ở các nước khác trên thế giới thì công ty khai thác dịch vụ sẽ cung cấp và quản lý đơn vị kết cuối mạng NTU (network terminating unit)"],[6267,"Như vậy nhà cung cấp dịch vụ có thể quản lý và xử lý sự cố với điểm ranh giới nằm sau NTU"],[6268,"Khách hàng kết nối thiết bị CPE của mình, ví dụ như router, thiết bị truy cập Frame Relay vào NTU bằng cổng Serial V3.5 hoặc RS -232"],[6269,"558 3.1.4 DTE/DCE Một kết nối tiếp có một đầu là thiết bị DTE và đầu kia là thiết bị DCE"],[6270,"Kết nối giữa hai DCE chính là mạng WAN của nhà cung cấp dịch vụ CPE thông thường là router của khách hang đóng vai trò là DTE Máy tính, máy in, máy fax cũng là những ví dụ cho thiết bị DTE, DCE, thông thường là moderm hoặc CSU/DSU là thiết bị chuyển đổi tín hiệu từ DTE sang dạng tín hiệu phù hợp với đường truyền trong mạng WAN của nhà cung cấp dịch vụ"],[6271,"Tín hiệu này được thiết bị DCE ở đầu bên kia nhận được và lại được chuyển đổi thành dạng tín hiệu phù hợp với DTE và được truyền cho DTE"],[6272,"559 Chuyển giao tiếp DTE/DCE định nghĩa các đặc điểm sau: \u2022 Cấu trúc vật lý: số lượng chân và hình dạng của đầu kết nối \u2022 Điện : định nghĩa mức điện thế cho tín hiệu 0 và 1 \u2022 Chức năng: quy ước chức năng ý nghĩa của từng đường tín hiệu trong cổng kết nối \u2022 Thủ tục: quy ước thứ tự các bước trong truyền dữ liệu Nếu hai DTE cần phải kết nối trực tiếp với nhau giống như hai máy tính hoặc hai router thì chúng ta cần sử dụng một loại cáp đặc biệt gọi là cáp null-moderm để thay thế cho DCE"],[6273,"Đối với kết nối đồng bộ thì cần phải có tín hiệu đồng bộ, khi đó chúng ta cần phải có thêm một thiết bị bên ngoài hoặc một trong hai thiết bị DTE phải phát được tín hiệu đồng bộ Cổng Serial đồng bộ trên router được cấu hình là DTE hay DCE là tuỳ theo đầu cáp cắm vào cổng đó là DTE hay DCE"],[6274,"Cấu hình mặc định của cổng Serial là DTE"],[6275,"Nếu cổng Serial được cấu hình là DTE thì CSU/DSU hoặc thiết bị DCE kết nối vào cổng này phải phát tín hiệu đồng bộ Cáp cho kết nối DTE \u2013 DCE là cáp nối tiếp có lớp bọc chống nhiều"],[6276,"Đầu cáp kết nối vào cổng Serial trên Router là đầu DB-60"],[6277,"Đầukia của cáp theo chuẩn nào là tuỳ theo CSU/DSU hay nhà cung cấp dịch vụ WAN"],[6278,"Thiết bị Cisso có hỗ trợ các chuẩn kết nối sau: EIA/TIA-32, EIA/TIA-449, V.35, X.21 và EIA/TIA-530"],[6279,"560 Cisso cũng đã giới thiệu loại cáp Smart Serial với độ nhạy cao hơn và kiểu dáng nhỏ gọn hơn"],[6280,"Đầu cáp Smart Serial cắm vào cổng Serial trên router chỉ có 26 chân tín hiệu nhỏ gọn hơn so với đầu DB-60 3.1.5 Đóng gói HDLC \u2022 Truyền nối tiếp đặt cơ sở trên giao thức hướng bit"],[6281,"Giao thức hướng bit tuy có hiệu quả hơn nhưng thường mang tính độc quyền"],[6282,"Năm 1979, ISO đã chấp thuận HDLC là giao thức chuẩn hướng bit của lớp Liên kết dữ liệu) cho ISDN Link Aceess Procedure f or Mod emsthực hiện đóng gói dữ liệu cho đường truyền nối tiếp đồng bộ"],[6283,"Sự chuẩn hoá này đã giúp cho các tổ chức khác áp dụng và mở rộng giao thức này"],[6284,"Từ năm 1981, ITU-T đã phát triển một loạt các phiên bản của HDLC"],[6285,"Sau đâ là một ví dụ, những giao thức này được gọi là giao thức truy cập đường liên kết: \u2022 Link Aceess Procedure, Balanced (LAPB) cho X.25\\ \u2022 Link Aceess Procedure on the D channel (LAPD) cho ISDN( \u2022 Link Aceess Procedure f or Mod ems (LAPM) and PPP cho mod ems \u2022 Link Acc ess Proced ure f or Frame Relay (L APF) cho Frame Relay HDLC cung c ấp c ơ ch ế truyền đồng bộ không có lỗi giữa hai điểm"],[6286,"HDLC định nghĩa cấu trúc frame Lớp 2 cho phép điều khiển luồng theo cơ chế cửa sổ trượt, kiểm tra lỗi và báo nhận"],[6287,"Frame dữ liệu hay frame điều khiển đều có cùng một định dạng frame"],[6288,"561 Chuẩn HDLC không hỗ trợ nhiều giao thức trên một đường kết nối, đồng thời cũng không có thông tin cho biết giao thức lớp trên nào đang được truyền trên đường truyền"],[6289,"Cisso có giới thiệu một phiên bản HDLC độc quyền riêng"],[6290,"Frame Cisso HDLC có phần \u201ctype\u201d cho biết giao thức lớp trên của của frame"],[6291,"Nhờ có phần này mà nhiều giao thức lớp Mạng có thể chia sẻ cùng một đường truyền nối tiếp"],[6292,"HDLC là giao thức Lớp 2 mặc định trên cổng Serial của Cisso router HDLC định nghĩa 3 loại frame mỗi loại có định dạng phần điêu khiển khác nhau \u2022 Frame thông tin (I-Frames\u2013 Information frames): là frame mạng dữ liệu của máy truyền"],[6293,"Trong frame thông tin có chèn thêm phần điều khiển luồng và lỗi"],[6294,"\u2022 Frame giám sát (S-Frames \u2013 Supervisory frames): cung cấp cơ chế hỏi đáp khi cơ chế chèn thông tin trong I-Frame không được sử dụng"],[6295,"\u2022 Frame không đánh số (U-Frames \u2013 Unnumbered frames):thực hiện chức năng bổ sung điều khiển kết nối như thiết lập kết nối"],[6296,"Phần \u201ccode\u201d trong frame sẽ xác định loại frame là U-frame Một hoặc hai bit đầu tiên của phần \u201cCotrol\u201d cho biết loại frame"],[6297,"Trong frame thông tin phần nay có chỉ số của gói gủi kế tiếp và gói nhận kế tiếp"],[6298,"Trong frame phát đi của máy gửi và máy nhận đều có hai chỉ số này 3.1.6 Cấu hình đóng gói HDLC"],[6299,"562 Kiêủ đóng gói mặc định trên cổng Serial đồng bộ của thiết bị Cisco là Cisco HDLC"],[6300,"Nếu cổng Serial đã được cấu hình kiểu đóng gói khác và bây giờ cần quay lại kiểu đóng gói HDLC thì chúng ta vào chế độ cấu hình cổng Serial tương ứng"],[6301,"Sau đó dung lệnh encapsulation để khai báo giao thức đóng gói HDLC cho cổng đó Router (config \u2013 if)# encapsulation hdlc Cisso HDLC là giao thức điểm nối điểm được sử dụng trên đường truyền nối tiếp giữa hai thiết bị Cisso"],[6302,"Nếu kết nối với một thiết bị không phải của Cisco thì chúng ta nên chọn PPP 3.1.7 Xử lý sự cố trên cổng Serial Kết quả hiển thị của lệnh show interfaces serial cho biết các thông tin về cổng serial"],[6303,"Khi cổng serial được cấu hình kiểu đóng gói HDLC thì chúng ta sẽ đọc thấy dòng \u201cEncapsulation HDLC\u201d trong kết quả hiển thị của lệnh này Nếu cổng serial đã được cấu hình PPP thì chúng ta sẽ đọc thấy dòng \u201cEncapsulation PPP\u201d như trong hình 3.1.7b"],[6304,"563 Sau đây là 5 trạng thái sự cố mà chúng ta có thể xác định được thông qua kết quả hiển thị của lệnh show interfaces serial\u201d \u2022 Serial x is down, line protocol is down \u2022 Serial x is up, line protocol is down \u2022 Serial x is up, line protocol is up (looped) \u2022 Serial x is up, line protocol is down (disabled) \u2022 Serial x is administratively down, line protocol is down Trạng thái đường kết nối Điều kiện có thể xảy ra Sự cố/ Giải pháp Serial x is up, line protocol is up Đây là trạng thái hoạt động tốt của đường truyền Không cần phải làm gì cả Serial x is down, line Router không gửi tín hiệu CD, có nghĩa CD 1.Kiểm tra LED trên CSU/DSU xem CD có hoạt động hay không, hoặc"],[6305,"564 protocol is down (dầu DTE) không hoạt động"],[6306,"Có thể sự cố xảy ra do phía nhà cung cấp dịch vụ WAN, kết nối không thực hiện hoặc chưa được kết nối vào CSU/DSU Cáp bị lỗi hoặc kết nối không đúng Lỗi phần cứng (CSU/DSU) sử dụng thiết bị đo trên đường dây xem có tín hiệu CD hay không"],[6307,"2"],[6308,"Kiểm tra cáp và kết nối có theo đúng hướng dẫn lắp đặt hay không 3"],[6309,"Sử dụng thiết ị kiểm tra mọi dây cáp"],[6310,"4"],[6311,"Liên hệ với nhà cung cấp dịch vụ để kiểm tra vị trí xảy ra sự cố"],[6312,"5"],[6313,"Thay thế phần bị sự cố"],[6314,"6"],[6315,"Nếu nghi ngờ phần cứng router bị hư hỏng thì nên chuyển kết nối sang cổng khác"],[6316,"Nếu sự cố không xảy ra nữa thì có nghĩa là cổng kết nối trước đó đã bị hư"],[6317,"Serial x is up, line protocol is down (dầu DTE) Router nội bộ hoặc router ở đầu bên kia bị cấu hình sai"],[6318,"Router đầu bên kia không gửi thông điệp Keepalives Có thể sự cố xảy ra do phía nhà cung cấp dịch vụ, đường truyền bị nhiễu hoặc switch bị cấu hình sai"],[6319,"Vấn đề về đồng bộ xảy ra trên cáp, SCTE \u2013 Serial clock transmit 1"],[6320,"Đặt modem, CSU hoặc DSU vào chế độ loopback và dùng lệnh show interfaces serial để xem line protocol is up, có nghĩa là sự cố do phía nhà cung cấp dịch vụ WAN hoặc router ở đầu bên kia bị sự cố"],[6321,"2"],[6322,"Nếu có vẻ như sự cố xảy ra ở đâù bên kia thì chúng ta lặp lại bước 1 ở đầu bên kia 3"],[6323,"Kiểm tra mọi dây cáp, chúng ta cần chắc chắn rằng mọi dây cáp đã được kết nối vào đúng cổng, đúng CSU/DSU vào đúng điểm cuối của mạng WAN của nhà cung cấp dịch vụ.Chúng ta sử dụng lệnh show"],[6324,"565 external chưa được cài đặt trên CSU/DSU"],[6325,"SCTE được thiết kế để bổ xung cho sự lệch phạ đồng hồ trên cáp dài"],[6326,"Thiết bị DCE sử dụng SCTE thay vì xung đồng hồ bầu bên trong thiết bị DCE CSU/DSU nội bộ hoặc ở đầu bên kia bị sự cố"],[6327,"Phần cứng của router nội bộ hoặc router đầu bên kia bị hư controllers để xác định cáp nào đang được cắm vào cổng nào 4"],[6328,"Sử dụng lệnh debug serial interface"],[6329,"5"],[6330,"Nếu vẫn còn trạng thái line protocol is down trong chế độ loopback ở bước 1 và kết quả hiển thị của lệnh debug serial interface cho thấy số lượng Keepalive không tăng lên thì khả năng lớn là lỗi phần cứng của router"],[6331,"Kết nối loopback cho cổng đang kết nối trên router 6"],[6332,"Nếu line protocol is up, số lượng Keepalive tăng lên thì sự cố không nằm trên router nội bộ 7"],[6333,"Nếu nghi ngờ sự cố do phần cứng router thì chúng ta đổi kết nối lên cổng khác còn trống"],[6334,"Nếu kết nối hoạt động được có nghĩa là cổng trước đó bị hư Serial x is up line protocol is down (dầu DCE) Thiếu lệnh cấu hình clokrate cho cổng"],[6335,"Thiết bị DTE không hỗ trợ hoặc chưa được cấu hình cho chế độ SCTE .CSU hoặc DSU ở đầu bên kia bị hư 1.Thêm lệnh cấu hình clokrate cho cấu hình cổng serial 2"],[6336,"Clockrate bps 3"],[6337,"Tham số bps có thể là : 1200,2400,4800,9600,19200,38400, 56000,64000,72000,125000,148000, 250000,500000,800000,1000000, 1300000,2000000,8000000"],[6338,""],[6339,"566 4"],[6340,"Nếu có vẻ như sự cố xảy ra ở đầu bên kia kết nối thì chúng ta thực hiện lại bước 1 ở modem, CSU hoặc DSU ở đầu bên kia 5"],[6341,"Kiểm tra xem cáp có kết nối đúng không"],[6342,"6"],[6343,"Nếu vẫn còn trạng thái line protocol is down, sự cố có thể là phần cứng hoặc do cáp Chúng ta sử dụng thiết bị kiểm tra cáp 7"],[6344,"Thay thế phần bị hư khi cần thiết Serial x is up line protocol is up (looped) Tồn tại mạch lặp vòng"],[6345,"Khi mạch lặp vòng bắt đầu được phát hiện, chỉ số thứ tự của gói Keepalive thay đổi ngẫu nhiên"],[6346,"Nếu chỉ số nhận lại cũng giống với chỉ số gửi đi thì có nghĩa là đang tồn tại mạch lặp vòng 1"],[6347,"Sử dụng lệnh show running- confif để kiểm tra xem có lệnh nào cấu hình cho cổng làm loopback hay không 2"],[6348,"Nếu có lệnh loopback trong cấu hình của cổng giao tiếp thì chúng ta dùng lệnh no loopback để xoá lệnh này khỏi cấu hình 3"],[6349,"Nếu không có lệnh cấu hình loopback thì chúng ta kiểm tra CSU/DSU xem thiết bị này có bị cấu hình bằng tay vào chế độ loopback hay không"],[6350,"Nếu có thì chúng ta tắt chế độ này đi 4.Sau khi tắt chế độ loopback trên CSU/DSU, chúng ta khởi động lại CSU/DSU và xem lại trạng thái"],[6351,"567 đường liên kết"],[6352,"Nếu Line protocol is up thì không cần làm gì nữa 5"],[6353,"Nếu CSU/DSU không thể cấu hình bằng tay được thì chúng ta nên liên hệ với nhà cung cấp dịch vụ để yêu cầu hỗ trợ xử lý sự cố trên đường truyền Serial x is up line protocol is down (disable) Tỉ lệ lỗi cao đang xảy ra do sự cố phía nhà cung cấp dịch vụ"],[6354,"Sự cố phần cứng của CSU hoặc DSU"],[6355,"Phần cứng router không tốt 1.Sử dụng thiết bị kiểm tra và phân tích đường truyền"],[6356,"Kiểm tra tín hiệu CTS và DSR 2"],[6357,"Ngắn mạch CSU/DSU"],[6358,"Nếu sự cố vẫn còn thì có nghĩa là sự cố phần cứng"],[6359,"Nếu không còn sự cố thì sự cố là do phía nhà cung cấp dịch vụ"],[6360,"3"],[6361,"Thay thế những thiết bị có sự cố (CSU, DSU, Switch, router) Serial x is administratively down, line protocol is down Trong cấu hình cổng của router có lệnh shutdown"],[6362,"Bị trùng địa chỉ IP 1"],[6363,"Kiểm tra cấu hình cổng router xem có lệnh shutdown hay không 2"],[6364,"Nếu có thì dùng lệnh no shutdown để xoá bỏ lệnh này ra khỏi cấu hình 3"],[6365,"Kiểm tra cấu hình địa chỉ IP bằng lệnh show running \u2013 config hoặc show interfaces 4"],[6366,"Nếu có trùng địa chỉ thì thay thế địa chỉ IP khác Lệnh show controllers là một công cụ rất hữu ích khi xử lý sự cố trên kết nối serial"],[6367,"Kết quả hiển thị của lệnh show controllers cho biết trạng thái của cổng, cáp nào hiện đang kết nối vào cổng"],[6368,"Ví dụ như trong hình 3.1.7.c cổng Serial 0/0 được kết"],[6369,"568 nối với đầu cáp V.35 DTE"],[6370,"Tuỳ theo các phiên bản router khác nhau mà cấu trúc câu lệnh này có khác nhau Ví dụ khi chúng ta cần xem thông tin về cổng Serial trên router Cisco 7000 thì dùng lệnh show controllers cbus Nếu trong kết quả hiển thị của câu lện này cho thấy cổng giao tiếp là UNKNOWN thay vì là V.35, EIA/TIA \u2013 449 hay một chuẩn cụ thể nào khác, thì sự cố có thể là do kết nối cáp không đúng, Khi đó kết quả hiển thị của lệnh show interfaces serial (X) sẽ cho thấy interface is down, line protocol is down"],[6371,"3.2 Quá trình xác minh trong PPP 3.2.1"],[6372,"Cấu trúc phân lớp của PPP PPP sử dụng cấu trúc phân lớp"],[6373,"Cấu trúc phân lớp là mô hình giao tiếp logic giữa các lớp"],[6374,"Mô hình OSI là một ví dụ về mô hình phân lớp trong mạng"],[6375,"PPP cung cấp cách đóng gói phù hợp cho nhiều gói dữ liệu của nhiều giao thức khác nhau để truyền trên một đường truyền điểm-nối-điểm, đồng thời PPP sử dụng lớp liên kết dữ liệu để kiểm tra kết nối"],[6376,"Do đó PPP được chia thành hai giao thức con:"],[6377,"569 \u2022 Giao thức điều khiển đường truyền LCP (Link Control Protocol): được sử dụng để thiết lập kết nối điểm - nối - điểm \u2022 Giao thức điều khiển lớp mạng NCP (Network Control Protocol): được sử dụng để cấu hình cho nhiều giao thức lớp Mạng khác nhau PPP có thể được cấu hình trên nhiều loại cổng vật lý như sau: \u2022 Cổng truyền nối tiếp bất đồng bộ (Asynchronous serial) \u2022 Cổng truyền nối tiếp đồng bộ (Synchronous serial) \u2022 High \u2013 Speed Serial Interface (HSSI)"],[6378,"\u2022 Integrated Services Digital Network (ISDN) LCP nằm ngay trên lớp Vật lý, được sử dụng để thiết lập, cấu hình và kiểm tra kết nối theo những yêu cầu sau Thực hiện xác minh: Yêu cầu nay đòi bên thiết lập kết nối phải cung cấp thông tin cho biết có được phép của người quản trị mạng để thiết lập kết nối hay không"],[6379,"Hai router ở hai đầu kết nối sẽ thực hiện quá trình xác minh bằng PAP hoặc Chap \u2022 Nén: Thực hiện yêu cầu nén frame khi truyền kết nối PPP sẽ giúp tăng thông lượng của đường truyền, giảm lượng dữ liệu phải truyền trên đường dây"],[6380,"Tại đầu nhận frame dữ liệu sẽ được giải nén"],[6381,"Router Cisco có hỗ trợ hai giao thức nén là Stacker và Predictor \u2022 Phát hiện lỗi: Cơ chế phát hiện lỗi của PPP thực hiện quá trình kiểm tra điều kiện đường truyền"],[6382,"Chỉ số Quality Magic giúp xác định vòng lặp và độ tin cậy của đường truyền"],[6383,"\u2022 Ghép kênh (Multilink PPP):Cisco IOS phiên bản 11.1 trở đi cho phép thực hiện ghép kênh PPP trên cổng của router để thực hienẹ chia sẻ tải \u2022 PPP Callback: Để gia tăng khả năng bảo mật, Cisco IOS phiên bản 11.1 trở đi đã cho phép thực hiện chức năng gọi lại trên kết nối PPP"],[6384,"Cisco router đóng vai trò là callback client hoặc callback server"],[6385,"Callback client thiết lập"],[6386,"570 một cuộc gọi yêu cầu callback server gọi lại cho nó rồi kết thúc ngay cuộc gọi này"],[6387,"Sau đó callback server thực hiện gọị lại cho client dựa trên cấu hình của nó"],[6388,"LCP còn thực hiện những việc sau: \u2022 Kiểm soat các giới hạn khác nhau về kích thước gói dữ lieu \u2022 Phát hiện lỗi cấu hình \u2022 Kết thúc đường truyền \u2022 Kiểm tra xem đường truyền hoạt động tốt hay bị hư hỏng PPP cho phép nhiều giao thức lớp mạng khác nhau hoạt động trên cùng một đường truyền"],[6389,"Đối với mỗi giao thức lớp Mạng được sử dụng, PPP cung cấp một NCP riêng biệt"],[6390,"Ví dụ : IPCP (IP Control Protocol) sử dụng cho giao thức IP, IPXCP (Novell IPX control Protocol) sử dụng cho IPX"],[6391,"NCP có mã số chuẩn cho biết giao thức lớp mạng nào đang được đóng gói trong frame PPP Sau đây là các phần trong frame PPP \u2022 Cờ: Cho biết bắt đầu kết thúc một frame, phần này bao gồm chuỗi nhị phân 0111110 \u2022 Địa chỉ: Chứa địa chỉ quảng bá 11111111"],[6392,"PPP không ấn định địa chỉ riêng cho trạm đích vì kết nối PPP là kết nối điểm-nối-điểm \u2022 Điều khiển : Chiều gài 1 byte có giá trị là 00000011,thực hiện dịch vụ truyền thông kết nối, tương tự như LLC (Logical Link Control) loại 1, truyền dữ liệu không theo thứ tự frame \u2022 Giao thức:Chiều gài 2 bte cho biết giao thức lớp trên nào có dữ liệu được đóng gói trong frame \u2022 Dữ liệu: Có chiều dài >= 0 byte, chứa toàn bộ dữ liệu của lớp trên"],[6393,"Kết thúc phần dữ liệu là cờ kết thúc và tiếp theo sau là 2 byte của phần FCS"],[6394,"Chiều dài tối đa mặc định của phần dữ liệu là 1500 byte \u2022 FCS: Thường dài 2 byte được sử dụng để kiểm tra lỗi frame 3.2.2"],[6395,"Thiết lập một phiên kết nối PPP"],[6396,"571 Một phiên kết nối PPP được thiết lấp sau 3 giai đoạn: giai đoạn thiết lập kết nối, giai đoạn xác minh và giai đoạn cấu hình giao thức lớp Mạng"],[6397,"Frame LCP được sử dụng để thực hiện các công việc trong mỗi giai đoạn"],[6398,"Sau đây là các loại frame LCP được sử dụng trong phiên kết nối PPP \u2022 Frame thiết lập kết nối: được sử dụng để thiết lập và cấu hình kết nối \u2022 Frame kết thúc kết nối : được sử dụng để kết thúc kết nối \u2022 Frame duy trì kết nối được sử dụng để quản lý và điều chỉnh đường truyền Sau đây là 3 giai đoạn thiết lập một phiên kết nối PPP: \u2022 Giai đoạn thiết lập kết nối;Trong giai đoạn này mỗi thiết bị PPP gửi đi frame LCP để cấu hình và kiểm tra kết nối.Trong frame LCP có chứa các thông tin để các thiết bị có thể thoả thuận và thực hiện các cấu hình cho đường truyền, ví dụ: đơn vị truyền tối đa (MTU \u2013 Maximum transmission unit), nén dữ liệu và giao thức xác minh"],[6399,"Nếu không có thông tin gì nằm trong gói LCP thì đường truyền sẽ được thiết lập theo các thông số mặc định"],[6400,"Đường truyền phải được mở lên và cấu ình xong trước khi có thể truyền các gói dữ liệu lớp Mạng"],[6401,"Quá trình này dược kết thúc khi thông tin xác nhận cấu hình được gửi và nhận xong"],[6402,"\u2022 Giai đoạn xác minh:(Giai đoạn này không bắt buộc phải có ) Sauk hi đường truyền đã được thiết lập và giao thức xác minh đã được chọn xong, thiết bị ở hai đầu kết nối thực hiện xác mnh với nhau"],[6403,"Quá trình xác minh được thực hiện trước khi chuyển sang giai đoạn cấu hình giao thức lớp Mạng"],[6404,"Trong giai đoạn này LCP cũng thực hiện kiểm tra chất lượng đường truyền"],[6405,"\u2022 Giai đoạn câu hình giao thức lớp mang Trong giai đoạn này các thiết bị PPP gửi gói NCP để chọn lựa và cấu hình cho một hay nhiều giao thức lớp Mạng, ví dụ như giao thức IP"],[6406,"Khi mỗi giao thức lớp Mạng được cấu hình xong thì gói dữ liệu của giao thức đó có thể được truyền đi trên đường truyền"],[6407,"Kết quả của lệnh show interfaces sẽ cho biết trạng thái của LCP và NCP trong cấu hình PPP Một kết nối PPP sẽ được duy trì cho đến khi: Frame LCP hay LCP đóng đường truyền \u2022 Thời gian chờ đã hết hạn \u2022 Sự can thiệp của người sử dụng 3.2.3 Giao thức xác minh PPP"],[6408,"572 Giai đoạn xác minh của một phiên kết nối PPP là không bắt buộc"],[6409,"Sauk hi đường truyền đã được thiết lập và giao thức xác minh đã được chọn thì hai thiết bị ở hai đầu kết nối thực hiện xác minh với nhau"],[6410,"Quá trình xác minh được thực hiện trước khi giai đoạn cấu hình giao thức lớp Mạng bắt đầu"],[6411,"Khi thực hiện xác minh, bên thiết lập kết nối được yêu cầu cung cấp các thông tin để xác minh quyền thiết lập kết nối"],[6412,"Hai router ở hai đầu kêt nối sẽ trao đổi với nhau các thông điệp xác minh Khi cấu hình quá trình xác minh PPP, người quản trị mạng có thể chọn giao thức PAP (Password Authentication Protocol) hay CHAP (Challenge Handshake Authentication Protocol)"],[6413,"Nói chung Chap là giao thức thường được đề nghị hơn 3.2.4 PAP (Password Authentication Protocol) PAP cung cấp một cơ chế xác minh đơn giản sử dụng quá trình bắt tay 2 bước"],[6414,"Sauk hi giai đoạn thiết lập kết nối PPP hoàn tất, cặp username/password được router ở đầu xa gửi đi nhiêu lần trên đường truyền cho đến khi đã được xác nhận hoặc kết nối bị xóa"],[6415,"PAP không phải là một giao thức xác minh manh"],[6416,"Password được gửi đi nguyên mẫu trên đường truyền"],[6417,"Do đó không có gì khó khăn đối với các loại tấn công Playback hoặc repeated trial-and-error"],[6418,"Router đầu xa chỉ được kiểm tra một lần khi truy nhập 3.2.5 CHAP (Challenge Handshake Authentication Protocol) Chap được sử dụng khi khởi động đường truyền và sau đó kiểm tra router đầu xa theo định kỳ với quá trình bắt tay 3 bước"],[6419,"CHAP được thực hiện ở lúc bắt đầu thiết lập kết nối và luôn được lặp lai trong suốt quá trình kết nối được duy trì"],[6420,""],[6421,"573 Sau khi giai đoạn thiết lập kết nối PPP hoàn tất, router trung tâm gửi một thông điệp \u201cthử thách\u201d cho router đầu xa"],[6422,"Router đầu xa sử dụng thông điẹp này với password của nó thông qua thuật toán MD5 (Message Digest ) tạo ra một thông điệp trả lời"],[6423,"Router đầu xa gửi thông điệp trả lời này cho router trung tâm"],[6424,"Router trung tâm sử dụng thông điệp trả lời để tính toan ra một giá trị"],[6425,"Nếu giá trị này đúng với thông điệp \u201cthử thách\u201d ban đầu thì thông tin xác minh được xác nhận nếu khong thì kết nối sẽ bị xoá ngay Chap chống được kiểu tấn công Playback vì giá trị của thông điệp \u201cthử thách\u201d là ngẫu nhiên hoàn toàn khác nhau giữa mỗi lần gửi và không thể đoán được"],[6426,"Do đó giá trị của thông điệp trả lời cũng ngẫu nhiên và riêng biệt"],[6427,"Việc xác minh được thực hiện lặp đi lặp lại để giời hạn thời gian tìm ra mật mã của các đợt tấn công đơn lẻ 3.2.6 Quá trình thực hiện xác minh PPP Sauk hi nhập lệnh encapsulation ppp thi bạn có thể thêm cấu hình cho quá trình xác minh PAP hoặc Chap"],[6428,"Nếu không cấu hình quá trình xác minh thì phiên kết nối PPP được bắt đầu ngay"],[6429,"Nếu bạn có cấu hình cho quá trình xác minh thì sẽ diễn ra như sau: \u2022 Xác định giao thức xác minh \u2022 Kiểm tra cơ sở dữ liệu để tìm cặp username/password tương ứng"],[6430,"574 \u2022 Nếu tín hiệu trả lời từ cơ sở dữ liệu là đúng thì phiên kết nối PPP được bắt đầu nếu không thì sẽ bị xoá ngay"],[6431,"575 3.3 Cấu hình PPP 3.3.1 Giới thiệu cấu hình PPP Cấu hình PPP bao gồm các thông tin về : phương pháp xác minh, nén dữ liệu phát hiện lỗi có ghép kênh hay không Các thành phần cấu hinh PPP Chức năng Giao thức Lệnh cấu hình"],[6432,"576 Quá trình xác minh Quá trình xác minh yêu cầu bên thiết lập kết nối cung cấp thông tin để xác minh quyền thực hiện kết nối"],[6433,"Hai router ở hai bên đầu kết nối trao đổi thông điệp xác minh"],[6434,"Có hai giao thức thực hiện xác minh là PAP và CHAP PAP CHAP Ppp Authentication Pap Ppp Authentication Chap Nén dữ liệu Nén dữ liệu giúp tăng thông lượng đường truyền PPP bằng cách giảm lượng dữ liệu được truyền đi trên đường truyền"],[6435,"Frame sẽ được giải nén ở đầu nhận"],[6436,"Hai giao thức nén dữ liệu chạy trên router Cisco là Stacker và Preditor Stacker Predictor Compress stac Compress Predictor Phát hiện lỗi Cơ chế phát hiện lỗi của PPP thực hiện quá trình kiểm tra điều kiện đường truyền"],[6437,"Chỉ số Quality Magic giúp xác định vòng lặp và độ tin cập của đường truyền Multilink Phiên bản Cisco IOS 11.1 trở đi có hỗ trợ giao thức ghép kênh MP (Multilink protocol) Giao thức này cho phép chia sẻ tải trên các cổng của router đang sử dụng PPP"],[6438,"MP cắt gói dữ liệu thành nhiều phân đoạn có đánh số thứ tự và truyền trên các kênh song song"],[6439,"Các kênh PPP này hoạt MP Ppp multilink"],[6440,"577 động như một kênh logic, giúp tăng thông lượng và giảm thời gian trễ giữa hai router 3.3.2 Cấu hình PPP Sau đây là ví dụ cho cấu hình đóng gói PPP trên cổng Serial (pp) \u2022 Router # configure terminal \u2022 Router (config) # interface serial 0/0 \u2022 Router (config \u2013if)#encapsulation ppp Chúng ta cũng có thể cấu hình phần mềm nén dữ liệu trên cổng Serial đang sử dụng đóng gói PPP"],[6441,"Nén dữ liệu được thực hiện bằng phần mềm"],[6442,"Chúng ta không nên sử dụng nén dữ liệu lần nữa khi bản than phần lớn dữ liệu được truyền đi trên cổng này đã được nén rồi"],[6443,"\u2022 Router (config)#interface serial 0/0 \u2022 Router (config \u2013 if )#encapsulation ppp \u2022 Router (config \u2013 if)# compress (predictor stac) Chúng ta nhập lệnh sau để có thể theo dõi mức đọ rớt gói dữ liệu trên đường truyền và tránh bị vòng lặp: \u2022 Router (config)#interface serial 0/0 \u2022 Router (config \u2013 if )#encapsulation ppp \u2022 Router (config \u2013 if )#ppp quality p ercentage Ch úng ta s ử d ụng c ác l ệnh sau đ ể cho ph ép th ực hi ện chia t ải tr ên nhi ều đ ư ờng k ết n ối: \u2022 Router (config)#interface serial 0/0 \u2022 Router (config \u2013 if )#encapsulation pp \u2022 Rot er (c onfig \u2013 if) # ppp multilink 3.3.3 Cấu hình quá trình xác minh PPP Bước Mô tả Bước 1 Trên mỗi router khai báo username và password của router kết nối vào nó"],[6444,"578 Router (config)# username name password secret Name là tên của router kết nối vào router đang cấu hình Bước 2 Vào chế độ câú hình của cổng tương ứng Bước 3 Cấu hình đóng gói PPP cho cổng: Router (config \u2013 if) # encapsulation ppp Bước 4 Cấu hình quá trình xác minh PPP Bước 5 Nếu bạn khai báo cả CHAP và PAP thì tên nào được đặt trước sẽ được sử dụng trước"],[6445,"Nếu router đầu bên kia yêu cầu sử dụng phương thức thứ hai hoặc đơn giản là từ chối phương thức thứ nhất thì phương thức thứ hai sẽ được áp dụng"],[6446,"Bước 6 Bắt đầu từ phiên bản Cisso IOS 11.1 trở đi bạn phải khởi động PAP trên cổng cần thiết mặc định là PAP không chạy trên router Hình 3.3..3.a là tóm tắt quá trình cấu hình PAP trên hai router kết nối với nhau"],[6447,"Cặp username/password trên mỗi router phải phù hợp với hostname và password được khai báo trên router kia"],[6448,""],[6449,"579 PAP là phương thức xác minh đơn giản sử dụng hai bước bắt tay và được thực hiện khi thiết lập kết nối"],[6450,"Quá trình xác minh PAP thực hiện và đường truyền được thiết lập CHAP thực hiện kiểm tra router kết nối ở đầu xa sử dụng ba bước bắt tay và được lặp lại theo định kì"],[6451,"Quá trình này được thực hiện xong lần đầu tiên"],[6452,"Đường truyền được thiết lập và luôn được lặp lại trong suốt quá trình kết nối"],[6453,"580 3.3.4 Kiểm tra cấu hình PPP trên cổng Serial Chúng ta sử dụng lệnh show interfaces serial để kiểm tra cấu hình đóng gói HDLC hoặc PPP trên cổng Serial"],[6454,"Nếu cổng được cấu hinh đóng gói HDLC thì trong kết quả hiển thị có dòng \u201cEncapsulation HDLC\u201d"],[6455,"Ví dụ như trên hình 3.3.4 chúng ta thấy dòng \u201cEncapsulation PPP\u201d như vậy là cổng serial 0/0 đã được cấu hình đóng gói PPP"],[6456,"Sauk hi đã cấu hình PPP, chúng ta có thể kiểm tra trạng thái của LCP (Link Control Protocol ) và NCP (Network Control Protocol) cũng bằng lệnh Show interfaces serial"],[6457,"581 3.3.5 Xử lý sự cố trên cổng Serial lệnh debug ppp authentication hiển thị các hoạt động xảy ra của qúa trình xác minh"],[6458,"Ví dụ như trên hình 3.3..5.a là kết quả cho thấy quá trình hoạt động của CHAP trên router Left Router Left và router Right được cấu hình thực hiện xác minh hai chiều, do đó hai router này thực hiện xác minh lẫn nhau"],[6459,"582 Hìn 3.3.5"],[6460,"Kết quả hiển thị của lệnh debug ppp authentication trên router Left"],[6461,"Kết quả hiển thị Giải thích Se0/0 PPP: Phase is AUTHENTICATION by both Xác minh hai chiều Se0/0 PAP: O AUTH-REQ id 4 \u2018len 18 from \u201cleft\u201d Yêu cầu xác minh được gửi ra cổng Serial 0/0"],[6462,"Se0/0 PAP: I AUTH-REQ id 1 \u2018len 18 from \u201cleft\u201d Yêu cầu xác minh nhận được từ cổng Serial 0/0"],[6463,"Se0/0 PAP: Authentication peer right Nhận được thông điệp trả lời của yêu cầu xác minh"],[6464,"Se0/0 PAP: O AUTH-ACK id 1 len 5 Gửi thông điệp xác nhận Se0/0 PAP: I AUTH-ACK id 4 len 5 Nhận được thông điệp xác nhận Bảng 3.3.5"],[6465,"Giải thích kết quả hiển thị của lệnh debig ppp authentiacation"],[6466,"583 Lệnh debug ppp được sử dụng để hiển thị các hoạt động của PPP"],[6467,"Chúng ta có thể dungdạng no của câu lệnh này để kết thúc quá trình hiển thị của lệnh Tổng kết Sau đây là những điểm quan trọng trong chương này mà các bạn cần nắm được: \u2022 Ghép kênh theo thời gian \u2022 Điểm ranh giới trong mạng WAN \u2022 Định nghĩa chức năng của DTE và DCE \u2022 Quá trình phát triển của giao thức đóng gói HDLC \u2022 Sử dụng lệnh encapsulation hdlc để cấu hình HDLC \u2022 Sử dụng lệnh show interface và show controllers khi xác định sự cố trên cổng serial \u2022 Ưu điểm của giao thức PPP \u2022 Chức năng của LCP và NCP trong PPP \u2022 Cấu trúc frame PPP \u2022 Ba giai đoạn thiết lập một phiên kết nối PPP \u2022 Sự khác nhau giữa PAP và CHAP \u2022 Cấu hình PPP \u2022 Cấu hình PAP và Chap \u2022 Sử dụng lệnh show interface serial để kiểm tra cấu ình đóng gói trên cổng serial \u2022 Sử dụng lệnh debug ppp để xác định sự cố ppp"],[6468,"584 CHƯƠNG 4: ISDN và DDR GIỚI THIỆU ISDN là mạng cung cấp kết nối toàn số từ đầu đến cuối để thực hiện dịch vụ truyền thoại và số liệu ISDN cho phép nhiều kênh kỹ thuật số cùng hoạt động đồng thời trên một đường cáp điện thoại thông thường, nhưng ISDN truyền tín hiệu số chứ không truyền tín hiệu tương tự"],[6469,"Thời gian trễ trên đương ISDN cũng thấp hơn so với đường truyền tín hiệu tương tự Khi chúng a không có nhu cầu cần một đường truyền thường trực thì nên sử dụng DDR để tiết kiệm chi phi"],[6470,"DDR định nghĩa một tiến trình cho router thực hiện kết nối với mạng quay số khi có dữ liệu cầu truyền đi và ngắt kết nối khi việc truyền dữ liệu đã hoàn tất Sau khi kết thúc chương này các bạn có thể thực hiện những việc sau: \u2022 Định nghĩa các chuẩn ISDN về địa chỉ, tín hiệu \u2022 Mô tả ISDN sử dụng lớp Vật lys và lớp Liên kết dữ liệu như thế nào \u2022 Liệt kê các điểm kết nối và các giao tiếp được sử dụng trong ISDN \u2022 Cấu hình cổng trên router để sử dụng ISDN \u2022 Xác định các lưu lượng được phép truyền đi khi cấu hình DDR \u2022 Cấu hình định tuyến cố định cho DDR \u2022 Xác định và áp dụng danh sách kiểm tra truy cập ACL, cho các lưu lượng DDR \u2022 Cấu hình cổng quay số 4.1 Các định nghĩa của ISDN 4.1.1 Giới thiệu ISDN Có rất nhiều công nghệ WAN cung cấp đường truy cập mạng từ xa"],[6471,"Một trong những công nghệ đó là ISDN"],[6472,"Những người sử dụng riêng lẻ hay những văn phòng nhỏ chỉ có đường điện thoại truyền thông băng thông thấp"],[6473,"ISDN là giải pháp dành cho những đối tượng này"],[6474,"585 Đường điện thoại truyền thông PSTN truyền tín hiệu tương tự trên mạch vòng nội bộ kết nối giữa thuê bao và mạng của công ty điện thoại"],[6475,"Mạch tín hiệu tương tự có giới hạn băng thông không được lớn hơn 3000Hz"],[6476,"Công nghệ ISDN cho phép truyền tín hiệu số trên mạch vòng nội bộ này tốc độ truy cập cao hơn"],[6477,"Các côngty điện thoại chỉ cần nâng cấp các bộ chuyển mạch để có thể xử lý được tín hiệu số"],[6478,"ISDN thường được các văn phòng nhỏ ở xa sử dụng để kết nối vào mạng LAN ở trung tâm Các công ty điện thoại cũng đã phát triển các chuẩn cho ISDN"],[6479,"Các chuẩn ISDN định nghĩa về thiết bị phần cứng và quá trình thiết lập cuộc gọi"],[6480,"Những chuẩn này giúp cho mạng ISDN giao tiếp dễ dàng với các mạng khác trên toàn cầu"],[6481,"Trong mạng ISDN việc số hoá tín hiệu được thực hiện ngay bên phía thuê bao thay vì được thực hiện bên phía nhà cung cấp dịch vụ như trước đây Sau đây là một số ưu điểm của ISDN:"],[6482,"586 \u2022 Truyền nhiều loại lưu lượng khác nhau bao gồm dữ liệu thoại và và video \u2022 Tốc độ thiết lập cuộc gọi nhanh hơn modem \u2022 Kênh B cung cấp tốc độ truyền dữ liệu nhanh hơn modem \u2022 Kênh B phù hợp với kết nối PPP ISDN là một dịch vụ linh hoạt có thể truyền dữ liệu thoại và video cho phép truyền nhiều loại lưu lượng trên nhiều kênh khác nhau trên cùng một kết nối ISDN sử dụng một kênh riêng được gọi là kênh D để truyền tín hiệu điều khiển"],[6483,"Khi cần thiết lập cuộc gọi thuê bao nhấn số cần gọi"],[6484,"Khi tất cả các chữ số đã được nhận đầy đủ thì cuộc gọi được thực hiện"],[6485,"ISDN truyền các số này trên kênh D do đó thời gian thiết lập cuộc gọi nhanh hơn Mỗi kênh B có thể kết nối đến một điểm khác nhau trong mạng ISDN"],[6486,"PPP có thể hoạt động cả trên kết nối đồng bộ và bất đồng bộ do đó đường truyền ISDN có thể sử dụng kết hợp với đóng gói PPP 4.1.2 Các chuẩn ISDN và phương pháp truy cập Công việc chuẩn hoá ISDN được bắt đầu từ cuối thập niên 60"],[6487,"Các bộ chuẩn đề nghị của ISDN được xuất bản năm 1994 và sau đó liên tục được cập nhật bởi ITU- T"],[6488,"Các chuẩn ISDN là một tập hợp các giao thức về điện thoại kỹ thuật số và truyền số liệu"],[6489,"Các giao thức ISDN được phân theo các chủ đề chính sau: \u2022 Bộ giao thức E- các chuẩn về mạng điện thoại cho ISDN"],[6490,"Ví dụ: E:164 là giao thức mô tả địa chỉ quốc tế cho ISDN \u2022 Bộ giao thức I- Liên quan đến các khái niệm thuật ngữ ví dụ I.100 bao gồm các khái niệm chung của ISDN và cấu trúc các giao thức I khác I:200 đề cập đến mặt dịch vụ của ISDN \u2022 Bộ giao thức Q - Đề cập đến hoạt động tín hiệu và chuyển mạch"],[6491,"Hoạt động tín hiệu ở đây có nghĩa là quá trình thiết lập cuộc gọi ISDN Chuẩn ISDN định nghĩa hai loại kênh chính, mỗi loại có tốc độ truyền khác nhau Kênh B, 64Kb/giây, được sử dụng để truyền mọi dữ liệu số với chế độ truyền song công"],[6492,"Loại kênh thứ hai được gọi là kênh D Khi thiết lập một kết nối TCP 2 bên trao đổi các thông tin điều khiển để thiết lập kết nối"],[6493,"Các thông tin điều khiển này truyền trên kênh truyền mà sau đó cũng được sử dụng để truyền dữ liệu"],[6494,"Thông tin điều khiển và dữ liệu chia sẻ cùng một kênh truyền"],[6495,"Dạng truyền như vậy được gọi là in-band signaling"],[6496,"ISDN thì không thực"],[6497,"587 hiện truyền như vậy, mà sử dụng một kênh riêng chính là kênh D, để truyền tín hiệu điều khiển"],[6498,"Dạng truyền như vậy gọi là out \u2013 of \u2013 band signaling ISDN định nghĩa hai phương pháp truy cập chuẩn là BRI và PRI"],[6499,"Một cổng BRI hay PRI cung cấp một kênh D và nhiều kênh B BRI sử dụng hai kênh B 64kb/giây và một kênh D 16kb/giây"],[6500,"BRI hoạt động được trên nhiều Cisco router và đôi khi được ký hiệu là 2B+D Kênh B có thể được sử dụng để truyền thoại"],[6501,"Khi đó tín hiệu thoại được mã hoá theo cách đặc biệt"],[6502,"Khi kênh B được sử dụng để truyền số liệu thì thông tin được đóng thành frame, sử dụng giao thức đóng gói HDLC hoặc PPP ở lớp 2"],[6503,"PPP phức tạp hơn HDLC vì nó cung cáp cơ chế xác minh, thoả thuận cấu hình kết nối và giao thức phù hợp ISDN được xem là một kết nối chuyển mạch .Kênh D mang các thông điệp điều khiển để thiết lập cuộc gọi ngắt cuộc gọi và điều khiển cuộc gọi cho kênh B"],[6504,"Lưu lượng trên kênh D sử dụng giao thức LAPD"],[6505,"LAPD là một giao thức lớn liên kết dữ liệu dựa trên cơ sở của HDLC"],[6506,"Ở Bắc mỹ và Nhật, PRI cung cấp 23 kênh B 64kb/giây và một kênh D 64kb/giây"],[6507,"Một PRI này cung cấp dịch vụ tương đương với một kết nối T hay DSL"],[6508,"Ở Châu âu và phần còn lại trên thế giới , PRI cung cấp 30 kênh B và một kênh D, tương đương với một kết nối E1"],[6509,"PRI sử dụng CSU/DSU cho kết nối T1/E1"],[6510,"588 4.1.3 Mô hình 3 lớp ISDN và các giao thức tương ứng ISDN hoạt đọng theo các chuẩn ITU-T tương úng với lớp Vât lý lớp liên kết dữ liệu và lớp Mạng trong mô hình OSI \u2022 Chuẩn lớp Vật ly của ISDN BRI và PRI được định nghĩa trong ITU \u2013T I.430 và I..431 \u2022 Chuẩn lớp liên kế dữ liệu của ISDN dựa trên cơ sở LAPD và được định nghĩa trong: - ITU-T Q.920 - ITU-T Q.921 - ITU-T Q.922 - ITU-T Q.923 \u2022 Chu ẩn l ớp M ạng của ISDN được định nghĩa trong ITU-T Q.930 hay I.450 và ITU-T Q.931 hay I.451"],[6511,"Các chuẩn này quy ước về kết nối từ user đến user chuyển mạch và chuyển mạch gói"],[6512,"Dịch vụ BRI được thực hiện trên cáp điện thoại truyền thông"],[6513,"Mặc dù chỉ có một đường truyền vật lý cho một BRI nhưng bên trong là ba kênh truyền thông tin khác nhau 2B+D Định dạng frame ở lớp Vật lý ISDN khác nhau tuỳ theo frame đi vào hay frame đi ra"],[6514,"Nếu là frame đi ra có nghĩa là frame được truyền từ thiết bị đầu cuối đến mạng ISDN thì sử dụng định dạng frame TE"],[6515,"Nếu là frame đi vào có nghĩa là frame được truyền từ mạng ISDN đến thiết bị đầu cuối thì sử dụng định dạng frame NT"],[6516,"589 Hình 4.1.3.b Mỗi frame ISDN BRI chứa hai frame con trong đó mỗi frame con có: \u2022 8 bit của kênh B1 \u2022 8 bit của kênh B2 \u2022 2 bit của kênh D \u2022 6 bit chèn thêm Do đó mỗi frame ISDN BRI có 48 bit , 4000 frame được truyền đi mỗi giây"],[6517,"Mỗi kênh B có dung lượng là 8*4000*2=64kb/giây trong khi đó kênh D có dung lượng là 2*4000*2=16kb/giây"],[6518,"Dung lượng tổng cộng (B1+b2+D) là 144kb/giây, trên một cổng vật lý ISDN có dung lượng là 192kb/giây"],[6519,"Phần dung lượng chênh lệch còn lại là của các bit chèn thêm:6*4000*2=48kb/giây Các bit chèn thêm trong mỗi frame con ISDN có chức năng như sau \u2022 Framing bit - thực hiện chức năng đồng bộ \u2022 Load balancing bit \u2013 điêu chỉnh giá trị bit trung bình \u2022 Echo of previous D channel bit- giúp phân biệt tín hiệu của từng thiết bị khi có nhiều thiết bị đầu cuối kết nối vào một đường truyền \u2022 Activation bit- kích hoạt thiết bị \u2022 Spare bit- bit để dành, chưa có chức năng nào được gắn cho bit này Chúng ta cần lưu ý rằng: tốc độ vật lý của , cổng BRI là 48*4000=192kb/giây, tốc độ truyền dữ liệu là 144kb/giây=64kb/giây+64kb/giây+16kb/giây(2B+D)"],[6520,"590 Giao thức lớp 2 của kênh tín hiệu ISDN là LAPD"],[6521,"LAPD tương ứng như HDLC"],[6522,"LAPD được sử dụng trên kênh D để đảm bảo cho việc truyền và nhận tín hiệu điều khiển Phần Cờ và phần điều khiển của LAPD tương ứng như HDLC, phần địa chỉ của LAPD dài 2 byte"],[6523,"Trong đó byte đầu tiên chứa chỉ số xác định điểm truy cập dịch vụ, là chỉ số port giao tiếp giữa dịch vụ LAPD và Lớp 3"],[6524,"Bit yêu cầu/ đáp ứng (C/R) cho biết frame này là frame yêu cầu hay frame đáp ứng"],[6525,"Byte thứ 2 chứa chỉ số xác định điểm cuối (TEI)"],[6526,"Mỗi thiết bị đầu cuối của khách hang cần phải có một chỉ số riêng biệt"],[6527,"Chỉ số TEI này có thể được cấu hình cố định khi cài đặt hoặc được switch cung cấp động mỗi khi thiết bị này khởi động"],[6528,"Nếu TEI được cấu hình cố định khi cài đặt thì chỉ số này nằm trong khoảng từ o đến 63"],[6529,"Chỉ số TEI cấp động nằm trong khoảng từ 64 đến 126"],[6530,"Chỉ số TEI 127 là địa chỉ quảng bá 4.1.4 Các hoạt động trong ISDN Có nhiều hoạt động trao đổi thông tin diễn ra khi một router sử dụng ISDN để kết nối đến router khác"],[6531,"Kênh D được sử dụng để thiết lập kết nối giữa router và ISDN switch"],[6532,"Tín hiệu SS7 được sử dụng giữa các switch trong mạng của nhà cung cấp dịch vụ Kênh D giữa router và ISDN switch luôn luôn trong trạng thái hoạt động"],[6533,"Q.921 mô tả tiến trình hoạt động của LAPD ở lớp 2 của mô hình OSI"],[6534,"Kênh D được sử dụng để truyền tín hiệu khiển như thiết lập cuộc gọi kết thúc cuộc gọi điều khiển"],[6535,"591 cuộc gọi"],[6536,"Những chức năng này định nghĩa trong giao thức Q.931 ở lớp 3 của mô hình OSI.Q.931 định nghĩa kết nối mạng giữa thiết bị đầu cuối và ISDN switch nhung không định nghĩa kết nối đầu cuối -đến-đầu cuối"],[6537,"Có nhiều ISDN switch đã được phát triển trước khi Q.931 được chuẩn hoá, do đó có nhiều nhà cungcấp dịch vụ ISDN và nhiều loại ISDN switch triển khai Q.931 khác nhau"],[6538,"Cũng chính vì không có chuẩn chungcho loại ISDN switch nên trong cấu hình router phải có câu lệnh khai báo ISDN switch mà router kết nối đến"],[6539,"Hình 4.1.4.a Sau đây là thứ tự các bước diễn ra trong quá trình thiết lập một cuộc gọi BRI hoặc PRI 1"],[6540,"Kênh D gửi số cần gọi đến cho ISDN switch nội bộ 2"],[6541,"Switch nội bộ sử dụng giao thức tín hiệu SS7 để thiết lập đường truyền và chuyển số cần gọi cho ISDN switch đầu xa 3"],[6542,"ISDN switch đầu xa chuyển tín hệu đến cho máy đích trên kênh D 4"],[6543,"Thiết bị đích ISDN NT \u2013 1 gửi thông điệp kết nối cuộc gọi cho ISDN switch đầu xa 5"],[6544,"ISDN switch đầu xa sử dụng SS7 để gửi thông điệp kết nối cuộc gọi cho switch nội bộ 6"],[6545,"ISDN switch nội bộ thực hiện kết nối một kênh B, kênh B còn lại dành cho kết nối mới"],[6546,"Cả hai kênh B cũng có thể được sử dụng đồng thời"],[6547,""],[6548,"592 Hình 4.1.4b 4.1.5 Các điểm liên kết trong ISDN Chuẩn ISDN định nghĩa các nhóm chức năng là các nhóm thiết bị phần cứng cho phép user truy cập dịch PRI"],[6549,"Các hang sản xuất có thể tạo ra một thi bị phần cứng thực hiện một hoặc nhiều chức năng"],[6550,"Chuẩn ISDN cũng định nghĩa bốn điểm liên kết giữa các thiết bị ISDN"],[6551,"Mỗi thiết bị trong mạng ISDN thực hiện một nhiệm vụ để tạo nên một kết nối đầu cuối - đến - đầu cuối Để kết nối các thiết bị khác nhau với các chức năng khác nhau các điểm giao tiếp giữa hai thiết bị phải được chuẩn hoá"],[6552,"Các điểm giao tiếp bên phía khách hang trong kết nối ISDN bao gồm những điểm sau: \u2022 R \u2013 là điểm liên kết giữa thiết bị đầu cuối loại 2 (TE2 \u2013 Terminal Equipment (ty Pe 2) không tương thích với ISDN và thiết bị chuyển đổi TA (Terminal Adapter) \u2022 S \u2013 là điểm kết nối vào thiết bị chuyển mạch của khách hang NT2 (Network Termination 2) và cho phép thực hiện cuộc gọi giữa nhiều loại thiết bị khác nhau của khách hang \u2022 T - Tương tự như giao tiếp S về mặt tín hiệu điện"],[6553,"Đây là điểm kết nối từ NT2 vào mạng ISDN hay cho NT1 (Network Termination type 1) \u2022 U \u2013 là điểm kết nối giữa NT1 và mạng ISDN của nhà cung cấp dịch vụ Điểm giao tiếp S và T tương tự nhau về mặt tín hiệu điện nên có nhiều cổng giao tiếp dán nhã là S/T"],[6554,"Mặc dù hai giao tiếp này thực hiện chức năng khác nhau"],[6555,"593 nhưng do tương tự nhau về mặt tín hiệu điện nên có thể dùng chung cho cả hai chức năng"],[6556,"Thiết bị Loại thiết bị Chức năng của thiết bị TE1 Terminal Equipment 1 - Thiết bị đầu cuối loại 1 Thiết bị đầu cuối có cổng tương thích với ISDN, ví dụ như ISDN router, điện thoại ISDN TE2 Terminal Equipment 2 - Thiết bị đầu cuối loại 2 Thiết bị đầu cuối không có cổng tương thích với ISDN"],[6557,"Để kết nối loại thiết bị đầu cuối này vào mạng ISDN thì cần phải có thiết bị chuyển đổi TA TA Terminal Adapter - Thiếtbị chuyển đổi Chuyển đổi tín hiệu EIA/TIA \u2013 232, V.35 và các loại tín hiệu khác sang tín hiệu BRI NT2 Network Termination 2 - Thiết bị kết cuối mạng loại 2 Là điểm tập trung mọi đường dâyISDN phia khách hang và thực hiện chuyển mạch giữa các thiết bị đầu cuối bằng switch của khách hang NT1 Network Termination 1 - thiết bị kết cuối mạng loại 1 Điều khiển kết cuối về mặt vật lý và tín hiệu điện phía khách hang Chuyển đổi tín hiệu BRI dây sang tín hiệu 2 dây"],[6558,"594 4.1.6"],[6559,"Xác định cổng ISDN trên router Ở BẮC Mỹ, NT1 là thiết bị thuộc sở hữu của khách hang"],[6560,"Điều này có nghĩa là khách hang phải cung cấp thiết bị có tích hợp chức năng của NT1"],[6561,"Do đó ở Bắc Mỹ các router ISDN thường có cổng ISDN BRI U trong đó có tích hợ chức năng của NT1"],[6562,"Ở Châu Âu , nhà cung cấp dich vụ cung cấp thiết bị NT1 riêng"],[6563,"Do đó, phía khách hàng chỉ cần cung cấp thiết bị có thể kết nối vào NT1, ví dụ như router có cổng ISDN BRI S/T"],[6564,"Để chọn Cisco router có cổng ISDN phù hợp, các bạn cần đi theo các bước sau: 1"],[6565,"Xác định vị trí cổng ISDN BRI trên router"],[6566,"Chúng ta nhìn phía sau router để xách định vị trị cổng BRI hoặc vị trí để gắn BRI WAN Interface (WIC)"],[6567,"2"],[6568,"Xác định ai là người cung cấp NT1"],[6569,"NT1 là điểm kết nối của mạch vòng nội bộ đến tổng đài trung tâm của nhà cung cấp dich vụ"],[6570,"Ở Bắc Mỹ, NT1 thuộc phần sở hữu của khách hàng"],[6571,"Còn ở Châu Âu, nhà cung cấp dịch vụ sẽ cung cấp thiết bị NT1 riêng"],[6572,""],[6573,"595 3"],[6574,"Nếu NT1 thuộc phía khách hàng thì nên chọn router có cổng U"],[6575,"Nếu router có cổng S/T thì cần phải có NT1 bên ngoài để kết nối router vào mạng ISDN của nhà cung cấp dich vụ"],[6576,"Hình 4.1.6 Nếu router có cổng BRI thì có nghĩa là nó đã sẵn sàng để sử dụng ISDN Router như vậy chính là TE1 và có thể kết nối trực tiếp vào NT1"],[6577,"Nếu trên router đã có cổng U có nghĩa là đã tích hợp luôn NT1 bên trong Nếu router không có cổng BRI và thuộc loại cấu trúc cố định, không thể gắn thêm card bên ngoài vào thì chúng ta bắt buộc phải sử dụng cổng Serial"],[6578,"Khi đó chúng ta cần phải có thêm thiết bị đổi TA bên ngoài để có thể thực hiện kết nối BRI trên cổng Serial"],[6579,"Nếu router có khả năng gắn thêm card bên ngoài thì chúng ta có thể gắn thêm card BRI WIC cho router 4.1.7 Các loại ISDN switch Router cần phải có được khai báo loại switch mà nó giao tiếp"],[6580,"Có rất nhiều loại ISDN switch khác nhau tuỳ theo từng nơi"],[6581,"Do sự triển khai Q.931 khác nhau nên giao thức tín hiệu kênh D trên mỗi loại switch của mỗi hang cũng khác nhau Dịch vụ được cungcấp bởi các nhà cung cấp dịch vụ ISDN rất khác nhau theo từng quốc gia và từng vùng trên thế giới"],[6582,"Giống như modem mỗi loại switch hoạt động khác nhau và có yêu cầu thiết lập cuộc gọi khác nhau"],[6583,"Trước khi router có thể kết nối vào dịch vụ ISDN nó cần phải được khai báo loại switch đang được sử dụng ở tổng đài của nhà cung cấp dịch vụ"],[6584,"Thông tin này phải được khai báo khi cấu hình router sau đó router có thể giao tiếp với switch để thiết lập cuộc gọi và gửi dữ liệu"],[6585,"596 Hình 4.1.7 Ngoài việc xác định loại switch của nhà cungcấp dịch vụ, chúng ta còn phải biết số SPID là chỉ số được cung cấp bởi nhà cung cấp dịch vụ ISDN, được dùng để xác định cấu hình dịch vụ BRI cho mỗi kết nối.SPID cho phép thực hiện nhiều thiết bị ISDN cùng chia sẻ một kết nối"],[6586,"Switch DMS \u2013 100 và National ISD- 1 thường yêu cầu phải có số SPID SPID chỉ được sử dụng ở Bắc Mỹ và Nhật"],[6587,"Nhà cung cấp dịch vụ ISDN cung cấp số SPID để xác định cấu hình dịch vụ ISDN trên mỗi kết nố"],[6588,"Do đó trong nhiều trường hợp chúng ta cần phải nhập số SPID khi cấu hình router Mỗi số SPID tương ứng với một cấu hình cho một kết nối"],[6589,"Số SPID bao gồm nhiều ký tự thường hay giống như số điện thoại"],[6590,"Mỗi số SPID xác định một kênh B cho switch ở tổng đài trung tâm"],[6591,"Một khi đã được xác định, switch sẽ cung cấp dịch vụ cho kết nối"],[6592,"Các bạn nên nhớ ISDN là loại kết nối quay số"],[6593,"Số SPID được xử lý khi router thiết lập kết nối với ISDN switch"],[6594,"nếu loại switch này yêu cầu phải có số SPID mà số SPID lại không được khai báo đúng thì quá trình thiết lập kết nối sẽ không thực hiện được, dịch vụ ISDN cũng không sử dụng được 4.2 Cấu hình ISDN 4.2.1 Cấu hình ISDN BRI Lệnh ISDN switch type là câu lệnh khai báo loại ISDN switch mà router cần kết nối đến"],[6595,"Câu lệnh này có thể sử dụng ở chế độ cấu hình toàn cục hay ở chế độ cấu hình cổng BRI"],[6596,"Nếu khai báo câu lệnh này ở chế độ cấu hình toàn cục thì mọi cổng ISDN trên router đều sẽ có áp dụng loại ISDN switch được khai báo"],[6597,"Chúng ta cũng có thể khai báo loại ISDN switch riêng tương ứng cho từng cổng BRI"],[6598,"Sau"],[6599,"597 đây là ví dụ về câu lệnh khai báo loại switch National ISDN \u2013 1 ở chế độ cấu hình toàn cục: Sau khi lắp đặt dịch vụ ISDN xong, nhà cung cấp dịch vụ sẽ cho biết các thông tin về loại ISDN switch và số SPID"],[6600,"Mỗi số SPID định nghĩa một cấu hình dịch vụ tương ứng cho mỗi khác thuê báo"],[6601,"Tuy theo từng loại switch mà ta có thể cần hoặc không cần khai báo số SPID trong cấu hình router"],[6602,"Switch loại National ISDN \u2013 1 và DMS \u2013 100 đòi hỏi phải có số SPID nhưng switch AT&T 5ESS thì không cần số SPID Định dạng của số SPID cũng phụ thuộc vào loại ISDN switch và quy ước của nhà cung cấp dịch vụ"],[6603,"Chúng ta sử dụng lệnh ISDN Spidl và ISDN Spid trong chế độ cấu hình cổng BRI để khai báo số SPID Tham số ldn định nghĩa số danh bạ nội bộ"],[6604,"Thông số khai báo cho ldn phải đúng với thông số khai báo trên ISDN switch"],[6605,"Tham số này không bắt buộc phải khai báo Hình 4.2.1 4.2.2 Cấu ình ISDN PRI ISDN PRI chạy trên đường T1 hay E1"],[6606,"Sau đây là ba nhiệm vụ chính khi cấu hinh PRI"],[6607,"598 1"],[6608,"Xác định loại switch PRI mà router kết nối đến 2"],[6609,"Xác định T1/E1 controller, loại framing loại mã hoá trên đường truyền 3"],[6610,"Nhóm các timeslot PRI Router kết nối PRI thông qua T1/E1 do đó không có lệnh \u201cinterface pri\u201d"],[6611,"Cổng vật lý trên router thực hiện kết nối này được gọi là T1 controller hay E1 controller tuỳ theo chúng ta sử dụng T1 hay E1"],[6612,"Chúng ta phải cấu hình các controller này hoàn chỉnh thì router mới có thể giao tiếp được với mạng của nhà cungcấp dịch vụ"],[6613,"còn kênh B và D của ISDN được cấu hình riêng bên dưới controller bằng lệnh interface serial Tương tự như BRI chínta cũng dùng lệnh ISDN switch \u2013 type để khai báo loại ISDN switch mà router kết nối đến Router (config) # isdn switch-ttype primary- net5 Hình 4.2.2.a Sau đây là 4 bước cấu hình T1 hay E1 controller 1"],[6614,"Từ chế độ cấu hình toàn cục xác định controller và slot/port của card PRI 2"],[6615,"Cấu hình framing, line codin, cloking theo hướng dẫn của nhà cung cấp dịch vụ"],[6616,"Nếu bạn dùng T1 thì khai báo một trong các tham số sau Lệnh linecode xác định phương pháp mã hoá tín hiệu ở lớp Vật lý của nhà cung cấp dịch vụ Router (config \u2013 controller) # linecode (ami/b8zs/ hđb3) Ở Bắc Mỹ phương pháp mã hoá tín hiệu b8zs được sử dụng cho T1"],[6617,"Ở Châu âu thì sử dụng HDB3 1"],[6618,"Nhóm các timeslot vào một cổng PRI"],[6619,"599 Đối với T1 chúng ta sử dụng timeslot trong khoảng 1 -24"],[6620,"Còn đối với E1 thì chúng ta sử dụng các timeslot trong khoảng 1 \u2013 31 2.Cấu hình một cổng giao tiếp tương ứng cho kênh D PRI hoạt động Trong thiết bị E1 hay T1 số kênh được bắt đầu từ 1 và kết thúc ở 31 đối với E1 hay kết thúc 24 đối với T1"],[6621,"Trong khi đó số cổng Serial trên Cisco router lại bắt đầu từ 0"],[6622,"Do đó kênh 16 kênh truyền tín hiệu điều khiển của E1, sẽ tương ứng với cổng 15"],[6623,"Kênh 24 kênh truyền tín hiệu điều khiển của T1, sẽ tương ứng với cổng 23"],[6624,"Như vậy cổng Serial 0/0:23 tương ứng với kênh D của T1 PRI Các bạn không được nhằm lẫn giữa các kênh của T1/E1 với các cổng con thường được sử dụng cho frame Relay"],[6625,"Các cổng con thường được ký hiệu bằng dấu chấm, còn các kênh được ký hiệu bằng dấu hai chấm: \u2022 S0/0.23 là cổng con của cổng S0/0 \u2022 S0/0:23: tương ứng với kênh 24 của T1 Hình 4.2.2.b Hình 4.2.c 4.2.3 Kiểm tra cấu hình ISDN Chúng ta có thể sử dụng nhiều lệnh show khác nhau để kiểm tra cấu hình ISDN"],[6626,"600 Để xác định trạng thái hoạt động của BRI chúng ta dùng lệnh show ISDN status"],[6627,"Chúng ta sử dụng lệnh này sau khi đã cấu hình xong ISDN BRI để kiểm tra xem router đã giao tiếp được với ISDN switch hay chưa"],[6628,"Trong ví dụ ở hình 4.2.3.a cho thấy router đã giao tiếp thành công và ISDN Lớp 3 cũng đã sẵn sang để thực hiện hay nhận cuộc gọi"],[6629,"Trong kết quả hiển thị của lệnh show isdn status chúng ta nên lưu ý đến trạng thái của lớp 1 và lớp 2 Layer 1 Status: Active, layer 2 status Multiple _ Frame _ Established Hình 4.2.3.a Lệnh show isdn active cho biết các thông tin về những cuộc gọi đang thực hiện bao gồm \u2022 Số gọi đến \u2022 Thời gian gọi \u2022 Cước phí \u2022 Đơn vị tính cước phí trong suốt cuộc gọi \u2022 Thông tin về thiết bị kết nối ở đầu bên kia Lệnh show interface bri0/0 cho biết trạng thái của cổng BRI trên router"],[6630,"Bạn muốn xem thông tin của từng lệnh thì khai báo thêm số kênh ở cuối câu lệnh này"],[6631,"Ví dụ lệnh show interface br0/0:1 cho biết: \u2022 Kênh B sử dụng đóng gọi PPP"],[6632,"601 \u2022 LCP đã được thoả thuận và hoạt động \u2022 Có hai NCP đang chạy là IPCP và CDPCP Hình 4.2.3.b 4.2.4 Xử lý sự cố ISDN Sau đây là các lệnh được dùng để theo dõi và phát hiện sự cố trong cấu hình ISDN: \u2022 Lệnh debug isdn q921 hiển thị các thông tin về lớp liên kết dữ liệu các thông điệp trên kênh D giữa router và ISDN switch"],[6633,"Chúng ta nên sử dụng lệnh này khi trong kết quả hiển thị của lệnh show isdn status không cho thấy là : Layer 1 :Active Layer 2 Multiple_Frame-Established \u2022 Lệnh debug isdn q931 cho biết thông tin về các thông điệp Lớp 3 trong quá trình thiết lập và kết thúc cuộc gọi"],[6634,"\u2022 Lệnh debug ppp authentication hiển thị các thông điệp trao đổi của giao thức xác minh PAP hoặc Chap \u2022 Lệnh debub ppp negotiation hiển thị các thông tin về lưu lượng PPP khi các thành phần trong PPP đang thực hiện việc thoả thuận cấu hình"],[6635,"Trong đó có quá trình thoả thuận của LCP quá trình xác minh và quá trình thoả thuận của NCP \u2022 lệnh debug ppp error hiển thị các lỗi của giao thức và lỗi trạng thái của kết nối PPP"],[6636,"Chúng ta nên sử dụng các lệnh debug ppp để tìm sự cố ở lớp 2 khi kết quả hiển thị của lệnh show isdn status không cho thấy có sự cố của ISDN 4.3"],[6637,"Cấu hình DDR"],[6638,"602 4.3.1"],[6639,"Hoạt động của DDR Trên cổng có cấu hình DDR nếu có một dòng dữ liệu nào cần gửi ra cổng này và phù hợp với những tiêu chuẩn đã được định nghĩa trước đó thì DDR sẽ được kích hoạt để thực hiện truyền dữ liệu"],[6640,"Nhưng loại dữ liệu có thể kích hoạt DDR được gọi là lưu lượng đặc biệt"],[6641,"Sau khi router đã truyền xong nhưng lưư lượng đặc biệt này nó sẽ ngắt kết nối"],[6642,"Điểm quan trọng nhất để DDR hoạt động hiệu quả là việc định nghĩa lưu lượng đặc biệt"],[6643,""],[6644,"Lưu lượng đặc biệt được định nghĩa bằng lệnh dialer-list"],[6645,"Các lưu lượng của các giao thức được định nghĩa trong dialer \u2013 list có thể thực hiện kết nối DDR"],[6646,"Tuy nhiên bạn cần lưu ý rằng dialer \u2013 list không ngăn chặn lưu lượng đi qua cổng"],[6647,"Một khi lưu lượng đặc biệt đã kích hoạt kết nối DDR và kết nối này đang còn hoạt động thì mọi lưu lượng khác đều có thể đi qua Sau đây là các bước hoạt động của DDR trên Cisco router 1"],[6648,"Router nhận luồng lưu lượng vào từ một cổng, kiểm tra bảng định tuyển để xác định cổng ra cho lưu lượng đó"],[6649,"2"],[6650,"Nếu cổng đi ra có cấu hình DDR thì router sẽ xác định xem lưu lượng này có phải là loại lưu lượng đặc biệt hay không 3"],[6651,"Router xác định các thông tin quay số cần thiết để thực hiện cuộc gọi cho router kế tiếp 4"],[6652,"Nếu cổng ra đang có kết nối thì lưu lượng được chuyển ran gay"],[6653,"nếu cổng ra chưa có kết nối thì router sẽ gửi thông tin thiết lập kết nối trên kênh D BRI 5"],[6654,"Sau khi kếtnối đã được thiết lập thì mọi lưu lượng đặc biệt hay không đặc biệt đều được truyền đi 6"],[6655,"Đồng hồ đếm thời gian chờ bắt đầu được khởi động"],[6656,"Sau một khoảng thời gian định trước mà không có lưu lượng đặc biệt nào đi qua nữa thì kết nối sẽ bị ngắt Thời gian chờ là khoảng thời gian router duy trì kếtnối khi không có lưu lượng đặc biệt nào truyền đi trên kết nối đó"],[6657,"Một khi kết nối DDR đã được thiết lập thì mọi lưu lượng đều được phép đi qua"],[6658,"Tuy nhiên chỉ có lưu lượng đặc biêt mới có thể khởi động lại đồng hồ đếm thời gian chờ"],[6659,"603 Hình 4.3.1 4.3.2 Cấu hình DDR Cấu hình DDR cơ bản chỉ có một tập hợp các thông tin quay số được áp dụng cho một cổng"],[6660,"nếu cần có nhiều cấu hình quay số khác nhau áp dụng cho một cổng thì khi đó chúng ta nên sử dụng dialer profile Để cấu hình DDR chúng ta thực hiện các bước sau: \u2022 Cấu hình định tuyến cố định \u2022 Xác định lưu lượng đặc biệt \u2022 Cấu hình các thông tin quay số 4.3.3 Cấu hình định tuyến cố định cho DDR Để chuyển tiếp dữ liệu router cần phải biết con đường nào tương ứng với mỗi luồng lưu lượng nhận được"],[6661,"Nếu chúng ta sử dụng giao thức định tuyến động và lưu lượng của giao thức định tuyến này được định nghĩa là lưu lượng đặc biệt thì cổng DDR sẽ thực hiện quay số mỗi khi đến chu kỳ cập nhật thông tin định tuyến"],[6662,"Do đó để tránh vấn đề này chúng ta cần cấu hình định tuyến cố định cho DDR Để cấu hình định tuyến cố định cho IP chúng ta dùng lệnh sau:"],[6663,"604 Hình 4.3.3 Xét ví dụ hình 4.3.3 router Central có định tuyến cố định đến mạng 10.40.0.0 của router Home"],[6664,"Router Home có hai định tuyến cố định đến hai mạng LAN trên router Central"],[6665,"Nếu mạng kết nối trên router Home là stub network thì mọi lưu lượng đi ra ngoài đều gửi cho router Central Do đó trên router Home trong trường hợp nà chỉ cần một định tuyến mặc định là đủ Khi cấu hình định tuyến cố định, các bạn nên nhớ Mặc định định tuyến cố định luôn được ưu tiên trước định tuyến vì nó có chỉ số tin cậy nhỏ hơn"],[6666,"Nếu không có thêm cấu hình gì đặc biệt thì định tuyến động sẽ bị bỏ qua nếu có định tuyến cố định đến cùng một mục đích Để giảm bớt số lượng định tuyến cố định chúng ta nên sử dụng định tuyến mặc định hoặc tổng hợp địa chỉ mạng 4.3.4 Định nghĩa lưu lượng đặc biệt cho DDR Cuộc gọi DDR được kích hoạt lưu lượng đặc biêt"],[6667,"Lưu lượng đặc biệt có thể được định nghĩa theo một trong những tiêu chuẩn sau \u2022 Theo loại giao thức"],[6668,"605 \u2022 Theo địa chỉ nguồn hoặc đích của gói dữ liệu \u2022 Các tiêu chuẩn khác được định nghĩa do nhà quản trị mạng Lệnh dialer \u2013 list được sử dụng để xác định lưu lượng đặc biêt Router (config)#dialer \u2013 list dialer \u2013 group- number protocol protocol \u2013 name (permit deny list aceess \u2013 list \u2013 number) Dialer \u2013 group \u2013 number là chỉ số nằm trong khoảng từ 1 đến 10 giúp phân biệt giữa các dialer \u2013 list"],[6669,"Lệnh dialer \u2013 list 1 protocol ip permit sẽ cho phép mọi lưu lượng IP kích hoạt cuộc gọi"],[6670,"Thay vì cho phép mọi lưu lượng IP như vậy, dialer \u2013 list có thể chỉ đến một danh sách kiểm tra truy cập ACL để xác định chính xác hơn loại lưu lượng nào được phép thực hiện kết nối"],[6671,"Như ví dụ trên hình 4.3.4 dialer \u2013 list 2 chỉ kích hoạt kết nối DDR mọi gói IP khác đều được xem là lưu lượng đặc biệt và được phép khởi động kết nối DDR 4.3.5 Cấu hình thông tin quay số cho DDR Để cấu hình DDR chúng ta phải thực hiện qua nhiều bước"],[6672,"Trước tiên là cấu hình PPP cho cổng quay số chúng ta cũng phải sử dụng các lệnh tương tự như khi cấu hình PPP cho cổng serial"],[6673,"HDLC là giao thức đóng gói mặc đinh trên cổng ISDN của Cisco router"],[6674,"Nhưng hầu hết các mạng đều sử dụng PPP cho kết nối chuyển mạch"],[6675,"PPP phức tạp hơn dễ tương thích và có nhiều chức năng hơn"],[6676,"Ví dụ như có quá trình xác minh nên PPP là giao thức liên kết dữ liệu được sử dụng trên kênh B trên hầu hết mọi router"],[6677,"Để cấu hình PPP trên cổng DDR chúng ta xem ví dụ sau"],[6678,"606 Home (config)# username Central password Cisco Home (config)#interface bri0/0 Home (config \u2013 if)#encapsulation ppp Home (config \u2013 if)# ppp authentication chap Home (config \u2013 if) #ip addres 10.1.0.1 255.255.255.0 Dialer \u2013 list xác định lưu lượng đặc biệt cho cổng DDR"],[6679,"Do đóchúng ta cần liên kết cổng DDR với một dialer \u2013 list tương ứng bằng lệnh đialer-group group \u2013 number; Home (config \u2013 if)#dialer \u2013 group1"],[6680,"Trong đó group number xác định số thứ tự của dialer \u2013 list tương ứng"],[6681,"Do đó chỉ số này phải giống với chỉ số của dialer \u2013 list group number"],[6682,"Mỗi một cổng chỉ có một dialer \u2013 group nhưng một dialer- list có thể tương ứng cho nhiều cổng khác nhau"],[6683,"607 Hình 4.3.5a Hình 4.3.5b Hình 4.3.5c Sau đó chúng ta cấu hình thông tin quay số cho DDR bằng lệnh dialer map Lệnh dialer map ánh xạ địa chỉ của trạm kế tiếp với một số điện thoại Nếu bạn chỉ cần gọi đến một số duy nhất thì bạn có thể dùng lệnh dialer string"],[6684,"Với lệnh dialer string router sẽ luôn luôn gọi đến số điện thoại khai báo trong lệnh này bất kể địa chỉ đích của dữ liệu"],[6685,"608 Lệnh dialer idle timeỏu seconds cho phép cấu hình khoảng thời gian chờ tính theo giây trước khi ngắt kết nối, second là số giây chờ tính lúc gói dữ liệu đặc biệt cuối cùng được gửi đi"],[6686,"Thời gian chờ mặc định là 120 c Hình .4.3.5.d 4.3.6 Dialer profiles DDR có một hạn chế là chỉ có một cấu hình quay số áp dụng trực tiếp cho một cổng vật lý"],[6687,"Địa chỉ IP được gán trực tiếp cho cổng vật lý do đó chỉ có hai cổng có hai địa chỉ nằm trong cùng một subnet mới có thể thực hiện kết nối DDR với nhau"],[6688,"Điều này có nghĩa là một cổng DDR ở đầu này chỉa có thể kết nối được với một DR ở đầu bên kia Hình 4.3.6a"],[6689,"609 Dialer profile giải quyết được giới hạn này của DDR"],[6690,"Dialer profile tách được mối rang buộc cố định giữa cổng vật lý vàcấu hình quay số , nó cho phép cổng vật lý có thể tự động chọn lựa cấu hình tương ứng với mỗi cuộc gọi"],[6691,"Dialer profile có thể thực hiện được những việc sau \u2022 Định nghĩa giao thức đóng gói và danh sách kiểm tra truy cập ACL \u2022 Định nghĩa số lượng cuộc gọi tối thiểu và tối đa \u2022 Bật hoặc tắt các đặc tính đã được định trước Dialer profile giúp cho việc thiết kế và phát triển hệ thống mạng được linh hoạt hơn, khả năng mở rộng lớn hơn"],[6692,"Dialer profile tách phần logic của DDR, ví dụ như: phần lớp Mạng đóng gói và các đặc tính về quay số ra khỏi cổng vật lý Khi sử dụng dialer profile chúng ta thực hiện được những việc sau \u2022 Cấu hình kênh B của cổng ISDN với nhiều IP subnet khác nhau \u2022 Sử dụng nhiều kiểu đóng gói khác nhau trên kênh B của cổng ISDN \u2022 Khai báo nhiều đặc tính DDR khác nhau cho kênh B của cổng ISDN \u2022 Tận dụng kênh B bằng cách gán một ISDN BRI với nhiêù dialer pools khác nhau Một dialer profile bao gồm những thành phần sau Cổng quay số (Dialer interface) - cổng logic tương ứng với một mạng đích của dialer profile \u2022 Dialer pool - mỗi một cổng quay số tương ứng với một dialer pool điều này có nghĩa là một hay nhiều cổng vật lý tươngứng với một dialer profile Cổng vật lý - cấu hình các đặc tính về đóng goi quá trình xác minh PPP"],[6693,"Multilink PPP và xác định cổng này tương ứng với dialer profile"],[6694,"610 Hình 4.3.6.b Hình 4.3.6.c DDR hay dialer profile đều kích hoạt đường truyền khi cần truyền lưu lượng đặc biệt ra cổng DDR"],[6695,"Trước tiên lưu lượng đặc biệt được định tuyến đến trạm DDR kế tiếp"],[6696,"Sau đó router tìm cổng quay số có địa chỉ IP nằm trong cùng subnet với địa chỉ IP của trạm DDR kế tiếp"],[6697,"Nếu có router tiếp tục tìm trong dialer pool một cổng vật ý DDR còn trống"],[6698,"Sau đó cấu hình của dialer profile được áp dụng cho cổng"],[6699,"611 được chọn và tạo kết nối DDR"],[6700,"Sauk hi kết nối DDR kết thúc cổng vật lý được trả về cho dialer pools để sử dụng cho lần sau."],[6701,"4.3.7 Cấu hình dialer profiles Chúng ta có thể cấu hnhf nhiều cổng quay số trên một router.Mỗi cổng quay số là một cấu hình hoàn chỉnh cho một điểm đích"],[6702,"Lệnh interface dialer được sử dụng để tạo cổng quay số và vào chế độ cấu hình của cổng này Sau đây là những công việc cần thực hiện khi cấu hình cổng quay số: 1"],[6703,"Cấu hình một hay nhiều cổng quay số với những lệnh tương tự như cấu hình DDR cơ bản: Địa chỉ IP Kiểu đóng gói và giao thức xác minh Thời giam chờ Dialer group 2"],[6704,"Khai báo tên và số điện thoại của router đầu bên kia bằng lệnh dialer string và dialer remote name"],[6705,"Khai báo nhóm các cổng vật lý tương ứng với cổng logic này bằng lệnh dialer pool 3"],[6706,"Cấu hình cổng vật lý và gán cổng này vào dialer pool bằng lệnh dialer pool \u2013 member Hình 4.3.7.a"],[6707,"612 Hình 4.3.7.b Một cổng có thể gán vào nhiều dialer pool khác nhau bằng cách dùng nhiều lần lệnh dialer pool \u2013 member"],[6708,"Nếu có nhiều cổng vật lý trong một dialer pool thìchúng ta có thể sử dụng thông số ưu tiên priority trong lệnh dialer poole- member để định mức độ ưu tiên cho các cổng trong dialer pool Một hoặc nhiều cổng sau đây có thể sử dụng được với dialer pool \u2022 Cổng serial đồng bộ \u2022 Cổng serial bất đồng bộ \u2022 BRI \u2022 PRI 4.3.8 Kiểm tra cấu hình DDR Lệnh show dialer interface (BRI) hiển thị thông tin về các cuộc gọi vào và ra của DDR Thông lệnh \u201cDialer state is data link layer up"],[6709,"Interface bound to profile Dialer1\u201d cho biết cuộc gọi thực hiện tốt và cổng BRI o/0:1 được gán với dialer profile 1i"],[6710,"613 Hình 4.3.8a Lệnh show ISDN active hiển thị thông tin về các cuộc gọi ISDN đang thực hiện"],[6711,"Trong ví dụ hình 4.3.8.b chúng ta thấy đang có cuộc gọi ra đến router Seatle Hình 4.3.8.b Lệnh show ISDN status hiển thị các thông tin 3 lớp của cổng BRI"],[6712,"Trong ví dụ hình 4.3.8"],[6713,"c chúng ta thấy ISDN Lớp 1 đã hoạt động ISDN Lớp 2 đã được thiết lập với số SP1D1 và SP1D2 và đang có một kết nối ở Lớp 3"],[6714,"614 Hình 4.3.8.c 4.3.9 Xác định sự cố trong cấu hình DDR Có hai loại sự cố chíng trong DDR"],[6715,"Một là router không thực hiện quay số khi cần thiết hai là router liên tục gọi đi khi không cần thiết"],[6716,"Các lệnh debug sẽ rất hữu dụng khi chúng ta xác định sự cố trong cấu hình DDR"],[6717,"615 Hình 4.3.9.a Trong ví dụ hình 4.3.9.a hai chữ số Hex đứng vị trí thứ 7 và thứ 8 cho biết loại thông điệp:\\ 0*05:Thông điệp thiết lập cuộc phí 0*02:Thông điệp triển khai cuộc gọi 0*07 Thông điệp kết nối 0*0F: Thông điệp xác nhận kết nối Lệnh debug ISDN q931 cho chúng ta xem các thông tin trao đổi Lớp 2 của ISDN khi cuộc gọi ra hoặc vào được thiết lập"],[6718,"Các chỉ số \u201ci=\u201d là chỉ số Hex của các thông điệp Q931"],[6719,"616 Hình 4.3.9b Hình 4.3.9c Lệnh debug dialer (event packer) được sử dụng để xác định sụ cố kết nối DDR"],[6720,"Lệnh debug dialer events hiển thị các thông điệp cho biết kết nối DDR đã được thực hiện chưa lưu lượng nào đã kích hoạt kết nối"],[6721,"Nếu router bị cấu hình DDR không đúng thì lệnh này sẽ chỉ ra được nguồn gốc của sự cố"],[6722,"Nếu không có thông điệp nào được hiển thị thì ra có nghĩa là router chưa nhận được lưu lượng đặc biệt nào"],[6723,"Như vậy nguyên nhân có thể là do cấu hình dialer \u2013 list hoặc ACL không đúng"],[6724,"617 Hình 4.3.9d Không phải lỗi cấu hình DDR nào cũng dẫn đến việc quay số không đúng"],[6725,"Giao thức định tuyến động cũng có thể làm cho router quay số liên tục mặc dù không có dữ liệu của người dùng cần truyền đi"],[6726,"Lệnh debug dialer packets sẽ hiển thị thông điệp mỗi khi có một gói dữ liệu được truyền ra cổng DDR"],[6727,"Do đó chúng ta có thể dùng lệnh này để xác định chính xác loại lưu lượng nào đã kích hoạt liên tục cổng DDR Nếu router không thực hiện kết nối được khi cần thiết thì có thể là do lỗi của ISDN hoặc DDR"],[6728,"Có thể router đầu bên kia được cấu hình không đúng hoặc là mạng ISDN của nhà cung cấp dịch vụ có sự cố"],[6729,"Chúng ta dùng lệnh ISDN call interface để ép router quay số đến router đầu bên kia"],[6730,"Nếu hai router không thể giao tiếp được với nhau thì sự cố thuộc về ISDN chứ không phải sự cố DDR"],[6731,"Nhưng nếu hai router có thể giao tiếp được với nhau thì có nghĩa là cấu hình ISDN ở cả hai đầu đều không có vấn đề"],[6732,"Trong trường hợp nay thì khả năng lớn là lỗi của cấu hình DDR trên hai router Trong một số trường hợp việc khởi động lại kết nối giữa router và ISDN switch cũng rất hiệu quả"],[6733,"Lệnh clear interface bri sẽ xoá hết kết nối hiện tại.trên cổng BRI và khởi động lại kết nối hiện tại trên cổng BRI và khởi động lại ket nối mới với ISDN switch"],[6734,"Và đôi khi chúng ta cũng nên kiểm tra lại chỉ số SP1D1 và SP1D2"],[6735,"618 Hình 4.3.9.e TỔNG KẾT ISDN được xem là một tập hợp các giao thức được thực hiện các công ty điện thoại để cho phép mạng điện thoại có thể tích hợp dịch vụ truyền thoại, video và dữ liệu"],[6736,"ISDN cho phép thông tin liên lạc tốc độ cao chất lượng tốt DDR được sử dụng để tiết kiệm chi phí khi một công ty hay tổ chức không có nhu cầu cần một đường kết nối WAN cố định"],[6737,"Đường truyền này cũng được sử dụng làm đường dự phòng cho kết nối chính"],[6738,"\u2022 Sau đây là các điểm quan trọng mà bạn cần nắm trong chương này: ISDN truyền dữ liệu thoại và video \u2022 ISDN có sử dụng các chuẩn về địa chỉ tín hiệu \u2022 ISDN hoạt động ở lớp Vật lý và lớp liên kết dữ liệu \u2022 Các điểm liên kết trong ISDN \u2022 Cấu hình ISDN trên router \u2022 Cấu hình những lưu lượng nào được phép kích hoạt DDR \u2022 Cấu hình định tuyến cố định cho DDR \u2022 Cấu hình kiểu đóng gói cho DDR \u2022 Cấu hình ACL cho DDR \u2022 Cấu hình cổng quay số Một hệ thống mạng được xây dựng bởi nhiều thiết bị nhiều giao thức và nhiều loại môi trường truyền"],[6739,"Khi một bộ phận nào đó của mạng không hoạt động đúng thì sẽ có một vài người dùng không truy cập được hoặc có thể cả hệ thống mạng cũng không hoạt động được"],[6740,"Cho dù trong trường hợp nào thì khi sự cố xảy ra người"],[6741,"619 quản trị mạng phải nhanh chóng xác định sự cố và xử lýchúng"],[6742,"Sự cố mạng thường do những nguyên nhân sau \u2022 Gõ sai câu lệnh \u2022 Cấu hình danh sách kiểm tra truy cập ACL không đúng hoặc đặt ACL không đúng chỗ \u2022 Cấu hình thiếu cho router switch và các thiết bị mạng khác \u2022 Kết nối vật lý không tốt Người quản trị mạng cần tiếp cận với sụ cố một cách có phương pháp, sử dụng sơ đò xử lý sự cố tổng quát"],[6743,"Trước tiên là kiểm tra sự cố ở lớp Vật lý trước rồi mới đi dẫn lên các lớp trên"],[6744,"Mặc dù chương này chỉ tập trung vào xử lý sự cố các hoạt động của giao thức định tuyến ở lớp 3 nhưng cũng rất quan trọng cho các bạn khi cần loại trừ ở các lớp dưới Sauk hi hoàn tất chương này các bạn sẽ thực hiện được những việc sau \u2022 Mô tả sự khác nhau giữa EIGRP và IGRP \u2022 Mô tả các khái niệm kỹ thuật và cấu trúc dữ liệu EIGRP \u2022 Hiểu được quá trình hội tụ của EIGRP và các bước hoạt động cơ bản của thuật toán DUAL \u2022 Thực hiện cấu hình EIGRP cơ bản \u2022 Cấu hinh được tổng hợp cho EIGRP \u2022 Mô tả quá trình EIGRP xây dựng và bảo trì bảng định tuyến \u2022 Kiểm tra hoạt động của EIGRP \u2022 Mô tả tám bước để xử lý sự cố tổng quát \u2022 Áp dụng tiến hành logic để xử lý sự cố định tuyến \u2022 Xử lý sự cố của hoạt động định tuyến RIP bằng cách sử dụng lệnh show và debug \u2022 Xử lý sự cố của hoạt động định tuyến IGRP bằng cách sử dụng lệnh show và debug \u2022 Xử lý sự cố của hoạt động định tuyến EIGRP bằng cách sử dụng lệnh show và debug \u2022 Xử lý sự cố của hoạt động định tuyến OSPF bằng cách sử dụng lệnh show và debug 3.1 C ác kh ái ni ệm c ủa EIGRP 3.1.1 So sánh EIGRP và IGRP"],[6745,"620 Cisco đưa ra giao thức EIGRP vào năm 1994 như là một phiên bản mới mở rộng và nâng cao hơn của giao thức IGRP"],[6746,"Kỹ thuật vectơ khoảng cách trong IGRP vẫn được sử dụng cho EIGRP EIGRP cải tiến các đặc tính của quá trình hội tụ, hoạt động hiệu quả hơn IGRP"],[6747,"Điều này cho phép chúng ta mở rộng cải tiến cấu trúc trong khi vẫn giữ nguyên những gì đã xây dựng trong IGRP Chúng ta sẽ tập trung so sánh EIGRP và IGRP trong lĩnh vực sau \u2022 Tính tương thích \u2022 Cách tính thông số định tuyến \u2022 Số lượng họp \u2022 Hoạt động phân phối thông tin tự động \u2022 Đánh dấu đường đi IGRP và EIGRP hoàn toàn tương thích với nhau EIGRP router không có ranh giới khi hoạt động chung với IGRP router"],[6748,"Đặc điểm này rấtquan trọng khi người sử dụng muốn tận dụng ưu điểm của cả hai giao thức EIGRP có thể hỗ trợ nhiều loại giao thức khác nhau còn IGRP thì không EIGRP và IGRP có cách tính thông số định tuyến khác nhau"],[6749,"EIGRP tăng thông số định tuyến của IGRP lên 256 lần vì EIGRP sử dụng thông số 32 bit còn IGRP sử dụng thông số 24 bit"],[6750,"Bằng cách nhân lên hoặc chia đi 256 lần , EIGRP có thể dễ dàng chuyển đổi thông số định tuyến của IGRP IGRP có số lượng hợp tối đa là 255"],[6751,"EIGRP có số lượng họp tối đa là 224 Con số này dư sức đáp ứng cho một mạng được thiết lập hợp lý lớn nhất Để các giao thức định tuyến khác nhau như GSPF và RIP chẳng hạn thực hiện chia sẻ thông tin định tuyến với nhau thì cần phải cấu ình nâng cao hơn"],[6752,"Trong khi đó IGRP và EIGRP có cùng số AS của hệ tự quản sẽ tự động phân phối và chia sẻ thông tin về đường đi với nhau"],[6753,"Trong ví dụ ở hình 3.1.1, RTB tự động phân phối các thông tin về đường đi mà EIGRP học được cho IGRP AS và ngược lại EIGRP đánh dấu những đường mà nó hoạc được từ IGRP hay từ bất kỳ nguồn bên ngoài nào khác là đường ngoại vi vì những con đường này không xuất phát từ các EIGRP router, IGRP thì không phân biệt đường ngoại vi và nội vi"],[6754,"621 Ví dụ như hình 3.1.1 trong kết quả hiển thị của lệnh show ip route đường EIGRP được đánh dấu bằng chữ D đường ngoại vi được đánh dấu bằng chữ EX"],[6755,"RTA phân biệt giữa mạng học được từ EIGRP và mạng được phân phối từ IGRP"],[6756,"Trong bảng định tuyến của RTC giao thức IGRP không có sự phân biệt này"],[6757,"RTC chỉ nhận biết tất cả các đường đều là đường IGRP mặc dù hai mạng 10.1.1.0 và 172.16.0.0 là phân phối từ EIGRP Hình 3.1.1 3.1.2 Các khái niệm và thuật ngữ của EIGRP"],[6758,"622 EIGRP router lưu giữ các thông tin về đường đi và cấu trúc mạng trên RAM nhờ đó chúng đáp ứng nhanh chóng theo sự thay đổi"],[6759,"Giống như OSPF EIGRP cũng lưu những thông tin này thành từng bảng và từng cơ sở dữ liệu khác nhau EIGRP lưu các con đường mà nó học được theo một cách đặc biệt"],[6760,"Mỗi con đường có trạng thái riêng và có đánh dấu để cung cấp thêm nhiều thông tin hữu dụng khác"],[6761,"EIGRP có ba loại bảng sau \u2022 Bảng láng giềng \u2022 Bảng cấu trúc mạng \u2022 Bảng định tuyến Bảng láng giềng là bảng quan trọng nhất trong EIGRP"],[6762,"Mỗi router EIGRP lưu giữ một bảng láng giềng, trong đó là danh sách các router than mật với nó"],[6763,"Bảng này tương tự như cơ sở dữ liệu về các láng giềng của OSPF"],[6764,"Đỗi với mỗi giao thức mà EIGRP hỗ trợ, EIGRP có một bảng láng giềng tương ứng Khi phát hiện một láng giềng mới router sẽ ghi lại địa chỉ và cổng kết nối của láng giềng đó vào bảng láng giềng"],[6765,"Khi láng giềng gửi gói hello"],[6766,"Trong đó có thông số về khoảng thời gian lưu giữ"],[6767,"nếu router không nhận được gói hello khi đến định ký thì khoảng thời gian lưu giữ là khoảng thời gian mà router chờ và vẫn xem là router láng giềng còn kếtnối được nhận được hello từ router láng giềng đó thì xem như router láng giềng đã không còn kết nối được hoặc không còn hoạt động thuật toán DUAL sẽ thông báo sự thay đổi này và thực hiện tính toán lại theo mạng mới Bảng cấu trúc mạng là bảng cung cấp dữ liệu để xây dựng nên bảng định tuyến của EIGRP"],[6768,"DUAL lấy thông tin từ bảng láng giềng và bảng cấu trúc mạng để tính toán chọn đường có chi phí thấp nhất đến từng mạng đích Mỗi EIGRP router lưu một bảng cấu trúc mạng riêng tương ứng với từng loại giao thức mạng khác nhau"],[6769,"Bảng cấu trúc mạng chứa thông tin về tất cả các con đương mà router học được"],[6770,"Nhờ những thông tin này mà router có thể xác định đường đi khác để thay thế nhanh chóng khi cần thiết"],[6771,"Thuật toán DUAL chọn ra đường tốt nhất đến mạng đích gọi là đường chính Sau đây là những thông tin chứa trongbảng cấu trúc mạng:"],[6772,"623 \u2022 Feasible distance (FD): là thông số định tuyến nhỏ nhất mà EIGRP tính được cho từng mạng đích \u2022 Route source là nguồn khởi phát thông tin về một con đường nào đó"],[6773,"Phần thông tin này chỉ có đối với những đường được học từ ngoài mạng EIGRP \u2022 Reported distance (RD) là thông số định tuyến đến một mạng đích do router láng giềng thân mật thông báo qua \u2022 Thông tin về cổng giao tiếp mà route sử dụng để đi đến mạng đích \u2022 Trạng thái đường đi: trạng thái không tác động là trạng thái ổn định, sẵn sang sử dụng được trạng thái tác động là trạng thái đang trong tiến trình tính toán lại của DUAL Bảng định tuyến EIGRP lưu giữ danh sách các đường tốt nhất đến các mạng đích"],[6774,"Những thông tin trong bảng định tuyến được rút ra từ bảng cấu trúc mạng"],[6775,"Router EIGRP có bảng định tuyến riêng cho ừng giao thức mạng khác nhau Con đường được chọn làm đường chính đến mạng đích gọi là đường successor"],[6776,"Từ thông tin trong bảng láng giềng và bảng cấu trúc mạng, DUAL chọn ra một đường chính và đưa lên bảng định tuyến"],[6777,"Đến một mạng đích có thể có đến 4 successor"],[6778,"Những đường này có chi phí bằng nhau hoặc không bằng nhau"],[6779,"Thông tin về successor cũng được đặt trong bảng cấu trúc mạng Đường Feasible sucessor (FS) là đường dự phòng cho đường successor"],[6780,"Đường này cũng được hcọn ra cùng với đường successor nhưng chúng chỉ được lưu lượng trong b ảng cấu trúc mạng"],[6781,"Đến một mạng đích có thể có nhiều feasible successor được lưu trong bảng cấu trúc mạng nhưng điều này không bắt buộc Router xem hợp kế tiếp của đường feasible successor là hop dưới nó, gần mạng đích hơn nó"],[6782,"Do đó chi phí của feasible successor được tính bằng chi phí của chính nó cộng với chi phí mà router láng giềng thông báo qua"],[6783,"Trong trường hợp successor bị sự cố thì router sẽ tìm feasible successor để thay thế"],[6784,"Một đường feasible successor bắt buộc phải có chi phí mà route láng giềng thông báo qua thấp hơn chi phí của đường successor hiện tại"],[6785,"Nếu trong bảng cấu trúc mạng không có sẵn đường feasible successor thì con đường đến mạng đích tương ứng được đưa vào trạng thái Active và route bắt đầu gửi các gói yêu cầu đến tất cả các láng giềng để tính toán lại cấu trúc mạng"],[6786,"Sau đó với các thông tin mới nhận được router có thể sẽ chọn ra được successor mới hoặc feasible successor mới"],[6787,"Đường mới được chọn xong sẽ có trạng thái là Passive"],[6788,"624 Hình 3.1.2.a"],[6789,"625 Hình 3.1.2.b Bảng cấu trúc mạng còn lưu nhiều thông tin khác về các đường đi"],[6790,"EIGRP phân loại ra đường nội vi và đường ngoại vi"],[6791,"Đường nội vi là đường xuất phát từ bên trong hệ tự quản EIGRP, EIGRP có dãn nhãn với giá trị từ 0 đến 255 để phân biệt đường thuộc loại nào Đường ngoại vi là đường xuất phát từ bên ngoài AS của EIGRP"],[6792,"Các đường ngoại vi là nững đường được học từ các giao thức định tuyến khác như RIP, OSPF và IGRP"],[6793,"Đường cố định cũng được xem là đường ngoại vi"],[6794,"626 Hình 3.1.2.c Hình 3.1.2.d"],[6795,"627 Hình 3.1.2.e Hình 3.1.2.f 3.1.3 Các đặc điểm của EIGRP EIGRP hoạt động khác với IGRP, về bản chất EIGRP là một giao thức định tuyến theo vectơ khoảng cách nâng cao nhưng khi cập nhật và bảo trì thông tin láng giềng và thông tin định tuyến thì nó làm việc giống như một giao thức định tuyến theo trạng thái đường liên kết"],[6796,"Sau đây là các ưu điểm của EIGRP so với giao thức định tuyến theo vectơ khoảng cách thông thường"],[6797,"628 \u2022 Tốc độ hội tụ nhanh \u2022 Sử dụng băng thông hiệu quả \u2022 Có hỗ trợ VLSM và CIDR"],[6798,"Không giống như IGRP EIGRP có trao đổi thông tin về subnet mask nên nó hỗ trợ được cho hệ thống IP không theo lớp \u2022 Hỗ trợ cho nhiều giao thức mạng khác nhau \u2022 Không phụ thuộc vào giao thức được định tuyến"],[6799,"Nhờ cấu trúc từng phần riêng biệt tương ứng với từng giao thứ mà EIGRP không cần phải chỉnh sửa lâu"],[6800,"Ví dụ như khi phát triển để hỗ trợ một giao thức mới như IP chẳng hạn"],[6801,"EIGRP cần phải có thêm phần mới tương ứng cho IP nhưng hoàn toàn không cần phải viết lại EIGRP EIGRP router hội tụ nhanh vì chúng sử dụng DUAL, DUAL bảo đảm hoạt động không bị lặp vòng khi tính toán đường đi cho phép mọi router trong hệ thống mạng thực hiện đồng bộ cùng lúc khi có sự thay đổi xảy ra EIGRP sử dụng băng thông hiệu quả vì nó chỉ gửi thông tin cập nhật một phần và giới hạn chứ không gửi toàn bộ bảng định tuyến"],[6802,"Nhờ vậy nó chỉ tổn một lượng băng thông tối thiểu khi hệ thống mạng đã ổn định"],[6803,"điều này tương tự như hoạt động cập nhật OSPF nhưng không giống như router OSPF router EIGRP chỉ gửi thông tin cập nhật một router khác trong vùng như OSPF Chính vì vậy mà hoạt động cập nhật của EIGRP gọi là cập nhật giới hạn"],[6804,"Thay vì hoạt động cập nhật theo chu kỳ các router EIGRP giữ liên lạc với nhau bằng các gói hello rất nhỏ"],[6805,"Việc trao đôi các gói hello theo định kỳ không chiểm nhiều băng thông đường truyền EIGRP có thể hỗ trợ cho IP, IPX và Apple talk nhờ có cấu trúc từng phần theo giao thức, EIGRP có thể phân phối thông tin của IPX RIP và SAP để cải tiến hoạt động toàn diện"],[6806,"Trên thực tế EIGRP có thể điều khiển hai giao thức này Router EIGRP nhận thông tin định tuyến dịch vụ, chỉ cập nhật cho các router khác nhau khi thông tin trong bảng định tuyến hay bảng SAP thay đổi EIGRP còn có thể điều khiển giao thức Alpha talk routing table maintenance Protocol (RTMP) RTMP sử dụng số lượng để chọn đường nên khả năng chọn đường khôngđược tốt lắm"],[6807,"Do đó, EIGRP sử dụng thông số định tuyến tổng hợp cấu hình được để chọn đường tốt nhất cho mạng Apple talk"],[6808,"Là một giao thức định tuyến theo vectơ khoảng cách RTMP thực hiện trao đổi toàn bộ thông tin định tuyến theo chu kỳ"],[6809,"Để giảm bớt sự quá tải này EIGRP thựch iện phân phối thông tin định tuyến Apple talk khi có sự kiện thay đổi mà thôi"],[6810,"Tuy nhiên apple talk client cũng muốn nhận thông tin RTMP từ các router nội bộ do đó EIGRP dùng"],[6811,"629 cho Apple talk chỉ nên chạy trong mạng không có client ví dụ nhưcác liên kết WAN chẳng hạn 3.1.4 Các kỹ thuậtcủa EIGRP EIGRP có rất nhiều kỹ thuật mới để cải tiến hiệu quả hoạt động tốc độ hội tụ và các chức năng so với IGRP và các giao thức định tuyến khác"],[6812,"Các kỹ thuật này được tập trung thành 4 loại như sau: \u2022 Sự phát hiện và tái phát hiện các router láng giềng \u2022 Giao thức truyền tải tin cậy \u2022 thuật toán DUAL finite \u2013 sate machine \u2022 Cấu trúc từng phần theo giao thức Router định tuyến theo vectơ khoảng cách dạng đơn giản không thiết lập mối quan hệ với các láng giềng của nó"],[6813,"RIP và IGRP route chỉ đơn giản là phát quảng bá hay multicast các thông tin cập nhật của nó ra mọi cổng đã được cấu hình"],[6814,"Ngược lại, EIGRP router chủ động thiết lập mối quan hệ với các láng giềng của chúng tương tự như cách làm của OSPF router Hình 3.1.4 Quá trình EIGRP router thiết lập mối quan hệ than mật được mô tả trong hình 3.1.4"],[6815,"EIGRP route sử dụng các gói hello rất nhỏ để thực hiện việc thiết lập mối"],[6816,"630 quan hệ than mật với các router láng giềng"],[6817,"Mặc định hello được gửi đi theo chu kỳ là 5 giây"],[6818,"Nếu router vẫn nhận được hello từ láng giềng thì nó sẽ xem như láng giềng này và các đường đi của nó vẫn còn hoạt động"],[6819,"Bằng cách thiết lập mối quan hệ này, EIGRP router có thể thực hiện được những việc sau - Tự động học được đường mới khi chúng kết nối vào hệ thống mạng - Xác định một router không còn kết nối hoặc không còn hoạt động nữa - Phát hiện sự hoạt động trỏ lại của các router Giao thức vận chuyển tin cậy RTP là giao thức ở lớp vận chuyển thực hiện chuyển gói EIGRP một cách tin cậy và có thứ tự đến tất cả các láng giềng"],[6820,"Trong mạng IP host sử dụng TCP để vận chuyển các gói một cách tuần tự và tin cậy"],[6821,"Tuy nhiên EIGRP là một giao thức độc lập với giao thức mạng do đó nó không dựa vào TCP/IP để thực hiện trao đổi thông tin định tuyến giống như RIP, IGRP và OSPF đã làm"],[6822,"Để không bị phụ thuộc vào IP, ẺIGP sử dụng RTP làm giao thức vận chuyển riêng độc quyền của nó để đảm bảo việc truyền thông tin định tuyến EIGRP có thể yêu cầu RTP cung cấp dịch vụ truyền tin cậy hoặc không tin cậy tuỳ theo yêu cầu của từng trường hợp"],[6823,"Ví dụ các gói hello được truyền theo định kỳ và cần phải càng nhỏ càng tốt nên chúng không cần phải dùng chế độ truyền tin cậy"],[6824,"Ngược lại việc truyền tin cậy các thông tin định tuyến sẽ có thể làm tăng tốc độ hội tụ vì EIGRP router không cần hết thời hạn mới truyền lại Với RTP, EIGRP có thể gửi multicast và trực tiếp cho các đối tác khác nhau cùng một lúc giúp tối ưu hiệu quả hoạt động Thành phần trung tâm của EIGRP là thuật toán DUAL là bộ máy tính toán đường đi cuả EIGRP"],[6825,"Tên đầy đủ của kỹ thuật này là DUAL finite - state machine"],[6826,"FMS là một bộ máy thuật toán nhưng không phải là một thiết bị cơ khí có các thành phần di chuyển được"],[6827,"FSM định nghĩa một tập hợp các trạng thái có thể trải qua, sự kiện nào gây ra trạng thái nào và sẽ có kết quả là gì"],[6828,"Người thiết kế sử dụng FSM để lập trình cách mà một thíêt bị một chương trình máy tính hay một thuật toán định tuyến sẽ xử lý như thế nào với một tập hợp các dữ kiện đầu vào"],[6829,"DUAL FSM chứa tất cả các logic được sử dụng để tính toán và so sánh đường đi trong mạch EIGRP DUAL lưu tất cả các đường mà láng giềng thông báo qua"],[6830,"Dựa trên thông số định tuyến tổng hợp của mỗi đường, DUAL so sánh và chọn ra đường có chi phí thấp"],[6831,"631 nhất đến đích"],[6832,"DUAL đảm bảo mỗi một đường này là không có lặp vòng"],[6833,"Đường chính được chọn ra gọi là đường successor"],[6834,"Đường successor được lưu trên bảng định tuyến và đồng thời cũng được lưu trong bảng cấu trúc mạng EIGRP giữ các thông tin quan trọng về đường đi và cấu trúc mạng trong bảng láng giềng và bảng cấu trúc mạng"],[6835,"Hai bảng này cung cấp cho DUAL các thông tin về đường đi khi cần thiết"],[6836,"Nếu có một đường liên kết bị đứt, DUAL sẽ tìm đường thay thế hoặc một feasible successor trong bảng cấu trúc mạng Một trong những ưu điểm nổi bật của EIGRP là nó được thiết kế thành từng phần riêng biệt theo giao thức"],[6837,"Nhờ cấu trúc này, nó có khả năng mở rộng và tương thích tốt nhất"],[6838,"Các giao thức được định tuyến như IP, IPX và Apple Talk được đưa vào EIGRP thông qua các PDM EIGRP có thể dễ dàng tương thích với giao thức được định tuyến mới hoặc các phiên bản mới của chúng như IPv6 chẳng hạn bằng cách thêm PDM vào"],[6839,"Mỗi PDM chịu trách nhiệm thực hiện mọi chức năng liên qan đến một giao thức được định tuyến"],[6840,"Ví dụ phần IP \u2013 EIGRP chịu trách nhiệm các việc sau: \u2022 Gửi và nhận các gói EIGRP chứa dữ liệu IP \u2022 Thông báo cho DUAL khi nhận được thông tin định tuyến IP mới \u2022 Duy trì kết quả chọn đường của DUAL trong bảng định tuyến IP \u2022 Phân phối thông tin định tuyến mà nó học được từ các giao thức định tuyến IP khác 3.1.5 Cấu trúc dữ liệu của EIGRP Giống như OSPF EIGRP dựa vào nhiều loại gói dữ liệu khác nhau để duy trì các loại bảng của nó và thiết lập mối quan hệ phức tạp với router láng giềng Có 5 loại gói EIGRP \u2022 Hello \u2022 Báo nhận \u2022 Cập nhật \u2022 Yêu cầu \u2022 Đáp úng EIGRP dựa vào các gói hello để phát hiện, kiểm tra và tái phát hiện các router láng giềng"],[6841,"Tái phát hiện có nghĩa là router EIGRP không nhận được hello từ một router"],[6842,"632 láng giềng trong suốt khoảng thời gian lưu giữ nhưng sau đó router láng giềng này lại tái lập lại thông tin liên lạc Chu kỳ gửi hello của EIGRP router có thể cấu hình được"],[6843,"Khoảng thời gian hello mặc định phụ thuộc vào băng thông trên từng cổng của router"],[6844,"Trong mạng IP, EIGRP router gửi hello theo địa chỉ multicast 224.0.0.10 EIGRP router lưu thông tin về các láng giềng trong bảng láng giềng"],[6845,"Bảng láng giềng này có lưu số thứ tự và thời gian lưu giữ của gói EIGRP cuối nhận được từ mỗi router láng giềng"],[6846,"Theo định kỳ và trong giới hạn củak hoảng thời gian lưu giữ"],[6847,"Router phải nhận được gói EIGRP thì những đường tương ứng mới có trạng thái Pasive"],[6848,"Trạng thái Passive có nghĩa là trạng thái hoạt động ổn định Nếu roter không nghe ngóng được gì về router láng giềng trong suốt khoảng thời gian lưu giữ thì EIGRP sẽ xem như láng giềng đó đã bị sự cố và DUAL phải tính oná lại bảng định tuyến"],[6849,"Mặc định khoảng thời gian lưu giữ gấp 3 lần chu kỳ hello"],[6850,"Người quản trị mạng có thể cấu hình giá trị cho 2 khoảng thời gian này phù hợp hơn với hệ thống của mình Hình 3.1.5 OSPF bắt buộc các router láng giềng với nhau phải có cùng khoảng thời gian hello và khoảng thời gian bất đọng thì mới có thể thông tin liên lác với nhau được"],[6851,"EIGRP thì không yêu cầu như vậy"],[6852,"Router sẽ học các khoảng thời gian của router láng giềng thông qua việc trao đổi gói hello"],[6853,"Chúng sẽ dùng thông tin trong đó thiết lập mối quan hệ ổn định mà không cần các khoảng thời gian này phải giống nhau giữa chúng"],[6854,"Gói hello thường được gửi theo chế độ không bảo đảm tin cậy"],[6855,"Điều này có nghĩa là không có báo nhận cho các gói hello"],[6856,"633 EIGRP router sử dụng gói báo nhận để xác nhận là đã nhận được gói EIGRP trong quá trình trao đổi tin cậy"],[6857,"Giao thức vận chuyển tin câỵ cung cấp dịch vụ liên lạc tin cậy giữa hai host EIGRP"],[6858,"Gói báo nhận chính là gói hello mà không có dữ liệu"],[6859,"Không giống như hello được gửi multicast các gói báo nhận chỉ gửi trực tiếp cho một máy nhận"],[6860,"Báo nhận có thể được kết hợp vào loại gói EIGRP khác như gói trả lời chẳng hạn Gói cập nhật được sử dụng khi router phát hiện một láng giềng mới"],[6861,"Router EIGRP sẽ gửi gói cập nhật cho router láng giềng mới này để nó có thể xây dựng bảng cấu trúc mạng"],[6862,"Có thể sẽ cần nhiều gói cập nhật mới có thể truyền tải hết các thông tin cấu trúc to Gói cập nhật còn được sử dụng khi router phát hiện sự thay đổi trong cấu trúc mạng"],[6863,"Trong trường hợp này EIGRP router sẽ gửi multicast gói cập nhật cho mọi router láng giềng của nó để thông báo về sự thay đổi"],[6864,"Mọi gói cập nhật đều được gửi bảo đảm EIGRP router sử dụng gói yêu cầu khi nó cần một thông tin đặc biệt nào đó từ một hay nhiều láng giềng của nó"],[6865,"Gói đáp ứng được sử dụng để trả lời cho các gói yêu cầu Nếu một EIGRP router mất successor và nó không tìm được feasible successor để thay thế thì DUAL sẽ đặt con đường đến mạng đích đó vào trạng thái Active"],[6866,"Sau đó route gửi multicast gói yêu cầu đến tất cả các láng giềng để cố gắng tìm successor mới cho mạng đích này"],[6867,"Router láng giềng phải trả lời bằng gói đáp ứng để cung cấp thông tin hoặc cho biết là không có thông tin nào khác có thể khả thi"],[6868,"Gói yêu cầu có thể được gửi multicast hoặc chỉ gửi cho một máy, còn gói đáp ứng thì chỉ gửi cho máy nào gửi yêu cầu mà thôi"],[6869,"Cả hai loại gói này đều được gửi bảo đảm 3.1.6 Thuật toán EIGRP Thuật toán DUAL phức tạp giúp co EIGRP hội tụ nhanh"],[6870,"Để hiểu rõ hơn về quá trình hội tụ với DUAL ta étt ví dụ ở hình 3.1.6.a"],[6871,"Mỗi router xấy dựng một bảng cấu trúc mạng chứa các thông tin về đường đi đến mạng A Mỗi bảng cấu trúc mạng trong ví dụ ở các hình 3.1.6.a \u2013 f có các thông tin sau \u2022 Giao thức định tuyến là giao thức EIGRP"],[6872,"634 \u2022 Chi phí thấp nhất của đường đến một mạng đích gọi là Feasible Distance \u2022 Chi phí của đường đến một mạng đích do router láng giềng thông báo qua gọi là Reported Distance Nguyên tắc chọn đừờng feasible successor 1"],[6873,"Đường feasible successor là đường dự phòng thay thế cho đường successor khi đường này bị sự cố 2"],[6874,"Reported Distance của một đường đến một đích nào đó là chi phí được thông báo từ router láng giềng"],[6875,"Chi phí này phải nhỏ hơn Feasible Distance của đường successor hiện tại 3"],[6876,"Nếu thoả điều kiện trên thì có nghĩa là không có vòng lặp đường đó sẽ được chọn làm feasible successor 4"],[6877,"Đường feasible successor có thể thay thế cho đường successor khi cần thiết 5"],[6878,"Nếu RD của mộ đường lớn hơn hoặc bằng FD của successor hiện tại đường đó không được chọn làm feasible successor 6"],[6879,"Router phải tính toán cấu trúc mạng bằng cách thu thập thông tin từ tất cả các láng giềng 7"],[6880,"Router gửi gói các yêu cầu đến tất cả các láng giềng để tìm thông tin về đường đi và chi phí của đường đó đến mạng đích mà router đang cần 8"],[6881,"Tất cả các láng giềng phải gửi gói đáp ứng để trả lời cho gói yêu cầu 9"],[6882,"Router ghi nhận dữ liệu mới nhận được vào bảng cấu trúc mạngcủa mình 10"],[6883,"Bây giờ DUAL đã có thể xác định đường successor mới và feasible successor mới nếu có dựa vào thông tin mới Hình 3.1.6.a"],[6884,"635 Cột Topology trong hình cho biết đường nào là đường chính hay còn gọi là successor, đưòng nào là đường dự phòng hay còn gọi là feasible successor"],[6885,"Tuy nhiên bạn cần lưu ý là không nhất thiết lúc nào cũng phải tìm được feasible successor Mạng EIGRP sẽ hoạt động theo các bước mô tả bên dưới để tiến hành hội tụ giữa các router"],[6886,"Hiện tại các router có các thông tin về đường đến Mạng A như sau\u201d Router C có một đường successor là đường qua Router B Router C có một đường f easible succ esor là đường qua Router B Router D có một đường successor là đường qua Router B Router D không có đường feasible successor Router E có một đường successor là đường qua router D Router E không có đường feasible successor Sau đây sẽ mô tả mỗi router thực hiện nguyên tắc chọn feasible successor như thế nào khi đường liên kết giữa router D và router B bị đứt Hình 3.1.6.b Trong router D (hình 3.1.6.B)"],[6887,"636 \u2022 Đường đi qua router B bị xoá khỏi bảng cấu trúc mạng \u2022 Đường này là đường successor"],[6888,"Router không xác định được feasible successor trước đó \u2022 Router D phải tính toán lại đường mới Trong Router C: Đường đến mạng A qua router D bị đứt Đường này bị xoá khỏi bảng Đường này là successor của router C Hình 3.1.6.c Trong router D \u2022 Router D không có feasible successor"],[6889,"Do đó nó không thể chuyển qua đường dự phòng được \u2022 Router D phải tính toán lại cấu trúc mạng"],[6890,"Con đường đến Mạng A được đặt vào trạng thái Active \u2022 Router D gửi gói yêu cầu cho tất cả các láng giềng kết nối với nó là router C và router R để yêu cầu gửi thông tin về mạng \u2022 Trước đó router C có đường qua router D \u2022 Trước đó router D không có đường qua router E Trong router E: \u2022 Đường đến Mạng A thông qua router D bị đứt \u2022 Đường này là đường successor của router E \u2022 Router E không có feasible successor"],[6891,"637 \u2022 Lưu ý rằng RD của đường thông qua Router C là 3 bằng với chi phí của đường successor qua router D Hình 3.1..6.d Trong router C \u2022 Router E gửi gói yêu câud cho Router C \u2022 Router C xoá đường qua Router khỏi bảng \u2022 Router C trả lời cho Router với thông tin về đường mới đến Mạng A Trong Router D \u2022 Trạng thái của đường đến Mạng A vẫn là Active vì công việc tính toán lại chưa hoàn tất \u2022 Router C trả lời cho Router D để xác nhận là đường đến mạng A đang hoạt động với chi phí là 5 \u2022 Router D vấn đangchờ đáp ứng từ router E Trong router E \u2022 Router E không có feasible successor đến Mạng A \u2022 Do đó, router E đánh dấu trạng thái con đường đến mạng A là Active \u2022 Router E phải tính toán lại cấu trúc mạng \u2022 Router E xoá đường đi qua Router D ra khỏi bảng \u2022 Router E gửi gói yêu cầu cho router C để yêu cầu thông tin về mạng \u2022 Trước đó, router E đã có thông tin về đường đi qua router C"],[6892,"Đường này có chi phí là 3 , bằng với chi phí của đường successor"],[6893,"638 Hình 3.1.6.e Trong router E (hình 3.1.6.e) \u2022 Router C trả lời lại thông tin về đường đến Mạng A có RD là 3 \u2022 Bây giờ router E có thể chọn đường qua router C làm successor mới với FD là 4 và RD là 3 \u2022 Trạng thái của đường đến Mạng A được đổi từ Active sang Pasive"],[6894,"Lưu ý trạng thái Passive là trạng thái mặc định khi router vẫn nhận được gói hello từ đường đó"],[6895,"Do đó trong ví dụ này chỉ cần đánh dấu trạng thái Active thôi Hình 3.1.6.f Trong router E (hình 3.1.6f) \u2022 Router E gửi đáp ứng cho Router D để cung cấp thông tin về mạng của router E"],[6896,"639 Trong router D \u2022 Router D nhận được gói hồi đáp từ router E với những thông tin về mạng của router E \u2022 Router D ghi nhận con đường đến Mạng A thông qua router E \u2022 Con đường này trở thành một đường successor nữa vì nó có chi phí bằng với đường thông qua router C và nó có RD nhỏ hơn FD của đường thông qua router Quá trình hội tụ xảy ra giữa mọi router EIGRP sử dụng thuật toán DUAL 3.2 Cấu hình EIGRP 3.2.1 Cấu hình EIGRP Trù thuật toán DUAL là phức tạp còn cấu hình EIGRP thì khá đơn giản tuỳ theo giao thức được định tuyến là IP, IPX hay Apple Talk mà câu lệnh cấu hình EIGRP sẽ khác nhau"],[6897,"Phần sau đây chỉ đề cập đếncấu hình EIGRP cho giao thức IP Hình 3.2.1 Sau đây là các bước cấu hình EIGRP cho ip 1"],[6898,"Sử dụng lệnh sau khởi động EIGRP và xác định con số của hệ tự quản Thông số autonomous system number xác định các router trong một hệ tự quản"],[6899,"Những router nào trong cùng một hệ thống mạng thì phải có con số này giống nhau"],[6900,"640 2"],[6901,"Khai báo những mạng nào của router mà bạn đang cấu hình thuộc về hệ tự quản Thông số network number là địa chỉ mạng của các cổng giao tiếp trên router thuộc về hệ thống mạng EIGRP"],[6902,"Router sẽ thực hiện 5.1 C¸c kh¸i niÖm vÒ Frame Relay: 5.1.1 Giíi thiÖu Frame Relay: Frame Relay lµ chuÈn cña ITU-T(International Telec«munication Union Telcommunication Stan®ardization Sector) vµ WASI (American NatÞonal Standards Institute)"],[6903,"Frame Relay lµ dÞch vô WAN chuyÓn m¹ch gãi theo h−íng kÕt nèi"],[6904,"Frame Relay ho¹t ®éng ë líp Liªn kÕt d÷ liÖu cña m« h×nh OSI"],[6905,"Frame Relay sö dông mét phÇn giao thøc HDLC lµm giao thøc LAPF (Link Access Procedure for Frame Relay)"],[6906,"Frame Relay thùc hiÖn truyÒn frame gi÷a thiÕt bÞ cña ng−êi dïng DTE vµ thiÕt bÞ DCE t¹i danh giíi cña m¹ng WAN"],[6907,"Ban ®Çu Frane Relay ®−îc thiÕt kÕ ®Ó cho phÐp thiÕt bÞ ISDN cã thÓ truy cËp vµo dÞch vô chuyÓn m¹ch gãi trªn kªnh B"],[6908,"Nh−ng b©y giê Frame Relay ®· lµ mét c«ng nghÖ hoµn toµn ®éc lËp"],[6909,"M¹ng Frame Relay cã thÓ thuéc së h÷u riªng cña ng−êi dïng nh−ng th«ng th−êng lµ ®−îc cung cÊp bëi c¸c c«ng ty dÞch vô viÔn th«ng"],[6910,"Frame Realay th−êng ®−îc sö dông ®Ó kÕt nèi c¸c m¹ng LAN"],[6911,"Mçi Router biªn giíi cña mét m¹ng LAN lµ mét DTE"],[6912,"Mét kÕt nèi nèi tiÕp, vÝ dô nh− E1/T1, sÏ kÕt nèi vµo Frame Relay switch gÇn nhÊt cña nhµ cung cÊp dÞch vô"],[6913,"Frame Relay switch chÝnh lµ thiÕt bÞ DCE"],[6914,""],[6915,"641"],[6916,"642 ThiÕt bÞ m¸y tÝnh kh«ng n»m trong mét m¹ng LAN còng cã thÓ göi d÷ liÖu qua m¹ng Frame Relay"],[6917,"ThiÕt bÞ m¸y tÝnh nµy sö dông thiÕt bÞ truy cËp Frame Relay (FRAD) lµm DTE"],[6918,"5.1.2 C¸c thuËt ng÷ cña Frame Relay: KÕt nèi gi÷a hai DTE qua m¹ng Frame Relay ®−îc gäi lµ kÕt nèi ¶o (VC \u2013 Virtual Circuit)"],[6919,"C¸c kÕt nèi ¶o chuyÓn m¹ch (SVC \u2013 Switched virtual Circuit) cã thÓ ®−îc thiÕt lËp tù ®éng b»ng c¸ch göi ®i c¸c th«ng ®iÖp b¸o hiÖu"],[6920,"Tuy nhiªn SVC kh«ng ®−îc sö dông phæ biÕn l¾m.KÕt nèi ¶o cè ®Þnh PVC (Permanent virtual circuit) ®−îc sö dông nhiÒu h¬n víi cÊu h×nh dÞnh tr−¬c cña nhµ cung cÊp"],[6921,"Trªn mçi Frame Relay switch cã l−u gi÷ s¬ ®å ¸nh x¹ gi÷a port vµo vµ port ra t−¬ng øng víi mçi VC"],[6922,"Do ®ã mçi kÕt nèi VC ®−îc thiÕt lËp tõ mét ®iÓm cuèi th«ng qua c¸c switch ®eens ®iÓm cuèi ®−îc x¸c ®Þnh duy nhÊt"],[6923,""],[6924,"643"],[6925,"644 Frame Relay ®−îc thiÕt kÕ ®Ó ho¹t ®éng trªn ®−êng truyÒn sè chÊt l−îng cao, Frame Realy kh«ng cã c¬ chÕ kh¾c phôc lçi"],[6926,"Nõu thiÕt bÞ nµo trªn ®−êng truyÒn ph¸t hiÖn frame bÞ lçi th× hñy bá frame ®ã mµ kh«ng cÇn th«ng b¸o"],[6927,"Mçi router hay FRAD kÕt nèi ¶o vµo m¹ng Frame Relay ®Òu cã thÓ cã nhiÒu kÕt nèi ¶o ®Õn nhiÒu ®iÓm cuèi kh¸c nhau"],[6928,"Mçi kÕt nèi ®Çu cuèi chØ cÇn cã mét cæng vËt lý vµ mét kÕt nèi vËt lý, trªn ®ã thiÕt lËp ®−îc nhiÒu kÕt nèi ¶o ®Õn nhiÒu ®iÓm ®Ých kh¸c nhau"],[6929,"Do ®ã m¹ng Frame Relay gi¶m ®−îc nhiÒu chi phÝ l¾p ®Æt v× kh«ng cÇn t¹o m¹ng h×nh l−íi víi nhiÒu ®−êng truyÒn vËt lý"],[6930,"H¬n n÷a chóng ta cßn"],[6931,"645 tiÕt kiÖm ®−îc tiÒn thuª bao v× dung l−îng cña ®−êng truyÒn vËt lý phô htuéc vµo b¨ng th«ng trung b×nh cña c¸c VC thay v× phô thuéc vµo chu cÇu tæng b¨ng th«ng tèi ®a"],[6932,"C¸c kÕt nèi ¶o VC trªn cïng mét ®−êng truyÒn vËt lý vÉn ®−îc ph©n biÖt víi nhau v× mçi VC cã mét chØ sè DLCI riªng"],[6933,"ChØ sè DLCI (D©t Link Connection Identifier) ®−îc ghi trong mçi frame d÷ liÖu truyÒn ®i"],[6934,"ChØ sèDLCI chØ co ý nghÜa néi bé, cã nghÜa lµ no chØ cã duy nhÊt ®èi víi kªnh vËt lý mµ nã thuéc vÒ mµ th«i"],[6935,"Do ®ã thiÕt bÞ ë ®Çu bªn kia cã thÓ sö dông mét chØ sè kh¸c ®Ó quy −íc cho cïng mét kÕt nèi ¶o VC"],[6936,"5.1.3 §ãng gãi Frame Relay: §ãng gãi Frame Relay thùc hiÖn theo ph©n líp nh− sau: \u2022 NhËn gãi d÷ liÖu tõ líp M¹ng, vÝ dô gãi IP hay IPX"],[6937,"\u2022 §ãng gãi thµng frame cña Frame Relay"],[6938,"\u2022 ChuyÓn frame xuèng líp VËt lý ®Ó truyÒn xuèng ®−êng truyÒn"],[6939,"Líp vËt lý th−ênglµ EIA/TIA-232, 449 hay 530, V.35, X.21"],[6940,"Frame cña Frame Relay sö dông mét phÇn ®Þnh d¹ng cña frame HDLC"],[6941,"Do®ã còng cã phÇn cê 01111110"],[6942,"PhÇn FCS (Frame Check Sequence) ®−îc sö dông ®Ó kÓim tra lçi cña frame.Gi¸ trÞ FCS®−îc tÝnh ra tr−íc khi truyÒn frame ®ivµ ®−îc ghi vµo phÇn FCS cña frame"],[6943,"ThiÕt bÞ nhËn frame còng tÝnh l¹i gi¸ trÞ FCS vµ so s¸nh víi gi¸ trÞ FCS ghi trong frame nhËn ®−îc"],[6944,"Nõu hai gi¸ trÞ gièng nhau thi frame ®−îc tiÕp tôc xö"],[6945,"646 lý"],[6946,"Nõu hai gi¸ trÞ kh¸c nhau cã nghÜ la frmae bÞ lçi, lËp tøc frame bÞ hñy bá vµ kh«ng hÒ th«ng b¸o cho thiÕt bÞ nguån"],[6947,"ViÖn kiÓm so¸t lçi ®−îc giao cho c¸c líp trªn cña m« h×nh OSI ®¶m tr¸ch"],[6948,"5.1.4 B¨ng th«ng vµ ®iÒu khiÓn luång trong Frame Relay: Tèc ®é ®−êng truyÒn nèi tiÕp trong m¹ng Frame Relay chÝnh lµ tèc ®é truy cËp hay tèc ®é port"],[6949,"Tèc ®é port th−êng n»m trong kho¶ng tõ 64 kb/gi©y ®Õn 4 Mb/gi©y"],[6950,"Mét sè nhµ cung cÊp dÞch vô cßn cung cÊp tèc ®é lªn ®Õn 45 Mb/gi©y"],[6951,"Tren mét ®−êng truyÒn vËt lý ho¹t ®éng ®ång thêi nhiÒu kÕt nèi ¶o PVC, mçi VC co mét l−îng b¨ng th«ng riªng nhÊt ®Þnh"],[6952,"B¨ng th«ng nµy chÝnh lµ b¨ng th«ng cam kÕt cña nhµ cung cÊp dÞch vô, gäi la CIR (Commited Information Rate)"],[6953,"Nhµ cung cÊp dÞch vô ®ång ý chÊp nhËn l−îng bÝt nµy trªn mét VC"],[6954,"Mçi CIR cã gi¸ trÞ nhá h¬n tèc ®ä port"],[6955,"Nh−ng tæng c¸c CIR trªn mät port l¹i lín h¬n tèc ®é port, th−êng lµ lín h¬n kho¶ng 2 hay 3 lÇn,v× c¸c kªnh ¶o ho¹t"],[6956,"647 ®éng víi dung l−îng kh¸c nhau t¹i mçi thíi ®iÓm vµ kh«ng ®ång thêi sö dông tèi ®a b¨ng th«ng cña m×nh"],[6957,"Khi truyÒn frame ,mçi bÝt ®−îc ph¸t ®i víi tèc ®é port"],[6958,"Do ®ã nÕu l−îng bÝt trung b×nh trªn VC ®· b»ng víi CIR th× sÏ ph¶i cã kho¶ng thêi gian nghØ gi÷a hai frame"],[6959,"Frame Relay switch còng chÊp nhËn frame ®−îc göi tõ DTE víi tèc ®é cao h¬n CIR"],[6960,"Nh− vËy mçi VC cã thÓ sö dông b¨ng th«ng theo nhu cÇulªn ®Õn møc tèi ®a lµ tèc ®é port"],[6961,"Mét sè nhµ cung cÊp cã thÓ quy −¬c møc ®é tèi ®a nµy thÊp h¬n tèc ®é port"],[6962,"Møc chªnh lÖch gi÷a CIR vµ møc tèi ®a gäi lµ ERI (Ecs Information Rate)"],[6963,"Kho¶ng thêi gian (chu kú) ®Ó tÝnh tèc ®é ®−îc gäi la Tc (Committed Time)"],[6964,"Sè l−îng bit trong mét chu kú ®−îc gäi la Bc (Committed Burst)"],[6965,"Sè l−îng bit chªnh lÖch gi÷a Bc vµ møc tèi ®a (lµ tèc ®é vËt lý cña ®−êng truyÒn) ®−îc gäi la Be (Ecs Burst)"],[6966,"MÆc dï switch vÉn chÊp nhËn c¸c frame ®−îc truyÒn víi tèc ®é v−ît qu¸ CIR,nh−ng mçi frame v−ît tiªu chuÈn nµy ®−îc switch ®¸nh dÊu b»ng c¸ch ®Æt bit DE cña frame (Discard Eligible) lªn 1"],[6967,"Switch co mét ®ång hå ®Õm bit t−¬ng øng víi mçi VC"],[6968,"Khi switch nhËn frame vao, nÕu frame nµy v−ît qu¸ sè l−îng Bc th× frame sÏ ®−î ®¸nh dÊu bit DE"],[6969,"Frame nhËn vµo sÏ bÞ hñy bá khi sè l−îng bit v−ît qu¸ Bc + Be"],[6970,"Cuèi mçi chu kú Tc switch sÏ khëi ®éng l¹i ®ång hå ®Õm bit"],[6971,"Frame sau khi ®−îc nhËn vµo switch sÏ ®−îc xÕp hµng ®îi chuyÓn ra"],[6972,"Tuy nhiªn nÕu sè l−îng fame qu¸ nhiÒu sÏ lµm trµn hµng ®îi, thêi gian trÔ sÏ t¨ng lªn"],[6973,"Mét sè giao thøc líp trªn cã yªu cÇu truyÒn l¹i khi kh«ng nhËn ®−îc d÷ liÖu sau mét thêi gian nhÊt ®Þnh"],[6974,"Nh−ng do thêi gian trÔ qu¸ lín, yªu cÇu truyÒn l¹i kh«ng thÓ thùc hiÖn ®−îc"],[6975,"Tr−êng hîp nµy sÏ lµm tôp gi¶m th«ng l−îng m¹ng nghiªm träng §Ó tr¸nh sù cè nµy, Frame Relay switch cã chÝnh s¸ch hñy bít frame trong hµng ®îi ®Ó gi÷ hµng ®îi kh«ng qu¸ dµi"],[6976,"Nh÷ng frame nµo cã bit DE sÏ ®−îc ®Æt lªn hñy bá tr−êc tiªn"],[6977,"Khi switch nhËn hµng ®îi cña nã ®ang t¨ng lªn th× nã sÏ cè g¾ng t×m c¸ch lµm gi¶m dßng truyÒn frame tõ DTE ®Õn nã"],[6978,"Switch thùc hiÖn ®Æt bit b¸o nghÏn"],[6979,"648 ECN (Explicit Congestion Notification) vµo phÇn ®Þa chØcña frame mµ switch sÏ truyÒn l¹i cho DTE"],[6980,"Bit FECN (Forward ECN) ®−î cµi ®Æt vµo mçi frame mµ siwtch sÏ göi ra ®−êng truyÒn ®ang bÞ nghÏn ®Ó th«ng b¸o nghÏn cho c¸c thiÕt bÞ kÕ tiÕp"],[6981,"Bit BECN (Back ECN) ®−îc cµi ®Æt trong mçi frame mµ switch sÏ göi ng−îc l¹i cho thiÕt bÞ tr−íc nã"],[6982,"DTE sÏ nhËn ®−îc c¸c frame cã bit ECN ®−îc cµi ®Æt trong ®ã vµ sau ®o sÏ gi¶m dßng truyÒn frame lai cho ®Õn khi kh«ng cßn nghÏn m¹ch n÷a"],[6983,"NÕu nghÏn m¹ch x¶y ra trªn ®−êng kÕt nèi gi÷a c¸c switch th× DTE bªn d−íi còng cã thÓ nhËn ®−îc th«ng b¸o nghÏn m¹ch mÆc dï nã kh«ng ph¶i lµ thiÕt bÞ g©y ra nghÏn m¹ch"],[6984,"C¸c bit DEM, FECN, BECN lµ nh÷ng bit n»m trong phÇn ®Þa chØ cña frame LAPP"],[6985,""],[6986,"649 5.1.5 ¸nh x¹ ®Þa chØ vµ m« h×nh m¹ng Frame Realy: Khi chóng ta cÇn liªn kÕt nhiÒu m¹ng víi nhau th× chóng ta cÇn quan t©m ®Õn m« h×nh kÕt nèi gi÷a c¸c m¹ng"],[6987,"Nõu chóng ta chØ cÇn kÕt nèi hai m¹ng víi nhau b»ng kÕt nèi ®iÓm-nèi-®iÓm th× lîi thÕ chi phÝ thÊp cña Frame Relay kh«ng ®¸ng kÓ"],[6988,"Frame Relay sÏ rÊt cã lîi vÒ mÆt chi phÝ nÕu chóng ta liªn kÕt nhiÒu m¹ng víi nhau"],[6989,"WAN th−êng ®−îc liªn kÕt theo cÊu tróc h×nh sao"],[6990,"DÞch vô chÝnh ®−îc ®Æt ¬ mét m¹ng trung t©m vµ mçi m¹ng ë xa cÇn truy cËp dÞch vô th× kÕt nèi vµo m¹ng trung tam"],[6991,"Víi c¸ch kÕt nèi h×nh sao nh− vËy cho ®−êng thue riªng, chi phÝ sÏ ®−îc gi¶m tèi ®a"],[6992,"Nõu chóng ta kÕt nèi m¹ng h×nh sao cho Frame Relay, mçi m¹ng ë xa sÏ cã mét kÕt nèi v¸o ®¸m m©y Frame Relay víi mét kÕt nèi VC"],[6993,"M¹ng trung t©m còng"],[6994,"650 cã mét kÕt nèi vµo ®¸m m©y Frame Relay nh−ng trªn ®ã cã nhiÒu VC kÕt nèi ®Õn c¸c m¹ng xa"],[6995,"TiÒn c−íc cña m¹ng Frame Relay kh«ng tÝnh theo kho¶ng c¸ch kÐo c¸p nªn vÞ trÝ ®Þa lý cña m¹ng trung t©m kh«ng nhÊt thiÕt ph¶i n»m ë gi÷a"],[6996,"Chóng ta nªn chän m« h×nh m¹ng h×nh l−íi nÕu c¸c ®iÓm truy cËp dÞch vô bÞ ph©n t¸n vÒ mÆt ®Þa lý vµ đường truy cập cã yªu cầu cao về độ tin cậy"],[6997,"Với mạng lưới, mỗi mạng lưới phải có đường kết nối đến tất cả các mạng còn lại"],[6998,"Tuy nhiên, không giống như đường truyền thuê riêng, chúng ta có thể triển khai mạng hình lưới trong Frame Relay mà không cần phải tăng thêm nhiều VC trên một đường truyền vật lý là có thể nâng cấp mạng hình sao thành mạng hình lưới"],[6999,"Khi ghép nhiều kênh VC vào một đường truyền, chúng ta cungc tận dụng băng thông đường truyền tốt hơn so với việc chỉ cấu hình một VC"],[7000,"Đối với hệ thống mạng quy mô lớn rất ít khi chúng ta sử dụng mạng hình lưới vì số lượng kết nối cần cho mạng hình lưới quá lớn, tăng theo tỉ lệ bình phương của số vị trí cần kết nối"],[7001,"Các thiết bị có giới hạn dưới 1000VC trên một kết nối"],[7002,"Nhưng trên thực tế thì giới hạn này còn thấp h¬n n÷a"],[7003,"Do ®ã ®èi víi hÖ thèng m¹ng lín chóng ta nªn sö dông m¹ng h×nh løi b¸n phÇn"],[7004,"Víi m¹ng h×nh l−íi b¸n phÇn chóng ta vÉn cÇn nhiÒu kÕt nèi h¬n so víi m¹ng h×nh sao còng kh«ng nhiÒu b»ng b»ng m¹ng h×nh l−íi toµn phÇn"],[7005,"ViÖc kÕt nèi m¹ng h×nh l−íi b¸n phÇn nh− thÕ nµo tïy thuéc vµo nhu cÇu cña dßng ch¶y d÷ liÖu"],[7006,"Trong bÊt kú cÊu tróc Frame Relay nµo, khi chung ta sö dông mét cæng ®Ó kÕt nèi nhiÒu m¹ng kh¸c nhau th× cã thÓ gÆp ph¶i sù cè kh«ng ®Õn ®−îc m¹ng ®Ých"],[7007,"Sù cè nµy do ®Æc tÝnh ®a truy cËp kh«ng qu¶ng b¸(NBMA- nonbroadcast"],[7008,"651 multiaccess) cña Frame Relay g©y ra"],[7009,"Nh− chóng ta ®· häc ®−îc ë gi¸o trinh tr−íc, c¸c giao thøc ®Þnh tuyÕn ®éng sö dông kü thuËt Split horizon ®Ó tr¸nh g©y ra vßng lÆp"],[7010,"Split horizon kh«ng cho phÕp truyÒn ra mét cæng nh÷ng th«ng tin ®Þnh tuyÕn võa nhËn vµo tõ cæng ®ã"],[7011,"Khi co nhiÒu PVC trªn cïng mét cæng vËt lý thi Split horizon l¹i g©y ra mét r¾c rèi vÒ mÆt cËp nhËt ®Þnh tuyÕn"],[7012,"Chóng ta sÏ bµn vÒ vÉn ®Ò nµy kü h¬n trong phÇn sau cña tr−¬ng"],[7013,"Frame Relay ë líp Liªn kÕt d÷ liÖu víi ®Þa chØ líp M¹ng, vÝ dô ®Þa chØ IP"],[7014,"Router lu«n cÇn biÕt t−¬ng øng víi ®Þa chØ m¹ng ®Ých lµ cæng nµo"],[7015,"®èi víi ®−êng kÕt nèi trùc tiÕp th× ®Çu kia chØ kÕt nèi ®Õn mét router duy nhÊt"],[7016,"Nh−ng franme ®i tõ DTE ®Òn Frame Relay swich vµ sau ®ã ®−îc ¸nh x¹ víi mét ®Þa chØ m¹ng cña router ®Çu xa"],[7017,"Nh÷ng th«ng tin nµy cã thÓ ss−îc cÊu h×nh b»ng cÊu h×nh b»ng lÖnh Map hoÆc cÊu h×nh tù ®éng b»ng c¸ch dïng Inverse ARP"],[7018,"5.1.6"],[7019,"Frame Relay LMI: Frame Relay ®−îc thiÕt kÕ ®Ó truyÒn d÷ liÖu chuyÓn m¹ch gãi víi thêi gian trÔ tèi thiÓu"],[7020,"BÊt kú yÕu tè nµo gãp phÇn vµo thêi gian trÔ ®Òu ®−îc bá qua"],[7021,"Nh−ng khi c¸c h·ng muèn trÓn khai Frame Relay nh− lµ mét c«ng nghÖ ®éc lËp chø kh«ng cßn lµ mét thµnh phÇn cña ISDN n÷a th× hä quyÕt ®Þnh r»ng DTE cÇn ®−îc cung cÊp th«ng tin ®éng vÒ tr¹ng th¸i ho¹t ®éng cña m¹ng"],[7022,"C¬ chÕ nµy kh«ng cã trong thiÕt kÕ ban ®Çu cña Frame Relay vµ LMI (Local M©ngemaent Interface) ®· ®−îc thªm vµo sau nµy ®Ó truyÒn th«ng tin vÒ tr¹ng th¸i ho¹t ®éng m¹ng"],[7023,"PhÇn DLCI 10 bit cho phÐp x¸c ®Þnh VC tõ 0 ®Õn 1023.Trong ®ã cã dµnh riªng l¹i mét sè chØ sè lµm giíi h¹n cña VC gi¶m xuèng.C¸c th«ng ®iÖp LMI ®−îc trao ®æi gi÷a DTE vµ DCE vµ sö dông nh÷ng chØ sè DLCI dµnh riªng nµy Chỉ số VC Loại VC 0 LMI (ÁNI, ITU) 1..15 Để dành cho việc sử dụng ở tương lai 992..1007 CLLM"],[7024,"652 1008..1022 Để dành cho việc sử dụng ở tương lai (ÁNI, ITU) 1019..1020 Multicasting (Cisco) 1023 LMI (Cisco) LMI baogåm nh÷ng th«ng tin sau: \u2022 C¬ chÕ keepalive ®Ó kiÓm tra mét vßng VC cßn ho¹t ®éng"],[7025,"\u2022 C¬ chÕ multicast"],[7026,"\u2022 §iÒu khiÓn luång"],[7027,"\u2022 Cã DLCI nµo ®−îc g¸n thµnh gi¸ trÞ toµn côc hay kh«ng"],[7028,"\u2022 Tr¹ng th¸i VC"],[7029,"Cã nhiÒu lo¹i LMI kh¸c nhau vµ c¸c lo¹i nµy kh«ng t−¬ng thÝch víi nhau"],[7030,"Do ®ã chóng ta cÇn cÊu h×nh lo¹i LMI tªn router phï hîp víi lo¹i LMI mµ nhµ cung cÊp dÞch vô ®ang sö dông"],[7031,"Sau ®ay lµ 3 lo¹i lMI mµ Cisco router cã hç trî: \u2022 Cisco - LMI gèc"],[7032,"\u2022 Ansi \u2013 theo chuÈn ANSI T1.617 Phô ch−¬ng D"],[7033,"\u2022 Q933a \u2013 theo chuÈn ITU Q933 phô ch−¬ng A"],[7034,"Th«ng ®iÖp LMI ®−îc lång trong frame LAPF.Tong ®ã cã thªm 4 phÇn m»n trong phÇn Header cña frame ®Ó cã thÓ t−¬ng thÝch víi frame LAPD sö dông trong ISDN, trong ®ã phÇn thø 4 cho biÕt lo¹i tr«ng ®iÖp LMI"],[7035,"Theo sau phÇn Header lµ mét hoÆc nhiÒu th«ng tin kh¸c nhau, bao gåm: \u2022 1 byte chøa chØ sè danh ®Þnh cña th«ng tin"],[7036,"\u2022 PhÇn cho biÕt chiÒu dµi cña phÇn th«ng tin t−¬ng øng"],[7037,"\u2022 Mét hoÆc nhiÒu byte chø th«ng tin thùc sù vÒ tr¹ng th¸i cña mét DLCI"],[7038,"Th«ng ®iÖp tr¹ng th¸i gióp kiÓm tra kÕt nèi logic vµ vËt lý"],[7039,"Nh÷ng th«ng tin nµy rÊt quan träng trong m«i tr−êng ®Þnh tuyÕn v× c¸c giao thøc ®Þnh tuyÕn quyÕt ®Þnh dùa trªn nh÷ng th«ng tin vÒ tr¹ng th¸i ®−êng kÕt nèi"],[7040,""],[7041,"653 5.1.7 Ho¹t ®éng cña Inerse ARP vµ LMI: Th«ng ®iÖp tr¹ng th¸i LMI kÕt hîp víi th«ng ®iÖp Inverse ARP cho phÐp router liªn kÕt ®−îc ®Þa chØ líp m¹ng vµ ®Þa chØ líp Liªn kÕt d÷ liÖu"],[7042,""],[7043,"654 Khi router trong m¹ng Frame Relay b¾t ®Çu khëi ®éng, nã sÏ göi c¸c th«ng ®iÖp LMI ®Ó hái vÒ tr¹ng th¸i cña hÖ thèng m¹ng"],[7044,"HÖ thèng m¹ng sÏ tr¶ lêi l¹i b»ng th«ng ®iÖp LMI,trong ®ã cã c¸c th«ng tin chi tiÕt vÒ mäi VC ®−îc cÊu h×nh trªn mét ®−êng kÕt nèi"],[7045,"Theo chu kú router lÆp l¹i viÖc hái th«ng tin tr¹ng th¸i cña m¹ng nh−ng nh÷ng lÇn sau nµy nß chØ nhËn ®−îc tr¶ lêi vÒ nh÷ng thay ®æi tr¹ng th¸i míi x¶y ra"],[7046,"Sau mét sè lÇn nhÊt ®Þnh nh− vËy m¹ng l¹i göi mét lÇn ®Çy ®ñ c¸c th«ng tin vÒ tr¹ng thaÝ m¹ng"],[7047,"Nªó router cÇn ¸nh x¹ gi÷a VC vµ ®Þa chØ líp m¹ng th× nã sÏ göi th«ng tin ®iÖp Inverse ARP ra mçi VC"],[7048,"Th«ng ®iÖp Inverse ARP tr¶ lêi sÏ cho phÐp router co thÓ ¸nh x¹ gi÷a ®Þa chØ m¹ng va DLCI t−¬ng øng"],[7049,"Nõu trong m¹ng cã ch¹y nhiÒu giao thøc líp M¹ng kh¸c nhau th× th«ng ®iÖp Inverse ARP ®−îc göi ®i nhiÒu lÇn t−¬ng øng víi mçi giao thøc líp M¹ng kh¸c nhau"],[7050,""],[7051,"655 5.2 CÊu h×nh Frame Relay: 5.2.1"],[7052,"CÊu h×nh Frame Relay c¬ b¶n PhÇn nµy sÏ gi¶i thich cÊu h×nh c¬ b¶n cña mét Frame Relay PVC, Frame Relay ®ùoc cÊu h×nh trªn cæng serial"],[7053,"Giao thøc ®ãng gãi mÆc ®Þnh trªn cæng nµy lµ HDLC"],[7054,"§Ó chuûªn sang kiÓu ®ãng gãi Frame Relay chung ta dïng lÖnh \u201cencapsulation Frame - Relay {cisco/ietf}.\u201d Cisco: sö dông kiÓu ®ãng gãi ®éc quyÒn cña cisco cho Frame Relay"],[7055,"Chóng ta sö dông kiÓu ®ãng gãi nµy nÕu thiÕt bÞ ®Çu bªn kia còng la mét cisco router"],[7056,"Cã nhiÒu thiÕt bÞ kh«ng ph¶i cña cisco còng cã hç trî kiÓu ®ãng gãi nµy"],[7057,"cisco lµ trän lùa m¹c ®Þnh cña c©u lÖnh nµy, do ®o b¹n chØ cÇn nhÊp lÖnh nµy \u201cencapsulation Frame - Relay {cisco/ietf}.\u201dlµ ®ñ"],[7058,"Ietf: kiÓu ®ãng gãi phï hîp víi chuÈn RFC 1490 cña IETF"],[7059,"Chóng ta nªn chon kiÓu ®ãng gãi nµy nÕu thiÕt bÞ ë ®Çu bªn kia kÕt nèi kh«ng ph¶i la Cisco router"],[7060,""],[7061,"656 KiÓu ®ãng gãi ®éc quyÒn cña Cisco cho Frame - Relay sö dông 2 byte phÇn header, trong ®ã 2byte x¸c ®Þnh chØ sè DLCI vµ 2byte x¸c ®Þnh lo¹i gãi d÷ kiÖu"],[7062,"Nh− ®· häc ë gi¸o tr×nh tr−íc: chóng ta dïng lÖnh ip address ®Ó khai b¸o ®Þa chØ IP cho cæng Serial"],[7063,"LÖnh Bandwidth ®Ó cµi ®Æt b¨ng th«ng cho cæng Serial, b¨ng th«ng nµy tÝnh theo ®¬n vÞ (kb/gi©y)"],[7064,"chóng ta sö dông lÖnh nµy ®Ó cµi ®Æt b¨ng th«ng cè ®Þnh cho c¸c giao thøc ®Þnh tuyÕn"],[7065,"C¸c giao thøc ®Þnh tuyÕn nh− IGRP, EIGRP vµ OFPS sÏ sö dông gi¸ trÞ b¨ng th«ng trong c©u lÖnh nµy ®Ó tinh toan ®−êng ®i"],[7066,"KÕt nèi LMI ®−îc thiÕt lËp vµ cÊu h×nh bëi lÖnh Frame \u2013 Relay Lmi- type{ansi/cisco/q933a}"],[7067,"chóng ta chØ sö dông lÖnh nµy nÕu phiªn b¶n Cisco IOS phiªn b¶n 11.2 trë vÒ sau, lo¹i LMI mÆc ®Þnh lµ Cisco vµ ®−îc cµi dÆt trªn cæng Serial"],[7068,"Chóng ta cã thÓ xem th«ng tin vÒ lo¹i LMI b»ng lÖnh show interfaces"],[7069,"C¸c b−íc cÊu h×nh trªn kh«ng phô thuéc vµo giao thøc líp m¹ng nµo ®ang ch¹y trªn m¹ng"],[7070,"5.2.2"],[7071,"CÊu h×nh s¬ ®å ¸nh x¹ cè ®inh cho Frame � Relay: Mçi chØ sè cña DLCI néi bé ph¶i ®−îc ¸nh x¹ cè ®Þnh ®Õn mét ®Þa chØ líp m¹ng cña router ®Çu xa khi router ®Çu xa kh«ng cã hç trî Invªrse ARP"],[7072,"T−¬ng tù, khi l−u l−îng qu¶ng b¸ vµ multicast trªn PVC bÞ kiÓn sãat th× chóng ta còng ph¶i cÊu h×nh s¬ ®ß ¸nh x¹ cè ®Þnh cho Frame \u2013 Relay b»ng lÖnh: Frame \u2013 Relay map protocol \u2013 address dlci {broadcast}"],[7073,""],[7074,"657 Broadcast: cho phÐp l−u l−îng qu¶ng b¸ vµo multicast trªn VC , cho phÐp sö dông giao thøc ®Þnh tuyÕn ®éng trªn VC"],[7075,"Tham sè nµy kh«ng b¾t buéc ph¶i cè khi khai b¸o lÖnh"],[7076,"5.2.3"],[7077,"Sù cè kh«ng ®Õn ®−îc m¹ng ®Ých do qu¸ tr×nh cËp nhËt th«ng tin ®Þnh tuyÕn g©y ra trong m¹ng ®a truy cËp kh«ng qu¶ng b¸ NBMA (Non -broadcast multi - access)"],[7078,"MÆc ®Þnh, m¹ng Frame \u2013 Relay lµ m«i tr−êng ®a truy cËp kh«ng qu¶ng b¸ NBMA"],[7079,"M«i tr−¬ng NBMA còng ®−îc xem t−¬ng tù nh− c¸c m«i tr−êng ®a truy cËp kh¸c , vÝ dô nh− Ethernet"],[7080,"TÊt c¶ c¸c router kÕt nèi vµo mét Ethernet ®Òu n¨m trong cïng m¹ng"],[7081,"Nh−ng ®Ó gi¶m chi phÝ phÇn cøng , m¹ng NBMA l¹i ®−îc x©y dùng thieo cÊu tróc h×nh sao, do ®o kh¶ n¨ng ®a truy cËp kh«ng b»ng Enthernet"],[7082,"Cêu tróc Frame \u2013 Relay NBMA cã thÓ g©y ra 2 vÊn ®Ò sau: \u2022 Sù cè kh«ng ®Õn ®−îc m¹ng ®Ých do qu¸ tr×nh cËp nhËt th«ng tin ®Þnh tuyÕn g©y ra"],[7083,"\u2022 Ph¶i lËp l¹i c¸c m¹ng qu¶ng b¸ trªn mçi PVC khi trªn mét cæng vËt lý cã nhiÒu PVC"],[7084,"C¸c giao thøc ®Þnh tuyÕn ®éng sö dông kü thuËt Split-horizon ®Ó ng¨n chÆn vßng lÆp x¶y ra"],[7085,"Khi ®ã nh÷ng th«ng tin ®Þnh tuyÕn võa ®−îc nhËn vµo tõ mét cæng cña router sÏ kh«ng ®−îc phep ph¸t ng−îc ra cæng ®ã"],[7086,"B©y giê chóng ta sÐt mét vÝ dô nh− hÝnh 5.2.3a"],[7087,"Nõu router D göi mét th«ng tin qu¶n b¸ ®Õn cho router A, trong ®ã cã chøa th«ng tin cËp nhËt ®Þnh tuyÕn"],[7088,"Router A la ruoter trung t©m nªn cã nhiÒu kÕt nèi PVC trªn mét cæng vËt lý"],[7089,"Nh−ng router A kh«ng thÓ ph¸t ng−îc trë ra"],[7090,"658 nh÷ng th«ng tin cËp nhËt mµ nã võa nhËn ®−îc tõ router D"],[7091,"kÕt qu¶ lµ router B vµ C kh«ng nhËn ®−îc nh÷ng th«ng tin ®ã"],[7092,"nh− vËy router B,C kh«ng thÓ göi gãi d÷ liÖu ®ªn c¸c m¹ng router D"],[7093,"do ®ã router Bvµ C kh«ng cã chøc n¨ng Split-horizon th× c¸c th«ng tin cËp nhËt ®Þnh tuyÕn míi cã thÓ ph¸t nh−îc trë l¹i trªn cæng mµ chóng võa nhËn vµo"],[7094,"Split-horizon sÏ khong g©y ra r¸c rèi nÕu chóng ta chØ cã mét PVC trªn mét cæng vËt lý, ®ã chÝnh lµ kÕt nèi Frame Relay §iÓm- nèi - ®iÓm"],[7095,"Mét router cã thÓ cã nhiÒu kÕt nèi PVC trªn mét cæng vËt lý vµ mçi PVC kÕt nèi ®Õn mét router riªng"],[7096,"khi ®ã router phØa lÆp c¸c gãi d÷ liÖu qu¶ng b¸ trªn mçi PVC , vÝ dô nh− c¸c gãi cËp nhËt th«ng tin ®Þnh tuyÕn ®Ó ®¶m b¶o mçi router ®Çu bªn kia ®Òu nhËn ®−îc ®Çy ®ñ th«ng tin"],[7097,"Nh−ng viÖc lÆp l¹i c¸c th«ng tin qu¶ng b¸ nµy l¹i chiÕm nhiÒu b¨ng th«ng ®−êng truyÒn vµ lµm cho c¸c l−u l−îng kh¸c cña ng−êi dïng bÞ chËm l¹i"],[7098,""],[7099,"659 Nh− v¹y chóng ta thÊy r»ng, ®Ó gi¶i quyÕt sù cè Split-horizon g©y ra th× tèt h¬n lµ nªn t¾t Split-horizon ®i"],[7100,"nh−ng kh«ng ph¶i giao thøc líp m¹ng nµo còng cho phÐp chung ta t¾t chøc n¨ng Split-horizon vµ viÖc t¾t chøc n¨ng Split-horizon còng ®ång nghÜa víi kh¶ n¨ng x¶y ra lÆp vßng trong m¹ng xÏ cao h¬n"],[7101,"Cßn mét c¸ch kh¸c ®Ó gi¶i quyÕt vÊn ®Ò Split-horizon lµ sö dông cÊu tróc l−íi nèi ®ñ"],[7102,"Nh−ng cÊu tróch nµy l¹i lµm t¨ng chi phÝ vµ cÇn nhiÒu kÕt nèi h¬n"],[7103,"Cuèi cïng, gi¶i ph¸p mµ chung t«i ®Ò nghÞ lµ gi¶i ph¸p sö dông Subinterface ®−îc tr×nh bµy trong phÇn kÕ tiÕp"],[7104,"5.2.4"],[7105,"Subinterface trong Frame Relay: Theo phÇn trªn th× khi mét cæng vËt lý cã nhiÒu PVC kÕt nèi ®Õn c¸c router ®Çu xa sÏ x¶y ra sù cè Split-horizon.Trong m«i tr−êng ®Þnh truyÕn Split-horizon, c¸c th«ng tin cËp nhËp ®Þnh tuyÕn ®−îc nhËn vµo tõ cæng nµo th× kh«ng ®−îc ph¸t ng−îc ra cæng ®ã"],[7106,"B©y giê chóng ta chia mét cæng vËt lý thµnh nhiÒu subinterface poin-to-point"],[7107,"Mçi mét subinterface poin-topint thiÕt lËp mét PVC ®Õn mét cæng vËt lý hay mét subinterface kh¸c trªn router ®Çu bªn kia"],[7108,"Nh− vËy, mçi cÆp router ®iÓm-nèi-®iÓm nµy n»m trong cïng mét subnet vµ mçi cæng subinterface poin-to- point cã mét DLCI riªng"],[7109,"Mçi mét subinterface poin-topint ho¹t ®éng nh− mét cæng riªng biÖt, do ®ã Split-horizon kh«ngcßn lµ vÊn ®Ò r¾c rèi n÷a"],[7110,"D¹ng subinterface poin-topint ®−îc øng dông cho cÊu tróc Frame Relay h×nh sao"],[7111,"Cæng subinterface Frame Relay cßn cã thÓ cÊu h×nh lµm cæng ®a ®iÓm (Multipoint)"],[7112,"Mét subinterface multipoint thiÕt lËp nhiÒu kÕt nèi PVC ®Õn nhiÒu router kh¸c nhau"],[7113,"TÊt c¶ c¸c router kÕt nèi dÒu n»m trong cïng mét subnet"],[7114,"Do ®ã chóng ta tiÕt kiÖm ®−îc nhiÒu ®Þa chØ m¹ng vµ ®iÒu nµy hÕt søc cã ý nghÜa nÕu trong tr−êng hîp chóng ta kh«ng sö dông VLSM (Variable Length Subnet Masking)"],[7115,"Tuy nhiªn, subinterface multipoint l¹i kh«ng gi¶i quyÕt ®−îc vÊn ®Ò Split-horizon"],[7116,"Chóng ta øng dông subinterface multipoint cho m¹ng Frame Relay h×nh l−íi nèi ®ñ hoÆc nèi b¸n phÇn"],[7117,"LÖnh encapsulation frame-relay ®−îc sö dông ®Ó cÊu h×nh cho cæng vËt lý"],[7118,"Cßn tÊt c¶ c¸c th«ng tin cÊu h×nh kh¸c cña cæng, vÝ dô nh− ®Þa chØ líp M¹ng, DLCI, chóng ta sÏ cÊu h×nh cho mçi subinterface"],[7119,"PhÇn kÕ tiÕp sÏ tr×nh bÇy cô thÓ cÊu h×nh subinterface cho Frame Relay"],[7120,"5.2.5 CÊu h×nh subinterface cho Frame Relay:"],[7121,"660 Nhµ cung cÊp cã tr¸ch nhiÖm cÊp sè DLCI"],[7122,"ChØ sè DLCI th−êng n»m trong kho¶ng tõ 16 ®Õn 992 vµ cã gi¸ trÞ côc bé.Sè l−îng tèi ®a cña chØ sè DLCI cßn phô thuéc vµo lo¹i LMI ®ang sö ®−îc dông"],[7123,"ChØ sè DLCI còng cã thÓ cã gi¸ trÞ toµn cÇu nh−ng chóng ta kh«ng bµn ®Õn vÊn ®Ò nµy trong ph¹m vi cña gi¸o tr×nh nµy"],[7124,"Chóng ta xÐt vÝ dô nh− h×nh 5.2.5"],[7125,"Router A cã hai subinterface poin-to- point: cæng s0/0.120 kÕt nãi ®Õn router C"],[7126,"Mçi subinterface n»m trong mét subnet riªng"],[7127,"Sau ®©y lµ c¸c b−íc thùc hiÖn ®Ó cÊu h×nh subinterface trªn mét cæng vËt lý: \u2022 CÊu h×nh ®ãng gãi Frame Relay cho cæng vËt lý b»ng lÖnh encapsulation frame-relay"],[7128,"\u2022 §Þnh nghÜa PVC b»ng c¸ch t¹o subinterface"],[7129,"§Ó t¹o subinterface chóng ta sö dông lÖnh sau: Router (config-if) #interface Serialnumber.subinterface-number [multipoint | piont-to-point]"],[7130,"661 Th«ng th−êng chóng ta lÊy chØ sè DLCI g¸n cho chØ sè cña subinteface (subinteface-number) ®Ó dÔ nhËn biÕt khi kiÓm tra cÊu h×nh"],[7131,"K«ng cã chÕ ®é mÆc ®Þnh cho subinteface,do ®ã chóng ta b¾t buéc ph¶i khai b¸o tham sè multipoint hay piont-to-point"],[7132,"Nõu subinteface ®−îc cÊu h×nh poin-to-point,sau ®ã chóng ta ph¶i cÊu h×nh DLCI cho cæng ®ã ®Ó ph©n biÖt víi cæng vËt lý"],[7133,"§èi víi subinteface ®−îc cÊu h×nh multipiont vµ cã hç trî Inverse ARP th× kh«ng cÇn khai b¸o DLCI vµ cÊu h×nh s¬ ®å ¸nh x¹ ®Þa chØ \u2013 DLCI cè ®Þnh"],[7134,"5.2.6 KiÓn tra cÊu h×nh Frame Relay: LÖnh show interfaces sÏ cung cÊp c¸c th«ng tin vÒ cÊu h×nh ®ãng gãi, tr¹ng th¸i Líp 1 vµ Líp 2"],[7135,"Ngoµi ra , lÖnh nµy cßn hiÓn thÞ c¸c th«ng tin sau: \u2022 Lo¹i LMI"],[7136,"\u2022 LMI DLCI"],[7137,"\u2022 Lo¹i Frame Relay DTE hay DCE"],[7138,"Th«ng th−êng th× router ®−îc xem lµ thiÕt bÞ DTE"],[7139,"Tuy nhiªn, chóng ta cã thÓ sö dông mét Cisco router ®Ó cÊu h×nh lµm Frame Relay switch"],[7140,"Khi ®ã router nµy trë thµng thiÕt bÞ DCE"],[7141,"Chóng ta sö dông lÖnh show frame-relay lmi ®Ó xem tr¹ng th¸i cña c¸c ho¹t ®éng LMI"],[7142,"VÝ dô: lÖnh nµy sÏ cho biÕt sè l−îng c¸c gãi LMI ®−îc trao ®æi gi÷a router vµ Frame Relay switch"],[7143,""],[7144,"662 LÖnh show frame-relay pvc [interface interface] [dlci] hiÓn thÞ tr¹ng th¸i cña mçi PVC t−¬ng øng ®· ®−îc cÊu h×nh vµ th«ng tin vÒ c¸c l−u l−îng trªn PVC ®ã"],[7145,"Mét PVC cã thÓ ë tr¹ng th¸i ho¹t ®éng (active), kh«ng ho¹t ®éng (inactive) hay ®· bÞ xãa (deleted)"],[7146,"B»ng lÖnh nµy chóng ta cßn cã thÓ xem ®−îc sè l−îng c¸c gãi BECN vµ FECN ®−îc nhËn vµo bëi router"],[7147,"LÖnh show frame-relay pvc ®−îc sö dông ®Ó xem tr¹ng th¸i cña tÊt c¶ c¸c PVC ®· ®−îc cÊu h×nh trªn router"],[7148,"Nõu chógn ta khai b¸o thªm chØ sè cña mét"],[7149,"663 PVC th× lÖnh sÏ hiÓn thÞ th«ng tin cña mét PVC ®ã"],[7150,"Trong vÝ dô 5.2.6.c lµ kÕt qu¶ hiÓn thÞ tr¹ng th¸i cña PVC 100"],[7151,"Chóng ta sö dông lÖnh show frame-relay map ®Ó xem s¬ ®å ¸nh x¹ hiÖn t¹i vµ th«ng itn vÒ c¸c kÕt nèi"],[7152,"VÝ dô nh− h×nh 5.2.6.d lµ kÕt qu¶ hiÓn thÞ cña lÖnh show frame-relay map: \u2022 10.140.1.1 lµ ®Þa chØ IP cña router ®Çu xa"],[7153,"§Þa chØ nµy ®−î häc tù ®éng th«ng qua qu¸ tr×nh Inverse ARP"],[7154,"\u2022 100 lµ gi¸ trÞ cña DLCI tÝnh theo sè thËp ph©n"],[7155,"\u2022 0x64 lµ gi¸ trÞ hÏ cña DLCI, 0x64 = 100"],[7156,"\u2022 0x1840 lµ gi¸ trÞ cña DLCI ®−îc thÓ hiÖn trªn ®−êng truyÒn do c¸c bit ®−îc ®Æt trong ®Þa chØ cña frame (Frame Relay)"],[7157,""],[7158,"664 \u2022 Broadcast/multicast ®−îc cho phÐp trªn PVC"],[7159,"\u2022 Tr¹ng th¸i PVC lµ ®ang ho¹t ®éng"],[7160,"§Ó xãa s¬ ®å ¸nh x¹ Frame Relay ®−îc t¹o ra tù ®éng do qu¸ tr×nh ARP,chóng ta sö dông lÖnh clear frame-relay-inarp"],[7161,"Ngay sau ®ã chung s ta dïng l¹i lÖnh show frame-relay th× sÏ kh«ng thÊy g× n÷a"],[7162,"Sau mét kho¶ng thêi gian nhÊt ®Þnh, qu¸ tr×nh ARP sÏ cËp nhËp l¹i b¶ng nµy mét c¸ch tù ®éng"],[7163,"5.2.7 X¸c ®Þnh sù cè trong cÊu h×nh Frame Relay: Chóng ta sö dông lÖnh debug frame-relay lmi ®Ó x¸c ®Þnh router nµo va Frame Relay switch nµo göi nhËn c¸c gãi tin mét c¸ch b×nh th−êng"],[7164,"\u201cOut\u201d lµ nh÷ng th«ng ®iÖp LMI ®−îc göi ®i bëi router, \u201cin\u201d lµ nh÷ng th«ng ®iÖp LMI nhËn ®−îc tõ Frame Relay switch"],[7165,"Th«ng ®iÖp tr¹ng th¸i LMI ®Çy ®ñ cã \u201ctype 0\u201d, \u201ctype 1\u201d lµ mét phiªn giao dÞch trao ®æi LMI"],[7166,"Sau ®©y lµ ý nghÜa cña c¸c th«ng sè tr¹ng th¸i: \u2022 0x0: ®· nhËn biÕt nh−ng kh«ng ho¹t ®éng"],[7167,"§iÒu nµy cã nghÜa lµ switch ®· ®−îc cÊu h×nh DLCI nh−ng v× lý do nµo ®ã kh«ng sö dông ®−îc DLCI nµy"],[7168,"Nguyªn nh©n cã thÓ lµ do ®Çu bªn kia cña PVC ch−a ho¹t ®éng"],[7169,"\u2022 0x2: ®· nhËn biÕt lµ ®ang ho¹t ®éng"],[7170,"§iÒu nµy cã nghÜa lµ Frame Relay switch ®· cã DLCI vµ mäi c¸i ho¹t ®éng tèt"],[7171,"\u2022 0x4: ®· xãa"],[7172,"§iÒu nµy cã nghÜa lµ hiÖn t¹i Frame Relay switch kh«ng cßn DLCI nµy n÷a nh−ng tr−íc ®ã DLCI nµy ®· ®−îc cÊu h×nh cho"],[7173,"665 switch"],[7174,"Nguyªn nh©n cã thÓ do sè DLCI ®−îc l−u trªn router hoÆc nhµ cung cÊp ®· xãa PVC t−¬ng øng trong m¹ng Frame Relay"],[7175,"TæNG KÕT Sau ®©y lµ nh÷ng ®iÓm chÝnh trong ch−¬ng tr×nh mµ c¸c b¹n cÇn n¾m ®−îc: \u2022 Ph¹m vi ho¹t ®éng vµ môc ®Ých cña Frame Relay"],[7176,"\u2022 C«ng nghÖ Frame Relay"],[7177,"\u2022 CÊu tróc ®iÓm-nèi-®iÓm vµ ®iÓm-nèi-®a ®iÓm"],[7178,"\u2022 CÊu tróc m¹ng Frame Relay"],[7179,"\u2022 C¸ch cÊu h×nh Frame Relay PVC"],[7180,"\u2022 C¸c cÊu h×nh s¬ ®å ¸nh x¹ ®Þa chØ cho Frame Relay"],[7181,"\u2022 Nh÷ng vÊn ®Ò vÒ ®Þnh truyÕn trong m¹ng ®a truy cËp kh«ng qu¶ng b¸"],[7182,"\u2022 T¹i sao ph¶i cÇn subinterface vµ cÊu h×nh chóng nh− thÕ nµo"],[7183,"\u2022 KiÓm tra vµ x¸c ®Þnh sù cè kÕt nèi Frame Relay"],[7184,""],[7185,"666 CH¦¥NG 6: GiíI THIÖU VÒ QU¶N TRÞ M¹NG GiíI THIÖU: PC ®ù¬c thiÕt kÕ lµ mét m¸y tÝnh ®Ó bµn ®éc lËp"],[7186,"PhÇn hÖ ®iÒu hµnh lóc ®ã chØ cho phÐpt¹i mét thêi ®iÓm mét use truy cËp sö dông tµi nguyªn hÖ thèng"],[7187,"Khi m¹ng m¸y tÝnh trë nªn phæ biÕn th× c¸c c«ng ty phÇn mÒm b¾t ®Çu ph¸t triÓn hÖ ®iÒu hµnh m¹ng, gäi t¾t lµ NOS (Network Operating System)"],[7188,"NOS ®−îc thiÕt kÕ®Ó cung cÊp kh¶ n¨ngb¶o mËt tËp tin, ph©n quyÒn use vµ chia sÎ tµi nguyªn hÖ thèng cho nhiÒu use"],[7189,"Sù ph¸t triÓn nhanh chãng cña Internet ®· ®ßi hái c¸c nhµ thiÕt kÕ ph¶i ph¸t triÓn NOS ngµy nay theo c¸c c«ng nghÖ cña Internet, vÝ dô nh− World Wide Web (WWW)"],[7190,"KÕt nèi m¹ng trë thµnh nhu cÇu thiÕt yÕu víi m¸y tÝnh ®Ó bµn"],[7191,"Ranh giíi gi÷a hÖ ®iÒu hµnh Desktop vµ NOS ®· trë nªn rÊt mê nh¹t"],[7192,"Ngµy nay, hÇu hÕt c¸c hÖ ®iÒu hµnh th«ng dông nh− Microsoft Windows 2000 v¸ Linux ®Òu cã thÓ t×m thÊy trªn server trªn m¹ng cÊu h×nh m¹nh vµ trªn c¶ desktop cña user"],[7193,"HiÓu biÕt vÒ c¸c hÖ ®iÒu hµnh kh¸c nhau sÏ gióp chóng ta chon lùa ®óng hÖ ®iÒu hµnh ®Ó cung cÊp ®Çy ®ñ c¸c dÞch vô cÇn thiÕt"],[7194,"Trong ch−¬ng nµy sÏ giíi thiÖu vÒ UNIX, Linux, Mac OS X vµ c¸c hÖ ®iÒu hµnh Windows"],[7195,"ViÖc qu¶n trÞ m¹ng LAN vµ WAN hiÖu qu¶ lµ mét ®iÒu kiÖn then chèt trong viÖc duy tr× mét m«i tr−êng ho¹t ®éng tèt trong thÕ giíi m¹ng"],[7196,"Cµng nhiÒu dÞch vô ®¸p øng cho cµng nhiÒu ng−êi dïng, hiÖu suÊt m¹ng cµng cao"],[7197,"Ng−êi qu¶n trÞ m¹ng th«ng qua viÖc theo dâi th−êng trùc, ph¶i ph¸t hiÖn vµ sö lý ngay c¸c sù cè tr−êc khi nh÷ng sù cè cã t¸c ®éng ®Õn ng−êi sö dông"],[7198,"Cã rÊt nhiÒu c«ng cô vµ giao thøc kh¸c nhau ®Ó thùc hiÖn viÖc theo dâi ho¹t ®éng m¹ng"],[7199,"Thµnh th¹o vÒ c¸c c«ng cô nµy lµ rÊt quan träng ®Ó cã thÓ qu¶n trÞ m¹ng mét c¸ch hiÖu qu¶"],[7200,"Sau khi hoµn tÊt ch−¬ng ch×nh nµy, c¸c b¹n cã thÓ thùc hiÖn nh÷ng viÖc sau: \u2022 X¸c ®Þnh nh÷ng nhiÖm vô ®−îc thùc hiÖn bëi m¸y tr¹m"],[7201,"\u2022 X¸c ®Þnh nh÷ng chøc n¨nh cña server"],[7202,"\u2022 M« t¶ vai trß client/server"],[7203,"\u2022 M« t¶ sù kh¸c nhau gi÷a NOS vµ hÖ ®iÒu hµnh desktop"],[7204,""],[7205,"667 \u2022 LiÖt kª c¸c hÖ ®iÒu hµnh Windows vµ c¸c ®Æc ®iÓm cña chóng"],[7206,"\u2022 LiÖt kª c¸c hÖ ®iÒu hµnh kh¸c vµ c¸c ®Æc ®iÓm cña chóng"],[7207,"\u2022 X¸c ®Þnh c¸c c«ng cô qu¶n trÞ m¹ng"],[7208,"\u2022 M« t¶ OSI vµ m« h×nh qu¶n trÞ m¹ng"],[7209,"\u2022 M« t¶ SNMP (Simple Network Management Protocol) vµ CMIP (Common Management Information Protocol)"],[7210,"\u2022 M« t¶ c¸ch thu nhËp th«ng tin vµ l−u l¹i sù cè c¸c phÇn mÒm qu¶n trÞ m¹ng"],[7211,"6.1"],[7212,"M¸y tr¹m vµ Server: 6.1.1"],[7213,"M¸y tr¹m: M¸y tr¹m client ®−îc sö dông ®Ó ch¹y c¸c tr×nh øng dông vµ kÕt nãi ®Õn server"],[7214,"Server lµ m¸y tÝnh ch¹y hÖ ®iÒu hµnh m¹ng NOS, lµ n¬i l−u d÷ liÖu chia sÎ gi÷a c¸c m¸y tÝnh"],[7215,"M¸y tr¹m sö dông phÇn mÒm ®Æc biÖt ®Ó thùc hiÖn nh÷ng nhiÖm vô sau: \u2022 TiÕp nhËn d÷ liÖu cña user vµ lÖnh cña ch−¬ng tr×nh õng dông"],[7216,"\u2022 X¸c ®Þnh xem lÖnh nhËn ®−îc lµ cho hÖ ®iÒu hµnh néi bé hay lµ cho NOS"],[7217,"\u2022 ChuyÓn lÖnh ®Õn hÖ ®iÒu hµnh néi bé hoÆc ra card m¹ng (NIC) ®Ó truyÒn vµo m¹ng"],[7218,"\u2022 Thùc hiÖn viÖc truyÒn d÷ liÖu gi÷a m¹ng vµ phÇn mÒm øng dông ®ang ch¹y trªn m¸y tr¹m Mét sè hÖ ®iÒu hµnh Windows cã thÓ cµi ®Æt ®−îc c¶ trªn m¸y tr¹m vµ server"],[7219,"Windows NT/2000/XP cã cung cÊp kh¶ n¨ng Server m¹ng"],[7220,"Windí 9x vµ ME chØ cã thÓ sö dông cho m¸y tr¹m"],[7221,""],[7222,"668 UNIX vµ Linux còng th−êng ®−îc sö dông trªn c¸c m¸y desktop cÊu h×nh m¹nh"],[7223,"Nh÷ng m¸y tr¹m nµy th−êng ®−îc sö dông cho c¸c øng dông vÒ khoa häc kü thuËt ®ßi hái cÊu h×nh m¸y tÝnh m¹nh"],[7224,"Sau ®©y lµ nh÷ng phÇn mÒm ®Æc biÖt th−êng ®−îc ch¹y trªn c¸c m¸y tr¹m UNIX: \u2022 Computer-ai®e desing (CAD)"],[7225,"\u2022 PhÇn mÒm thiÕt kÕ m¹ch ®iÖn tö"],[7226,"\u2022 PhÇn mÒm ph©n tÝch d÷ liÖu thêi tiÕt"],[7227,"\u2022 PhÇn mÒm thiÕt kÕ h×nh ¶nh ®éng"],[7228,"\u2022 PhÇn mÒm qu¶n lý thiÕt bÞ viÔn th«ng"],[7229,"HÇu hÕt c¸c hÖ ®iÒu hµnh desktop hiÖn nay ®Òu cã kh¶ n¨ng m¹ng vµ hç trî nhiÒu user truy cËp"],[7230,"ChÝnh v× vËy,viÖc ph©n lo¹i m¸y tÝnh vµ hÖ ®iÒu hµnh kh«ng chØ dùa trªn c¸c lo¹i tr×nh øng dông ch¹y trªn m¸y mµ cßn dùa tren vai trß cña m¸y tÝnh trong m¹ng, lµ m¸y tr¹m hay server"],[7231,"C¸c tr×nh øng dông th−êng ch¹y trªn m¸y tr¹m th«ng th−êng gåm cã:tr×nh sö lý v¨n b¶n, b¶ng tÝnh, qu¶n lý chi tiªu,� Nh÷ng tr×nh øng dông ch¹y trªn m¸y tr¹m c«ng nghÖ cao bao gåm: thiÕt kÕ ®å häa, qu¶n lý thiÕt bÞ vµ nh÷ng phÇn mÒm ®· ®ù¬c liÖt kª ë trªn"],[7232,"M¸y tr¹m kh«ng æ ®Üa lµ mét lo¹i m¸y ®Æc biÖt ®Ó thiÕt kÕ ch¹y trong m¹ng"],[7233,"M¸y tÝnh nµy kh«ng cã æ ®Üa nh−ng vÉn cã mµn h×nh, bµn phÝm, RAM, ROM vµ NIC"],[7234,"PhÇn mÒm thiÕt lËp kÕt nèi m¹ng ®−îc t¶i tõ chip ROM trªn NIC"],[7235,"Lo¹i m¸y tr¹m nµy kh«ng cã æ ®Üa nªn ph¶i chÐp mäi d÷ liÖu tõ m¸y tr¹m lªn server vµ ng−îc l¹i, t¶i mäi d÷ liÖu tõ trªn server xuèng"],[7236,"Do ®ã, m¸y tr¹m kh«ng æ ®Üa kh«ng thÓ ph¸t virut vµo m¹ng vµ ®ång thêi còng kh«ng thÓ l−u d÷ liÖu tõ m¹ng vµo æ ®Üa"],[7237,"ChÝnh v× vËy, m¸y tr¹m kh«ng æ an toµn h¬n so víi m¸y tr¹m th«ng th−êng"],[7238,"Do ®ã lo¹i m¸y tr¹m kh«ng æ ®Üa th−êng ®ù¬c sö dông trong nh÷ng m¹ng cã yªu cÇu b¶o vÖ cao Laptop còng lµ mét m¸y tr¹m trong m¹ng LAN vµ ®−îc kÕt nèi m¹ng th«ng qua PCMCIA card"],[7239,"6.1.2"],[7240,"Server: Trong m«i tr−êng m¹ng, nhiÒu client cïng truy cËp vµ chia sÎ tµi nguyªn trªn mét hay nhiÒu server"],[7241,"M¸y client ®−îc trang bÞ bé nhí, æ ®Üa vµ c¸c thiÕt bÞ ngo¹i vi nh− bµn phÝm, mµn h×nh"],[7242,"Cßn server phaØ ®−îc trang bÞ ®Ó cã thÓ hç trî cho nhiÒu user, nhiÒu t¸c vô cña nhiÒu client cïng lóc trªn server"],[7243,""],[7244,"669 NhiÒu c«ng cô qu¶n lý m¹ng ®−îc thiÕt kÕ trong NOS ®Ó hç trî cho nhiÒu user cïng lóc truy cËp vµo hÖ thèng"],[7245,"NOS cßn ®−îc cµi ®Æt trªn server vµ c¸c client cïng chia sÎ nh÷ng server nµy"],[7246,"Server th−êngd−îc trang bÞ æ ®Üa tèc ®é cao vµ dung l−îng lín, bé nhí RAM lín, NIC tèc®é cao vµ trong nhiÒu tr−êng hîp cßn ®−îc trng bÞ nhiÒu CPU"],[7247,"C¸c server ®−îc cÊu h×nh bé giao thøc TCP/IP vµ cung cÊp mét hä¨c nhiÒu dÞch vô TCP/IP"],[7248,"Server cÇn cã dung l−îng bé nhí lín h¬n nhiÒu so víi m¸y tr¹m v× server ph¶i thùc hiÖn nhiÒu t¸c vô cïng mét lóc"],[7249,"Server còng cÇn dung l−îng æ ®Üa lín ®Ó l−u c¸c file chi sÎ vµ sö dông æ ®Üa lµm bé nhí ngoµi hç trî cho RAM"],[7250,"Trªn mainboard cña server còng cÇn nhiÒu slot h¬n ®Ó cã thÓ g¾n nhiÒu card m¹ng vµ kÕt nèi nhiÒu thiÕt bÞ chia sÎ nh− m¸y in� Mét ®Æc ®iÓm n÷a cña hÖ thèng server lµ n¨ng lùc sö lý"],[7251,"Nguyªn thñy ban ®Çu server chØ cã mét CPU ®Ó thùc hiÖn c¸c t¸c vô vµ tiÕn tr×nh trªn m¸y tÝnh"],[7252,"§Ó ho¹t ®éng hiÖu qu¶ h¬n vµ ®¸p øng nhanh h¬n c¸c yªu cÇucña client, server ®ßi hái ph¶i cã CPU m¹nh h¬n ®Ó thùc hiÖn nhiÒu t¸c vô cïng lóc"],[7253,"Trong mét sè tr−êng hîp mét CPU tèc ®é cao còng ch−a ®¸p øng ®ñ th× hÖ thèng cÇn trng bÞ thªm CPU"],[7254,"HÖ thèng nhiÒu CPU cã kh¶ n¨ng chia c¸c t¸c vô cho nhiÒu CPU kh¸c nhau"],[7255,"Nhê ®ã l−îng c«ng viÖc mµ server cã thÓ xö lý trong cïng mét kho¶ng thêi gian t¨ng lªn rÊt nhiÒu"],[7256,"Serverlaf trung t©m tµi nguyªn vµ còng lµ trung t©m ho¹t ®éng cña client nªn server ph¶i ho¹t ®éng hiÖu qu¶ vµ bÒn v÷ng"],[7257,"HiÖu qña lín ë ®©y cã nghÜa lµ server ph¶i ho¹t ®éng hiÖu qu¶ víi ¸p lùc c«ng viÖc lín vµ cã kh¶ n¨ng kh«i phôc lçi ë mét hay nhiÒu thµnh phÇn cña server mµ kh«ng cÇn ph¶i t¾t toµn bé hÖ thèng"],[7258,"§Ó ®¸p øng nhu cÇu nµy, server ph¶i cã c¸c phÇn cøng dù phßng ®Ó ho¹t ®éng thay thÕ khi mét thµnh phÇn nµo ®ã bÞ h−"],[7259,"ViÖc sö dông hÖ thèng dù phßng giup server vÉn ho¹t ®éng liªn tôc khi sù cè x¶y ra vµ trong kho¶ng thêi gian chê söa ch÷a thµnh phÇn bÞ h− háng"],[7260,"Mét sè dÞch vô th−êng ®−îc ch¹y trªn server lµ dÞch vô web HTTP, FTP, DNS, c¸c dÞch vô vÒ email nh− SMTP, POP3, IMAP, dÞch vô chia sÎ th«ng file nh− NFS cña Sun Microsystem, SMB cña Microsoft, dÞch vô chia sÎ m¸y in, dÞch vô DHCP ®Ó cugn cÊp®Þa chØ IP ®éng cho m¸y tr¹m"],[7261,"Ngoµi ra, server cßn ®−îc cµi ®Æt lµm fierwall cho hÖ thèng m¹ng b»ng c¸ch sö dông proxy hoÆc NAT ®Ó che giÊu ®Þa chØ m¹ng riªng bªn trong"],[7262,""],[7263,"670 Mçi server chØ cã thÓ phôc vô cho mét l−îng client nhÊt ®Þnh"],[7264,"Do ®ã chóng ta cã thÓ triÓn khai nhiÒu server ®Ó t¨ng hiÖu qu¶ ho¹t ®éng"],[7265,"Th«ng th−êng ng−êi ta ph©n chia c¸c dÞch vô cho mçi server, vÝ dô mét server chÞu tr¸ch nhiÖm vÒ email, mét server chÞu tr¸ch nhiÖm vÒ chia sÎ file vµ mét server kh¸c chÞu tr¸ch nhiÖm vÒ FPT"],[7266,"ViÖc tËp chugn nguån tµi nguyªn vµ c¸c dÞch vô trªn server giópcho truy cËp, qu¶n lý vµ dù phßng d÷ liÖu tèt h¬n"],[7267,"Mçi client ®−îc cung cÊp mét t6µi kho¶n víi user name/pasword vµ sÏ x¸c minh tr−íc khi truy ®ùoc phÐp truy cËp vµo server"],[7268,"6.1.3"],[7269,"Mèi quan hÖ client server: M« h×nh client server ph©n chia mät tiÕn tr×nh sö lý lªn nhiÒu maý tÝnh kh¸c nhau"],[7270,"ViÖc ph©n chia mét tiÕn tr×nh sö lý cho phÐp truy cËp hÖ thèng tõ xa ®Ó chia sÎ th«ng tin vµ tµi nguyªn m¹ng"],[7271,"Trong m«i tr−êng client server client vµ server cïng chia sÎ, hay nãi c¸ch kh¸c lµ ph©n chia nhau mét tiÕn tr×nh sö lý"],[7272,"Mét phiªn kÕt nèi FTP lµ mét vÝ dô vÒ mèi quan hÖ client server"],[7273,"FTP lµ mét ph−¬ng ph¸p ®Ó truyÒn file tõ m¸y tÝnh nµy sang m¸y tÝnh kh¸c"],[7274,"§Ó client cã thÓ t¶i file tõ server hoÆc cho phÐp chÐp file lªn server, trªn server ph¶i cã ch¹y dÞch vô"],[7275,"671 FTP"],[7276,"Khi ®ã, client yªu cÇu truyÒn file, server cung cÊp dÞch vô t−¬ng øng ®Ó truyÒn hoÆc nhËn file"],[7277,"Internet còng lµ mét vÝ dô ®iÓn h×nh vÒ quan hÖ chia sÎ mét tiÕn tr×nh sö lý gi÷a client server"],[7278,"Client hay ®iÓm cuèi giao tiÕp víi user lµ n¬i tr×nh duþªt internet explorer hay netscape tr×nh bµy d÷ liÖu víi user t×nh duyÖt web göi yªu cÇu ®Õn web server"],[7279,"Server ch¶ lêi vµ trinh duyÖt web nhËn ®−îc d÷ liÖu HTTP tõ server vµ tr×nh bµy trang web ®ß cho user"],[7280,"Mét vÝ dô n÷a cho mèt quan hÖ slient server lµ server cung øng dÞch vô vÒ c¬ së dö liÖu vµ client trong LAN"],[7281,"Trªn client, ch¹y mét øng dông ®−îc viÕt b»ng C hay Java"],[7282,"Trªn server, ch¹y ORACLA hay mét phÇn mÒm qu¶n lý d÷ liÖu"],[7283,"Trong tr−êng hîp nµy, client thùc hiÖn viÖc ®Þnh d¹ng vµ tr×nh bµy c¸c t¸c vô ®èi víi d÷ liÖu cho user, cßn server cung cÊp n¬i l−u d÷ liÖu vµ dÞch vô t×m d÷ liÖu"],[7284,"Mét m¸y tÝnh ®«i khi phaØ truy vÊn mét d÷ liÖu cÇn thiÕt nµo ®ã trong mét c¬ së d÷ liÖu rÊt lên"],[7285,"Víi m« h×nh client server, client chØ cÇn göi yªu cÇu t×m d÷ liÖu cho server"],[7286,"Sau ®ã server cã thÓ xö lý víi h¬n 100000 hå s¬ d÷ liÖu míi t×m ra d÷ liÖu tháa m·n yªu cÇu cña client"],[7287,"Nh− vËy, viÖc l−u tr÷ mét l−îng lín d÷ liÖu vµ viÖc sö lý t×m kiÕm trªn l−îng d÷ liÖu ®ã ®Òu ®−îc thùc hiÖn t¹i server"],[7288,"Clinet chØ cÇn ph¸t ®i mét yªu cÇu nhá vµ chê nhËn kÕt qu¶ mong muèn"],[7289,"Do ®ã l−îng th«ng tin chao ®æi ®−îc truyÒn ®i qua m¹ng sÏ nhá ®i Ýt tèn b¨ng th«ng h¬n"],[7290,""],[7291,"672 ViÖc ph©n chia sö lý mét tiÕn tr×nh gi÷a client vµ server nh− trªn ®em l¹i nhiÒu −u ®iÓm, nh−ng còng cã nh−îc ®iÓm vÒ mÆt chi phÝ"],[7292,"ViÖc tËp chung tµi nguyªn trªn server gióp cho viÖc truy cËp ®¬ng gi¶n, kiÓm so¸t tËp chung vµ kh¶ n¨ng b¶o vÖ tèt h¬n nh−ng server l¹i trë thµnh ®iÓm nh¹y c¶m duy nhÊt"],[7293,"Nõu server bÞ sù cè, kh«ng ho¹t ®éng ®−îc th× kÓ nh− toµn bé hÖ thèng còng kh«ng ho¹t ®éng ®−îc n÷a"],[7294,"Ngoµi ra, ®Ó b¶o tr× vµ qu¶n trÞ server cßn ®ßi hái ph¶i cã nh÷ng phÇn cøng dù phßng, nh÷ng phÇn mÒm ®Æc biÖt vµ nh÷ng chuyªn gia tr×nh ®é cao trong lÜnh vùc nµy"],[7295,"TÊt c¶ nh÷ng yÕu tè ®ã lµm t¨ng thªm chi phÝ vËn hµnh m¹ng"],[7296,"6.1.4"],[7297,"Giíi thiÖu vÒ hÖ ®iÒu hµnh m¹ng, gäi t¾t lµ NOS (Netword Operating System): HÖ ®iÒu hµnh lµ mét phÇn mÒm lµm nÒn cho tÊt c¶ c¸c øng dông vµ dÞch vô ch¹y trªn mét m¸y tÝnh"],[7298,"T−¬ng tù, NOS cho phÐp nhiÒu thiÕt bÞ th«ng tin liªn l¹c víi nhau ®Ó chia sÎ tµi nguyªn qua m¹ng"],[7299,"NOS th−êng ®−îc ch¹y trªn c¸c server Unix, Microsoft Windows NT, Windows 2000"],[7300,"C¸c chøc n¨ng th«ng th−êng cña mét hÖ ®iÒu hµnh trªn m¸y tr¹m gåm ®iÒu khiÓn phÇn cøng, ch¹y ch−¬ng tr×nh vµ cung cÊpgiao diÖn tiÕp víi user"],[7301,"NhiÒu user cã thÓ chia sÎ cïng mét m¸y tÝnh nh−ng kh«ng thÓ sö dông mét m¸y tÝnh cïng lóc"],[7302,"Trong khi ®ã, NOS ph©n chia chøc n¨ng trªn nhiÒu m¸y tÝnh kh¸c nhau, cho phÐp chia sÎ d÷ liÖu bëi nhiÒu user cïng lóc"],[7303,"Mét client trong m«i tr−êng NOS cã thÓ cho phÐp ng−êi sö ông truy cËp ®Õn nguån tµi nguyªn trªn m¸y kh¸c nh− chÝnh nguån tµi nguyªn néi bé n»m trªn m¸y vËy"],[7304,"Mét NOS server nhiÒu ng−êi dïng cã kh¶ n¨nh hç trî nhiÒu user cïng lóc"],[7305,"Nhµ qu¶n trÞ m¹ng t¹o tµi kho¶n cho mçi user, cho phÐp server kiÓm tra vµ x¸c minh user mçi khi truy cËp, ®ång thêi tïy theo mçi tµi kho¶n mµ user cã thÓ truy cËp nh÷ng tµi nguyªn nµo ®−îc phÐp"],[7306,"NOS server lµ mét hÖ thèng ®a nhiÖm, cã kh¶ n¨ng thùc hiÖn nhiÒu nhiÖm vô cïng lóc"],[7307,"PhÇn mÒm NOS ph©n phèi thêi gian xö lý, bé nhí vµ c¸c thµnh phÇn kh¸c cñu hÖ thèng cho c¸c t¸c vô kh¸c nhau, cho phÐp nhiÒu t¸c vô cïng chia sÎ tµi nguyªn hÖ thèng"],[7308,"Mçi user trong hÖ thèng nhiÒu ng−êi dïng ®−îc hç trî bëi mét tiÕn tr×nh riªng trong server"],[7309,"Mçi tiÕn tr×nh nµy ®−îc t¹o ra tù ®éng bªn trong server mçi khi user kÕt nèi vµo hÖ thèng vµ ®ù¬c xãa ®i khi user ng¾t kÕt nèi"],[7310,""],[7311,"673 Khi chän lùa NOS chóng ta cÇn quan t©m ®Õn c¸c ®Æc ®iÓm sau: kh¶ n¨ng ho¹t ®éng, c«ng cô qu¶n lý vµ theo dâi, kh¶ n¨ng b¶o mËt, kh¶ n¨ng më réng, ®é bÒn v÷ng vµ kh¶ n¨ng kh¾c phôc lçi"],[7312,"Kh¶ n¨ng ho¹t ®éng: NOS ph¶i thùc hiÖn ®äc vµ ghi c¸c file d−îc truyÒn qua m¹ng gi÷a client vµ server"],[7313,"Server ph¶i cã kh¶ n¨ng ho¹t ®éng tèt víi ¸p lùc cao khi cã nhiÒu client cïng göi yªu cÇu cïng mét lóc"],[7314,"Yªu cÇu ho¹t ®éng tèt d−íi ¸p lùc cao lµ mét tiªu chuÈn hµng ®Çu cho mét NOS"],[7315,"Kh¶ n¨ng qu¶n lý vµ theo dâi: Giao diÖn qu¶n lý cña NOS cung cÊp c«ng cô ®Ó theo dâi, qu¶n lý client vµ æ ®Üa"],[7316,"Giao diÖn qu¶n lý cña NOS cßn cung cÊp c«ng cô ®Ó cµi ®Æt vµ cÊu h×nh dÞch vô míi"],[7317,"Ngoµi ra, server cßn ®ßi hái ph¶i ®ù¬c th−êng xuyªn theo dâi vµ ®iÒu chØnh"],[7318,"Kh¶ n¨ng b¶o mËt: NOS ph¶i b¶o vÖ nguån tµi nguyªn chia sÎ"],[7319,"ViÖc b¶o mËt bao gåm x¸c minh user, m· hãa ®Ó b¶o vÖ th«ng tin khi truyÒn ®i gi÷a client vµ server"],[7320,"Kh¶ n¨ng më réng: Lµ kh¶ n¨ng ph¸t triÓn m¹ng mµ kh«ng lµm gi¶m hiÖu qu¶ ho¹t ®éng cña NOS"],[7321,"NOS ph¶i cã kh¶ n¨ng chÊp nhËn thªm user vµ server míi"],[7322,"§é bÒn v÷ng vµ kh¶ n¨ng kh¾c phôc lçi: §é bÒn ®−îc x¸c ®Þnh th«ng qua kh¶ n¨ng cung cÊp dÞch vô khi co sù cè x¶y ra"],[7323,"Chóng ta nªn sö dông æ ®Üa dù phßng vµ chia t¶i cho nhiÒu server ®Ó t¨ng ®é bÒn v÷ng cho NOS"],[7324,"6.1.5"],[7325,"Microsoft NT, 2000 vµ .NET: KÓ tõ khi phiªn b¶n Windows 1.0 ®−îc ph¸t hµnh th¸ng 11n¨m 1985 ®Õn nay, Microsoft ®· ph¸t hµnh nhiÒu phiªn b¶n hÖ ®iÒu hµnh Windows kh¸c nhau víi nhiÒu c¶i c¸ch vµ thay ®æi ®Ó hç trî cho nhiÒu môc ®Ých kh¸c nhau"],[7326,""],[7327,"674 Windows NT 4.0 ®−îc thiÕt kÕ ®Ó cung cÊp mét m«i tr−êng ho¹t ®éng æn ®Þnh h¬n vµ cã Windows NT 4.0 cho desktop (NT 4.0 Workstation) vµ cho server (NT 4.0 Server)"],[7328,"¦u ®iÓmcña Windows NT 4.0 lµ DOS vµ c¸c ch−¬ng tr×nh Windows cò cã ch¹y trong m«i tr−êng gi¶ lËp"],[7329,"Lçi ch−¬ng tr×nh ®−îc c« lËp vµ kh«ng cÇn ph¶i khëi ®éng m¹i m¸y"],[7330,"Windows NT cung cÊp cÊu tróc miÒn ®Ó kiÓm so¸t user vµ client truy cËp vµo tµi nguyªn server"],[7331,"Mçi miÒn NT ph¶i cã mét primary domain controller l−u c¬ së d÷ liÖu qu¶n lý tµi kho¶n (SAM \u2013 Security Accounts Management Database) vµ cã mét hoÆc nhiÒu backup domain controller, trªn ®ã l−u b¶n copy read-only cña SAM"],[7332,"Khi user muèn truy cËp vµo hÖ thèng, th«ng tin tµi kho¶n ®−îc göi ®Õn SAM"],[7333,"Nõu th«ng tin tµi kho¶n nµy cã l−u trong SAM th× user sÏ ®−îc x¸c minh vµo miÒn NT vµ truy cËp ®−îc vµo tµi nguyªn hÖ thèng"],[7334,"KÕ thõa Windows NT, Windows 2000 ®−îc ph¸t triÓn cho c¶ Desktop vµ server, Windows 2000 cã kü thuËt Plug-and \u2013 play, nghÜa lµ c¸c thiÕt bÞ míi ®−îc cµi ®Æt vµo hÖ thèng mµ kh«ng cÇn khëi ®éng l¹i"],[7335,"Windows2000 cßn cã hÖ thèng m· hãa File ®Ó b¶o mËt d÷ liÖu trªn ®Üa cøng"],[7336,"Windows2000 ®Æt c¸c ®èi t−îng nh− User, tµi nguyªn vµo mét ®¬n vÞ nh− lµ Organizational units (Ous)"],[7337,"ViÖc x¸c minh qu¶n trÞ trªn mçi OU ®−îc ñy th¸c cho mét User hoÆc mét nhãm User ®Æc ®iÓm nµy cho phÕp qu¶n lý chi tiÕt h¬n so víi Windows NT 4.0"],[7338,"Windows2000 Prossional kh«ng ®−îc thiÕt kÕ ®Ó lµm mét NOS hoµn chØnh"],[7339,"Nã kh«ng cung cÊp domain controller, DNS Server, DHCP Server hay bÊt kú dich vô nµo kh¸c nh− windows2000 Server"],[7340,"Môc ®Ých chÝnh cña windows2000 Prossional lµ tham gia vµo domain víi t− c¸ch lµ mét hÖ ®iÒu hµnh phÝa client"],[7341,"C¸c lo¹i phÇn cøng cã thÓ cµi trªn hÖ thèng còng bÞ giíi h¹n windows2000 Prossional còng cã thÓ cung cÊp mét vµi kh¶ n¨ng Server cho m¹ng nhá hoÆc m¹ng ngang hµng, vÝ dô nh− File server, FPT server, web server, print server nh−ng chØ tèi ®a 10 kÕt nèi cïng lóc"],[7342,"windows2000 Server bæ sung thªm nhiÒu chøc n¨ng server cho windows2000 Prossional"],[7343,"windows2000 Server cã thÓ ho¹t ®éng nh− mét File server, nhãm user vµ tµi nguyªn m¹ng"],[7344,"windows2000 Server cã thÎ sö dông cho m¹ng cã kichs th−íc võa vµ nhá"],[7345,"Nã cung cÊp kÕt nèi t−¬ng thÝch víi hÖ thèng Novell Netware, UNIX vµ Apple"],[7346,"Nã cã thÓ ®−îc cÊu h×nh lµm communication server ®Ó cung cÊp dÞch vô quay sè cho c¸c"],[7347,"675 server ë xa"],[7348,"windows2000 Advance Server hç trî thªm nhiÒu phÇn cøng vµ phÇn mÒm kh¸c cho c¸c m¹ng lín vµ cùc lín"],[7349,"Microsoft còng ®· ph¸t triÓn windows.NET Server cung cÊp kh¶ n¨ng b¶o mËt còng nh− ®é tin cËy cao ®Ó ch¹y c¸c Wed vµ c¸c FPT sites cùc lín, c¹nh tranh víi linux, UNIX vµ novels\u2019s One NET"],[7350,"Windows.NET Server cung cÊp dÞch vô XML Wed cho c¸c c«ng ty, tæ chøc cã møc ®é l−u l−îng web võa vµ cao"],[7351,"6.1.6"],[7352,"UNIX, Sun, HP vµ LINUX: 6.1.6.1"],[7353,"Nguån gèc cña UNIX: UNIX lµ tªn cña mét nhãm c¸c hÖ ®iÒu hµnh cã nguån gèc tõ n¨m 1969 ë Bell Labs"],[7354,"Ngay tõ ban ®Çu UNIX ®½ ®−îc thiÕt kÕ ®Ó hç trî ®a ng−êi dïng vµ ®a t¸c dông"],[7355,"UNIX lµ hÖ ®iÒu hµnh ®Çu tiªn cã hç trî c¸c giao thøc m¹ng Internet"],[7356,"lÞch sö ph¸t triÓn cã h¬n 35 n¨m cña UNIX lµ mét qu¸ tr×nh phøc t¹p, trong ®ã cã rÊt nhiÒu c«ng ty vµ tæ chøc ®ãng gãp vµo sù ph¸t triÓn cña nã"],[7357,"§Çu tiªn, UNIX ®−îc viÕt b»ng hîp ng÷ (assembly language) vµ UNIX chØ ch¹y ®−îc trªn mét lo¹i m¸y tÝnh ®Æc biÖt"],[7358,"Vµo n¨m 1971, Dennis Ritchie cho ra ®êi ng«n ng÷ lËp tr×nh C"],[7359,"N¨m 1973, Ritchie cïng víi mét thµnh viªn cña Bell Lasb lµ nhµ lËp tr×nh Fen Thompson viÕt l¹i ch−¬ng tr×nh UNIX vêi ng«n ng÷ C"],[7360,"C lµ mét ng«n ng÷ lËp tr×nh bËc cao, do ®ã UNIX ®· co thÓ chuyÓn sang ch¹y trªn c¸c lo¹i m¸y tÝnh kh¸c"],[7361,"QuyÕt ®Þnh ph¸t triÓn hÖ ®iÒu hµnh míi nµy lµ ch×a khãa thµnh c«ng cña UNIX"],[7362,"Trong suèt thËp niªn 70, UNIX ®−îc ph¸t triÓn bëi c¸c nhµ lËp tr×nh ë Bell Labs vµ mét sè tr−êng ®¹i häc nh− University of California ë Berkeley"],[7363,"Khi UNIX lÇn ®Çu tiªn trë thµnh mét th−¬ng hiÖu trªn thÞ tr−êng trong thËp niªn 80, UNIX chØ ®−îc sö dông trªn c¸c server m¹ng lo¹i m¹nh chø kh«ng sö dông trªn m¸y tÝnh ®Ó bµn"],[7364,"Ngµy nay, UNIX ®· cã nhiÒu phiªn b¶n kh¸c nhau nh−: \u2022 Hewlett Packard UNIX (HP-UX)"],[7365,"\u2022 Berkeley Software Design, Inc"],[7366,"(BSD UNIX), cã c¸c s¶n phÈm nh− FreeBSD"],[7367,"\u2022 S©nt Cruz Operation (SCO) UNIX"],[7368,"\u2022 Sun Solaris"],[7369,"\u2022 IBM UNIX (AIX)"],[7370,""],[7371,"676 UNIX tiÕp tôc kh¼ng ®Þnh vÞ trÝ cña nã lµ mét hÖ ®iÒu hµnh ®¸ng tin cËy, an toµn cho c¸c øng dông quan träng, then chèt cña mét doanh nghiÖp hay tæ chøc"],[7372,"UNIX còng thÝch hîp víi TCP/IP v× chóng cÇn cho LAN vµ WAN"],[7373,"M«i tr−êng hÖ ®iÒu hµnh Sun Microsystem Solaris lµ cèt lâi cña nã, hÖ ®iÒu hµnh SunOS lµ mét phiªn b¶n 64 bit, linh ho¹t vµ hiÖu suÊt ho¹t ®éng cao cña UNIX"],[7374,"Solaris cã thÓ ch¹y trªn nhiÒu lo¹i m¸y tÝnh kh¸c nhau, tõ m¸y tÝnh c¸ nh©n Intel cho ®Õn c¸c m¸y tÝnh cùc m¹nh"],[7375,"HiÖn nay Solaris lµ phiªn b¶n ®−îc sö dông réng r·i nhÊt cña UNIX trong c¸c hÖ thèng m¹ng lín vµ c¸c Internet website"],[7376,"Sun cßn lµ nhµ ph¸t triÓn c«ng nghÖ Java \u201cWrite Once, Run Anywhere\u201d"],[7377,"NÕu nh− Microsoft Windows ®−îc sö dông phæ biÕn trong LAN thi UNIX ®−îc ch¹y rÊt nhiÒu trªn Internet"],[7378,"UNIX th−êng g¾n kiÒn víi nh÷ng phÇn cøng ®¨t tiÒn, kh«ng th©n thiÖn víi ng−êi sö dông"],[7379,"Tuy nhiªn trong nh÷ng ph¸t triÓn gÇn ®©y, kÓ c¶ Linux, ng−êi ta ®ang cè g¾ng thay ®æi h×nh ¶nh nµy"],[7380,"6.1.6.2"],[7381,"Nguån gèc cña Linux: Vµo n¨m 1991, mét sinh viªn ng−êi PhÇn Lan tªn lµ Linus Torvalds b¾t tay nghiªn cøu hÖ ®iÒu hµnh cho m¸y tÝnh Intel 80386"],[7382,"Torvalds ®· kh«ng b»ng lßng víi tr¹ng th¸i ho¹t ®éng cña c¸c hÖ ®iÒu hµnh desktop, vÝ dô nh− DOS vµ sù tèn kÐm bëi chi phÝ b¶n quyÒn cña UNIX"],[7383,"Torvalds ®· ph¸t triÓn hÖ ®iÒu hµnh ho¹t ®éng gièng UNIX nh−ng sö dông m· phÇn mÒm më hoµn toµn miÔn phÝ cho mäi ng−êi sö dông"],[7384,""],[7385,"677 ViÖc lµm cña Torvalds ®· dÉn ®Õn mét hiÖu øng céng t¸c toµn cÇu, cïng ph¸t triÓn Linux lµm mét hÖ ®iÒu hµnh m· nguån më, cá h×nh thøc vµ c¸ch sö dông t−¬ng tù nh− UNIX"],[7386,"Vµo cuèi thËp niªn 90, Linux ®· trë thanh kÎ cã thÓ thay thÕ cho UNIX trªn server vµ cho Windows trªn desktop"],[7387,"C¸c phiªn b¶n cña Linux hiÖn nay cã thÓ ch¹y trªn hÇu hÕt c¸c bé xö lý 32 bit, bao gåm Intel 80386, Motorola 68000, Alpha vµ PowerPC"],[7388,"Còng nh− UNIX Linux còng cã nhiÒu phiªn b¶n kh¸c nhau"],[7389,"Mét sè phiªn b¶n cã thÓ t¶i miÔn phÝ tõ web vµ mét sè ®−îc b¸n"],[7390,"Sau ®©y lµ mét sè phiªn b¶n th«ng dông nhÊt cña Linux: \u2022 Red Hat Linux \u2013 ph©n phèi bëi Red Hat Software"],[7391,"\u2022 OpenLinux - ph©n phèi bëi Caldera"],[7392,"\u2022 Corel Linux"],[7393,"\u2022 Slackware"],[7394,"\u2022 Debian GNU/Linux"],[7395,"\u2022 SóE Linux"],[7396,"Linux lµ mét trong nh÷ng hÖ ®iÒu hµnh m¹nh nhÊt vµ ®¸ng tin cËy nhÊt trªn thÕ giíi hiÖn nay"],[7397,"ChÝnh v× vËy Linux còng chØ dµnh cho nh÷ng ng−êi dïng chuyªn nghiÖp ®−îc sö dông nhiÒu cho c¸c server m¹nh vµ Ýt ®−îc triÓn khai lµm hÖ ®iÒu hµnh desktop"],[7398,"MÆc dï Linux còng cã giao diÖn ®å häa th©n thiÖn víi ng−êi dïng nh−ng ng−êi dïng kh«ng chuyªn nghiÖp vÉn c¶m thÊy sö dông Linux khã h¬n so víi Mac OS hay Windows"],[7399,"HiÖn nay mét sè c«ng ty nh− Red Hat, SuSE, Corel vµ Caldera còng ®ang cè g¾ng lµm cho Linux còng phæ biÕn nh− mét hÖ ®iÒu hµnh cho desktop"],[7400,"Khi triÓn khai Linux trªn m¸y tÝnh ®Ó bµn, chóng ta cÇn quan t©m ®Õn kh¶ n¨ng hç trî c¸c tr×nh øng dông cña Linux"],[7401,"Cã mét sè ch−¬ng tr×nh øng dông chØ t−¬ng øng víi Windows"],[7402,"Tuy nhiªn mét sè h·ng nh− WABI vµ WINE chuyªn cung cÊp phÇn mÒm m« pháng Windows ®· gióp cho nhiÒu øng dông Windows cã thÓ ch¹y trªn Linux"],[7403,"Ngoµi ra, mét sè c«ng ty nh− Corel còng ®ang lµm phiªn b¶n Linux phï hîp víi hÖ thèng cña hä cïng víi c¸c phÇn mÒm th«ng dông kh¸c"],[7404,"6.1.6.3.nèi m¹ng víi linux: HiÖn nay trong Linux ®· cã c¸c thµnh phÇn vÒ m¹ng, cho phÐp kÕt nèi LAN vµ thiÕt lËp kÕt nèi quay sè ra Internet� TCP/IP ®−îc tÝch hîp vµo nh©n cña Linux chø kh«ng triÓn khai thµnh mét hÖ thèng con riªng biÖt"],[7405,""],[7406,"678 Sau ®©y lµ mét sè −u ®iÓm cña Linux khi ®−îc sö dông trªn desktop: \u2022 Nã thùc sù lµ hÖ ®iÒu hµnh 32 bit \u2022 Nã hç trî ®a t¸c vô vµ bé nhí ¶o \u2022 M· nguån më nªn bÊt kú ai còng cã thÓ vËn dông vµ ph¸t triÓn 6.1.7 Apple: M¸y tÝnh apple macintosh ®−îc thiÕt kÕ cho m¹ng ngang hµng hay mét nhãm m¸y tÝnh nhá"],[7407,"Cæng nèi m¹ng còng ®−îc bao gåm lu«n trong phÇn cøng cña m¸y tÝnh, c¸c thnµh phÇn m¹ng ®−îc x©y dùng trong hÖ ®iÒu hµnh macintosh"],[7408,"M¸y tÝnh macintosh còng cã thÓ sö dông bé chuyÓn ®æi ethrnet hay token ring"],[7409,"M¸y tÝnh macintosh hay gäi t¾t lµ Mac, ®−îc sö dông phæ biÕn trong c¸c häc viÖn vµ c¸c bé phËn ®å häa"],[7410,"Mac cã thÓ kÕt nèi víi mét m¸y tÝnh kh¸c trong nhãm vµ cã thÓ truy cËp vµo file server appleshare"],[7411,"Mac còng cã thÓ kÕt nèi víi c¸c PC trong LAN vµ c¸c server Microsft, NetWare, UNIX"],[7412,"Mas OSX(10) HÖ ®iÒu hµnh Macintosh, Mac OSX, ®«i khi cßn ®−îc gäi lµ Apple system 10"],[7413,""],[7414,"679 Giao diÖn ®å h¹o Aqua cña Mac OS X tËp hîp nh÷ng ®Æc ®iÓm cña Microsoft Windows XP vµ Linux X-Windosw"],[7415,"Mac OS X ®ùoc thiÕt kÕ ®Ó cung cÊp c¸c chøc n¨ng cho mét m¸y tÝnh gia ®×nh, vÝ dô nh− ch×nh duyÖt Internet, biªn tËp h×nh vµ Video, Game, ®ång thêi còng cung cÊp nh÷ng c«ng cô m¹nh, cÊu h×nh chuyªn nghiÖp mµ mét chuyªn gia IT cÇn cã trong hÖ n®iÒu hµnh"],[7416,"Mac OS X t−¬ng thÝch hoµn toµn víi c¸c phiªn b¶n cò cña Mac"],[7417,"Mac OS X cßn cung cÊp nhiÒu chøc n¨ng míi cho phÐp kÕt nèi víi Apple talk vµ Windows"],[7418,"HÖ ®iÒu hµnh x−¬ng sèng cña Mac OS X ®−îc gäi lµ Darwin"],[7419,"Darwwin lµ mét hÖ thèng m¹nh, dùa trªn c¬ së cña Unix, ho¹t ®äng æn ®Þnh vµ hiÖu suÊt cao"],[7420,"Mac OS X còng hç trî bé nhí ¶o, qu¶n lý bé nhí bËc cao, thùc hiªn da t¸c vô vµ sö lý ®ång bé"],[7421,"TÊt c¶ nh÷ng −u ®iÓm nµy lµm cho Mac OS X còng lµ mét ®èi thñ c¹nh tranh víi c¸c hÖ ®iÒu hµnh kh¸c"],[7422,"6.1.8"],[7423,"Kh¸i niÖm vÒ c¸c dÞch vô trªn Server: NOS ®−îc thiÕt kÕ ®Ó cung cÊp c¸c ho¹t ®éng m¹nh cho client"],[7424,"C¸c dÞch vô m¹ng bao gåm WWW, chia sÎ tËp tin, Mail, qu¶n lý tõ xa, in tõ xa ��.qu¶n lý tõ xa lµ mét dÞch vô m¹nh , cho phÐp ng−êi qu¶n trÞ m¹ng cã thÓ cÊu h×nh hÖ thèng m¹ng tõ xa"],[7425,"Mçi ho¹t ®éng m¹ng trªn c¸c hÖ ®iÒu hµnh kh¸c nhau cã chøc n¨ng gièng nhau nh−ng c¸ch ho¹t ®éng sÏ kh¸c nhau"],[7426,"Tïy theo tõng NOS mµ mét sè c¸c ho¹t ®éng chñ yÕu sÏ ®−îc kÝch ho¹t mÆc ®Þnh trong qu¸ tr×nh cµi ®Æt NOS"],[7427,"hÇu hÕt c¸c ho¹t déng m¹ng th«ng dông ®Òu dùa trªn bé giao thøc TCP/IP"],[7428,"Nh−ng TCP/IP lµ bé giao thøc më vµ næi tiÕng lªn c¸c"],[7429,"680 dÞch vô dùa trªn TCP/IP còng ®−óng tr−íca c¸c nguy c¬ bÞ tÊn c«ng"],[7430,"t¸n c«ng DOS (Denian of service), virut, Worm � ®· buéc ng−êi thiÕt kÕ NOS quan t©m nhiÒu h¬n ®Õn viÖc khëi ®éng tù ®éng mét dÞch vô m¹ng"],[7431,"Nh÷ng phiªn b¶n th«ng dông ngÇn ®©y cña NOS, vÝ dô nh− Windows vµ Red Hat Linux, ®· giíi h¹n sè dÞch vô m¹ng ®−îc kÝch ho¹t mÆc ®Þnh do ®ã, khi sö dông NOS, chóng ta ph¶i khëi ®éng c¸c dÞch vô m¹ng b»ng tay"],[7432,"Khi mét urer muèn in trong m¹ng cã dÞch vô in chia sÎ, yªu cÇu in ®−îc göi ®Ðn hµng ®îi cña m¸y in vµ m¸y in phôc vô c¸c yªu cÇu nµy theo thø tù \u201c®Õn tr−íc, in tr−íc\u201d"],[7433,"Do ®ã thêi gian chê in cã thÓ sÏ l©u, tïy theo sè l−îng cÇn in ®ang n»n ttrong hµng ®îi"],[7434,"Víi dÞch vô in qua m¹ng, ng−êi qu¶n trÞ hÖ thèng cã thÓ qu¶n lý sè l−îng lín c«ng viÖc c«ng viÖc lín in Ên qua m¹ng, bao gåm cµi ®Æt ®é −u tiªn, thêi gian chê vµ xãa nh÷ng yªu cÇu in ®ang trong hµng chê"],[7435,"Chia sÎ tËp in Chia sÎ tËp in lµ mét dÞch vô m¹ng quan träng"],[7436,"HiÖn nay cã rÊt nhiÒu giao thøc vµ øng dông cho chia sÎ tËp tin"],[7437,"Trong ph¹m vi m¹ng nhá huÆc m¹ng gia ®×nh, tËp tin ®−îc chia sÎ b»ng Windows file sharing hay giao thøc NFS khi ®ã ng−êi sö dông thËm chÝ còng kh«ng nhËn thÊy sù kh¸c biÖt cña tËp tin ®ang n»m trªn ®·i cøng hay trªn server"],[7438,"Windows file sharing vµ NFS cho phÐp ng−êi sö dông dÔ dµng di chuyÓn, t¹o míi hay xãa tÖp tin trong th− môc hay trªn m¸y ë xa"],[7439,"FTP RÊt nhiÒu l¬i sö dông FTP ®Ó t¹o tÖp tin cã thÓ truy cËp tõ xa, ®iÒu chØnh vµ ph¸t hµnh ra céng ®ång"],[7440,"dÞch vô FTP kÕt hîp víi dÞch vô WEB ®−îc sö dông rÊt déng d·i"],[7441,"vÝ dô: mét User ®äc th«ng tin vÒ mét phÇn mÒm míi trªn trang Web vµ t¶i phÇn mÒm ®ã vÒ b»ng FTP"],[7442,"C¸c c«ng ty nhá cã thÓ dïng mét Server cung c¸p c¶ hai dÞch vô FTP vµ HTTP, cßn c¸n c«ng ty lín cã thÓ dµnh riªng mét Server cho FTP"],[7443,"FTP client ph¶i truy nhËp vµo FTP Server vµ chóng ta cã thÓ cÊu h×nh FTP Server cho phÐp truy nhËp v« danh"],[7444,"Khi User truy nhËp v¸o Server d−íi d¹ng v« danh, User kh«ng b¾t buéc ph¶i cã tµi s¶n trong hÖ thèng"],[7445,"Giao thøc FTP cßn cho phÐp User chÐp tËp tin nªn Server thay ®æi tªn vµ x¸o tÖp tin"],[7446,"Do ®ã ng−êi qu¶n trÞ hÖ thèng cÇn cÈn thËn khi cÊu h×nh quyÒn truy cËp"],[7447,""],[7448,"681 FTP lµ mét giao thøc h¹ot ®éng theo phiªn truy cËp"],[7449,"Client ph¶i më phiªn giao tiÕp ë líp øng dông víi Server, thùc hiÖn x¸c minh vµ sau ®ã t¶i huÆc chÐp tÖp tin nªn Server"],[7450,"NÕu phiªn kÕt nèi kh«ng ho¹t ®éng trong mét kho¶ng thêi gian nhÊt ®Þnh th× Server sÏ ng¾t kÕt nèi ®ã"],[7451,"Thêi gian chê cho mçi phiªn kÕt nèi tïy thuéc tõng phÇn mÒm kh¸c nhau"],[7452,"DÞch vô Web Wornd wide web lµ dÞch vô m¹ng phæ biÕn nhÊt hiÖn nay"],[7453,"Ötong vßng kh«ng ®Çy mét thËp niªn Wornd wide web ®· chë thµnh m¹ng toµn cÇu cho th«ng tin, bu«n b¸n, gi¸o dôc vµ gi¶i trÝ"],[7454,"Hµng tû c¸c c«ng ty tæ chøc vµ c¸ nh©n ®Æt trang Web cña m×nh trªn Internet Web site lµ mét tËp hîp c¸c trang Web víi nhau"],[7455,"Wornd wide web dùa trªn c¸c m« h×nh client/ server"],[7456,"Client thiÕt lËp phiªn b¶n kÕt nèi TCB víi Web server"],[7457,"Khi kÕt nèi ®· ®−îc thiÕt lËp song, client cã thÓ yªu cÇu nhËn d÷ liÖu tõ server HTTP"],[7458,"Thùc hiÖn c¸c giao thøc truyÒn d−c liÖu gi÷a client vµ server"],[7459,"PhÇn mÒm Web/client lµ c¸c tr×nh duyÖt Web vÝ dô Netscape, Internet explorer"],[7460,"Trang Web ®−îc trªn Server cã ch¹y phÇn mÒm dÞch vô Web"],[7461,"Hai phÇn mÒm Web server th«ng dông nhÊt lµ ernet explorer"],[7462,"Trang Web ®−îc trªn Server cã ch¹y phÇn mÒm dÞch vô Web"],[7463,"Hai phÇn mÒm Web server th«ng dông nhÊt lµ Microsoft Internet information Services (IIS) vµ Apache Web Server"],[7464,"Microsoft (IIS) ch¹y trªn Windows Apache Web Server ch¹y trªn UNIX vµ Linnux"],[7465,"DNS Giao thøc DNS dich trªn phÇn mÒm Internet, vÝ dô nh− HTUwww.cisco.comUTH, thµnh ®¹i chØ IP"],[7466,"Giao thøc DNS cho phÐp client göi yªu cÇu ®Õn DNS server ®Ó thùc hiÖn dÞch tªn miÒn sang ®¹i chØ IP"],[7467,"Sau ®ã ch−¬ng tr×nh øng dông cã thÓ sö dông ®Þa chØ IP nµy ®Ó göi d÷ liÖu"],[7468,"NÕu kh«ng cã dÞch vô nµy cã lÏ Internet ®· kh«ng thÓ ph¸t triÓn nh− ngµy nay"],[7469,"DHCP Môc ®Ých cña DHCP lµ cho phÐp mçi m¸y tÝnh trong m¹ng IP ®−îc cÊu h×nh TCP/IP tõ mét hay nhiÒu DHCP server"],[7470,"DHCP cung cÊp ®¹i chØ IP cho mét m¸y tÝnh trong mét kho¶n thêi gian nhÊt ®Þnh, sau ®ã lÊy l¹i ®¹i chØ IP ®ã vµ cã thÓ cÊp"],[7471,"682 mét ®¹i chØ IP míi"],[7472,"TÊt c¶ c¸c c«ng viÖc nµy ®−îc thùc hiÖn bëi mét DHCP server"],[7473,"Nhê ®ã c«ng viÖc qu¶n lý m¹ng IP lín ®−îc gi¶m bít rÊt nhiÒu"],[7474,"6.2"],[7475,"Qu¶n trÞ m¹ng: 6.2.1"],[7476,"Giíi thiÖu vÒ qu¶n trÞ m¹ng: Khi mét hÖ thèng m¹ng ngµy cµng ph¸t triÓn th× trong ®ã cµng cã nhiÒu tµi nguyªn quan träng h¬n"],[7477,"khi cµng cã nhiÒu tµi nguyªn phôc vô cho User th× m¹ng l¹i cµng trë nªn phøc t¹p, c«ng viÖc qu¶n trÞ m¹ng cµng trë nªn khã kh¨n h¬n"],[7478,"viÖc thiÕu hôt tµi nguyªn vµ hiÖu suÊt ho¹t ®éng kÕm lµ hËu qu¶ cña viÖc ph¸t triÓn kh«ng ho¹ch ®Þnh vµ c¸c User kh«ng thÓ chÊp nhËn ®iÒu nµy"],[7479,"do ®ã ng−êi qu¶n trÞ m¹ng ph¶i tù ®éng qu¶n lý hÖ thèng cña m×nh, x¸c ®Þnh sù cè vµ ng¨n ngõa sù cè xÈy ra, t¹o hiÖu suÊt ho¹t ®éng tèt nhÊt cho User"],[7480,"MÆt kh¸c khi hÖ thèng m¹ng chë nªn qu¸ lín, ng−êi qu¶n trÞ cã thÓ kh«ng qu¶n lý næi nÕu kh«ng cã sù trî gióp cña c¸c c«ng cô qu¶n lý m¹ng tù ®éng"],[7481,"C«ng viÖc qu¶n trÞ m¹ng bao gåm: \u2022 Theo dâi ho¹t ®éng m¹ng"],[7482,"\u2022 T¨ng c−êng kh¶ n¨ng tù ®éng"],[7483,"\u2022 Theo dâi thêi gian ®¸p øng trong m¹ng"],[7484,"\u2022 B¶o mËt"],[7485,"\u2022 ®Þnh tuyÕn l−u l−îng m¹ng"],[7486,"\u2022 Cung cÊp kh¶ n¨ng l−u tr÷ d÷ liÖu"],[7487,"\u2022 §¨ng ký user"],[7488,"C«ng viÖc qu¶n trÞ m¹ng chÞu nh÷ng tr¸ch nhiÖm sau: \u2022 KiÓm so¸t t¸i s¶n chung: NÕu tµi nguyªn m¹ng kh«ng ®−îc kiÓm so¸t hiÖu qu¶ th× ho¹t ®éng cña hÖ thèng m¹n sÏ kh«ng ®¹t nh− mong muèn"],[7489,""],[7490,"683 \u2022 KiÓm so¸t ®é phøc t¹p: Sù ph¸t triÓn bïng næ sè l−îng thiÕt bÞ m¹ng, user, giao thøc vµ c¸c nhµ cung cÊp dÞch vô, thiÕt bÞ� lµ nh÷ng ®iÒu g©y khã kh¨n cho c«ng viÖc qu¶n trÞ m¹ng \u2022 Ph¸t triÓn dÞch vô: Ng−êi sö dông lu«n mong chê nh÷ng dÞch vô míi h¬n, tèt h¬n khi hÖ thèng m¹ng ph¸t triÓn h¬n"],[7491,"\u2022 C©n b»ng c¸c nhu cÇu kh¸c nhau: Ng−êi sö dông lu«n ®ßi hái c¸c phÇn mÒm øng dông kh¸c nhau víi nh÷ng møc hç trî kh¸c nhau vµ yªu cÇu kh¸c nhau vÒ møc ®é ho¹t ®éng, kh¶ n¨ng b¶o mËt� \u2022 Gi¶m tèi ®a thêi gian ngõng ho¹t ®éng do sù cè: Sö dông c¸c biÖn ph¸p dù phßng ®Ó ®¶m b¶o kh¶ n¨ng cung cÊp dÞch vô vµ tµi nguyªn m¹ng"],[7492,"\u2022 KiÓm so¸t chi phÝ: Theo dâi vµ kiÓm so¸t møc ®é sö dông tµi nguyªn ®Ó phï hîp víi møc chi phÝ chÊp nhËn ®−îc"],[7493,"6.2.2"],[7494,"OSI vµ m« h×nh qu¶n trÞ m¹ng: ISO (International Standards Organization) ®−a ra m« h×nh qu¶n trÞ m¹ng víi 4 phÇn: \u2022 Tæ chøc"],[7495,"\u2022 Th«ng tin"],[7496,"\u2022 Liªn l¹c"],[7497,"\u2022 Chøc n¨ng"],[7498,"PhÇn tæ chøc m« t¶ c¸c thµn phÇn qu¶n trÞ m¹ng, bao gåm c¸c thµnh phÇn qu¶n lý, c¸c chi nh¸nh vµ mèi quan hÖ gi÷a chóng"],[7499,"ViÖc bè trÝ c¸c thµnh phÇn nµy sÏ dÉn ®Õn c¸c lo¹i cÊu tróc mµ chóng ta sÏ bµn ®Õn trong phÇn sau cña ch−¬ng"],[7500,"PhÇn th«ng tin liªn quan ®Õn cÊu tróc vµ l−u tr÷ th«ng tin qu¶n trÞ m¹ng"],[7501,"Nh÷ng th«ng tin nµy ®−îc l−u tr÷ trong mét c¬ së d÷ liÖu gäi lµ MIB (Management Information Base)"],[7502,"ISO ®Þnh nghÜa cÊu tróc cña th«ng tin qu¶n trÞ SMI (Structure of Management Information) ®Ó ®Þnh nghÜa có ph¸p vµ th«ng tin qu¶n trÞ l−u trong MIB"],[7503,"MIB vµ SIM sÏ ®−îc ®Ò cËp trong phÇn s©u h¬n trong phÇn sau cña ch−¬ng"],[7504,"PhÇn liªn l¹c liªn quan ®Õn th«ng tin qu¶n trÞ ®−îc liªn l¹c nh− thÕ nµo gi÷a tr¹m qu¶n lý vµ c¸c chi nh¸nh"],[7505,"PhÇn nµy liªn quan ®Õn c¸c giao thøc vËn chuyÓn, gioa thøc øng dông, yªu cÇu vµ ®¸p øng gi÷a 2 bªn giao dÞch"],[7506,"PhÇn chøc n¨ng ph©n chia viÖc qu¶n trÞ m¹ng theo 5 lÜnh vùc chøc n¨ng nh− sau: \u2022 Kh¾c phôc lçi"],[7507,""],[7508,"684 \u2022 CÊu h×nh"],[7509,"\u2022 TÝnh to¸n chi phÝ"],[7510,"\u2022 HiÖu suÊt ho¹t ®éng"],[7511,"\u2022 B¶o mËt"],[7512,"6.2.3"],[7513,"SNMP vµ CMPI: §Ó viÖc qu¶n trÞ m¹ng cã thÓ thùc hiªn liªn th«ng trªn nhiÒu hÖ thèng m¹ng kh¸c nhau, chóng ta cÇn ph¶i cã c¸c chuÈn vÒ qu¶n trÞ m¹ng"],[7514,"Sau ®©y lµ 2 chuÈn chÝnh næi bËt: \u2022 SNMP (Simple Network Management Protocol): chuÈn cña IÌT"],[7515,"\u2022 CIMP (Common Management Information Protocol): chuÈn cña Teltcommunications"],[7516,"SNMP lµ tËp hîp c¸c chuÈn vÒ qu¶n trÞ m¹ng, bao gåm giao thøc vµ cÊu tróc c¬ së d÷ liÖu"],[7517,"SNMP ®−îc c«ng nhËn lµ mét chuÈn cho TCP/IP vµo n¨m 1989 vµ sau ®ã trë nªn rÊt phæ biÕn"],[7518,"Phiªn b¶n n©ng cÊp SNMPv2c ®−îc c«ng bè n¨m 1993"],[7519,"SNMPv2c tËp chung vµ ph©n phèi viÖc qu¶n trÞ m¹ng, ph¸t triÓn SMI, ho¹t ®éng giao thøc, cÊu tróc qu¶n lý vµ b¶o mËt"],[7520,"SNMP ®−îc thiÕt kÕ ®Ó ch¹y trong m¹ng ãI còng nh− m¹ng TCP/IP"],[7521,"KÓ tõ SNMPv3c, viÖc truy cËp MIB ®−îc b¶o vÖ b»ng viÖc x¸c minh vµ m· hãa gãi d÷ liÖu khi truyÒn qua m¹ng"],[7522,"CMIP lµ mét giao thøc qu¶n trÞ m¹ng OSI, do SIO t¹o ra vµ chuÈn hãa"],[7523,"CMIP thùc hiªn theo dâi vµ kiÓm so¸t hÖ thèng m¹ng"],[7524,"6.2.4"],[7525,"Ho¹t ®éng cña SNMP:"],[7526,"685 SNMP lµ mét giao thøc líp øng dông®−îc thiÕt kÕ ®Ó thùc hiÖn c¸c th«ng tin qu¶n trÞ m¹ng gi÷a c¸c thiÕt bÞ m¹ng"],[7527,"Víi SNMP chóng ta sÏ cã ®−îc c¸c d÷ liÖu vÒ th«ng tin qu¶n trÞ, vÝ dô: sè l−îng gãi ®−îc göi ®i qua cæng trong mçi gi©y, sè l−îng kÕt nèi TCP ®ang më, qua ®ã nhµ qu¶n trÞ m¹ng cã thÓ dÔ dµng qu¶n lý ho¹t ®éng cña hÖ thèng m¹ng,t×m vµ xö lý nã"],[7528,"HiÖn nay SNMP lµ giao thøc vÒ qu¶n trÞ m¹ng ®−îc sö dông phæ biÕn nhÊt trong m¹ng c¸c doanh nghiÖp, tr−êng ®aÞ häc� SNMP lµ mét giao thøc ®¬n gi¶n nh−ng nã cã kh¶ n¨ng xö lý hiÖu qu¶ nhiÒu sù cè khã kh©−n trong nh÷ng hÖ thèng m¹ng phøc t¹p"],[7529,"M« h×nh tæ chøc cña m¹ng qu¶n lý b»ng SNMP bao gåm 4 thµnh phÇn: \u2022 Tr¹m qu¶n lý NMS (Network Management Station)"],[7530,"\u2022 Chi nh¸nh qu¶n lý (Management Agent)"],[7531,"\u2022 C¬ së d÷ liÖu th«ng tin qu¶n trÞ MIB (Management Information Base)"],[7532,"\u2022 Giao thøc qu¶n trÞ m¹ng"],[7533,"NMS th−êng lµ mét m¸y tr¹m ®éc lËp nh−ng nã thùc hiÖn nhiÖm vô cho toµn bé hÖ thèng"],[7534,"Trªn ®ã cµi ®Æt mét sè phÇn mÒm qu¶n trÞ m¹ng NMA (Network Management Application)"],[7535,"Trªn NMA cã giao diÖn giao tiÕp víi user, cho phÐp ng−êi qu¶n trÞ cã thÓ th«ng qua ®ã ®Ó qu¶n lý m¹ng"],[7536,"C¸c phÇn mÒm nµy cã thÓ tr¶ lêi c¸c yªu cÇu cña user qua m¹ng"],[7537,"Chi nh¸nh qu¶n lý lµ c¸c phÇn mÒm qu¶n trÞ m¹ng ®−îc cµi ®Æt trªn c¸c thiÕt bÞ m¹ng then chèt nh− router, bridge, hub, host"],[7538,"C¸c phÇn mÒm nµy cung cÊp th«ng tin quan träng cho NMS"],[7539,"TÊt c¶ c¸c th«ng tin qu¶n trÞ m¹ng ®−îc l−u tr÷ trong c¬ së d÷ liÖu®Æt tÞa b¶n th©n mçi thiÕt bÞ"],[7540,"Mçi thiÕt bÞ chi nh¸nh qu¶n lý l−u c¸c th«ng tin sau: \u2022 Sè l−îng vµ tr¹ng th¸i c¸c kÕt nèi ¶o cña thiÕt bÞ ®ã"],[7541,"\u2022 Sè l−îng c¸c th«ng ®iÖp b¸o lçi mµ thiÕt bÞ ®ã nhËn ®−îc"],[7542,"\u2022 Sè l−îng bytevµ gãi d÷ liÖu ®−îc thiÕt bÞ nhËn vµo vµ chuyÓn ra"],[7543,"\u2022 ChiÒu dµi tèi ®a cña hµng ®îi chê xuÊt ra"],[7544,"\u2022 C¸c th«ng ®iÖp qu¶ng b¸ nhËn ®−îc vµ göi ®i"],[7545,"\u2022 Sè lÇn c¸c cæng bÞ t¾t vµ ho¹t ®éng trë l¹i"],[7546,"NMS thùc hiÖn chøc n¨ng theo dâi b»ng c¸ch nhËn c¸c th«ng tin tõ MIB"],[7547,"ViÖc th«ng tin liªn l¹c gi÷a tr¹m qu¶n lý c¸c chi nhµnh ®−îc thùc hiÖn bëi giao thøc qu¶n trÞ m¹ng líp øng dông"],[7548,"SNMP sö dông UDP vµ post 161, 162"],[7549,"Chóng trao ®æi ba lo¹i th«ng ®iÖp sau:"],[7550,"686 \u2022 Get: Tr¹m qu¶n lý lÊy th«ng tin cña MIB trªn chi nh¸nh"],[7551,"\u2022 Set: Tr¹m qu¶n lý cµi ®Æt gi¸ trÞ th«ng tin cña MIB trªn chi nh¸nh"],[7552,"\u2022 Trap: Chi nh¸nh th«ng b¸o cho tr¹m qu¶n lý khi cã mét sù kiÖn x¶y ra"],[7553,"M« h×nh th«ng tin liªn l¹c nh− trªn ®−îc xem lµ m« h×nh hai tÇng, xem h×nh 6.2.4.a"],[7554,"Mäi thµnh phÇn trong m¹ng ®Òu ®−îc qu¶n lý bëi SNMP"],[7555,"Trong mét vµi tr−êng hîp,"]],"downloaded":true,"m":[-1,-1],"n":"ccna_giao_trinh_tieng_viet_0958.txt","o":"https://tailieu.vn/docview/tailieu/2015/20150203/anhlacnnt/ccna_giao_trinh_tieng_viet_0958.pdf"},{"saved_path":"temp/Nghiên cứu về các công nghệ sử dụng trong mạng riêng ảo.txt","r":1.1324230432510376,"s":[[11,102,0.7387387156486511,82,0,106,0,93,"Hệ thống máy tính có thể giúp cho chúng ta thực hiện công việc hiệu quả hơn rất nhiều lần, giúp con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng và cũng lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng,\u2026 Bên cạnh đó còn rất nhiều ứng dụng khác chưa kể đến việc chúng giúp con người trong hoạt động giải trí, thư giãn,\u2026 Vậy thì làm sao chúng ta có thể thiết kế một mô hình mạng máy tính đảm bảo có khoa học, dễ vận hành cũng như dễ thay sửa một khi có sự cố xảy ra","Hệ thống mạng máy tính giúp cho chúng ta có thể thực hiện công việc hiệu quả rất nhiều lần, nó giúp cho con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng, nó cũng giúp chúng ta lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng\u2026 và rất rất nhiều ứng dụng khác chưa kế đến việc nó giúp cho con người trong hoạt động giải trí, thư giãn\u2026"],[10,101,0.6890756487846375,41,1,44,31,73,"Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng, chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời","Hiện nay việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho một công ty, cũng như một tổ chức phi kinh tế nào khác.Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng.Chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời"],[7,99,0.698113203048706,37,1,38,28,66,"Các công ty, tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại","LỜI NÓI ĐẦU Ngày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang bùng nổ trên toàn Thế giới, các công ty, các tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại"],[8,100,0.9514563083648682,49,0,51,0,50,"Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, chúng giúp con người có thể làm việc được nhanh chóng và đồng thời giúp lưu trữ dữ liệu được lâu dài","Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, mới giúp con người có thể làm việc được nhanh chóng đồng thời giúp lưu trữ dữ liệu được lâu dài"]],"t":"\n\n      Để có được đồ án này, em xin bày tỏ lòng biết ơn sâu sắc đến các thầy cô giáo trong trường Đại học Bách Khoa Hà Nội nói chung, khoa Điện Tử Viễn Thông, những người đã tận tình giảng dạy, truyền đạt cho em những kiến thức quý báu trong 5 năm học vừa qua.\n       Em xin chân thành cảm ơn thầy giáo hướng dẫn, Tiến sỹ - Giảng viên Nguyễn Quốc Khương, bộ môn Kĩ Thuật Thông Tin , khoa Điện Tử Viễn Thông , trường Đại học Bách Khoa Hà Nội đã nhiệt tình hướng dẫn, chỉ bảo và cung cấp cho em nhiều kiến thức cũng như tài liệu quý trong suốt quá trình làm đồ án. Nhờ sự giúp đỡ của thầy em mới có thể hoàn thành được đồ án này.\t \n     Trong quá trình làm đồ án không tránh khỏi nhưng thiếu sót mong thầy cô cùng các bạn góp ý để đồ án hoàn thiên hơn. Em xin cảm ơn.\n                                                                                   Hà Nôi, ngày   tháng    năm 2014\n\t        \n\n\n\n\n\nMỤC LỤC\nLỜI CẢM ƠN\t1\nDANH MỤC CÁC TỪ VIẾT TẮT\t7\nLỜI NÓI ĐẦU\t9\nChương I: TỔNG QUAN VỀ MẠNG MÁY TÍNH\t11\n1. Mạng máy tính là gì?\t11\n1.1 Khái niệm về mạng máy tính.\t11\n1.2. Các mục tiêu của việc tạo nên mạng máy tính\t11\n1.3.  Phân loại mạng máy tính\t11\n1.4.  Phân loại mạng theo khoảng cách địa lý\t12\n2. Giới thiệu về các loại mạng\t13\n2.1Định nghĩa mạng LAN\t13\n2.1.1 Các đặc tính kỹ thuật của Lan\t14\n2.2  Khái niệm về mạng Wan.\t15\n2.2.1Khái niệm mang WAN.\t15\n2.2.2 Các yếu tố trong mang WAN.\t17\n2.3   Mạng Intranet.\t19\n2.4 Mạng không dây (IEEE802.11).\t19\n3. Mô hình tham chiếu TCP/IP\t20\n3.1 Mô hình OSI 7 tầng\t20\n3.1.1 Tầng ứng dụng (Application layer ).\t21\n3.1.2 Tầng trình diễn(Presentation layer).\t22\n3.1.3 Tầng phiên(Session layer).\t22\n3.1.4 Tầng vận chuyển (Transport Layer).\t22\n3.1.5 Tầng mạng (Network Layer).\t23\n3.1.6 Tầng liên kết dữ liệu (Data Link Layer).\t23\n3.1.7 Tầng vật lý (Physical).\t23\n3.1.8 Quá trình đóng gói dữ liệu trong mô hình OSI.\t24\n3.2.1 So sánh giữa mô hình tham chiếu OSI và mô hình TCP/IP.\t26\n3.2.2 Một số giao thức cơ bản của bộ giao thức TCP/IP.\t26\n3.2.3 Bắt tay 3 bước trong TCP.\t29\n3.2.4  Quá trình ngắt phiên TCP (TCP Session Termination).\t30\n3.2.5 Quá trình gửi một gói tin giữa 2 PC\t31\n4.Địa chỉ mạng (IP).\t33\n4.1  Giao thức Internet phiên bản 4 (Ipv4).\t34\n4.2 Giao thức Internet phiên bản 6 (Ipv6).\t36\n4.2.1 Nguyên nhân phát triển IPv6\t37\n4.2.2 Những giới hạn của IPv4.\t38\n4.2.3  Đặc điểm của IPv6.\t38\n4.2.4 Cấu trúc địa chỉ IPv6:\t40\n5. Kết luận chương .\t42\nChương II : MẠNG LAN ẢO\t43\n1.Giới thiệu về Vlan.\t43\n2. Khái niệm về Vlan.\t44\n2.1 Giới thiệu về VLAN.\t44\n2.2 Miền quảng bá với VLAN và router.\t45\n2.3 Hoạt động của VLAN\t46\n2.4 Phân loại các loại Vlan.\t49\n2.5  Ưu điểm (lợi ích) của Vlan\t49\n3 .VLAN Trunking Protocol \u2013 Giao thức mạch nối VLAN \u2013 VTP.\t50\n3.1 Khái niệm, hoạt động của mạch nối (trunk)\t50\n3.1.1 Hoạt động của Trunking.\t51\n3.2  Giao thức mạch nối VLAN \u2013 VTP.\t51\n3.2.1  Nguồn gốc VTP.\t51\n3.2.2 Lợi ích của VTP.\t52\n3.2.3. VTP Domain.\t53\n3.2.4. Các chế độ VTP Domain.\t53\n3.3. STP \u2013 SPANNING TREE PROTOCOL.\t54\n3.3.1. Giới thiệu về STP.\t54\n3.3.2 Các khái niệm cơ bản về STP.\t55\n3.3.3 Quá trình bầu chọn Root Bridge.\t57\n3.4. Giao thức EtherChannel.\t58\n3.4.1 Giao thức EtherChannel là gì? Tại sao lại cần nó?\t58\n3.4.2  Giao thức trong EtherChannel.\t59\n3.5. Ethernet và chuẩn IEEE 802.\t60\n3.5.1. Giới thiệu chung về Ethernet.\t60\n3.5.2. Chức năng các tầng trong IEEE 802.\t62\n3.5.3 Cấu trúc khung Ethernet.\t64\n3.5.4  Họ IEEE 802.\t65\n3.5.5. Ethernet 100 Mbps.\t66\n4. Mô phỏng mạng Vlan .\t67\n4.1 Giới thiệu phần mêm Packet tracer.\t67\n4.2 Mô phỏng một mạng Vlan trên phần mềm packet tracer.\t68\n5 .Kết luận chương.\t70\nChương III: MẠNG RIÊNG ẢO VPN\t71\n1. Tìm hiểu mạng riêng ảo VPN .\t71\n1.1\tKhái niệm.\t71\n1.2\tCác loại VPN.\t72\n1.3 Bảo mật trong VPN.\t73\n2. VPN getway.\t76\n2.1 Đường hầm (Tunneling).\t76\n2.2 Các giao thức trong đường hầm.\t77\n2.3 Kỹ thuật Tunneling trong mạng VPN điểm-nối điểm .\t77\n2.4Kỹ thuật Tunneling trong mạng VPN truy cập từ xa .\t78\n3. Các giao thức của VPN Tunneling.\t79\n4. Mô phỏng mang VPN trên packet tracer\t81\n5 . Kết luận chương\t83\nKẾT LUẬN\t84\nTÀI LIỆU THAM KHẢO\t85\n\n\n\nDANH MỤC CÁC HÌNH VẼ\n\nHình 1:  Mô hình một số mạng cơ bản\t8\nHình 2: Mô hình một mạng WAN\t11\nHình 3: Một số thiết bị của mạng không dây\t14\nHình 4: Mô hình tham chiếu TCP/IP\t15\nHình 5: Mô hình 7 lớp OSI\t16\nHình 6: Quá trình đóng gói dữ liệu qua 7 tầng OSI\t19\nHình 7: Mô hình TCP/IP\t20\nHình 8: Quá trình bắt tay 3 bước trong TCP\t24\nHinh 9: Quá trình ngắt phiên kết nối\t25\nHình 10: Cấu trúc của một gói tin\t26\nHình 11: Quá trình đóng gói dữ liệu\t27\nHình 12: Quá trình tháo gói dữ liệu\t27\nHinh 13: Cấu trúc lớp địa chỉ IP\t30\nHình 14: Các vùng địa chỉ của các lớp\t31\nHình 15: Mô hình Ipv6\t35\nHình 16: Mô hình mạng Vlan giữa các tầng\t39\nHình 17: Ba miền quảng bá trên 3 switch khác nhau\t40\nHình 18: Ba VLAN và 3 miền quảng bá trên một switch\t40\nHình 19: Mô hình chia VLAN theo cổng\t43\nHình 20: Đường trunk trong Vlan\t45\nHình 21: Một trường BID\t51\nHình 22: Bảng chi phí của các đường đi.\t51\nHình 23: Bản tin BPDU\t52\nHình 24: Công nghệ EtherChannel\t53\nHình 25: Mối quan hệ của các chuẩn 802 với mô hình tham chiếu OSI\t56\nHình 26: Cấu trúc khung Ethernet\t59\nHình 27 : Giao diện của phần mềm packet tracer\t62\nHình 28: Mô hình mạng Vlan\t63\nHình 29: Quá trình ping thông giữa 2 máy tính của 2 mang vlan\t64\nHình 30: Quá trình gửi gói tin từ 2 máy tính trong  2 vlan khác nhau\t65\nHinh 31: Mô hình mạng VPN đơn giản\t66\nHình 32: Bộ xử lý trung tâm VPN số hiệu 3000 của hãng Cisco.\t70\nHình 33: Mô hình đường hầm\t70\nHình 34: Mô hình điểm nối điểm\t72\nHình 35: Mô hình mang VPN\t76\nHình 36: Ping thông trong mang qua đường hầm\t76\n\n\nDANH MỤC CÁC TỪ VIẾT TẮT\n\n\tPAN\n\tPersonal Area Network\n\tMạng cá nhân\n\n\tLAN\n\tLocal Area Netword \n\tMạng cục bộ\n\n\tMAN\n\tMetropolitan AreaNetwork\n\tMạng đô thị\n\n\tWAN\n\tWide Area Network\n\tMạng diện rộng\n\n\tTCP/IP\n\tInternet protocol suite /IP suite \n\tBộ giao thức liên mạng\n\n\tOSI\n\tOpen Systems Interconnection Reference Model\n\tMô hình tham  chiếu kết nối các hệ thống mở\n\n\tHTTP\n\tHyperText Transfer Protocol\n\tGiao thức truyền tải siêu văn bản\n\n\tFTP\n\tFile Transfer Protocol \n\tGiao thức truyền tập tin\n\n\tSMTP\n\tSimple Mail Transfer Protocol\n\tGiao thức truyền tải thư tín đơn giản\n\n\tPOP3\n\tPost Office Protocol\n\tLà một giao thức gửi thư điện tử\n\n\tTCP\n\tTransmission Control Protocol\n\tGiao thức điều khiển truyền vận\n\n\tUDP\n\tUser Datagram Protocol\n\tMột giao thức trên TCP/IP\n\n\tDHCP\n\tDynamic Host Configuration Protocol\n\tGiao thức cấu hình động máy chủ\n\n\tIP\n\tInternet Protocol\n\tLà một địa chỉ của 1 host\n\n\tICMP\n\tInternet Control Message Protocol\n\tBộ giao thức liên mạng\n\n\tIGMP\n\tInternet group management protocol\n\tGiao thức quản lý nhóm Internet\n\n\tTELNET\n\tTErminaL NETwork\n\n\t\nLà một giao thức mang để truy nhập.\n\n\n\tSNMP\n\tSimple Network Management Protocol\n\tGiao thức kiểm tra các thiết bị mạng.\n\n\tVoIP\n\tVoice over Internet Protocol\n\tTruyền giọng nói trên giao thức IP\n\n\tIpv4\n\tInternet Protocol version 4\n\tInternet phiên bản 4\n\n\tIPv6\n\tInternet Protocol version 6\n\tInternet phiên bản 6\n\n\tIEEE\n\t Institute of Electrical and Electronics Engineers\n\tHọ ethernet\n\n\tMAC\n\tMedia Access Control\n\tĐiều khiển truy nhập môi trường\n\n\tCCNA\n\tCisco Certificated Network Academy\n\tChứng chỉ về mạng của cisco\n\n\tVPN\n\tVirtual Private Network\n\tMạng riêng ảo\n\n\n\n\n\nLỜI NÓI ĐẦU\n\n     Ngày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang bùng nổ trên toàn Thế giới, các công ty, các tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại. Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, mới giúp con người có thể làm việc được nhanh chóng đồng thời giúp lưu trữ dữ liệu được lâu dài.\n      Hiện nay việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho một công ty, cũng như một tổ chức phi kinh tế nào khác.Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng.Chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời. Hệ thống mạng máy tính giúp cho chúng ta có thể thực hiện công việc hiệu quả rất nhiều lần, nó giúp cho con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng, nó cũng giúp chúng ta lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng\u2026 và rất rất nhiều ứng dụng khác chưa kế đến việc nó giúp cho con người trong hoạt động giải trí, thư giãn\u2026.\n     Trên cơ sở những kiến thức tích luỹ trong những năm học tập chuyên ngành Điện Tử - Viễn Thông tại trường đại học Bách Khoa Hà Nội và với sự hướng dẫn của thầy Nguyễn Quốc Khương em đã tìm hiểu và hoàn thành đồ án tốt nghiệp với đề tài : \u201cNghiên cứu về các công nghệ sử dụng trong mạng riêng ảo\u201d. Em xin chân thành thầy Nguyễn Quốc Khương đã trực tiếp hướng dẫn và giúp đỡ em hoàn thành đồ án tốt nghiệp này.\n\nChương I: TỔNG QUAN VỀ MẠNG MÁY TÍNH\n1. Mạng máy tính là gì?\n1.1 Khái niệm về mạng máy tính.\n\n     Mạng máy tính là hệ thống các máy tính độc lập được kết nối với nhau thông qua các con đường truyền vật lý và tuân theo các quy ước truyền thống nào đó.Khái niêm máy tính đôc lập ở đây có nghĩa là các máy tính không có máy nào có khả năng khởi động hoặc đình chỉ một máy khác.\n     Các đường truyền vật lý được hiểu là các môi trường truyền tín hiệu vật lý (có thể hữu tuyến hoặc vô tuyến như dây dẫn, tia Laser, sóng ngắn, vệ tinh nhân tạo..)\nCác quy ước truyền thông chính là cơ sở để các máy tính có thể \u201cnói chuyện\u201d được với nhau và là một yếu tố quan trọng hàng đầu khi nói về công nghệ mạng máy tính. \n\n1.2. Các mục tiêu của việc tạo nên mạng máy tính\n\n· Sử dung chung tài nguyên: chương trình, dữ liệu, thiết bị..\n· Tăng độ tin cậy của hệ thống thông tin: nếu một máy hay một đơn vị dữ liệu nào đó trong mạng bị hỏng thì luôn có thể sử dụng một máy khác hay một bản sao của đơn vị dữ liệu.\n· Tiết kiệm chi phí, giá thành.\n· Quản lý tập trung.\n· Tạo ra môi trường truyền thông mạnh giữa nhiều người sử dung trên pham vi địa lý rộng. Mục tiêu này ngày càng trở nên quan trọng.\n1.3.  Phân loại mạng máy tính\n\n    Có nhiều cách phân loại mạng khác nhau tùy thuộc vào yếu tố chính được chọn dùng để làm chỉ tiêu phân loại, thông thường người ta phân loại mạng theo các tiêu chí sau :\n· Khoảng cách địa lý của mạng.\n· Kĩ thuật chuyển mạch mà mạng áp dụng.\n· Kiến trúc mang.\n· Hệ điều hành mạng sử dụng Unix, Linux, Windowns NT Server ....\n\n1.4.  Phân loại mạng theo khoảng cách địa lý \n\n      Nếu lấy khoảng cách địa lý làm yếu tố phân loại mạng thì ta có mạng cục bộ, mạng đo thị, mạng diên rộng, mạng toàn cầu.\nMạng cá nhân (PAN-Personal Area Network): là mạng chỉ hoạt động >10m xung quanh người dùng nhằm phục vụ truyền nhân các thiết bị ngoại vi như tai nghe, chuột không dây\u2026\nMạng cục bộ: (Lan \u2013 Local Area Netword ): là mạng chỉ được cài đặt trong phạm vi tương đối nhỏ hẹp như trong một tòa nhà, một xí nghiệp \u2026với khoảng cách lớn nhất giữa các máy tính trên mạng trong vòng vài km trở lại.\nMạng đô thị (MAN \u2013 Metropolitan Area Network): là mang được cài đặt trong phạm vi một đô thị, một trung tâm văn hóa xã hội, có bán kính từ tối đa10km trờ lại.\nMạng diện rộng(WAN \u2013 Wide Area Network): là mạng có diện tích bao phủ rộng lớn, phạm vi mạng có thể vượt biên giới quốc gia thậm chí cả lục địa.\nDưới đây là mô hình một số mạng cơ bản.\n\n\n\n\n\nHình 1:  Mô hình một số mạng cơ bản\n2. Giới thiệu về các loại mạng\n\n2.1Định nghĩa mạng LAN\n\n     LAN (viết tắt từ tên tiếng Anh Local Area Network, \"mạng máy tính cục bộ\") là một hệ thống mạng dùng để kết nối các máy tính trong một phạm vi nhỏ (nhà ở, phòng làm việc, trường học, \u2026). Các máy tính trong mạng LAN có thể chia sẻ tài nguyên với nhau, mà điển hình là chia sẻ tập tin, máy in, máy quét và một số thiết bị khác.\nĐặc điểm của mạng cục bộ:\n· Mạng cục bộ có quy mô nhỏ, thường là bán kính dưới vài km. Đặc điểm này cho phép không cần dùng các thiết bị dẫn đường với các mối liên hệ phức tạp.\n· Mạng cục bộ thường là sở hữu của một tổ chức. Điều này dường như có vẻ ít quan trọng nhưng trên thực tế đó là điều khá quan trọng để việc quản lý mạng có hiệu quả.\n· Mang cục bộ thường là sở hữu của một tổ chức. Điều này dường như có vẻ ít quan trọng nhưng trên thực tế đó là điều khá quan trọng để việc quản lý mạng có hiệu quả .\n· Mạng cục bộ có tốc độ cao và ít lỗi. Trên mạng rộng tốc độ nói chung chỉ đạt  vài Kbit/s. Còn tốc độ thông thường trên mạng cục bộ là 10, 100 Mb/s và tới nay với Gigabit Ethernet, tốc độ trên mạng cục bộ có thể đạt 1Gb/s rất cao.\n\n2.1.1 Các đặc tính kỹ thuật của Lan\n\n· Đường truyền: Là thành phần quan trọng của một mạng máy tính, là phương tiện dùng để truyền các tín hiệu từ giữa các máy tính. Các tín hiệu điện tử đó chính là các thông tin, dữ liệu được biểu thị dưới dạng các xung nhị phân (ON-OFF), mọi tín hiệu truyền giữa các máy tính với nhau đều thuộc sóng điện từ, tùy theo tần số mà ta có thể dựng các đường vật lý khác nhau. Các máy tính được kết nối với nhau bởi các loại cáp truyền: cáp đồng trục, cáp xoắn đôi\u2026\n· Chuyển mạch:Là đặc trưng kỹ thuật chuyển tín hiệu giữa các nút trong mạng, các nút trong mạng có chức năng hướng thông tin tới đích nào đó trong mạng. Trong mạng nội bộ, phần chuyển mạch thực hiện thông ua các thiết bị chuyển mạch như hub, switch\u2026\n· Kiến trúc mạng:Kiến trúc mạng máy tính (network architecture) thể hiện cách kết nối các máy tính với nhau và tập hợp các quy tắc, quy ước mà tất cả các thực thể tham gia truyền thông trên mạng phải tuân theo để đảm bảo cho mạng hoạt động tốt.\n· Khi nói đến kiến trúc của mạng người ta muốn nói tới hai vấn đề là topo mang (Network topology) và giao thưc mang (Network protocol).\nKhi nói đến kiến trúc của mạng người ta muốn nói tới hai vấn đề là topo mạng(Network topology) và giao thức mạng (Network protocol).\n· Network Topology: Cách kết nối các máy tính với nhau về mặt hình học màta gọi là Topo của mạng.Các hình trạng mạng cơ bản đó là: hình sao, hình bus, hình vòng.\n· Network Protocol: Tập hợp các quy ước truyền thông giữa các thực thểtruyền thông mà ta gọi là giao thức (hay nghi thức) của mạng\nCác giao thức thường gặp nhất là: TCP/IP, NETBIOS, IPX/SPX,...\nHệ điều hành mạng: Hệ điều hành mạng là một phần mềm hệ thống có cácchức năng sau:\n· Quản lý tài nguyên của hệ thống, các tài nguyên này gồm:\n· Tài nguyên thông tin (về phương diện lưu trữ) hay nói một cách đơn giản làquản lý tệp. Các công việc về lưu trữ tệp, tìm kiếm, xóa, copy, nhóm, đặt các thuộctính đều thuộc nhóm công việc này.\n· Tài nguyên thiết bị: Điều phối việc sử dụng CPU, các thiết bị ngoại vi... để tốiưu hóa việc sử dụng.\n+ Quản lý người dựng và các công việc trên hệ thống.\nHệ điều hành đảm bảo giao tiếp giữa người sử dụng, chương trình ứng dụng vớithiết bị của hệ thống.\n+ Cung cấp các tiện ích cho việc khai thác hệ thống thuận lợi (ví dụ Formatđĩa, sao chép tệp và thư mục, in ấn chung ...)\nCác hệ điều hành mạng thông dụng nhất hiện nay là: WindowsNT,Windows7, Windows 2000, Unix,Linux\u2026..\n2.2  Khái niệm về mạng Wan.\n2.2.1Khái niệm mang WAN.\n\n\nHình 2: Mô hình một mạng WAN\n\n    Wide Area Networks \u2013 WAN, là mạng được thiết lập để liên kết các máy tính của hai hay nhiều khu vực khác nhau, ở khoảng cách xa về mặt địa lý, như giữa các quận trong một thành phố, hay giữa các thành phố hay các miền trong nước.Đặc tính này chỉ có tính chất ước lệ, nó càng trở nên khó xác định với việc phát triển mạnh của các công nghệ truyền dẫn không phụ thuộc vào khoảng cách. Tuy nhiên việc kết nối với khoảng cách địa lý xa buộc WAN phụ thuộc vào nhiều yếu tố như: giải thông và chi phí cho giải thông, chủ quản của mạng, đường đi của thông tin trên mạng.WAN có thể kết nối thành mạng riêng của một tổ chức, hay có thể phải kết nối quanhiều hạ tầng mạng công cộng và của các công ty viễn thông khác nhau.WAN có thể dùng đường truyền có giải thông thay đổi trong khoảng rất lớn từ 56Kbps đến T1 với 1.544 Mbps hay E1 với 2.048 Mbps,....và đến Giga bít-Gbpslà các đường trục nối các quốc gia hay châu lục. Ở đây bps (Bit Per Second) làmột đơn vị trong truyền thông tương đương với 1 bit được truyền trong mộtgiây,ví dụnhư tốc độ đường truyền là 1 Mbps tức là có thể truyền tối đa 1 Megabittrong 1giây trên đường truyền đó).\n     Do sự phức tạp trong việc xây dựng, quản lý, duy trì các đường truyền dẫn nên khi xây dựng mạng diện rộng WAN người ta thường sử dụng các đường truyền được thuê từ hạ tầng viễn thông công cộng, và từ các công ty viễn thông hay các nhà cung cấp dịch vụ truyền số liệu. Tùy theo cấu trúc của mạng những đường truyền đó thuộc cơ quan quản lý khác nhau như các nhà cung cấp đường truyền nội hạt, liên tỉnh, liên quốc gia, chẳng hạn ở Việt Nam là công ty Viễn thông liên tỉnh \u2013 VTN, công ty viễn thông quốc tế - VTI . Các đường truyền đó phải tuân thủ cácquy định của chính phủ các khu vực có đường dây đi qua như: tốc độ, việc mãhóa.\n    Với WAN đường đi của thông tin có thể rất phức tạp do việc sử dụng các dịch vụ truyền dữ liệu khác nhau, của các nhà cung cấp dịch vụ khác nhau. Trong quá trình hoạt động các điểm nút có thể thay đổi đường đi của các thông tin khi phát hiện ra có trục trặc trên đường truyền hay khi phát hiện có quá nhiều thông tin cần truyềngiữa hai điểm nút nào đó. Trên WAN thông tin có thể có các con đường đi khác nhau, điều đó cho phép có thể sử dụng tối đa các năng lực của đường truyền và nâng cao điều kiện an toàn trong truyền dữ liệu.Phần lớn các WAN hiện nay được phát triển cho việc truyền đồng thời trên đườngtruyền nhiều dạng thông tin khác nhau như: video, tiếng nói, dữ liệu...nhằm làm giảm chi phí dịch vụ.\n2.2.2 Các yếu tố trong mang WAN.\n\n     Môi trường : các yếu tố liên quan đến mục tiêu thiết kế như môi trường của WAN,các yêu cầu về năng lực truyền thông của WAN(hiệu năng mạng), khả năng cung cấp động và các ràng buộc về dải thông, thoả mãn các đặc trưng của dữ liệu cầntrao đổi trên WAN, đặc biệt các loại dữ liệu cần đảm bảo chất lượng dịch vụ như dữ liệu đa phương tiện, dữ liệu đòi hỏi đáp ứng thời gian thực như giao dịch về tài chính.Môi trường của WAN ở đây được thể hiện qua các tham số như số lượng các trạmlàm việc, các máy chủ chạy các dịch vụ, và vị trí đặt chúng, các dịch vụ và việcđảm bảo chất lượng các dịch vụ đang chạy trên WAN. Việc chọn số lượng và vị trí đặt các máy chủ, các máy trạm trong WAN liên quan nhiều đến vấn đề tối ưu các luồng dữ liệu truyền trên mạng. Chẳng hạn khu vực nào có nhiều trạm làm việc, chúng cần thực hiên nhiều giao dịch với một hay nhiều máy chủ nào đó, thìcác máy chủ đó cũng cần phải đặt trong khu vực đó, nhằm giảm thiểu dữ liệutruyền trên WAN.Yêu cầu về hiệu năng cần được quan tâm đặc biệt khi thiết kế các WAN yêu cầu các dịch vụ đòi hỏi thời gian thực như VoIP, hay hội nghị truyền hình, giao dịchtài chính,... Khi đó các giới hạn về tốc độ đường truyền, độ trễ,... cần được xem xét kỹ, nhất là khi dùng công nghệ vệ tinh, vô tuyến,...Các đặc trưng của dữ liệu cũng cần được quan tâm để nhằm giảm thiểu chi phí vềgiải thông khi kết nối WAN. Các đặc trưng dữ liệu đề cập ở đây là dữ liệu client/server, thông điệp, quản trị mạng, ... giải thông nào đảm bảo chất lượng dịch vụ?\n    Các yêu cầu kỹ thuật: năm yêu cầu cần xem xét khi thiết kế WAN đó là tính khảm ở rộng, tính dễ triển khai, tính dễ phát hiện lỗi, tính dễ quản lý, hỗ trợ đa giaothức.\n· Tính khả mở rộng thể hiện ở vấn đề có thể mở rộng, bổ sung thêm dịch vụ, tăng số lượng người dùng, tăng giải thông mà không bị ảnh hưởng gì đến cấu trúc hiện có của WAN, và các dịch vụ đã triển khai trên đó.\n· Tính dễ triển khai thể hiện bằng việc thiết kế phân cấp, mô đun hoá, khốihoá ở mức cao. Các khối, các mô đun của WAN độc lập một cách tương đối, quá trình triển khai có thể thực hiện theo từng khối, từng mô đun.\n· Tính dễ phát hiện lỗi là một yêu cầu rất quan trọng, vì luồng thông tin vậnchuyển trên WAN rất nhậy cảm cho các tổ chức dùng WAN. Vậy việc phát hiện và cô lập lỗi cần phải thực hiện dễ và nhanh đối với quản trị hệ thống.\n· Tính dễ quản lý đảm bảo cho người quản trị mạng làm chủ được toàn bộhệ thống mạng trong phạm vi địa lý rộng hoặc rất rộng.\n· Hỗ trợ đa giao thức có thể thực hiện được khả năng tích hợp tất các cácdịch vụ thông tin và truyền thông cho một tổ chức trên cùng hạ tầng công nghệ thông tin, nhằm giảm chi phí thiết bị và phí truyền thông, giảm thiểu tài nguyên con người cho việc vận hành hệ thống.\n     An ninh-an toàn: việc đảm bảo an ninh, xây dựng chính sách an ninh,và thực hiện an ninh thế nào? ngay từ bước thiết kế.\n2.3   Mạng Intranet.\n\n     Intranet là một mạng riêng cho một doanh nghiệp.Về mặt kỹ thuật, Intranet sử dụng công nghệ của Internet - giao thức TCP/IP.Một mạng Intranet điển hình bao gồm những kết nối thông qua một hay nhiều máy tính cổng nối tới mạng Internet.Mục đích chính của mạng này là chia sẻ thông tin và các nguồn lực của công ty. Một mạng Intranet đơn giản giúp các thành viên trong doanh nghiệp chia sẻ dữ liệu, sử dụng chung các website, và cộng tác với nhau.\n     Là một mạng Internet thu nhỏ trong một công ty,cơ quan, tổ chức hay bộ ngành nào đó và được giới hạn người dùng, sử dụng các công nghệ kiểm soát,truy nhập hay bảo mật thông tin\u2026.\n2.4 Mạng không dây (IEEE802.11).\n\n\nHình 3: Một số thiết bị của mạng không dây\n\n     Mạng không dây (Wireless Network) là một khái niệm rất rộng, nó tương đương với mạng có dây nhưng có 1 điều khác qua trọng ở đây là mạng không dây dùng sóng làm phương tiện truyền dẫn sóng chủ yếú. Các phương tiện hiện nay như điện thoai,laptop, ipad\u2026.đều có thể liên lạc với nhau bằng phương pháp không dây và theo kiểu Lan.\n3. Mô hình tham chiếu TCP/IP\n\n\nHình 4: Mô hình tham chiếu TCP/IP\n\n3.1 Mô hình OSI 7 tầng\n\n      Khái niệm: là một cấu trúc phả hệ có 7 tầng , nó xác định các yêu cầu cho sự giao tiếp giữa 2 máy tính tính. Mô hình này được định nghĩa bởi Tổ chức tiêu chuẩn hóa quốc tế trong tiêu chuẩn số 7498-1.Mục đích này là cho phép sự tương giao giữa các hệ máy đa dạng được cung cấp bởi các nhà sản xuất khác nhau. Mô hình cho phép tất cả các thành phần của mạng hoat đông hòa đồng bất kể thành phần ấy do ai tạo dựng.\n      Việc nghiên cứu về mô hình OSI được bắt đầu tại ISO vào năm 1971 với mục tiêu nhằm tới việc nối kết các sản phẩm của các hãng sản xuất khác nhau và phối hợp các hoạt động chuẩn hoá trong các lĩnh vực viễn thông và hệ thống thông tin.Đến năm 1984, mô hình tham chiếu OSI chính thức được đưa ra giới thiệu.\n\nHình 5: Mô hình 7 lớp OSI\n\n3.1.1 Tầng ứng dụng (Application layer ).\n\n· Đây là tầng trên cùng, Là tầng gần với người sử dụng nhất. Nó cung cấp phương tiện cho người dùng truy nhập các thông tin và dữ liệu trên mạng thông qua chương trình ứng dụng.\n· Các ứng dụng cung được cấp như các chương trình xử lý kí tự, bảng biểu, thư tín, các giao thức HTTP, FTP, SMTP, POP3, Telnet.\n3.1.2 Tầng trình diễn(Presentation layer).\n\n      Chuyển đổi các thông tin từ cú pháp người sử dụng sang cú pháp để truyền dữ liệu, ngoài ra nó có thể nén dữ liệu truyền và mã hóa chúng trước khi truyền đễ bảo mật. Tầng này sẽ định dạng dữ liệu từ lớp 7 đưa xuống rồi gửi đi đảm bảo sao cho bên thucó thể đọc được dữ liệu của bên phát. Các chuẩn định dạng dữ liệu của lớp 6 là GIF, JPEG, PICT, MP3, MPEG \u2026\n\n3.1.3 Tầng phiên(Session layer).\n\n      Tầng phiên kiểm soát các (phiên) hội thoại giữa các máy tính.Tầng nàythiết lập, quản lý và kết thúc các kết nối giữa trình ứng dụng địa phươngvà trình ứng dụng ở xa.thực hiện thiết lập, duy trì và kết thúc các phiên làm việc giữa hai hệ thống. Nó xác lập ánh xạ giữa các tên đặt địa chỉ, tạo ra các tiếp xúc ban đầu giữa các máy tính khác nhau trên cơ sở các giao dịch truyền thông.Các giao thức trong lớp 5 sử dụng là NFS, X- Window System, ASP.\n\n3.1.4 Tầng vận chuyển (Transport Layer).\n\n     Tầng vận chuyển xác định địa chỉ trên mạng, cách thức chuyển giao gói tin trên cơ sở trực tiếp giữa hai đầu mút, đảm bảo truyền dữ liệu tin cậy giữa hai đầu cuối (end-to-end). Để bảo đảm được việc truyền ổn định trên mạng tầng vận chuyển thường đánh số các gói tin và đảm bảo chúng chuyển theo thứ tự.Bên cạnh đó lớp 4 có thể thực hiện chức năng đièu khiển luồng và điều khiển lỗi.Các giao thức phổ biến tại đây là TCP, UDP\n· Phân chia kênh truyền : theo tần sô, theo thời gian.\n· Dồn kênh và phân kênh\n· Port number phân biệt gói  tin của tiến trình nào(16 bit) vi dụ FPT:21. telnet :23, SMTP: 25, DNS:53,HTTP:80\u2026.\n3.1.5 Tầng mạng (Network Layer).\n\t\nTầng mạng có nhiệm vụ :\n· Xác định các đường đi : xác đinh các router trung gian, các tuyến đường gói tin phải truyền để đến nơi nhận thuật toán này gọi là định tuyến.\n· Chuyển mạch: Router phải gửi gói tin đến đầu ra thích hợp\n· Thiết lập các đường truyền\n· Xác định việc chuyển hướng, vạch đường các gói tin trong mạng (chức năng định tuyến), các gói tin này có thể phải đi qua nhiều chặng trước khi đến được đích cuối cùng. Lớp này là lớp có liên quan đến các địa chỉ logic trong mạng Các giao thức hay sử dụng ở đây là IP, Nat,DHCP\u2026\n\n3.1.6 Tầng liên kết dữ liệu (Data Link Layer).\n\n     Tầng liên kết dữ liệu có nhiệm vụ xác định cơ chế truy nhập thông tin trên mạng, các dạng thức chung trong các gói tin, đóng gói và phân phát các gói tin.Lớp 2 có liên quan đến địa chỉ vật lý của các thiết bị mạng, topo mạng, truy nhập mạng, các\ncơ chế sữa lỗi và điều khiển luồng.\nNhiệm vụ chính:\n· Xác định các giao thức trực tiếp với các thành phần vật lý như card mạng, dây cáp.\n· Đưa dữ liệu vào khung và điều khiển luồng thông tin qua liên kết này.\n\n3.1.7 Tầng vật lý (Physical).\n\n     Tầng này được biết đến là tầng vật lý trong mô hình.Tầng được định nghĩa là tất cả các đặc tả về điện và vật lý cho các thiết bị.Trong đó bao gồm bố trí của các chân cắm (pin), các hiệu điện thế, và các đặc tả về cáp nối (cable). Các thiết bị tầng vật lí bao gồm Hub, bộ lặp (repeater), thiết bị tiếp hợp mạng (network adapter) và thiết bị tiếp hợp kênh máy chủ (Host Bus Adapter)- (HBA dùng trong mạng lưu trữ (Storage Area Network)\u2026.\n3.1.8 Quá trình đóng gói dữ liệu trong mô hình OSI.\n\n     Trong mô hình tham chiếu OSI dữ liệu trước khi được gửi đi phải tiến hành đóng gói, và khi nhận được dữ liệu quá trình mở gói được diễn ra theo chiều ngược lại. Dữ liệu được gửi từ tầng ứng dụng đi xuống các tầng dưới của mô hình OSI, mỗi tầng có những định nghĩa riêng về dạng dữ liệu mà nó sử dụng.Tại nơi gửi, mỗi tầng coi gói tin của tầng trên gởi xuốnglà dữ liệu của nó và thêm vào gói tin các thông tin điều khiển của mình sau đó chuyển tiếp xuống tầng dưới.Tại nơi nhận, quá trình diễn ra ngược lại, mỗi tầng lại tách các thông tin điều khiển của mình ra và chuyển dữ liệu lên tầng trên.\n\nHình 6: Quá trình đóng gói dữ liệu qua 7 tầng OSI\n\nVới 5 bước chuyển đổi để đóng gói dữ liệu :\n1. Xây dựng dữ liệu\n2. Đóng gói dữ liệu tại tầng vận chuyển\n3. Bổ sung địa chỉ IP vào header tầng mạng .\n4. Bổ sung header và trailer tại tầng liên kết dữ liệu .\n5. Chuyển thành các bit để truyền tại tầng vật lý .\n\n3.2  Mô hình TCP/IP.\n\nHình 7: Mô hình TCP/IP\n\n     Khái niệm: Mạng máy tính khổng lồ Internet hiện nay đang sử dụng mô hình TCP/IP để quản lý việc truyền thông. TCP/IP được xem là giản lược của mô hình OSI với bốn lớp sau: ứng dụng (tích hợp 3 lớp trên cùng của mô hình OSI), Vận chuyển (tương đương với lớp Vận chuyển của OSI), Internet (tương đương với lớp Mạng nhưng chỉ sử dụng giao thức IP để định địa chỉ logic cho các máy tính) và Truy cập mạng (bao gồm 2 lớp dưới cùng của mô hình OSI).\n      Một số giao thức thường gặp trong mô hình TCP/IP: IP (Internet Protocol), ICMP (Internet Control Message Protocol), IGMP (Internet Group Message Protocol),\nTCP,UDP,Telnet....\n3.2.1 So sánh giữa mô hình tham chiếu OSI và mô hình TCP/IP.\n\nCác điểm giống nhau giữa mô hình OSI và TCP/IP:\n· Điều phân lớp chức năng.\n· Có lớp ứng dụng gồm một số các dịch vụ.\n· Đều có lớp vận chuyển và lớp mạng.\n· Chuyển mạch gói là hiển nhiên.\n· Đều giống nhau về mối quan hệ trên dưới, ngang hàng.\nCác điểm khác nhau giữa mô hình OSI và TCP/IP:\n· TCP/IP gộp chức năng lớp trình bày và lớp phiên vào lớp ứng dụng\n· TCP/IP gộp lớp vật lý và lớp liên kết dữ liệu thành một lớp.\n· TCP/IP đơn giản vì có ít lớp hơn .\n· OSI không có khái niệm chuyển phát thiếu tin cậy ở lớp 4 như trường hợp UDP ở mô hình TCP/IP.\n     Internet được phát triển bởi các tiêu chuẩn của giao thức TCP/IP.TCP/IP được tín nhiệm bởi các giao thức cụ thể của nó, ngược lại mô hình OSI không định ra một giao thức cụ thể nào và nó chỉ là một khuôn mẫu hướng dẫn để hiểu và tạo ra một quá trình truyền thông.\n3.2.2 Một số giao thức cơ bản của bộ giao thức TCP/IP.\n\n3.2.2.1. Giao thức gói tin người sử dụng UDP (User Datagram Protocol)\n\n· UDP là giao thức không liên kết (Connectionless). UDP sử dụng cho các tiến trình không yêu cầu về độ tin cậy cao, không có cơ chế xác nhận ACK, không đảm bảo chuyển giao các gói dữ liệu đến đích và theo đúng thứ tự và không thực hiện loại bỏ các gói tin trùng lặp. Nó cung cấp cơ chế gán và quản lý các số hiệu cổng để định danh duy nhất cho các ứng dụng chạy trên một Client của mạng và thực hiện việc ghép kênh. UDP thường sử dụng kết hợp với các giao thức khác, phù hợp cho các ứng dụng yêu cầu xử lý nhanh như các giao thưc SNMP và VoIP.\n· Giao thức SNMP (Simple Network Management Protocol) là giao thức quản lý mạng phổ biến, khả năng tương thích cao. SNMP cung cấp thông tin quản trị MIB (Management Information Base) và hỗ trợ quản lý và giám sát Agent.\n· VoIP ứng dụng UDP: Kỹ thuật VoIP (Voice over IP) được thừa kế kỹ thuật giao vận IP.\n\n3.2.2.2 Giao thức điều khiển truyền TCP (Transmission Control Protocol)\n\n     TCP là một giao thức hướng liên kết (Connection Oriented), tức là trước khi truyền dữ liệu, thực thể TCP phát và thực thể TCP thu thương lượng để thiết lập một kết nối logic tạm thời, tồn tại trong quá trình truyền số liệu. TCP nhận thông tin từ tầng trên, chia dữ liệu thành nhiều gói theo độ dài quy định và chuyển giao các gói tin xuống cho các giao thức tầng mạng (Tầng IP) để định tuyến. Bộ xử lý TCP xác nhận từng gói, nếu không có xác nhận gói dữ liệu sẽ được truyền lại.Thực thể TCP bên nhận sẽ khôi phục lại thông tin ban đầu dựa trên thứ tự gói và chuyển dữ liệu lên tầng trên.\nTCP cung cấp khả năng truyền dữ liệu một cách an toàn giữa các thành trong liên mạng.\n     Cung cấp các chức năng kiểm tra tính chính xác của dữ liệu khi đến đích và truyền lại dữ liệu khi có lỗi xảy ra. TCP cung cấp các chức năng chính sau:\n\n· Thiết lập, duy trì, giải phóng liên kết giữa hai thực thể TCP.\n· Phân phát gói tin một cách tin cậy.\n· Tạo số thứ tự (Sequencing) các gói dữ liệu.\n· Điều khiển lỗi.\n· Cung cấp khả năng đa kết nối cho các quá trình khác nhau giữa thực thể nguồn và thực thể đích thông qua việc sử dụng số hiệu cổng.\n· Truyền dữ liệu theo chế độ song công (Full-Duplex).\n· TCP có những đặc điểm sau:\n· Hai thực thể liên kết với nhau phải trao đổi, đàm phán với nhau về các thông tin liên kết. Hội thoại, đàm phán nhằm ngăn chặn sự tràn lụt và mất dữ liệu khi truyền.\n· Hệ thống nhận phải gửi xác nhận cho hệ thống phát biết rằng nó đã nhận gói dữ liệu.\n· Các Datagram IP có thể đến đích không đúng theo thứ tự , TCP nhận sắp xếp lại.\n· Hệ thống chỉ phát lại gói tin bị lỗi, không loại bỏ toàn bộ dòng dữ liệu.\n\n3.2.2.3 Điều khiển lưu lượng và điều khiển tắc nghẽn.\n\n     Cơ chế cửa sổ động :là một trong các phương pháp điều khiển thông tin trong mạng máy tính. Độ lớn của cửa sổ bằng số lượng các gói dữ liệu được gửi liên tục mà không cần chờ thông báo trả lời về kết quả nhận từng gói dữ liệu đó.Độ lớn cửa sổ quyết định hiệu suất trao đổi dữ liệu trong mạng.Nếu truyền bị lỗi, dữ liệu phải gửi lại lớn thì hiệu quả sử dụng đường truyền thấp. Giao thức TCP cho phép thay đổi độ lớn của sổ một cách động, phụ thuộc vào độ lớn bộ đệm thu của thực thể TCP nhận.\n      Cơ chế phát lại thích nghi: Để đảm bảo kiểm tra và khắc phục lỗi trong việc trao đổi dữ liệu qua liên mạng, TCP phải có cơ chế đồng hồ kiểm tra phát (Time Out) và cơ chế phát lại (Retransmission) mềm dẻo, phụ thuộc vào thời gian trễ thực của môi trường truyền dẫn cụ thể.\n       Cơ chế điều khiển tắc nghẽn: Hiện tương tắc nghẽn dữ liệu thể hiện ở việc gia tăng thời gian trễ của dữ liệu khi chuyển qua mạng. Để hạn chế khả năng dẫn đến tắc nghẽn dữ liệu trong mạng, điều khiển lưu lượng dựa trên việc thay đổi độ lớn của sổ phát.\nThiết lập và huỷ bỏ liên kết: TCP là một giao thức hướng liên kết, tức là cần phải thiết lập một liên kết giữa một cặp thực TCP trước khi truyền dữ liệu. Sau khi liên kết được thiết lập, những giá trị cổng (Port) hoạt động như một nhận dạng logic được sử dụng nhận dạng mạch ảo (Virtual Circuit).Trên kênh ảo dữ liệu được truyền song công (Full Duplex). Liên kết TCP được duy trì trong thời gian truyền dữ liệu. Kết thúc truyền, liên kết TCP được giải phóng, các tài nguyên như bộ nhớ, các bảng trạng thái..cũng được giải phóng.\n      Thiết lập liên kết TCP: Được thực hiện trên cơ sở phương thức bắt tay ba bước (Tree - Way Handsake): Một phần khá quan trọng trong giao thức TCP đó là quá trình bắt tay 3 bước (three way \u2013 handshake), đây chính là quá trình tạo nên thương hiệu \u201ctin tưởng\u201d cho TCP\n3.2.3 Bắt tay 3 bước trong TCP.\n\n\nHình 8: Quá trình bắt tay 3 bước trong TCP\nTrong ví dụ trên ta xét quá trình bắt tay 3 bước giữa một máy Client và Server :\n· Bước 1 : Client gửi gói tin TCP đến Server yêu cầu thiết lập phiên kết nối. Trong gói tin TCP đầu tiên này cờ SYN được \u201cdựng\u201d lên(bit SYN có giá trị =1) và Sequence Number được khởi tạo ngẫu nhiên (trong ví dụ này sq =1000).\n· Bước 2 : Server đáp trả lại yêu cầu của Client với gói tin TCP có cờ SYN và ACK được \u201cdựng\u201d lên, báo rằng đã nhận được gói tin yêu cầu và đang diễn ra quá trình đồng bộ thỏa thuận với Client. Trong gói tin TCP respone này có bit SYN =1, bit ACK =1, Sequence Number khởi tạo ngẫu nhiên(ở đây là 2000), giá trị Acknowledgement number =1001 (có nghĩa là Server đã nhận được gói tin có thứ tự 1000 và mong muốn nhận được gói tin tiếp theo có giá trị Sequence number =1001).\n· Bước 3 : Client gửi gói tin TCP với cờ ACK được dựng lên và giá trị Sequence number = 1001, và Acknowledgement number=2001 (mong muốn nhận được gói tin tiếp theo từ Server có Sequence number = 2001)..\n\n3.2.4  Quá trình ngắt phiên TCP (TCP Session Termination).\n\n\nHinh 9: Quá trình ngắt phiên kết nối\n\n      Người ta nói TCP là một anh chàng lịch sự, trước khi nói chuyện bắt tay, khi hết chuyện thì \u201cchào tạm biệt\u201d việc chào tạm biệt của TCP diễn ra như sau :\n· Bước 1 : Client gửi gói tin TCP có cờ FIN được dựng lên ể nói muốn kết thúc liên kết này.Vì liên kết TCP là song công (Full-Duplex) nên mặc dù nhận được yêu cầu kết thúc liên kết của client, sever vẫn có thể tiếp tục truyền cho đến khi sever không còn số liệu để gửi và thông báo cho client bằng yêu cầu kết thúc liên kết với FIN.\n· Bước 2 : Server đáp trả lại TCP có cờ ACK được dựng lên gửi sang cho client.Server gửi tiếp TCP có cờ FIN để thông báo kết thúc.\n· Bước 3: Client gửi gói tin TCP báo đã nhận được lời chấp nhận ngắt phiên kết nối từ Server cờ FIN được dựng.\n3.2.5 Quá trình gửi một gói tin giữa 2 PC\nCấu trúc gói tin:\n      Tại mỗi tầng truyền thông gói tin đều có các thông tin bổ sung khác nhau, và cấu trúc gói tin vì thế cũng có sự thay đổi tuy nhiên một gói tin khi xuyên qua các tầng nó đều các trường thông tin cơ bản như sau:\n\nHình 10: Cấu trúc của một gói tin\nDữ liệu trải qua 2 tiến trình cơ bản là :\n· Tiến trình đóng gói tại trạm gửi (Data Encapsulation)\n· Tiến trình mở gói tại trạm nhận (Data De-encapsulation)\n\n\nHình 11: Quá trình đóng gói dữ liệu\n\nHình 12: Quá trình tháo gói dữ liệu\n       Đóng gói dữ liệu là quá trình đặt dữ liệu nhận được vào sau header (và trước trailer) trên mỗi lớp.Lớp Physical không đóng gói dữ liệu vì nó không dùng header và trailer.Việc đóng gói dữ liệu không nhất thiết phải xảy ra trong mỗi lần truyền dữ liệu của trình ứng dụng.Các lớp 5, 6, 7 sử dụng header trong quá trình khởi động, nhưng trong phần lớn các lần truyền thì không có header của lớp 5, 6, 7 lý do là không có thông tin mới để trao đổi.\nCác dữ liệu tại máy gửi được xử lý theo trình tự như sau:\n· Người dùng thông qua lớp Application để đưa các thông tin vào máy tính. Các thông tin này có nhiều dạng khác nhau như: hình ảnh, âm thanh, văn bản.\n· Tiếp theo các thông tin đó được chuyển xuống lớp Presentation để chuyển thành dạng chung, rồi mã hoá và nén dữ liệu.\n· Tiếp đó dữ liệu được chuyển xuống lớp Session để bổ sung các thông tin về phiên giao dịch này.\n· Dữ liệu tiếp tục được chuyển xuống lớp Transport, tại lớp này dữ liệu được cắt ra thành nhiều Segment và bổ sung thêm các thông tin về phương thức vận chuyển dữ liệu để đảm bảo độ tin cậy khi truyền.\n· Dữ liệu tiếp tục được chuyển xuống lớp Network, tại lớp này mỗi Segment được cắt ra thành nhiều Packet và bổ sung thêm các thông tin định tuyến.\n· Tiếp đó dữ liệu được chuyển xuống lớp DataLink, tại lớp này mỗi Packet sẽ được cắt ra thành nhiều Frame và bổ sung thêm các thông tin kiểm tra gói tin (để kiểm tra ở nơi nhận).\n· Cuối cùng, mỗi Frame sẽ được tầng Vật Lý chuyển thành một chuỗi các bit, và được đẩy lên các phương tiện truyền dẫn để truyền đến các thiết bị khác.\n4.Địa chỉ mạng (IP).\n      Định nghĩa: Điạ chỉ IP (International Protocol-giao thức toàn cầu) là một địa chỉ đơn nhất mà những thiết bị điện tử hiện nay đang sử dụng để nhận diện và liên lạc với nhau trên mạng máy tính bằng cách sử dung tiêu chuẩn giao thức toàn Internet.\nMỗi địa chỉ IP là duy nhất trong cùng một cấp mạng.Một cách đơn giản hơn: IP là một địa chỉ của một máy tính khi tham gia vào mạng nhằm giúp cho các máy tính có thể chuyển thông tin cho nhau một cách chính xác, tránh thất lạc. Có thể coi địa chỉ IP trong mạng máy tính giống như địa chỉ nhà của bạn để nhân viên bưu điện có thể đưa thư đúng cho bạn chứ không phải một người nào khác.\n      Bất kỳ thiết bị mạng nào\u2014bao gồm bộ định tuyến, bộ chuyển mạch mạng, máy vi tính, máy chủ hạ tầng (như NTP, DNS, DHCP, SNMP, v.v.), máy in, máy fax qua Internet, và vài loại điện thoại\u2014tham gia vào mạng đều có địa chỉ riêng, và địa chỉ này là đơn nhất trong phạm vi của một mạng cụ thể. Vài địa chỉ IP có giá trị đơn nhất trong phạm vi Internet toàn cầu, trong khi một số khác chỉ cần phải đơn nhất trong phạm vi một công ty.\n      Địa chỉ IP do Tổ chức cấp phát số hiệu Internet (IANA) quản lý và tạo ra. IANA nói chung phân chia những \"siêu khối\" đến Cơ quan Internet khu vực, rồi từ đó lại phân chia thành những khối nhỏ hơn đến nhà cung cấp dịch vụ Internet và công ty.\n4.1  Giao thức Internet phiên bản 4 (Ipv4).\n     Định nghĩa:Ipv4 (Internet Protocol version4 ) tiếng việt goi là Giao thức Inter net phiên bản 4, là phiên bản đầu tiên của giao thức IP đã được triển khai rông khắp và là cơ sở của mạng Internet.\n     a/ Đặc điểm,cấu trúc của Ipv4 : Địa chỉ Ipv4 có 32 bit và được chia thành 4 Octet mỗi Octet có 8 bit tương đương với 1 byte(Byte, các Octet tách biệt nhau bằng dấu chấm) bao gồm có 3 thành phần chính :\n.\n\n· Bit nhận dạng lớp ( Class bit )\n· Địa chỉ của mạng ( Net ID )\n· Địa chỉ của máy chủ ( Host ID )\nb . Các lớp địa chỉ IP\nĐịa chỉ IP chia ra 5 lớp A,B,C, D, E. Hiện tại đã dùng hết lớp A,B và gần hết lớp C, còn lớp D và E Tổ chức internet đang để dành cho mục đích khác không phân, nên chúng ta chỉ nghiên cứu 3 lớp đầu.\n\n\n\nHinh 13: Cấu trúc lớp địa chỉ IP\n\nQua cấu trúc các lớp địa chỉ IP chúng ta có nhận xét sau:\n· Bit nhận dạng là những bit đầu tiên - của lớp A là 0, của lớp B là 10, của lớp C là 110.\n· Lớp D có 4 bit đầu tiên để nhận dạng là 1110, còn lớp E có 5 bít đầu tiên để nhận dạng là 11110.\n· Địa chỉ lớp A: Địa chỉ mạng ít và địa chỉ máy chủ trên từng mạng nhiều.\n· Địa chỉ lớp B: Địa chỉ mạng vừa phải và địa chỉ máy chủ trên từng mạng vừa phải.\n· Địa chỉ lớp C: Địa chỉ mạng nhiều, địa chỉ máy chủ trên từng mạng ít.\n\n\nHình 14: Các vùng địa chỉ của các lớp\n\n      Như vậy nếu chúng ta thấy 1 địa chỉ IP có 4 nhóm số cách nhau bằng dấu chấm, nếu thấy nhóm số thứ nhất nhỏ hơn 126 biết địa chỉ này ở lớp A, nằm trong khoảng 128 đến 191 biết địa chỉ này ở lớp B và từ 192 đến 223 biết địa chỉ này ở lớp C.\n4.2 Giao thức Internet phiên bản 6 (Ipv6).\n\n       IPv6 (Internet Protocol version 6)  là giao thức Internet phiên bản 6, một phiên bản của giao thức liên mạng (IP) nhằm mục đích nâng cấp giao thức liên mạng phiên bản 4 (IPv4) hiện đang truyền dẫn cho hầu hết lưu lượng truy cập Internet nhưng đã hết địa chỉ. IPv6 cho phép tăng lên đến 2128 địa chỉ, một sự gia tăng khổng lồ so với 232 (khoảng 4.3 tỷ) địa chỉ của IPv4.\n\n4.2.1 Nguyên nhân phát triển IPv6\n\n      Năm 1973, TCP/IP được giới thiệu và ứng dụng vào mạng ARPANET.Vào thời điểm đó, mạng ARPANET chỉ có khoảng 250 Site kết nối với nhau, với khoảng 750 máy tính.Internet đã và đang phát triển với tốc độ khủng khiếp, đến nay đã có hơn 60 triệu người dùng trên toàn thế giới. Theo tính toán của giới chuyên môn, mạng nternet hiện nay đang kết nối hàng trăm ngàn Site với nhau, với khoảng hơn 10 triệu máy tính; trong tương lai không xa, những con số này không chỉ dừng lại ở đó. Sự phát triển nhanh chóng này đòi hỏi phải kèm theo sự mở rộng, nâng cấp không ngừng của cơ sở hạ tầng mạng và công nghệ sử dụng.\n\n      Bước sang những năm đầu của thế kỷ XXI, ứng dụng của Internet phát triển nhằm cung cấp dịch vụ cho người dùng notebook, cellualar modem và thậm chí nó còn hâm nhập vào nhiều ứng dụng dân dụng khác như TV, máy pha cà phê\u2026 Để có thể đưa những khái niệm mới dựa trên cơ sở TCP/IP này thành hiện thực, TCP/IP phải mở rộng.Nhưng một thực tế mà không chỉ giới chuyên môn, mà ngay cả các ISP cũng nhận thức được đó là tài nguyên mạng ngày càng hạn hẹp.Việc phát triển về thiết bị, cơ sở hạ tầng, nhân lực\u2026 không phải là một khó khăn lớn. Vấn đề ở đây là địa chỉ IP, không gian địa chỉ IP ngày càng cạn kiệt, càng về sau địa chỉ IP (IPv4) không thể đáp ứng nhu cầu mở rộng mạng đó. Bước tiến quan trọng mang tính chiến lược đối với kế hoạch mở rộng này là việc nghiên cứu cho ra đời một thế hệ sau của giao thức IP, đó chính là IP version 6.\n\n     IPv6 ra đời không có nghĩa là phủ nhận hoàn toàn IPv4 (công nghệ mà hạ tầng\nmạng chúng ta đang dùng ngày nay). Vì là một phiên bản hoàn toàn mới của công nghệ IP, việc nghiên cứu, ứng dụng vào thực tiễn luôn là một thách thức rất lớn. Một trong những thách thức đó liên quan đến khả năng tương thích giữa IPv6 và IPv4, liên quan đến việc chuyển đổi từ IPv4 lên IPv6, làm thế nào mà người dùng có thể khai thác những thế mạnh của IPv6 nhưng không nhất thiết phải nâng cấp đồng loạt toàn\nbộ mạng (LAN, WAN, Internet\u2026) lên IPv6.\n\n4.2.2 Những giới hạn của IPv4.\n\n      IPv4 hỗ trợ trường địa chỉ 32 bit, IPv4 ngày nay hầu như không còn đáp ứng được nhu cầu sử dụng của mạng Internet. Hai vấn đề lớn mà IPv4 đang phải đối mặt là việc thiếu hụt các địa chỉ, đặc biệt là các không gian địa chỉ tầm trung (lớp B) và việc phát triển về kích thước rất nguy hiểm của các bảng định tuyến trong Internet.\n\n      Thêm vào đó, nhu cầu tự động cấu hình (Auto-config) ngày càng trở nên cần thiết. Địa chỉ IPv4 trong thời kỳ đầu được phân loại dựa vào dung lượng của địa chỉ đó (số lượng địa chỉ IPv4 ). Địa chỉ IPv4 được chia thành các lớp. 3 lớp đầu tiên được\nsử dụng phổ biến nhất. Các lớp địa chỉ này khác nhau ở số lượng các bit dùng để định nghĩa Network ID.\n\n      Ví dụ: Địa chỉ lớp B có 14 bit đầu dành để định nghĩa Network ID và 16 bit cuối  cùng dành cho Host ID. Trong khi địa chỉ lớp C có 21 bit dành để định nghĩa Network ID và 8 bit còn lại dành cho Host ID\u2026 Do đó, dung lượng của các lớp địa chỉ này khác nhau.\n4.2.3  Đặc điểm của IPv6.\n\n     a. Có không gian địa chỉ lớn:\n- IPv6 có địa chỉ nguồn và đích dài 128 bít thay vì 32 bit như hiện tại. Với32-bit, IPv4 chỉ cho phép cung cấp khoảng 4,3 tỷ địa chỉ IP. Vì mỗi thiết bịcó kết nối Web như: máy chủ, máy tính để bàn, xách tay, điện thoại thôngminh, Tablet PC và nhiều hơn nữa cần phải có địa chỉ IP. Và kể từ khi Web bùng nổ ở các nước như Trung Quốc và Ấn Độ, thế giới đang nhanh chóngtiếp cận đến những địa chỉ có sẵn cuối cùng của IPv4. Trong khi đó, với128-bit mà IPv6 mang lại, nó có khả năng cung cấp một số lượng rất lớn địachỉ IP để vượt xa nhu cầu sử dụng Internet hiện nay cũng như các thiết bị kếtnối web. Thay vì 4,3 tỷ địa chỉ giới hạn của IPv4, địa chỉ IPv6 có đủ để cungcấp hàng tỷ tỷ địa chỉ IP cho người dùng trên khắp hành tinh này.\n\n     b.Địa chỉ phân cấp,hạ tầng định tuyến hiệu quả:\n\n- Các địa chỉ toàn cục của Ipv6 được thiết kế để tạo ra một hạ tầng địnhtuyến hiệu qủa, phân cấp và có thể tổng quát hoá dựa trên sự phân cấp thường thấy của các nhà cung cấp dịch vụ Internet (ISP) trên thực tếc.\n\n      c. Khuôn header được đơn giản hóa:\n\n- Header của IPv6 được thiết kế để giảm chi phí đến mức tối thiểu. Điều nàyđạt được bằng cách chuyển các trường không quan trọng và các trường lựachọn sang các header mở rộng được đặt phía sau của IPv6 header. Khuôndạng header mới của IPv6 tạo ra sự xử lý hiệu quả hơn tại các router.\n\n      d.Tự cấu hình địa chỉ:\n\n- Để đơn giản cho việc cấu hình các trạm, IPv6 hỗ trợ cả việc tự cấu hình địachỉ stateful như khả năng cấu hình server DHCP và tự cấu hình địa chỉstateless (không có server DHCP). Với tự cấu hình địa chỉ dạng stateless,các trạm trong liên kết tự động cấu hình chúng với địa chỉ IPv6 của liên kết(địa chỉ cục bộ liên kết) và với địa chỉ rút ra từ tiền tổ được quảng bá bởirouter cục bộ. Thậm trí nếu không có router, các trạm trên cùng một liên kếtcó thể tự cấu hình chúng với các địa chỉ cục bộ liên kết và giao tiếp với nhaumà không phải thiết lập cấu hình thủ công.\n\n     e.Khả năng xác thực và bảo mật an ninh:\n\n- Tích hợp sẵn trong thiết kế IPv6 giúp triển khai dễ dàng đảm bảo sựtương tác lẫn nhau giữa các nút mạngf.Hỗ trợ tốt về chất lượng dịch vụ QoS- Lưu thông trên mạng được phân thành các luồng cho phép sử lý mức ưutiên khác nhau tại các router.\n\n      g.Hỗ trợ tốt tính năng di động:\n\n- Khả năng di động MobileIP tận dụng được các ưu điểm của IPv6 so vớiIPv4.\n\n      h.Khả năng mở rộng:\n\n- Thiết kế của IPv6 có dự phòng cho sự phát triển trong tương lai đồng thờidễ dàng mở rộng khi có nhu cầu\n\n4.2.4 Cấu trúc địa chỉ IPv6:\n\n\nHình 15: Mô hình Ipv6\n\na.Địa chỉIPv6:\n- Một địa chỉ gồm có 16 bytes, đó là 128 bít độ dài. Kiểu ký hiệu dấu2 chấm trong hệ đếm 16 ( Hexadecimal Colon Notation):\n- Để làm cho những địa chỉ trở nên có thể đọc được nhiều hơn, IPv6 trình bầy rõ trong kiểu ký hiệu dấu 2 chấm trong hệ đếm 16.Trong kiểu kýhiệu này, 128 bít được chia thàng 8 phần, mỗi phần rộng 2 byte.2 byte trong kiểu ký hiệu hệ đếm 16 yêu cầu 4 chữ số trong hệ đếm 16 này. Vì thế cho nên địa chỉ gồm có 32chữ số trong hệ đếm 16 với mỗi 4 chữ số một lại có một dấu : chấm.128 bít= 16 bytes= 32chữ số trong hệ đếm 16\nĐịa chỉ IP phiên bản 6 ( IPv6 Address)\n- Sự rút gọn:\n+ Mặc dù là địa chỉ IP ngay cả khi ở trong định dạnh hệ số đếm 16, vẫn rấtdài, nhiều chữ số 0 trong một địa chỉ.\nThí dụ:1080:0000:0000:0000:0008:0800:200C:417A\nDo đó cơ chế nén địa chỉ được dùng để biểu diễn dễ dàng hơn các loại địachỉ dạng này. Ta không cần viết các số 0 ở đầu các nhóm, nhưng những số 0 bên trong thì không thể xoá.\nChưa rút gọn\n1080:0000:0000:0000:0008:0800:200C:417A\nĐã rút gọn:1080: 0: 0: 0: 8: 800:200C:417A\nRút gon nữa: 1080::8:800:200C:417A\n111111101111101100\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026..111111111111\n\nb.Không gian địa chỉ:\n\n- Không gian địa chỉ có độ dài lớn hơn IPv4( 128 bít so với 32 bít) do đócung cấp không gian địa chỉ lớn hơn rất nhiều. Trong khi không gian địa chỉ32 bít của IPv4 cho phép khoảng 4 tỉ địa chỉ, không gian địa chỉ IPv6 có thể có khoảng 6.5*10^23 địa chỉ trên mỗi mét vuông bề mặt trái đất. Nó tạo ra nhiều mức phân cấp và linh hoạt trong địa chỉ hoá và định tuyến hiện không có trong IPv4.-Không gian địa chỉ có nhiều mục đích khác nhau.\n\n5. Kết luận chương .\n\nChương 1 trình bày tổng quan về mạng máy tính. Qua đó cung cấp cái nhìn tổng quan và phục vụ cho qua trình tìm hiểu tiếp theo\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nChương II : MẠNG LAN ẢO\n\n1.Giới thiệu về Vlan.\n\n       Trước hết ta nhắc lại mạng Lan. Mạng Lan là một mạng cục bộ (viết tắt là Local Area Network ) được định nghĩa là tất cả các máy tính trong một miền quảng bá (broadcast domain). Trong đó các router là các bộ định tuyến chặn các bản tin quảng bá còn switch là bộ chuyển mạch chỉ chuyển tiếp chúng.\n       Mô hình mạng không có Vlan là một mạng phẳng (flat network) vì nó hoạt động chuyển mạch ở lớp 2. Một mạng phẳng là một miền quảng bá (broadcast), mỗi gói quản bá từ một host nào đó đều đến được các host còn lại trong mạng. Mỗi cổng trong switch là một miền đụng độ (collision), vì vậy người ta sử dụng switch để chia nhỏ miền collision, nhưng nó không ngăn được miền quảng bá. Nên xảy ra nhiều vấn đề :\n· Vấn đề giới hạn bảo mật: mỗi người dùng nào cũng có thể thấy các người dùng khác trong cùng một mạng lan do đó rất khó bảo mật thông tin .\n· Gây lãng phí lưu lượng và tài nguyên xử lý dữ liệu vì đây là 1 broadcast domain nên khi một máy gửi 1 bản đi thì tất cả các máy trong cùng một mạng lan đều nhận được bản tin.\n· Khó quản lý được các hot trong mạng Lan nếu có nhiều thành phần khác nhau.\n        Để giải quyết vấn đề đó người ta đưa ra khái niệm VLAN.VLAN là viết tắt của Virtual Local Area Network hay còn gọi là mạng LAN ảo. Một VLAN được định nghĩa là một nhóm logic các thiết bị mạng và được thiết lập dựa trên các yếu tố như chức năng, bộ phận, ứng dụng\u2026 của công ty. Mỗi Vlan là một mạng con logic được tạo trên các swith, còn gọi là các đoạn hay miền quảng bá (broadcast). Về mặt kỹ thuật, VLAN là một miền quảng bá được tạo bởi các switch. Bình thường thì router đóng vai tạo ra miền quảng bá nhưng ở đây sẽ là các con switch.\n2. Khái niệm về Vlan.\n2.1 Giới thiệu về VLAN.\n\n     VLAN là một nhóm các thiết bị mạng không giới hạn theo vị trí vật lý  hoặc LAN switch mà chúng kết nối vào.\n     VLAN là một segment mạng theo logic dựa trên chức năng, đội nhóm, hoặc ứng dụng của theo một tổ chức chứ không phụ thuộc vào vị trí  vật lý hay kết nối vật lý trong mạng. Tất cả các trạm và server được sử dụng bởi cùng một nhóm làm việc sẽ được đặt trong cùng VLAN bất kể vị trí hay kết nối vật lý của chúng.\n      Mọi công việc cấu hình VLAN hoặc thay đổi cấu hình VLAN điều được thực hiện trên phần mềm mà không cần thay đổi cáp và thiết bị vật lý.\n      Một máy trạm trong một VLAN chỉ được liên lạc với file server trong cùng VLAN với nó. VLAN được nhóm theo chức năng logic và mỗi VLAN là một miền quảng bá, do đó gói dữ liệu chỉ được chuyển mạch trong cùng một VLAN. \n      VLAN có khả năng mở rộng, bảo mật và quản lý mạng tốt hơn.Router trong cấu trúc VLAN thực hiện ngăn chặn quảng bá, bảo mật và quản lý nguồn giao thông mạng. Switch không thể chuyển mạch giao thông giữa các VLAN khác nhau. Giao thông giữa các VLAN phải được định tuyến qua router.\n\n\nHình 16: Mô hình mạng Vlan giữa các tầng\n2.2 Miền quảng bá với VLAN và router.\n      Một VLAN là một niềm quảng bá được tạo nên một hay nhiều switch. Hình 17 cho thấy tạo 3 miền quảng bá riêng biệt trên 3 swicth như thế nào. Định tuyến Lớp 3 cho phép router chuyển gói giữa các miền quảng bá với nhau\n (\nPhòng nhân sự\nPhòng giao dịch\nPhòng kế toán\nFa 0/0\nFa 0/\n2\nFa 0/\n1\nHình 1\n7\n: Ba miền quảng bá trên 3 switch khác nhau\n)\n\n\n\n\n\n\n\n\n\n\n       Trong hình 18 chúng ta thấy 3 VLAN tức 3 miền quảng bá khác nhau được tạo ra trên một switch và trên một router. Router sử dụng định tuyến lớp 3 để chuyển giao thông giữa 3 VLAN.\n (\nPhòng giao dich\n        Phòng kế toán\n      \nPhòng nhân sự\nHình 1\n8\n: Ba VLAN và 3 miền quảng bá trên một switch\n)\n\n\n\n\n\n\n\n\n\nSwitch sẽ xử lý gói dữ liệu khi chia Vlan như sau :\n· Đối với mỗi VLAN switch có một bảng chuyển mạch riêng tương ứng.\n· Nếu switch nhận được gói dữ liệu từ một port nằm trong VLAN 1 chẳng hạn , thì switch sẽ tìm địa chỉ MAC đích trong bảng chuyển mạch của VLAN mà thôi.\n· Đồng thời switch sẽ học địa chỉ MAC nguồn trong gói dữ liệu và ghi vào bảng chuyển mạch của VLAN 1 nếu địa chỉ này chưa được biết.\n· Sau đó switch quyến định chuyển gói dữ liệu.\n· Switch nhận frame vào từ VLAN nào thì switch chỉ học địa chỉ nguồn của frame và tìm địa chỉ đích cho frame trong một bảng chuyển mạch tương ứng với VLAN đó.\n\n2.3 Hoạt động của VLAN\n\n     Mỗi cổng trên switch có thể gán cho một VLAN khác nhau. Các cổng nằm trong cùng một VLAN sẽ chia sẻ gói quảng bá với nhau.Các cổng không nằm trong cùng VLAN sẽ không chia sẻ gói quảng bá với nhau.Nhờ đó mạng LAN hoạt động hiệu quả hơn.\n      Mỗi Vlan sẽ được gán cho 1 hoặc nhiều cổng (inter face) khác nhau, thành viên cố định được xác định bởi số cổng gán cho một Vlan. Khi thiết bị kết nối vào một cổng của switch, tùy vào cổng kết nối mà nó thuộc loai Vlan  nào thì thiết bị nằm trong VLAN đó. Mặc định, tất cả các port trên một switch đều nằm trong VLAN quản lý.VLAN quản lý luôn là VLAN 1 và chúng ta không thể xóa VLAN này được. Sau đó ta cấu hình lần lượt gán các cổng vào các Vlan khác cho đến khi hết.Cách gán cổng này là Port \u2013 based VLAN (thông dụng hiện nay). Tức là xác định số  thành viên VLAN theo cổng tức là cổng đã được gán vào VLAN nào thì thiết bị kết nối vào cổng đó thuộc VLAN đó, không phục thuộc không phục vào thiết bị kết nối là thiết bị gì, địa chỉ bao nhiêu. Với cách chia VLAN theo cổng như vậy, tất cả các người dùng kết nối vào cùng một cổng sẽ nằm trong cùng một VLAN. Một người dùng hay nhiều người dùng có thể kết nối vào một cổng và sẽ không nhận thấy là có sự tồn tại của VLAN. Cách chia VLAN này giúp việc quản lý đơn giản hơn vì không cần tìm trong cơ sở dữ liệu phức tạp để xác định thành viên trong mỗi VLAN.\n\n· Cấu hình VLAN bằng các phần mềm VLAN quản lý tập trung \n· Có thể chia VLAN theo địa chỉ MAC, logic hoặc theo loại giao thức.\n· Không cần quản lý nhiều ở các tủ nối dây nữa vì thiết bị kết nối vào mạng thuộc VLAN nào là tùy theo địa chỉ của thiết bị đó được gán vào VLAN đó.\n· Có khả năng thông báo cho quản trị mạng khi có một người dùng đầu cuối lạ, không có trong cơ sở dữ liệu kết nối vào mạng\n\n        Người quản trị có trách nhiệm cấu hình VLAN bằng tay và cố định. Mỗi một cổng trên switch cũng giống như một cổng trên bridge. Bridge sẽ chặn luồng lưu lượng nếu nó không cần thiết phải đi ra ngoài segment. Nếu gói dữ liệu cần chuyển qua bridge và switch không biết địa chỉ đích hoặc gói nhận được là gói quảng bá thì mới chuyển ra tất cả các cổng nằm trong cùng miền quảng bá với cổng nhận gói dữ liệu vào.\n\nCách cấu hình Vlan: Ví dụ\n\tTên Vlan (Phòng)\n\tVlan\n\n\tNhân sự\n\t10\n\n\tGiao dịch\n\t20\n\n\tKế toán\n\t30\n\n\n\n\nSwitch>enable \nSwitch#configureterminal\nSwitch(config)#vlan 10                                           //Khai báo Vlan 10\nSwitch(config-vlan)#name nhansu                         // Khai báo tên Vlan 10\nSwitch(config-vlan)#exit\t// Thoát khỏi Vlan 10\nSwitch(config)#vlan 20\t//Khai báo Vlan 20\nSwitch(config-vlan)#name giaodich\t// Khai báo tên vlan 20\nSwitch(config-vlan)#exit\t//Thoát khỏi vlan 20\nSwitch(config)#vlan 30\nSwitch(config-vlan)#name ketoan\nSwitch(config-vlan)#exit\n\nĐây là đoạn câu lệnh khi cấu hình khai báo Vlan cho switch. (\nLớp vật lý \u2013 port switch\nChức năng làm routing kết nối VLAN với internet\nVLAN phòng \nnhân sự\nVLAN phòng giao dịch\nVLAN phòng kế toán\nLớp mạng\nLớp liên kết dữ liệu miền quảng bá \n    192.168.1.0     192.168.2.0   192.168.3.0\nCổng gắn máy tính\nTầng 1\nTầng 2\nTầng 3\nHình 19\n: Mô hình chia VLAN theo cổng\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2.4 Phân loại các loại Vlan.\n\n· Port \u2013 based VLAN: là cách cấu hình VLAN đơn giản và phổ biến. Mỗi cổng của Switch được gắn với một VLAN xác định (mặc định là VLAN 1), do vậy bất cứ thiết bị host nào gắn vào cổng đó đều thuộc một VLAN nào đó.\n· MAC address based VLAN: Cách cấu hình này ít được sử dụng do có nhiều bất tiện trong việc quản lý. Mỗi địa chỉ MAC được đánh dấu với một VLAN xác định.\n· Protocol \u2013 based VLAN: Cách cấu hình này gần giống như MAC Address based, nhưng sử dụng một địa chỉ logic hay địa chỉ IP thay thế cho địa chỉ MAC. Cách cấu hình không còn thông dụng nhờ sử dụng giao thức DHCP.\n2.5  Ưu điểm (lợi ích) của Vlan\n\n      Tiết kiệm băng thông của mạng:  Do VLAN có thể chia nhỏ LAN thành các đoạn (là một vùng quảng bá). Khi một gói tin quảng bá, nó sẽ được truyền chỉ trong một VLAN duy nhất, không truyền ở các VLAN khác nên giảm được lưu lượng quảng bá, tiết kiệm được băng thông đường truyền.\n      Tăng khả năng bảo mật: Các VLAN khác nhau không truy cập được vào nhau (trừ khi có khai báo định tuyến).\n      Dễ dàng thêm hay bớt các máy tính vào VLAN: Trên một switch nhiều cổng, có thể cấu hình VLAN khác nhau cho từng cổng, do đó dễ dàng kết nối thêm các máy tính với các VLAN.\n      Mạng có tính linh động cao:VLAN có thể dễ dàng di chuyển các thiết bị. Giả sử trong ví dụ trên, sau một thời gian sử dụng công ty quyết định để mỗi bộ phận ở một tầng riêng biệt. Với VLAN, ta chỉ cần cấu hình lại các cổng switch rồi đặt chúng vào các VLAN theo yêu cầu. VLAN có thể được cấu hình tĩnh hay động.Trong cấu hình tĩnh, người quản trị mạng phải cấu hình cho từng cổng của mỗi switch.Sau đó, gán cho nó vào một VLAN nào đó. Trong cấu hình động mỗi cổng của switch có thể tự cấu hình VLAN cho mình dựa vào địa chỉ MAC của thiết bị được kết nối vào.\n3 .VLAN Trunking Protocol \u2013 Giao thức mạch nối VLAN \u2013 VTP.\n3.1 Khái niệm, hoạt động của mạch nối (trunk)\n\n\nHình 20: Đường trunk trong Vlan\n\n      Định nghĩa:Thuật ngữ Trunking bắt nguồn từ công nghệ Radio và công nghệ điện thoại. Trong công nghệ radio, một đường Trunk là một đường dây truyền thông mà trên đó truyền tải nhiều kênh tín hiệu radio.Trong công nghiệp điện thoại, khái niệm thuật ngữ Trunking là kết hợp giữa đường truyền thông điện thoại hoặc các kênh điện thoại giữa hai điểm.Một trong các điểm có thể là một tổng đài.Ngày nay, nguyên lý trunking được chấp nhận sử dụng trong công nghệ mạng chuyển mạch. Một đường Trunk là kết nối vật lý và logic giữa 2 switch hoặc giữa switch và router.\nTrong khuôn khổ môi trường chuyển mạch VLAN, một đường Trunk là một kết nối point-to-point để hỗ trợ các VLAN trên các switch liên kết với nhau. Một đường được cấu hình Trunk sẽ gộp nhiều liên kết ảo trên một liên kết vật lý để chuyển tín hiệu từ các VLAN trên các switch với nhau dựa trên một đường cáp vật lý.\n\n3.1.1 Hoạt động của Trunking.\n\n      Giao thức Trunking được phát triển để nâng cao hiệu quả quản lý việc lưu chuyển các Frame từ các VLAN khác nhau trên một đường truyền vật lý.Giao thức trunking thiết lập các thoả thuận cho việc sắp sếp các Frame vào các cổng được liên kết với nhau ởhai dầu đường trunk.\n\n      Hiện tại có 2 kỹ thuật Trunking là Frame Filtering và Frame Tagging.Giao thức Trunking sử dụng kỹ thuật Frame Tagging để phân biệt các Frame và để dễ dàng quản lý và phân phát các Frame nhanh hơn. Các tag được thêm vào trên đường gói tin đi ra vào đường trunk và được bỏ đi khi ra khỏi đường trunk. Các gói tin có gắntag không phải là gói tin Broadcast. Một đường vật lý duy nhất kết nối giữa hai switch thì có thể truyền tải cho mọi VLAN. Để lưu trữ, mỗi Frame được gắn tag để nhận dạng trước khi gửi đi, Frame  của VLAN nào thì đi về VLAN đó.\n\nCấu hình Trunking trong vlan :\nSwitch_A(config)# interface fastethernet 0/1                 // Khai báo vào cổng\nSwitch_A(config-if)# switchport mode trunk                 // Khai báo port trunk\nSwitch_A(config-if)# switchport trunk encapsulation dot1q     //chuẩn  encap\n3.2  Giao thức mạch nối VLAN \u2013 VTP.\n\n3.2.1  Nguồn gốc VTP.\n\n      VTP được thiết lập để giải quyết các vấn đề nằm bên trong hoạt động của môi trường mạng chuyển mạch VLAN.\nVí dụ: Một domain mà có các kết nối switch hỗ trợ bởi các VLAN. Để thiết lập và duy trì kết nối bên trong VLAN, mỗi VLAN phải được cấu hình trên cổng của switch.\nKhi phát triển mạng và các switch được thêm vào mạng, mỗi switch mới phải được cấu hình với các thông tin của VLAN trước đó. Một kết nối đơn không đúng VLAN ẩn chứa 2 vấn đề:\n· Các kết nối chồng chéo lên nhau do cấu hình VLAN không đúng.\n· Các cấu hình không đúng giữa các môi trường truyền khác nhau như là: Ethernet và FDDI.\nVới VTP, cấu hình VLAN được duy trì dễ dàng bằng Admin domain. Thêm nữa, VTP làm giảm phức tạp của việc quản lý VLAN.\n      Vai trò của VTP là duy trì cấu hình VLAN thông qua Admin Domain của mạng.VTP là một giao thức lớp 2 sử dụng các Trunk Frame để quản lý việc thêm bớt, xoá và đổi tên các VLAN trên một domain.\nVTP cho phép tập trung các thay đổi tới tất cả các switch trong mạng.\nThông điệp VTP được dóng gói trong một chuẩn CISCO là giao thức ISL hoặc IEEE 802.1q và sau đó đi qua các liên kết Trunk tới thiết bị khác.\n\n3.2.2 Lợi ích của VTP.\n\nLợi ích của VTP:\n· Giúp cấu hình đúng các VLAN qua mạng.\n· Hệ thống ánh xạ cho phép 1 VLAN được trunk qua các môi trường truyền hỗn hợp. Giống như ánh xạ các VLAN Ethernet tới đường cáp trục tốc độ cao như ATM, LANE hoặc FDDI.\n· Theo dõi chính xác và kiểm tra VLAN.\n· Báo cáo động về việc thêm vào các VLAN.\n· Dễ dàng cấu hình khi thêm mới VLAN.\nTrước khi thiết lập các VLAN trên switch, ta phải setup một Management Domain để kiểm tra các VLAN trong mạng. Các switch trong cùng một Management Domain chia sẻ thông tin VLAN với các VLAN khác và một switch có thể tham gia vào chỉ một VTP management domain. Các switch ở domain khác không chia sẻ thông tin VTP.\nCác switch sử dụng giao thức VTP thì trên mỗi cổng trunk của nó có:\n· Management domain\n· Số cấu hình\n· Biết được VLAN và các thông số cụ thể\n\n\n3.2.3. VTP Domain.\n\n      Một VTP domain được tạo ra từ một hay nhiều các thiết bị đa kết nối để chia sẻ trên cùng một tên VTP domain. Mỗi switch chỉ có thể có một VTP domain. Khi một thông điệp VTP truyền tới các switch trong mạng, thì tên domain phải chính xác để thông tin truyền qua.\n3.2.4. Các chế độ VTP Domain.\n\nHoạt động chuyển mạch VTP hoạt động trên một trong ba chế độ sau:\nServer:\n· Nếu một switch được cấu hình ở chế độ server, thì switch đó có thể khởi tạo, thay đổi và xoá các VLAN.\n· VTP server ghi thông tin cấu hình VLAN trong NVRAM. VTP server gửi các thông điệp VTP qua tất cả các cổng Trunk.\n· Các VTP server quảng bá cấu hình VLAN tới các switch trên cùng một VTP domain và đồng bộ cấu hình VLAN tới các switch khác dựa trên các quảng cáo nhận được qua đường Trunk. Đây là chế độ mặc định trên switch.\nClient:\n· Một switch được cấu hình ở chế độ VTP Client không thể khởi tạo, sửa chữa hoặc xoá thông tin VLAN. Client không thể lưu thông tin VLAN.\n· Chế độ này có ích cho các switch không đủ bộ nhớ để lưu trữ bảng thông tin VLAN lớn. VTP Client xử lý các thay đổi VLAN giống như server, nó cũng gửi các thông điệp qua các cổng Trunk.\nTransparent:\n· Các switch cấu hình ở chế độ Transparent không tham gia vào VTP. Một VTP Transparent switch không quản bá cấu hình VLAN của nó và không đồng bộ các cấu hình VLAN của nó dựa trên các quảng cáo nhận được. Chúng chuyển tiếp các quảng cáo VTP nhận được trên các cổng Trunk nhưng bỏ qua các thông tin bên trong thông điệp.\n· Một Transparent switch không thay đổi database của nó, khi các switch nhận các thông tin cập nhật cũng gửi một bản cập nhật chỉ ra sự thay đổi trạng thái VLAN. Trừ khi chuyển tiếp một quảng cáo VTP, VTP bị vô hiệu hoá trên switch được cấu hình ở chế độ Transparent\n\nCấu hình VTP :\nSwitch(config)#vtp version 2    \nSwitch(config)#vtp domain                                      // Đặt tên cho VTP\nSwitch(config)#vtp password  \t// Đăt password\nSwitch(config)#vtp mode {server/client}                    // Đặt chế độ cho VTP\n3.3. STP \u2013 SPANNING TREE PROTOCOL.\n3.3.1. Giới thiệu về STP.\n\n      Khi thiết kế một hệ thống mạng cho một tổ chức lớn, một trong những vấn đề mà các nhà thiết kế mạng phải quan tâm là phải đảm bảo rằng hệ thống mạng sẽ luôn ở trong trạng thái vận hành tốt.Để làm được điều này, thông thường các nhà thiết kế thường thiết kế thêm các đường kết nối dự phòng giữa các switch.\n      Như vậy, mục đích thì đã rõ nhưng việc thiết kế dư thừa các đường kết nối lại gây ra một vấn đề khác đó là sẽ có các gói tin chạy vòng quanh các switch và làm cho mạng luôn ở trong tình trạng quá tải.\n       Để giải quyết vấn đề này, STP đã ra đời để ngăn chặn các gói tin bị loop trên mạng. STP giúp cho người thiết kế mạng có thể thiết kế tùy ý các đường kết nối thừa nhưng vẫn đảm bảo là không có hiện tượng các gói tin bị loop trên mạng.\nSTP \u2013 Spanning Tree Protocol\nTrong phạm vi bài này mình chỉ trình bày sơ lược về: \n      Các khái niệm cơ bản về STP, quá trình bầu chọn Root Bridge ( Switch Root) , Root Port, Designated Port, Non- Root Port ( Block Port). \n\n3.3.2 Các khái niệm cơ bản về STP.\n\n      STP là một giao thức lớp 2 sử dụng một giải thuật đặc biệt để tìm ra các vòng lặptrong mạng và tác động của một mạng không bị loop. \n      STP sẽ tạo ra một cấu trúc cây bao gồm các lá và các nhánh trải rộng trên toàn bộ mạng Layer 2.Các kết nối giữa các Switch sẽ được mặc định là kết nối Trunk.\nViệc tính toán Spanning Tree dựa trên hai khái niệm khi tạo ra vòng lặp logic trong cấu trúc mạng đó là Bridge ID và Cost ( chi phí đường đi)\n\na. Bridge ID (BID):\nBID là một trường có 8 byte, gồm 2 trường con được miêu tả như sau :\n\n\nHình 21: Một trường BID\n\nTrong đó:\n\u2022 Địa chỉ MAC: có 6 byte được gán cho Switch, sử dụng dưới dạng Hexa.\n\u2022 Bridge Priority: là độ ưu tiên có chiều dài là 2 byte tạo thành 2^16 giá trị từ 0 đến65.535. Độ ưu tiên Bridge có giá trị mặc định là : 32.768\n\nb. Cost \u2013 Chi phí đường đi:\n\n· Là chi phí đi tới Root Bridge có giá trị thấp nhất. \n· Chi phí được tính bằng tổng cost trên các đoạn đường đi tới đích. Băng thông càng lớn thì chi phí đường đi càng nhỏ.\n\nBảng danh sách chi phí trên các đoạn đường:\n\n\nHình 22: Bảng chi phí của các đường đi.\n3.3.3 Quá trình bầu chọn Root Bridge.\n\nThuật toán Spanning Tree sẽ sử dụng trình tự theo các bước sau: \nBước 1: Sau khi Switch được khởi động, nó gửi gói tin BPDU gồm switch Bridge ID và Root ID 2 giây/lần.\nNội dung bản tin BPDU \n\n (\nRoot BID\nSender BID\nRoot path cost\nPort ID\nCho biết Bridge gốc\nCho biết BPDU đến từ port nào\nCho biết BID của bridge gửi BPDU\nCho biết chi phí đường đi của Bridge  gốc\n)\nHình 23: Bản tin BPDU\n\nBước 2: Trong pha khởi tạo ban đầu mỗi thì Router đều coi nó là Root Bridge. \nBước 3: Nếu Switch nhận được Root ID trong bản tin BPDU của hàng xóm mà nhỏ hơn Root ID của nó thì nó sẽ coi Switch hàng xóm là Root Bridge ( Ai có Root ID nhỏ hơn thì sẽ được bầu làm Root Bridge). \nBước 4: Switch sau đó sẽ forward bản tin BPDU với Root ID nhỏ hơn này tới các Switch kế cận nó. \nBước 5: Switch với Root ID nhỏ nhất được coi là Root Bridge trong topo Spanning-Tree. \nBước 6: Trong trường hợp 2 Switch có Root ID bằng nhau, chúng sẽ tiến hàng quá trình bầu chọn thông qua địa chỉ MAC address. Switch nào có địa chỉ MAC address nhỏ hơn thì được coi là Root Bridge.\n\nCấu hình STP:\n\nSwitch(config)#spanning-tree vlan {vlan id}root primary\nSwitch(config)#spanning-tree port fast default\nSwitch(config)#spanning-tree mode {pvst\u2026}\n\n3.4. Giao thức EtherChannel.\n\n3.4.1 Giao thức EtherChannel là gì? Tại sao lại cần nó?\n\n      Switch có thể sử dụng các cổng Ethernet, Fast-Ethernet(FE), GigaEthernet(GE), 10 GigaEthernet(10GE) để tăng tốc độ các link. Mỗi lần link bị quá tải ta có thể nâng cấp các đường lên 10 lần, nhưng như vậy sẽ rất tốn kém trong việc mua module gắn vào và dây dẫn, bên cạnh đó, không phải switch nào cũng có module để bạn gắn cũng như tốn chi phí về mua dây dẫn. Một phương pháp khác phù hợp hơn trong trường hợp này để tăng băng thông các link đó là kếp hợp (\u201cbó\u201d) các link lại. Công nghệ này được gọi là EtherChannel.\n\n\nHình 24: Công nghệ EtherChannel\n\n      Công nghệ EtherChannel có gộp tối đa 8 đường linh vật lý FE, GE, 10GE thành 1 link logical.Khi đó, switch đối xử các port thuộc EtherChannel như 1 port duy nhất.\nSwitch hoặc thiết bị ở 2 đầu EtherChannel phải hiểu và sử dụng công nghệ EtherChannel để đảm bảo hoạt động đúng và chống loop. Nếu chỉ có 1 đầu sử dụng EtherChannel, còn đầu bên kia không sử dụng thì có thể gây ra loop.\nTraffic không phải lúc nào cũng được phân bố đồng đều qua các đường link thuộc EtherChannel, mà nó phụ thuộc vào phương pháp load balancing mà switch sử dụng và mẫu traffic trong mạng.\n       Nếu một trong các link thuộc EtherChannel bị down thì traffic sẽ tự động được chuyển sang link khác trong channel chỉ trong vòng vài miliseconds .Khi link up trở lại thì traffic được phân bố lại như cũ.Vì trong khoảng thời gian rất ngắn nên tỉ lệ gần như là không rớt gói tin .\nEtherChannel có thể kết hợp các physical ports chỉ khi:\n· Cùng tốc độ (speed)\n· Cùng loại đường truyền.\n· Nếu port Layer 2 thì cùng mode access+access cùng VLAN hoặc trunk+cùng native VLAN+cùng cho phép các VLAN giống nhau qua đường trunk. Hoặc cùng là port Layer 3 .\n3.4.2  Giao thức trong EtherChannel.\n\nCó 2 giao thức :\n· PAGP: Các gói tin Pagp được trao đổi giữa các switch trên các cổng EtherChannel. Các thông số của switch láng giềng được xác định (như khả năng của cổng) và sẽ được so sánh với switch cục bộ. Các cổng có cùng neighbor ID và khả năng hình thành nhóm sẽ được nhóm lại với nhau thành các kết nối FEC. PagP hình thành nên EtherChannel chỉ trên những cổng được cấu hình cùng static VLAN hoặc là cùng loại trunking. Pagp cũng thay đổi các thông số động của EtherChannel nếu một trong những cổng của bundle bị thay đổi.\n· LACP : cũng gửi các gói trên các cổng EtherChannel của switch. Tuy nhiên LACP cũng gán vai trò cổng đến các đầu cuối của EtherChannel. Các switch có độ ưu tiên thấp nhất sẽ được phép ra quuyết định về các cổng nào sẽ được tham gia vào EtherChannel ở một thời điểm. Các cổng được chọn lựa và trở thành active theo giá trị độ ưu tiên priority của nó, trong đó giá trị ưu tiên thấp sẽ có mức ưu tiên cao. \nNếu PAgP (của cisco) hoặc LACP được cấu hình ở mode on thì switch sẽ tự đưa các ports vào EtherChannel mà không thương lượng với neighbor, nghĩa là không có bất kỳ gói tin PAgP hoặc LACP nào được trao đổi. Điều này có thể dẫn đến trường hợp ở một đầu thì các ports được đưa vào EtherChannel, trong khi đầu bên kia thì không (nghĩa là một bên thì xem đó là một logical link, trong khi phía bên kia thì vẫn xem là nhiều physical links), và có thể gây ra loop. Vì vậy, đối với EtherChannel ta không nên cấu hình mode on, mà nên sử dụng giao thức để thương lượng.\nKhi các ports được cấu hình là thành viên của EtherChannel thì switch sẽ tự động tạo ra một logical port-channel interface. Interface này đại diện cho toàn bộ channel.\n\n      Khi cấu hình EtherChannel thì ta không cần thiết phải chỉ định giao thức thương lượng là PAgP hay LACP, mà chỉ cần cấu hình các mode tương ứng với giao thức đó là switch tự động biết sử dụng giao thức nào.\n Cấu hình :\nSwitch(config-if)#channel-protocol { lacp,pagp}\nSwitch(config-if)#channel-group number mode {on | passive | active}\n\n3.5. Ethernet và chuẩn IEEE 802.\n\n3.5.1. Giới thiệu chung về Ethernet.\n\n      Ethernet là công nghệ của mạng LAN cho phép truyền tín hiệu giữa các máy tính với tốc độ 10Mb/s đến 10 Gigabit/s. Trong các kiểu Ethernet thì kiểu sử dụng cáp xoắn đôi là hay thông dụng nhất.Hiện nay có khoảng 85% mạng LAN sử dụng công nghệ Ethernet.\n      Năm 1980, Xerox, tập đoàn Intel và tập đoàn Digital Equipment đưa ra tiêu chuẩn Ethernet 10 Mbps (Tiêu chuẩn DIX).\n     IEEE (Institute of Electrical and Electronics Engineers, Inc- Viện công nghệ điện và điện tử) đưa ra tiêu chuẩn về Ethernet đầu tiên vào năm 1985 với tên gọi \"IEEE 802.3 Carrier Sense Multiple Access with Collision Detection (CSMA/CD) Access Method and Physical Layer Specifications\" .Gần đây, với các phương tiện truyền dẫn và công nghệ mới, công nghệ Ethernet đã ngày càng phát triển và đạt được tốc độ trao đổi số liệu đến 10 Gigabit trên giây.\n\n\n\nHình 25: Mối quan hệ của các chuẩn 802 với mô hình tham chiếu OSI\n\nThành phần mạng Ethernet bao gồm:\n· Data terminal Equipment (DTE): Các thiết bị truyền và nhận dữ liệu DTEs thường là PC,Workstation, File Server, Print Server ...\n· Data Communication Equipment (DCE): Là các thiết bị kết nối mạng cho phép nhận và chuyển khung trên mạng. DCE có thể là các thiết bị độc lập như Repeter, Switch, Router hoặc các khối giao tiếp thông tin như Card mạng, Modem ..\n· Interconnecting Media: Cáp xoắn đôi, cáp đồng (mỏng/dày), cáp quang.\n· Những đặc điểm cơ bản của Ethernet:\n· Cấu hình truyền thống: Bus đường thẳng/ Star\n· Cấu hình khác Star bus\n· Kỹ thuật truyền: Base band\n· Phương pháp truy nhập: CSMA/CD.\n· Quy cách kỹ thuật: IEEE 802.3.\n· Vận tốc truyền 10Mbps, 100Mbps ,10Gbps\n· Loại cáp: Cáp đồng trục mảnh, cáp đồng trục dày, cáp xoắn đôi, cáp quang ...\n\n3.5.2. Chức năng các tầng trong IEEE 802.\n\n      Chuẩn IEEE 802 bao gồm chức năng tầng vật lý (Physical) và liên kết dữ liệu (Data Link) trong mô hình OSI. Điều này có nghĩa là Uỷ ban 802 của IEEE nhấn mạnh tới việc tiêu chuẩn hoá các công nghệ phần cứng sử dụng tại tầng vật lý và tầng liên kết dữ liệu.\n      Chuẩn IEEE chia tầng liên kết dữ liệu thành hai tầng con, tầng điều khiển truy nhập MAC (Media Access Control) và điều khiển liên kết logic LLC (Logical Link Control).\nTầng LLC (Logical Link Control ):Tất cả mạng LAN theo chuẩn IEEE có cùng lớp LLC được định nghĩa bởi 802.2. Dùng chung tầng con LLC, cơ chế các tầng trên như nhau bất kể loại phần cứng nào được sử dụng. Giao diện giữa tầng kề trên với LLC được định nghĩa bởi các điểm LSAP (Link Service Access Points ). LSAP là các địa chỉ liên kết logic.Địa chỉ Ethernet có nhiều địa chỉ LSAP, những địa chỉ này cho phép liên kết giữa các thực thể trên mạng.Địa chỉ MAC là duy nhất.\nNếu thiết bị là DTE, nó quy định giao diện giữa giữa tầng MAC và tầng mạng.LLC quản lý liên kết dữ liệu và định nghĩa các điểm truy nhập dịch vụ (Service Access Point - SAP). LLC\nSublayer được tiêu chuẩn hoá trong IEEE 802.2\nNếu thiết bị DCE là Bridge. Brige cung cấp giao diện LAN-to-LAN sử dụng chung Protocol (Ethenet to Ethenet) hoặc giữa các LAN sử dụng khác Protocol (như Ethernet to Token\nRing). Bridge được tiêu chuẩn hoá trong IEEE 802.1\nLLC Header:\n\tDSAP (1)\n\tSSAP (1)\n\tCont (1)\n\tData (43 \u2026)\n\n\n\n· DSAP (Destination Service Access Point): Con trỏ thông báo cho NIC vị trí bộ  đệm để lưu trữ thông tin nhận.\n· SSAP (Source Service Access Point) Vị trí bộ đệm lưu trữ thông tin đi.\n· DSAP and SSAP cho phép nhiều giao thức cùng sử dụng chung NIC Card.\n· Cont (Control). Kiểu của LLC.\n· Data: Dữ liệu được đưa xuống từ lớp Network, có chiều dài tối đa là 1497 bytes\nTầng con LLC cung cấp các dịch vụ sau:\n· Type 1: Dịch vụ Datagram không liên kết và không có cơ chế báo nhận biết\n(Unacknowledgement). Cung cấp kết nối Point to Point, Multipoint và Broadcast.\n· Type 2: Dịch vụ mạch ảo, kiểu liên kết (Connection -Oriented ). Cung cấp các dịch vụ tuần tự, kiểm soát luồng, không lỗi giữa các LSAP.\n· Type 3: Dịch vụ Datagram kiểu không liên kết và có cơ chế báo nhận biết\n(Acknowledgement).\nTầng Ethernet Mac Sublayer: Liên quan đến các phương pháp truy nhập và kiểm soát truy nhập đến đường truyền chung. Token RING và Ethernet thực hiện trong tầng MAC bằng các phương pháp khác nhau cùng chia sẻ đường truyền.\n· Tạo Frame: Thêm các trường PRE, SFD, DE, SA, Length/Type, PAD, FCS và dữ liệu từ LLC đưa xuống tạo thành khung dữ liệu cung cấp cho tầng Vật lý.\n· Nhận khung dữ liệu từ tầng Vật lý, kiểm tra lỗi và gữi dữ liệu cho tầng LLC.\n· Điều khiển truy nhập phương tiện truyền dẫn.\nTầng Vật lý: Xác định tốc độ truyền, phương pháp mã hoá và phương tiện truyền dẫn vàcách thức kết nối vật lý. Tầng vật lý của IEEE 802.3 được phân chia là 2 phần:\n· Phần độc lập với đường truyền đặc tả giao diện giữa tầng MAC và tầng vật lý.\n· Phần phụ thuộc đường truyền và đặc tả giao diện với đường truyền của LAN và các tín hiệu trao đổi với đường truyền. Có nhiều tuỳ chọn khác nhau về kiểu đường truyền, phương thức truyền tín hiệu và tốc độ truyền, cách thức mã hoá.\n\n\n\n3.5.3 Cấu trúc khung Ethernet.\n\n (\nVùng tính FCS\nVùng phát hiện loiix FCS\n)\n\nHình 26: Cấu trúc khung Ethernet\n\n· Preamble (PRE) (7bytes): Đánh dấu điểm đầu khung, đồng bộ.\n· Start of frame delimiter (SFD) (1byte): 10101011\n· Destination/Source address (DA/SA) (6 bytes): Địa chỉ đích, địa chỉ nguồn.\n· Type (2 bytes): Chiều dài dữ liệu nếu nhỏ hơn 1500.\n· Data: Dữ liệu gửi từ LLC đưa xuống, gồm n byte (n<1501).\n· FCS (4 bytes) kiểm tra lỗi của các trường DA, SA, Length /Type và Data và PAD.\n3.5.4  Họ IEEE 802.\n\nIEEE 802.1: kiến trúc mạng, cung cấp giao diện LAN-to-LAN sử dụng chung Protocol LAN .\nIEEE 802.2: đặc tả chuẩn giao diện (Interface) giữa MAC và tầng mạng LLC quản lý liên kết dữ liệu và định nghĩa các điểm truy nhập dịch vụ (Service Access Point \u2013 SAP).\nEEE 802.3 đặc tả một mạng cục bộ dựa trên mạng Ethernet do Digital, Intel và Xerox hợp tác pháp triển từ năm 1980. IEEE 802.3 tương tự như DIX Ethernet, bao gồm cả tầng vật lý và tầng con MAC với các đặc tả sau:\n· Đặc tả dịch vụ MAC (MAC ServicesSecification)\n· Giao thức MAC (MAC Protocol).\n· Đặc tả vật lý (Medium-Independent Physical Specification) độc lập với đường truyền.\n· Đặc tả vật lý phụ thuộc đường truyền (Medium - Dependent Physical Specification).\n· Đặc tả dịch vụ MAC định nghĩa các dịch vụ IEEE 802.3 cung cấp cho tầng LLC hoặc người sử dụng ở tầng cao hơn.\nIEEE 802.4: Mô tả một mạng cục bộ với cấu trúc dạng hình BUS và cơ chế điều khiển truy nhập đường truyền thẻ bài Token BUS. Nó được thiết kế để ứng dụng trong các văn phòng và trong các môi trường công nghiệp và quân sự.\nIEEE 802.5: Là chuẩn đặc tả mạng cục bộ với mạng dạng vòng (RING) sử dụng thẻbài Token RING để điểu khiển truy nhập đường truyền. IEEE 802.5 bao gồm cả tầng vật lý vàtầng con MAC.\nIEEE 802.6: Mô tả một mạng tốc độ cao kết nối nhiều LAN thuộc các khu vực khác nhau của một đô thị (còn được gọi là MAN - Metropolitan Area Network). Các mạng IEEE 802.6 cho phép truyền dữ liệu với tốc độ cao từ vài chục đến hàng trăm Mb/s. Đáp ứng các yêu cầu truyền dữ liệu đa phương diện.\nIEEE 802.9: Đặc tả một mạng tích hợp dữ liệu và tiếng nói bao gồm 1 kênh dị bộ 10 Mb/s cùng với 96 kênh 64 Kb/s (tổng cộng 6Mb/s). Giải thông tổng cộng là 16 Mb/s. Chuẩn này còn được gọi là Isochronous Ethernet (IsoEnet) và nó được thiết kế cho các môi trường có lượng lưu thông lớn và cấp bách.\nIEEE 802.10: Chuẩn đặc tả về an toàn và mã hoá thông tin trong các mạng cục bộ.\nIEEE802.11: lchuẩn đặc tả mạng cục bộ không dây (Wireless LAN), hiện đang tiếp tục phát triển với phương pháp truy nhập CSMA/CD.\nIEEE 802.12 là chuẩn đặc tả mạng cục bộ bởi AT&T, IBM và HP, gọi là 100 VG - AnyLAN hay 100BASE-VG.Mạng sử dụng dạng hình sao xếp tầng (Cascaded Star Topology) và phương pháp truy nhập đường truyền có điều khiển tranh chấp.Khi có nhu cầu truyền dữ liệu, một trạm sẽ gửi yêu cầu đến HUB và trạm chỉ có thể truyền dữ liệu khi HUB cho phép.Chuẩn cung cấp một mạng tốc độ trên 100 Mb/s, có thể hoạt động trong các môi trường hỗn hợp Ethernet và Token Ring.Vì thế nó chấp nhận cả hai dạng Frame.\nIEEE 802.14: Chuẩn cuối cùng hiện nay là 802.14. Chuẩn này dùng cho truyền dữ liệu qua đường cáp TV, nhằm nâng cao tốc độ truy nhập Internet tại gia đình.\n\n3.5.5. Ethernet 100 Mbps.\n\nMạng Ethernet 100 Mbps được gồm 2 chuẩn :\n* Fast Ethernet (IEEE 802.3u): 100Base-TX, 100Base-T4 và 100Base-FX.\nCác loại cáp sử dụng\n· 100BASE-T4 sử dụng bốn đôi dây cân bằng cáp UTP Cat-3 hoặc Cat-5.\n· 100BASE-TX sử dụng hai đôi UTP Cat-5 hoặc đôi dây STP.\n· 100BASE-FX sử dụng đôi dây cáp quang đa mode.\nMã hóa:\n· 100Base-TX và 100Base-FX sử dụng kỹ thuật mã hóa 4B/5B.\n· 100Base-T4 sử dụng kỹ thuật mã hóa 8B/6T.\nPhương thức điều khiển truy nhập CSMA/CD\n· 100Base-T4 sử dụng phương thức hoạt động bán song công.\n· 100Base-TX sử dụng phương thức hoạt động song công.\n· 100Base-FX sử dụng cả phương thức hoạt động song công và bán song công.\n· 100VG-AnyLAN là công nghệ cạnh tranh với Fast Ethernet, ít được sử dụng.\n4. Mô phỏng mạng Vlan .\n4.1 Giới thiệu phần mêm Packet tracer.\n\n\nHình 27 : Giao diện của phần mềm packet tracer\n\n      Packet Tracer là một phần mềm giả lập mạng dùng trong học tập sử dụng các thiết bị mạng (router/switch) của Cisco. Nó được hãng Cisco cung cấp miễn phí cho các trường lớp, sinh viên đang giảng dạy/ theo học chương trình mạng của Cisco. Sản phẩm cung cấp một công cụ để nghiên cứu các nguyên tắc cơ bản của mạng và các kỹ năng làm việc với hệ thống Cisco.\nPhiên bản hiện nay của Packet Tracer hỗ trợ giả lập một loạt các phương thức tầng ứng dụng và các phương thức định tuyến cơ bản như RIP, OSPF, và EIGRP trong yêu cầu của chương trình CCNA.Trong khi phần mềm nhắm đến cung cấp một môi trường giả lập mạng, nó chỉ sử dụng một ít chức năng được cung cấp trên Cisco IOS.\n\n4.2 Mô phỏng một mạng Vlan trên phần mềm packet tracer.\n\nXây dựng 3 mang Vlan khác nhau : Cafe 1, Cafe 2, Văn phòng.\nTrong mỗi mạng Lan được kết nối giữa các thiết bị  với nhau bằng các Switch, có hệ thống wifi\u2026\nBa mang Vlan được kết nối với nhau bởi các Router và được nối ra ngoài mangInternet .\n\n\nHình 28: Mô hình mạng Vlan\n\nHình 29: Quá trình ping thông giữa 2 máy tính của 2 mang vlan\n\n\nHình 30: Quá trình gửi gói tin từ 2 máy tính trong  2 vlan khác nhau\n5 .Kết luận chương.\n\n    Chương 2 cho t a cách nhìn về mạng Vlan hiện nay, các ưu điểm về bảo mật, quản lý, tránh gây lãng phí tài nguyên Vlan. Đề cập đến các các tiêu chuẩn của công nghệ ethernet trong mang Lan.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nChương III: MẠNG RIÊNG ẢO VPN\n\n1. Tìm hiểu mạng riêng ảo VPN .\n\n      Giải pháp VPN (Virtual Private Network) được thiết kế cho những tổ chức có xu hướng tăng cường thông tin từ xa vì địa bàn hoạt động rộng (trên toàn quốc hay toàn cầu). Tài nguyên ở trung tâm có thể kết nối đến từ nhiều nguồn nên tiết kiệm được được chi phí và thời gian.\n\t\n\n\n\tHinh 31: Mô hình mạng VPN đơn giản\n\n\n\n1.1 Khái niệm.\n\n     Về cơ bản, VPN là một mạng riêng sử dụng hệ thống mạng công cộng (thường là Internet) để kết nối các địa điểm hoặc người sử dụng từ xa với một mạng LAN ở trụ sở trung tâm.Thay vì dùng kết nối thật khá phức tạp như đường dây thuê bao số, VPN tạo ra các liên kết ảo được truyền qua Internet giữa mạng riêng của một tổ chức với địa điểm hoặc người sử dụng ở xa.\n\n1.2 Các loại VPN.\n\n      Có hai loại phổ biến hiện nay là VPN truy cập từ xa (Remote-Access ) và VPN điểm-nối-điểm (site-to-site)\n     VPN truy cập từ xa: còn được gọi là mạng Dial-up riêng ảo (VPDN), là một kết nối người dùng-đến-LAN, thường là nhu cầu của một tổ chức có nhiều nhân viên cần liên hệ với mạng riêng của mình từ rất nhiều địa điểm ở xa. Ví dụ như công ty muốn thiết lập một VPN lớn phải cần đến một nhà cung cấp dịch vụ doanh nghiệp (ESP).ESP này tạo ra một máy chủ truy cập mạng (NAS) và cung cấp cho những người sử dụng từ xa một phần mềm máy khách cho máy tính của họ.Sau đó, người sử dụng có thể gọi một số miễn phí để liên hệ với NAS và dùng phần mềm VPN máy khách để truy cập vào mạng riêng của công ty. Loại VPN này cho phép các kết nối an toàn, có mật mã.\nHình minh họa 15 cho thấy kết nối giữa Văn phòng chính và \"Văn phòng\" tại gia hoặc nhân viên di động là loại VPN truy cập từ xa).\n      VPN điểm-nối-điểm : là việc sử dụng mật mã dành cho nhiều người để kết nối nhiều điểm cố định với nhau thông qua một mạng công cộng như Internet. Loại này có thể dựa trên Intranet hoặc Extranet. Loại dựa trên Intranet: Nếu một công ty có vài địa điểm từ xa muốn tham gia vào một mạng riêng duy nhất, họ có thể tạo ra một VPN intranet (VPN nội bộ) để nối LAN với LAN. Loại dựa trên Extranet: Khi một công ty có mối quan hệ mật thiết với một công ty khác (ví dụ như đối tác cung cấp, khách hàng...), họ có thể xây dựng một VPN extranet (VPN mở rộng) kết nối LAN với LAN để nhiều tổ chức khác nhau có thể làm việc trên một môi trường chung.\nTrong hình 15 minh họa trên, kết nối giữa Văn phòng chính và Văn phòng từ xa là loại VPN Intranet, kết nối giữa Văn phòng chính với Đối tác kinh doanh là VPN Extranet\n.\n1.3 Bảo mật trong VPN.\n\n      Tường lửa (firewall) là rào chắn vững chắc giữa mạng riêng và Internet. Bạn có thể thiết lập các tường lửa để hạn chế số lượng cổng mở, loại gói tin và giao thức được chuyển qua. Một số sản phẩm dùng cho VPN như router 1700 của Cisco có thể nâng cấp để gộp những tính năng của tường lửa bằng cách chạy hệ điều hành Internet Cisco IOS thích hợp. Tốt nhất là hãy cài tường lửa thật tốt trước khi thiết lập VPN.\n     Mật mã truy cập là khi một máy tính mã hóa dữ liệu và gửi nó tới một máy tính khác thì chỉ có máy đó mới giải mã được. Có hai loại là mật mã riêng và mật mã chung.\nMật mã riêng (Symmetric-Key Encryption): Mỗi máy tính đều có một mã bí mật để mã hóa gói tin trước khi gửi tới máy tính khác trong mạng. Mã riêng yêu cầu bạn phải biết mình đang liên hệ với những máy tính nào để có thể cài mã lên đó, để máy tính của người nhận có thể giải mã được.\n      Mật mã chung (Public-Key Encryption) kết hợp mã riêng và một mã công cộng. Mã riêng này chỉ có máy của bạn nhận biết, còn mã chung thì do máy của bạn cấp cho bất kỳ máy nào muốn liên hệ (một cách an toàn) với nó. Để giải mã một message, máy tính phải dùng mã chung được máy tính nguồn cung cấp, đồng thời cần đến mã riêng của nó nữa. Có một ứng dụng loại này được dùng rất phổ biến là Pretty Good Privacy (PGP), cho phép bạn mã hóa hầu như bất cứ thứ gì.\n      Giao thức bảo mật giao thức Internet (IPSec) cung cấp những tính năng an ninh cao cấp như các thuật toán mã hóa tốt hơn, quá trình thẩm định quyền đăng nhập toàn diện hơn.\n      IPSec có hai cơ chế mã hóa là Tunnel và Transport.Tunnel mã hóa tiêu đề (header) và kích thước của mỗi gói tin còn Transport chỉ mã hóa kích thước.Chỉ những hệ thống nào hỗ trợ IPSec mới có thể tận dụng được giao thức này. Ngoài ra, tất cả các thiết bị phải sử dụng một mã khóa chung và các tường lửa trên mỗi hệ thống phải có các thiết lập bảo mật giống nhau. IPSec có thể mã hóa dữ liệu giữa nhiều thiết bị khác nhau như router với router, firewall với router, PC với router, PC với máy chủ.\n\nMáy chủ AAA: \n     AAA là viết tắt của ba chữ Authentication (thẩm định quyền truy cập), Authorization (cho phép) và Accounting (kiểm soát). Các server này được dùng để đảm bảo truy cập an toàn hơn. Khi yêu cầu thiết lập một kết nối được gửi tới từ máy khách, nó sẽ phải qua máy chủ AAA để kiểm tra. Các thông tin về những hoạt động của người sử dụng là hết sức cần thiết để theo dõi vì mục đích an toàn.\nSản phẩm công nghệ dành cho VPN:\n     Tùy vào loại VPN (truy cập từ xa hay điểm-nối-điểm), bạn sẽ cần phải cài đặt những bộ phận hợp thành nào đó để thiết lập mạng riêng ảo. Đó có thể là:\n· Phần mềm cho desktop của máy khách dành cho người sử dụng từ xa.\n· Phần cứng cao cấp như bộ xử lý trung tâm VPN hoặc firewall bảo mật PIX.\nServer VPN cao cấp dành cho dịch vụ Dial-up.\n· NAS (máy chủ truy cập mạng) do nhà cung cấp sử dụng để phục vụ người sử dụng từ xa.\n· Mạng VPN và trung tâm quản lý. \n\nBộ xử lý trung tâm VPN\n      Có nhiều loại máy xử lý VPN của các hãng khác nhau, nhưng sản phẩm của Cisco tỏ ra vượt trội ở một số tính năng.Tích hợp các kỹ thuật mã hóa và thẩm định quyền truy cập cao cấp nhất hiện nay, máy xử lý VPN được thiết kế chuyên biệt cho loại mạng này.Chúng chứa các module xử lý mã hóa SEP, cho phép người sử dụng dễ dàng tăng dung lượng và số lượng gói tin truyền tải.Dòng sản phẩm có các model thích hợp cho các mô hình doanh nghiệp từ nhỏ đến lớn (từ100 cho đến 10.000 điểm kết nối từ xa truy cập cùng lúc). \n\t\n\n\tHình 32: Bộ xử lý trung tâm VPN số hiệu 3000 của hãng Cisco.\n \n\n\nRouter dùng cho VPN\n      Thiết bị này cung cấp các tính năng truyền dẫn, bảo mật. Dựa trên hệ điều hành Internet IOS của mình, hãng Cisco phát triển loại router thích hợp cho mọi trường hợp, từ truy cập nhà-tới-văn phòng cho đến nhu cầu của các doanh nghiệp quy mô lớn.\nTường lửa PIX của Cisco\n      Firewall trao đổi Internet riêng (Private Internet Exchange) bao gồm một cơ chế dịch địa chỉ mạng rất mạnh, máy chủ proxy, bộ lọc gói tin, các tính năng VPN và chặn truy cập bất hợp pháp.Thay vì dùng IOS, thiết bị này có hệ điều hành với khả năng tổ chức cao, xoay sở được với nhiều giao thức, hoạt động rất mạnh bằng cách tập trung vào IP.\n2. VPN getway.\n2.1 Đường hầm (Tunneling).\n\nHình 33: Mô hình đường hầm\n\n       Đường hầm là khái niệm để chỉ một kênh logic trên đó các gói tin được đóng trong một khung với địa chỉ nguồn và địa chỉ đich mới (hoặc sử dung giao thức mới).Như vậy, phần địa chỉ của gói tin ban đầu sẽ được ẩn trong gói tin mới. Đây là biện pháp tăng cường an ninh và chất lượng dịch vụ.\n\n     Hầu hết các VPN đều dựa vào kỹ thuật gọi là Tunneling để tạo ra một mạng riêng trên nền Internet. Về bản chất, đây là quá trình đặt toàn bộ gói tin vào trong một lớp header (tiêu đề) chứa thông tin định tuyến có thể truyền qua hệ thống mạng trung gian theo những \"đường ống\" riêng (tunnel). \n      Khi gói tin được truyền đến đích, chúng được tách lớp header và chuyển đến các máy trạm cuối cùng cần nhận dữ liệu. Để thiết lập kết nối Tunnel, máy khách và máy chủ phải sử dụng chung một giao thức (tunnel protocol). \n      Giao thức của gói tin bọc ngoài được cả mạng và hai điểm đầu cuối nhận biết.Hai điểm đầu cuối này được gọi là giao diện Tunnel (tunnel interface), nơi gói tin đi vào và đi ra trong mạng.\n\n2.2 Các giao thức trong đường hầm.\n\nKỹ thuật Tunneling yêu cầu 3 giao thức khác nhau:\n· Giao thức truyền tải (Carrier Protocol) là giao thức được sử dụng bởi mạng có thông tin đang đi qua.\n· Giao thức mã hóa dữ liệu (Encapsulating Protocol) là giao thức (như GRE, IPSec, L2F, PPTP, L2TP) được bọc quanh gói dữ liệu gốc.\n· Giao thức gói tin (Passenger Protocol) là giao thức của dữ liệu gốc được truyền đi (như IPX, NetBeui, IP).\n     Người dùng có thể đặt một gói tin sử dụng giao thức không được hỗ trợ trên Internet (như NetBeui) bên trong một gói IP và gửi nó an toàn qua Internet. Hoặc, họ có thể đặt một gói tin dùng địa chỉ IP riêng (không định tuyến) bên trong một gói khác dùng địa chỉ IP chung (định tuyến) để mở rộng một mạng riêng trên Internet.\n2.3 Kỹ thuật Tunneling trong mạng VPN điểm-nối điểm .\n\n     Trong VPN loại này, giao thức mã hóa định tuyến GRE (Generic Routing Encapsulation) cung cấp cơ cấu \"đóng gói\" giao thức gói tin (Passenger Protocol) để truyền đi trên giao thức truyền tải (Carier Protocol).Nó bao gồm thông tin về loại gói tin mà bạn đnag mã hóa và thông tin về kết nối giữa máy chủ với máy khách.Nhưng IPSec trong cơ chế Tunnel, thay vì dùng GRE, đôi khi lại đóng vai trò là giao thức mã hóa.IPSec hoạt động tốt trên cả hai loại mạng VPN truy cập từ xa và điểm- nối-điểm.Tất nhiên, nó phải được hỗ trợ ở cả hai giao diện Tunnel.\n\n\t\n\n\tHình 34: Mô hình điểm nối điểm\n\n      Trong mô hình này, gói tin được chuyển từ một máy tính ở văn phòng chính qua máy chủ truy cập, tới router (tại đây giao thức mã hóa GRE diễn ra), qua Tunnel để tới máy tính của văn phòng từ xa. \n\n\n\n2.4Kỹ thuật Tunneling trong mạng VPN truy cập từ xa .\n\n      Với loại VPN này, Tunneling thường dùng giao thức điểm-nối-điểm PPP (Point-to-Point Protocol). Là một phần của TCP/IP, PPP đóng vai trò","u":"http://202.191.57.85:8000/InternetData/Data/khoDATN/DTVT full/doc/Nghiên cứu về các công nghệ sử dụng trong mạng riêng ảo.txt","sentences":[[1,"Em xin chân thành cảm ơn thầy giáo hướng dẫn, Tiến sỹ - Giảng viên Nguyễn Quốc Khương, bộ môn Kĩ Thuật Thông Tin , khoa Điện Tử Viễn Thông , trường Đại học Bách Khoa Hà Nội đã nhiệt tình hướng dẫn, chỉ bảo và cung cấp cho em nhiều kiến thức cũng như tài liệu quý trong suốt quá trình làm đồ án"],[2,"Nhờ sự giúp đỡ của thầy em mới có thể hoàn thành được đồ án này"],[3,"Trong quá trình làm đồ án không tránh khỏi nhưng thiếu sót mong thầy cô cùng các bạn góp ý để đồ án hoàn thiên hơn"],[4,"Em xin cảm ơn"],[5,"Hà Nôi, ngày tháng năm 2014"],[6,"MỤC LỤC LỜI CẢM ƠN 1 DANH MỤC CÁC TỪ VIẾT TẮT 7 LỜI NÓI ĐẦU 9 Chương I: TỔNG QUAN VỀ MẠNG MÁY TÍNH 11 1. Mạng máy tính là gì"],[7,"11 1.1 Khái niệm về mạng máy tính"],[8,"11 1.2. Các mục tiêu của việc tạo nên mạng máy tính 11 1.3"],[9,"Phân loại mạng máy tính 11 1.4"],[10," Phân loại mạng theo khoảng cách địa lý 12 2"],[11,"Giới thiệu về các loại mạng 13 2.1Định nghĩa mạng LAN 13 2.1.1 Các đặc tính kỹ thuật của Lan 14 2.2 Khái niệm về mạng Wan"],[12,"15 2.2.1Khái niệm mang WAN"],[13,"15 2.2.2 Các yếu tố trong mang WAN"],[14,"17 2.3 Mạng Intranet"],[15,"19 2.4 Mạng không dây (IEEE802.11)"],[16,"19 3"],[17,"Mô hình tham chiếu TCP/IP 20 3.1 Mô hình OSI 7 tầng 20 3.1.1 Tầng ứng dụng (Application layer )"],[18,"21 3.1.2 Tầng trình diễn(Presentation layer)"],[19,"22 3.1.3 Tầng phiên(Session layer)"],[20,"22 3.1.4 Tầng vận chuyển (Transport Layer)"],[21,"22 3.1.5 Tầng mạng (Network Layer)"],[22,"23 3.1.6 Tầng liên kết dữ liệu (Data Link Layer)"],[23,"23 3.1.7 Tầng vật lý (Physical)"],[24,"23 3.1.8 Quá trình đóng gói dữ liệu trong mô hình OSI"],[25,"24 3.2.1 So sánh giữa mô hình tham chiếu OSI và mô hình TCP/IP"],[26,"26 3.2.2 Một số giao thức cơ bản của bộ giao thức TCP/IP"],[27,"26 3.2.3 Bắt tay 3 bước trong TCP"],[28,"29 3.2.4 Quá trình ngắt phiên TCP (TCP Session Termination)"],[29,"30 3.2.5 Quá trình gửi một gói tin giữa 2 PC 31 4.Địa chỉ mạng (IP)"],[30,"33 4.1 Giao thức Internet phiên bản 4 (Ipv4)"],[31,"34 4.2 Giao thức Internet phiên bản 6 (Ipv6)"],[32,"36 4.2.1 Nguyên nhân phát triển IPv6 37 4.2.2 Những giới hạn của IPv4"],[33,"38 4.2.3 Đặc điểm của IPv6"],[34,"38 4.2.4 Cấu trúc địa chỉ IPv6: 40 5"],[35,"Kết luận chương"],[36,"42 Chương II : MẠNG LAN ẢO 43 1.Giới thiệu về Vlan"],[37,"43 2"],[38,"Khái niệm về Vlan"],[39,"44 2.1 Giới thiệu về VLAN"],[40,"44 2.2 Miền quảng bá với VLAN và router"],[41,"45 2.3 Hoạt động của VLAN 46 2.4 Phân loại các loại Vlan"],[42,"49 2.5 Ưu điểm (lợi ích) của Vlan 49 3 .VLAN Trunking Protocol \u2013 Giao thức mạch nối VLAN \u2013 VTP"],[43,"50 3.1 Khái niệm, hoạt động của mạch nối (trunk) 50 3.1.1 Hoạt động của Trunking"],[44,"51 3.2 Giao thức mạch nối VLAN \u2013 VTP"],[45,"51 3.2.1 Nguồn gốc VTP"],[46,"51 3.2.2 Lợi ích của VTP"],[47,"52 3.2.3"],[48,"VTP Domain"],[49,"53 3.2.4"],[50,"Các chế độ VTP Domain"],[51,"53 3.3"],[52,"STP \u2013 SPANNING TREE PROTOCOL"],[53,"54 3.3.1"],[54,"Giới thiệu về STP"],[55,"54 3.3.2 Các khái niệm cơ bản về STP"],[56,"55 3.3.3 Quá trình bầu chọn Root Bridge"],[57,"57 3.4"],[58,"Giao thức EtherChannel"],[59,"58 3.4.1 Giao thức EtherChannel là gì"],[60,"Tại sao lại cần nó"],[61,"58 3.4.2 Giao thức trong EtherChannel"],[62,"59 3.5"],[63,"Ethernet và chuẩn IEEE 802"],[64,"60 3.5.1"],[65,"Giới thiệu chung về Ethernet"],[66,"60 3.5.2"],[67,"Chức năng các tầng trong IEEE 802"],[68,"62 3.5.3 Cấu trúc khung Ethernet"],[69,"64 3.5.4 Họ IEEE 802"],[70,"65 3.5.5"],[71,"Ethernet 100 Mbps"],[72,"66 4"],[73,"Mô phỏng mạng Vlan"],[74,"67 4.1 Giới thiệu phần mêm Packet tracer"],[75,"67 4.2 Mô phỏng một mạng Vlan trên phần mềm packet tracer"],[76,"68 5 .Kết luận chương"],[77,"70 Chương III: MẠNG RIÊNG ẢO VPN 71 1"],[78,"Tìm hiểu mạng riêng ảo VPN"],[79,"71 1.1 Khái niệm"],[80,"71 1.2 Các loại VPN"],[81,"72 1.3 Bảo mật trong VPN"],[82,"73 2"],[83,"VPN getway"],[84,"76 2.1 Đường hầm (Tunneling)"],[85,"76 2.2 Các giao thức trong đường hầm"],[86,"77 2.3 Kỹ thuật Tunneling trong mạng VPN điểm-nối điểm "],[87,"77 2.4Kỹ thuật Tunneling trong mạng VPN truy cập từ xa"],[88,"78 3"],[89,"Các giao thức của VPN Tunneling"],[90,"79 4"],[91,"Mô phỏng mang VPN trên packet tracer 81 5"],[92,"Kết luận chương 83 KẾT LUẬN 84 TÀI LIỆU THAM KHẢO 85"],[93,"DANH MỤC CÁC HÌNH VẼ Hình 1: Mô hình một số mạng cơ bản 8 Hình 2: Mô hình một mạng WAN 11 Hình 3: Một số thiết bị của mạng không dây 14 Hình 4: Mô hình tham chiếu TCP/IP 15 Hình 5: Mô hình 7 lớp OSI 16 Hình 6: Quá trình đóng gói dữ liệu qua 7 tầng OSI 19 Hình 7: Mô hình TCP/IP 20 Hình 8: Quá trình bắt tay 3 bước trong TCP 24 Hinh 9: Quá trình ngắt phiên kết nối 25 Hình 10: Cấu trúc của một gói tin 26 Hình 11: Quá trình đóng gói dữ liệu 27 Hình 12: Quá trình tháo gói dữ liệu 27 Hinh 13: Cấu trúc lớp địa chỉ IP 30 Hình 14: Các vùng địa chỉ của các lớp 31 Hình 15: Mô hình Ipv6 35 Hình 16: Mô hình mạng Vlan giữa các tầng 39 Hình 17: Ba miền quảng bá trên 3 switch khác nhau 40 Hình 18: Ba VLAN và 3 miền quảng bá trên một switch 40 Hình 19: Mô hình chia VLAN theo cổng 43 Hình 20: Đường trunk trong Vlan 45 Hình 21: Một trường BID 51 Hình 22: Bảng chi phí của các đường đi"],[94,"51 Hình 23: Bản tin BPDU 52 Hình 24: Công nghệ EtherChannel 53 Hình 25: Mối quan hệ của các chuẩn 802 với mô hình tham chiếu OSI 56 Hình 26: Cấu trúc khung Ethernet 59 Hình 27 : Giao diện của phần mềm packet tracer 62 Hình 28: Mô hình mạng Vlan 63 Hình 29: Quá trình ping thông giữa 2 máy tính của 2 mang vlan 64 Hình 30: Quá trình gửi gói tin từ 2 máy tính trong 2 vlan khác nhau 65 Hinh 31: Mô hình mạng VPN đơn giản 66 Hình 32: Bộ xử lý trung tâm VPN số hiệu 3000 của hãng Cisco"],[95,"70 Hình 33: Mô hình đường hầm 70 Hình 34: Mô hình điểm nối điểm 72 Hình 35: Mô hình mang VPN 76 Hình 36: Ping thông trong mang qua đường hầm 76"],[96,"DANH MỤC CÁC TỪ VIẾT TẮT PAN Personal Area Network Mạng cá nhân LAN Local Area Netword Mạng cục bộ MAN Metropolitan AreaNetwork Mạng đô thị WAN Wide Area Network Mạng diện rộng TCP/IP Internet protocol suite /IP suite  Bộ giao thức liên mạng OSI Open Systems Interconnection Reference Model Mô hình tham chiếu kết nối các hệ thống mở HTTP HyperText Transfer Protocol Giao thức truyền tải siêu văn bản FTP File Transfer Protocol  Giao thức truyền tập tin SMTP Simple Mail Transfer Protocol Giao thức truyền tải thư tín đơn giản POP3 Post Office Protocol Là một giao thức gửi thư điện tử TCP Transmission Control Protocol Giao thức điều khiển truyền vận UDP User Datagram Protocol Một giao thức trên TCP/IP DHCP Dynamic Host Configuration Protocol Giao thức cấu hình động máy chủ IP Internet Protocol Là một địa chỉ của 1 host ICMP Internet Control Message Protocol Bộ giao thức liên mạng IGMP Internet group management protocol Giao thức quản lý nhóm Internet TELNET TErminaL NETwork Là một giao thức mang để truy nhập"],[97,"SNMP Simple Network Management Protocol Giao thức kiểm tra các thiết bị mạng"],[98,"VoIP Voice over Internet Protocol Truyền giọng nói trên giao thức IP Ipv4 Internet Protocol version 4 Internet phiên bản 4 IPv6 Internet Protocol version 6 Internet phiên bản 6 IEEE  Institute of Electrical and Electronics Engineers Họ ethernet MAC Media Access Control Điều khiển truy nhập môi trường CCNA Cisco Certificated Network Academy Chứng chỉ về mạng của cisco VPN Virtual Private Network Mạng riêng ảo"],[99,"LỜI NÓI ĐẦU Ngày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang bùng nổ trên toàn Thế giới, các công ty, các tổ chức mọc lên ngày càng nhiều, hoạt động của các công ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang thiết bị hiện đại"],[100,"Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải nhờ vào công cụ là máy tính và hệ thống mạng máy tính, mới giúp con người có thể làm việc được nhanh chóng đồng thời giúp lưu trữ dữ liệu được lâu dài"],[101,"Hiện nay việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho một công ty, cũng như một tổ chức phi kinh tế nào khác.Không những thế đối với đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều hết sức quan trọng.Chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời"],[102,"Hệ thống mạng máy tính giúp cho chúng ta có thể thực hiện công việc hiệu quả rất nhiều lần, nó giúp cho con người có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng, nó cũng giúp chúng ta lưu trữ một lượng lớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông tin nhanh chóng\u2026 và rất rất nhiều ứng dụng khác chưa kế đến việc nó giúp cho con người trong hoạt động giải trí, thư giãn\u2026"],[103,"Trên cơ sở những kiến thức tích luỹ trong những năm học tập chuyên ngành Điện Tử - Viễn Thông tại trường đại học Bách Khoa Hà Nội và với sự hướng dẫn của thầy Nguyễn Quốc Khương em đã tìm hiểu và hoàn thành đồ án tốt nghiệp với đề tài : \u201cNghiên cứu về các công nghệ sử dụng trong mạng riêng ảo\u201d"],[104,"Em xin chân thành thầy Nguyễn Quốc Khương đã trực tiếp hướng dẫn và giúp đỡ em hoàn thành đồ án tốt nghiệp này"],[105,"Chương I: TỔNG QUAN VỀ MẠNG MÁY TÍNH 1. Mạng máy tính là gì"],[106,"1.1 Khái niệm về mạng máy tính"],[107,"Mạng máy tính là hệ thống các máy tính độc lập được kết nối với nhau thông qua các con đường truyền vật lý và tuân theo các quy ước truyền thống nào đó.Khái niêm máy tính đôc lập ở đây có nghĩa là các máy tính không có máy nào có khả năng khởi động hoặc đình chỉ một máy khác"],[108,"Các đường truyền vật lý được hiểu là các môi trường truyền tín hiệu vật lý (có thể hữu tuyến hoặc vô tuyến như dây dẫn, tia Laser, sóng ngắn, vệ tinh nhân tạo..) Các quy ước truyền thông chính là cơ sở để các máy tính có thể \u201cnói chuyện\u201d được với nhau và là một yếu tố quan trọng hàng đầu khi nói về công nghệ mạng máy tính"],[109,"1.2. Các mục tiêu của việc tạo nên mạng máy tính · Sử dung chung tài nguyên: chương trình, dữ liệu, thiết bị."],[110,"· Tăng độ tin cậy của hệ thống thông tin: nếu một máy hay một đơn vị dữ liệu nào đó trong mạng bị hỏng thì luôn có thể sử dụng một máy khác hay một bản sao của đơn vị dữ liệu"],[111,"· Tiết kiệm chi phí, giá thành"],[112,"· Quản lý tập trung"],[113,"· Tạo ra môi trường truyền thông mạnh giữa nhiều người sử dung trên pham vi địa lý rộng"],[114,"Mục tiêu này ngày càng trở nên quan trọng"],[115,"1.3"],[116,"Phân loại mạng máy tính Có nhiều cách phân loại mạng khác nhau tùy thuộc vào yếu tố chính được chọn dùng để làm chỉ tiêu phân loại, thông thường người ta phân loại mạng theo các tiêu chí sau : · Khoảng cách địa lý của mạng"],[117,"· Kĩ thuật chuyển mạch mà mạng áp dụng"],[118,"· Kiến trúc mang"],[119,"· Hệ điều hành mạng sử dụng Unix, Linux, Windowns NT Server ..."],[120,"1.4"],[121," Phân loại mạng theo khoảng cách địa lý  Nếu lấy khoảng cách địa lý làm yếu tố phân loại mạng thì ta có mạng cục bộ, mạng đo thị, mạng diên rộng, mạng toàn cầu"],[122,"Mạng cá nhân (PAN-Personal Area Network): là mạng chỉ hoạt động >10m xung quanh người dùng nhằm phục vụ truyền nhân các thiết bị ngoại vi như tai nghe, chuột không dây\u2026 Mạng cục bộ: (Lan \u2013 Local Area Netword ): là mạng chỉ được cài đặt trong phạm vi tương đối nhỏ hẹp như trong một tòa nhà, một xí nghiệp \u2026với khoảng cách lớn nhất giữa các máy tính trên mạng trong vòng vài km trở lại"],[123,"Mạng đô thị (MAN \u2013 Metropolitan Area Network): là mang được cài đặt trong phạm vi một đô thị, một trung tâm văn hóa xã hội, có bán kính từ tối đa10km trờ lại"],[124,"Mạng diện rộng(WAN \u2013 Wide Area Network): là mạng có diện tích bao phủ rộng lớn, phạm vi mạng có thể vượt biên giới quốc gia thậm chí cả lục địa"],[125,"Dưới đây là mô hình một số mạng cơ bản"],[126,""],[127,"Hình 1: Mô hình một số mạng cơ bản 2"],[128,"Giới thiệu về các loại mạng 2.1Định nghĩa mạng LAN LAN (viết tắt từ tên tiếng Anh Local Area Network, \"mạng máy tính cục bộ\") là một hệ thống mạng dùng để kết nối các máy tính trong một phạm vi nhỏ (nhà ở, phòng làm việc, trường học, \u2026)"],[129,"Các máy tính trong mạng LAN có thể chia sẻ tài nguyên với nhau, mà điển hình là chia sẻ tập tin, máy in, máy quét và một số thiết bị khác"],[130,"Đặc điểm của mạng cục bộ: · Mạng cục bộ có quy mô nhỏ, thường là bán kính dưới vài km"],[131,"Đặc điểm này cho phép không cần dùng các thiết bị dẫn đường với các mối liên hệ phức tạp"],[132,"· Mạng cục bộ thường là sở hữu của một tổ chức"],[133,"Điều này dường như có vẻ ít quan trọng nhưng trên thực tế đó là điều khá quan trọng để việc quản lý mạng có hiệu quả"],[134,"· Mang cục bộ thường là sở hữu của một tổ chức"],[135,"Điều này dường như có vẻ ít quan trọng nhưng trên thực tế đó là điều khá quan trọng để việc quản lý mạng có hiệu quả"],[136,"· Mạng cục bộ có tốc độ cao và ít lỗi"],[137,"Trên mạng rộng tốc độ nói chung chỉ đạt vài Kbit/s"],[138,"Còn tốc độ thông thường trên mạng cục bộ là 10, 100 Mb/s và tới nay với Gigabit Ethernet, tốc độ trên mạng cục bộ có thể đạt 1Gb/s rất cao"],[139,"2.1.1 Các đặc tính kỹ thuật của Lan · Đường truyền: Là thành phần quan trọng của một mạng máy tính, là phương tiện dùng để truyền các tín hiệu từ giữa các máy tính"],[140,"Các tín hiệu điện tử đó chính là các thông tin, dữ liệu được biểu thị dưới dạng các xung nhị phân (ON-OFF), mọi tín hiệu truyền giữa các máy tính với nhau đều thuộc sóng điện từ, tùy theo tần số mà ta có thể dựng các đường vật lý khác nhau"],[141,"Các máy tính được kết nối với nhau bởi các loại cáp truyền: cáp đồng trục, cáp xoắn đôi\u2026 · Chuyển mạch:Là đặc trưng kỹ thuật chuyển tín hiệu giữa các nút trong mạng, các nút trong mạng có chức năng hướng thông tin tới đích nào đó trong mạng"],[142,"Trong mạng nội bộ, phần chuyển mạch thực hiện thông ua các thiết bị chuyển mạch như hub, switch\u2026 · Kiến trúc mạng:Kiến trúc mạng máy tính (network architecture) thể hiện cách kết nối các máy tính với nhau và tập hợp các quy tắc, quy ước mà tất cả các thực thể tham gia truyền thông trên mạng phải tuân theo để đảm bảo cho mạng hoạt động tốt"],[143,"· Khi nói đến kiến trúc của mạng người ta muốn nói tới hai vấn đề là topo mang (Network topology) và giao thưc mang (Network protocol)"],[144,"Khi nói đến kiến trúc của mạng người ta muốn nói tới hai vấn đề là topo mạng(Network topology) và giao thức mạng (Network protocol)"],[145,"· Network Topology: Cách kết nối các máy tính với nhau về mặt hình học màta gọi là Topo của mạng.Các hình trạng mạng cơ bản đó là: hình sao, hình bus, hình vòng"],[146,"· Network Protocol: Tập hợp các quy ước truyền thông giữa các thực thểtruyền thông mà ta gọi là giao thức (hay nghi thức) của mạng Các giao thức thường gặp nhất là: TCP/IP, NETBIOS, IPX/SPX,.."],[147,"Hệ điều hành mạng: Hệ điều hành mạng là một phần mềm hệ thống có cácchức năng sau: · Quản lý tài nguyên của hệ thống, các tài nguyên này gồm: · Tài nguyên thông tin (về phương diện lưu trữ) hay nói một cách đơn giản làquản lý tệp"],[148,"Các công việc về lưu trữ tệp, tìm kiếm, xóa, copy, nhóm, đặt các thuộctính đều thuộc nhóm công việc này"],[149,"· Tài nguyên thiết bị: Điều phối việc sử dụng CPU, các thiết bị ngoại vi.."],[150,"để tốiưu hóa việc sử dụng"],[151,"+ Quản lý người dựng và các công việc trên hệ thống"],[152,"Hệ điều hành đảm bảo giao tiếp giữa người sử dụng, chương trình ứng dụng vớithiết bị của hệ thống"],[153,"+ Cung cấp các tiện ích cho việc khai thác hệ thống thuận lợi (ví dụ Formatđĩa, sao chép tệp và thư mục, in ấn chung ...) Các hệ điều hành mạng thông dụng nhất hiện nay là: WindowsNT,Windows7, Windows 2000, Unix,Linux\u2026."],[154,"2.2 Khái niệm về mạng Wan"],[155,"2.2.1Khái niệm mang WAN"],[156,"Hình 2: Mô hình một mạng WAN Wide Area Networks \u2013 WAN, là mạng được thiết lập để liên kết các máy tính của hai hay nhiều khu vực khác nhau, ở khoảng cách xa về mặt địa lý, như giữa các quận trong một thành phố, hay giữa các thành phố hay các miền trong nước.Đặc tính này chỉ có tính chất ước lệ, nó càng trở nên khó xác định với việc phát triển mạnh của các công nghệ truyền dẫn không phụ thuộc vào khoảng cách"],[157,"Tuy nhiên việc kết nối với khoảng cách địa lý xa buộc WAN phụ thuộc vào nhiều yếu tố như: giải thông và chi phí cho giải thông, chủ quản của mạng, đường đi của thông tin trên mạng.WAN có thể kết nối thành mạng riêng của một tổ chức, hay có thể phải kết nối quanhiều hạ tầng mạng công cộng và của các công ty viễn thông khác nhau.WAN có thể dùng đường truyền có giải thông thay đổi trong khoảng rất lớn từ 56Kbps đến T1 với 1.544 Mbps hay E1 với 2.048 Mbps,....và đến Giga bít-Gbpslà các đường trục nối các quốc gia hay châu lục"],[158,"Ở đây bps (Bit Per Second) làmột đơn vị trong truyền thông tương đương với 1 bit được truyền trong mộtgiây,ví dụnhư tốc độ đường truyền là 1 Mbps tức là có thể truyền tối đa 1 Megabittrong 1giây trên đường truyền đó)"],[159,"Do sự phức tạp trong việc xây dựng, quản lý, duy trì các đường truyền dẫn nên khi xây dựng mạng diện rộng WAN người ta thường sử dụng các đường truyền được thuê từ hạ tầng viễn thông công cộng, và từ các công ty viễn thông hay các nhà cung cấp dịch vụ truyền số liệu"],[160,"Tùy theo cấu trúc của mạng những đường truyền đó thuộc cơ quan quản lý khác nhau như các nhà cung cấp đường truyền nội hạt, liên tỉnh, liên quốc gia, chẳng hạn ở Việt Nam là công ty Viễn thông liên tỉnh \u2013 VTN, công ty viễn thông quốc tế - VTI"],[161,"Các đường truyền đó phải tuân thủ cácquy định của chính phủ các khu vực có đường dây đi qua như: tốc độ, việc mãhóa"],[162,"Với WAN đường đi của thông tin có thể rất phức tạp do việc sử dụng các dịch vụ truyền dữ liệu khác nhau, của các nhà cung cấp dịch vụ khác nhau"],[163,"Trong quá trình hoạt động các điểm nút có thể thay đổi đường đi của các thông tin khi phát hiện ra có trục trặc trên đường truyền hay khi phát hiện có quá nhiều thông tin cần truyềngiữa hai điểm nút nào đó"],[164,"Trên WAN thông tin có thể có các con đường đi khác nhau, điều đó cho phép có thể sử dụng tối đa các năng lực của đường truyền và nâng cao điều kiện an toàn trong truyền dữ liệu.Phần lớn các WAN hiện nay được phát triển cho việc truyền đồng thời trên đườngtruyền nhiều dạng thông tin khác nhau như: video, tiếng nói, dữ liệu...nhằm làm giảm chi phí dịch vụ"],[165,"2.2.2 Các yếu tố trong mang WAN"],[166,"Môi trường : các yếu tố liên quan đến mục tiêu thiết kế như môi trường của WAN,các yêu cầu về năng lực truyền thông của WAN(hiệu năng mạng), khả năng cung cấp động và các ràng buộc về dải thông, thoả mãn các đặc trưng của dữ liệu cầntrao đổi trên WAN, đặc biệt các loại dữ liệu cần đảm bảo chất lượng dịch vụ như dữ liệu đa phương tiện, dữ liệu đòi hỏi đáp ứng thời gian thực như giao dịch về tài chính.Môi trường của WAN ở đây được thể hiện qua các tham số như số lượng các trạmlàm việc, các máy chủ chạy các dịch vụ, và vị trí đặt chúng, các dịch vụ và việcđảm bảo chất lượng các dịch vụ đang chạy trên WAN"],[167,"Việc chọn số lượng và vị trí đặt các máy chủ, các máy trạm trong WAN liên quan nhiều đến vấn đề tối ưu các luồng dữ liệu truyền trên mạng"],[168,"Chẳng hạn khu vực nào có nhiều trạm làm việc, chúng cần thực hiên nhiều giao dịch với một hay nhiều máy chủ nào đó, thìcác máy chủ đó cũng cần phải đặt trong khu vực đó, nhằm giảm thiểu dữ liệutruyền trên WAN.Yêu cầu về hiệu năng cần được quan tâm đặc biệt khi thiết kế các WAN yêu cầu các dịch vụ đòi hỏi thời gian thực như VoIP, hay hội nghị truyền hình, giao dịchtài chính,.."],[169,"Khi đó các giới hạn về tốc độ đường truyền, độ trễ,.."],[170,"cần được xem xét kỹ, nhất là khi dùng công nghệ vệ tinh, vô tuyến,...Các đặc trưng của dữ liệu cũng cần được quan tâm để nhằm giảm thiểu chi phí vềgiải thông khi kết nối WAN"],[171,"Các đặc trưng dữ liệu đề cập ở đây là dữ liệu client/server, thông điệp, quản trị mạng, .."],[172,"giải thông nào đảm bảo chất lượng dịch vụ"],[173,"Các yêu cầu kỹ thuật: năm yêu cầu cần xem xét khi thiết kế WAN đó là tính khảm ở rộng, tính dễ triển khai, tính dễ phát hiện lỗi, tính dễ quản lý, hỗ trợ đa giaothức"],[174,"· Tính khả mở rộng thể hiện ở vấn đề có thể mở rộng, bổ sung thêm dịch vụ, tăng số lượng người dùng, tăng giải thông mà không bị ảnh hưởng gì đến cấu trúc hiện có của WAN, và các dịch vụ đã triển khai trên đó"],[175,"· Tính dễ triển khai thể hiện bằng việc thiết kế phân cấp, mô đun hoá, khốihoá ở mức cao"],[176,"Các khối, các mô đun của WAN độc lập một cách tương đối, quá trình triển khai có thể thực hiện theo từng khối, từng mô đun"],[177,"· Tính dễ phát hiện lỗi là một yêu cầu rất quan trọng, vì luồng thông tin vậnchuyển trên WAN rất nhậy cảm cho các tổ chức dùng WAN"],[178,"Vậy việc phát hiện và cô lập lỗi cần phải thực hiện dễ và nhanh đối với quản trị hệ thống"],[179,"· Tính dễ quản lý đảm bảo cho người quản trị mạng làm chủ được toàn bộhệ thống mạng trong phạm vi địa lý rộng hoặc rất rộng"],[180,"· Hỗ trợ đa giao thức có thể thực hiện được khả năng tích hợp tất các cácdịch vụ thông tin và truyền thông cho một tổ chức trên cùng hạ tầng công nghệ thông tin, nhằm giảm chi phí thiết bị và phí truyền thông, giảm thiểu tài nguyên con người cho việc vận hành hệ thống"],[181,"An ninh-an toàn: việc đảm bảo an ninh, xây dựng chính sách an ninh,và thực hiện an ninh thế nào"],[182,"ngay từ bước thiết kế"],[183,"2.3 Mạng Intranet"],[184,"Intranet là một mạng riêng cho một doanh nghiệp.Về mặt kỹ thuật, Intranet sử dụng công nghệ của Internet - giao thức TCP/IP.Một mạng Intranet điển hình bao gồm những kết nối thông qua một hay nhiều máy tính cổng nối tới mạng Internet.Mục đích chính của mạng này là chia sẻ thông tin và các nguồn lực của công ty"],[185,"Một mạng Intranet đơn giản giúp các thành viên trong doanh nghiệp chia sẻ dữ liệu, sử dụng chung các website, và cộng tác với nhau"],[186,"Là một mạng Internet thu nhỏ trong một công ty,cơ quan, tổ chức hay bộ ngành nào đó và được giới hạn người dùng, sử dụng các công nghệ kiểm soát,truy nhập hay bảo mật thông tin\u2026"],[187,"2.4 Mạng không dây (IEEE802.11)"],[188,"Hình 3: Một số thiết bị của mạng không dây Mạng không dây (Wireless Network) là một khái niệm rất rộng, nó tương đương với mạng có dây nhưng có 1 điều khác qua trọng ở đây là mạng không dây dùng sóng làm phương tiện truyền dẫn sóng chủ yếú"],[189,"Các phương tiện hiện nay như điện thoai,laptop, ipad\u2026.đều có thể liên lạc với nhau bằng phương pháp không dây và theo kiểu Lan"],[190,"3"],[191,"Mô hình tham chiếu TCP/IP"],[192,"Hình 4: Mô hình tham chiếu TCP/IP 3.1 Mô hình OSI 7 tầng Khái niệm: là một cấu trúc phả hệ có 7 tầng , nó xác định các yêu cầu cho sự giao tiếp giữa 2 máy tính tính"],[193,"Mô hình này được định nghĩa bởi Tổ chức tiêu chuẩn hóa quốc tế trong tiêu chuẩn số 7498-1.Mục đích này là cho phép sự tương giao giữa các hệ máy đa dạng được cung cấp bởi các nhà sản xuất khác nhau"],[194,"Mô hình cho phép tất cả các thành phần của mạng hoat đông hòa đồng bất kể thành phần ấy do ai tạo dựng"],[195,"Việc nghiên cứu về mô hình OSI được bắt đầu tại ISO vào năm 1971 với mục tiêu nhằm tới việc nối kết các sản phẩm của các hãng sản xuất khác nhau và phối hợp các hoạt động chuẩn hoá trong các lĩnh vực viễn thông và hệ thống thông tin.Đến năm 1984, mô hình tham chiếu OSI chính thức được đưa ra giới thiệu"],[196,"Hình 5: Mô hình 7 lớp OSI 3.1.1 Tầng ứng dụng (Application layer )"],[197,"· Đây là tầng trên cùng, Là tầng gần với người sử dụng nhất"],[198,"Nó cung cấp phương tiện cho người dùng truy nhập các thông tin và dữ liệu trên mạng thông qua chương trình ứng dụng"],[199,"· Các ứng dụng cung được cấp như các chương trình xử lý kí tự, bảng biểu, thư tín, các giao thức HTTP, FTP, SMTP, POP3, Telnet"],[200,"3.1.2 Tầng trình diễn(Presentation layer)"],[201,"Chuyển đổi các thông tin từ cú pháp người sử dụng sang cú pháp để truyền dữ liệu, ngoài ra nó có thể nén dữ liệu truyền và mã hóa chúng trước khi truyền đễ bảo mật"],[202,"Tầng này sẽ định dạng dữ liệu từ lớp 7 đưa xuống rồi gửi đi đảm bảo sao cho bên thucó thể đọc được dữ liệu của bên phát"],[203,"Các chuẩn định dạng dữ liệu của lớp 6 là GIF, JPEG, PICT, MP3, MPEG \u2026 3.1.3 Tầng phiên(Session layer)"],[204,"Tầng phiên kiểm soát các (phiên) hội thoại giữa các máy tính.Tầng nàythiết lập, quản lý và kết thúc các kết nối giữa trình ứng dụng địa phươngvà trình ứng dụng ở xa.thực hiện thiết lập, duy trì và kết thúc các phiên làm việc giữa hai hệ thống"],[205,"Nó xác lập ánh xạ giữa các tên đặt địa chỉ, tạo ra các tiếp xúc ban đầu giữa các máy tính khác nhau trên cơ sở các giao dịch truyền thông.Các giao thức trong lớp 5 sử dụng là NFS, X- Window System, ASP"],[206,"3.1.4 Tầng vận chuyển (Transport Layer)"],[207,"Tầng vận chuyển xác định địa chỉ trên mạng, cách thức chuyển giao gói tin trên cơ sở trực tiếp giữa hai đầu mút, đảm bảo truyền dữ liệu tin cậy giữa hai đầu cuối (end-to-end)"],[208,"Để bảo đảm được việc truyền ổn định trên mạng tầng vận chuyển thường đánh số các gói tin và đảm bảo chúng chuyển theo thứ tự.Bên cạnh đó lớp 4 có thể thực hiện chức năng đièu khiển luồng và điều khiển lỗi.Các giao thức phổ biến tại đây là TCP, UDP · Phân chia kênh truyền : theo tần sô, theo thời gian"],[209,"· Dồn kênh và phân kênh · Port number phân biệt gói tin của tiến trình nào(16 bit) vi dụ FPT:21"],[210,"telnet :23, SMTP: 25, DNS:53,HTTP:80\u2026"],[211,"3.1.5 Tầng mạng (Network Layer)"],[212,"Tầng mạng có nhiệm vụ : · Xác định các đường đi : xác đinh các router trung gian, các tuyến đường gói tin phải truyền để đến nơi nhận thuật toán này gọi là định tuyến"],[213,"· Chuyển mạch: Router phải gửi gói tin đến đầu ra thích hợp · Thiết lập các đường truyền · Xác định việc chuyển hướng, vạch đường các gói tin trong mạng (chức năng định tuyến), các gói tin này có thể phải đi qua nhiều chặng trước khi đến được đích cuối cùng"],[214,"Lớp này là lớp có liên quan đến các địa chỉ logic trong mạng Các giao thức hay sử dụng ở đây là IP, Nat,DHCP\u2026 3.1.6 Tầng liên kết dữ liệu (Data Link Layer)"],[215,"Tầng liên kết dữ liệu có nhiệm vụ xác định cơ chế truy nhập thông tin trên mạng, các dạng thức chung trong các gói tin, đóng gói và phân phát các gói tin.Lớp 2 có liên quan đến địa chỉ vật lý của các thiết bị mạng, topo mạng, truy nhập mạng, các cơ chế sữa lỗi và điều khiển luồng"],[216,"Nhiệm vụ chính: · Xác định các giao thức trực tiếp với các thành phần vật lý như card mạng, dây cáp"],[217,"· Đưa dữ liệu vào khung và điều khiển luồng thông tin qua liên kết này"],[218,"3.1.7 Tầng vật lý (Physical)"],[219,"Tầng này được biết đến là tầng vật lý trong mô hình.Tầng được định nghĩa là tất cả các đặc tả về điện và vật lý cho các thiết bị.Trong đó bao gồm bố trí của các chân cắm (pin), các hiệu điện thế, và các đặc tả về cáp nối (cable)"],[220,"Các thiết bị tầng vật lí bao gồm Hub, bộ lặp (repeater), thiết bị tiếp hợp mạng (network adapter) và thiết bị tiếp hợp kênh máy chủ (Host Bus Adapter)- (HBA dùng trong mạng lưu trữ (Storage Area Network)\u2026"],[221,"3.1.8 Quá trình đóng gói dữ liệu trong mô hình OSI"],[222,"Trong mô hình tham chiếu OSI dữ liệu trước khi được gửi đi phải tiến hành đóng gói, và khi nhận được dữ liệu quá trình mở gói được diễn ra theo chiều ngược lại"],[223,"Dữ liệu được gửi từ tầng ứng dụng đi xuống các tầng dưới của mô hình OSI, mỗi tầng có những định nghĩa riêng về dạng dữ liệu mà nó sử dụng.Tại nơi gửi, mỗi tầng coi gói tin của tầng trên gởi xuốnglà dữ liệu của nó và thêm vào gói tin các thông tin điều khiển của mình sau đó chuyển tiếp xuống tầng dưới.Tại nơi nhận, quá trình diễn ra ngược lại, mỗi tầng lại tách các thông tin điều khiển của mình ra và chuyển dữ liệu lên tầng trên"],[224,"Hình 6: Quá trình đóng gói dữ liệu qua 7 tầng OSI Với 5 bước chuyển đổi để đóng gói dữ liệu : 1"],[225,"Xây dựng dữ liệu 2"],[226,"Đóng gói dữ liệu tại tầng vận chuyển 3"],[227,"Bổ sung địa chỉ IP vào header tầng mạng"],[228,"4"],[229,"Bổ sung header và trailer tại tầng liên kết dữ liệu"],[230,"5"],[231,"Chuyển thành các bit để truyền tại tầng vật lý"],[232,"3.2 Mô hình TCP/IP"],[233,"Hình 7: Mô hình TCP/IP Khái niệm: Mạng máy tính khổng lồ Internet hiện nay đang sử dụng mô hình TCP/IP để quản lý việc truyền thông"],[234,"TCP/IP được xem là giản lược của mô hình OSI với bốn lớp sau: ứng dụng (tích hợp 3 lớp trên cùng của mô hình OSI), Vận chuyển (tương đương với lớp Vận chuyển của OSI), Internet (tương đương với lớp Mạng nhưng chỉ sử dụng giao thức IP để định địa chỉ logic cho các máy tính) và Truy cập mạng (bao gồm 2 lớp dưới cùng của mô hình OSI)"],[235,"Một số giao thức thường gặp trong mô hình TCP/IP: IP (Internet Protocol), ICMP (Internet Control Message Protocol), IGMP (Internet Group Message Protocol), TCP,UDP,Telnet..."],[236,"3.2.1 So sánh giữa mô hình tham chiếu OSI và mô hình TCP/IP"],[237,"Các điểm giống nhau giữa mô hình OSI và TCP/IP: · Điều phân lớp chức năng"],[238,"· Có lớp ứng dụng gồm một số các dịch vụ"],[239,"· Đều có lớp vận chuyển và lớp mạng"],[240,"· Chuyển mạch gói là hiển nhiên"],[241,"· Đều giống nhau về mối quan hệ trên dưới, ngang hàng"],[242,"Các điểm khác nhau giữa mô hình OSI và TCP/IP: · TCP/IP gộp chức năng lớp trình bày và lớp phiên vào lớp ứng dụng · TCP/IP gộp lớp vật lý và lớp liên kết dữ liệu thành một lớp"],[243,"· TCP/IP đơn giản vì có ít lớp hơn"],[244,"· OSI không có khái niệm chuyển phát thiếu tin cậy ở lớp 4 như trường hợp UDP ở mô hình TCP/IP"],[245,"Internet được phát triển bởi các tiêu chuẩn của giao thức TCP/IP.TCP/IP được tín nhiệm bởi các giao thức cụ thể của nó, ngược lại mô hình OSI không định ra một giao thức cụ thể nào và nó chỉ là một khuôn mẫu hướng dẫn để hiểu và tạo ra một quá trình truyền thông"],[246,"3.2.2 Một số giao thức cơ bản của bộ giao thức TCP/IP"],[247,"3.2.2.1"],[248,"Giao thức gói tin người sử dụng UDP (User Datagram Protocol) · UDP là giao thức không liên kết (Connectionless)"],[249,"UDP sử dụng cho các tiến trình không yêu cầu về độ tin cậy cao, không có cơ chế xác nhận ACK, không đảm bảo chuyển giao các gói dữ liệu đến đích và theo đúng thứ tự và không thực hiện loại bỏ các gói tin trùng lặp"],[250,"Nó cung cấp cơ chế gán và quản lý các số hiệu cổng để định danh duy nhất cho các ứng dụng chạy trên một Client của mạng và thực hiện việc ghép kênh"],[251,"UDP thường sử dụng kết hợp với các giao thức khác, phù hợp cho các ứng dụng yêu cầu xử lý nhanh như các giao thưc SNMP và VoIP"],[252,"· Giao thức SNMP (Simple Network Management Protocol) là giao thức quản lý mạng phổ biến, khả năng tương thích cao"],[253,"SNMP cung cấp thông tin quản trị MIB (Management Information Base) và hỗ trợ quản lý và giám sát Agent"],[254,"· VoIP ứng dụng UDP: Kỹ thuật VoIP (Voice over IP) được thừa kế kỹ thuật giao vận IP"],[255,"3.2.2.2 Giao thức điều khiển truyền TCP (Transmission Control Protocol) TCP là một giao thức hướng liên kết (Connection Oriented), tức là trước khi truyền dữ liệu, thực thể TCP phát và thực thể TCP thu thương lượng để thiết lập một kết nối logic tạm thời, tồn tại trong quá trình truyền số liệu"],[256,"TCP nhận thông tin từ tầng trên, chia dữ liệu thành nhiều gói theo độ dài quy định và chuyển giao các gói tin xuống cho các giao thức tầng mạng (Tầng IP) để định tuyến"],[257,"Bộ xử lý TCP xác nhận từng gói, nếu không có xác nhận gói dữ liệu sẽ được truyền lại.Thực thể TCP bên nhận sẽ khôi phục lại thông tin ban đầu dựa trên thứ tự gói và chuyển dữ liệu lên tầng trên"],[258,"TCP cung cấp khả năng truyền dữ liệu một cách an toàn giữa các thành trong liên mạng"],[259,"Cung cấp các chức năng kiểm tra tính chính xác của dữ liệu khi đến đích và truyền lại dữ liệu khi có lỗi xảy ra"],[260,"TCP cung cấp các chức năng chính sau: · Thiết lập, duy trì, giải phóng liên kết giữa hai thực thể TCP"],[261,"· Phân phát gói tin một cách tin cậy"],[262,"· Tạo số thứ tự (Sequencing) các gói dữ liệu"],[263,"· Điều khiển lỗi"],[264,"· Cung cấp khả năng đa kết nối cho các quá trình khác nhau giữa thực thể nguồn và thực thể đích thông qua việc sử dụng số hiệu cổng"],[265,"· Truyền dữ liệu theo chế độ song công (Full-Duplex)"],[266,"· TCP có những đặc điểm sau: · Hai thực thể liên kết với nhau phải trao đổi, đàm phán với nhau về các thông tin liên kết"],[267,"Hội thoại, đàm phán nhằm ngăn chặn sự tràn lụt và mất dữ liệu khi truyền"],[268,"· Hệ thống nhận phải gửi xác nhận cho hệ thống phát biết rằng nó đã nhận gói dữ liệu"],[269,"· Các Datagram IP có thể đến đích không đúng theo thứ tự , TCP nhận sắp xếp lại"],[270,"· Hệ thống chỉ phát lại gói tin bị lỗi, không loại bỏ toàn bộ dòng dữ liệu"],[271,"3.2.2.3 Điều khiển lưu lượng và điều khiển tắc nghẽn"],[272,"Cơ chế cửa sổ động :là một trong các phương pháp điều khiển thông tin trong mạng máy tính"],[273,"Độ lớn của cửa sổ bằng số lượng các gói dữ liệu được gửi liên tục mà không cần chờ thông báo trả lời về kết quả nhận từng gói dữ liệu đó.Độ lớn cửa sổ quyết định hiệu suất trao đổi dữ liệu trong mạng.Nếu truyền bị lỗi, dữ liệu phải gửi lại lớn thì hiệu quả sử dụng đường truyền thấp"],[274,"Giao thức TCP cho phép thay đổi độ lớn của sổ một cách động, phụ thuộc vào độ lớn bộ đệm thu của thực thể TCP nhận"],[275,"Cơ chế phát lại thích nghi: Để đảm bảo kiểm tra và khắc phục lỗi trong việc trao đổi dữ liệu qua liên mạng, TCP phải có cơ chế đồng hồ kiểm tra phát (Time Out) và cơ chế phát lại (Retransmission) mềm dẻo, phụ thuộc vào thời gian trễ thực của môi trường truyền dẫn cụ thể"],[276,"Cơ chế điều khiển tắc nghẽn: Hiện tương tắc nghẽn dữ liệu thể hiện ở việc gia tăng thời gian trễ của dữ liệu khi chuyển qua mạng"],[277,"Để hạn chế khả năng dẫn đến tắc nghẽn dữ liệu trong mạng, điều khiển lưu lượng dựa trên việc thay đổi độ lớn của sổ phát"],[278,"Thiết lập và huỷ bỏ liên kết: TCP là một giao thức hướng liên kết, tức là cần phải thiết lập một liên kết giữa một cặp thực TCP trước khi truyền dữ liệu"],[279,"Sau khi liên kết được thiết lập, những giá trị cổng (Port) hoạt động như một nhận dạng logic được sử dụng nhận dạng mạch ảo (Virtual Circuit).Trên kênh ảo dữ liệu được truyền song công (Full Duplex)"],[280,"Liên kết TCP được duy trì trong thời gian truyền dữ liệu"],[281,"Kết thúc truyền, liên kết TCP được giải phóng, các tài nguyên như bộ nhớ, các bảng trạng thái..cũng được giải phóng"],[282,"Thiết lập liên kết TCP: Được thực hiện trên cơ sở phương thức bắt tay ba bước (Tree - Way Handsake): Một phần khá quan trọng trong giao thức TCP đó là quá trình bắt tay 3 bước (three way \u2013 handshake), đây chính là quá trình tạo nên thương hiệu \u201ctin tưởng\u201d cho TCP 3.2.3 Bắt tay 3 bước trong TCP"],[283,"Hình 8: Quá trình bắt tay 3 bước trong TCP Trong ví dụ trên ta xét quá trình bắt tay 3 bước giữa một máy Client và Server : · Bước 1 : Client gửi gói tin TCP đến Server yêu cầu thiết lập phiên kết nối"],[284,"Trong gói tin TCP đầu tiên này cờ SYN được \u201cdựng\u201d lên(bit SYN có giá trị =1) và Sequence Number được khởi tạo ngẫu nhiên (trong ví dụ này sq =1000)"],[285,"· Bước 2 : Server đáp trả lại yêu cầu của Client với gói tin TCP có cờ SYN và ACK được \u201cdựng\u201d lên, báo rằng đã nhận được gói tin yêu cầu và đang diễn ra quá trình đồng bộ thỏa thuận với Client"],[286,"Trong gói tin TCP respone này có bit SYN =1, bit ACK =1, Sequence Number khởi tạo ngẫu nhiên(ở đây là 2000), giá trị Acknowledgement number =1001 (có nghĩa là Server đã nhận được gói tin có thứ tự 1000 và mong muốn nhận được gói tin tiếp theo có giá trị Sequence number =1001)"],[287,"· Bước 3 : Client gửi gói tin TCP với cờ ACK được dựng lên và giá trị Sequence number = 1001, và Acknowledgement number=2001 (mong muốn nhận được gói tin tiếp theo từ Server có Sequence number = 2001)."],[288,"3.2.4 Quá trình ngắt phiên TCP (TCP Session Termination)"],[289,"Hinh 9: Quá trình ngắt phiên kết nối Người ta nói TCP là một anh chàng lịch sự, trước khi nói chuyện bắt tay, khi hết chuyện thì \u201cchào tạm biệt\u201d việc chào tạm biệt của TCP diễn ra như sau : · Bước 1 : Client gửi gói tin TCP có cờ FIN được dựng lên ể nói muốn kết thúc liên kết này.Vì liên kết TCP là song công (Full-Duplex) nên mặc dù nhận được yêu cầu kết thúc liên kết của client, sever vẫn có thể tiếp tục truyền cho đến khi sever không còn số liệu để gửi và thông báo cho client bằng yêu cầu kết thúc liên kết với FIN"],[290,"· Bước 2 : Server đáp trả lại TCP có cờ ACK được dựng lên gửi sang cho client.Server gửi tiếp TCP có cờ FIN để thông báo kết thúc"],[291,"· Bước 3: Client gửi gói tin TCP báo đã nhận được lời chấp nhận ngắt phiên kết nối từ Server cờ FIN được dựng"],[292,"3.2.5 Quá trình gửi một gói tin giữa 2 PC Cấu trúc gói tin: Tại mỗi tầng truyền thông gói tin đều có các thông tin bổ sung khác nhau, và cấu trúc gói tin vì thế cũng có sự thay đổi tuy nhiên một gói tin khi xuyên qua các tầng nó đều các trường thông tin cơ bản như sau: Hình 10: Cấu trúc của một gói tin Dữ liệu trải qua 2 tiến trình cơ bản là : · Tiến trình đóng gói tại trạm gửi (Data Encapsulation) · Tiến trình mở gói tại trạm nhận (Data De-encapsulation)"],[293,"Hình 11: Quá trình đóng gói dữ liệu Hình 12: Quá trình tháo gói dữ liệu Đóng gói dữ liệu là quá trình đặt dữ liệu nhận được vào sau header (và trước trailer) trên mỗi lớp.Lớp Physical không đóng gói dữ liệu vì nó không dùng header và trailer.Việc đóng gói dữ liệu không nhất thiết phải xảy ra trong mỗi lần truyền dữ liệu của trình ứng dụng.Các lớp 5, 6, 7 sử dụng header trong quá trình khởi động, nhưng trong phần lớn các lần truyền thì không có header của lớp 5, 6, 7 lý do là không có thông tin mới để trao đổi"],[294,"Các dữ liệu tại máy gửi được xử lý theo trình tự như sau: · Người dùng thông qua lớp Application để đưa các thông tin vào máy tính"],[295,"Các thông tin này có nhiều dạng khác nhau như: hình ảnh, âm thanh, văn bản"],[296,"· Tiếp theo các thông tin đó được chuyển xuống lớp Presentation để chuyển thành dạng chung, rồi mã hoá và nén dữ liệu"],[297,"· Tiếp đó dữ liệu được chuyển xuống lớp Session để bổ sung các thông tin về phiên giao dịch này"],[298,"· Dữ liệu tiếp tục được chuyển xuống lớp Transport, tại lớp này dữ liệu được cắt ra thành nhiều Segment và bổ sung thêm các thông tin về phương thức vận chuyển dữ liệu để đảm bảo độ tin cậy khi truyền"],[299,"· Dữ liệu tiếp tục được chuyển xuống lớp Network, tại lớp này mỗi Segment được cắt ra thành nhiều Packet và bổ sung thêm các thông tin định tuyến"],[300,"· Tiếp đó dữ liệu được chuyển xuống lớp DataLink, tại lớp này mỗi Packet sẽ được cắt ra thành nhiều Frame và bổ sung thêm các thông tin kiểm tra gói tin (để kiểm tra ở nơi nhận)"],[301,"· Cuối cùng, mỗi Frame sẽ được tầng Vật Lý chuyển thành một chuỗi các bit, và được đẩy lên các phương tiện truyền dẫn để truyền đến các thiết bị khác"],[302,"4.Địa chỉ mạng (IP)"],[303,"Định nghĩa: Điạ chỉ IP (International Protocol-giao thức toàn cầu) là một địa chỉ đơn nhất mà những thiết bị điện tử hiện nay đang sử dụng để nhận diện và liên lạc với nhau trên mạng máy tính bằng cách sử dung tiêu chuẩn giao thức toàn Internet"],[304,"Mỗi địa chỉ IP là duy nhất trong cùng một cấp mạng.Một cách đơn giản hơn: IP là một địa chỉ của một máy tính khi tham gia vào mạng nhằm giúp cho các máy tính có thể chuyển thông tin cho nhau một cách chính xác, tránh thất lạc"],[305,"Có thể coi địa chỉ IP trong mạng máy tính giống như địa chỉ nhà của bạn để nhân viên bưu điện có thể đưa thư đúng cho bạn chứ không phải một người nào khác"],[306,"Bất kỳ thiết bị mạng nào\u2014bao gồm bộ định tuyến, bộ chuyển mạch mạng, máy vi tính, máy chủ hạ tầng (như NTP, DNS, DHCP, SNMP, v.v.), máy in, máy fax qua Internet, và vài loại điện thoại\u2014tham gia vào mạng đều có địa chỉ riêng, và địa chỉ này là đơn nhất trong phạm vi của một mạng cụ thể"],[307,"Vài địa chỉ IP có giá trị đơn nhất trong phạm vi Internet toàn cầu, trong khi một số khác chỉ cần phải đơn nhất trong phạm vi một công ty"],[308,"Địa chỉ IP do Tổ chức cấp phát số hiệu Internet (IANA) quản lý và tạo ra"],[309,"IANA nói chung phân chia những \"siêu khối\" đến Cơ quan Internet khu vực, rồi từ đó lại phân chia thành những khối nhỏ hơn đến nhà cung cấp dịch vụ Internet và công ty"],[310,"4.1 Giao thức Internet phiên bản 4 (Ipv4)"],[311,"Định nghĩa:Ipv4 (Internet Protocol version4 ) tiếng việt goi là Giao thức Inter net phiên bản 4, là phiên bản đầu tiên của giao thức IP đã được triển khai rông khắp và là cơ sở của mạng Internet"],[312,"a/ Đặc điểm,cấu trúc của Ipv4 : Địa chỉ Ipv4 có 32 bit và được chia thành 4 Octet mỗi Octet có 8 bit tương đương với 1 byte(Byte, các Octet tách biệt nhau bằng dấu chấm) bao gồm có 3 thành phần chính :"],[313,"· Bit nhận dạng lớp ( Class bit ) · Địa chỉ của mạng ( Net ID ) · Địa chỉ của máy chủ ( Host ID ) b"],[314,"Các lớp địa chỉ IP Địa chỉ IP chia ra 5 lớp A,B,C, D, E"],[315,"Hiện tại đã dùng hết lớp A,B và gần hết lớp C, còn lớp D và E Tổ chức internet đang để dành cho mục đích khác không phân, nên chúng ta chỉ nghiên cứu 3 lớp đầu"],[316,""],[317,"Hinh 13: Cấu trúc lớp địa chỉ IP Qua cấu trúc các lớp địa chỉ IP chúng ta có nhận xét sau: · Bit nhận dạng là những bit đầu tiên - của lớp A là 0, của lớp B là 10, của lớp C là 110"],[318,"· Lớp D có 4 bit đầu tiên để nhận dạng là 1110, còn lớp E có 5 bít đầu tiên để nhận dạng là 11110"],[319,"· Địa chỉ lớp A: Địa chỉ mạng ít và địa chỉ máy chủ trên từng mạng nhiều"],[320,"· Địa chỉ lớp B: Địa chỉ mạng vừa phải và địa chỉ máy chủ trên từng mạng vừa phải"],[321,"· Địa chỉ lớp C: Địa chỉ mạng nhiều, địa chỉ máy chủ trên từng mạng ít"],[322,"Hình 14: Các vùng địa chỉ của các lớp Như vậy nếu chúng ta thấy 1 địa chỉ IP có 4 nhóm số cách nhau bằng dấu chấm, nếu thấy nhóm số thứ nhất nhỏ hơn 126 biết địa chỉ này ở lớp A, nằm trong khoảng 128 đến 191 biết địa chỉ này ở lớp B và từ 192 đến 223 biết địa chỉ này ở lớp C"],[323,"4.2 Giao thức Internet phiên bản 6 (Ipv6)"],[324,"IPv6 (Internet Protocol version 6) là giao thức Internet phiên bản 6, một phiên bản của giao thức liên mạng (IP) nhằm mục đích nâng cấp giao thức liên mạng phiên bản 4 (IPv4) hiện đang truyền dẫn cho hầu hết lưu lượng truy cập Internet nhưng đã hết địa chỉ"],[325,"IPv6 cho phép tăng lên đến 2128 địa chỉ, một sự gia tăng khổng lồ so với 232 (khoảng 4.3 tỷ) địa chỉ của IPv4"],[326,"4.2.1 Nguyên nhân phát triển IPv6 Năm 1973, TCP/IP được giới thiệu và ứng dụng vào mạng ARPANET.Vào thời điểm đó, mạng ARPANET chỉ có khoảng 250 Site kết nối với nhau, với khoảng 750 máy tính.Internet đã và đang phát triển với tốc độ khủng khiếp, đến nay đã có hơn 60 triệu người dùng trên toàn thế giới"],[327,"Theo tính toán của giới chuyên môn, mạng nternet hiện nay đang kết nối hàng trăm ngàn Site với nhau, với khoảng hơn 10 triệu máy tính; trong tương lai không xa, những con số này không chỉ dừng lại ở đó"],[328,"Sự phát triển nhanh chóng này đòi hỏi phải kèm theo sự mở rộng, nâng cấp không ngừng của cơ sở hạ tầng mạng và công nghệ sử dụng"],[329,"Bước sang những năm đầu của thế kỷ XXI, ứng dụng của Internet phát triển nhằm cung cấp dịch vụ cho người dùng notebook, cellualar modem và thậm chí nó còn hâm nhập vào nhiều ứng dụng dân dụng khác như TV, máy pha cà phê\u2026 Để có thể đưa những khái niệm mới dựa trên cơ sở TCP/IP này thành hiện thực, TCP/IP phải mở rộng.Nhưng một thực tế mà không chỉ giới chuyên môn, mà ngay cả các ISP cũng nhận thức được đó là tài nguyên mạng ngày càng hạn hẹp.Việc phát triển về thiết bị, cơ sở hạ tầng, nhân lực\u2026 không phải là một khó khăn lớn"],[330,"Vấn đề ở đây là địa chỉ IP, không gian địa chỉ IP ngày càng cạn kiệt, càng về sau địa chỉ IP (IPv4) không thể đáp ứng nhu cầu mở rộng mạng đó"],[331,"Bước tiến quan trọng mang tính chiến lược đối với kế hoạch mở rộng này là việc nghiên cứu cho ra đời một thế hệ sau của giao thức IP, đó chính là IP version 6"],[332,"IPv6 ra đời không có nghĩa là phủ nhận hoàn toàn IPv4 (công nghệ mà hạ tầng mạng chúng ta đang dùng ngày nay)"],[333,"Vì là một phiên bản hoàn toàn mới của công nghệ IP, việc nghiên cứu, ứng dụng vào thực tiễn luôn là một thách thức rất lớn"],[334,"Một trong những thách thức đó liên quan đến khả năng tương thích giữa IPv6 và IPv4, liên quan đến việc chuyển đổi từ IPv4 lên IPv6, làm thế nào mà người dùng có thể khai thác những thế mạnh của IPv6 nhưng không nhất thiết phải nâng cấp đồng loạt toàn bộ mạng (LAN, WAN, Internet\u2026) lên IPv6"],[335,"4.2.2 Những giới hạn của IPv4"],[336,"IPv4 hỗ trợ trường địa chỉ 32 bit, IPv4 ngày nay hầu như không còn đáp ứng được nhu cầu sử dụng của mạng Internet"],[337,"Hai vấn đề lớn mà IPv4 đang phải đối mặt là việc thiếu hụt các địa chỉ, đặc biệt là các không gian địa chỉ tầm trung (lớp B) và việc phát triển về kích thước rất nguy hiểm của các bảng định tuyến trong Internet"],[338,"Thêm vào đó, nhu cầu tự động cấu hình (Auto-config) ngày càng trở nên cần thiết"],[339,"Địa chỉ IPv4 trong thời kỳ đầu được phân loại dựa vào dung lượng của địa chỉ đó (số lượng địa chỉ IPv4 )"],[340,"Địa chỉ IPv4 được chia thành các lớp"],[341,"3 lớp đầu tiên được sử dụng phổ biến nhất"],[342,"Các lớp địa chỉ này khác nhau ở số lượng các bit dùng để định nghĩa Network ID"],[343,"Ví dụ: Địa chỉ lớp B có 14 bit đầu dành để định nghĩa Network ID và 16 bit cuối cùng dành cho Host ID"],[344,"Trong khi địa chỉ lớp C có 21 bit dành để định nghĩa Network ID và 8 bit còn lại dành cho Host ID\u2026 Do đó, dung lượng của các lớp địa chỉ này khác nhau"],[345,"4.2.3 Đặc điểm của IPv6"],[346,"a"],[347,"Có không gian địa chỉ lớn: - IPv6 có địa chỉ nguồn và đích dài 128 bít thay vì 32 bit như hiện tại"],[348,"Với32-bit, IPv4 chỉ cho phép cung cấp khoảng 4,3 tỷ địa chỉ IP"],[349,"Vì mỗi thiết bịcó kết nối Web như: máy chủ, máy tính để bàn, xách tay, điện thoại thôngminh, Tablet PC và nhiều hơn nữa cần phải có địa chỉ IP"],[350,"Và kể từ khi Web bùng nổ ở các nước như Trung Quốc và Ấn Độ, thế giới đang nhanh chóngtiếp cận đến những địa chỉ có sẵn cuối cùng của IPv4"],[351,"Trong khi đó, với128-bit mà IPv6 mang lại, nó có khả năng cung cấp một số lượng rất lớn địachỉ IP để vượt xa nhu cầu sử dụng Internet hiện nay cũng như các thiết bị kếtnối web"],[352,"Thay vì 4,3 tỷ địa chỉ giới hạn của IPv4, địa chỉ IPv6 có đủ để cungcấp hàng tỷ tỷ địa chỉ IP cho người dùng trên khắp hành tinh này"],[353,"b.Địa chỉ phân cấp,hạ tầng định tuyến hiệu quả: - Các địa chỉ toàn cục của Ipv6 được thiết kế để tạo ra một hạ tầng địnhtuyến hiệu qủa, phân cấp và có thể tổng quát hoá dựa trên sự phân cấp thường thấy của các nhà cung cấp dịch vụ Internet (ISP) trên thực tếc"],[354,"c"],[355,"Khuôn header được đơn giản hóa: - Header của IPv6 được thiết kế để giảm chi phí đến mức tối thiểu"],[356,"Điều nàyđạt được bằng cách chuyển các trường không quan trọng và các trường lựachọn sang các header mở rộng được đặt phía sau của IPv6 header"],[357,"Khuôndạng header mới của IPv6 tạo ra sự xử lý hiệu quả hơn tại các router"],[358,"d.Tự cấu hình địa chỉ: - Để đơn giản cho việc cấu hình các trạm, IPv6 hỗ trợ cả việc tự cấu hình địachỉ stateful như khả năng cấu hình server DHCP và tự cấu hình địa chỉstateless (không có server DHCP)"],[359,"Với tự cấu hình địa chỉ dạng stateless,các trạm trong liên kết tự động cấu hình chúng với địa chỉ IPv6 của liên kết(địa chỉ cục bộ liên kết) và với địa chỉ rút ra từ tiền tổ được quảng bá bởirouter cục bộ"],[360,"Thậm trí nếu không có router, các trạm trên cùng một liên kếtcó thể tự cấu hình chúng với các địa chỉ cục bộ liên kết và giao tiếp với nhaumà không phải thiết lập cấu hình thủ công"],[361,"e.Khả năng xác thực và bảo mật an ninh: - Tích hợp sẵn trong thiết kế IPv6 giúp triển khai dễ dàng đảm bảo sựtương tác lẫn nhau giữa các nút mạngf.Hỗ trợ tốt về chất lượng dịch vụ QoS- Lưu thông trên mạng được phân thành các luồng cho phép sử lý mức ưutiên khác nhau tại các router"],[362,"g.Hỗ trợ tốt tính năng di động: - Khả năng di động MobileIP tận dụng được các ưu điểm của IPv6 so vớiIPv4"],[363,"h.Khả năng mở rộng: - Thiết kế của IPv6 có dự phòng cho sự phát triển trong tương lai đồng thờidễ dàng mở rộng khi có nhu cầu 4.2.4 Cấu trúc địa chỉ IPv6:"],[364,"Hình 15: Mô hình Ipv6 a.Địa chỉIPv6: - Một địa chỉ gồm có 16 bytes, đó là 128 bít độ dài"],[365,"Kiểu ký hiệu dấu2 chấm trong hệ đếm 16 ( Hexadecimal Colon Notation): - Để làm cho những địa chỉ trở nên có thể đọc được nhiều hơn, IPv6 trình bầy rõ trong kiểu ký hiệu dấu 2 chấm trong hệ đếm 16.Trong kiểu kýhiệu này, 128 bít được chia thàng 8 phần, mỗi phần rộng 2 byte.2 byte trong kiểu ký hiệu hệ đếm 16 yêu cầu 4 chữ số trong hệ đếm 16 này"],[366,"Vì thế cho nên địa chỉ gồm có 32chữ số trong hệ đếm 16 với mỗi 4 chữ số một lại có một dấu : chấm.128 bít= 16 bytes= 32chữ số trong hệ đếm 16 Địa chỉ IP phiên bản 6 ( IPv6 Address) - Sự rút gọn: + Mặc dù là địa chỉ IP ngay cả khi ở trong định dạnh hệ số đếm 16, vẫn rấtdài, nhiều chữ số 0 trong một địa chỉ"],[367,"Thí dụ:1080:0000:0000:0000:0008:0800:200C:417A Do đó cơ chế nén địa chỉ được dùng để biểu diễn dễ dàng hơn các loại địachỉ dạng này"],[368,"Ta không cần viết các số 0 ở đầu các nhóm, nhưng những số 0 bên trong thì không thể xoá"],[369,"Chưa rút gọn 1080:0000:0000:0000:0008:0800:200C:417A Đã rút gọn:1080: 0: 0: 0: 8: 800:200C:417A Rút gon nữa: 1080::8:800:200C:417A 111111101111101100\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026..111111111111 b.Không gian địa chỉ: - Không gian địa chỉ có độ dài lớn hơn IPv4( 128 bít so với 32 bít) do đócung cấp không gian địa chỉ lớn hơn rất nhiều"],[370,"Trong khi không gian địa chỉ32 bít của IPv4 cho phép khoảng 4 tỉ địa chỉ, không gian địa chỉ IPv6 có thể có khoảng 6.5*10^23 địa chỉ trên mỗi mét vuông bề mặt trái đất"],[371,"Nó tạo ra nhiều mức phân cấp và linh hoạt trong địa chỉ hoá và định tuyến hiện không có trong IPv4.-Không gian địa chỉ có nhiều mục đích khác nhau"],[372,"5"],[373,"Kết luận chương"],[374,"Chương 1 trình bày tổng quan về mạng máy tính"],[375,"Qua đó cung cấp cái nhìn tổng quan và phục vụ cho qua trình tìm hiểu tiếp theo"],[376,"Chương II : MẠNG LAN ẢO 1.Giới thiệu về Vlan"],[377,"Trước hết ta nhắc lại mạng Lan"],[378,"Mạng Lan là một mạng cục bộ (viết tắt là Local Area Network ) được định nghĩa là tất cả các máy tính trong một miền quảng bá (broadcast domain)"],[379,"Trong đó các router là các bộ định tuyến chặn các bản tin quảng bá còn switch là bộ chuyển mạch chỉ chuyển tiếp chúng"],[380,"Mô hình mạng không có Vlan là một mạng phẳng (flat network) vì nó hoạt động chuyển mạch ở lớp 2"],[381,"Một mạng phẳng là một miền quảng bá (broadcast), mỗi gói quản bá từ một host nào đó đều đến được các host còn lại trong mạng"],[382,"Mỗi cổng trong switch là một miền đụng độ (collision), vì vậy người ta sử dụng switch để chia nhỏ miền collision, nhưng nó không ngăn được miền quảng bá"],[383,"Nên xảy ra nhiều vấn đề : · Vấn đề giới hạn bảo mật: mỗi người dùng nào cũng có thể thấy các người dùng khác trong cùng một mạng lan do đó rất khó bảo mật thông tin"],[384,"· Gây lãng phí lưu lượng và tài nguyên xử lý dữ liệu vì đây là 1 broadcast domain nên khi một máy gửi 1 bản đi thì tất cả các máy trong cùng một mạng lan đều nhận được bản tin"],[385,"· Khó quản lý được các hot trong mạng Lan nếu có nhiều thành phần khác nhau"],[386,"Để giải quyết vấn đề đó người ta đưa ra khái niệm VLAN.VLAN là viết tắt của Virtual Local Area Network hay còn gọi là mạng LAN ảo"],[387,"Một VLAN được định nghĩa là một nhóm logic các thiết bị mạng và được thiết lập dựa trên các yếu tố như chức năng, bộ phận, ứng dụng\u2026 của công ty"],[388,"Mỗi Vlan là một mạng con logic được tạo trên các swith, còn gọi là các đoạn hay miền quảng bá (broadcast)"],[389,"Về mặt kỹ thuật, VLAN là một miền quảng bá được tạo bởi các switch"],[390,"Bình thường thì router đóng vai tạo ra miền quảng bá nhưng ở đây sẽ là các con switch"],[391,"2"],[392,"Khái niệm về Vlan"],[393,"2.1 Giới thiệu về VLAN"],[394,"VLAN là một nhóm các thiết bị mạng không giới hạn theo vị trí vật lý hoặc LAN switch mà chúng kết nối vào"],[395,"VLAN là một segment mạng theo logic dựa trên chức năng, đội nhóm, hoặc ứng dụng của theo một tổ chức chứ không phụ thuộc vào vị trí vật lý hay kết nối vật lý trong mạng"],[396,"Tất cả các trạm và server được sử dụng bởi cùng một nhóm làm việc sẽ được đặt trong cùng VLAN bất kể vị trí hay kết nối vật lý của chúng"],[397,"Mọi công việc cấu hình VLAN hoặc thay đổi cấu hình VLAN điều được thực hiện trên phần mềm mà không cần thay đổi cáp và thiết bị vật lý"],[398,"Một máy trạm trong một VLAN chỉ được liên lạc với file server trong cùng VLAN với nó"],[399,"VLAN được nhóm theo chức năng logic và mỗi VLAN là một miền quảng bá, do đó gói dữ liệu chỉ được chuyển mạch trong cùng một VLAN"],[400,"VLAN có khả năng mở rộng, bảo mật và quản lý mạng tốt hơn.Router trong cấu trúc VLAN thực hiện ngăn chặn quảng bá, bảo mật và quản lý nguồn giao thông mạng"],[401,"Switch không thể chuyển mạch giao thông giữa các VLAN khác nhau"],[402,"Giao thông giữa các VLAN phải được định tuyến qua router"],[403,"Hình 16: Mô hình mạng Vlan giữa các tầng 2.2 Miền quảng bá với VLAN và router"],[404,"Một VLAN là một niềm quảng bá được tạo nên một hay nhiều switch"],[405,"Hình 17 cho thấy tạo 3 miền quảng bá riêng biệt trên 3 swicth như thế nào"],[406,"Định tuyến Lớp 3 cho phép router chuyển gói giữa các miền quảng bá với nhau ( Phòng nhân sự Phòng giao dịch Phòng kế toán Fa 0/0 Fa 0/ 2 Fa 0/ 1 Hình 1 7 : Ba miền quảng bá trên 3 switch khác nhau )"],[407,"Trong hình 18 chúng ta thấy 3 VLAN tức 3 miền quảng bá khác nhau được tạo ra trên một switch và trên một router"],[408,"Router sử dụng định tuyến lớp 3 để chuyển giao thông giữa 3 VLAN"],[409,"( Phòng giao dich Phòng kế toán Phòng nhân sự Hình 1 8 : Ba VLAN và 3 miền quảng bá trên một switch )"],[410,"Switch sẽ xử lý gói dữ liệu khi chia Vlan như sau : · Đối với mỗi VLAN switch có một bảng chuyển mạch riêng tương ứng"],[411,"· Nếu switch nhận được gói dữ liệu từ một port nằm trong VLAN 1 chẳng hạn , thì switch sẽ tìm địa chỉ MAC đích trong bảng chuyển mạch của VLAN mà thôi"],[412,"· Đồng thời switch sẽ học địa chỉ MAC nguồn trong gói dữ liệu và ghi vào bảng chuyển mạch của VLAN 1 nếu địa chỉ này chưa được biết"],[413,"· Sau đó switch quyến định chuyển gói dữ liệu"],[414,"· Switch nhận frame vào từ VLAN nào thì switch chỉ học địa chỉ nguồn của frame và tìm địa chỉ đích cho frame trong một bảng chuyển mạch tương ứng với VLAN đó"],[415,"2.3 Hoạt động của VLAN Mỗi cổng trên switch có thể gán cho một VLAN khác nhau"],[416,"Các cổng nằm trong cùng một VLAN sẽ chia sẻ gói quảng bá với nhau.Các cổng không nằm trong cùng VLAN sẽ không chia sẻ gói quảng bá với nhau.Nhờ đó mạng LAN hoạt động hiệu quả hơn"],[417,"Mỗi Vlan sẽ được gán cho 1 hoặc nhiều cổng (inter face) khác nhau, thành viên cố định được xác định bởi số cổng gán cho một Vlan"],[418,"Khi thiết bị kết nối vào một cổng của switch, tùy vào cổng kết nối mà nó thuộc loai Vlan nào thì thiết bị nằm trong VLAN đó"],[419,"Mặc định, tất cả các port trên một switch đều nằm trong VLAN quản lý.VLAN quản lý luôn là VLAN 1 và chúng ta không thể xóa VLAN này được"],[420,"Sau đó ta cấu hình lần lượt gán các cổng vào các Vlan khác cho đến khi hết.Cách gán cổng này là Port \u2013 based VLAN (thông dụng hiện nay)"],[421,"Tức là xác định số thành viên VLAN theo cổng tức là cổng đã được gán vào VLAN nào thì thiết bị kết nối vào cổng đó thuộc VLAN đó, không phục thuộc không phục vào thiết bị kết nối là thiết bị gì, địa chỉ bao nhiêu"],[422,"Với cách chia VLAN theo cổng như vậy, tất cả các người dùng kết nối vào cùng một cổng sẽ nằm trong cùng một VLAN"],[423,"Một người dùng hay nhiều người dùng có thể kết nối vào một cổng và sẽ không nhận thấy là có sự tồn tại của VLAN"],[424,"Cách chia VLAN này giúp việc quản lý đơn giản hơn vì không cần tìm trong cơ sở dữ liệu phức tạp để xác định thành viên trong mỗi VLAN"],[425,"· Cấu hình VLAN bằng các phần mềm VLAN quản lý tập trung · Có thể chia VLAN theo địa chỉ MAC, logic hoặc theo loại giao thức"],[426,"· Không cần quản lý nhiều ở các tủ nối dây nữa vì thiết bị kết nối vào mạng thuộc VLAN nào là tùy theo địa chỉ của thiết bị đó được gán vào VLAN đó"],[427,"· Có khả năng thông báo cho quản trị mạng khi có một người dùng đầu cuối lạ, không có trong cơ sở dữ liệu kết nối vào mạng Người quản trị có trách nhiệm cấu hình VLAN bằng tay và cố định"],[428,"Mỗi một cổng trên switch cũng giống như một cổng trên bridge"],[429,"Bridge sẽ chặn luồng lưu lượng nếu nó không cần thiết phải đi ra ngoài segment"],[430,"Nếu gói dữ liệu cần chuyển qua bridge và switch không biết địa chỉ đích hoặc gói nhận được là gói quảng bá thì mới chuyển ra tất cả các cổng nằm trong cùng miền quảng bá với cổng nhận gói dữ liệu vào"],[431,"Cách cấu hình Vlan: Ví dụ Tên Vlan (Phòng) Vlan Nhân sự 10 Giao dịch 20 Kế toán 30"],[432,"Switch>enable Switch#configureterminal Switch(config)#vlan 10 //Khai báo Vlan 10 Switch(config-vlan)#name nhansu // Khai báo tên Vlan 10 Switch(config-vlan)#exit // Thoát khỏi Vlan 10 Switch(config)#vlan 20 //Khai báo Vlan 20 Switch(config-vlan)#name giaodich // Khai báo tên vlan 20 Switch(config-vlan)#exit //Thoát khỏi vlan 20 Switch(config)#vlan 30 Switch(config-vlan)#name ketoan Switch(config-vlan)#exit Đây là đoạn câu lệnh khi cấu hình khai báo Vlan cho switch"],[433,"( Lớp vật lý \u2013 port switch Chức năng làm routing kết nối VLAN với internet VLAN phòng nhân sự VLAN phòng giao dịch VLAN phòng kế toán Lớp mạng Lớp liên kết dữ liệu miền quảng bá 192.168.1.0 192.168.2.0 192.168.3.0 Cổng gắn máy tính Tầng 1 Tầng 2 Tầng 3 Hình 19 : Mô hình chia VLAN theo cổng )"],[434,"2.4 Phân loại các loại Vlan"],[435,"· Port \u2013 based VLAN: là cách cấu hình VLAN đơn giản và phổ biến"],[436,"Mỗi cổng của Switch được gắn với một VLAN xác định (mặc định là VLAN 1), do vậy bất cứ thiết bị host nào gắn vào cổng đó đều thuộc một VLAN nào đó"],[437,"· MAC address based VLAN: Cách cấu hình này ít được sử dụng do có nhiều bất tiện trong việc quản lý"],[438,"Mỗi địa chỉ MAC được đánh dấu với một VLAN xác định"],[439,"· Protocol \u2013 based VLAN: Cách cấu hình này gần giống như MAC Address based, nhưng sử dụng một địa chỉ logic hay địa chỉ IP thay thế cho địa chỉ MAC"],[440,"Cách cấu hình không còn thông dụng nhờ sử dụng giao thức DHCP"],[441,"2.5 Ưu điểm (lợi ích) của Vlan Tiết kiệm băng thông của mạng: Do VLAN có thể chia nhỏ LAN thành các đoạn (là một vùng quảng bá)"],[442,"Khi một gói tin quảng bá, nó sẽ được truyền chỉ trong một VLAN duy nhất, không truyền ở các VLAN khác nên giảm được lưu lượng quảng bá, tiết kiệm được băng thông đường truyền"],[443,"Tăng khả năng bảo mật: Các VLAN khác nhau không truy cập được vào nhau (trừ khi có khai báo định tuyến)"],[444,"Dễ dàng thêm hay bớt các máy tính vào VLAN: Trên một switch nhiều cổng, có thể cấu hình VLAN khác nhau cho từng cổng, do đó dễ dàng kết nối thêm các máy tính với các VLAN"],[445,"Mạng có tính linh động cao:VLAN có thể dễ dàng di chuyển các thiết bị"],[446,"Giả sử trong ví dụ trên, sau một thời gian sử dụng công ty quyết định để mỗi bộ phận ở một tầng riêng biệt"],[447,"Với VLAN, ta chỉ cần cấu hình lại các cổng switch rồi đặt chúng vào các VLAN theo yêu cầu"],[448,"VLAN có thể được cấu hình tĩnh hay động.Trong cấu hình tĩnh, người quản trị mạng phải cấu hình cho từng cổng của mỗi switch.Sau đó, gán cho nó vào một VLAN nào đó"],[449,"Trong cấu hình động mỗi cổng của switch có thể tự cấu hình VLAN cho mình dựa vào địa chỉ MAC của thiết bị được kết nối vào"],[450,"3 .VLAN Trunking Protocol \u2013 Giao thức mạch nối VLAN \u2013 VTP"],[451,"3.1 Khái niệm, hoạt động của mạch nối (trunk)"],[452,"Hình 20: Đường trunk trong Vlan Định nghĩa:Thuật ngữ Trunking bắt nguồn từ công nghệ Radio và công nghệ điện thoại"],[453,"Trong công nghệ radio, một đường Trunk là một đường dây truyền thông mà trên đó truyền tải nhiều kênh tín hiệu radio.Trong công nghiệp điện thoại, khái niệm thuật ngữ Trunking là kết hợp giữa đường truyền thông điện thoại hoặc các kênh điện thoại giữa hai điểm.Một trong các điểm có thể là một tổng đài.Ngày nay, nguyên lý trunking được chấp nhận sử dụng trong công nghệ mạng chuyển mạch"],[454,"Một đường Trunk là kết nối vật lý và logic giữa 2 switch hoặc giữa switch và router"],[455,"Trong khuôn khổ môi trường chuyển mạch VLAN, một đường Trunk là một kết nối point-to-point để hỗ trợ các VLAN trên các switch liên kết với nhau"],[456,"Một đường được cấu hình Trunk sẽ gộp nhiều liên kết ảo trên một liên kết vật lý để chuyển tín hiệu từ các VLAN trên các switch với nhau dựa trên một đường cáp vật lý"],[457,"3.1.1 Hoạt động của Trunking"],[458,"Giao thức Trunking được phát triển để nâng cao hiệu quả quản lý việc lưu chuyển các Frame từ các VLAN khác nhau trên một đường truyền vật lý.Giao thức trunking thiết lập các thoả thuận cho việc sắp sếp các Frame vào các cổng được liên kết với nhau ởhai dầu đường trunk"],[459,"Hiện tại có 2 kỹ thuật Trunking là Frame Filtering và Frame Tagging.Giao thức Trunking sử dụng kỹ thuật Frame Tagging để phân biệt các Frame và để dễ dàng quản lý và phân phát các Frame nhanh hơn"],[460,"Các tag được thêm vào trên đường gói tin đi ra vào đường trunk và được bỏ đi khi ra khỏi đường trunk"],[461,"Các gói tin có gắntag không phải là gói tin Broadcast"],[462,"Một đường vật lý duy nhất kết nối giữa hai switch thì có thể truyền tải cho mọi VLAN"],[463,"Để lưu trữ, mỗi Frame được gắn tag để nhận dạng trước khi gửi đi, Frame của VLAN nào thì đi về VLAN đó"],[464,"Cấu hình Trunking trong vlan : Switch_A(config)# interface fastethernet 0/1 // Khai báo vào cổng Switch_A(config-if)# switchport mode trunk // Khai báo port trunk Switch_A(config-if)# switchport trunk encapsulation dot1q //chuẩn encap 3.2 Giao thức mạch nối VLAN \u2013 VTP"],[465,"3.2.1 Nguồn gốc VTP"],[466,"VTP được thiết lập để giải quyết các vấn đề nằm bên trong hoạt động của môi trường mạng chuyển mạch VLAN"],[467,"Ví dụ: Một domain mà có các kết nối switch hỗ trợ bởi các VLAN"],[468,"Để thiết lập và duy trì kết nối bên trong VLAN, mỗi VLAN phải được cấu hình trên cổng của switch"],[469,"Khi phát triển mạng và các switch được thêm vào mạng, mỗi switch mới phải được cấu hình với các thông tin của VLAN trước đó"],[470,"Một kết nối đơn không đúng VLAN ẩn chứa 2 vấn đề: · Các kết nối chồng chéo lên nhau do cấu hình VLAN không đúng"],[471,"· Các cấu hình không đúng giữa các môi trường truyền khác nhau như là: Ethernet và FDDI"],[472,"Với VTP, cấu hình VLAN được duy trì dễ dàng bằng Admin domain"],[473,"Thêm nữa, VTP làm giảm phức tạp của việc quản lý VLAN"],[474,"Vai trò của VTP là duy trì cấu hình VLAN thông qua Admin Domain của mạng.VTP là một giao thức lớp 2 sử dụng các Trunk Frame để quản lý việc thêm bớt, xoá và đổi tên các VLAN trên một domain"],[475,"VTP cho phép tập trung các thay đổi tới tất cả các switch trong mạng"],[476,"Thông điệp VTP được dóng gói trong một chuẩn CISCO là giao thức ISL hoặc IEEE 802.1q và sau đó đi qua các liên kết Trunk tới thiết bị khác"],[477,"3.2.2 Lợi ích của VTP"],[478,"Lợi ích của VTP: · Giúp cấu hình đúng các VLAN qua mạng"],[479,"· Hệ thống ánh xạ cho phép 1 VLAN được trunk qua các môi trường truyền hỗn hợp"],[480,"Giống như ánh xạ các VLAN Ethernet tới đường cáp trục tốc độ cao như ATM, LANE hoặc FDDI"],[481,"· Theo dõi chính xác và kiểm tra VLAN"],[482,"· Báo cáo động về việc thêm vào các VLAN"],[483,"· Dễ dàng cấu hình khi thêm mới VLAN"],[484,"Trước khi thiết lập các VLAN trên switch, ta phải setup một Management Domain để kiểm tra các VLAN trong mạng"],[485,"Các switch trong cùng một Management Domain chia sẻ thông tin VLAN với các VLAN khác và một switch có thể tham gia vào chỉ một VTP management domain"],[486,"Các switch ở domain khác không chia sẻ thông tin VTP"],[487,"Các switch sử dụng giao thức VTP thì trên mỗi cổng trunk của nó có: · Management domain · Số cấu hình · Biết được VLAN và các thông số cụ thể"],[488,"3.2.3"],[489,"VTP Domain"],[490,"Một VTP domain được tạo ra từ một hay nhiều các thiết bị đa kết nối để chia sẻ trên cùng một tên VTP domain"],[491,"Mỗi switch chỉ có thể có một VTP domain"],[492,"Khi một thông điệp VTP truyền tới các switch trong mạng, thì tên domain phải chính xác để thông tin truyền qua"],[493,"3.2.4"],[494,"Các chế độ VTP Domain"],[495,"Hoạt động chuyển mạch VTP hoạt động trên một trong ba chế độ sau: Server: · Nếu một switch được cấu hình ở chế độ server, thì switch đó có thể khởi tạo, thay đổi và xoá các VLAN"],[496,"· VTP server ghi thông tin cấu hình VLAN trong NVRAM"],[497,"VTP server gửi các thông điệp VTP qua tất cả các cổng Trunk"],[498,"· Các VTP server quảng bá cấu hình VLAN tới các switch trên cùng một VTP domain và đồng bộ cấu hình VLAN tới các switch khác dựa trên các quảng cáo nhận được qua đường Trunk"],[499,"Đây là chế độ mặc định trên switch"],[500,"Client: · Một switch được cấu hình ở chế độ VTP Client không thể khởi tạo, sửa chữa hoặc xoá thông tin VLAN"],[501,"Client không thể lưu thông tin VLAN"],[502,"· Chế độ này có ích cho các switch không đủ bộ nhớ để lưu trữ bảng thông tin VLAN lớn"],[503,"VTP Client xử lý các thay đổi VLAN giống như server, nó cũng gửi các thông điệp qua các cổng Trunk"],[504,"Transparent: · Các switch cấu hình ở chế độ Transparent không tham gia vào VTP"],[505,"Một VTP Transparent switch không quản bá cấu hình VLAN của nó và không đồng bộ các cấu hình VLAN của nó dựa trên các quảng cáo nhận được"],[506,"Chúng chuyển tiếp các quảng cáo VTP nhận được trên các cổng Trunk nhưng bỏ qua các thông tin bên trong thông điệp"],[507,"· Một Transparent switch không thay đổi database của nó, khi các switch nhận các thông tin cập nhật cũng gửi một bản cập nhật chỉ ra sự thay đổi trạng thái VLAN"],[508,"Trừ khi chuyển tiếp một quảng cáo VTP, VTP bị vô hiệu hoá trên switch được cấu hình ở chế độ Transparent Cấu hình VTP : Switch(config)#vtp version 2 Switch(config)#vtp domain // Đặt tên cho VTP Switch(config)#vtp password // Đăt password Switch(config)#vtp mode {server/client} // Đặt chế độ cho VTP 3.3"],[509,"STP \u2013 SPANNING TREE PROTOCOL"],[510,"3.3.1"],[511,"Giới thiệu về STP"],[512,"Khi thiết kế một hệ thống mạng cho một tổ chức lớn, một trong những vấn đề mà các nhà thiết kế mạng phải quan tâm là phải đảm bảo rằng hệ thống mạng sẽ luôn ở trong trạng thái vận hành tốt.Để làm được điều này, thông thường các nhà thiết kế thường thiết kế thêm các đường kết nối dự phòng giữa các switch"],[513,"Như vậy, mục đích thì đã rõ nhưng việc thiết kế dư thừa các đường kết nối lại gây ra một vấn đề khác đó là sẽ có các gói tin chạy vòng quanh các switch và làm cho mạng luôn ở trong tình trạng quá tải"],[514,"Để giải quyết vấn đề này, STP đã ra đời để ngăn chặn các gói tin bị loop trên mạng"],[515,"STP giúp cho người thiết kế mạng có thể thiết kế tùy ý các đường kết nối thừa nhưng vẫn đảm bảo là không có hiện tượng các gói tin bị loop trên mạng"],[516,"STP \u2013 Spanning Tree Protocol Trong phạm vi bài này mình chỉ trình bày sơ lược về: Các khái niệm cơ bản về STP, quá trình bầu chọn Root Bridge ( Switch Root) , Root Port, Designated Port, Non- Root Port ( Block Port)"],[517,"3.3.2 Các khái niệm cơ bản về STP"],[518,"STP là một giao thức lớp 2 sử dụng một giải thuật đặc biệt để tìm ra các vòng lặptrong mạng và tác động của một mạng không bị loop"],[519,"STP sẽ tạo ra một cấu trúc cây bao gồm các lá và các nhánh trải rộng trên toàn bộ mạng Layer 2.Các kết nối giữa các Switch sẽ được mặc định là kết nối Trunk"],[520,"Việc tính toán Spanning Tree dựa trên hai khái niệm khi tạo ra vòng lặp logic trong cấu trúc mạng đó là Bridge ID và Cost ( chi phí đường đi) a"],[521,"Bridge ID (BID): BID là một trường có 8 byte, gồm 2 trường con được miêu tả như sau :"],[522,"Hình 21: Một trường BID Trong đó: \u2022 Địa chỉ MAC: có 6 byte được gán cho Switch, sử dụng dưới dạng Hexa"],[523,"\u2022 Bridge Priority: là độ ưu tiên có chiều dài là 2 byte tạo thành 2^16 giá trị từ 0 đến65.535"],[524,"Độ ưu tiên Bridge có giá trị mặc định là : 32.768 b"],[525,"Cost \u2013 Chi phí đường đi: · Là chi phí đi tới Root Bridge có giá trị thấp nhất"],[526,"· Chi phí được tính bằng tổng cost trên các đoạn đường đi tới đích"],[527,"Băng thông càng lớn thì chi phí đường đi càng nhỏ"],[528,"Bảng danh sách chi phí trên các đoạn đường:"],[529,"Hình 22: Bảng chi phí của các đường đi"],[530,"3.3.3 Quá trình bầu chọn Root Bridge"],[531,"Thuật toán Spanning Tree sẽ sử dụng trình tự theo các bước sau: Bước 1: Sau khi Switch được khởi động, nó gửi gói tin BPDU gồm switch Bridge ID và Root ID 2 giây/lần"],[532,"Nội dung bản tin BPDU ( Root BID Sender BID Root path cost Port ID Cho biết Bridge gốc Cho biết BPDU đến từ port nào Cho biết BID của bridge gửi BPDU Cho biết chi phí đường đi của Bridge gốc ) Hình 23: Bản tin BPDU Bước 2: Trong pha khởi tạo ban đầu mỗi thì Router đều coi nó là Root Bridge"],[533,"Bước 3: Nếu Switch nhận được Root ID trong bản tin BPDU của hàng xóm mà nhỏ hơn Root ID của nó thì nó sẽ coi Switch hàng xóm là Root Bridge ( Ai có Root ID nhỏ hơn thì sẽ được bầu làm Root Bridge)"],[534,"Bước 4: Switch sau đó sẽ forward bản tin BPDU với Root ID nhỏ hơn này tới các Switch kế cận nó"],[535,"Bước 5: Switch với Root ID nhỏ nhất được coi là Root Bridge trong topo Spanning-Tree"],[536,"Bước 6: Trong trường hợp 2 Switch có Root ID bằng nhau, chúng sẽ tiến hàng quá trình bầu chọn thông qua địa chỉ MAC address"],[537,"Switch nào có địa chỉ MAC address nhỏ hơn thì được coi là Root Bridge"],[538,"Cấu hình STP: Switch(config)#spanning-tree vlan {vlan id}root primary Switch(config)#spanning-tree port fast default Switch(config)#spanning-tree mode {pvst\u2026} 3.4"],[539,"Giao thức EtherChannel"],[540,"3.4.1 Giao thức EtherChannel là gì"],[541,"Tại sao lại cần nó"],[542,"Switch có thể sử dụng các cổng Ethernet, Fast-Ethernet(FE), GigaEthernet(GE), 10 GigaEthernet(10GE) để tăng tốc độ các link"],[543,"Mỗi lần link bị quá tải ta có thể nâng cấp các đường lên 10 lần, nhưng như vậy sẽ rất tốn kém trong việc mua module gắn vào và dây dẫn, bên cạnh đó, không phải switch nào cũng có module để bạn gắn cũng như tốn chi phí về mua dây dẫn"],[544,"Một phương pháp khác phù hợp hơn trong trường hợp này để tăng băng thông các link đó là kếp hợp (\u201cbó\u201d) các link lại"],[545,"Công nghệ này được gọi là EtherChannel"],[546,"Hình 24: Công nghệ EtherChannel Công nghệ EtherChannel có gộp tối đa 8 đường linh vật lý FE, GE, 10GE thành 1 link logical.Khi đó, switch đối xử các port thuộc EtherChannel như 1 port duy nhất"],[547,"Switch hoặc thiết bị ở 2 đầu EtherChannel phải hiểu và sử dụng công nghệ EtherChannel để đảm bảo hoạt động đúng và chống loop"],[548,"Nếu chỉ có 1 đầu sử dụng EtherChannel, còn đầu bên kia không sử dụng thì có thể gây ra loop"],[549,"Traffic không phải lúc nào cũng được phân bố đồng đều qua các đường link thuộc EtherChannel, mà nó phụ thuộc vào phương pháp load balancing mà switch sử dụng và mẫu traffic trong mạng"],[550,"Nếu một trong các link thuộc EtherChannel bị down thì traffic sẽ tự động được chuyển sang link khác trong channel chỉ trong vòng vài miliseconds .Khi link up trở lại thì traffic được phân bố lại như cũ.Vì trong khoảng thời gian rất ngắn nên tỉ lệ gần như là không rớt gói tin"],[551,"EtherChannel có thể kết hợp các physical ports chỉ khi: · Cùng tốc độ (speed) · Cùng loại đường truyền"],[552,"· Nếu port Layer 2 thì cùng mode access+access cùng VLAN hoặc trunk+cùng native VLAN+cùng cho phép các VLAN giống nhau qua đường trunk"],[553,"Hoặc cùng là port Layer 3"],[554,"3.4.2 Giao thức trong EtherChannel"],[555,"Có 2 giao thức : · PAGP: Các gói tin Pagp được trao đổi giữa các switch trên các cổng EtherChannel"],[556,"Các thông số của switch láng giềng được xác định (như khả năng của cổng) và sẽ được so sánh với switch cục bộ"],[557,"Các cổng có cùng neighbor ID và khả năng hình thành nhóm sẽ được nhóm lại với nhau thành các kết nối FEC"],[558,"PagP hình thành nên EtherChannel chỉ trên những cổng được cấu hình cùng static VLAN hoặc là cùng loại trunking"],[559,"Pagp cũng thay đổi các thông số động của EtherChannel nếu một trong những cổng của bundle bị thay đổi"],[560,"· LACP : cũng gửi các gói trên các cổng EtherChannel của switch"],[561,"Tuy nhiên LACP cũng gán vai trò cổng đến các đầu cuối của EtherChannel"],[562,"Các switch có độ ưu tiên thấp nhất sẽ được phép ra quuyết định về các cổng nào sẽ được tham gia vào EtherChannel ở một thời điểm"],[563,"Các cổng được chọn lựa và trở thành active theo giá trị độ ưu tiên priority của nó, trong đó giá trị ưu tiên thấp sẽ có mức ưu tiên cao"],[564,"Nếu PAgP (của cisco) hoặc LACP được cấu hình ở mode on thì switch sẽ tự đưa các ports vào EtherChannel mà không thương lượng với neighbor, nghĩa là không có bất kỳ gói tin PAgP hoặc LACP nào được trao đổi"],[565,"Điều này có thể dẫn đến trường hợp ở một đầu thì các ports được đưa vào EtherChannel, trong khi đầu bên kia thì không (nghĩa là một bên thì xem đó là một logical link, trong khi phía bên kia thì vẫn xem là nhiều physical links), và có thể gây ra loop"],[566,"Vì vậy, đối với EtherChannel ta không nên cấu hình mode on, mà nên sử dụng giao thức để thương lượng"],[567,"Khi các ports được cấu hình là thành viên của EtherChannel thì switch sẽ tự động tạo ra một logical port-channel interface"],[568,"Interface này đại diện cho toàn bộ channel"],[569,"Khi cấu hình EtherChannel thì ta không cần thiết phải chỉ định giao thức thương lượng là PAgP hay LACP, mà chỉ cần cấu hình các mode tương ứng với giao thức đó là switch tự động biết sử dụng giao thức nào"],[570,"Cấu hình : Switch(config-if)#channel-protocol { lacp,pagp} Switch(config-if)#channel-group number mode {on | passive | active} 3.5"],[571,"Ethernet và chuẩn IEEE 802"],[572,"3.5.1"],[573,"Giới thiệu chung về Ethernet"],[574,"Ethernet là công nghệ của mạng LAN cho phép truyền tín hiệu giữa các máy tính với tốc độ 10Mb/s đến 10 Gigabit/s"],[575,"Trong các kiểu Ethernet thì kiểu sử dụng cáp xoắn đôi là hay thông dụng nhất.Hiện nay có khoảng 85% mạng LAN sử dụng công nghệ Ethernet"],[576,"Năm 1980, Xerox, tập đoàn Intel và tập đoàn Digital Equipment đưa ra tiêu chuẩn Ethernet 10 Mbps (Tiêu chuẩn DIX)"],[577,"IEEE (Institute of Electrical and Electronics Engineers, Inc- Viện công nghệ điện và điện tử) đưa ra tiêu chuẩn về Ethernet đầu tiên vào năm 1985 với tên gọi \"IEEE 802.3 Carrier Sense Multiple Access with Collision Detection (CSMA/CD) Access Method and Physical Layer Specifications\" .Gần đây, với các phương tiện truyền dẫn và công nghệ mới, công nghệ Ethernet đã ngày càng phát triển và đạt được tốc độ trao đổi số liệu đến 10 Gigabit trên giây"],[578,""],[579,"Hình 25: Mối quan hệ của các chuẩn 802 với mô hình tham chiếu OSI Thành phần mạng Ethernet bao gồm: · Data terminal Equipment (DTE): Các thiết bị truyền và nhận dữ liệu DTEs thường là PC,Workstation, File Server, Print Server .."],[580,"· Data Communication Equipment (DCE): Là các thiết bị kết nối mạng cho phép nhận và chuyển khung trên mạng"],[581,"DCE có thể là các thiết bị độc lập như Repeter, Switch, Router hoặc các khối giao tiếp thông tin như Card mạng, Modem ."],[582,"· Interconnecting Media: Cáp xoắn đôi, cáp đồng (mỏng/dày), cáp quang"],[583,"· Những đặc điểm cơ bản của Ethernet: · Cấu hình truyền thống: Bus đường thẳng/ Star · Cấu hình khác Star bus · Kỹ thuật truyền: Base band · Phương pháp truy nhập: CSMA/CD"],[584,"· Quy cách kỹ thuật: IEEE 802.3"],[585,"· Vận tốc truyền 10Mbps, 100Mbps ,10Gbps · Loại cáp: Cáp đồng trục mảnh, cáp đồng trục dày, cáp xoắn đôi, cáp quang .."],[586,"3.5.2"],[587,"Chức năng các tầng trong IEEE 802"],[588,"Chuẩn IEEE 802 bao gồm chức năng tầng vật lý (Physical) và liên kết dữ liệu (Data Link) trong mô hình OSI"],[589,"Điều này có nghĩa là Uỷ ban 802 của IEEE nhấn mạnh tới việc tiêu chuẩn hoá các công nghệ phần cứng sử dụng tại tầng vật lý và tầng liên kết dữ liệu"],[590,"Chuẩn IEEE chia tầng liên kết dữ liệu thành hai tầng con, tầng điều khiển truy nhập MAC (Media Access Control) và điều khiển liên kết logic LLC (Logical Link Control)"],[591,"Tầng LLC (Logical Link Control ):Tất cả mạng LAN theo chuẩn IEEE có cùng lớp LLC được định nghĩa bởi 802.2"],[592,"Dùng chung tầng con LLC, cơ chế các tầng trên như nhau bất kể loại phần cứng nào được sử dụng"],[593,"Giao diện giữa tầng kề trên với LLC được định nghĩa bởi các điểm LSAP (Link Service Access Points )"],[594,"LSAP là các địa chỉ liên kết logic.Địa chỉ Ethernet có nhiều địa chỉ LSAP, những địa chỉ này cho phép liên kết giữa các thực thể trên mạng.Địa chỉ MAC là duy nhất"],[595,"Nếu thiết bị là DTE, nó quy định giao diện giữa giữa tầng MAC và tầng mạng.LLC quản lý liên kết dữ liệu và định nghĩa các điểm truy nhập dịch vụ (Service Access Point - SAP)"],[596,"LLC Sublayer được tiêu chuẩn hoá trong IEEE 802.2 Nếu thiết bị DCE là Bridge"],[597,"Brige cung cấp giao diện LAN-to-LAN sử dụng chung Protocol (Ethenet to Ethenet) hoặc giữa các LAN sử dụng khác Protocol (như Ethernet to Token Ring)"],[598,"Bridge được tiêu chuẩn hoá trong IEEE 802.1 LLC Header: DSAP (1) SSAP (1) Cont (1) Data (43 \u2026)"],[599,"· DSAP (Destination Service Access Point): Con trỏ thông báo cho NIC vị trí bộ  đệm để lưu trữ thông tin nhận"],[600,"· SSAP (Source Service Access Point) Vị trí bộ đệm lưu trữ thông tin đi"],[601,"· DSAP and SSAP cho phép nhiều giao thức cùng sử dụng chung NIC Card"],[602,"· Cont (Control)"],[603,"Kiểu của LLC"],[604,"· Data: Dữ liệu được đưa xuống từ lớp Network, có chiều dài tối đa là 1497 bytes Tầng con LLC cung cấp các dịch vụ sau: · Type 1: Dịch vụ Datagram không liên kết và không có cơ chế báo nhận biết (Unacknowledgement)"],[605,"Cung cấp kết nối Point to Point, Multipoint và Broadcast"],[606,"· Type 2: Dịch vụ mạch ảo, kiểu liên kết (Connection -Oriented )"],[607,"Cung cấp các dịch vụ tuần tự, kiểm soát luồng, không lỗi giữa các LSAP"],[608,"· Type 3: Dịch vụ Datagram kiểu không liên kết và có cơ chế báo nhận biết (Acknowledgement)"],[609,"Tầng Ethernet Mac Sublayer: Liên quan đến các phương pháp truy nhập và kiểm soát truy nhập đến đường truyền chung"],[610,"Token RING và Ethernet thực hiện trong tầng MAC bằng các phương pháp khác nhau cùng chia sẻ đường truyền"],[611,"· Tạo Frame: Thêm các trường PRE, SFD, DE, SA, Length/Type, PAD, FCS và dữ liệu từ LLC đưa xuống tạo thành khung dữ liệu cung cấp cho tầng Vật lý"],[612,"· Nhận khung dữ liệu từ tầng Vật lý, kiểm tra lỗi và gữi dữ liệu cho tầng LLC"],[613,"· Điều khiển truy nhập phương tiện truyền dẫn"],[614,"Tầng Vật lý: Xác định tốc độ truyền, phương pháp mã hoá và phương tiện truyền dẫn vàcách thức kết nối vật lý"],[615,"Tầng vật lý của IEEE 802.3 được phân chia là 2 phần: · Phần độc lập với đường truyền đặc tả giao diện giữa tầng MAC và tầng vật lý"],[616,"· Phần phụ thuộc đường truyền và đặc tả giao diện với đường truyền của LAN và các tín hiệu trao đổi với đường truyền"],[617,"Có nhiều tuỳ chọn khác nhau về kiểu đường truyền, phương thức truyền tín hiệu và tốc độ truyền, cách thức mã hoá"],[618,""],[619,"3.5.3 Cấu trúc khung Ethernet"],[620,"( Vùng tính FCS Vùng phát hiện loiix FCS ) Hình 26: Cấu trúc khung Ethernet · Preamble (PRE) (7bytes): Đánh dấu điểm đầu khung, đồng bộ"],[621,"· Start of frame delimiter (SFD) (1byte): 10101011 · Destination/Source address (DA/SA) (6 bytes): Địa chỉ đích, địa chỉ nguồn"],[622,"· Type (2 bytes): Chiều dài dữ liệu nếu nhỏ hơn 1500"],[623,"· Data: Dữ liệu gửi từ LLC đưa xuống, gồm n byte (n<1501)"],[624,"· FCS (4 bytes) kiểm tra lỗi của các trường DA, SA, Length /Type và Data và PAD"],[625,"3.5.4 Họ IEEE 802"],[626,"IEEE 802.1: kiến trúc mạng, cung cấp giao diện LAN-to-LAN sử dụng chung Protocol LAN"],[627,"IEEE 802.2: đặc tả chuẩn giao diện (Interface) giữa MAC và tầng mạng LLC quản lý liên kết dữ liệu và định nghĩa các điểm truy nhập dịch vụ (Service Access Point \u2013 SAP)"],[628,"EEE 802.3 đặc tả một mạng cục bộ dựa trên mạng Ethernet do Digital, Intel và Xerox hợp tác pháp triển từ năm 1980"],[629,"IEEE 802.3 tương tự như DIX Ethernet, bao gồm cả tầng vật lý và tầng con MAC với các đặc tả sau: · Đặc tả dịch vụ MAC (MAC ServicesSecification) · Giao thức MAC (MAC Protocol)"],[630,"· Đặc tả vật lý (Medium-Independent Physical Specification) độc lập với đường truyền"],[631,"· Đặc tả vật lý phụ thuộc đường truyền (Medium - Dependent Physical Specification)"],[632,"· Đặc tả dịch vụ MAC định nghĩa các dịch vụ IEEE 802.3 cung cấp cho tầng LLC hoặc người sử dụng ở tầng cao hơn"],[633,"IEEE 802.4: Mô tả một mạng cục bộ với cấu trúc dạng hình BUS và cơ chế điều khiển truy nhập đường truyền thẻ bài Token BUS"],[634,"Nó được thiết kế để ứng dụng trong các văn phòng và trong các môi trường công nghiệp và quân sự"],[635,"IEEE 802.5: Là chuẩn đặc tả mạng cục bộ với mạng dạng vòng (RING) sử dụng thẻbài Token RING để điểu khiển truy nhập đường truyền"],[636,"IEEE 802.5 bao gồm cả tầng vật lý vàtầng con MAC"],[637,"IEEE 802.6: Mô tả một mạng tốc độ cao kết nối nhiều LAN thuộc các khu vực khác nhau của một đô thị (còn được gọi là MAN - Metropolitan Area Network)"],[638,"Các mạng IEEE 802.6 cho phép truyền dữ liệu với tốc độ cao từ vài chục đến hàng trăm Mb/s"],[639,"Đáp ứng các yêu cầu truyền dữ liệu đa phương diện"],[640,"IEEE 802.9: Đặc tả một mạng tích hợp dữ liệu và tiếng nói bao gồm 1 kênh dị bộ 10 Mb/s cùng với 96 kênh 64 Kb/s (tổng cộng 6Mb/s)"],[641,"Giải thông tổng cộng là 16 Mb/s"],[642,"Chuẩn này còn được gọi là Isochronous Ethernet (IsoEnet) và nó được thiết kế cho các môi trường có lượng lưu thông lớn và cấp bách"],[643,"IEEE 802.10: Chuẩn đặc tả về an toàn và mã hoá thông tin trong các mạng cục bộ"],[644,"IEEE802.11: lchuẩn đặc tả mạng cục bộ không dây (Wireless LAN), hiện đang tiếp tục phát triển với phương pháp truy nhập CSMA/CD"],[645,"IEEE 802.12 là chuẩn đặc tả mạng cục bộ bởi AT&T, IBM và HP, gọi là 100 VG - AnyLAN hay 100BASE-VG.Mạng sử dụng dạng hình sao xếp tầng (Cascaded Star Topology) và phương pháp truy nhập đường truyền có điều khiển tranh chấp.Khi có nhu cầu truyền dữ liệu, một trạm sẽ gửi yêu cầu đến HUB và trạm chỉ có thể truyền dữ liệu khi HUB cho phép.Chuẩn cung cấp một mạng tốc độ trên 100 Mb/s, có thể hoạt động trong các môi trường hỗn hợp Ethernet và Token Ring.Vì thế nó chấp nhận cả hai dạng Frame"],[646,"IEEE 802.14: Chuẩn cuối cùng hiện nay là 802.14"],[647,"Chuẩn này dùng cho truyền dữ liệu qua đường cáp TV, nhằm nâng cao tốc độ truy nhập Internet tại gia đình"],[648,"3.5.5"],[649,"Ethernet 100 Mbps"],[650,"Mạng Ethernet 100 Mbps được gồm 2 chuẩn : * Fast Ethernet (IEEE 802.3u): 100Base-TX, 100Base-T4 và 100Base-FX"],[651,"Các loại cáp sử dụng · 100BASE-T4 sử dụng bốn đôi dây cân bằng cáp UTP Cat-3 hoặc Cat-5"],[652,"· 100BASE-TX sử dụng hai đôi UTP Cat-5 hoặc đôi dây STP"],[653,"· 100BASE-FX sử dụng đôi dây cáp quang đa mode"],[654,"Mã hóa: · 100Base-TX và 100Base-FX sử dụng kỹ thuật mã hóa 4B/5B"],[655,"· 100Base-T4 sử dụng kỹ thuật mã hóa 8B/6T"],[656,"Phương thức điều khiển truy nhập CSMA/CD · 100Base-T4 sử dụng phương thức hoạt động bán song công"],[657,"· 100Base-TX sử dụng phương thức hoạt động song công"],[658,"· 100Base-FX sử dụng cả phương thức hoạt động song công và bán song công"],[659,"· 100VG-AnyLAN là công nghệ cạnh tranh với Fast Ethernet, ít được sử dụng"],[660,"4"],[661,"Mô phỏng mạng Vlan"],[662,"4.1 Giới thiệu phần mêm Packet tracer"],[663,"Hình 27 : Giao diện của phần mềm packet tracer Packet Tracer là một phần mềm giả lập mạng dùng trong học tập sử dụng các thiết bị mạng (router/switch) của Cisco"],[664,"Nó được hãng Cisco cung cấp miễn phí cho các trường lớp, sinh viên đang giảng dạy/ theo học chương trình mạng của Cisco"],[665,"Sản phẩm cung cấp một công cụ để nghiên cứu các nguyên tắc cơ bản của mạng và các kỹ năng làm việc với hệ thống Cisco"],[666,"Phiên bản hiện nay của Packet Tracer hỗ trợ giả lập một loạt các phương thức tầng ứng dụng và các phương thức định tuyến cơ bản như RIP, OSPF, và EIGRP trong yêu cầu của chương trình CCNA.Trong khi phần mềm nhắm đến cung cấp một môi trường giả lập mạng, nó chỉ sử dụng một ít chức năng được cung cấp trên Cisco IOS"],[667,"4.2 Mô phỏng một mạng Vlan trên phần mềm packet tracer"],[668,"Xây dựng 3 mang Vlan khác nhau : Cafe 1, Cafe 2, Văn phòng"],[669,"Trong mỗi mạng Lan được kết nối giữa các thiết bị với nhau bằng các Switch, có hệ thống wifi\u2026 Ba mang Vlan được kết nối với nhau bởi các Router và được nối ra ngoài mangInternet"],[670,"Hình 28: Mô hình mạng Vlan Hình 29: Quá trình ping thông giữa 2 máy tính của 2 mang vlan"],[671,"Hình 30: Quá trình gửi gói tin từ 2 máy tính trong 2 vlan khác nhau 5 .Kết luận chương"],[672,"Chương 2 cho t a cách nhìn về mạng Vlan hiện nay, các ưu điểm về bảo mật, quản lý, tránh gây lãng phí tài nguyên Vlan"],[673,"Đề cập đến các các tiêu chuẩn của công nghệ ethernet trong mang Lan"],[674,""],[675,"Chương III: MẠNG RIÊNG ẢO VPN 1"],[676,"Tìm hiểu mạng riêng ảo VPN"],[677,"Giải pháp VPN (Virtual Private Network) được thiết kế cho những tổ chức có xu hướng tăng cường thông tin từ xa vì địa bàn hoạt động rộng (trên toàn quốc hay toàn cầu)"],[678,"Tài nguyên ở trung tâm có thể kết nối đến từ nhiều nguồn nên tiết kiệm được được chi phí và thời gian"],[679,""],[680,"Hinh 31: Mô hình mạng VPN đơn giản"],[681,"1.1 Khái niệm"],[682,"Về cơ bản, VPN là một mạng riêng sử dụng hệ thống mạng công cộng (thường là Internet) để kết nối các địa điểm hoặc người sử dụng từ xa với một mạng LAN ở trụ sở trung tâm.Thay vì dùng kết nối thật khá phức tạp như đường dây thuê bao số, VPN tạo ra các liên kết ảo được truyền qua Internet giữa mạng riêng của một tổ chức với địa điểm hoặc người sử dụng ở xa"],[683,"1.2 Các loại VPN"],[684,"Có hai loại phổ biến hiện nay là VPN truy cập từ xa (Remote-Access ) và VPN điểm-nối-điểm (site-to-site) VPN truy cập từ xa: còn được gọi là mạng Dial-up riêng ảo (VPDN), là một kết nối người dùng-đến-LAN, thường là nhu cầu của một tổ chức có nhiều nhân viên cần liên hệ với mạng riêng của mình từ rất nhiều địa điểm ở xa"],[685,"Ví dụ như công ty muốn thiết lập một VPN lớn phải cần đến một nhà cung cấp dịch vụ doanh nghiệp (ESP).ESP này tạo ra một máy chủ truy cập mạng (NAS) và cung cấp cho những người sử dụng từ xa một phần mềm máy khách cho máy tính của họ.Sau đó, người sử dụng có thể gọi một số miễn phí để liên hệ với NAS và dùng phần mềm VPN máy khách để truy cập vào mạng riêng của công ty"],[686,"Loại VPN này cho phép các kết nối an toàn, có mật mã"],[687,"Hình minh họa 15 cho thấy kết nối giữa Văn phòng chính và \"Văn phòng\" tại gia hoặc nhân viên di động là loại VPN truy cập từ xa)"],[688,"VPN điểm-nối-điểm : là việc sử dụng mật mã dành cho nhiều người để kết nối nhiều điểm cố định với nhau thông qua một mạng công cộng như Internet"],[689,"Loại này có thể dựa trên Intranet hoặc Extranet"],[690,"Loại dựa trên Intranet: Nếu một công ty có vài địa điểm từ xa muốn tham gia vào một mạng riêng duy nhất, họ có thể tạo ra một VPN intranet (VPN nội bộ) để nối LAN với LAN"],[691,"Loại dựa trên Extranet: Khi một công ty có mối quan hệ mật thiết với một công ty khác (ví dụ như đối tác cung cấp, khách hàng...), họ có thể xây dựng một VPN extranet (VPN mở rộng) kết nối LAN với LAN để nhiều tổ chức khác nhau có thể làm việc trên một môi trường chung"],[692,"Trong hình 15 minh họa trên, kết nối giữa Văn phòng chính và Văn phòng từ xa là loại VPN Intranet, kết nối giữa Văn phòng chính với Đối tác kinh doanh là VPN Extranet"],[693,"1.3 Bảo mật trong VPN"],[694,"Tường lửa (firewall) là rào chắn vững chắc giữa mạng riêng và Internet"],[695,"Bạn có thể thiết lập các tường lửa để hạn chế số lượng cổng mở, loại gói tin và giao thức được chuyển qua"],[696,"Một số sản phẩm dùng cho VPN như router 1700 của Cisco có thể nâng cấp để gộp những tính năng của tường lửa bằng cách chạy hệ điều hành Internet Cisco IOS thích hợp"],[697,"Tốt nhất là hãy cài tường lửa thật tốt trước khi thiết lập VPN"],[698,"Mật mã truy cập là khi một máy tính mã hóa dữ liệu và gửi nó tới một máy tính khác thì chỉ có máy đó mới giải mã được"],[699,"Có hai loại là mật mã riêng và mật mã chung"],[700,"Mật mã riêng (Symmetric-Key Encryption): Mỗi máy tính đều có một mã bí mật để mã hóa gói tin trước khi gửi tới máy tính khác trong mạng"],[701,"Mã riêng yêu cầu bạn phải biết mình đang liên hệ với những máy tính nào để có thể cài mã lên đó, để máy tính của người nhận có thể giải mã được"],[702,"Mật mã chung (Public-Key Encryption) kết hợp mã riêng và một mã công cộng"],[703,"Mã riêng này chỉ có máy của bạn nhận biết, còn mã chung thì do máy của bạn cấp cho bất kỳ máy nào muốn liên hệ (một cách an toàn) với nó"],[704,"Để giải mã một message, máy tính phải dùng mã chung được máy tính nguồn cung cấp, đồng thời cần đến mã riêng của nó nữa"],[705,"Có một ứng dụng loại này được dùng rất phổ biến là Pretty Good Privacy (PGP), cho phép bạn mã hóa hầu như bất cứ thứ gì"],[706,"Giao thức bảo mật giao thức Internet (IPSec) cung cấp những tính năng an ninh cao cấp như các thuật toán mã hóa tốt hơn, quá trình thẩm định quyền đăng nhập toàn diện hơn"],[707,"IPSec có hai cơ chế mã hóa là Tunnel và Transport.Tunnel mã hóa tiêu đề (header) và kích thước của mỗi gói tin còn Transport chỉ mã hóa kích thước.Chỉ những hệ thống nào hỗ trợ IPSec mới có thể tận dụng được giao thức này"],[708,"Ngoài ra, tất cả các thiết bị phải sử dụng một mã khóa chung và các tường lửa trên mỗi hệ thống phải có các thiết lập bảo mật giống nhau"],[709,"IPSec có thể mã hóa dữ liệu giữa nhiều thiết bị khác nhau như router với router, firewall với router, PC với router, PC với máy chủ"],[710,"Máy chủ AAA: AAA là viết tắt của ba chữ Authentication (thẩm định quyền truy cập), Authorization (cho phép) và Accounting (kiểm soát)"],[711,"Các server này được dùng để đảm bảo truy cập an toàn hơn"],[712,"Khi yêu cầu thiết lập một kết nối được gửi tới từ máy khách, nó sẽ phải qua máy chủ AAA để kiểm tra"],[713,"Các thông tin về những hoạt động của người sử dụng là hết sức cần thiết để theo dõi vì mục đích an toàn"],[714,"Sản phẩm công nghệ dành cho VPN: Tùy vào loại VPN (truy cập từ xa hay điểm-nối-điểm), bạn sẽ cần phải cài đặt những bộ phận hợp thành nào đó để thiết lập mạng riêng ảo"],[715,"Đó có thể là: · Phần mềm cho desktop của máy khách dành cho người sử dụng từ xa"],[716,"· Phần cứng cao cấp như bộ xử lý trung tâm VPN hoặc firewall bảo mật PIX"],[717,"Server VPN cao cấp dành cho dịch vụ Dial-up"],[718,"· NAS (máy chủ truy cập mạng) do nhà cung cấp sử dụng để phục vụ người sử dụng từ xa"],[719,"· Mạng VPN và trung tâm quản lý"],[720,"Bộ xử lý trung tâm VPN Có nhiều loại máy xử lý VPN của các hãng khác nhau, nhưng sản phẩm của Cisco tỏ ra vượt trội ở một số tính năng.Tích hợp các kỹ thuật mã hóa và thẩm định quyền truy cập cao cấp nhất hiện nay, máy xử lý VPN được thiết kế chuyên biệt cho loại mạng này.Chúng chứa các module xử lý mã hóa SEP, cho phép người sử dụng dễ dàng tăng dung lượng và số lượng gói tin truyền tải.Dòng sản phẩm có các model thích hợp cho các mô hình doanh nghiệp từ nhỏ đến lớn (từ100 cho đến 10.000 điểm kết nối từ xa truy cập cùng lúc).  Hình 32: Bộ xử lý trung tâm VPN số hiệu 3000 của hãng Cisco"],[721,""],[722,"Router dùng cho VPN Thiết bị này cung cấp các tính năng truyền dẫn, bảo mật"],[723,"Dựa trên hệ điều hành Internet IOS của mình, hãng Cisco phát triển loại router thích hợp cho mọi trường hợp, từ truy cập nhà-tới-văn phòng cho đến nhu cầu của các doanh nghiệp quy mô lớn"],[724,"Tường lửa PIX của Cisco Firewall trao đổi Internet riêng (Private Internet Exchange) bao gồm một cơ chế dịch địa chỉ mạng rất mạnh, máy chủ proxy, bộ lọc gói tin, các tính năng VPN và chặn truy cập bất hợp pháp.Thay vì dùng IOS, thiết bị này có hệ điều hành với khả năng tổ chức cao, xoay sở được với nhiều giao thức, hoạt động rất mạnh bằng cách tập trung vào IP"],[725,"2"],[726,"VPN getway"],[727,"2.1 Đường hầm (Tunneling)"],[728,"Hình 33: Mô hình đường hầm Đường hầm là khái niệm để chỉ một kênh logic trên đó các gói tin được đóng trong một khung với địa chỉ nguồn và địa chỉ đich mới (hoặc sử dung giao thức mới).Như vậy, phần địa chỉ của gói tin ban đầu sẽ được ẩn trong gói tin mới"],[729,"Đây là biện pháp tăng cường an ninh và chất lượng dịch vụ"],[730,"Hầu hết các VPN đều dựa vào kỹ thuật gọi là Tunneling để tạo ra một mạng riêng trên nền Internet"],[731,"Về bản chất, đây là quá trình đặt toàn bộ gói tin vào trong một lớp header (tiêu đề) chứa thông tin định tuyến có thể truyền qua hệ thống mạng trung gian theo những \"đường ống\" riêng (tunnel)"],[732,"Khi gói tin được truyền đến đích, chúng được tách lớp header và chuyển đến các máy trạm cuối cùng cần nhận dữ liệu"],[733,"Để thiết lập kết nối Tunnel, máy khách và máy chủ phải sử dụng chung một giao thức (tunnel protocol).  Giao thức của gói tin bọc ngoài được cả mạng và hai điểm đầu cuối nhận biết.Hai điểm đầu cuối này được gọi là giao diện Tunnel (tunnel interface), nơi gói tin đi vào và đi ra trong mạng"],[734,"2.2 Các giao thức trong đường hầm"],[735,"Kỹ thuật Tunneling yêu cầu 3 giao thức khác nhau: · Giao thức truyền tải (Carrier Protocol) là giao thức được sử dụng bởi mạng có thông tin đang đi qua"],[736,"· Giao thức mã hóa dữ liệu (Encapsulating Protocol) là giao thức (như GRE, IPSec, L2F, PPTP, L2TP) được bọc quanh gói dữ liệu gốc"],[737,"· Giao thức gói tin (Passenger Protocol) là giao thức của dữ liệu gốc được truyền đi (như IPX, NetBeui, IP)"],[738,"Người dùng có thể đặt một gói tin sử dụng giao thức không được hỗ trợ trên Internet (như NetBeui) bên trong một gói IP và gửi nó an toàn qua Internet"],[739,"Hoặc, họ có thể đặt một gói tin dùng địa chỉ IP riêng (không định tuyến) bên trong một gói khác dùng địa chỉ IP chung (định tuyến) để mở rộng một mạng riêng trên Internet"],[740,"2.3 Kỹ thuật Tunneling trong mạng VPN điểm-nối điểm "],[741,"Trong VPN loại này, giao thức mã hóa định tuyến GRE (Generic Routing Encapsulation) cung cấp cơ cấu \"đóng gói\" giao thức gói tin (Passenger Protocol) để truyền đi trên giao thức truyền tải (Carier Protocol).Nó bao gồm thông tin về loại gói tin mà bạn đnag mã hóa và thông tin về kết nối giữa máy chủ với máy khách.Nhưng IPSec trong cơ chế Tunnel, thay vì dùng GRE, đôi khi lại đóng vai trò là giao thức mã hóa.IPSec hoạt động tốt trên cả hai loại mạng VPN truy cập từ xa và điểm- nối-điểm.Tất nhiên, nó phải được hỗ trợ ở cả hai giao diện Tunnel"],[742,"Hình 34: Mô hình điểm nối điểm Trong mô hình này, gói tin được chuyển từ một máy tính ở văn phòng chính qua máy chủ truy cập, tới router (tại đây giao thức mã hóa GRE diễn ra), qua Tunnel để tới máy tính của văn phòng từ xa"],[743,""],[744,"2.4Kỹ thuật Tunneling trong mạng VPN truy cập từ xa"],[745,"Với loại VPN này, Tunneling thường dùng giao thức điểm-nối-điểm PPP (Point-to-Point Protocol)"],[746,"Là một phần của TCP/IP, PPP đóng vai trò"]],"downloaded":true,"m":[-1,-1],"n":"Nghiên cứu về các công nghệ sử dụng trong mạng riêng ảo.txt","o":"LỜI CẢM ƠN"}],"t":"\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 1\t\n\t\n\n\t \t \t                                     HHỌỌC VIC VIỆỆN PHN PHẦẦN CN CỨỨNGNG    \n                            VÀ MVÀ MẠẠNG MÁY TÍNH FPT JETKINGNG MÁY TÍNH FPT JETKING  \n  \n  \n\n  \n\nĐĐỒỒ  ÁN HÁN HỌỌC KÌ IIC KÌ II  \nTHITHIẾẾT KT KẾẾ  GIGIẢẢI PHÁP HI PHÁP HỆỆ  THTHỐỐNG MNG MẠẠNGNG  \n\n    \n\n  Chuyên ngành:Chuyên ngành:      QUQUẢẢN TRN TRỊỊ  MMẠẠNGNG  \n\n  LLớớp:p:          J1J1--HDHD--15071507--S1S1  \n\n  Sinh viên thSinh viên thựực hic hiệện:n:    TrTrầần Văn Vương        n Văn Vương          (HA(HA--15161516--0061)0061)  \n\n  GiGiảảng viên hưng viên hướớng dng dẫẫn:n:    Th.s Lư HuTh.s Lư Huệệ  ThuThu  \n\n  \n\n  \n\n  \n\n  \n\n  \n\nTP.HTP.Hồồ  Chí Minh, 2016.Chí Minh, 2016.  \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 1\t\n\t\n\nMỤC\tLỤC\t\n\n\t\n\t\n\nTrang\t\n\nLỜI\tMỞ\tĐẦU\t..............................................................................................................................................2\t\n\nPHẦN\t1:\tKHẢO\tSÁT\tNHU\tCẦU\tCHO\tMỤC\tTIÊU\tTHIẾT\tKẾ\t.............................................................3\t\t\n\nPHẦN\t2:\tSƠ\tĐỒ\tTHIẾT\tKẾ\tHẠ\tTẦNG\tMẠNG\t......................................................................................5\t\n\nPHẦN\t3:\tLỰA\tCHỌN\tTHIẾT\tBỊ\tVÀ\tDỰ\tTOÁN\tCHI\tPHÍ\t....................................................................6\t\t\n\nPHẦN\t4:\tTHỰC\tNGHIỆM\tTRIỂN\tKHAI\tLAB\tMÔ\tPHỎNG\tTRÊN\t\t\n\nPHẦN\tMỀM\tPACKET\tTRACER\t................................................................................................................7\t\t\n\n4.1.\tThông\tsố\tcấu\thình\tcác\tthiết\tbị\trouter\tvà\tswitch\t...................................................................8\t\n\n4.2.\tCác\tdịch\tvụ\ttrên\tServer\t...............................................................................................................19\t\t\n\n4.3.\tMột\tsố\tphần\tmềm\tquản\ttrị\tmạng\tphổ\tbiến...........................................................................22\t\t\n\nPHẦN\t5:\tTƯ\tVẤN\tCÁC\tƯU\tKHUYẾT\tĐIỂM,\tHƯỚNG\tPHÁT\tTRIỂN\tVÀ\tMỞ\tRỘNG\tCỦA\tHỆ\t\nTHỐNG\t.......................................................................................................................................................26\t\n\nLỜI\tKẾT\t.....................................................................................................................................................27\t \t\n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 2\t\n\t\n\nLLỜỜI MI MỞỞ  ĐĐẦẦUU  \n\n  \n\nNgày nay, thời đại của nền kinh tế thị trường, thời đại của Công nghệ thông tin đang \n\nbùng nổ trên toàn thế giới. Các công ty, tổ chức mọc lên ngày càng nhiều, hoạt động của các \n\ncông ty ngày càng quy mô, đòi hỏi ngày càng nhiều về trình độ cũng như cơ sở hạ tầng, trang \n\nthiết bị hiện đại. Từ hệ thống quản lý, vận hành sản xuất, hoạch toán kinh tế,\u2026 tất cả đều phải \n\nnhờ vào công cụ là máy tính và hệ thống mạng máy tính, chúng giúp con người có thể làm việc \n\nđược nhanh chóng và đồng thời giúp lưu trữ dữ liệu được lâu dài.  \n\nNói đúng hơn là việc sử dụng máy tính và hệ thống mạng máy tính là không thể thiếu cho \n\nmột công ty, dù là lớn hay nhỏ, cũng như một tổ chức phi kinh tế nào khác. Không những thế đối \n\nvới đời sống của chúng ta bây giờ thì việc sử dụng máy tính và mạng máy tính cũng là một điều \n\nhết sức quan trọng, chính vì vậy mà hệ thống mạng máy tính được nghiên cứu và ra đời. Hệ \n\nthống máy tính có thể giúp cho chúng ta thực hiện công việc hiệu quả hơn rất nhiều lần, giúp con \n\nngười có thể chia sẻ tài nguyên, dữ liệu với nhau một cách dễ dàng và cũng lưu trữ một lượng \n\nlớn thông tin mà rất hiếm khi mất mát hoặc hư hỏng như khi lưu bằng giấy, giúp tìm kiếm thông \n\ntin nhanh chóng,\u2026 Bên cạnh đó còn rất nhiều ứng dụng khác chưa kể đến việc chúng giúp con \n\nngười trong hoạt động giải trí, thư giãn,\u2026 \n\n Vậy thì làm sao chúng ta có thể thiết kế một mô hình mạng máy tính đảm bảo có khoa \n\nhọc, dễ vận hành cũng như dễ thay sửa một khi có sự cố xảy ra? Đó là một yêu cầu lớn đối với \n\nnhững người thiết kế mô hình mạng. Trong đồ án này, chúng ta đi tìm hiểu, phân tích và thiết kế \n\nmột mô hình mạng của một trường đại  học, qua đó có thể trau dồi kiến thức cũng như kinh \n\nnghiệm cho sau này  \n\nBài đồ án này gồm các phần:  \n\nPhần 1: Khảo sát nhu cầu cho mục tiêu thiết kế.  \n\nPhần 2: Sơ đồ thiết kế hạ tầng mạng. \n\nPhần 3: Dự toán chi phí và lựa chọn thiết bị mạng đáp ứng nhu cầu.  \n\nPhần 4: Thực nghiệm triển khai lab mô phỏng trên phần mềm Cisco Packet Tracer \n\nStudent. \n\nPhần 5: Tư vấn các ưu khuyết điểm, hướng phát triển và mở rộng của hệ thống. \n\n \n\n \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 3\t\n\t\n\nPHẦN 1  \n\nKHẢO SÁT NHU CẦU CHO MỤC TIÊU THIẾT KẾ \n\n \n\nMô hình hoạt động của trường yêu cầu thiết kế mạng bao gồm các thông tin được liệt kê \n\nnhư sau: \n\nØ Thông tin về các phòng ban: \n\nü Khu hành chính (tầng 1): bao gồm Phòng Ban giám hiệu (2 nhân viên), Phòng tài \n\nchính (5 nhân viên), Phòng tổ chức hành chính (4 nhân viên), Phòng đào tạo (4 \n\nnhân viên). \n\nü Khu văn phòng khoa (tầng 2): khoa Công nghệ thông tin (CNTT), khoa Quản trị \n\nkinh doanh (QTKD), khoa Ngoại ngữ (NN), khoa Thực phẩm (TP), khoa Xây \n\ndựng (XD). Mỗi khoa 3 nhân viên. \n\nü Khu học tập (tầng 3): gồm các phòng học lý thuyết, 10 phòng, mỗi phòng 1 \n\nđường kết nối internet. \n\nü Khu thực hành 1 (tầng 4): được dùng thực hành khoa CNTT, QTKD. \n\n§ Dãy 1, 2, 3 là khoa CNTT (30 máy tính/dãy).  \n\n§ Dãy 4, 5 là khoa QTKD (30 máy tính/ dãy). \n\nü Khu thực hành 2 (tầng 5): được dùng thực hành các môn tin học của khoa NN, \n\nTP, XD. \n\n§ Dãy 1, 2 là khoa NN (30 máy tính/ dãy). \n\n§ Dãy 3 là khoa TP (30 máy tính/ dãy). \n\n§ Dãy 4, 5 là khoa XD (30 máy tính/ dãy). \n\nü Thư viện (tầng 6): 25 máy tính kết nối internet. \n\nü Triển khai Wireless LAN tại các tầng cho phép sinh viên truy cập không dây, yêu \n\ncầu xác thực mật khẩu để kết nối là 123456789. \n\nü Các máy in, máy quét được tích hợp trực tiếp vào hệ thống mạng của các phòng \n\nban qua cổng giao tiếp RJ45, trừ phòng thực hành và thư viện. \n\nü Phân hoạch VLAN cho các phòng ban. \n\nü Các phòng ban đều có thể truy cập hệ thống máy chủ và đi ra internet. \n\n \n\n \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 4\t\n\t\n\nØ Thông tin về các máy chủ dịch vụ: \n\nü Các máy chủ đặt tại phòng IT (tầng 1) với các dịch vụ sau: \n\n§ Web Server: Nội dung website thông tin trường \n\n§ FTP Server, Mail Server: gồm FTP Server, Mail Server, DNS dự phòng. \n\n§ DNS Server: gồm dịch vụ mạng DNS, DHCP. \n\n§ Server tài chính: gồm dữ liệu tài chính. \n\n§ Server đào tạo: gồm dữ liệu về đào tạo và điểm. \n\nØ Thông tin về đường truyền kết nối internet và chi nhánh: \n\nü Triển khai đường Internet đáp ứng số lượng nhân viên, người dùng nội bộ và \n\nđường internet dự phòng sẽ sẵn sàng nếu đường internet chính có sự cố. \n\nü Thuê kết nối leased line cho phép người dùng bên ngoài có thể truy cập server. \n\nü Triển khai kết nối VPN Site-toSite giữa các cơ sở trong trường hợp mở rộng \n\nmạng. \n\nØ Yêu cầu về giám sát và hướng phát triển của dự án: \n\nü Đề xuất và thiết lập một số phần mềm quản trị mạng đáp ứng yêu cầu như sau: \n\n§ Giám sát trạng thái Web server dựa trên các tham số lưu lượng dữ liệu. \n\n§ Giám sát thiết bị Router, báo cáo về lưu lượng tại kết nối ngõ ra của hệ thống. \n\nØ Triển khai thực nghiệm: \n\nü Cài đặt và cấu hình tại máy tính của nhân viên: Thực hiện việc cài đặt, cấu hình \n\nmáy tính của người dùng và tạo tập tin sao lưu và phục hồi hệ điều hành từ USB \n\nhoặc DVD. Tập tin sao lưu của máy tính có các thành phần sau: \n\n§ Hệ điều hành Windows 7 Professional (32bit hoặc 64bit). \n\n§ Microsoft Office 2007 Professional (tối thiểu phải có Microsoft  Word, Excel, \n\nPower Point và Outlook). \n\n§ Phần mềm gõ dấu tiếng việt (Unikey). \n\n§ Mozzilla Firefox hoặc Google Chrome. \n\n§ Phần mềm nén và giải nén đuôi RAR. \n\n§ Bộ font tiếng Việt cơ bản (VNI-Time, vnTime,\u2026). \n\n§ Phần mềm phòng chống virus (Avast Free,\u2026). \n\n§ Thực nghiệm mô phỏng mô hình đã được thiết kế bằng phần mềm giả lập \n\nhoặc trên thiết bị thực. \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 5\t\n\t\n\nPHẦN 2 \n\nSƠ ĐỒ THIẾT KẾ MẠNG \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 6\t\n\t\n\n \n\n \n\nPHẦN 3 \n\nLỰA CHỌN THIẾT BỊ VÀ DỰ TOÁN CHI PHÍ \n\n \n\nĐơn vị tính: đồng \n\n \n\nTHIẾT BỊ \n\n \n\nSỐ LƯỢNG \n\n \n\nĐƠN GIÁ \n\n \n\nTỔNG \nRouter CISCO 2811-CCME/K9 2 67.410.000 134.820.000 \n\nSwitch CISCO WS-C2960S-\nF48LPS-L ( 48 PORT ) \n\n14 80.120.000 1.121.680.000 \n\nSwitch CISCO CATALYST WS-\nC3560X-48T-S \n\n2 119.070.000 238.140.000 \n\nWireless CISCO AIR-WLC2106-\nK9 \n\n6 50.108.000 300.648.000 \n\nFirewall CISCO ASA5505-SEC-\nBUN-K9 \n\n1 31.683.000 31.683.000 \n\nIBM System x3650 M5 - \n5462B2A (Xeon E5-2609 v3 6C \n\n1.9GHz 15MB cache, 8GB \nTruDDR4, 6 Gb SATA, Quad \n\n1GbE Gigabit Ethernet ) \n\n \n5 \n\n \n48.890.000 \n\n \n\n \n\n244.450.000 \n\n\u2022 All-In-One Asus ET2013IGTI-\nB010M ( Core i3-3220T Ivy \nBridge, 4Gb DDR3, AMD \n\nHD7470M 1G, HHD 500Gb ) \n \n\n \n375 \n\n \n14.250.000 \n\n \n\n5.272.500.000 \n\nCable RJ-45 AMP  1 thùng 1.980.000 1.980.000 \nAMP RJ-45 Connector 200 6.000 1.200.000 \n\nPRINTER EPSON L360 IN, \nSCAN, COPPY \n\n3 4.650.000 13.950.000 \n\nFPT FIBERPLUS - 80MBPS 2 3.500.000 7.000.000 \n\n \nTỔNG CỘNG \n\n \n\n7.365.051.000 \n\n \n\n \n\n \n\n \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 7\t\n\t\n\n \n\nPHẦN 4 \nTHỰC NGHIỆM TRIỂN KHAI LAP MÔ PHỎNG TRÊN PHẦN MÊM SISCO PACKET TRACER \n\nSTUDENT \n \n\n \n\n\u2022 Mô hình LAB mô phỏng (5 Server sẽ được gộp các dịch vụ thành 1 Server để tiện lợi hơn trong \n\nquá trình mô phỏng). \n\n \n\n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 8\t\n\t\n\n4.1. Thông số cấu hình các thiết bị router và switch: \n\n\u2022 Router 1: \n \n \n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 9\t\n\t\n\n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 10\t\n\t\n\n\u2022 Router 4: \n \n \n \n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 11\t\n\t\n\n\u2022 Switch 10:  \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 12\t\n\t\n\n \n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 13\t\n\t\n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 14\t\n\t\n\n\u2022 Switch 11: \n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 15\t\n\t\n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 16\t\n\t\n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 17\t\n\t\n\n\u2022 Switch 1 >>> 6 (tương tự) : \n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 18\t\n\t\n\n\u2022 DHCP và PC: \n \n\n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 19\t\n\t\n\n \n\n \n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 20\t\n\t\n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 21\t\n\t\n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 22\t\n\t\n\n \n  \n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 23\t\n\t\n\n \n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t\n\n\t \t\n\n\t \t\n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 24\t\n\t\n\n\t\n\n\t \t\n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 25\t\n\t\n\nPHẦN\t5\t\n\nTƯ\tVẤN\tCÁC\tƯU\tKHUYẾT\tĐIỂM,\tHƯỚNG\tPHÁT\tTRIỂN\tVÀ\tMỞ\tRỘNG\tCỦA\tHỆ\t\nTHỐNG\t\n\n\u2022 Ưu\tđiểm:\t\nü Hệ\tthống\tdùng\tđồng\tbộ\tthiết\tbị\tcủa\thãng\tCisco\tduy\tnhất\tgiúp\tcho\tsự\tphối\t\n\nhợp\tvận\thành\tgiữa\tcác\tthiết\tbị\tđạt\thiệu\tquả\tcao\tnhất.\t\nü Dễ\tcài\tđặt,\tdễ\tmở\trộng,\tdễ\tcô\tlập\tlỗi.\t\nü 2\tSwitch\tđược\tcấu\thình\tgiao\tthức\tHSRP\tvà\tphân\tbổ\tđường\tmạng\thợp\tlý\tđể\t\n\nchia\ttải\tvà\tdự\tphòng\tkhi\tcó\tsự\tcố.\t\nü Mỗi\tswitch\ttại\tcác\ttầng\tđược\tcấu\thình\tđầy\tđủ\tvlan\tđể\tthuận\ttiện\tcho\tviệc\t\n\nchuyển\tphòng\tlàm\tviệc\tcủa\tnhân\tviên\t\nü Hệ\tthống\tđảm\tbảo\thiệu\tquả\tlàm\tviệc\tvà\thướng\tphát\ttriển\tmở\trộng\thệ\t\n\nthống\ttrong\ttương\tlai\t\n\u2022 Khuyết\tđiểm:\t\n\nü Chi\tphí\tđầu\ttư\tthiết\tbị\tcao\t\nü Server\tcó\tthể\tbị\ttấn\tcông\ttừ\tngười\tdùng\tnội\tbộ\t\n\n\u2022 Hướng\tphát\ttriển\tvà\tmở\trộng\tcủa\thệ\tthống:\t\nü Mạng\tLAN\thiện\tnay\tđược\tsử\tdụng\tmột\tcách\trộng\trãi\tvà\tphổ\tbiến\ttại\tcác\tcơ\t\n\nquan,\txí\tnghiệp.\tƯu\tđiểm\tlớn\tnhất\tcủa\tmạng\tkhông\tdây\tlà\tcho\tphép\tngười\t\nsử\tdụng\tcó\tthể\ttruy\tcập\tbất\tcứ\tlúc\tnào\tvà\tbất\tcứ\tnơi\tđâu.\tThiết\tlập\tmạng\t\nkhông\tdây\tkhông\ttốn\tkém\tthời\tgian,\tcông\tsức\tvà\tkhông\tphức\ttạp\tnhư\tcác\t\nhệ\tthống\tmạng\ttruyền\tthông\tkhác.\tNgoài\tra\thoạt\tđộng\tcủa\tmạng\tổn\tđịnh,\t\ncài\tđặt\tđơn\tgiản,\tgiá\tcả\tphải\tchăng\tlà\tnhững\tyếu\ttố\tđặc\ttrưng\tthể\thiện\tsự\t\nphát\ttriển\tvượt\tbậc\tcủa\tmạng\tkhông\tdây.\tTừ\tnhững\tưu\tđiểm\tvượt\ttrội\tcủa\t\nmạng\tnày,\tchắc\tchắn\ttrong\ttương\tlai\tgần\tmạng\tLAN\tkhông\tdây\tsẽ\tđược\t\nđưa\tvào\tsử\tdụng\trộng\trãi,\tthay\tthế\tcho\ttoàn\tbộ\tmạng\tdây\ttại\tcác\tcơ\tquan,\t\nxí\tnghiệp,\ttrường\thọc,\t\n\nü Có\tthể\tdựng\tthêm\tFirewall\tcho\tServer\tđể\tgia\ttăng\ttính\tbảo\tmật\ttừ\tcác\tcuộc\t\ntấn\tcông\tbên\tngoài,\tđồng\tthời\tngăn\tchặn\tcác\tcuộc\ttấn\tcông\tbên\ttrong\tnội\t\nbộ.\t\n\n\t\n\n\t\n\n\n\n[Project\t\tSemeter\t\t2]\t|\tTran\tVan\tVuong\t\t\tHA-1516-0061\t 26\t\n\t\n\nLỜI\tKẾT\t\n\nQua\tthời\tgian\tnghiên\tcứu\tvà\thoàn\tthành\tđồ\tán,\tchúng\tem\tđã\txây\tdựng\tmột\thệ\t\n\nthống\tmạng\tvới\tcác\tnhu\tcầu\tcủa\tmột\ttrường\tđại\thọc.\tHệ\tthống\tmáy\tchủ\tđặt\ttại\t\n\ntrung\ttâm\tmạng\tvà\tcung\tcấp\tcác\tcông\tcụ\tcho\tviệc\tquản\ttrị\thệ\tthống.\tHệ\tthống\tcáp\t\n\ntruyền\tdẫn\tđảm\tbảo\tkết\tnối\ttốc\tđộ\tcao,\thạn\tchế\tmức\tthấp\tnhất\tnhững\tsự\tcố\txảy\t\n\nra\ttrong\tquá\ttrình\tvận\thành\tvà\tcó\tcả\tđường\tkết\tnối\tdự\tphòng,\tngoài\tra\tcòn\tđáp\t\n\nứng\tđược\tkhả\tnăng\tmở\trộng\ttrong\ttương\tlai.\tTuy\tnhiên,\ttất\tcả\tchỉ\tthực\thiện\tdựa\t\n\ntrên\tmô\tphỏng.\tMong\trằng\ttrong\ttương\tlai\tgần,\tchúng\tem\tsẽ\tcó\tcơ\thội\ttiếp\tcận\t\n\nvới\tthực\ttế\tvà\tcó\tthể\txây\tdựng\tmột\thệ\tthống\tmạng\tvới\tcác\tthiết\tbị\tthực.\tTrong\tquá\t\n\ntrình\tthực\thiện\tđồ\tán,\tchúng\tem\tđã\tnhận\tđược\tsự\tgiúp\tđỡ\ttận\ttình\tcủa\tcô\tLư\tHuệ\t\n\nThu\tgiúp\tchúng\tem\thoàn\tthành\ttốt\tđồ\tán\thọc\tkỳ\tnày.\tVì\tthời\tgian\tlàm\tđồ\tán\thạn\t\n\nhẹp,\tkiến\tthức\tvà\tkinh\tnghiệm\tchưa\tnhiều\tnên\tkhông\ttránh\tkhỏi\tsai\tsót,\trất\tmong\t\n\nnhận\tđược\tsự\tgóp\tý\tcủa\tcác\tthầy\tcô\tvà\tcác\tbạn.\t\n\n\n","m":[-1,-1],"n":"2019.08.08.18.54.35FK6D3XWH.pdf"}}